(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"+9CW":function(e,t,a){},"+BnW":function(e,t,a){},"+V7z":function(e,t,a){},"+ZNJ":function(e,t,a){},"+yrr":function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("c8Bs"),i=a("u3oV"),o=a("Z0Cl"),l=a("Fsnq"),c=a("3Hq1"),d=a("1Lli"),u=a("owWc"),p=a("zmn3"),h=a("lCmp"),m=a("m8R6"),b=a("AFNo"),f=a("peh1"),_=a("k55U");const g=["#FFE0E0","#DBEB8D","#B5E0FF","#FFE5B2","#BDE595","#D4D5FF","#F9EF6E","#D0F2ED","#FFCCFF"];var y=a("Fdc0"),O=a("1YQg"),C=a("4zXV"),v=a("TM4O");const E=Object(b.b)("Sends an invite to the web API from the call window",(e,t,{id:a,invitedUserIds:n})=>(Object(_.f)(Object(v.a)(),"We expect this to run in a call window context"),Promise.all([n.map(t=>e(Object(C.a)({method:"screenhero.rooms.invite",reason:"calls-invite",args:{responder:t,room:a,should_share:!0,cancelable:!0}})))])));E.meta={name:"sendInvites",key:"appCallsFetchersSendInvitesSendInvites",description:"Sends an invite to the web API from the call window"},a.d(t,"D",function(){return I}),a.d(t,"C",function(){return w}),a.d(t,"c",function(){return T}),a.d(t,"G",function(){return N}),a.d(t,"O",function(){return A}),a.d(t,"b",function(){return R}),a.d(t,"P",function(){return M}),a.d(t,"E",function(){return P}),a.d(t,"I",function(){return x}),a.d(t,"J",function(){return L}),a.d(t,"M",function(){return F}),a.d(t,"N",function(){return D}),a.d(t,"L",function(){return B}),a.d(t,"a",function(){return U}),a.d(t,"F",function(){return q}),a.d(t,"H",function(){return H}),a.d(t,"q",function(){return K}),a.d(t,"x",function(){return V}),a.d(t,"n",function(){return z}),a.d(t,"o",function(){return $}),a.d(t,"h",function(){return J}),a.d(t,"z",function(){return Z}),a.d(t,"d",function(){return ee}),a.d(t,"w",function(){return te}),a.d(t,"u",function(){return ae}),a.d(t,"t",function(){return se}),a.d(t,"v",function(){return re}),a.d(t,"k",function(){return ie}),a.d(t,"r",function(){return oe}),a.d(t,"i",function(){return le}),a.d(t,"B",function(){return ce}),a.d(t,"g",function(){return de}),a.d(t,"f",function(){return ue}),a.d(t,"m",function(){return pe}),a.d(t,"l",function(){return he}),a.d(t,"y",function(){return me}),a.d(t,"j",function(){return be}),a.d(t,"s",function(){return fe}),a.d(t,"p",function(){return _e}),a.d(t,"K",function(){return ye}),a.d(t,"A",function(){return Oe});const k=new class ReactionColorManager{constructor(){this.startIndex=Math.floor(Math.random()*(g.length-1))}getSelfColor(){return g[this.startIndex]}getColorForJoinIndex(e){return g[(this.startIndex+1+e)%g.length]}};function S(e,t){return`Could not ${t}: problem with peerId ${e}.`}function j(e){return"self"===e.id}function I(e){return j(e)}function w(e){return j(e)}const T=Object(b.a)("Add a remote peer");T.meta={name:"addRemotePeer",key:"appCallsReduxPeersStoreAddRemotePeer",description:"Add a remote peer"};const N=Object(b.a)("Remove a remote peer");N.meta={name:"removeRemotePeer",key:"appCallsReduxPeersStoreRemoveRemotePeer",description:"Remove a remote peer"};const A=Object(b.a)("Update a peer");A.meta={name:"updatePeer",key:"appCallsReduxPeersStoreUpdatePeer",description:"Update a peer"};const R=Object(b.a)("Add an invited user");R.meta={name:"addInvitedUser",key:"appCallsReduxPeersStoreAddInvitedUser",description:"Add an invited user"};const M=Object(b.a)("Update a response for an invited user");M.meta={name:"updateResponseForInvitedUser",key:"appCallsReduxPeersStoreUpdateResponseForInvitedUser",description:"Update a response for an invited user"};const P=Object(b.a)("Remove an invited user");P.meta={name:"markInviteExpired",key:"appCallsReduxPeersStoreMarkInviteExpired",description:"Remove an invited user"};const x=Object(b.a)("Update a peer's connection");x.meta={name:"setRemotePeerIsConnected",key:"appCallsReduxPeersStoreSetRemotePeerIsConnected",description:"Update a peer's connection"};const L=Object(b.a)("Update the screen share of a peer");L.meta={name:"setRemotePeerScreenshareDoNotDispatch",key:"appCallsReduxPeersStoreSetRemotePeerScreenshareDoNotDispatch",description:"Update the screen share of a peer"};const F=Object(b.a)("Set the ID of the peer selected by the user");F.meta={name:"setUserSelectedPeerId",key:"appCallsReduxPeersStoreSetUserSelectedPeerId",description:"Set the ID of the peer selected by the user"};const D=Object(b.a)("Set the ID of the peer selected by the user");D.meta={name:"unsetUserSelectedPeerId",key:"appCallsReduxPeersStoreUnsetUserSelectedPeerId",description:"Set the ID of the peer selected by the user"};const B=Object(b.a)("Set the ID of the active speaker");B.meta={name:"setSpeakingPeerId",key:"appCallsReduxPeersStoreSetSpeakingPeerId",description:"Set the ID of the active speaker"};const U=Object(b.a)("Add an emoji reaction");U.meta={name:"addEphemeralMessage",key:"appCallsReduxPeersStoreAddEphemeralMessage",description:"Add an emoji reaction"};const q=Object(b.a)("Remove an emoji reaction");q.meta={name:"removeEmojiReaction",key:"appCallsReduxPeersStoreRemoveEmojiReaction",description:"Remove an emoji reaction"};const H=Object(b.a)("Send an emoji reaction");H.meta={name:"sendEphemeralMessage",key:"appCallsReduxPeersStoreSendEphemeralMessage",description:"Send an emoji reaction"};const W={self:{id:"self",isMicrophoneEnabled:!0,isDrawEnabled:!0,reactionColor:k.getSelfColor(),drawHue:Math.floor(360*Math.random())},invitedUsers:{},byId:{},leftById:{},reacjis:[],reacjiShownCounter:0,remotePeerJoinedCounter:0},G=Object(b.d)({},W,{storeKey:"peers",persistenceEnabled:!1}).on(T,(e,t)=>{Object(_.f)(!e.byId[t.id],S(t.id,"addRemotePeer"));const a=e.remotePeerJoinedCounter;return s()(s()(s()({},e),{remotePeerJoinedCounter:e.remotePeerJoinedCounter+1,lastRemoteScreensharePeerId:ge(e,t),byId:s()(s()({},e.byId),{[t.id]:s()(s()({},t),{joinIndex:a,reactionColor:k.getColorForJoinIndex(a)})})}),e.invitedUsers[t.userId]?{invitedUsers:s()(s()({},e.invitedUsers),{[t.userId]:s()(s()({},e.invitedUsers[t.userId]),{isExpired:!0})})}:null)}).on(N,(e,t)=>{const a=e.byId[t];return Object(_.f)(!!a,"Peer should exist in order to remove"),s()(s()({},e),{speakingPeerId:e.speakingPeerId===t?void 0:e.speakingPeerId,userSelectedPeerId:e.userSelectedPeerId===t?void 0:e.userSelectedPeerId,lastRemoteScreensharePeerId:e.lastRemoteScreensharePeerId===t?void 0:e.lastRemoteScreensharePeerId,byId:s()({},Object(m.a)(e.byId,t)),leftById:s()(s()({},e.leftById),{[a.id]:s()({},a)})})}).on(R,(e,{userId:t,isCancelable:a=!0})=>s()(s()({},e),{invitedUsers:s()(s()({},e.invitedUsers),{[t]:{response:"pending",isCancelable:a,isExpired:!1}})})).on(M,(e,{userId:t,response:a})=>s()(s()({},e),{invitedUsers:s()(s()({},e.invitedUsers),{[t]:s()(s()({},e.invitedUsers[t]),{response:a})})})).on(P,(e,t)=>s()(s()({},e),{invitedUsers:s()(s()({},e.invitedUsers),{[t]:s()(s()({},e.invitedUsers[t]),{isExpired:!0})})})).on(A,(e,t)=>I(t)?s()(s()({},e),{self:s()(s()(s()({},e.self),t),!Object(c.a)(t.isScreenshareEnabled)&&{isHostDrawEnabled:!1})}):(Object(_.f)(!!e.byId[t.id],S(t.id,"updatePeer")),s()(s()({},e),{byId:s()(s()({},e.byId),{[t.id]:s()(s()({},e.byId[t.id]),t)})}))).on(L,(e,t)=>(Object(_.f)(!!e.byId[t.id],S(t.id,"setRemotePeerScreenshare")),s()(s()({},e),{lastRemoteScreensharePeerId:ge(e,t),byId:s()(s()({},e.byId),{[t.id]:s()(s()({},e.byId[t.id]),t)})}))).on(x,(e,{id:t,isConnected:a})=>(Object(_.f)(!!e.byId[t],S(t,"setRemotePeerIsConnected")),s()(s()(s()({},e),!a&&{lastRemoteScreensharePeerId:ge(e,{id:t,isScreenshareEnabled:!1})}),{byId:s()(s()({},e.byId),{[t]:s()(s()(s()({},e.byId[t]),{isConnected:a}),!a&&{isCameraEnabled:!1,isScreenshareEnabled:!1})})}))).on(F,(e,t)=>("self"!==t&&Object(_.f)(!!e.byId[t],S(t,"setUserSelectedPeerId")),s()(s()({},e),{userSelectedPeerId:t}))).on(D,e=>s()(s()({},e),{userSelectedPeerId:void 0})).on(B,(e,t)=>(Object(_.f)(!!e.byId[t],S(t,"setSpeakingPeerId")),s()(s()({},e),{speakingPeerId:t}))).on(U,(e,t)=>{const a=e.reacjiShownCounter+1;return s()(s()({},e),{reacjiShownCounter:a,reacjis:[{peerId:t.peerId,emoji:t.emoji,id:a,isEmoji:t.isEmoji},...e.reacjis]})}).on(q,(e,t)=>{const a=e.reacjis.filter(e=>e.id!==t);return s()(s()({},e),{reacjis:a})});t.e=G;const K=Object(b.e)((e,t)=>{const a=e.peers;if("self"===t)return a.self;const n=a.byId[t];return Object(_.f)(!!n,S(t,"getPeer")),n});K.meta={name:"getPeer",key:"appCallsReduxPeersStoreGetPeer"},Object(b.e)((e,t)=>{const a=e.peers.byId[t];return Object(_.f)(!!a,S(t,"getPeer")),a}).meta={name:"getRemotePeer",key:"appCallsReduxPeersStoreGetRemotePeer"};const V=Object(b.e)(e=>e.peers.self);V.meta={name:"getSelf",key:"appCallsReduxPeersStoreGetSelf"};const z=Object(b.e)((e,t)=>"self"===t?e.peers.self:$(e,t));z.meta={name:"getMaybeLeftPeer",key:"appCallsReduxPeersStoreGetMaybeLeftPeer"};const $=Object(b.e)((e,t)=>{const a=e.peers,n=a.byId[t],s=a.leftById[t];return Object(_.f)(!!n||!!s,`No record of peer ever existing with id: ${t}`),n||s});$.meta={name:"getMaybeLeftRemotePeer",key:"appCallsReduxPeersStoreGetMaybeLeftRemotePeer"};const Y=Object(b.e)(e=>e.peers.leftById);Y.meta={name:"getLeftPeers",key:"appCallsReduxPeersStoreGetLeftPeers"};const Q=Object(b.e)(e=>e.peers.invitedUsers);Q.meta={name:"getAllInvitedUsers",key:"appCallsReduxPeersStoreGetAllInvitedUsers"};const X=Object(f.createSelector)(Q,e=>Object(i.a)(e,({isExpired:e})=>!e)),J=Object(f.createSelector)(Q,e=>Object.keys(e)),Z=Object(f.createSelector)(X,e=>Object.keys(e)),ee=Object(f.createSelector)(Q,e=>0!==Object(l.a)(e)&&Object(r.a)(e,e=>e.response===O.c.DoNotDisturb)),te=Object(b.e)(e=>e.peers.byId);te.meta={name:"getRemotePeers",key:"appCallsReduxPeersStoreGetRemotePeers"};const ae=Object(f.createSelector)(te,e=>Object(p.a)(e,"userId")),ne=Object(f.createSelector)(te,e=>Object(d.a)(e,"joinIndex","desc")),se=Object(f.createSelector)(ne,e=>Object(p.a)(e,"id")),re=Object(f.createSelector)(ne,e=>Object(p.a)(e,"userId")),ie=Object(b.e)(e=>!!Object.keys(e.peers.byId).length||!!Object.keys(e.peers.leftById).length);ie.meta={name:"getHasRemotePeerEverJoined",key:"appCallsReduxPeersStoreGetHasRemotePeerEverJoined"};Object(f.createSelector)(te,e=>Object(h.a)(e,({isScreenshareEnabled:e})=>!!e));const oe=Object(f.createSelector)(X,e=>Object(u.a)(e,(e,{response:t,isExpired:a},n)=>(("pending"===t||t===O.c.Accept&&!a)&&e.push(n),e),[])),le=Object(f.createSelector)(X,e=>Object(o.a)(e,({isCancelable:e})=>e)),ce=Object(f.createSelector)(Q,te,Y,e=>e.activeCall.conversationId,(e,t,a,n)=>!Object(l.a)(t)&&!Object(l.a)(a)&&Object(l.a)(e)&&!!n&&!Object(O.o)(n)&&Object(r.a)(e,e=>"pending"!==e.response&&e.response!==O.c.Accept)),de=Object(b.e)(e=>me(e)||e.peers.lastRemoteScreensharePeerId||e.peers.speakingPeerId||Number(Object.keys(e.peers.byId)[0]));de.meta={name:"getActivePeerId",key:"appCallsReduxPeersStoreGetActivePeerId"};const ue=Object(f.createSelector)(oe,e=>e[0]),pe=Object(b.e)(e=>{const t=de(e);return!!t&&!!K(e,t).isScreenshareEnabled});pe.meta={name:"getIsActivePeerScreenSharing",key:"appCallsReduxPeersStoreGetIsActivePeerScreenSharing"};const he=Object(b.e)(e=>{const t=de(e);return!!t&&!!K(e,t).isCameraEnabled});he.meta={name:"getIsActivePeerCameraEnabled",key:"appCallsReduxPeersStoreGetIsActivePeerCameraEnabled"};const me=Object(b.e)(e=>e.peers.userSelectedPeerId);me.meta={name:"getUserSelectedPeerId",key:"appCallsReduxPeersStoreGetUserSelectedPeerId"};const be=Object(b.e)(e=>{const t=V(e);if(t.isScreenshareEnabled&&t.screens)return t.screens[t.thumbnailIndex||0]});be.meta={name:"getCurrentlySharedScreen",key:"appCallsReduxPeersStoreGetCurrentlySharedScreen"};const fe=Object(b.e)(e=>e.peers.reacjis);fe.meta={name:"getReactions",key:"appCallsReduxPeersStoreGetReactions"};const _e=Object(b.e)((e,t)=>Object(y.W)(e,$(e,t).userId));function ge(e,t){const a=t.isScreenshareEnabled;if(e.lastRemoteScreensharePeerId!==t.id||a)return a&&t.id||e.lastRemoteScreensharePeerId}_e.meta={name:"getMemberNameByRemotePeerId",key:"appCallsReduxPeersStoreGetMemberNameByRemotePeerId"};const ye=Object(b.f)("Set the screen sharing of a peer. If screen sharing is turned on, turn off our screen share",(e,t,{id:a,isScreenshareEnabled:n})=>{e(L({id:a,isScreenshareEnabled:n})),n&&e(A({id:"self",isScreenshareEnabled:!1}))});ye.meta={name:"setRemoteScreenshareAndDisableForSelf",key:"appCallsReduxPeersStoreSetRemoteScreenshareAndDisableForSelf",description:"Set the screen sharing of a peer. If screen sharing is turned on, turn off our screen share"};const Oe=Object(b.f)("Invite new members to an existing call",(e,t,a)=>{const n=t();Object(_.b)(n.activeCall.id,"Must have an active call to send an invite")&&(a.forEach(t=>e(R({userId:t}))),e(E({id:n.activeCall.id,invitedUserIds:a})))});Oe.meta={name:"inviteMembersToCall",key:"appCallsReduxPeersStoreInviteMembersToCall",description:"Invite new members to an existing call"}},"/6P7":function(e,t,a){},"/9ln":function(e,t,a){"use strict";var n=a("aK/h"),s=a("QbLZ"),r=a.n(s),i=a("4zXV"),o=a("om+M"),l=a("hOQf");const c=Object(o.a)("Deletes a message",(e,t,a)=>{const n=a.channelId,s=a.ts,o=a.broadcastDelete;var d=a.attempts;const u=void 0===d?0:d,p=a.reason;if(Object(l.tb)(s))return Promise.reject(new Error("message_not_found"));const h={channel:n,ts:s};return o&&(h.broadcast_delete=!0),e(Object(i.a)({method:"chat.delete",args:h,reason:p})).catch(({data:t={}})=>{if("message_not_found"===t.error&&u<10){const t=175;return Promise.delay(t).then(()=>e(c(r()({},a,{attempts:u+1}))))}return Promise.reject(new Error(t.error||"unknown_error"))})});c.meta={name:"chatDeleteApi",key:"fetchersChatDeleteApiChatDeleteApi",description:"Deletes a message"},c.propTypes={channelId:n.default.string,ts:n.default.string,broadcastDelete:n.default.bool,attempts:n.default.number,reason:n.default.string.isRequired};var d=c;const u=Object(o.a)("Deletes a join/leave message rollup",(e,t,a)=>{const n={channel_id:a.channelId,first_message_ts:a.firstMessageTs,last_message_ts:a.lastMessageTs};return e(Object(i.a)({method:"chat.deleteBulkJoinLeave",args:n}))});u.meta={name:"chatDeleteApi",key:"fetchersChatBulkDeleteApiChatDeleteApi",description:"Deletes a join/leave message rollup"},u.propTypes={channelId:n.default.string,firstMessageTs:n.default.string,lastMessageTs:n.default.string};var p=u,h=a("XfeM"),m=a("4M+g"),b=a("DTfP"),f=a("ejSh"),_=a("fYfO"),g=a("pfyZ"),y=a("MhQa");const O=Object(h.b)("Animate a message deletion as well as calling the delete API endpoint",(e,t,{channelId:a,ts:n,broadcastDelete:s=!1,rollupTimestamps:r}={})=>{const i=t(),o=Object(_.a)(i,a,n),c=r&&r.length>1;if(!o)return Promise.resolve();if(c||Object(l.S)(o)||s||e(Object(g.a)({channelId:a,ts:n})),Object(l.tb)(n)||Object(l.bb)(o))return Promise.resolve();if(c){const t=r[0],n=r.pop();return e(p({channelId:a,firstMessageTs:t,lastMessageTs:n}))}return e(d({channelId:a,ts:n,broadcastDelete:s,reason:"animateAndDeleteMessageApi"})).then(()=>{if(Object(l.lb)(o)&&!s){const e=Object(m.e)(t(),a);Object(y.g)(e,o)}}).catch(t=>{throw"message_not_found"!==t.message&&(e(Object(g.a)({channelId:a,ts:n,isDeleting:!1})),s?e(Object(f.l)({channelId:a,ts:n})):(e(Object(b.b)({channelId:a,timestamps:[n]})),e(Object(f.a)([o])))),t})});O.meta={name:"animateAndDeleteMessageApi",key:"actionsAnimateAndDeleteMessageApiAnimateAndDeleteMessageApi",description:"Animate a message deletion as well as calling the delete API endpoint"},O.propTypes={channelId:n.default.string.isRequired,ts:n.default.string.isRequired,broadcastDelete:n.default.bool,rollupTimestamps:n.default.array};t.a=O},"/FWe":function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("XHGt"),i=a("aK/h"),o=a("TSYQ"),l=a.n(o),c=a("Uk1S");a("G59f");i.default.node,i.default.string,i.default.oneOf(["light","dense"]);const d={className:void 0,children:void 0,theme:"light"};class MessageIndent extends n.Component{render(){var e=this.props;const t=e.children;if("light"===e.theme)return t;const a=l()("c-message_kit__indent",this.props.className);return s.a.createElement("div",{className:a},t)}}MessageIndent.displayName="MessageIndent",MessageIndent.defaultProps=d,t.a=Object(r.b)(e=>({theme:Object(c.a)(e)}))(MessageIndent)},"/PGu":function(e,t,a){},"/Qam":function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("XHGt"),o=a("aK/h"),l=a("nNoG"),c=a("MREy"),d=a("rz65"),u=a("4Twu"),p=a("llxT"),h=a("od5y"),m=a("RAhH"),b=a("0SzJ"),f=a("t85p"),_=a("XL7r"),g=a("dxEi"),y=a("7dYf"),O=a("6kok"),C=a("/LVU"),v=a("kcos"),E=a("qN/r"),k=a("jcvV"),S=a("dohy"),j=a("mqzt"),I=a("negh"),w=a("kOzZ");const T=new l.b("do_not_disturb"),N=(o.default.func.isRequired,o.default.object,o.default.object,o.default.func,o.default.func,o.default.func,o.default.object,o.default.func,o.default.bool,o.default.bool,o.default.bool.isRequired,o.default.bool.isRequired,o.default.bool.isRequired,{currentChannel:{},menuProps:{},openDndDialog:n.a,openChannelNotificationPrefsModal:n.a,openPrefsModal:n.a,clogger:{track:n.a},setUserPrefByApi:n.a,showNotificationScheduleNewBadge:!1,featureGranularDnd:!1});class DndDisabledMenu extends s.PureComponent{constructor(e){super(e),this.onClickDoNotDisturbSchedule=this.onClickDoNotDisturbSchedule.bind(this),this.onClickNotificationPreferences=this.onClickNotificationPreferences.bind(this)}onClickDoNotDisturbSchedule(){var e=this.props;const t=e.featureGranularDnd,a=e.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"}),t&&a&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:!0})}onClickNotificationPreferences(){this.props.openPrefsModal({activeSection:"notifications"})}renderSettingsMenuItem(){const e=this.props.currentChannel;if(!e.id||Object(O.ib)(e))return null;const t=r.a.createElement(u.a,{channelId:e.id,iconProps:{inherit:!0,align:"baseline"},inline:!0}),a=T.rt("Settings for {name}\u2026",{name:r.a.createElement("strong",null,t),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return r.a.createElement(c.b,{label:a,onSelected:()=>this.props.openChannelNotificationPrefsModal({channelId:e.id,entryPoint:"dnd_disabled_menu"})})}render(){var e=this.props;const t=e.menuProps,a=e.clogger,n=e.featureGranularDnd,s=e.showNotificationScheduleNewBadge,i=e.featureOfflineMode,o=e.isOffline,l=e.isIAP1Enabled;let u,f,_;return n&&(u=T.t("Do Not Disturb allows you to pause your Slack notifications"),f=r.a.createElement("span",{className:"p-dnd_menu__new_pill"},T.t("NEW")),_=s?r.a.createElement("span",null,T.t("Notification schedule\u2026")," ",f):T.t("Notification schedule\u2026")),r.a.createElement(c.f,t,r.a.createElement(c.c,{label:n?T.t("Do Not Disturb"):T.t("Pause notifications")}),n&&r.a.createElement(m.c,{tip:u,position:"right",zIndex:"above_fs"},r.a.createElement(p.a,{className:"p-dnd_menu_question_button"},r.a.createElement(h.b,{type:"question-circle"}))),r.a.createElement(c.b,{type:d.a.subheaderChild,label:T.t("30 minutes"),onSelected:()=>{this.props.snoozeNotifications({duration:30,reason:"DndDisabledMenu:30m"}),a.track(I.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:30,dnd_preset:I.DndPreset.DURATION_30_MINUTES,dnd_snooze_type:I.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_30",disabled:i&&o,showOfflineIcon:i&&o}),r.a.createElement(c.b,{type:d.a.subheaderChild,label:T.t("1 hour"),onSelected:()=>{this.props.snoozeNotifications({duration:60,reason:"DndDisabledMenu:1hr"}),a.track(I.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:60,dnd_preset:I.DndPreset.DURATION_1_HOUR,dnd_snooze_type:I.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_60",disabled:i&&o,showOfflineIcon:i&&o}),r.a.createElement(c.b,{type:d.a.subheaderChild,label:T.t("2 hours"),onSelected:()=>{this.props.snoozeNotifications({duration:120,reason:"DndDisabledMenu:2hr"}),a.track(I.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:120,dnd_preset:I.DndPreset.DURATION_2_HOURS,dnd_snooze_type:I.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_120",disabled:i&&o,showOfflineIcon:i&&o}),!l&&r.a.createElement(c.b,{type:d.a.subheaderChild,label:T.t("4 hours"),onSelected:()=>{this.props.snoozeNotifications({duration:240,reason:"DndDisabledMenu:4hr"}),a.track(I.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:240,dnd_preset:I.DndPreset.DURATION_4_HOURS,dnd_snooze_type:I.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_240",disabled:i&&o,showOfflineIcon:i&&o}),r.a.createElement(c.b,{type:d.a.subheaderChild,label:l?"Tomorrow":T.t("Until tomorrow"),onSelected:()=>{const e=Object(j.d)();this.props.snoozeNotifications({duration:e,reason:"DndDisabledMenu:tomorrow"}),a.track(I.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:e,dnd_preset:I.DndPreset.DURATION_TOMORROW,dnd_snooze_type:I.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_tomorrow",disabled:i&&o,showOfflineIcon:i&&o}),!l&&r.a.createElement(c.b,{type:d.a.subheaderChild,label:T.t("Until next week"),onSelected:()=>{const e=Object(j.c)();this.props.snoozeNotifications({duration:e,reason:"DndDisabledMenu:week"}),a.track(I.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:e,dnd_preset:I.DndPreset.DURATION_NEXT_WEEK,dnd_snooze_type:I.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_next_week",disabled:i&&o,showOfflineIcon:i&&o}),r.a.createElement(c.b,{type:d.a.subheaderChild,label:T.t("Custom\u2026"),onSelected:()=>{this.props.openDndDialog(),a.track(I.EventId.DND_OPEN_CUSTOM_SNOOZE_DIALOG)},"data-qa":"snooze_btn_custom",disabled:i&&o,showOfflineIcon:i&&o}),r.a.createElement(c.d,null),r.a.createElement(c.b,{label:n?_:T.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!n&&!l&&r.a.createElement(c.d,null),!n&&!l&&this.renderSettingsMenuItem(),!n&&!l&&r.a.createElement(c.b,{label:T.t("Your notification preferences\u2026"),onSelected:this.onClickNotificationPreferences}),l&&r.a.createElement(b.a,null))}}DndDisabledMenu.displayName="DndDisabledMenu",DndDisabledMenu.defaultProps=N;t.a=Object(i.b)(e=>({clogger:Object(w.a)({state:e}),featureGranularDnd:Object(f.m)(e,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(_.k)(e,"dnd_notification_schedule_new_badge_seen"),featureOfflineMode:Object(f.m)(e,"feature_offline_mode"),isOffline:!Object(g.c)(e),isIAP1Enabled:Object(v.c)(e)}),e=>({snoozeNotifications:t=>e(Object(C.e)(t)),openDndDialog:()=>e(Object(S.a)()),openChannelNotificationPrefsModal:t=>e(Object(k.a)(t)),setUserPrefByApi:t=>e(Object(y.f)(t)),openPrefsModal:t=>e(Object(E.a)(t))}))(DndDisabledMenu)},"/UDf":function(e,t,a){},"/VNe":function(e,t,a){},"/X+W":function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a("P1FA");function s(e){return Object(n.a)((e||"").trim().toLowerCase())}},"/e6G":function(e,t,a){},"/gIb":function(e,t,a){},"/xs0":function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("OL4R"),i=a("+Z1G"),o=a("qAkX"),l=a("q1tI"),c=a("aK/h"),d=a("XHGt"),u=a("RMmo"),p=a("brL+"),h=a("nNoG"),m=a("x3CK"),b=a("lhZz"),f=a("yHhI"),_=a("LWrH"),g=a("gLeh");const y={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},O=Object(r.a)(y);c.default.array.isRequired,c.default.string.isRequired,c.default.string,c.default.func.isRequired,c.default.object.isRequired,c.default.bool;let C=!1;class GlobalKeyCommandHandler extends l.PureComponent{componentDidMount(){const e=this.props.logger;C?e.error("More than one global key command handler was mounted"):this.initializeKeyCommands()}componentDidUpdate(e){e.keyboardLocale!==this.props.keyboardLocale&&this.keyCommands&&(this.destroyKeyCommands(),this.initializeKeyCommands())}componentWillUnmount(){this.keyCommands&&this.destroyKeyCommands()}getFilterFunctionWithInjectedState(e){return t=>e(Object(b.getStateByTeamId)(this.props.teamId),this.getMetaDataPayload(t))}getMetaDataPayload(e){return{event:e,keyCode:Object(h.i)(e.keyCode,{kb:this.props.keyboardLocale,useReverseMap:!0}),isScreenReaderEnabled:this.props.isScreenReaderEnabled}}getLocalizedKeys(e){const t=this.props.keyboardLocale;return t===m.a?e:e.map(e=>{const a=e.split("+"),n=O[Object(o.a)(a)];if(!n)return e;const s=Object(h.i)(n,{kb:t});if(!s)return e;const r=y[s];return r?[...Object(i.a)(a,1),r].join("+"):e})}initializeKeyCommands(){const e=this.props.commands;this.keyCommands=new u.a(window),this.keyCommands.bindAll(this.connectCommandsWithRedux(e)),C=!0}destroyKeyCommands(){this.keyCommands.reset(),this.keyCommands=null,C=!1}connectCommandsWithRedux(e){return e.map(e=>s()({},e,{keys:this.getLocalizedKeys(e.keys),handler:t=>{this.props.dispatch(e.handler(this.getMetaDataPayload(t)))},filter:e.ignoreIf?this.getFilterFunctionWithInjectedState(e.ignoreIf):void 0}))}render(){return!1}}GlobalKeyCommandHandler.displayName="GlobalKeyCommandHandler",GlobalKeyCommandHandler.defaultProps={keyboardLocale:null,isScreenReaderEnabled:!1};const v=Object(d.b)(e=>({teamId:Object(p.b)(e),logger:Object(f.a)(e),isScreenReaderEnabled:Object(g.b)(e)}))(GlobalKeyCommandHandler);t.a=Object(_.a)(v)},"02hs":function(e,t,a){"use strict";var n=a("Z7NI"),s=a("FQfs");t.a=Object(n.a)(s.a,{useShortMode:!0})},"05X0":function(e,t,a){},"07TJ":function(e,t,a){},"08gB":function(e,t,a){},"0BC7":function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("xWuZ"),i=a("lE2N"),o=a("7EGn"),l=a("q1tI"),c=a.n(l),d=a("aK/h"),u=a("XHGt"),p=a("1hAG"),h=a("G4ux"),m=a("t85p"),b=a("KGMq"),f=a("5mKg"),_=a("nNoG"),g=a("Smdl"),y=a("x4bP"),O=a("um7Q"),C=a("MREy");const v=new _.b("global_nav"),E=(d.default.object,d.default.arrayOf(d.default.shape({id:d.default.string,name:d.default.string,teams:d.default.arrayOf(d.default.object)})),d.default.arrayOf(d.default.shape({id:d.default.string,name:d.default.string,url:d.default.string})),d.default.string,d.default.string,d.default.string,d.default.bool,d.default.bool,d.default.func.isRequired,{menuProps:void 0,enterprises:[],others:[],currentEnterpriseId:void 0,currentUserId:void 0,signinURL:void 0,featureGlobalNav:!1,featureClassicNav:!1});class SwitchWorkspacesSubmenu extends l.Component{constructor(e){super(e),this.getTeamItem=this.getTeamItem.bind(this),this.getEnterpriseItems=this.getEnterpriseItems.bind(this),this.getOtherItems=this.getOtherItems.bind(this)}getTeamItem(e){var t=this.props;const a=t.featureGlobalNav,n=t.featureClassicNav;if(!a&&!n)return null;if(!e.url)return null;const s=Object(g.a)()?Object(f.n)({domain:"app"},`client/${e.id}${window.location.search}`):e.url+("/"===e.url.substr(-1)?"messages":"/messages"),r=e.icons&&(e.icons.image_44||e.icons.image_88);return{label:c.a.createElement(l.Fragment,null,c.a.createElement("div",{className:"p-global_nav__top_switch_workspaces_icon",style:{backgroundImage:`url(${r})`}}),c.a.createElement("strong",null,e.name)),href:s,target:"_self",showLinkIndicatorIcon:!1}}getEnterpriseItems(){var e=this.props;const t=e.enterprises,a=e.currentEnterpriseId,n=e.currentUserId,s=e.featureGlobalNav,i=e.featureClassicNav;return s||i?Object(r.a)(t.map(e=>{const t=e.teams.map(this.getTeamItem),s=e.id===a&&e.overLimit?{label:v.rt("See all <strong>{enterpriseName}</strong> workspaces",{enterpriseName:e.name}),click:()=>this.props.openFindMoreWorkspacesModal(n)}:null;return[{type:"header",label:e.name},...t,s,{type:"separator"}]})):[]}getOtherItems(){var e=this.props;const t=e.others,a=e.featureGlobalNav,n=e.featureClassicNav;if(!a&&!n)return[];if(!t||!t.length)return[];const s=t.map(e=>this.getTeamItem(e));return[{type:"header",label:v.t("Your other workspaces")},...s]}render(){var e=this.props;const t=e.signinURL,a=e.featureGlobalNav,n=e.featureClassicNav,r=e.menuProps;if(!a&&!n)return null;const i=t&&[{type:"separator"},{label:v.t("Sign in to another workspace"),href:t}],o=[...this.getEnterpriseItems(),...this.getOtherItems(),...i||[]];return c.a.createElement(C.a,s()({},r,{template:o,stripTerminalSeparators:!0}))}}SwitchWorkspacesSubmenu.displayName="SwitchWorkspacesSubmenu",SwitchWorkspacesSubmenu.defaultProps=E;const k={openFindMoreWorkspacesModal:(...e)=>Object(b.a)(...e)};t.a=Object(u.b)(e=>{const t=(e=>{let t=Object(m.h)(e).map(e=>({id:e.team_id,enterpriseId:e.enterprise_id,url:e.team_url,name:e.team_name,enterpriseName:e.enterprise_name,icons:e.team_icon}));if(!Object(y.a)()){const a=Object(h.b)(e);(Object(o.a)(a,"enterprise_user.teams")||[]).map(t=>Object(p.i)(e,t)).forEach(n=>{t.push({id:n.id,enterpriseId:Object(o.a)(a,"enterprise_user.enterprise_id")||n.enterprise_id,url:Object(O.b)(e,n.domain),name:Object(f.e)(n),enterpriseName:Object(o.a)(a,"enterprise_user.enterprise_name")||n.enterprise_name,icons:n.icon,isUnknown:Object(f.M)(n)})})}const a=Object(p.d)(e),n=a.enterprise_id;t=t.sort((e,t)=>{if(n){if(e.enterpriseId===n&&t.enterpriseId!==n)return-1;if(t.enterpriseId===n&&e.enterpriseId!==n)return 1}return!e.isUnknown&&t.isUnknown?-1:!t.isUnknown&&e.isUnknown?1:Object(_.r)(e.name,t.name)});const s=a.id;return t=t.filter(e=>e.id!==s),Object(i.a)(t,"id")})(e);return{enterprises:(e=>{const t={};return e.filter(e=>e.enterpriseId).forEach(e=>{const a=e.enterpriseId;t[a]?t[a].teams.length<3?t[a].teams.push(e):t[a].overLimit=!0:t[a]={id:a,name:e.enterpriseName,teams:[e]}}),Object.values(t)})(t),others:t.filter(e=>!e.enterpriseId),currentEnterpriseId:Object(p.d)(e).enterprise_id,currentUserId:Object(m.d)(e),signinURL:Object(m.f)(e,"signin_url"),featureGlobalNav:Object(m.m)(e,"feature_global_nav"),featureClassicNav:Object(m.m)(e,"feature_classic_nav")}},k)(SwitchWorkspacesSubmenu)},"0Eo7":function(e,t,a){},"0Mct":function(e,t,a){"use strict";var n=a("XfeM"),s=a("S3eg"),r=a("5tH5");const i=Object(n.b)("Switches to the All Threads view",e=>{e(Object(s.a)({id:r.a.allThreads}))});i.meta={name:"openThreadsView",key:"actionsOpenThreadsViewOpenThreadsView",description:"Switches to the All Threads view"},t.a=i},"0Qg5":function(e,t,a){"use strict";a.d(t,"a",function(){return b}),a.d(t,"b",function(){return _});var n=a("QbLZ"),s=a.n(n),r=a("jo6Y"),i=a.n(r),o=a("NFsq"),l=a("HI9p"),c=a("nNoG"),d=a("x3CK"),u=a("rWF5"),p=a("g5qt");const h=new c.b("shortcuts_flexpane"),m=/key_(Cmd|Option|Ctrl|CtrlAlternative|ShiftAlternative)/,b=(e,t)=>{const a=Object(u.E)(),n=Object(u.p)(),s=a||n;return"Cmd"!==e&&"Ctrl"!==e||!s||"de"!==t?"Cmd"===e&&s?"Ctrl":"Option"===e&&s?"Alt":"CtrlAlternative"===e?"Ctrl":"ShiftAlternative"===e?"Shift":e:"Strg"},f=e=>t=>{const a=t.keys,n=t.keysWin,r=t.keysLinux,o=i()(t,["keys","keysWin","keysLinux"]);if(Object(u.E)()&&n)return s()({},o,{keys:n});if(Object(u.p)()&&r)return s()({},o,{keys:r});const l=(e=>t=>{if(!m.test(t))return t;const a=t.split("key_")[1];if(!a)return t;const n=b(a,e);return t.replace(a,n)})(e);return s()({},o,{keys:a.map(l)})},_=({keyboardLocale:e,enableUnreadView:t,featureWysiwygComposer:a,featureContextualMessageShortcuts:n=!1,featureMessageNavigationShortcuts:r=!1,featureAppViewsReminders:c=!1,isIAPhase1Enabled:m=!1}={})=>{const b=[{title:h.t("Basics"),id:"basics",shortcuts:[{title:h.t("Quick Switcher"),keys:p.V?["key_Cmd","key_K","  or  ","key_T"]:["key_Cmd","key_K"],hasInfoButton:!0,infoButtonMessage:h.t("Jump to another conversation by just typing its name"),id:"quick_switcher"},{title:h.t("Browse DMs"),keys:["key_Cmd","key_Shift","key_K"],id:"browse_dms"},{title:h.t("Browse channels",{ns:"channel_browser"}),keys:["key_Cmd","key_Shift","key_L"],id:"browse_channels"},{title:h.t("Edit last message (in empty text input)"),keys:r?["key_Cmd","key_\u2191"]:["key_\u2191"]},{title:h.t("Back in history"),keys:["key_Cmd","key_["],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["de","fr"]},{title:h.t("Forward in history"),keys:["key_Cmd","key_]"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["de","fr"]},{title:h.t("Back in history"),keys:["key_Cmd","key_\u2190"],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["us","gb","es","ja"]},{title:h.t("Forward in history"),keys:["key_Cmd","key_\u2192"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["us","gb","es","ja"]},{title:h.t("All Unreads"),keys:["key_Cmd","key_Shift","key_A"],id:"open_all_unreads"},{title:h.t("Threads"),keys:["key_Cmd","key_Shift","key_T"],id:"open_all_threads",isSsbOnly:!0},{title:h.t("Search"),keys:["key_Cmd","key_F"],isSsbOnly:!0},{title:h.t("Dismiss dialogs"),keys:["key_Esc"]}]},{title:h.t("Navigation"),id:"navigation",shortcuts:[{title:h.t("Move focus to the next element"),keys:["key_Tab"]},{title:h.t("Move focus to the previous element"),keys:["key_Shift","key_Tab"]},{title:h.t("Move focus through messages"),keys:["key_\u2191","  or  ","key_\u2193"]},{title:h.t("Move focus to the next section"),keys:p.V?["key_F6"]:["key_Cmd","key_F6"]},{title:h.t("Move focus to the previous section"),keys:p.V?["key_Shift","key_F6"]:["key_Cmd","key_Shift","key_F6"]},{title:h.t('Take action or "click" on selected element'),keys:["key_Enter"]},{title:h.t("Increase text size"),keys:["key_Cmd","key_+"]},{title:h.t("Decrease text size"),keys:["key_Cmd","key_-"]},{title:h.t("Scroll up"),keys:["key_\u2191","  or  ","key_Page Up"]},{title:h.t("Scroll down"),keys:["key_\u2193","  or  ","key_Page Down"]},{title:h.t("Scroll to previous day"),keys:["key_Shift","key_Page Up"]},{title:h.t("Scroll to next day"),keys:["key_Shift","key_Page Down"]},{title:h.t("Preferences"),keys:["key_Cmd","key_,"],id:"open_preferences",isSsbOnly:!0,browserBlackList:["windows","linux"]},{title:h.t("Close or re-open right pane",{fallbackHash:"1b790540b5c4590525e4706f1e3023888862a175"}),keys:["key_Cmd",`key_${Object(d.c)(".",{kb:e})}`]},{title:h.t("Channel Info"),keys:["key_Cmd","key_Shift","key_I"],isSsbOnly:!0},{title:h.t("Activity"),keys:["key_Cmd","key_Shift","key_M"],browserBlackList:["chrome"]},{title:h.t("Directory"),keys:["key_Cmd","key_Shift","key_E"],browserBlackList:["firefox"]},{title:m?"Saved items":h.t("Starred items"),keys:["key_Cmd","key_Shift","key_S"],browserBlackList:["firefox"]},{title:h.t("Toggle full screen"),keys:["key_Ctrl","key_Cmd","key_F"],keysWin:["key_Ctrl","key_Shift","key_F"],keysLinux:["key_Ctrl","key_Shift","key_F"]}]},{title:h.t("Messaging"),id:"messaging",shortcuts:[{title:h.t("Select text to beginning of current line"),keys:["key_Shift","key_\u2191"]},{title:h.t("Select text to end of current line"),keys:["key_Shift","key_\u2193"]},{title:h.t("Start a new line"),keys:["key_Shift","key_Enter"]},{title:h.t("React to last message (or message with focus)"),keys:["key_Cmd","key_Shift",`key_${Object(d.c)("\\",{kb:e})}`]},{title:h.t("Autocomplete @username"),keys:["key_@"]},{title:h.t("Autocomplete channel"),keys:["key_#"]},{title:h.t("Autocomplete emoji"),keys:["key_:"]}]},{title:h.t("Mark Messages Read and Unread"),shortcuts:[{title:h.t("Mark all messages in current channel as read"),keys:["key_Esc"]},{title:h.t("Mark all messages as read"),keys:["key_Shift","key_Esc"]},{title:h.t("Mark a message as unread"),keys:["key_Option",h.t("  and click message")],keysWin:["key_Alt",h.t("  and click message")],keysLinux:["key_Alt",h.t("  and click message")]}]},{title:h.t("Channels & Direct Messages"),shortcuts:[{title:h.t("Previous channel or DM"),keys:["key_Option","key_\u2191"]},{title:h.t("Next channel or DM"),keys:["key_Option","key_\u2193"]},{title:h.t("Previous unread channel or DM"),keys:["key_Option","key_Shift","key_\u2191"]},{title:h.t("Next unread channel or DM"),keys:["key_Option","key_Shift","key_\u2193"]}]},{title:h.t("All Unreads"),id:"all_unreads",shortcuts:[{title:h.t("Expand channel"),keys:["key_\u2192"]},{title:h.t("Collapse channel"),keys:["key_\u2190"]},{title:h.t("Mark channel as read"),keys:["key_Esc"]},{title:h.t("Previous channel"),keys:["key_Shift","key_Page Up"]},{title:h.t("Next channel"),keys:["key_Shift","key_Page Down"]}]},{title:h.t("Files and Snippets"),shortcuts:[{title:h.t("Add a file",{fallbackHash:"454a8bf181f08812db03551730d074d78ce5743f"}),keys:["key_Cmd","key_U"],browserBlackList:["firefox"]},{title:h.t("Create a snippet"),keys:["key_Cmd","key_Shift","key_Enter"]}]},{title:h.t("Calls"),shortcuts:[{title:h.t("Toggle mute"),keys:["key_M"]},{title:h.t("Toggle video"),keys:["key_V"]},{title:h.t("Invite list"),keys:["key_+",h.t("  or  "),"key_A"]},{title:h.t("Emoji reactions"),keys:["key_E",h.t("  then 1-9")]}]},{title:h.t("Workspace Switching"),id:"workspaces",shortcuts:[{title:h.t("Next workspace"),keys:["key_Cmd","key_Shift","key_["],keysWin:["key_Ctrl","key_Tab"]},{title:h.t("Previous workspace"),keys:["key_Cmd","key_Shift","key_]"],keysWin:["key_Ctrl","key_Shift","key_Tab"]},{title:h.t("A specific workspace"),keys:["key_Cmd",h.t("  and 1-9")]}]}];if(n){const e=[{title:h.t("Edit (your own message)"),keys:["key_E"]},{title:h.t("Delete (your own message)"),keys:["key_Delete"]},{title:h.t("Add an emoji reaction"),keys:["key_R"]},{title:h.t("Open a thread"),keys:["key_\u2192",h.t("or"),"key_T"]},{title:h.t("Pin / unpin"),keys:["key_P"]},{title:h.t("Share"),keys:["key_S"]},{title:h.t("Star / unstar"),keys:["key_A"]},{title:h.t("Mark as unread from this message"),keys:["key_U"]}];c&&e.push({title:h.t("Remind me about this message"),keys:["key_M"]}),b.push({title:h.t("When focused on a message"),id:"message_shortcuts",shortcuts:e})}const _=b[Object(l.a)(b,["id","basics"])].shortcuts,g=b[Object(l.a)(b,["id","navigation"])].shortcuts,y=b[Object(l.a)(b,["id","messaging"])].shortcuts;p.V&&g.push({title:h.t("Jump to unread messages"),keys:["key_Cmd","key_J"]}),y.push({title:h.t("Bold text"),keys:["key_Cmd","key_B"]}),y.push({title:h.t("Italic text"),keys:["key_Cmd","key_I"]}),y.push({title:h.t("Strikethrough text"),keys:["key_Cmd","key_Shift","key_X"]}),y.push({title:h.t("Format text as code"),keys:["key_Cmd","key_Shift","key_C"]}),p.V&&!Object(u.w)("3.0.0")||(y.push({title:h.t("Format selection as bullet list"),keys:["key_Cmd","key_Shift","key_8"]}),y.push({title:h.t("Format selection as numbered list"),keys:["key_Cmd","key_Shift","key_7"]})),a?y.push({title:h.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_9"]}):y.push({title:h.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_>"]}),y.push({title:h.t("Format selection as code block"),keys:["key_Cmd","key_Alt","key_Shift","key_c"]}),_.push({title:h.t("Set a status"),keys:["key_Cmd","key_Shift","key_Y"],id:"set_a_status"});const O=(({keyboardLocale:e,enableUnreadView:t})=>a=>{const n=p.V?"":Object(u.g)(),s=Object(u.j)();if(a.isSsbOnly&&!p.V)return!1;const r=a.browserBlackList||[];return!(Object(o.a)(r,n)||Object(o.a)(r,s)||Object(o.a)(a.localeBlackList,e)||"open_all_unreads"===a.id&&!t)})({keyboardLocale:e,enableUnreadView:t}),C=f(e);return b.map(e=>{const t=e.shortcuts,a=i()(e,["shortcuts"]);return s()({},a,{shortcuts:t.filter(O).map(C)})})}},"0SzJ":function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("jo6Y"),i=a.n(r),o=a("q1tI"),l=a.n(o),c=a("aK/h"),d=a("XHGt"),u=a("t85p"),p=a("yZEV"),h=a("BWAg"),m=a("6FZx");c.default.string,c.default.func.isRequired;const b=e=>{let t=e.userPresence,a=e.dispatch,n=i()(e,["userPresence","dispatch"]);const r=Object(o.useCallback)(()=>{a(Object(p.h)())},[a]),c=l.a.createElement(o.Fragment,null,"Set yourself to ",l.a.createElement("strong",null,"active"===t?"away":"active"));return l.a.createElement(h.a,s()({},n,{label:c,onSelected:r}))};b.displayName="TogglePresenceItem",b.defaultProps={userPresence:"active"};t.a=Object(m.b)(Object(d.b)(e=>{const t=Object(u.d)(e);return{userPresence:Object(p.f)(e,t)}})(b))},"0agN":function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("aK/h"),o=a("tn36"),l=a("XHGt"),c=a("x3CK"),d=a("rWF5"),u=a("nNoG"),p=a("XL7r"),h=a("Zr7G"),m=a("Smdl"),b=a("LWrH"),f=a("Kdk+"),_=a("sIET"),g=a("a+Oh"),y=a("t85p"),O=a("kcos"),C=a("x4bP"),v=a("XfeM"),E=a("ARZM"),k=a("eqKo"),S=a("d24p"),j=a("QOdn"),I=a("qN/r"),w=a("0Mct"),T=a("Nc5J"),N=a("ROZo");const A=Object(N.b)("TS.ui.react_keyboard_shortcuts.executeShortcut",()=>null),R=Object(v.b)("Run a keyboard shortcut without the keyboard",(e,t,{id:a}={})=>{const n=t();"browse_dms"===a&&Object(y.m)(n,"feature_sonic_dm_browser")?e(Object(S.a)()):"open_preferences"!==a?"open_all_threads"!==a?"open_all_unreads"!==a?"browse_channels"!==a?Object(C.a)()?"set_a_status"===a?e(Object(k.a)()):"quick_switcher"===a?e(Object(E.a)()):"open_all_unreads"===a&&e(Object(T.a)()):A(a):e(Object(j.a)()):e(Object(T.a)()):e(Object(w.a)()):e(Object(I.a)())});R.meta={name:"executeKeyboardShortcut",key:"componentsFlexpaneKeyboardShortcutsUtilityExecuteKeyboardShortcutExecuteKeyboardShortcut",description:"Run a keyboard shortcut without the keyboard"},R.propTypes={id:i.default.oneOf(["open_all_unreads","set_a_status","browse_dms","browse_channels","quick_switcher","open_preferences","open_all_threads"]).isRequired};var M=R,P=a("0Qg5"),x=a("s/YD"),L=a("QbLZ"),F=a.n(L),D=a("uPpK"),B=a("TSYQ"),U=a.n(B),q=a("oUPN"),H=a("fp5s"),W=a("RAhH"),G=a("hOGb"),K=a("ynxK"),V=a("18Pa");a("/e6G");const z=new u.b("keyboard_shortcuts"),$=(i.default.oneOfType([i.default.string,i.default.object]),i.default.array,i.default.bool,i.default.string,i.default.string,i.default.func,i.default.object,{title:"",keys:[],hasInfoButton:!1,infoButtonMessage:"",id:null,executeKeyboardShortcut:n.a,telemeter:{count:n.a}});class shortcut_Shortcut extends r.a.PureComponent{static makeAriaLabel({title:e,keys:t}){const a=(t||[]).map(e=>{const t=e.split("key_")[1];return t?Object(G.b)(t):e}).join(" ");return z.t("{shortcutTitle}: {keyNames}",{shortcutTitle:e,keyNames:a})}constructor(){super(),this.execShortcut=this.execShortcut.bind(this)}execShortcut(){this.props.executeKeyboardShortcut({id:this.props.id}),this.props.telemeter.count("clicked_keyboard_shortcut")}renderKeys(){var e=this.props;const t=e.keys,a=e.title;return t.map(e=>{const t=e.split("key_")[1];return t?r.a.createElement(G.a,{label:t,key:`${a} ${e} ${Object(H.a)()}`}):e})}renderInfoButton(){return r.a.createElement(W.c,{tip:this.props.infoButtonMessage,delay:W.b},r.a.createElement(V.a,{className:"p-shortcuts_flexpane__tip",icon:"question-circle"}))}renderTitle(){const e=this.props.hasInfoButton?this.renderInfoButton():null,t=this.props.title;return null==this.props.id?r.a.createElement(s.Fragment,null,t,e):r.a.createElement(s.Fragment,null,r.a.createElement(K.a,{type:"button",onClick:this.execShortcut},t),e)}render(){return r.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut"},r.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},this.renderTitle()),r.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_keys"},this.renderKeys()))}}shortcut_Shortcut.displayName="Shortcut",shortcut_Shortcut.defaultProps=$;var Y=shortcut_Shortcut;a("fHJC");const Q=new u.b("shortcuts_flexpane"),X=(i.default.arrayOf(i.default.object.isRequired),i.default.func,i.default.object,i.default.func,i.default.string,i.default.func,{items:[],executeKeyboardShortcut:n.a,telemeter:{count:n.a},onItemTabWithin:n.a,focusKey:null,setFocusKey:n.a});class keyboard_shortcuts_list_KeyboardShortcutsList extends s.PureComponent{constructor(e){super(e),Object(o.a)(this,["renderItem","isFocusableItem","focus","renderLabelForRow"]),this.list=r.a.createRef()}componentDidMount(){var e=this.props;const t=e.focusKey,a=e.items;"keyboard_shortcuts"===t&&a.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}componentDidUpdate({focusKey:e}){var t=this.props;const a=t.focusKey,n=t.items;"keyboard_shortcuts"===a&&a!==e&&n.length&&(this.setFocusOnFirstItem(),this.clearFocusKey()),"keyboard_shortcuts"===a&&n.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}setFocusOnFirstItem(){const e=this.getItemKeys()[1],t=this.list.current;t&&t.focusOnKey(e)}getItemKeys(){return this.rows.map(e=>e.key)}clearFocusKey(){this.props.setFocusKey(null)}focus(){const e=this.list.current;e&&e.focus()}isFocusableItem({index:e}){const t=this.rows[e];return t&&"shortcut"===t.type}createRows(){return this.props.items.reduce((e,t,a)=>{const n=t.shortcuts.map((e,t)=>F()({type:"shortcut",key:`shortcut-${a}-${t}`},e));return[...e,{type:"header",key:`header-${a}`,title:t.title,subtitle:t.subtitle},...n]},[])}renderItem(e){const t=this.rows[e];if(!t||!t.type)return null;var a=this.props;const n=a.executeKeyboardShortcut,i=a.telemeter;if("shortcut"===t.type)return r.a.createElement(Y,{title:t.title,hasInfoButton:t.hasInfoButton,infoButtonMessage:t.infoButtonMessage,id:t.id,executeKeyboardShortcut:n,telemeter:i,keys:t.keys});const o=U()("p-shortcuts_flexpane__shortcut_heading",{"p-shortcuts_flexpane__shortcut_heading_first":0===e});return"header"===t.type?r.a.createElement(s.Fragment,null,r.a.createElement("h3",{className:o},t.title),t.subtitle&&r.a.createElement("h4",{className:"p-shortcuts_flexpane__shortcut_sub_heading"},t.subtitle)):null}renderLabelForRow({index:e}){const t=this.rows[e];if(t&&t.type&&"shortcut"===t.type)return{"aria-label":Y.makeAriaLabel({title:t.title,keys:t.keys})}}render(){this.rows=this.createRows();const e=this.getItemKeys();return r.a.createElement(D.a,null,({width:t,height:a})=>r.a.createElement(q.a,{className:"p-shortcuts_flexpane__list",ref:this.list,width:t,height:a,keys:e,rowRenderer:this.renderItem,getPropsForItem:this.renderLabelForRow,animateOnScroll:!1,"aria-label":Q.t("Keyboard Shortcuts"),isFocusableItem:this.isFocusableItem,onItemTabWithin:this.props.onItemTabWithin}))}}keyboard_shortcuts_list_KeyboardShortcutsList.displayName="KeyboardShortcutsList",keyboard_shortcuts_list_KeyboardShortcutsList.defaultProps=X;var J=keyboard_shortcuts_list_KeyboardShortcutsList;a("445Q");a.d(t,"a",function(){return keyboard_shortcuts_flexpane_KeyboardShortcutsFlexpane});i.default.string,i.default.string,i.default.arrayOf(i.default.shape({title:i.default.string,shortcuts:i.default.arrayOf(i.default.shape({os:i.default.oneOf(["windows","mac","linux"]),browser:i.default.string,title:i.default.oneOfType([i.default.string,i.default.object]),keys:i.default.array,keysLinux:i.default.array,keysWin:i.default.array,hasInfoButton:i.default.bool,infoButtonMessage:i.default.string,id:i.default.string,isSsbOnly:i.default.bool,browserBlackList:i.default.array}))})),i.default.bool,i.default.func,i.default.object,i.default.string,i.default.func,i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.bool;const Z={className:void 0,sections:void 0,keyboardLocale:null,enableUnreadView:!1,executeKeyboardShortcut:n.a,telemeter:{count:n.a},focusKey:null,setFocusKey:n.a,featureWysiwygComposer:!1,featureContextualMessageShortcuts:!1,featureMessageNavigationShortcuts:!1,featureAppViewsReminders:!1,isIAPhase1Enabled:!1},ee=new u.b("shortcuts_flexpane"),te=Object(d.j)();class keyboard_shortcuts_flexpane_KeyboardShortcutsFlexpane extends r.a.PureComponent{constructor(e){super(e),Object(o.a)(this,["renderBody","renderSubtitle","focus","onItemTabWithin"]),this.list=r.a.createRef(),this.flexpane=r.a.createRef()}onItemTabWithin(){const e=this.flexpane.current;e&&e.setInitialActiveSection()}focus(){const e=this.list.current;e&&e.focus()}renderSubtitle(){const e="mac"===te?ee.t("Cmd"):ee.t("Ctrl"),t=Object(c.c)("/",{kb:this.props.keyboardLocale});return ee.rt('Press <span className="c-keyboard_key c-keyboard_key--slim">{headerCmdButton}</span><span className="c-keyboard_key c-keyboard_key--slim">{headerSlashButton}</span> to toggle this panel.',{headerCmdButton:e,headerSlashButton:t})}renderBody(){var e=this.props;const t=e.keyboardLocale,a=e.enableUnreadView,n=e.featureWysiwygComposer,s=e.executeKeyboardShortcut,i=e.focusKey,o=e.setFocusKey,l=e.telemeter,c=e.featureContextualMessageShortcuts,d=e.featureMessageNavigationShortcuts,u=e.featureAppViewsReminders,p=this.props.sections||Object(P.b)({keyboardLocale:t,enableUnreadView:a,featureWysiwygComposer:n,featureContextualMessageShortcuts:c,featureMessageNavigationShortcuts:d,featureAppViewsReminders:u,isIAPhase1Enabled:this.props.isIAPhase1Enabled});return r.a.createElement(J,{ref:this.list,items:p,keyboardLocale:t,executeKeyboardShortcut:s,telemeter:l,onItemTabWithin:this.onItemTabWithin,focusKey:i,setFocusKey:o})}render(){const e=ee.t("Keyboard Shortcuts");return r.a.createElement(x.b,{className:this.props.className,ref:this.flexpane,focus:this.focus,renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,title:e,kbNavOrder:Object(m.a)()?void 0:4.6,viewId:"shortcuts"})}}keyboard_shortcuts_flexpane_KeyboardShortcutsFlexpane.displayName="KeyboardShortcutsFlexpane",keyboard_shortcuts_flexpane_KeyboardShortcutsFlexpane.defaultProps=Z;const ae=Object(l.b)(function(e){return{enableUnreadView:Object(p.k)(e,"enable_unread_view"),telemeter:Object(h.c)({state:e}),focusKey:Object(f.a)(e),featureWysiwygComposer:Object(g.a)(e),featureContextualMessageShortcuts:Object(y.m)(e,"feature_contextual_message_shortcuts"),featureMessageNavigationShortcuts:Object(y.m)(e,"feature_message_navigation_shortcuts"),featureAppViewsReminders:Object(y.m)(e,"feature_app_views_reminders"),isIAPhase1Enabled:Object(O.c)(e)}},e=>({executeKeyboardShortcut:(...t)=>e(M(...t)),setFocusKey:t=>e(Object(_.a)(t))}))(keyboard_shortcuts_flexpane_KeyboardShortcutsFlexpane);t.b=Object(b.a)(ae)},"0d94":function(e,t,a){"use strict";a.d(t,"b",function(){return u}),a.d(t,"a",function(){return h});var n=a("q1tI"),s=a.n(n),r=a("XHGt"),i=a("brL+"),o=a("fYfO"),l=a("hOQf"),c=a("ULIY");const d=(e,{ts:t,channelId:a})=>{const n=Object(o.a)(e,a,t);return t&&Object(c.d)(Object(i.b)(e),a,t),{msg:n}};function u(e){return Object(r.b)(d)(t=>t.msg?s.a.createElement(e,t):null)}const p=(e,{ts:t,prevTs:a,channelId:n})=>{const s=Object(o.a)(e,n,t),r=Object(o.a)(e,n,a),d=Object(i.b)(e);return t&&Object(c.d)(d,n,t),a&&Object(c.d)(d,n,a),{msg:s,adjacent:Object(l.W)(e,s,r)}};function h(e){return Object(r.b)(p)(t=>t.msg?s.a.createElement(e,t):null)}},"0dCl":function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return $});var n=a("UXvI"),s=a("ifKl"),r=a("q1tI"),i=a.n(r),o=a("wSSu"),l=a.n(o),c=a("9rZX"),d=a.n(c),u=a("kvAW"),p=a("qJlv"),h=a("7B0+"),m=a("aK/h"),b=a("TSYQ"),f=a.n(b),_=a("XHGt"),g=a("lhZz"),y=a("s/0T"),O=a("yHhI"),C=a("Zr7G"),v=a("+Lv6"),E=a("IY6O"),k=a("gLeh"),S=a("mNhP"),j=a("Z7Ay"),I=a("g5qt"),w=a("4lvZ"),T=a("t1Oe"),N=a("c+ts"),A=a("jfx7"),R=a("p9qW"),M=a("Tc5z"),P=a("Gogr"),x=a("yw6X"),L=a("R//h"),F=a("7R01"),D=a("Mv5p"),B=(a("TY84"),a("fj0Z")),U=a("DEaQ"),q=a("xRgT"),H=a("lV17");a("ztz9");m.default.string,m.default.number,m.default.object,m.default.func,m.default.func,m.default.func,m.default.func,m.default.bool,m.default.bool,m.default.bool,m.default.bool,m.default.bool,m.default.bool,m.default.bool,m.default.bool;const W={teamId:"",numTeams:0,teamStore:null,handleWindowFocusEvent:s.a,handleWindowUnloadingEvent:s.a,handleWindowMouseDownEvent:s.a,handleWindowKeyDownEvent:s.a,isScreenReaderEnabled:!1,isCustomTitlebarShown:!1,isMainWindowVisible:!1,workspaceFailedToBoot:!1,workspaceIsMigrating:!1,workspaceMigrationIsComplete:!1,workspaceIsAccessLimited:!1,willNavigateToUnbootedWorkspace:!1},G=1e4,K={leading:!0,trailing:!1};class Client extends r.Component{constructor(e){super(e),this.state={isMockingTeamSwitch:!1},Object(j.a)("mockSwitchTeams",()=>{this.setState(()=>({isMockingTeamSwitch:!0})),setTimeout(()=>{this.setState(()=>({isMockingTeamSwitch:!1}))},500)}),this.handleWindowFocus=this.handleWindowFocus.bind(this),this.handleWindowBlur=this.handleWindowBlur.bind(this),this.handleWindowBeforeUnload=this.handleWindowBeforeUnload.bind(this),this.handleWindowDragOver=this.handleWindowDragOver.bind(this),this.handleWindowDrop=this.handleWindowDrop.bind(this),this.handleWindowMouseDown=this.handleWindowMouseDown.bind(this),this.handleWindowKeyDown=Object(n.a)(this.handleWindowKeyDown.bind(this),G,K),this.handleVisibilityChange=this.handleVisibilityChange.bind(this)}componentDidMount(){window.addEventListener("focus",this.handleWindowFocus),window.addEventListener("blur",this.handleWindowBlur),window.addEventListener("beforeunload",this.handleWindowBeforeUnload),window.addEventListener("dragover",this.handleWindowDragOver),window.addEventListener("drop",this.handleWindowDrop),window.addEventListener("mousedown",this.handleWindowMouseDown),window.addEventListener("keydown",this.handleWindowKeyDown),window.addEventListener("visibilitychange",this.handleVisibilityChange);const e=!!(document&&document.hasFocus&&document.hasFocus());this.props.handleWindowFocusEvent({isFocused:e}),(!e||"visible"!==document.visibilityState||I.V&&!this.props.isMainWindowVisible)&&(Object(g.dispatchForClientStore)(Object(y.c)(!1)),Object(g.dispatchForClientStore)(Object(y.d)(!1)),Object(g.dispatchForClientStore)(Object(y.b)(!1))),Object(D.a)()&&document.body.classList.add("supports_custom_scrollbar")}componentDidUpdate(){I.V&&!this.props.isMainWindowVisible&&(Object(g.dispatchForClientStore)(Object(y.c)(!1)),Object(g.dispatchForClientStore)(Object(y.d)(!1)),Object(g.dispatchForClientStore)(Object(y.b)(!1)))}componentWillUnmount(){window.removeEventListener("focus",this.handleWindowFocus),window.removeEventListener("blur",this.handleWindowBlur),window.removeEventListener("beforeunload",this.handleWindowBeforeUnload),window.removeEventListener("dragover",this.handleWindowDragOver),window.removeEventListener("drop",this.handleWindowDrop),window.removeEventListener("mousedown",this.handleWindowMouseDown),window.removeEventListener("keydown",this.handleWindowKeyDown),window.removeEventListener("visibilitychange",this.handleVisibilityChange)}handleWindowFocus(){Object(O.b)().info("FOCUS-EVENT","Client window focused"),this.props.handleWindowFocusEvent({isFocused:!0})}handleWindowBlur(){Object(O.b)().info("FOCUS-EVENT","Client window blurred"),this.props.handleWindowFocusEvent({isFocused:!1}),Object(g.dispatchForClientStore)(Object(y.c)(!1))}handleVisibilityChange(){"visible"!==document.visibilityState&&Object(g.dispatchForClientStore)(Object(y.c)(!1))}handleWindowBeforeUnload(){Object(O.b)().info("WINDOW-UNLOADING","Client window is unloading"),this.props.handleWindowUnloadingEvent({isUnloading:!0})}handleWindowDragOver(e){return e.preventDefault(),!1}handleWindowDrop(e){return e.preventDefault(),!1}handleWindowMouseDown(){this.props.handleWindowMouseDownEvent()}handleWindowKeyDown(){this.props.handleWindowKeyDownEvent()}renderMockSwitchTeamsDisplay(){return i.a.createElement("div",{style:{height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"}},i.a.createElement("h1",null,"Pretending to switch teams, will switch back shortly"))}renderActiveMigrationView(){var e=this.props;const t=e.teamId,a=e.workspaceFailedToBoot,n=e.workspaceMigrationIsComplete;if(!a)return null;const s=Object(P.d)(t,"name"),r=Object(P.d)(t,"enterprise_name");return i.a.createElement("span",{id:"migration_blocker_page__wrapper",className:"p-migration_blocker_page__wrapper"},i.a.createElement(x.a,{enterpriseName:r,teamId:t,teamName:s,migrationIsComplete:n}))}renderBootErrorView(){var e=this.props;const t=e.workspaceFailedToBoot,a=e.workspaceIsAccessLimited;return t?i.a.createElement(B.a,{isAccessLimited:a,shouldRetry:!0}):null}renderWorkspace(){var e=this.props;const t=e.workspaceFailedToBoot;if(e.workspaceIsMigrating)return this.renderActiveMigrationView();if(t)return this.renderBootErrorView();return i.a.createElement(H.a,{teamId:this.props.teamId,renderSonicMenu:e=>i.a.createElement(U.a,{menuProps:e})})}renderMainContent(){const e=this.state.isMockingTeamSwitch,t=this.props.willNavigateToUnbootedWorkspace;return e?this.renderMockSwitchTeamsDisplay():t?i.a.createElement(A.a,null):this.renderWorkspace()}render(){var e=this.props;const t=e.numTeams,a=e.teamId,n=e.teamStore,s=Object(g.getClientStoreInstance)(),o=Object(R.a)({numTeams:t}),l=o?i.a.createElement(_.a,{store:s},i.a.createElement(q.a,{className:"p-client__team_sidebar",selectedTeamId:a})):null,c=f()("p-client",{"p-client--show-team-sidebar":o,"p-client--custom-titlebar":this.props.isCustomTitlebarShown});return i.a.createElement(r.Fragment,null,i.a.createElement(N.a,null),i.a.createElement(T.a,{isScreenReaderEnabled:this.props.isScreenReaderEnabled},i.a.createElement(_.a,{key:a,store:n},i.a.createElement(L.a,null,i.a.createElement(w.a,{store:n},i.a.createElement(F.a,null,i.a.createElement("div",{className:c},i.a.createElement(v.b,null,l,i.a.createElement(v.b,null,this.renderMainContent())))))))))}}Client.displayName="Client",Client.defaultProps=W;const V={handleWindowFocusEvent:(...e)=>Object(S.a)(...e),handleWindowUnloadingEvent:(...e)=>Object(S.d)(...e),handleWindowMouseDownEvent:(...e)=>Object(S.c)(...e),handleWindowKeyDownEvent:(...e)=>Object(S.b)(...e)},z=Object(h.hot)(e)(Object(_.b)(function(e){const t=Object(E.getFocusedWorkspace)(e),a=Object(E.getNumberOfWorkspaces)(e),n=Object(g.getStoreInstanceByTeamId)(t),s=n&&n.getState();return{teamId:t,teamStore:n,numTeams:a,isScreenReaderEnabled:Object(k.b)(s),workspaceIsMigrating:Object(E.isWorkspaceMigrating)(e,t),workspaceMigrationIsComplete:Object(E.isWorkspaceMigrationComplete)(e,t),workspaceIsAccessLimited:Object(E.isWorkspaceAccessLimited)(e,t),isCustomTitlebarShown:Object(M.k)(e),isMainWindowVisible:Object(M.m)(e),workspaceFailedToBoot:Object(E.hasWorkspaceFailedToBoot)(e,t),willNavigateToUnbootedWorkspace:!!Object(E.getWillNavigateToUnbootedWorkspaceId)(e)}},V)(Client));function $(e,t){const a=Object(g.getClientStoreInstance)(),n=Object(E.getFocusedWorkspace)(a.getState()),s=()=>{l.a.render(i.a.createElement(u.a,{backend:p.a},i.a.createElement(_.a,{store:a},i.a.createElement(z,null))),e,t)};Object(C.c)({teamId:n}).count("client_boot_mount_attempt"),window.clientBootMountTeam=n,Object(O.a)({teamId:n}).info("BOOT",`(${n}) Mounting client`),s(),d.a.setAppElement(e),Object(j.a)("mountClient",()=>{s()}),Object(j.a)("unmountClient",()=>{l.a.unmountComponentAtNode(e)})}}).call(this,a("3UD+")(e))},"0gKA":function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("aK/h"),o=a("XHGt"),l=a("tn36"),c=a("TSYQ"),d=a.n(c),u=a("yPgC"),p=a("negh"),h=a("kOzZ"),m=a("BUzq"),b=a("0F/N"),f=a("t85p"),_=a("uvIC"),g=a("4M+g"),y=a("fYfO"),O=a("miRO"),C=a("oRxB"),v=a("dxEi"),E=a("iZHp"),k=a("hhak"),S=a("S2Hy"),j=a("QOH6"),I=a("kcos"),w=a("hOGb"),T=a("QbLZ"),N=a.n(T),A=a("4zXV"),R=a("om+M"),M=a("Y/4G");const P=Object(R.a)("Adds a reminder for a message via API call",(e,t,a)=>{const n=M.a.generateAndEnqueue(t()),s=N()({},a,{client_token:n});return e(Object(A.a)({method:"reminders.addFromMessage",args:s}))});P.meta={name:"addReminderForMessage",key:"fetchersMessageActionsApiAddReminderForMessage",description:"Adds a reminder for a message via API call"},P.propTypes={time:i.default.oneOf(["In 20 minutes","In 1 hour","In 3 hours","Tomorrow","Next week","Custom"]).isRequired,message_channel:i.default.string.isRequired,message_ts:i.default.string.isRequired,respond_in_channel:i.default.bool};var x=a("hOQf"),L=a("h9PG"),F=a("8dKT"),D=a("ICFZ"),B=a("nNoG"),U=a("Smdl"),q=a("PM8X"),H=a("ROZo");Object(H.b)("TS.replies.promiseToGetSubscriptionState",()=>Promise.resolve());const W=Object(H.b)("TS.replies.setSubscriptionState");Object(H.b)("TS.replies.getSubscriptionState"),Object(H.b)("TS.replies.canReplyToMsg"),Object(H.b)("TS.replies.requestOfflineThread"),Object(H.b)("TS.replies.dispatchThreadSyncedSig");var G=a("2Zgd"),K=a("wMtF"),V=a("J19L"),z=a("1yga"),$=a("auxT"),Y=a("aLpA"),Q=a("dhvi"),X=a("MREy"),J=a("jo6Y"),Z=a.n(J),ee=a("TGBA"),te=a("m8R6"),ae=a("NFsq"),ne=a("Z0Cl"),se=a("6FZx"),re=a("BWAg"),ie=a("XfeM"),oe=a("zmn3"),le=a("hbEN"),ce=a("qcAq"),de=a("U/ze"),ue=a("n2GJ");const pe=new B.b("message"),he={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},me=Object(de.b)((e,{ts:t,channelId:a}={})=>{const n=Object(y.a)(e,a,t);return n&&Object(x.e)(e,n)?{id:Y.V.addReaction,name:pe.t("Add reaction"),iconType:"add-reaction","data-qa":"add_reaction_menu_item",frecencyId:Object(ue.f)("add_reaction"),uiElement:p.UiElement.ADD_REACTION_BUTTON}:null});me.meta={name:"addReaction",key:"componentsMessageActionSelectorsAddReactionAddReaction"},me.propTypes=he;var be=me;const fe=new B.b("message"),_e={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},ge=Object(de.b)((e,{ts:t,channelId:a}={})=>{const n=Object(y.a)(e,a,t);if(!n)return null;const s=Object(g.e)(e,a);if(!Object(x.r)(e,{message:n,channel:s}))return null;let r=fe.t("Start a thread"),i=p.UiElement.START_A_THREAD_BUTTON;return(Object(x.ub)(n)||Object(x.S)(n))&&(r=fe.t("Reply to thread"),i=p.UiElement.REPLY_TO_THREAD_BUTTON),{id:Y.V.comment,name:r,iconType:"comment-alt","data-qa":"start_thread_menu",frecencyId:Object(ue.f)("thread_reply"),uiElement:i}});ge.meta={name:"comment",key:"componentsMessageActionSelectorsCommentComment"},ge.propTypes=_e;var ye=ge;const Oe=new B.b("message"),Ce={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},ve=Object(de.b)((e,{ts:t,channelId:a}={})=>{const n=Object(y.a)(e,a,t);if(!n)return null;const s=Object(g.e)(e,a);return Object(x.h)(e,{message:n,channel:s})?{id:Y.V.copyLink,name:Object(f.m)(e,"feature_desktop_copy_text")?Oe.t("Copy link to message"):Oe.t("Copy link"),iconType:"link","data-qa":"copy_link",frecencyId:Object(ue.f)("copy_link"),uiElement:p.UiElement.COPY_LINK_BUTTON}:null});ve.meta={name:"copyLink",key:"componentsMessageActionSelectorsCopyLinkCopyLink"},ve.propTypes=Ce;var Ee=ve;const ke=new B.b("message"),Se={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,disabled:i.default.bool.isRequired,showOfflineIcon:i.default.bool.isRequired},je=Object(de.b)((e,{ts:t,channelId:a,messageContainerType:n,disabled:s=!1,showOfflineIcon:r=!1}={})=>{const i=Object(y.a)(e,a,t);if(!i)return null;const o=Object(g.e)(e,a);if(!Object(x.k)(e,{message:i,channel:o,messageContainerType:n}))return null;const l=Object(f.m)(e,"feature_contextual_message_shortcuts");return{id:Y.V.deleteMessage,name:ke.t("Delete message"),shortcut:l?ke.t("delete"):void 0,iconType:"trash",danger:!0,"data-qa":"delete_message",frecencyId:Object(ue.f)("delete"),uiElement:p.UiElement.DELETE_MESSAGE_BUTTON,disabled:s,showOfflineIcon:r}});je.meta={name:"deleteMessage",key:"componentsMessageActionSelectorsDeleteMessageDeleteMessage"},je.propTypes=Se;var Ie=je;const we=new B.b("message"),Te={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,disabled:i.default.bool.isRequired,showOfflineIcon:i.default.bool.isRequired},Ne=Object(de.b)((e,{ts:t,channelId:a,disabled:n=!1,showOfflineIcon:s=!1}={})=>{const r=Object(y.a)(e,a,t);if(!r)return null;const i=Object(g.e)(e,a),o=Object(f.d)(e),l=Object(L.a)(e,"msg_edit_window_mins");if(!Object(x.l)(e,o,r,i,l))return null;const c=Object(f.m)(e,"feature_contextual_message_shortcuts");return{id:Y.V.editMessage,name:we.t("Edit message"),shortcut:c?we.t("E"):void 0,iconType:"pencil","data-qa":"edit_message",frecencyId:Object(ue.f)("edit"),uiElement:p.UiElement.EDIT_MESSAGE_BUTTON,disabled:n,showOfflineIcon:s}});Ne.meta={name:"editMessage",key:"componentsMessageActionSelectorsEditMessageEditMessage"},Ne.propTypes=Te;var Ae=Ne;const Re=new B.b("message"),Me=new B.b("messages_action_items"),Pe={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,allUnreads:i.default.string.isRequired},xe=Object(de.b)((e,{ts:t,channelId:a,allUnreads:n}={})=>{const s=Object(y.a)(e,a,t);if(!s)return null;const r=Object(g.e)(e,a);if(!Object(x.m)(e,{message:s,channel:r}))return null;const i=Object(f.m)(e,"feature_contextual_message_shortcuts");return{id:Y.V.markUnread,name:n?Me.t("Mark above as read"):Re.t("Mark unread"),shortcut:!n&&i?Re.t("U"):void 0,iconType:"mark-unread","data-qa":"mark_unread",frecencyId:Object(ue.f)("mark_unread"),uiElement:p.UiElement.MARK_UNREAD_BUTTON}});xe.meta={name:"markUnread",key:"componentsMessageActionSelectorsMarkUnreadMarkUnread"},xe.propTypes=Pe;var Le=xe,Fe=a("6kok");const De=new B.b("message");function Be(e,t,a,n){const s=`#${t}`;switch(a){case"channel":return e?De.t("Un-pin from channel",{channelName:s,fallbackHash:"fde81182bd7937727711f50079046f2e43ab467c"}):n?De.t("Pin to channel",{channelName:s,fallbackHash:"017de9a57dbb4ec0a6c70cb3a18a8c6c762a3e0f"}):De.t("Pin to channel",{channelName:s,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});case"private":return e?De.t("Un-pin from channel",{channelName:t,fallbackHash:"fde81182bd7937727711f50079046f2e43ab467c"}):n?De.t("Pin to channel",{channelName:t,fallbackHash:"017de9a57dbb4ec0a6c70cb3a18a8c6c762a3e0f"}):De.t("Pin to channel",{channelName:t,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});default:return e?De.t("Un-pin from this conversation"):n?De.t("Pin to this conversation",{fallbackHash:"26463acec4f15a90924c42970bb258dae75e73f9"}):De.t("Pin to this conversation\u2026")}}const Ue=new B.b("message"),qe={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,disabled:i.default.bool.isRequired,showOfflineIcon:i.default.bool.isRequired},He=Object(de.b)((e,{ts:t,channelId:a,disabled:n=!1,showOfflineIcon:s=!1}={})=>{const r=Object(y.a)(e,a,t);if(!r)return null;const i=Object(g.e)(e,a);if(!Object(x.o)(e,{message:r,channel:i}))return null;const o=Object(m.j)(e,{channelId:a,ts:t}),l=Object(Fe.x)(e,i,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),c=Object(Fe.v)(i),d=o?p.UiElement.PIN_TO_THIS_CONVERSATION_BUTTON:p.UiElement.UNPIN_FROM_THIS_CONVERSATION_BUTTON,u=Object(f.m)(e,"feature_sonic_pins"),h=Object(f.m)(e,"feature_contextual_message_shortcuts");return{id:Y.V.pin,name:Be(o,l,c,u),iconType:"thumb-tack",shortcut:h?Ue.t("P"):void 0,"data-qa":"pin_message",frecencyId:Object(ue.f)(o?"unpin":"pin"),uiElement:d,disabled:n,showOfflineIcon:s}});He.meta={name:"pin",key:"componentsMessageActionSelectorsPinPin"},He.propTypes=qe;var We=He,Ge=a("JS8a"),Ke=a("J47P"),Ve=a("hcpk");const ze=Object(ie.b)("Add a reminder for a message",(e,t,{time:a,channelId:n,ts:s,viewContext:r,featureContextualMessageShortcuts:i=!1}={})=>{const o=Object(y.a)(t(),n,s);return i&&e(Object(j.a)({viewContext:r,channelId:n,ts:s})),e(P({time:a,message_channel:n,message_ts:s,respond_in_channel:Object(x.yb)(o)}))});ze.meta={name:"addReminderForMessage",key:"actionsAddReminderForMessageAddReminderForMessage",description:"Add a reminder for a message"},ze.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired,time:i.default.string.isRequired,viewContext:i.default.string};var $e=ze;const Ye=new B.b("message"),Qe=(i.default.string.isRequired,i.default.string.isRequired,i.default.string.isRequired,i.default.func.isRequired,i.default.object.isRequired,i.default.string,{shortcut:void 0});class remind_RemindMenuItem extends s.PureComponent{constructor(e){super(e),this.onSelected=this.onSelected.bind(this)}onSelected(){var e=this.props;const t=e.remind,a=e.ts,n=e.channelId,s=e.time,r=e.clogger;t({ts:a,channelId:n,time:s}),r.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MORE_ACTIONS_MENU,ui_element:p.UiElement.REMIND_ME_BUTTON}}})}render(){var e=this.props;e.remind,e.ts,e.channelId,e.time;const t=Z()(e,["remind","ts","channelId","time"]);return r.a.createElement(re.a,N()({},t,{onSelected:this.onSelected}))}}remind_RemindMenuItem.displayName="RemindMenuItem",remind_RemindMenuItem.defaultProps=Qe;const Xe={remind:$e},Je=Object(o.b)(e=>({clogger:Object(h.a)({state:e})}),Xe)(remind_RemindMenuItem),Ze=Object(se.b)(Je);i.default.string.isRequired,i.default.string.isRequired,i.default.bool,i.default.bool,i.default.bool;class remind_Remind extends s.PureComponent{constructor(e){super(e),this.renderSubmenu=this.renderSubmenu.bind(this)}renderSubmenu(e){var t=this.props;const a=t.channelId,n=t.ts,s=t.featureAppViewsReminders,i=t.featureContextualMessageShortcuts,o={channelId:a,ts:n};return r.a.createElement(Ge.a,N()({},e,{"data-qa":"remind_submenu",width:"auto"}),r.a.createElement(Ze,N()({},o,{label:Ye.t("In 20 minutes",{fallbackHash:"c473e4622b51d4d86dabe29940fee9c1796bb93d"}),time:"In 20 minutes"})),r.a.createElement(Ze,N()({},o,{label:Ye.t("In 1 hour",{fallbackHash:"e2e5de960f1c2c574aaeac98339a787a5bdab8e6"}),time:"In 1 hour"})),r.a.createElement(Ze,N()({},o,{label:Ye.t("In 3 hours",{fallbackHash:"9ec09cee220ff97e87efe884ad910bc050c301cb"}),time:"In 3 hours"})),r.a.createElement(Ze,N()({},o,{label:Ye.t("Tomorrow"),time:"Tomorrow"})),r.a.createElement(Ze,N()({},o,{label:Ye.t("Next week",{fallbackHash:"fdc2b827d9b1e8ed62eeb53c174f0ba91f90f490"}),time:"Next week"})),s&&r.a.createElement(Ze,N()({},o,{label:Ye.t("Custom\u2026"),time:"Custom",shortcut:i?Ye.t("M"):void 0})))}render(){var e=this.props;e.channelId,e.ts;const t=Z()(e,["channelId","ts"]);return r.a.createElement(Ve.a,N()({},t,{renderSubmenu:this.renderSubmenu}))}}remind_Remind.displayName="Remind",remind_Remind.defaultProps={featureAppViewsReminders:!1,renderLegacySubmenu:!0,featureContextualMessageShortcuts:!1};const et=Object(Ke.a)(remind_Remind),tt=Object(de.b)((e,{ts:t,channelId:a,disabled:n=!1,showOfflineIcon:s=!1}={})=>{const i=Object(y.a)(e,a,t);if(!i)return null;const o=Object(g.e)(e,a);if(!Object(x.f)(e,{message:i,channel:o}))return null;const l=Object(f.m)(e,"feature_app_views_reminders"),c=Object(f.m)(e,"feature_contextual_message_shortcuts");return r.a.createElement(et,{key:"remind_submenu",label:Ye.t("Remind me about this"),"data-qa":"remind_me",frecencyId:Object(ue.f)("remind"),ts:t,channelId:a,featureAppViewsReminders:l,featureContextualMessageShortcuts:c,renderLegacySubmenu:!0,disabled:n,showOfflineIcon:s})});tt.meta={name:"remindSubmenu",key:"componentsMessageActionSelectorsRemindRemindSubmenu"};var at=tt;const nt=new B.b("message"),st={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,messageContainerType:i.default.oneOf(Object(ee.a)(Y.I)),disabled:i.default.bool.isRequired,showOfflineIcon:i.default.bool.isRequired},rt=Object(de.b)((e,{ts:t,channelId:a,messageContainerType:n,disabled:s=!1,showOfflineIcon:r=!1}={})=>{const i=Object(y.a)(e,a,t);if(!i)return null;const o=Object(g.e)(e,a);if(!Object(x.p)(e,{message:i,channel:o,messageContainerType:n}))return null;const l=Object(Fe.Db)(o)||Object(Fe.Cb)(o)?nt.t("Remove from channel"):nt.t("Remove from conversation");return{id:Y.V.removeBroadcast,name:l,iconType:"times","data-qa":"remove_broadcast",frecencyId:Object(ue.f)("remove"),uiElement:p.UiElement.REMOVE_FROM_CONVERSATION_BUTTON,disabled:s,showOfflineIcon:r}});rt.meta={name:"removeBroadcast",key:"componentsMessageActionSelectorsRemoveBroadcastRemoveBroadcast"},rt.propTypes=st;var it=rt,ot=a("NrNc"),lt=a("Ro9a");const ct=new B.b("message"),dt={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},ut=Object(de.b)((e,{ts:t,channelId:a,disabled:n=!1,showOfflineIcon:s=!1}={})=>{if(!Object(lt.a)(e))return null;const r=Object(y.a)(e,a,t);return r&&Object(ot.a)(e,r)?{id:Y.V.replyToEmail,name:ct.t("Reply to email"),iconType:"share-email","data-qa":"reply_to_email",frecencyId:"reply_to_email",disabled:n,showOfflineIcon:s}:null});ut.meta={name:"replyToEmail",key:"componentsMessageActionSelectorsReplyToEmailReplyToEmail"},ut.propTypes=dt;var pt=ut;const ht=new B.b("message"),mt={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},bt=Object(de.b)((e,{ts:t,channelId:a}={})=>{const n=Object(y.a)(e,a,t);if(!n)return null;if(!Object(x.g)(n))return null;const s=Object(x.ob)(n)?ht.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):ht.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"}),r=Object(f.m)(e,"feature_contextual_message_shortcuts");return{id:Y.V.shareMessage,name:s,iconType:"share-action","data-qa":"share_message_menu",frecencyId:Object(ue.f)("share"),uiElement:p.UiElement.SHARE_MESSAGE_BUTTON,shortcut:r?ht.t("S"):void 0}});bt.meta={name:"shareMessage",key:"componentsMessageActionSelectorsShareMessageShareMessage"},bt.propTypes=mt;var ft=bt,_t=a("F294");const gt=new B.b("message"),yt={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},Ot=Object(de.b)((e,{ts:t,channelId:a}={})=>{const n=Object(y.a)(e,a,t);if(!n)return null;if(!Object(x.t)(n))return null;const s=Object(x.rb)(n);let r=s?gt.t("Unstar message"):gt.t("Star message");if(Object(x.cb)(n)){const t=Object(_t.a)(n.files);n.comment&&Object(_.d)(e,t,n.comment.id)&&(r=s?gt.t("Unstar file comment"):gt.t("Star file comment"))}const i=s?p.UiElement.UNSTAR_MESSAGE_BUTTON:p.UiElement.STAR_MESSAGE_BUTTON;let o=s?"unstar-o":"star-o";return Object(I.c)(e)&&(r=s?"Remove from saved":"Save",o=s?"bookmark-filled":"bookmark"),{id:Y.V.star,name:r,iconType:o,"data-qa":"star_message_menu",frecencyId:Object(ue.f)(s?"unstar":"star"),uiElement:i}});Ot.meta={name:"star",key:"componentsMessageActionSelectorsStarStar"},Ot.propTypes=yt;var Ct=Ot,vt=a("Xjfm"),Et=a("XL7r");const kt=new B.b("message"),St=Object(de.b)((e,{ts:t,threadTs:a,channelId:n,disabled:s=!1,showOfflineIcon:r=!1}={})=>{const i=Object(y.a)(e,n,a||t),o=Object(g.e)(e,n),l=Object(Fe.Y)(o),c=Object(vt.b)(e,{ts:a||t,channelId:n}),d=l&&c;if(!Object(x.r)(e,{message:i,channel:o,ignoreMembership:d}))return null;const u=Object(Et.k)(e,"threads_everything"),h=Object(x.S)(i);let m,b=kt.t("Follow message"),f=kt.t("You\u2019ll be notified about any replies"),_=p.UiElement.FOLLOW_MESSAGE_BUTTON;const O=Object(vt.c)(e,{ts:a||t,channelId:n});return!O||s&&r?c?(h?(b=kt.t("Unfollow thread"),m=kt.t("This will be removed from Threads"),f=u?kt.t("You won\u2019t be notified about new replies"):m):(b=kt.t("Unfollow message"),m=kt.t("Replies will be excluded from Threads"),f=u?kt.t("You won\u2019t be notified about replies"):m),_=p.UiElement.UNFOLLOW_MESSAGE_BUTTON):h?(b=kt.t("Follow thread"),m=kt.t("New replies will appear in Threads"),f=u?kt.t("You\u2019ll be notified about new replies"):m):(b=kt.t("Follow message"),m=kt.t("Any replies will show up in Threads"),f=u?kt.t("You\u2019ll be notified about any replies"):m):(b=kt.t("Loading\u2026",{fallbackHash:"0e140d567d90b0014d95ffec7a755e52355079f3"}),f=""),{id:Y.V.subscribe,name:b,description:f,isLoading:O,iconType:"message-notification","data-qa":"follow_message",frecencyId:Object(ue.f)(c?"thread_unfollow":"thread_follow"),uiElement:_}});St.meta={name:"subscribe",key:"componentsMessageActionSelectorsSubscribeSubscribe"},St.propTypes={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,disabled:i.default.bool.isRequired,showOfflineIcon:i.default.bool.isRequired};var jt=St,It=a("quKg"),wt=a("1hAG"),Tt=a("5mKg"),Nt=a("K2Qr");const At=new B.b("message"),Rt={ts:i.default.string.isRequired,channelId:i.default.string.isRequired,messageContainerType:i.default.oneOf(Object(ee.a)(Y.I)),disabled:i.default.bool.isRequired,showOfflineIcon:i.default.bool.isRequired},Mt=Object(de.b)((e,{ts:t,channelId:a,disabled:n=!1,showOfflineIcon:s=!1}={})=>{if(!Object(f.m)(e,"feature_insights_comms_impact_message_stats"))return null;if("treatment"!==Object(It.c)(e,"insights_comms_impact_message_stats_pilot"))return null;const r=Object(wt.d)(e);if(!Object(Tt.x)(r)&&!Object(Tt.v)(r)&&!Object(Tt.s)(r))return null;const i=Object(y.a)(e,a,t);if(!i)return null;const o=Object(x.N)(i);if(Object(x.qb)(i)||"bot_message"===o)return null;const l=Object(g.e)(e,a);if(!l||!Object(Fe.Db)(l)&&!Object(Fe.Cb)(l)||Object(Fe.bb)(l))return null;let c=0;const d=Object(Nt.f)(e,a);return!(c=d&&d.counts&&d.counts.member_count)||c<50?null:{id:Y.V.viewStats,name:At.t("View message activity"),iconType:"times","data-qa":Y.V.viewStats,frecencyId:Object(ue.f)(Y.V.viewStats),uiElement:p.UiElement.REMOVE_FROM_CONVERSATION_BUTTON,disabled:n,showOfflineIcon:s}});Mt.meta={name:"viewStats",key:"componentsMessageActionSelectorsViewStatsViewStats"},Mt.propTypes=Rt;var Pt=Mt,xt=a("qSXi"),Lt=a("HYPA"),Ft=a("/X+W"),Dt=a("rtjy");const Bt=new B.b("app_actions"),Ut=e=>N()({},e,{danger:!1,description:Bt.t("Slack")}),qt=e=>({id:e.frecencyId,action:e}),Ht=Object(ie.b)("Search message actions (app + Slack) in Redux store",(e,t,a={})=>{var n=a.query;let s=void 0===n?"":n,r=Z()(a,["query"]);const i=t();const o=Object(Lt.c)(i).actions;let l=[...((e,t)=>[be(e,t),ye(e,t),Ee(e,t),Ie(e,t),Ae(e,t),Le(e,t),We(e,t),it(e,t),pt(e,t),ft(e,t),Ct(e,t),jt(e,t)])(i,r).filter(e=>e&&!e.isLoading).map(Ut),...o.map(xt.a)];return l=l.filter(e=>Object(xt.b)(e,Object(Ft.a)(s))),l=(l=Object(Dt.e)(i,{query:s,list:l.map(qt)})).map(e=>e.action)});Ht.meta={name:"searchLocalMessageActions",key:"actionsSearchMessageActionsSearchLocalMessageActions",description:"Search message actions (app + Slack) in Redux store"},Ht.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired,messageContainerType:i.default.oneOf(Object(ee.a)(Y.I)),query:i.default.string};const Wt=Object(ie.b)("Search message actions (app + Slack), returns as Promise",(e,t,a)=>{const n=e(Ht(a));return Promise.resolve(n)});Wt.meta={name:"searchMessageActions",key:"actionsSearchMessageActionsSearchMessageActions",description:"Search message actions (app + Slack), returns as Promise"},Wt.propTypes=Ht.propTypes;var Gt=Wt,Kt=a("2/vs"),Vt=a("9E9B"),zt=a("/Q0P"),$t=a("d7ED");a("8yst"),a("ejm9"),a("zoXK");const Yt=r.a.lazy(()=>Promise.all([a.e(132),a.e(131)]).then(a.bind(null,"D+tl"))),Qt=Object(ie.b)("Opens the Message Stats modal",(e,t,{messageTs:a,channelId:n}={})=>{e(Object($t.k)({messageTs:a,channelId:n})),e(Object(zt.a)({element:r.a.createElement(Yt,{messageTs:a,channelId:n})}))});Qt.meta={name:"openMessageStats",key:"actionsCommsImpactOpenMessageStatsOpenMessageStats",description:"Opens the Message Stats modal"},Qt.propTypes={messageTs:i.default.string.isRequired,channelId:i.default.string.isRequired};var Xt=Qt,Jt=a("yHhI"),Zt=a("Q+UV");i.default.string.isRequired,i.default.func.isRequired,i.default.func.isRequired;class app_actions_emoji_menu_AppActionsEmojiMenu extends s.PureComponent{constructor(e){super(e),this.onEmojiSelected=this.onEmojiSelected.bind(this)}onEmojiSelected(e,t){this.props.changeReactionFromUserAction({key:this.props.reactionKey,name:t})}render(){return r.a.createElement(K.a,{showHandyReactions:!0,forceOpen:!0,onEmojiSelected:this.onEmojiSelected,onClose:this.props.closeModal,startsOpen:!0,contentStyle:{left:"auto",top:"auto"},overlayStyle:{display:"flex","justify-content":"center","align-items":"center"}},r.a.createElement("span",{style:{position:"absolute"}}))}}app_actions_emoji_menu_AppActionsEmojiMenu.displayName="AppActionsEmojiMenu";const ea={changeReactionFromUserAction:(...e)=>Object(C.a)(...e),closeModal:(...e)=>Object(Q.a)(...e)};var ta=Object(o.b)(null,ea)(app_actions_emoji_menu_AppActionsEmojiMenu);var aa=(e,t,a)=>{const n=t.channelId,s=t.ts;return a((t,i)=>{const o=i(),l=Object(y.a)(o,n,s),c=Object(Zt.b)(l);return Object(U.a)()?a(Object(Q.e)({element:r.a.createElement(ta,{reactionKey:c})})):Object(q.a)({e:e,rxn_key:c})})},na=a("HvGc");const sa=Object(ie.b)("Open a thread to reply to a message",(e,t,{channelId:a,ts:n}={})=>{const s=t(),r=Object(y.a)(s,a,n).thread_ts||n;e(Object(na.l)({channelId:a,threadTs:r}))});sa.meta={name:"comment",key:"actionsCommentComment",description:"Open a thread to reply to a message"},sa.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var ra=sa,ia=a("jLdI");const oa=Object(ie.b)("Copy link to message",(e,t,{channelId:a,ts:n}={})=>{const s=t(),r=Object(y.a)(s,a,n),i=r.thread_ts,o=Object(wt.d)(s),l=o&&o.domain,c=Object(x.u)({teamDomain:l,channelId:a,ts:n,threadTs:i});e(Object(ia.a)({msg:r,payload:{subtype:"copy_link"}})),Object(D.c)(c)});oa.meta={name:"copyLink",key:"actionsCopyLinkCopyLink",description:"Copy link to message"},oa.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var la=oa,ca=a("pWPO"),da=a("+z37");const ua=Object(ie.b)("Copy message text",(e,t,{channelId:a,ts:n}={})=>{const s=t(),r=Object(y.a)(s,a,n);e(Object(ia.a)({msg:r,payload:{subtype:"copy_text"}}));const i=Object(ca.a)(Object(da.a)(s,{text:r.text,tsf_mode:"EDIT"}));Object(D.c)(i)});ua.meta={name:"copyText",key:"actionsCopyTextCopyText",description:"Copy message text"},ua.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var pa=ua;const ha=Object(ie.b)("Delete message",(e,t,{channelId:a,ts:n,rollup:s}={})=>{const i=r.a.createElement(z.a,{channelId:a,ts:n,rollup:s});Promise.resolve().then(()=>e(Object(Q.e)({element:i})))});ha.meta={name:"deleteMsg",key:"actionsDeleteMessageDeleteMsg",description:"Delete message"},ha.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var ma=ha;const ba=Object(ie.b)("Remove message broadcast",(e,t,a)=>{const n=r.a.createElement(V.a,a);Promise.resolve().then(()=>e(Object(Q.e)({element:n})))});ba.meta={name:"removeBroadcast",key:"actionsRemoveBroadcastRemoveBroadcast",description:"Remove message broadcast"},ba.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var fa=ba,_a=a("lE2N"),ga=a("bo4X"),ya=a("pmOY"),Oa=a("FdTv"),Ca=a("JVYW"),va=a("+J1t"),Ea=a("8W09"),ka=a("CGJF"),Sa=a("XLFM"),ja=a("Aeia"),Ia=a("G4ux"),wa=a("0f2Y"),Ta=a("plEq"),Na=a("O0RF"),Aa=a("20gP"),Ra=a("hyG2"),Ma=a("Dpjh"),Pa=a("mM05"),xa=a.n(Pa),La=a("brL+"),Fa=a("rZal"),Da=a("NAkb"),Ba=a("2Y1Y"),Ua=a("mLe0"),qa=a("a+Oh"),Ha=a("eglI"),Wa=a("oxKW"),Ga=a("9kTo"),Ka=a("Pe1S");i.default.string,i.default.string,i.default.object,i.default.string,i.default.string,i.default.object,i.default.bool,i.default.bool,i.default.bool,i.default.func,i.default.string,i.default.string,i.default.bool,i.default.func,i.default.func,i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.number;const Va={channelId:void 0,teamId:void 0,legacyChannel:void 0,threadTs:void 0,text:"",initialContents:void 0,enabled:!0,useJumbomoji:!0,enableBroadcastKeywords:!0,onTextChange:n.a,ariaLabel:void 0,placeholder:null,focusOnMount:!1,onEnter:n.a,onEscape:n.a,featureSonicInputs:!1,clientToolBar:!1,featureWysiwygComposer:!1,featureWysiwygAnchorText:!1,maxLines:3};class reply_to_email_input_ReplyToEmailInput extends s.PureComponent{constructor(e){super(e),this.setTextyRef=this.setTextyRef.bind(this),this.onTextChange=this.onTextChange.bind(this),this.renderInput=this.renderInput.bind(this),this.onEnter=this.onEnter.bind(this),this.state={numCharsOverLimit:this.countCharsOverLimit()}}onEnter(e){return!(!e||!e.shiftKey)||this.props.onEnter()}onTextChange(){const e=this.props.featureWysiwygComposer,t=this.state.numCharsOverLimit;let a,n;e?n=e?this.getTextContents():void 0:a=this.getText();const s=this.countCharsOverLimit(),r=s>0||t>0;r&&this.setState(()=>({numCharsOverLimit:s})),this.props.onTextChange({text:a,msgOps:n,overLimit:r})}getComputedModules({modules:e}){var t=this.props;const a=t.teamId,n=t.clientToolBar,s=t.featureWysiwygComposer,r=t.featureWysiwygAnchorText,i=n||s||Object(Ga.a)()?N()({},Object(Ka.a)({featureWysiwygComposer:s,featureWysiwygAnchorText:r}),{teamId:a}):null;return N()({},e,{composer:i,slacklink:s&&{convertImages:!1,disableLinksWithLabels:!r},slackmarkdown:s&&{convertHeaders:!1,convertHorizontalRule:!1}})}getText(){var e=this.props;const t=e.text,a=e.featureSonicInputs;return e.featureWysiwygComposer?null:this.texty?a?this.texty.value():Object(Ba.i)(this.texty.value(),{enableBroadcastKeywords:this.props.enableBroadcastKeywords}):t||""}getTextContents(){var e=this.props;const t=e.featureWysiwygComposer,a=e.initialContents;if(!t)return null;if(!this.texty)return a&&a.contents;const n=this.texty.getContents();return n&&n.contents}setTextyRef(e){this.texty=e&&e.getWrappedInstance?e.getWrappedInstance():e}UNSAFE_componentWillReceiveProps(e){this.props.featureWysiwygComposer||""===e.text&&this.texty.clear()}countCharsOverLimit(){var e=this.props;const t=e.featureSonicInputs,a=e.featureWysiwygComposer;let n;if(t&&a){const e=this.getTextContents();return n=Object(Ua.a)(new xa.a(e)),Math.max(0,n-Y.C)}return n=this.getText().length,Math.max(0,n-Y.B)}focus(){this.texty&&this.texty.focus()}renderInput({modules:e,isOpen:t,legacyTextyClassName:a}){var n=this.props;const s=n.featureSonicInputs,i=n.featureWysiwygComposer,o=n.maxLines,l=n.text,c=n.initialContents,d=this.getComputedModules({modules:e}),u=i?c:l;return r.a.createElement(Ha.default,{id:"reply-to-email-input",className:"p-reply_to_email_input",ref:this.setTextyRef,channelId:this.props.channelId,modules:d,isAutocompleteOpen:t,legacyTextyClassName:a,ariaLabel:this.props.ariaLabel,initialText:u,placeholder:Object(Ma.a)(this.props.placeholder),enableBroadcastKeywords:this.props.enableBroadcastKeywords,enableJumbomoji:this.props.useJumbomoji,onEnter:this.onEnter,onEscape:this.props.onEscape,onTextChange:this.onTextChange,isDisabled:!this.props.enabled,focusOnMount:this.props.focusOnMount,useLegacyCreate:!s,maxLines:o,minLines:3,maxLength:i?Y.C:Y.B})}renderLegacyAutocomplete(){var e=this.props;const t={searchOptions:{model_ob:e.legacyChannel,in_thread:!!e.threadTs},tabcomplete:{positionMenu:e=>{e.style.width=`${this.texty.container.offsetWidth}px`,Object(Da.a)(e,this.texty.container)},completers:["channels","emoji","members"]}};return this.renderInput({modules:t})}renderModernAutocomplete(){const e={enabled:this.props.enabled};return r.a.createElement(Wa.a,N()({completeOnMembers:!0,completeOnChannels:!0,completeOnEmoji:!0,channelId:this.props.channelId,renderInput:this.renderInput,shouldCompleteOnTab:!0,position:"bottom"},e))}render(){return this.props.featureSonicInputs?this.renderModernAutocomplete():this.renderLegacyAutocomplete()}}reply_to_email_input_ReplyToEmailInput.displayName="ReplyToEmailInput",reply_to_email_input_ReplyToEmailInput.defaultProps=Va;var za=Object(o.b)(function(e,{channelId:t}){const a=Object(f.m)(e,"feature_sonic_inputs");return{legacyChannel:a?null:Object(g.e)(e,t),useJumbomoji:Object(Fa.a)(e),teamId:Object(La.b)(e),featureSonicInputs:a,clientToolBar:"composer_toolbar"===Object(It.c)(e,"composer_toolbar"),featureWysiwygComposer:Object(qa.a)(e),featureWysiwygAnchorText:Object(f.m)(e,"feature_wysiwyg_anchor_text")}},null,null,{withRef:!0})(reply_to_email_input_ReplyToEmailInput);const $a=Object(R.a)("Reply to an email",(e,t,{ts:a,fileId:n,channelId:s,reason:r,text:i,blocks:o,to:l})=>e(Object(A.a)({method:"email.reply",reason:r,args:{message_ts:a,file_id:n,channel_id:s,text:i,blocks:o,to:l}})));$a.meta={name:"emailReply",key:"componentsWIPEmailWorkflowEmailReplyApiEmailReply",description:"Reply to an email"},$a.propTypes={channelId:i.default.string.isRequired,ts:i.default.string,fileId:i.default.string,reason:i.default.string.isRequired,text:i.default.string,blocks:i.default.string,to:i.default.array};var Ya=$a,Qa=a("YaVv");const Xa=Object(ie.b)("Sends a reply to an email",(e,t,{ts:a,channelId:n,fileId:s,text:r,blocks:i,to:o})=>{const l=Object(Qa.a)(t(),new xa.a(i&&i.contents)),c=l&&l.blocks,d=JSON.stringify(c);return e(Ya({ts:a,channelId:n,fileId:s,text:r,blocks:d,to:o,reason:"email_reply_api"})).then(()=>{Object(Jt.a)({getState:t}).info("Dispatched call to email.reply")}).catch(e=>{throw Object(Jt.a)({getState:t}).error(`Error in replyToEmail thunk: ${JSON.stringify(e)}`),e})});Xa.meta={name:"replyToEmail",key:"componentsWIPEmailWorkflowReplyToEmailThunkReplyToEmail",description:"Sends a reply to an email"},Xa.propTypes={};var Ja=Xa;a("PRpv");i.default.func,i.default.bool,i.default.object,i.default.func,i.default.object,i.default.string;const Za={closeModal:n.a,featureEmailWorklow:!1,email:void 0,replyToEmailThunk:n.a,message:void 0,myEmailAddress:void 0};class reply_to_email_dialog_ReplyToEmailDialog extends s.PureComponent{constructor(e){super(e),this.emailResponseRef=null,this.emailSubjectRef=null,this.emailToRef=null,this.sendEmailButtonRef=null,this.state={editMode:!1,toRecipients:[]},Object(l.a)(this,["onGo","buildRecipientNameList","buildRecipientEmailList","setEmailResponseRef","setEmailSubjectRef","setEmailToRef","renderEmailBody","toggleEditMode","maybeTokenizeEmail","removeTokenizedEmail","createEmptyStateMessage","sanitizeTokenList"])}componentDidMount(){const e=this.buildRecipientEmailList();this.setState(()=>({toRecipients:e}))}onGo(){const e=this.props.message,t=e&&e.channel,a=e&&e.files&&e.files[0],n=e&&e.ts,s=this.emailResponseRef&&this.emailResponseRef.texty&&this.emailResponseRef.texty.value(),r=this.emailResponseRef&&this.emailResponseRef.texty&&this.emailResponseRef.texty.getContents(),i=this.sanitizeTokenList(this.emailToRef.state.options);this.props.replyToEmailThunk({ts:n,channelId:t,fileId:a,text:s,blocks:r,to:i}),this.props.closeModal()}setEmailResponseRef(e){this.emailResponseRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}setEmailSubjectRef(e){this.emailSubjectRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}setEmailToRef(e){this.emailToRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}sanitizeTokenList(e){const t=[];return e.forEach(e=>{t.push(e.value)}),t}maybeTokenizeEmail(e){const t=this.emailToRef.state.filterQuery.trim().replace(",","");if(this.createEmptyStateMessage(t),e&&(188===e.keyCode||32===e.keyCode)){if(Object(Ra.b)(t).isValid){const e=Object(_a.a)([...this.state.toRecipients,{label:t,value:t}],"label");this.setState(()=>({toRecipients:e}))}}}removeTokenizedEmail(e){this.setState(()=>({toRecipients:e}))}createEmptyStateMessage(e){return r.a.createElement("div",{className:"c-select_options_list__option"},r.a.createElement("span",{className:"c-select_options_list__option_label"},e))}buildRecipientNameList(){const e=this.props.email.from,t=[];return e.forEach(e=>{const a=e.name;a&&t.push(a)}),t.join(", ")}buildRecipientEmailList(){const e=this.props.email.from,t=[];return e.forEach(e=>{const a=e.address;a&&t.push({label:a,value:a})}),t}toggleEditMode(){this.setState(e=>({editMode:!e.editMode})),setTimeout(()=>this.emailSubjectRef.focus(),0)}renderEmailBody(){const e=this.props.message,t=r.a.createElement(ja.b,{msg:e,showActions:!1}),a=d()("c-message__files","c-message__files--file_threads_meta_data","c-message__files--pillow",{"c-message__files--empty_body":!e});return r.a.createElement("div",{className:a},t)}render(){var e=this.props;const t=e.featureEmailWorklow,a=e.email,i=e.myEmailAddress,o=r.a.createElement("strong",null,"Subject:");return t?r.a.createElement(ga.a,{labelledby:"deletePost__title-bar",centered:!0,closeModal:this.props.closeModal,className:"p-email_reply_modal"},r.a.createElement(ya.a,null,r.a.createElement(Oa.a,{id:"deletePost__title-bar",title:"Reply to email","data-qa":"dialog_header"})),r.a.createElement(Ca.a,null,r.a.createElement(va.a,{"data-qa":"dialog_body"},!this.state.editMode&&r.a.createElement("p",null,o," Re: ",a.subject,r.a.createElement("br",null),r.a.createElement("strong",null,"Recipients:")," ",this.buildRecipientNameList(),r.a.createElement("br",null),r.a.createElement(wa.a,{onClick:this.toggleEditMode},"Edit")),this.state.editMode&&r.a.createElement(s.Fragment,null,r.a.createElement(Na.a,{text:"Subject",htmlFor:"email-subject",id:"emailSubject"},r.a.createElement(Ta.a,{ref:this.setEmailSubjectRef,ariaDescribedby:"emailSubject",name:"email-subject",id:"email-subject",value:a.subject,size:"medium"})),r.a.createElement(Na.a,{text:"Recipients",htmlFor:"email-recipients",id:"emailRecipients"},r.a.createElement(Aa.d,{className:"p-email_recipients_list_select",options:this.state.toRecipients,ariaLabel:"Email Recipients",selectId:"email-recipients",selectedOptions:this.state.toRecipients,isRequired:!0,isExpanded:!1,isDisabled:!1,onOptionSelected:n.a,width:"100%",onKeyDown:this.maybeTokenizeEmail,ref:this.setEmailToRef,onSelectedItemsChange:this.removeTokenizedEmail,emptyStateMessage:this.createEmptyStateMessage}))),r.a.createElement("p",null,r.a.createElement("strong",null,"Message")),r.a.createElement(za,{ariaLabel:"Email message",focusOnMount:!0,ref:this.setEmailResponseRef}),this.renderEmailBody())),r.a.createElement(Ea.a,{"data-qa":"dialog_footer"},r.a.createElement("span",{className:"p-reply_to_email--my_address"},i),r.a.createElement(ka.a,null,r.a.createElement(Sa.d,{type:"outline",onClick:this.props.closeModal,"data-qa":"dialog_cancel"},"Cancel"),r.a.createElement(Sa.d,{onClick:this.onGo,"data-qa":"dialog_go",disabled:!this.state.toRecipients.length||this.emailToRef&&this.emailToRef.state&&this.emailToRef.state.options&&!this.emailToRef.state.options.length},"Send")))):null}}reply_to_email_dialog_ReplyToEmailDialog.displayName="ReplyToEmailDialog",reply_to_email_dialog_ReplyToEmailDialog.defaultProps=Za;var en=Object(o.b)(e=>{const t=Object(lt.a)(e),a=Object(Ia.b)(e);return{featureEmailWorklow:t,myEmailAddress:a&&a.profile&&a.profile.email}},e=>({closeModal:(...t)=>e(Object(Q.a)(...t)),replyToEmailThunk:(...t)=>e(Ja(...t))}))(reply_to_email_dialog_ReplyToEmailDialog);const tn=Object(ie.b)("Reply to email",(e,t,{channelId:a,ts:n}={})=>{const s=t(),i=Object(y.a)(s,a,n),o=Object(ot.b)(s,i);e(Object(Q.e)({element:r.a.createElement(en,{message:i,email:o}),name:"reply-to-email-dialog"}))});tn.meta={name:"replyToEmail",key:"actionsReplyToEmailReplyToEmail",description:"Reply to email"},tn.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var an=tn;const nn=Object(ie.b)("Share message in channel",(e,t,{channelId:a,ts:n}={})=>{e(Object(E.a)({ts:n,channelId:a}))});nn.meta={name:"shareMessage",key:"actionsShareMessageShareMessage",description:"Share message in channel"},nn.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired};var sn=nn,rn=a("MYD1");const on=Object(ie.b)("Toggle message pinned status, with a confirmation dialog before un-pinning",(e,t,{ts:a,channelId:n}={})=>{const s=t();if(Object(m.j)(s,{ts:a,channelId:n})){const t=Object(m.g)(s,{type:m.a.MESSAGE,channel:n,ts:a});e(Object(Q.e)({element:r.a.createElement(rn.a,{pin:t,channelId:n})}))}else e(Object(m.m)({ts:a,channelId:n}))});on.meta={name:"togglePinWithUnpinConfirmation",key:"actionsTogglePinWithUnpinConfirmationTogglePinWithUnpinConfirmation",description:"Toggle message pinned status, with a confirmation dialog before un-pinning"},on.propTypes={ts:i.default.string.isRequired,channelId:i.default.string.isRequired};var ln=(e,t,a,n)=>{const s=a.ts,r=a.threadTs,i=a.channelId,o=a.rollup,l=a.messageContainerType,c=Object(Jt.b)();if(t.appId)return n(Object(Kt.c)({actionId:t.id,appId:t.appId,messageTs:s,channelId:i}));switch(t.id){case Y.V.addReaction:return aa(e,a,n);case Y.V.comment:return n(ra({ts:s,channelId:i}));case Y.V.copyLink:return n(la({ts:s,channelId:i}));case Y.V.copyText:return n(pa({ts:s,channelId:i}));case Y.V.deleteMessage:return n(ma({ts:s,channelId:i,rollup:o}));case Y.V.editMessage:return c.warn("Edit message is an unhandled case"),null;case Y.V.markUnread:return n(Object(Vt.setUnreadPoint)({channelId:i,unreadTs:s}));case Y.V.pin:return Object(U.a)()?n(on({ts:s,channelId:i})):n(Object(m.o)({ts:s,channelId:i}));case Y.V.remind:return c.warn("Remind is an unhandled case"),null;case Y.V.removeBroadcast:return n(fa({ts:s,channelId:i}));case Y.V.replyToEmail:return n(an({ts:s,channelId:i}));case Y.V.shareMessage:return n(sn({ts:s,channelId:i}));case Y.V.star:return n(Object(b.b)({ts:s,channelId:i}));case Y.V.subscribe:return n(Object(vt.h)({ts:r||s,channelId:i,messageContainerType:l}));case Y.V.viewStats:return n(Xt({messageTs:s,channelId:i}));default:return c.warn(`Unknown action type ${t.id}`),null}},cn=a("HOkk"),dn=a("cD5Y"),un=a("cTBa"),pn=a("Rrdp"),hn=a("od5y"),mn=a("1zbP"),bn=a("AE1P"),fn=a("V/As");const _n=56,gn=(u.a.MessageAction.isRequired,i.default.string,i.default.string,u.a.maybeUnknown(u.a.App),i.default.string.isRequired,{className:"",pillarClassName:"",app:void 0});class app_actions_dialog_item_AppActionsDialogItem extends s.PureComponent{constructor(e){super(e),Object(l.a)(this,["renderEnter","renderIcon","renderIconMaybe"])}renderIcon(){var e=this.props;const t=e.action,a=e.app,n=e.defaultAppIcon,s=a&&a.icons||t.iconSet;if(s){const e=_n,t=Object(fn.b)({icons:s},e,n);return r.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:t})}return t.iconType?r.a.createElement(hn.b,{type:t.iconType}):null}renderIconMaybe(e){return e?r.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},e):null}renderEnter(){var e=this.props;const t=e.className,a=e.pillarClassName,n=d()(t,"c-menu_item__enter",{[`${a}__enter`]:a});return r.a.createElement(hn.a,{type:"enter",className:n,"data-qa":"menu_item_enter",role:"presentation"})}render(){var e=this.props;const t=e.action,a=e.app,n=e.className,s=e.pillarClassName,i=d()(n,"c-menu_item__button","c-button-unstyled",{"c-menu_item__button--danger":t.danger,[`${s}`]:s,[`${s}--danger`]:t.danger&&s});let o=a&&a.name||t.description;return!o&&a&&(o=r.a.createElement(pn.a,{type:Object(mn.d)(a)?"unknown":"non-existent"})),r.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},r.a.createElement("div",{className:i,"data-qa":t["data-qa"],key:t.id,id:t.id},this.renderIconMaybe(this.renderIcon()),r.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},t.label||t.name,r.a.createElement("div",{className:"c-menu_item__description"},o)),this.renderEnter()))}}app_actions_dialog_item_AppActionsDialogItem.displayName="AppActionsDialogItem",app_actions_dialog_item_AppActionsDialogItem.defaultProps=gn;var yn=Object(o.b)((e,t)=>{const a=t.action;return{app:a&&a.appId&&Object(bn.e)(e,a.appId),defaultAppIcon:Object(bn.f)(e)}})(app_actions_dialog_item_AppActionsDialogItem),On=a("wSSu"),Cn=a("Uk1S"),vn=a("Bekf"),En=a("t3QL"),kn=a("3fyd"),Sn=a("CaXY"),jn=a("lek6"),In=a("3dqR"),wn=a("NvKv"),Tn=a("lV3N"),Nn=a("y7mK");a("pic6");i.default.string.isRequired,i.default.string.isRequired,i.default.object.isRequired,i.default.string,i.default.bool,i.default.string,i.default.string,i.default.string,i.default.string,i.default.arrayOf(i.default.object),i.default.string,u.a.BlockKitBlocks,i.default.object;const An={theme:"light",hasAdHocSender:!1,userId:null,username:null,botId:null,attachments:[],blocks:void 0,blocksContainerContext:Sn.a.app_actions,text:void 0,message:void 0};class app_actions_pillow_AppActionsPillow extends s.PureComponent{constructor(e){super(e),this.state={gradient:!1},this.renderAttachment=this.renderAttachment.bind(this)}componentDidMount(){this.maybeSetGradient()}maybeSetGradient(){const e=Object(On.findDOMNode)(this);e&&e.scrollHeight>e.clientHeight&&this.setState(()=>({gradient:!0}))}renderContent(){var e=this.props;const t=e.text,a=e.blocksContainerContext,n=e.message;return n&&n.blocks?r.a.createElement(kn.a,{msg:n,blocksContainerContext:a}):r.a.createElement(jn.a,{"data-qa":"app-actions-pillow-message-text",text:t})}renderAvatar(){var e=this.props;const t=e.userId,a=e.hasAdHocSender,n=e.botId;return r.a.createElement(In.c,{className:"p-app_actions_pillow__avatar",userId:t,isAdHocMember:a,botId:n,size:24,isInteractive:!1,showCard:!1,showTooltip:!1,tabIndex:"-1"})}renderTimestamp(){const e=this.props.ts;return r.a.createElement(wn.b,{timestamp:e,relative:!1,full:!0})}renderAttachment(e,t){var a=this.props;const n=a.ts,s=a.channelId,i=a.blocksContainerContext;return r.a.createElement(Tn.a,N()({key:t},Object(En.b)(e),{messageTs:n,activeChannelId:s,showDelete:!1,blocksContainerContext:i}))}renderAttachments(){const e=this.props.attachments;return e&&e.length?r.a.createElement("div",{className:"p-app_actions_pillow__attachments"},e.map(this.renderAttachment)):null}renderGutter(){return"light"===this.props.theme?r.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderAvatar()):r.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderTimestamp())}renderContentHeader(){var e=this.props;const t=e.userId,a=e.botId,n=e.username,s=e.theme,i=e.channel;return r.a.createElement("div",{className:"p-app_actions_pillow__content_header"},r.a.createElement(Nn.a,{userId:t,botId:a,username:n,channelName:Object(Fe.w)(i),isInteractive:!1}),"light"===s&&this.renderTimestamp())}render(){const e=this.props.theme,t=d()("p-app_actions_pillow",`p-app_actions_pillow--${e}`,{"p-app_actions_pillow--gradient":this.state.gradient});return r.a.createElement("div",{className:t,role:"presentation","data-qa":"app_action_pillow"},this.renderGutter(),r.a.createElement("div",{className:"p-app_actions_pillow__content"},this.renderContentHeader(),r.a.createElement("div",{className:"p-app_actions_pillow__body",id:"p-app_actions_pillow__body"},this.renderContent(),this.renderAttachments(),r.a.createElement("span",{className:"p-app_actions_pillow__blocker"}))))}}app_actions_pillow_AppActionsPillow.displayName="AppActionsPillow",app_actions_pillow_AppActionsPillow.defaultProps=An;var Rn=Object(o.b)((e,{ts:t,channelId:a})=>{const n=Object(y.a)(e,a,t),s=Object(g.e)(e,a),r=Object(x.H)(n);var i=Object(x.R)(e,n);const o=i.botId;return{channel:s,userId:r,username:i.username,botId:o,theme:Object(Cn.a)(e),hasAdHocSender:Object(vn.a)(n),text:n.text,attachments:n.attachments,message:n}})(app_actions_pillow_AppActionsPillow);a("qiqk");const Mn=new B.b("app_actions"),Pn=64,xn="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click",Ln=(i.default.string.isRequired,i.default.func,i.default.string.isRequired,i.default.func,i.default.func.isRequired,i.default.func.isRequired,i.default.func.isRequired,i.default.func.isRequired,i.default.object.isRequired,{onClose:n.a,onSelectAction:n.a});class app_actions_dialog_AppActionsDialog extends s.PureComponent{constructor(e){super(e),this.state={filterQuery:"",isLoading:!0,isError:!1,actions:[]},this.initClogged=!1,Object(l.a)(this,["onFilterUpdate","onFooterLinkClick","onSelectAction","renderSingleAction","handleSelectEvent","searchActions"]),this.searchActionsDebounced=Object(le.a)(this.searchActions,200,{leading:!0})}componentDidMount(){this.searchActionsDebounced()}componentDidUpdate(){if(!this.initClogged&&!this.state.isLoading&&!this.state.isError){this.props.clogger.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.IMPRESSION,step:p.UiStep.MESSAGE_ACTION_DIALOG,ui_element:p.UiElement.MESSAGE_ACTION_DIALOG}},app_actions_showing:this.state.actions.length}),this.initClogged=!0}}componentWillUnmount(){this.activePromise&&delete this.activePromise}onFooterLinkClick(){this.props.clogger.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MESSAGE_ACTION_DIALOG,ui_element:p.UiElement.GET_MORE_APP_ACTIONS}},app_actions_showing:this.state.actions.length})}onSelectAction(e,t){var a=this.props;const n=a.ts,s=a.channelId,r=a.closeModal,i=a.handleMessageAction,o=a.onSelectAction,l=a.clogger;r(),this.props.onClose&&this.props.onClose(e),o(e,t,{ts:n,channelId:s})||i(e,t,{ts:n,channelId:s}),this.props.recordMessageActionFrecencyEvent({action:t,query:this.state.filterQuery});const c={ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MESSAGE_ACTION_DIALOG,ui_element:t.uiElement}};t.appId?l.track(p.EventId.MSG_ACTION,{contexts:c,app_id:t.appId,action_id:t.id}):l.track(p.EventId.MSG_ACTION,{contexts:c})}onFilterUpdate(e){this.setState(()=>({filterQuery:e}),this.searchActionsDebounced)}searchActions(){const e=this.props.searchMessageActions({channelId:this.props.channelId,ts:this.props.ts,query:this.state.filterQuery}).then(t=>{this.activePromise===e&&this.setState(()=>({actions:t,isError:!1,isLoading:!1}))}).catch(()=>{this.setState(()=>({isError:!0,isLoading:!1}))});this.activePromise=e}handleSelectEvent(e,t,a){this.onSelectAction(a,t.props.action)}renderTitle(e){return r.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":!0},r.a.createElement("div",{className:"p-app_actions_dialog__title_text"},e))}renderMessagePreview(){var e=this.props;const t=e.channelId,a=e.ts;return r.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":!0},r.a.createElement(Rn,{channelId:t,ts:a}))}renderLoading(){return r.a.createElement("div",{className:"p-app_actions_dialog__loader"},r.a.createElement(dn.a,null))}renderSingleAction(e){return{label:r.a.createElement(yn,{key:e.id,pillarClassName:"p-app_actions_dialog_option",action:e}),value:e.id}}renderSelect(){const e=Mn.t("Search message actions\u2026");return r.a.createElement(un.b,{"data-qa":"app-actions-dialog-list",isAlwaysOpen:!0,usePlaceholderOption:!1,autoSelectFirstOption:!0,focusInputOnMount:!0,placeholder:e,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(oe.a)(this.state.actions,this.renderSingleAction),optionsRowHeight:Pn,useFullWidthOptions:!0})}render(){const e=this.state.isLoading,t=Mn.t("Get more message actions"),a=Mn.t("Use an action");return r.a.createElement(cn.a,{contentLabel:a,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:xn,onFooterLinkClick:this.onFooterLinkClick,footerText:t,goOnEnterPressed:!1,onCancel:this.props.onClose,showCancelButton:!1,showGoButton:!1,title:this.renderTitle(a),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:!1},this.renderMessagePreview(),e?this.renderLoading():this.renderSelect())}}app_actions_dialog_AppActionsDialog.displayName="AppActionsDialog",app_actions_dialog_AppActionsDialog.defaultProps=Ln;var Fn=Object(o.b)(function(e){return{clogger:Object(h.a)({state:e})}},e=>({closeModal:()=>e(Object(Q.a)()),handleMessageAction:(...t)=>ln(...t,e),searchMessageActions:(...t)=>e(Gt(...t)),recordMessageActionFrecencyEvent:t=>e(Object(ce.a)(t))}))(app_actions_dialog_AppActionsDialog),Dn=a("CpTu"),Bn=a("umiW");let Un=Lt.c;const qn=new B.b("app_actions"),Hn=64,Wn="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click",Gn=(i.default.string.isRequired,i.default.func,i.default.string.isRequired,i.default.func,i.default.arrayOf(u.a.MessageAction).isRequired,i.default.arrayOf(u.a.AppActionMenuItem),i.default.bool.isRequired,i.default.func.isRequired,i.default.func.isRequired,i.default.func.isRequired,i.default.object.isRequired,{appActions:[],onClose:n.a,onSelectAction:n.a});class deprecated_app_actions_dialog_AppActionsDialog extends s.Component{constructor(e){super(e),this.state={normalizedFilterQuery:""},Object(l.a)(this,["onFilterUpdate","onFooterLinkClick","onSelectAction","filterAction","formatSlackAction","renderSingleAction","handleSelectEvent"])}componentDidMount(){this.props.clogger.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.IMPRESSION,step:p.UiStep.MESSAGE_ACTION_DIALOG,ui_element:p.UiElement.MESSAGE_ACTION_DIALOG}},app_actions_showing:this.props.appActions.length}),this.props.onLoad()}shouldComponentUpdate({channelId:e,ts:t,isLoading:a}={},{normalizedFilterQuery:n}={}){return this.state.normalizedFilterQuery!==n||(!(!this.props.isLoading||a)||(this.props.channelId!==e||this.props.ts!==t))}onFooterLinkClick(){this.props.clogger.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MESSAGE_ACTION_DIALOG,ui_element:p.UiElement.GET_MORE_APP_ACTIONS}},app_actions_showing:this.props.appActions.length})}onSelectAction(e,t){var a=this.props;const n=a.ts,s=a.channelId,r=a.closeModal,i=a.handleMessageAction,o=a.onSelectAction,l=a.clogger;r(),this.props.onClose&&this.props.onClose(e),o(e,t,{ts:n,channelId:s})||i(e,t,{ts:n,channelId:s}),Object(ue.b)(t,this.state.normalizedFilterQuery);const c={ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MESSAGE_ACTION_DIALOG,ui_element:t.uiElement}};t.appId?l.track(p.EventId.MSG_ACTION,{contexts:c,app_id:t.appId,action_id:t.id}):l.track(p.EventId.MSG_ACTION,{contexts:c})}onFilterUpdate(e){const t=Object(Ft.a)(e);this.setState(()=>({normalizedFilterQuery:t}))}getActions(){let e=[...Object(oe.a)(this.props.slackActions,this.formatSlackAction),...Object(oe.a)(this.props.appActions,xt.a)];return e=Object(ne.a)(e,this.filterAction),e=Object(ue.c)(e,this.state.normalizedFilterQuery)}handleSelectEvent(e,t,a){this.onSelectAction(a,t.props.action)}filterAction(e){return Object(xt.b)(e,this.state.normalizedFilterQuery)}formatSlackAction(e){return N()({},e,{danger:!1,description:qn.t("Slack")})}renderTitle(e){return r.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":!0},r.a.createElement("div",{className:"p-app_actions_dialog__title_text"},e))}renderMessagePreview(){var e=this.props;const t=e.channelId,a=e.ts;return r.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":!0},r.a.createElement(Rn,{channelId:t,ts:a}))}renderLoading(){return r.a.createElement("div",{className:"p-app_actions_dialog__loader"},r.a.createElement(dn.a,null))}renderSingleAction(e){return{label:r.a.createElement(yn,{key:e.id,pillarClassName:"p-app_actions_dialog_option",action:e}),value:e.id}}renderSelect(){const e=qn.t("Search message actions\u2026");return r.a.createElement(un.b,{"data-qa":"app-actions-dialog-list",isAlwaysOpen:!0,usePlaceholderOption:!1,autoSelectFirstOption:!0,focusInputOnMount:!0,placeholder:e,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(oe.a)(this.getActions(),this.renderSingleAction),optionsRowHeight:Hn})}render(){const e=this.props.isLoading,t=qn.t("Get more message actions"),a=qn.t("Use an action");return r.a.createElement(cn.a,{contentLabel:a,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:Wn,onFooterLinkClick:this.onFooterLinkClick,footerText:t,goOnEnterPressed:!1,onCancel:this.props.onClose,showCancelButton:!1,showGoButton:!1,title:this.renderTitle(a),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:!1},this.renderMessagePreview(),e?this.renderLoading():this.renderSelect())}}deprecated_app_actions_dialog_AppActionsDialog.displayName="AppActionsDialog",deprecated_app_actions_dialog_AppActionsDialog.defaultProps=Gn;var Kn=Object(o.b)(function(e,t){var a=Un(e);const n=a.loading,s=a.actions,r=Object(ne.a)([be(e,t),ye(e,t),Ee(e,t),Ie(e,t),Ae(e,t),Le(e,t),We(e,t),it(e,t),ft(e,t),Ct(e,t),jt(e,t)]);return{slackActions:r,appActions:s,isLoading:!(!n&&!Object(Dn.a)(r,"isLoading")),clogger:Object(h.a)({state:e})}},e=>({closeModal:()=>e(Object(Q.a)()),onLoad:()=>e(Object(Bn.b)()),handleMessageAction:(...t)=>ln(...t,e)}))(deprecated_app_actions_dialog_AppActionsDialog);const Vn=e=>{let t=e.featureAppActionsFeRefactor,a=Z()(e,["featureAppActionsFeRefactor"]);return t?r.a.createElement(Fn,a):r.a.createElement(Kn,a)};Vn.displayName="AppActionsSwitcher";var zn=Object(o.b)(e=>({featureAppActionsFeRefactor:Object(f.m)(e,"feature_app_actions_fe_refactor")}))(Vn);const $n=Object(ie.b)("Open app actions dialog",(e,t,a)=>{const n=r.a.createElement(zn,a);e(Object(Q.e)({element:n}))});$n.meta={name:"browseAppActions",key:"actionsBrowseAppActionsBrowseAppActions",description:"Open app actions dialog"},$n.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired,onSelectAction:i.default.func.isRequired};var Yn=$n;const Qn=new B.b("message"),Xn="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-more_message_actions_button-more_actions_menu-click";i.default.string.isRequired,i.default.string.isRequired,i.default.func.isRequired,i.default.bool.isRequired,i.default.bool.isRequired,i.default.func.isRequired,i.default.object.isRequired,i.default.bool.isRequired,i.default.bool.isRequired;class browse_app_actions_menu_item_BrowseAppActions extends s.Component{constructor(e){super(e),this.onSelected=this.onSelected.bind(this),this.state={hasActions:e.hasActions}}onSelected(e){var t=this.props;const a=t.ts,n=t.channelId,s=t.onSelectAction,r=t.clogger;this.props.hasOverflow?this.props.browseAppActions({ts:a,channelId:n,onSelectAction:s}):e&&"click"!==e.type&&window.open(Xn,"_blank"),r.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MORE_ACTIONS_MENU,ui_element:p.UiElement.MORE_MESSAGE_ACTIONS_BUTTON}}})}render(){var e=this.props;e.ts,e.channelId,e.onSelectAction,e.hasActions,e.browseAppActions;const t=e.featureOfflineMode,a=e.isOffline,n=Z()(e,["ts","channelId","onSelectAction","hasActions","browseAppActions","featureOfflineMode","isOffline"]),s=this.state.hasActions?Qn.t("More message actions\u2026"):Qn.t("Add a message action\u2026");return r.a.createElement(re.a,N()({},n,{label:s,"data-qa":this.props.hasOverflow?"app_message_actions_dialog":"app_directory_link",onSelected:this.onSelected,href:this.props.hasOverflow?void 0:Xn,disabled:t&&a,showOfflineIcon:t&&a}))}}browse_app_actions_menu_item_BrowseAppActions.displayName="BrowseAppActions";var Jn=Object(se.b)(Object(o.b)(e=>{var t=Object(Lt.c)(e);const a=t.actions,n=t.loading,s=a.length;return{hasActions:n||!!s,hasOverflow:n||s>3,clogger:Object(h.a)({state:e}),featureOfflineMode:Object(f.m)(e,"feature_offline_mode"),isOffline:!Object(v.c)(e)}},e=>({browseAppActions:(...t)=>e(Yn(...t))}))(browse_app_actions_menu_item_BrowseAppActions)),Zn=a("rz65");const es=new B.b("message"),ts={ts:i.default.string.isRequired,channelId:i.default.string.isRequired},as=Object(de.b)((e,{ts:t,channelId:a}={})=>{const n=Object(y.a)(e,a,t);return n&&Object(x.i)(e,{message:n})?{id:Y.V.copyText,name:es.t("Copy text"),iconType:"link","data-qa":"copy_text",frecencyId:Object(ue.f)("copy_text"),uiElement:p.UiElement.COPY_LINK_BUTTON}:null});as.meta={name:"copyText",key:"componentsMessageActionSelectorsCopyTextCopyText"},as.propTypes=ts;var ns=as,ss=a("Fdc0");const rs=56,is=40,os=(i.default.oneOf(Object(ee.a)(Zn.a)),u.a.MessageAction.isRequired,i.default.func.isRequired,u.a.maybeUnknown(u.a.App),i.default.string.isRequired,i.default.object.isRequired,i.default.string,{type:Zn.a.default,app:void 0,shortcut:void 0});class message_action_menu_item_MessageActionMenuItem extends s.PureComponent{constructor(e){super(e),this.onSelected=this.onSelected.bind(this)}componentDidMount(){var e=this.props;const t=e.clogger,a=e.action;if(a.appId){const e={ui_context:{action:p.UiAction.IMPRESSION,step:p.UiStep.MORE_ACTIONS_MENU,ui_element:a.uiElement}};t.track(p.EventId.MSG_ACTION,{app_id:a.appId,action_id:a.id,contexts:e})}}onSelected(e){var t=this.props;const a=t.action;(0,t.onSelected)(e,a)}renderIcon(){var e=this.props;const t=e.action,a=e.app,n=e.type,s=e.defaultAppIcon,i=a&&a.icons||t.iconSet;if(i){const e=n===Zn.a.compactItem?is:rs,t=Object(fn.b)({icons:i},e,s);return r.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:t})}return t.iconType?r.a.createElement(hn.b,{type:t.iconType}):null}render(){var e=this.props;const t=e.action,a=e.app,n=(e.onSelected,e.type),s=e.shortcut,i=Z()(e,["action","app","onSelected","type","shortcut"]);let o=a&&a.name||t.description;return!o&&a&&(o=r.a.createElement(pn.a,{type:Object(mn.d)(a)?"unknown":"non-existent"})),r.a.createElement(re.a,N()({type:n,label:t.label||t.name,description:o,icon:this.renderIcon(),danger:t.danger,onSelected:this.onSelected,"data-qa":t["data-qa"],shortcut:s},i))}}message_action_menu_item_MessageActionMenuItem.displayName="MessageActionMenuItem",message_action_menu_item_MessageActionMenuItem.defaultProps=os;const ls=Object(o.b)((e,t)=>{const a=t.action;return{app:a&&a.appId&&Object(bn.e)(e,a.appId),defaultAppIcon:Object(bn.f)(e),clogger:Object(h.a)({state:e})}})(message_action_menu_item_MessageActionMenuItem);var cs=Object(se.b)(ls);a("FeTz");const ds=3,us=(i.default.string.isRequired,i.default.string.isRequired,i.default.string,u.a.Rollup(),i.default.oneOf(Object(ee.a)(Y.I)),i.default.func,i.default.func,i.default.func,i.default.arrayOf(i.default.oneOfType([u.a.MessageAction,i.default.node])).isRequired,i.default.bool,i.default.array,i.default.func.isRequired,i.default.func.isRequired,i.default.object.isRequired,i.default.bool.isRequired,i.default.bool.isRequired,{messageContainerType:Y.I.MESSAGE_PANE,onSelectAction:n.a,onMenuItemSelected:n.a,onLoad:n.a,canRunAppAction:!1,appActions:[],rollup:void 0,threadTs:void 0});class message_actions_menu_MessageActionsMenu extends s.PureComponent{constructor(e){super(e),this.state={appActions:e.appActions},Object(l.a)(this,["onSelectAction","renderSingleAppAction","renderSingleSlackAction"])}componentDidMount(){this.props.onLoad(),this.props.clogger.track(p.EventId.MSG_ACTION,{contexts:{ui_context:{action:p.UiAction.IMPRESSION,step:p.UiStep.MORE_ACTIONS_MENU,ui_element:p.UiElement.MORE_ACTIONS_MENU}},app_actions_showing:Math.min(this.state.appActions.length,ds)})}onSelectAction(e,t){var a=this.props;const n=a.ts,s=a.threadTs,r=a.channelId,i=a.handleMessageAction,o=a.onSelectAction,l=a.rollup,c=a.clogger,d=a.messageContainerType;o(e,t,{ts:n,channelId:r})||i(e,t,{ts:n,threadTs:s,channelId:r,rollup:l,messageContainerType:d}),this.props.recordMessageActionFrecencyEvent({action:t});const u={ui_context:{action:p.UiAction.CLICK,step:p.UiStep.MORE_ACTIONS_MENU,ui_element:t.uiElement}};t.appId?c.track(p.EventId.MSG_ACTION,{contexts:u,app_id:t.appId,action_id:t.id}):c.track(p.EventId.MSG_ACTION,{contexts:u})}renderAppActions(){var e=this.props;const t=e.onSelectAction,a=e.ts,n=e.channelId;return[...this.state.appActions.slice(0,ds).map(this.renderSingleAppAction),r.a.createElement(Jn,{key:"browse_app_actions",ts:a,channelId:n,onSelectAction:t})]}renderSingleAppAction(e){var t=this.props;const a=t.featureOfflineMode,n=t.isOffline,s=Object(xt.a)(e);return r.a.createElement(cs,{key:s.id,type:Zn.a.compactItem,action:s,onSelected:this.onSelectAction,disabled:a&&n,showOfflineIcon:a&&n})}renderSlackActions(){return this.props.slackActions.map(this.renderSingleSlackAction)}renderSingleSlackAction(e,t){if(!e)return null;if(r.a.isValidElement(e))return r.a.cloneElement(e,{key:t});const a=Object(te.a)(e,["iconType","iconSet"]);return r.a.createElement(cs,{key:a.id,className:`p-message_actions_menu__${a.id}`,action:a,onSelected:this.onSelectAction,disabled:a.disabled,showOfflineIcon:a.showOfflineIcon,shortcut:e.shortcut?e.shortcut:void 0})}render(){var e=this.props;e.ts,e.channelId,e.messageContainerType,e.onLoad;const t=e.onMenuItemSelected,a=(e.onSelectAction,e.canRunAppAction),n=(e.appActions,e.slackActions,e.handleMessageAction,Z()(e,["ts","channelId","messageContainerType","onLoad","onMenuItemSelected","onSelectAction","canRunAppAction","appActions","slackActions","handleMessageAction"]));return r.a.createElement(X.f,N()({menuClassNames:"p-message_actions_menu",onMenuItemSelected:t,stripTerminalSeparators:!0},n),this.renderSlackActions(),r.a.createElement(X.d,null),a&&this.renderAppActions())}}message_actions_menu_MessageActionsMenu.displayName="MessageActionsMenu",message_actions_menu_MessageActionsMenu.defaultProps=us;var ps=Object(o.b)((e,t)=>{const a=t.channelId,n=t.ts,s=t.messageContainerType||Y.I.MESSAGE_PANE,i=Object(y.a)(e,a,n),o=Object(x.s)(i),l=Object(ss.n)(e);const c=Object(Lt.c)(e).actions,d=Object(f.m)(e,"feature_offline_mode"),u=!Object(v.c)(e),p=l&&o,m=d?N()({},t,{disabled:u,showOfflineIcon:u}):t;return{slackActions:Object(ne.a)([jt(e,m),r.a.createElement(X.d,null),Object(ae.a)([Y.I.THREADS_FLEXPANE,Y.I.THREADS_VIEW,Y.I.SLI_BRIEFING],s)&&ft(e,t),Ee(e,t),ns(e,t),Object(ae.a)([Y.I.MESSAGE_PANE,Y.I.UNREAD_VIEW],s)&&Le(e,N()({},t,{allUnreads:s===Y.I.UNREAD_VIEW})),at(e,m),pt(e,m),We(e,m),Pt(e,m),Ae(e,m),it(e,m),Ie(e,m)]),appActions:c,canRunAppAction:p,clogger:Object(h.a)({state:e}),featureOfflineMode:d,isOffline:u}},e=>({onLoad:()=>e(Object(Bn.b)()),handleMessageAction:(...t)=>ln(...t,e),recordMessageActionFrecencyEvent:t=>e(Object(ce.a)(t))}))(message_actions_menu_MessageActionsMenu),hs=a("RMmo"),ms=a("X28p"),bs=a("UceB");const fs=new B.b("message"),_s=(i.default.string,i.default.string,i.default.arrayOf(i.default.string),i.default.string,i.default.arrayOf(i.default.shape({ts:i.default.string,user:i.default.string})),i.default.number,i.default.string,u.a.Rollup(),i.default.string,i.default.object,i.default.object,i.default.string,i.default.string,i.default.oneOf(["dense","light"]),i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.string,i.default.func,i.default.func,i.default.func,i.default.func,i.default.func,i.default.func,i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.func,i.default.func,i.default.func,i.default.func,i.default.bool,i.default.bool.isRequired,i.default.func,i.default.func,i.default.func,i.default.func,i.default.func,i.default.bool,i.default.bool,i.default.bool,i.default.object.isRequired,i.default.func,i.default.func,i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.string,i.default.func,i.default.func,i.default.bool,{reactionKey:null,fileId:null,fileIds:null,comment:null,replies:[],replyCount:0,ts:null,rollup:void 0,threadTs:null,channel:null,file:null,subtype:null,channelId:null,theme:"light",isStarred:!1,isPinned:!1,isEphemeral:!1,isFileAuthorExternal:!1,isReply:!1,canUserReplyToMessage:!1,messageContainerType:Y.I.MESSAGE_PANE,editHandler:n.a,unreadHandler:n.a,onMenuOpen:n.a,onMenuClose:n.a,onEmojiPickerOpen:n.a,onEmojiPickerClose:n.a,showComment:!0,showShare:!0,showReact:!0,showJump:!1,showStar:!0,showMoreActions:!0,canEditMessage:!1,canPin:!1,canMarkUnread:!1,canAddReminder:!1,canDeleteMessage:!1,changeReactionFromUserAction:n.a,pinMessage:n.a,unpinMessage:n.a,updateStar:n.a,renderMenuBelowTrigger:!0,openModal:n.a,showThreadOrRefresh:n.a,addReminderForMessage:n.a,openShareDialog:n.a,jumpToMessage:n.a,featureOfflineMode:!1,wasRecentlyOnline:!1,featureSonicEmoji:!1,clogLinkClick:n.a,clogThreadEvent:n.a,featureContextualMessageShortcuts:!1,parentId:void 0,featureAppViewsReminders:!1,featureMessageActionsRefresh:!1,setViewContextToRestoreFocus:n.a,completedMessageAction:n.a,isIAP1Enabled:!1}),gs={x:0,y:-8},ys={x:4,y:-16},Os={x:50,y:0},Cs={EDIT:["e"],REACT:["r"],COMMENT:["t"],PIN:["p"],SHARE:["s"],STAR:["a"],MARK_UNREAD:["u"],REMIND:["m"],DELETE:["Delete","del"]};class message_actions_MessageActions extends s.PureComponent{constructor(e){super(e),this.state={moreActionsMenuOpen:!1,subscribed:"loading",shouldReturnFocusAfterEmojiPickerClose:!0},Object(l.a)(this,["onAddReaction","onEmojiSelected","onEmojiPickerClose","onComment","onCopyLink","onDelete","onEdit","onMarkUnread","onMenuSelectAction","onMoreActionsMenuClose","onMoreActionsMenuOpen","onPin","onRemind","onRemoveBroadcast","onShare","onStar","onJump","onSubscribe","renderMoreActionsMenu","onMenuKeyDown","restoreFocusInTheFuture","restoreFocusImmediately","onEscapeKey"]),this.reactionBtnRef=r.a.createRef()}componentDidMount(){this.props.featureContextualMessageShortcuts&&this.bindContextualShortcuts()}componentWillUnmount(){this.props.featureContextualMessageShortcuts&&this.unbindContextualShortcuts()}onEscapeKey(e){e.stopPropagation();var t=this.props;const a=t.messageContainerType,n=t.channelId,s=t.ts;this.dispatchActionMessageCompleted({viewContext:a,channelId:n,ts:s,focusOnInput:!0})}onStar(e){if(!this.canStarMessage())return;if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation(),this.restoreFocusImmediately()}var t=this.props;const a=t.channelId,n=t.ts,s=t.fileId,r=t.fileIds,i=t.comment,o=t.subtype,l=t.isStarred;let c={channel:a,timestamp:n};if(s&&(c={file:s}),i&&"file_comment"===o){c={file_comment:i,file_comment_file:r&&r[0]||s}}this.props.updateStar(!l,c);const d=l?p.UiElement.UNSTAR_MESSAGE_BUTTON:p.UiElement.STAR_MESSAGE_BUTTON;this.trackAction(d),n&&Object(U.a)()&&this.clogMsgStarClick()}onAddReaction(e){this.props.reactionKey&&(Object(q.a)({e:e,rxn_key:this.props.reactionKey}),this.trackAction(p.UiElement.ADD_REACTION_BUTTON))}onEmojiSelected(e,t){const a=this.props.reactionKey;this.props.changeReactionFromUserAction({key:a,name:t})}onEmojiPickerClose(e){this.state.shouldReturnFocusAfterEmojiPickerClose||this.setState(()=>({shouldReturnFocusAfterEmojiPickerClose:!0})),this.props.featureContextualMessageShortcuts&&this.dispatchActionMessageCompleted(),this.props.onEmojiPickerClose(e)}onComment(e){if(!this.canCommentOnMessage())return;let t=!1;if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation(),t=!0,this.trackShortcut(Cs.COMMENT[0])}const a=this.props.threadTs||this.props.ts;this.props.showThreadOrRefresh({channelId:this.props.channel.id,threadTs:a,requestFocus:t});const n=this.state.subscribed?p.UiElement.REPLY_TO_THREAD_BUTTON:p.UiElement.START_A_THREAD_BUTTON;this.trackAction(n)}onShare(e){if(!this.canShareMessage())return;if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation(),this.restoreFocusInTheFuture(),this.trackShortcut(Cs.SHARE[0])}var t=this.props;const a=t.ts,n=t.channelId,s=t.fileId,r=t.messageContainerType;this.props.fileId&&"file_comment"!==this.props.subtype?this.props.openShareDialog({fileId:s,initialChannelId:n,viewContext:r}):this.props.openShareDialog({ts:a,channelId:n,viewContext:r}),this.trackAction(p.UiElement.SHARE_MESSAGE_BUTTON)}onEdit(e){if(this.props.canEditMessage){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type&&"Enter"!==e.key){if(e.target!==e.currentTarget)return;e.stopPropagation(),this.restoreFocusInTheFuture(),this.trackShortcut(Cs.EDIT[0])}this.props.onMenuClose(),this.props.editHandler(),e.stopPropagation(),this.trackAction(p.UiElement.EDIT_MESSAGE_BUTTON,!0)}}onDelete(e){if(!this.props.canDeleteMessage)return;if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation(),this.restoreFocusInTheFuture(),this.trackShortcut(Cs.DELETE[0])}var t=this.props;const a=t.channelId,n=t.ts,s=t.messageContainerType;this.props.openModal({element:r.a.createElement(z.a,{channelId:a,ts:n,viewContext:s})}),this.trackAction(p.UiElement.DELETE_MESSAGE_BUTTON,!0)}onMarkUnread(e){if(this.props.canMarkUnread){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation(),this.trackShortcut(Cs.MARK_UNREAD[0])}this.props.unreadHandler({channelId:this.props.channel.id,unreadTs:this.props.ts}),this.trackAction(p.UiElement.MARK_UNREAD_BUTTON,!0)}}onRemind(e){var t=this.props;const a=t.channel,n=t.ts,s=t.subtype,r=t.messageContainerType,i=t.featureContextualMessageShortcuts;return this.trackAction(p.UiElement.REMIND_ME_BUTTON,!0),()=>{this.props.addReminderForMessage({time:e,message_channel:a.id,message_ts:n,respond_in_channel:"thread_broadcast"===s,viewContext:r,featureContextualMessageShortcuts:i})}}onSubscribe(){var e=this.props;const t=e.replies,a=e.ts,n=e.channel,s=this.state.subscribed,r=t.length&&t[t.length-1].ts;W(n.id,a,!s,r);const i=s?p.UiElement.UNFOLLOW_MESSAGE_BUTTON:p.UiElement.FOLLOW_MESSAGE_BUTTON;this.trackAction(i,!0)}onPin(e){if(!this.props.canPin)return;if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation(),this.trackShortcut(Cs.PIN[0])}var t=this.props;const a=t.ts,n=t.channel,s=t.isPinned,r=t.pinMessage,i=t.unpinMessage;s?(i({ts:a,channelId:n.id}),this.trackAction(p.UiElement.UNPIN_FROM_THIS_CONVERSATION_BUTTON,!0)):(r({ts:a,channelId:n.id}),this.trackAction(p.UiElement.PIN_TO_THIS_CONVERSATION_BUTTON,!0))}onCopyLink(){var e=this.props;const t=e.channel,a=e.ts,n=e.threadTs,s=e.file,r=e.subtype;let i=Object(G.a)(t.id,a,n);s&&"file_comment"!==r&&(i=s.permalink),Object(D.c)(i),this.trackAction(p.UiElement.COPY_LINK_BUTTON,!0)}onJump(){var e=this.props;const t=e.channel,a=e.ts,n=e.isReply,s=e.clogLinkClick,r=this.props.threadTs||this.props.ts;this.props.jumpToMessage({channelId:t&&t.id,ts:a,threadTs:n&&r}),this.props.messageContainerType===Y.I.THREADS_VIEW&&s("OPEN_IN_CHANNEL")}onRemoveBroadcast(){var e=this.props;const t=e.channelId,a=e.ts;this.props.openModal({element:r.a.createElement(V.a,{channelId:t,ts:a})}),this.trackAction(p.UiElement.REMOVE_FROM_CONVERSATION_BUTTON,!0)}onMoreActionsMenuOpen(){this.setState(()=>({moreActionsMenuOpen:!0})),this.props.onMenuOpen(),this.trackAction(p.UiElement.MORE_ACTIONS_BUTTON)}onMoreActionsMenuClose(){this.setState(()=>({moreActionsMenuOpen:!1})),this.props.onMenuClose()}onMenuSelectAction(e,t){return t.id===Y.V.editMessage&&(this.onEdit(e),!0)}onMenuKeyDown(e,{isCurrentItemSubmenu:t=!1}={}){if(this.props.featureContextualMessageShortcuts)switch(e.key){case Cs.EDIT[0]:this.onEdit(e);break;case Cs.PIN[0]:this.onPin(e);break;case Cs.MARK_UNREAD[0]:this.onMarkUnread(e);break;case Cs.SHARE[0]:this.onShare(e);break;case Cs.DELETE[0]:case Cs.DELETE[1]:this.onDelete(e);break;case Cs.REMIND[0]:if(!t||!this.props.featureAppViewsReminders)return;this.restoreFocusInTheFuture(),this.trackShortcut(Cs.REMIND[0]),this.onRemind("Custom")()}}getContextualShortcutCommands(){const e=[];return e.push({keys:Cs.EDIT,handler:this.onEdit,action:"keydown"}),e.push({keys:Cs.REACT,handler:e=>{e.target===e.currentTarget&&(e.stopPropagation(),e.preventDefault(),this.reactionBtnRef&&this.reactionBtnRef.current&&(this.setState(()=>({shouldReturnFocusAfterEmojiPickerClose:!1})),this.restoreFocusInTheFuture(),this.reactionBtnRef.current.click(),this.trackShortcut(Cs.REACT[0])))},action:"keydown"}),e.push({keys:Cs.COMMENT,handler:this.onComment,action:"keydown"}),e.push({keys:Cs.PIN,handler:this.onPin,action:"keydown"}),e.push({keys:Cs.SHARE,handler:this.onShare,action:"keydown"}),e.push({keys:Cs.STAR,handler:this.onStar,action:"keydown"}),e.push({keys:Cs.MARK_UNREAD,handler:this.onMarkUnread,action:"keydown"}),e.push({keys:Cs.REMIND,handler:e=>{e.target===e.currentTarget&&this.props.canAddReminder&&this.props.featureAppViewsReminders&&(e.stopPropagation(),this.restoreFocusInTheFuture(),this.onRemind("Custom")(),this.trackShortcut(Cs.REMIND[0]))},action:"keydown"}),e.push({keys:Cs.DELETE,handler:this.onDelete,action:"keydown"}),e.push({keys:"esc",handler:this.onEscapeKey,action:"keydown"}),e}getTooltipFocusText(e,t){return this.props.featureContextualMessageShortcuts?r.a.createElement(s.Fragment,null,e," ",r.a.createElement("br",null),fs.rt("Press {keyShortcut}",{keyShortcut:r.a.createElement(w.a,{label:t,slim:!0})})):e}getType(){var e=this.props;const t=e.fileId,a=e.subtype;return t?"file_comment"===a?"file comment":"file":"message"}makeAriaLabelForShortcutKey(e,t){return this.props.featureContextualMessageShortcuts?`${e} ${fs.t("Press {key}",{key:t})}`:e}bindContextualShortcuts(){const e=this.props.parentId;if(e){const t=document.getElementById(e);t&&(this.keyCommands=new hs.a(t),this.keyCommands.bindAll(this.getContextualShortcutCommands()))}}unbindContextualShortcuts(){this.keyCommands&&(this.keyCommands.reset(),this.keyCommands=null)}isAutomated(){return Object(F.a)(this.props.subtype)}isTemp(){return this.props.ts.indexOf("x")>-1}trackAction(e,t=!1){const a={action:p.UiAction.CLICK,ui_element:e};t&&(a.step=p.UiStep.MORE_ACTIONS_MENU),this.props.clogger.track(p.EventId.MSG_ACTION,{contexts:{ui_context:a}})}clogMsgStarClick(){var e=this.props;const t=e.channelId,a=e.isStarred,n=e.messageContainerType,s=e.threadTs,r=e.clogger,i=e.clogThreadEvent,o=a?p.EventId.STAR_REMOVE_CLICKED:p.EventId.STAR_ADD_CLICKED,l={channel_id:t,parent_message_id:s};n===Y.I.THREADS_VIEW?i({event:o,metadata:l}):r.track(o,l)}canCommentOnMessage(){var e=this.props;const t=e.replyCount,a=e.subtype,n=e.isEphemeral,s=e.canUserReplyToMessage,r=t||"thread_broadcast"===a;return!this.props.isFileAuthorExternal&&(!(this.isAutomated()||this.isTemp()||n)&&!(!s&&!r))}canShareMessage(){var e=this.props;const t=e.ts,a=e.subtype;return!e.isEphemeral&&"tombstone"!==a&&!Object(x.tb)(t)&&"file_comment"!==a}canStarMessage(){var e=this.props;const t=e.subtype,a=e.isStarred;return!(e.isEphemeral||"tombstone"===t&&!a)}restoreFocusInTheFuture(){this.props.featureContextualMessageShortcuts&&this.props.setViewContextToRestoreFocus(this.props.messageContainerType)}restoreFocusImmediately(){this.props.featureContextualMessageShortcuts&&(this.props.setViewContextToRestoreFocus(this.props.messageContainerType),this.dispatchActionMessageCompleted())}dispatchActionMessageCompleted(){if(!this.props.featureContextualMessageShortcuts)return;var e=this.props;const t=e.messageContainerType,a=e.channelId,n=e.ts;this.props.completedMessageAction({viewContext:t,channelId:a,ts:n})}trackShortcut(e){var t=this.props;const a=t.clogger,n=t.featureContextualMessageShortcuts,s=t.messageContainerType;n&&a.track(p.EventId.CLIENT_KEYBOARD_SHORTCUTS,{contexts:{[p.ClientEventKeys.ui_context]:{[p.UiContextKeys.action]:p.UiAction.KEYDOWN,[p.UiContextKeys.ui_properties]:{[p.UiPropertiesKeys.key]:e,[p.UiPropertiesKeys.view_context]:s}}}})}renderAriaLabelForStar(){const e=this.props.isIAP1Enabled,t=this.getType();return{file:e?"Save":fs.t("Star file"),"file comment":e?"Save":fs.t("Star file comment"),message:e?"Save":fs.t("Star message")}[t]}renderTextForStarTooltip(){let e={file:fs.t("Unstar file"),"file comment":fs.t("Unstar file comment"),message:fs.t("Unstar message")},t={file:fs.t("Star file"),"file comment":fs.t("Star file comment"),message:fs.t("Star message")};return this.props.isIAP1Enabled&&(e={file:"Remove from saved","file comment":"Remove from saved",message:"Remove from saved"},t={file:"Save","file comment":"Save",message:"Save"}),(this.props.isStarred?e:t)[this.getType()]}renderStar(){var e=this.props;const t=e.isStarred,a=e.channel,n=e.showStar,s=e.isIAP1Enabled,i=e.featureMessageActionsRefresh;if(!n||!this.canStarMessage())return null;const o=this.props.featureContextualMessageShortcuts?fs.t("A"):"",l=this.renderAriaLabelForStar();let c;return c=s?t?"bookmark-filled":"bookmark":i?t?"star":"star-o":t?"small-star-filled":"small-star",r.a.createElement(bs.a,{iconType:c,label:({hasKeyboardFocus:e})=>e?this.getTooltipFocusText(l,o):this.renderTextForStarTooltip(),ariaLabel:this.makeAriaLabelForShortcutKey(l,o),onClick:this.onStar,"data-qa":"star_message",tooltipPosition:a?"top":"top-right",shortcutKey:this.props.featureContextualMessageShortcuts?Cs.STAR[0]:null,"aria-pressed":t,hideFromScreenReader:!0})}renderShare(){var e=this.props;const t=e.subtype,a=e.featureOfflineMode,n=e.wasRecentlyOnline;if(!e.showShare||!this.canShareMessage())return null;let s="file_share"===t||"file_mention"===t?fs.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):fs.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});a&&!n&&(s=r.a.createElement($.a,{tooltipLabel:s}));const i=this.props.featureContextualMessageShortcuts?fs.t("S"):"",o=this.getTooltipFocusText(s,i);return r.a.createElement(bs.a,{iconType:this.props.featureMessageActionsRefresh?"share-square-o":"share-action",label:({hasKeyboardFocus:e})=>e?o:s,ariaLabel:this.makeAriaLabelForShortcutKey(s,i),onClick:this.onShare,"data-qa":"share_message",shortcutKey:this.props.featureContextualMessageShortcuts?Cs.SHARE[0]:null})}renderReaction(){if(!this.props.showReact)return null;if("tombstone"===this.props.subtype||this.props.isEphemeral)return null;if("file_comment"===this.props.subtype)return null;const e=fs.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),t=this.props.featureContextualMessageShortcuts?fs.t("R"):"",a=this.getTooltipFocusText(e,t);return this.props.featureSonicEmoji?r.a.createElement(K.a,{onEmojiSelected:this.onEmojiSelected,onClick:this.props.onEmojiPickerOpen,onClose:this.onEmojiPickerClose,showHandyReactions:!0,shouldReturnFocusAfterClose:this.state.shouldReturnFocusAfterEmojiPickerClose},r.a.createElement(bs.a,{iconType:this.props.featureMessageActionsRefresh?"add-reaction":"small-reaction",label:({hasKeyboardFocus:t})=>t?a:e,ariaLabel:this.makeAriaLabelForShortcutKey(e,t),"data-qa":"add_reaction_action",btnRef:this.reactionBtnRef,shortcutKey:this.props.featureContextualMessageShortcuts?Cs.REACT[0]:null})):r.a.createElement(bs.a,{iconType:this.props.featureMessageActionsRefresh?"add-reaction":"small-reaction",label:fs.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),onClick:this.onAddReaction,"data-qa":"add_reaction_action"})}renderJump(){if(!this.props.showJump)return null;if(!this.props.channel)return null;let e=fs.t("Jump");return this.props.messageContainerType!==Y.I.THREADS_VIEW&&this.props.messageContainerType!==Y.I.THREADS_FLEXPANE||(e=fs.t("Open in channel",{fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})),r.a.createElement(bs.a,{iconType:"jump",label:e,onClick:this.onJump,"data-qa":"jump_to_message"})}renderComment(){var e=this.props;const t=e.replyCount,a=e.subtype,n=e.canUserReplyToMessage,s=e.messageContainerType,i=e.featureOfflineMode,o=e.wasRecentlyOnline;if(!e.showComment||!this.canCommentOnMessage())return null;const l=t||"thread_broadcast"===a;let c;s===Y.I.THREADS_VIEW?c=fs.t("View thread in sidebar"):!n&&l?c=fs.t("View thread"):l?(c=fs.t("Reply to thread"),i&&!o&&(c=r.a.createElement($.a,{tooltipLabel:c}))):(c=fs.t("Start a thread"),i&&!o&&(c=r.a.createElement($.a,{tooltipLabel:c})));const d=this.props.featureContextualMessageShortcuts?fs.t("T"):"",u=this.getTooltipFocusText(c,d);return r.a.createElement(bs.a,{iconType:this.props.featureMessageActionsRefresh?"comment-alt":"small-reply",label:({hasKeyboardFocus:e})=>e?u:c,ariaLabel:this.makeAriaLabelForShortcutKey(c,d),onClick:this.onComment,ariaHasPopup:null,"data-qa":"start_thread",shortcutKey:this.props.featureContextualMessageShortcuts?Cs.COMMENT[0]:null})}renderEllipsis(){var e=this.props;const t=e.renderMenuBelowTrigger,a=e.channel,n=e.featureOfflineMode,s=e.featureMessageActionsRefresh,i=e.wasRecentlyOnline,o=e.showMoreActions;if(!a||!o)return null;let l=fs.t("More actions",{fallbackHash:"3a91b1007dce1af87db6afdb266966dd5d7a3df1"});return n&&!i&&(l=r.a.createElement($.a,{tooltipLabel:fs.t("More actions")})),r.a.createElement(X.e,{renderMenu:this.renderMoreActionsMenu,position:`${t?"right-bottom":"top-right"}`,allowanceX:t?Os.x:0,offsetX:t?ys.x:gs.x,offsetY:t?ys.y:gs.y,onOpen:this.onMoreActionsMenuOpen,onClose:this.onMoreActionsMenuClose},r.a.createElement(bs.a,{iconType:s?"vertical-ellipsis":"small-ellipsis",label:l,tooltipPosition:"top-right","data-qa":"more_message_actions"}))}renderMoreActionsMenu(e){var t=this.props;const a=t.channel,n=t.ts,s=t.threadTs,i=t.messageContainerType,o=t.rollup,l=e.onTriggerClose,c=e.onMenuItemSelected;return r.a.createElement(ps,{rollup:o,ts:n,threadTs:s,channelId:a.id,onSelectAction:this.onMenuSelectAction,onTriggerClose:l,onMenuItemSelected:c,messageContainerType:i,onMenuKeyDown:this.onMenuKeyDown})}render(){const e=d()("c-message__actions",{"c-message__actions--menu-showing":this.state.moreActionsMenuOpen,"c-message__actions--dense":"dense"===this.props.theme,"c-message__actions--offscreen":this.props.renderOffscreen}),t=fs.t("Message actions");return r.a.createElement(ms.a,{className:e,ariaLabel:t},this.renderReaction(),this.renderJump(),this.renderComment(),this.renderShare(),this.renderStar(),this.renderEllipsis())}}message_actions_MessageActions.displayName="MessageActions",message_actions_MessageActions.defaultProps=_s;const vs={changeReactionFromUserAction:C.a,pinMessage:m.m,unpinMessage:m.q,updateStar:b.a,openModal:Q.e,showThreadOrRefresh:(...e)=>Object(O.n)(...e),addReminderForMessage:P,openShareDialog:E.a,jumpToMessage:(...e)=>Object(k.a)(...e),setViewContextToRestoreFocus:(...e)=>Object(S.a)(...e),completedMessageAction:(...e)=>Object(j.a)(...e)};t.a=Object(o.b)((e,{fileId:t,channelId:a,ts:n,showReact:s,messageContainerType:r})=>{const i=Object(g.e)(e,a),o=Object(y.a)(e,a,n),l=Object(f.d)(e),c=Object(L.a)(e,"msg_edit_window_mins");return{channel:i,file:Object(_.c)(e,t),isFileAuthorExternal:Object(_.f)(e,t),featureSonicEmoji:Object(f.m)(e,"feature_sonic_emoji"),clogger:Object(h.a)({state:e}),featureOfflineMode:Object(f.m)(e,"feature_offline_mode"),wasRecentlyOnline:Object(v.h)(e),canUserReplyToMessage:Object(x.r)(e,{message:o,channel:i}),showReact:Object(x.e)(e,o)&&s,canEditMessage:Object(x.l)(e,l,o,i,c),canPin:Object(x.o)(e,{message:o,channel:i}),canMarkUnread:Object(x.m)(e,{message:o,channel:i}),canAddReminder:Object(x.f)(e,{message:o,channel:i}),canDeleteMessage:Object(x.k)(e,{message:o,channel:i,messageContainerType:r}),featureContextualMessageShortcuts:Object(f.m)(e,"feature_contextual_message_shortcuts"),featureAppViewsReminders:Object(f.m)(e,"feature_app_views_reminders"),featureMessageActionsRefresh:Object(f.m)(e,"feature_message_actions_refresh"),isIAP1Enabled:Object(I.c)(e)}},vs)(message_actions_MessageActions)},"0nyD":function(e,t,a){},"0rID":function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a("sk9p"),s=a.n(n),r=a("ifKl"),i=a("yIs4"),o=a("q1tI");function l(e,t){const a=Object(o.useRef)(e);var n=Object(o.useState)(e),l=s()(n,2);const c=l[0],d=l[1];return Object(o.useEffect)(()=>{if(c!==a.current&&Object(i.a)(t)&&t>0){const e=setTimeout(()=>{d(a.current)},t);return()=>{clearTimeout(e)}}return r.a},[t,c]),[c,d]}},"0xwB":function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return r});var n=a("ROZo");Object(n.b)("TS.permissions.members.canPostInModelOb",()=>!1),Object(n.b)("TS.permissions.members.canCreateConvertOrgSharedChannels",()=>!1);const s=Object(n.b)("TS.permissions.members.canUserInviteToWorkspace",()=>!1),r=(Object(n.b)("TS.permissions.members.canEditUserGroups",()=>!1),Object(n.b)("TS.permissions.members.canCreateAndDeleteUserGroups",()=>!1))},"0z7M":function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("XHGt"),i=a("aK/h"),o=a("DQNL"),l=a("HYSh"),c=a("t85p"),d=a("A+cF"),u=a("9mdM"),p=a("kd6D"),h=a("od5y"),m=a("nNoG");a("JfyJ");const b=new m.b("user_groups"),f=(i.default.string,i.default.object,i.default.bool.isRequired,{className:void 0,userGroup:void 0}),_={unknown:"unknown",nonexistent:"non-existent"},g=e=>{const t=Object(o.h)(e);return s.a.createElement(d.c,{className:"c-user_group__name"},s.a.createElement(h.b,{type:"user_groups",inline:!0,className:"c-medium_user_group__icon"}),t)};g.displayName="renderName";const y=e=>{const t=Object(o.e)(e);return s.a.createElement(d.b,null,t)};y.displayName="renderDescription";const O=(e,t)=>{const a=Object(o.f)(e),n=Object(o.l)(e);return s.a.createElement(d.a,null,s.a.createElement("span",{className:"c-medium_user_group__handle"},a),t?b.rt("{count} {count, plural, =1 {member} other {members}}",{count:n}):void 0)};function C({className:e,userGroup:t,featureSonicUserGroups:a}){const n=!Object(o.v)(t);if(Object(o.s)(t)||Object(o.r)(t))return s.a.createElement(u.a,{type:Object(o.s)(t)?_.unknown:_.nonexistent,size:"medium"});const r=n?p.c.dim:null;return s.a.createElement(d.d,{className:e,size:"medium",style:r,text:g(t),subtext:y(t),metadata:O(t,a)})}O.displayName="renderMetaData",C.displayName="MediumUserGroupEntity",C.defaultProps=f,t.a=Object(r.b)(function(e,{id:t,group:a}){return{userGroup:a||Object(l.e)(e,t),featureSonicUserGroups:Object(c.m)(e,"feature_sonic_user_groups")}})(C)},"1Oqo":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("q1tI"),s=a("oHBb"),r=a("lCOO");function i(){const e=Object(n.useContext)(s.a),t=Object(r.a)();return e&&e.teamId||t.warn("USE_CLOGGER","Missing team-based clogger"),e}},"1Uzj":function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a("q1tI"),s=a.n(n),r=a("XHGt"),i=a("uvIC");const o=(e,{fileId:t})=>({file:Object(i.c)(e,t)});function l(e){return Object(r.b)(o)(t=>t&&t.file?s.a.createElement(e,t):null)}},"1VmY":function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("aK/h"),o=a("nNoG"),l=a("bo4X"),c=a("pmOY"),d=a("FdTv"),u=a("JVYW"),p=a("+J1t"),h=a("8W09"),m=a("CGJF"),b=a("+6YQ");const f=new o.b("generic_dialog"),_=(i.default.string,i.default.node,i.default.oneOf(["primary","danger"]),i.default.string,i.default.string,i.default.bool,i.default.func,i.default.func,i.default.func,i.default.string,i.default.oneOf(["dialog","alertdialog"]),i.default.string,{title:"",children:null,submitButtonType:"primary",submitButtonText:null,showCancelButton:!0,cancelButtonText:"Cancel",onSubmit:n.a,onCancel:n.a,onClose:n.a,"aria-describedby":null,role:"alertdialog","data-qa":"dialog"});class BaseDialog extends s.PureComponent{render(){var e=this.props;const t=e["aria-describedby"],a=e.role,n=e["data-qa"],s=e.title,i=e.children,o=e.submitButtonType,_=e.submitButtonText,g=e.cancelButtonText,y=e.showCancelButton,O=e.onCancel,C=e.onClose,v=e.onSubmit;return r.a.createElement(l.a,{labelledby:"base_dialog_title",describedby:t,closeModal:C,role:a},r.a.createElement(c.a,null,r.a.createElement(d.a,{title:s,id:"base_dialog_title","data-qa":`${n}_header`})),r.a.createElement(u.a,null,r.a.createElement(p.a,{"data-qa":`${n}_body`},i)),r.a.createElement(h.a,{"data-qa":`${n}_footer`},r.a.createElement(m.a,null,y&&r.a.createElement(b.b,{type:"outline",onClick:O,"data-qa":`${n}_cancel`},g),r.a.createElement(b.b,{type:o,onClick:v,"data-qa":`${n}_go`},_||f.t("Confirm")))))}}BaseDialog.displayName="BaseDialog",BaseDialog.defaultProps=_,t.a=BaseDialog},"1YQg":function(e,t,a){"use strict";a.d(t,"f",function(){return r}),a.d(t,"e",function(){return i}),a.d(t,"j",function(){return o}),a.d(t,"l",function(){return l}),a.d(t,"m",function(){return c}),a.d(t,"o",function(){return d}),a.d(t,"a",function(){return u}),a.d(t,"c",function(){return p}),a.d(t,"k",function(){return b}),a.d(t,"n",function(){return f}),a.d(t,"b",function(){return h}),a.d(t,"d",function(){return _}),a.d(t,"i",function(){return g}),a.d(t,"g",function(){return m}),a.d(t,"h",function(){return y}),a.d(t,"p",function(){return O});var n=a("Z0Cl"),s=a("k55U");const r="calls_server_credentials",i="A00";function o(e){return e.startsWith("R")}function l(e){return e.startsWith("C")||e.startsWith("D")||e.startsWith("G")}function c(e){return e.startsWith("D")}function d(e){return e.startsWith("C")}var u,p,h,m;function b(e){const t=e;return"sh_room_created"===t.subtype||"sh_room_shared"===t.subtype}function f(e){return void 0!==e.slack_id}function _(e){return void 0!==e.slackId}function g(e){return Object(n.a)(e,e=>_(e))}function y(e){switch(e){case 0:return"good";case 1:return"fair";case 2:return"bad";case 3:return"worst";default:return Object(s.a)(e),"good"}}function O(e){return{token:e.token,tokenExpiry:e.token_expiry,hostname:e.hostname,port:e.port,turn:{username:e.turn_auth.username,password:e.turn_auth.password,ports:e.turn_ports}}}!function(e){e.Cleanup="cleanup",e.Timeout="timeout",e.InviterCancel="inviter_cancel",e.AcceptedTimeout="accepted_timeout",e.CallerHangup="caller_hangup"}(u||(u={})),function(e){e.Accept="accept",e.Reject="reject",e.DoNotDisturb="dnd",e.OnCall="on_call",e.Hangup="hangup",e.Missed="missed"}(p||(p={})),function(e){e.Outgoing="outgoing",e.Incoming="incoming"}(h||(h={})),function(e){e.UserEndedOrphanedCall="UserEndedOrphanedCall",e.OutgoingInviteRejected="OutgoingInviteRejected",e.ShowSurvey="ShowSurvey",e.MaxTeams="rooms_max_teams",e.CallEnded="rooms_call_ended",e.MaxParticipants="rooms_max_participants",e.UnauthorizedRoom="rooms_invalid_room",e.InvalidParameters="rooms_invalid_parameters",e.NoServersAvailable="rooms_no_servers_available",e.UnauthorizedChannel="rooms_invalid_channel"}(m||(m={}))},"1c4n":function(e,t,a){},"1iAE":function(e,t,a){},"1lYC":function(e,t,a){},"1yga":function(e,t,a){"use strict";var n=a("owWc"),s=a("F294"),r=a("ifKl"),i=a("q1tI"),o=a.n(i),l=a("aK/h"),c=a("XHGt"),d=a("yPgC"),u=a("tbBR"),p=a("aLpA"),h=a("fYfO"),m=a("hOQf"),b=a("t85p"),f=a("uvIC"),_=a("nNoG"),g=a("/9ln"),y=a("HOkk"),O=a("H3xq"),C=a("CaXY"),v=a("dhvi"),E=a("QOH6"),k=a("S2Hy"),S=a("p2RN"),j=a("dEjE"),I=a("0d94");const w=Object(I.b)(j.a),T=new _.b("msg_edit"),N=(l.default.string.isRequired,l.default.string.isRequired,l.default.bool,l.default.string,l.default.func,l.default.bool,l.default.string,d.a.Rollup(),l.default.bool,l.default.func,l.default.func,l.default.string,l.default.bool,l.default.func,l.default.string,l.default.bool,{messageExists:!0,removeMessage:r.a,subtype:void 0,hasFile:!1,fileMode:void 0,rollup:void 0,useBulkDelete:!1,closeModal:r.a,completedMessageAction:r.a,viewContext:p.I.MESSAGE_PANE,featureContextualMessageShortcuts:!1,setViewContextToRestoreFocus:r.a,viewContextToRestoreFocus:null,featureMessageKitInMessagePane:!1});class BaseDeleteMessageDialog extends i.PureComponent{constructor(){super(),this.onGo=this.onGo.bind(this),this.onClose=this.onClose.bind(this)}componentDidMount(){this.maybeCloseModal()}componentDidUpdate(){this.maybeCloseModal()}onGo(e){this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type&&"Enter"===e.key&&e.preventDefault();var t=this.props;const a=t.ts,s=t.channelId,r=t.removeMessage,i=t.useBulkDelete,o=t.rollup,l=t.featureContextualMessageShortcuts,c=i?Object(n.a)(o,(e,t)=>e.concat(t.timestamps),[]):[];c.sort(),r({channelId:s,ts:a,rollupTimestamps:i&&c?c:[]}),l&&(this.messageDeleted=!0)}onClose(){var e=this.props;const t=e.channelId,a=e.ts,n=e.viewContext,s=e.viewContextToRestoreFocus,r=e.featureContextualMessageShortcuts,i=e.completedMessageAction,o=e.setViewContextToRestoreFocus;if(!(r&&s))return;const l=this.messageDeleted;l&&o(null),i({viewContext:n,channelId:t,ts:a,focusOnInput:l})}getBodyText(){const e=this.props.subtype;if(!e)return null;const t=this.getFileLabel();if("file_upload"===e){if("file"===t)return T.t("Note that deleting this message will not delete the file that was uploaded.");if("snippet"===t)return T.t("Note that deleting this message will not delete the snippet that was uploaded.");if("post"===t)return T.t("Note that deleting this message will not delete the post that was uploaded.")}else if("file_share"===e){if("file"===t)return T.t("Note that deleting this message will not unshare the file.");if("snippet"===t)return T.t("Note that deleting this message will not unshare the snippet.");if("post"===t)return T.t("Note that deleting this message will not unshare the post.")}else if("file_comment"===e)return T.t("Note that deleting this message will not delete the comment.");return null}getFileLabel(){var e=this.props;const t=e.hasFile,a=e.fileMode;return t?"snippet"===a?"snippet":"post"===a?"post":"file":null}maybeCloseModal(){this.props.messageExists||this.props.closeModal()}render(){var e=this.props;const t=e.ts,a=e.channelId,n=e.rollup,s=e.useBulkDelete,r=e.messageExists,i=e.featureMessageKitInMessagePane;if(!r)return null;const l=this.getBodyText();return o.a.createElement(u.a,{id:p.I.DELETE_MSG_DIALOG},o.a.createElement(y.a,{title:T.t("Delete message"),goButtonText:T.t("Delete"),goButtonType:"danger",onGo:this.onGo,onClose:this.onClose},T.t("Are you sure you want to delete this message? This cannot be undone."),l&&o.a.createElement("div",{className:"margin_top_50"},l),o.a.createElement("div",{className:"margin_top_100"},i?o.a.createElement(w,{ts:t,channelId:a,blocksContainerContext:C.a.delete_dialog,footer:!1}):o.a.createElement(O.a,{ts:t,channelId:a,rollup:s&&n?n:null,blocksContainerContext:C.a.delete_dialog,isStandalone:!0}))))}}BaseDeleteMessageDialog.displayName="BaseDeleteMessageDialog",BaseDeleteMessageDialog.defaultProps=N;const A={removeMessage:(...e)=>Object(g.a)(...e),closeModal:(...e)=>Object(v.a)(...e),completedMessageAction:(...e)=>Object(E.a)(...e),setViewContextToRestoreFocus:(...e)=>Object(k.a)(...e)},R=Object(c.b)((e,{channelId:t,ts:a,rollup:n})=>{const r=Object(b.m)(e,"feature_allow_bulk_delete_join_leave_messages"),i=Object(h.a)(e,t,a);if(!i)return{messageExists:!1};const o=i.files,l=Object(f.c)(e,Object(s.a)(o));let c,d=!1;l&&(d=!0,c=l.mode);const u=!(!r||!n);return{messageExists:!0,hasFile:d,fileMode:c,subtype:Object(m.N)(i),rollup:n,useBulkDelete:u,featureContextualMessageShortcuts:Object(b.m)(e,"feature_contextual_message_shortcuts"),viewContextToRestoreFocus:Object(S.a)(e),featureMessageKitInMessagePane:Object(b.m)(e,"feature_message_kit_in_message_pane")}},A)(BaseDeleteMessageDialog);R.propTypes={channelId:l.default.string.isRequired,ts:l.default.string.isRequired},t.a=R},"2/vs":function(e,t,a){"use strict";a.d(t,"c",function(){return _}),a.d(t,"b",function(){return g}),a.d(t,"a",function(){return y});var n=a("QbLZ"),s=a.n(n),r=a("aK/h"),i=a("Pb16"),o=a("vhAc"),l=a("XfeM"),c=a("t85p"),d=a("ns4K"),u=a("brL+"),p=a("DVJN"),h=a("jZWL"),m=a("umiW"),b=a("5/cL");const f=Object(l.b)("Runs a message action (deprecated)",(e,t,a)=>{const n=t(),r=Object(m.f)(n);return Object(m.c)(r,a)?Promise.resolve():(e(Object(m.e)(a)),e(Object(o.c)(s()({},a,{type:"message_action"}))).then(()=>e(Object(m.j)(a))).catch(()=>{e(Object(m.i)(a));const t=Object(i.a)({onRetry:()=>e(f(a))});e(Object(d.c)({element:t}))}))});f.meta={name:"deprecatedRunMessageAction",key:"appActionsStoreActionsDeprecatedRunMessageAction",description:"Runs a message action (deprecated)"},f.propTypes={actionId:r.default.string,appId:r.default.string,channelId:r.default.string,messageTs:r.default.string};const _=Object(l.b)("Runs a message action",(e,t,a)=>{if(!Object(c.m)(t(),"feature_app_actions_fe_refactor"))return e(f(a));e(Object(b.c)());const n=s()({},a,{type:p.a.messageAction});return e(Object(o.c)(n)).catch(()=>{const t=Object(i.a)({onRetry:()=>e(_(n))});e(Object(d.c)({element:t}))})});_.meta={name:"runMessageAction",key:"appActionsStoreActionsRunMessageAction",description:"Runs a message action"},_.propTypes={actionId:r.default.string.isRequired,appId:r.default.string.isRequired,channelId:r.default.string.isRequired,messageTs:r.default.string.isRequired};const g=Object(l.b)("Runs a global action",(e,t,a)=>{e(Object(b.c)());const n=s()({},a,{type:p.a.globalAction});return e(Object(o.c)(n)).catch(()=>{const t=Object(i.a)({onRetry:()=>e(g(n))});e(Object(d.c)({element:t}))})});g.meta={name:"runGlobalAction",key:"appActionsStoreActionsRunGlobalAction",description:"Runs a global action"},g.propTypes={actionId:r.default.string.isRequired,appId:r.default.string.isRequired};const y=Object(l.b)("Explicitly load app actions",(e,t)=>{const a=t(),n=Object(u.b)(a);return Object(h.a)(n)});y.meta={name:"loadAppActions",key:"appActionsStoreActionsLoadAppActions",description:"Explicitly load app actions"}},"20nV":function(e,t,a){},"23La":function(e,t,a){},"2Dlx":function(e,t,a){},"2FVR":function(e,t,a){},"2LCd":function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("MIIS"),o=a("OZf9"),l=a("CpTu"),c=a("XHGt"),d=a("yHhI"),u=a("UF3u");r.default.string.isRequired,r.default.string,r.default.string,r.default.object.isRequired;let p=0;class favicon_Favicon extends n.PureComponent{constructor(e){super(e),this.originalFavicon=this.findFavicon()}componentDidMount(){p&&this.props.logger.error("Multiple Favicons mounted"),p+=1,this.updateFavicon()}componentDidUpdate(e){Object(u.a)(this.getFaviconProps(e),this.getFaviconProps(this.props))||this.updateFavicon()}componentWillUnmount(){p-=1,this.setOrRemoveFavicon(this.originalFavicon)}getFaviconProps(e){return{rel:"shortcut icon",href:e.href,sizes:e.sizes,type:e.type}}setOrRemoveFavicon(e){const t=document.querySelector("head");if(!t)return void this.logger.error("<head> not found");const a=this.findFavicon();a?e?t.replaceChild(e,a):a.remove():e&&t.appendChild(e)}findFavicon(){const e=document.querySelectorAll("head > link");return Object(l.a)(e,e=>{const t=e.getAttribute("rel");return!(!t||!t.split(" ").includes("icon"))})}updateFavicon(){const e=document.createElement("link");Object(o.a)(this.getFaviconProps(this.props),(t,a)=>{e.setAttribute(a,t)}),this.setOrRemoveFavicon(e)}render(){return null}}favicon_Favicon.displayName="Favicon",favicon_Favicon.defaultProps={sizes:"16x16 32x32 48x48",type:"image/png"};var h=Object(c.b)(e=>({logger:Object(d.a)({state:e})}))(favicon_Favicon),m=a("dxEi"),b=a("G3Sk"),f=a("9kTo"),_={online:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",onlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABNVBMVEVKFEz///9NGE+EX4VLFU3w7PD9/f1SH1Tb0Nv59/n18/W4orhZKFt2TnhwRXF2TXdpPGqghKFMFk7FtMZTIFVhMmNxR3PHt8hfL2F6U3xpPWt/WYD+/v5nOWhWI1edgJ7z8POBW4LIuMhySHS6pruHZIl/WoGJZopuQ3CObI/Vydba0NtsQW7ArcHw6/DEs8VYJlqojqnx7fH8/PyfgqDGtcbg1+Du6e7e1N5kN2Z8VX2fg6BbKlxOGVBxRnJ4T3ljNWV6UnuDXoSLaIyih6NMF07az9qWd5f8+/zUx9Ts5+zj2+Pv6u/t5+13Tni1n7WYeZlTH1XYzdn49vjLu8uIZYm5pLpmOGipkKqMaY2UdJXr5euZe5prP2xsQG2JZovTxtSnjahOGlDSxdOQcJKHY4hXJVnkajHYAAABJUlEQVR4Xr3PNXbFMBCF4Tvmx8wYZmZmZmaG/S8hHke2UuikfF9xp9DfCC3V4YQzUeB01umDStYkogKS5EpCIUGukLHOZwMKRYsLrYv3EyqTljqQcm26DmWQXen2HNsIgrNEUf7PJGGm1w/yJlkLEBwK9PvBgLtWTgRhGQxD53OHCT5rIpiSwRCe+QyCt1kXQbQQIk9oZBQYGz9sAETV6RgChuaBpGlpSHPzlcoilpZLqwDikXZPZtOG0CCXvrXt7g7iu+TbM0Sw7wUx3gNESCqL4IiDfA9vGCck1USQIqLztAjKF+S7hO/qOmVDBLi57fRE7jX8FQRqMugienj8P3A9QeGLg+bveYFCjYNXxPiUoPJWJTOOd4foQ4OSHeUH47uO1voBEO4eo1Zt+vMAAAAASUVORK5CYII=",onlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAC9UlEQVR4AdSVA4wfXxDH/7H/rm3bttvzVWfbtm3btm3bVnC27Wk23dvu/VxPvsGbTOaz7w32j5f/v6ZKz/97mXSQoeIIM4WiGvDsvxeFh5l+H4Dsc/m26raZqZmC+MIPx9kQQNaZ998GwLyfdXx4fO2zFSUVg1PwplAZs/y3ASi+UVrD2MLcwqstb7TYtCuNXL8NgOscz8rKCpbxZju9Pq9he2lVxTHWb1MDL11vLAMABnxGY2NjRTwa36yLeC7y6bDp6nMZgOBoxG+ysLBQl1tUDqWmFgBVVaZX0fqog5MSnTLTPhYIQABwJ7hEga13xVEWKgDQkdiewdnowKjkI2kEAMelpaWurq58NatyygHQ72skraGkEQWsrq7CQ3V0dBg/4S84zEgRAKaJNGB8aBzCoBLIEWGoc2g8++d2HocK9BUZQGFCIWlAdkQOhInfl0A9wBC9J/7k32f19fXZkXG5apZF9NLFN7gLjzDBOkk8SO+779UGADYBzCpM0+bU4MyPK3h/9CMSGWwZMjEyMTY45qHtCccX/72Cq0DZ4cXiI+LZbrNf++sG6MZfN2/9fQffpjCr0Ow4kW1liHm9je7llk/LHJYVKjh+AeC/JqjOqqH1QRvEdpIdPHQ7GGSeyqoyq/NdEUDDpJ/IJPsmFycX4wQL0dfID21oRBsAuO8axqCY8FGtVa2ox1HJCcm+vLRMolT1RfXwDAQAw33DOIAinTLW09XWBWHw7WvkTOSOGAHASN8INkjmmZyJoCnWA30MYQleCWQBQjeECQC89X3QiOaKltdb6QgC4OvmZ+dJZC9LKyNcA5CxgEmKfyqQkEIRBIAErwuHWIemBqbhBK9nL++A6zoS25QwgFpRDUB2EdhQz5CLmut3BCAmdk+cdoARnzE219T41GaniaAZ7QDoNmyuusJ6cOKGA4acdgAoyCIYViYkgn8RzDB46HYyoH+O2oI6sptqfYTrZGCSBRa0YIMQBWK4amSYcjiFqYgwGhkWAAA494XLYBFPegAAAABJRU5ErkJggg==",offline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",offlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",offlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABSlBMVEVKFEyScpNLFU1iNGSMao17VH2Qb5FZKFtNGE9hMmPGJFKObZCOb4+EX4WRcZJjNWVHE0lcK15sQG2Iaol2TXdIE0pQHFJaKVxVIlfMJVNwRXHMJVRdLV98VX1WI1dsQW5WJFhOGVA3DzlMFk5PG1FfL2GLaIzNJVOBW4J3Tnh9Vn5gMGGIXXu6JlKPcJCaRWdYJ1pbK11TIFV+Yn9zKE/FJFFSH1SCXINTI1WzNFxYJlpWJVhFEke3IlB3T2uTP2CwMlq+K1a2Ik+WP2FHETylNlyNa46MaY1/Y39sT21HIUheMGA5Dzo7ED1JFEtgM2JeLmBZMFpRHVNhM2N5UXunN11UIVZgMWJ5XnptQm9pPGqBWHbIKFSHZImiH0uQcZF1THaMR2dJE0uDXoR9V392TniBZYJnOmmKZ4tpPWtXJVmObI9vRHFOGlBSjo4eAAABPUlEQVR4Xr3QNWPrQBCF0TtiMzNTmJmZmZnh8fv/bVYrGWRbKVLka+c0c9FcZL7TUgvwO78OYh6XHIW/3w4UJCLKYGraDgwTS8HuoB2YID3hsC9lAxDk4DR0bgcwculwQHTf3rWAQqCXF9AA8TH0nGgCMYnMNocg0sCP1YQVeKjWJANe9+jYuAW46kCCg5g4XltPNQC5Ds4wQ0zMzl0tLC4tO50rD2BFM4oBFLkMJDekIF7coa3tnWJxbx9GAg/1BBxE/KwIB/GjSuUEJTV9AUAN9/Dka80yoUPQn7mB6qVqXTDr4CCgs3uEqV6+EcR8OnDhqQFkTZBj4FUwQV6pgTdU873nNJgA8WQ3L/xTgCUT2GcCkejX788B6w9aMy5/DeBrB7LGNnyONNr1j0hSUfIwJqBtWpQfyv/xvX0AvdA4SuBm2+sAAAAASUVORK5CYII=",posts:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAw0lEQVR4AWOAg4IAAYaqqHqG6sj9QPo/jfB5IE5gwAAVEQpAifsgRXTC98F2wgB9LUc4AhzqoCCBC9IfNzAwVEefHzAHVALTG4gxoJiQglEHJKyZ8b9hzxpyMEgv5Q64//71f3LB/XevaRwFo2lgNA2MpoHRNDCaBgjHOZ3SACLOh2IUjDpg1AGV0fsHrlkO7KqBOgcD5oCKCGA/sSFBANhBoHvXDGQnSucUJEBPy8F2ogNwkFRH0ayrBu36N4A7pVAAAK813oG8J1mnAAAAAElFTkSuQmCC"};r.default.shape({getState:r.default.func.isRequired,subscribeImmediate:r.default.func,subscribe:r.default.func.isRequired}).isRequired;class workspace_favicon_WorkspaceFavicon extends n.Component{constructor(e){super(e),this.renderWithState=this.renderWithState.bind(this)}renderWithState(e){const t=Object(m.d)(e),a=!!Object(b.f)(e),n=Object(b.o)(e);let r;return t?r=a?_.onlineMentions:n?_.onlineUnreads:Object(f.a)()?_.posts:_.online:(r=_.offline,r=a?_.offlineMentions:n?_.offlineUnreads:_.offline),s.a.createElement(h,{href:r})}render(){return s.a.createElement(i.a,{render:this.renderWithState,store:this.props.store})}}workspace_favicon_WorkspaceFavicon.displayName="WorkspaceFavicon";var g=workspace_favicon_WorkspaceFavicon;t.a=g},"2LTG":function(e,t,a){},"2Mhf":function(e,t,a){e.exports=a.p+"data_storage-32c2fbf.png"},"2Rjh":function(e,t,a){e.exports=a.p+"guests@2x-b86f826.png"},"2WV3":function(e,t,a){"use strict";var n=a("F294"),s=a("bPB8"),r=a("q1tI"),i=a.n(r),o=a("XHGt"),l=a("aK/h"),c=a("XL7r"),d=a("GQZf"),u=a("t3QL"),p=a("qkTT"),h=a("B/Zf"),m=a("F+zK"),b=a("0Cnk"),f=a("HWeM"),_=a("Atrf"),g=a("hUMe");l.default.object.isRequired,l.default.bool;function y({richTextBlock:e,do24hrTime:t}){if(!e||!e.elements||!e.elements.length)return null;let a=0;const o=()=>a+=1;let l,c=Object(n.a)(e.elements);if(c.type===d.a.LIST&&(l="ordered"===c.style?i.a.createElement(r.Fragment,null,"1. "):i.a.createElement(r.Fragment,null,"\u2022 "),c=Object(n.a)(c.elements)),!c||!c.elements||!c.elements.length)return null;let y=!1;const O=Object(u.a)(c).elements.map(e=>{if(y)return null;if(e.type===d.a.EMOJI){const t=e.name,a=e.skinTone,n=a?`:${t}::skin-tone-${a}:`:`:${t}:`;return i.a.createElement(p.b,{key:o(),text:n,emojiSize:p.a.MEDIUM,isEmojiInlineWithText:!0,showTooltip:!0})}if(e.type===d.a.CHANNEL)return i.a.createElement(h.a,{key:o(),id:e.channelId,noLinking:!0});if(e.type===d.a.USER)return i.a.createElement(_.a,{key:o(),id:e.userId,noLinking:!0,noHighlights:!0});if(e.type===d.a.USERGROUP)return i.a.createElement(m.a,{key:o(),id:e.usergroupId,noLinking:!0,noHighlights:!0});if(e.type===d.a.BROADCAST)return i.a.createElement(b.a,{key:o(),type:e.range,noLinking:!0,noHighlights:!0});if(e.type===d.a.TEAM)return i.a.createElement(g.a,{key:o(),id:e.teamId});if(e.type===d.a.DATE){const a=e.timestamp,n=e.format,s=e.fallback;return a&&n?i.a.createElement(f.a,{key:o(),ts:a.toString(),format:n,fallback:s,do24hrTime:t,noLinking:!0}):null}if(e.type===d.a.LINK)return i.a.createElement(r.Fragment,{key:o()},e.text||e.url||"");if(e.type===d.a.COLOR)return i.a.createElement(r.Fragment,{key:o()},e.value||"");if(e.text){const t=e.text.split(/\n/);return t.length>1&&(y=!0),i.a.createElement(r.Fragment,{key:o()},Object(n.a)(t)||"")}return null});return i.a.createElement(r.Fragment,null,l,Object(s.a)(O),y&&i.a.createElement(r.Fragment,null,"\u2026"))}y.displayName="RichTextPreamble",y.defaultProps={do24hrTime:!1};t.a=Object(o.b)(e=>({do24hrTime:Object(c.k)(e,"time24")}))(y)},"2XjY":function(e,t,a){},"2ekl":function(e,t,a){},"2ojh":function(e,t,a){"use strict";a.d(t,"a",function(){return i});const n=new(a("nNoG").b)("message");function s({currentUserId:e,pinnedBy:t,renderPinnedBy:a}={}){return t?t===e?n.t("Pinned by you"):n.rt("Pinned by {member}",{member:a(t)}):n.t("Pinned")}function r({long:e=!1,renderStarButton:t,featureMessageLabelsCopy:a,isIAP1Enabled:s}={}){return s?t(e?{text:"Added to your saved items"}:a?{text:"Starred"}:{text:"starred"}):e?n.rt("<star>Added to your starred items</star>",null,t):a?n.rt("<star>Starred</star>",null,t):n.rt("<star>starred</star>",null,t)}function i({isPinned:e,isStarred:t,isEphemeral:a,isBroadcast:i,isCustomResponse:o,isSliHighlight:l,isSelfIm:c,isSlackbotIm:d,currentUserId:u,pinnedBy:p,renderPinnedBy:h,renderStarButton:m,renderHighlight:b,renderBroadcast:f,featureMessageLabelsCopy:_,isIAP1Enabled:g}={}){return a?c||d?null:n.t("Only visible to you"):_&&i?e&&t?n.rt("<a>Also sent to the channel</a> \u2219 {pinned} \u2219 {starred}",{pinned:s({currentUserId:u,pinnedBy:p,renderPinnedBy:h}),starred:r({renderStarButton:m,featureMessageLabelsCopy:_,isIAP1Enabled:g}),fallbackHash:"d2f0c6a83913776accbe386c64ce06300680f44f"},f):t?n.rt("<a>Also sent to the channel</a> \u2219 {starred}",{starred:r({renderStarButton:m,featureMessageLabelsCopy:_,isIAP1Enabled:g}),fallbackHash:"aead0d7a1eed4a8c18d29d9377a3f4fabc60f2cc"},f):e?n.rt("<a>Also sent to the channel</a> \u2219 {pinned}",{pinned:s({currentUserId:u,pinnedBy:p,renderPinnedBy:h}),fallbackHash:"b25a074514a36f2157703e7f0f332143878f55a8"},f):n.rt("<a>Also sent to the channel</a>",{fallbackHash:"5ee7c5390f0e1abffe537265bbbbb3316238001a"},f):o?e&&t?n.rt("{pinned} \u2219 {starred} \u2219 Custom response",{pinned:s({currentUserId:u,pinnedBy:p,renderPinnedBy:h}),starred:r({renderStarButton:m,featureMessageLabelsCopy:_,isIAP1Enabled:g})}):t?n.rt("{starred} \u2219 Custom response",{starred:r({long:!0,renderStarButton:m,featureMessageLabelsCopy:_,isIAP1Enabled:g})}):e?n.rt("{pinned} \u2219 Custom response",{pinned:s({currentUserId:u,pinnedBy:p,renderPinnedBy:h})}):n.t("Custom response"):l?e&&t?n.rt("{pinned} \u2219 {starred} \u2219 {highlight}",{highlight:b(),pinned:s({currentUserId:u,pinnedBy:p,renderPinnedBy:h}),starred:r({renderStarButton:m,featureMessageLabelsCopy:_,isIAP1Enabled:g})}):t?n.rt("{starred} \u2219 {highlight}",{highlight:b(),starred:r({long:!0,renderStarButton:m,featureMessageLabelsCopy:_,isIAP1Enabled:g})}):e?n.rt("{pinned} \u2219 {highlight}",{highlight:b(),pinned:s({currentUserId:u,pinnedBy:p,renderPinnedBy:h})}):n.rt("{highlight}",{highlight:b()}):e&&t?n.rt("{pinned} \u2219 {starred}",{pinned:s({currentUserId:u,pinnedBy:p,renderPinnedBy:h}),starred:r({renderStarButton:m,featureMessageLabelsCopy:_,isIAP1Enabled:g})}):e?s({currentUserId:u,pinnedBy:p,renderPinnedBy:h}):t?r({long:!0,renderStarButton:m,featureMessageLabelsCopy:_,isIAP1Enabled:g}):null}},"3AZy":function(e,t,a){e.exports=a.p+"sidebar_bg_plus-2c1f56a.png"},"3Dhv":function(e,t,a){},"3JmS":function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("XHGt"),i=a("TSYQ"),o=a.n(i),l=a("MnCE"),c=a("aK/h"),d=a("t85p"),u=a("Fdc0"),p=a("nNoG");a("/gIb");const h=new p.b("member_profile"),m=(c.default.string,c.default.object.isRequired,c.default.bool.isRequired,c.default.string.isRequired,{className:void 0});function b({className:e,member:t,featureEasyProfileImgDownload:a,memberName:n}){const r=t.profile.image_512,i=t.profile.image_48,l=a?`url('${i}')`:`url('${r}'), url('${i}')`,c=a?h.t("Profile photo for {member_name}",{member_name:n}):"";return s.a.createElement("div",{className:o()(e,"p-member_profile_picture"),style:{backgroundImage:l}},a&&s.a.createElement("img",{src:r,alt:c,className:"p_member_profile_picture__img"}))}b.displayName="MemberProfilePicture",b.defaultProps=m;t.a=Object(r.b)((e,{member:t})=>({featureEasyProfileImgDownload:Object(d.m)(e,"feature_easy_profile_img_download"),memberName:Object(u.V)(e,t)}))(Object(l.a)(b))},"3dej":function(e,t,a){},"3ise":function(e,t,a){},"3lVB":function(e,t,a){"use strict";a.d(t,"b",function(){return s});let n=null;function s(){return n}t.a=(({prevTeamId:e,nextTeamId:t,navigationTimestamp:a})=>e===t?Promise.resolve():(n=a,Promise.resolve()))},"3rHJ":function(e,t,a){},"445Q":function(e,t,a){},"4EIq":function(e,t,a){"use strict";var n=a("vJtL"),s=a("aK/h"),r=a("q1tI"),i=a("XHGt"),o=a("brL+");const l=(e,t)=>`${e}-${t}`;var c={add:function(e,t,a){this.sections||(this.sections={});const n=l(e,t);this.sections[n]||(this.sections[n]=a)},remove:function(e,t){if(!this.sections)return;const a=l(e,t);this.sections[a]&&(this.sections[a]=null,delete this.sections[a])},get:function(e,t){if(this.sections)return this.sections[l(e,t)]}};s.default.string.isRequired,s.default.number.isRequired,s.default.object.isRequired,s.default.node;class focusable_section_FocusableSection extends r.PureComponent{constructor(e){super(e);var t=e.component;const a=t.focus,s=t.blur;if(!(Object(n.a)(a)&&Object(n.a)(s)))throw new Error("FocusableSection requires a single child that implements focus and blur methods.")}componentDidMount(){var e=this.props;const t=e.teamId,a=e.order,n=e.component;c.add(t,a,n)}componentWillUnmount(){var e=this.props;const t=e.teamId,a=e.order;c.remove(t,a)}render(){return this.props.children}}focusable_section_FocusableSection.displayName="FocusableSection",focusable_section_FocusableSection.defaultProps={children:null};var d=Object(i.b)(e=>({teamId:Object(o.b)(e)}))(focusable_section_FocusableSection);a.d(t,"a",function(){return d})},"4F1B":function(e,t,a){},"4OD1":function(e,t,a){e.exports=a.p+"data_storage@2x-be89942.png"},"4RH7":function(e,t,a){"use strict";var n=a("uXhx"),s=a("NFsq"),r=a("4Ok1"),i=a("aK/h"),o=a("q1tI"),l=a.n(o),c=a("XHGt"),d=a("MnCE"),u=a("TSYQ"),p=a.n(u),h=a("t85p"),m=a("RAhH"),b=a("nNoG"),f=a("05v1"),_=a("Fdc0");const g=new b.b("threads"),y=(i.default.string,i.default.arrayOf(i.default.string).isRequired,i.default.number.isRequired,i.default.number,i.default.bool,i.default.bool,i.default.bool,{className:void 0,replyCount:0,prefixWithReplyCount:!1,includesSelf:!1,broadcastPreabmle:!1});function O({className:e,participantNames:t,replyUsersCount:a,replyCount:n,prefixWithReplyCount:s,includesSelf:i,broadcastPreabmle:o}){if(0===a)return null;const c=p()("p-thread_participant_list",e);return l.a.createElement("span",{className:c,"data-qa":"thread_participant_list"},a<=3?function({participantNames:e,includesSelf:t,replyCount:a,replyUsersCount:n,prefixWithReplyCount:s,broadcastPreabmle:r}){if(r&&1===a)return g.rt("1 reply");if(t)switch(n){case 1:return s?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from you",{replyCount:a}):g.t("Just you");case 2:return s?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName} and you",{replyCount:a,userName:e[0]}):g.rt("{userName} and you",{userName:e[0]});default:return s?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and you",{replyCount:a,userName1:e[0],userName2:e[1]}):g.rt("{userName1}, {userName2}, and you",{userName1:e[0],userName2:e[1]})}const i=Object(b.k)(e,{noEscape:!0}).join("");return s?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {names}",{replyCount:a,names:i}):i}({participantNames:t,replyCount:n,replyUsersCount:a,prefixWithReplyCount:s,includesSelf:i,broadcastPreabmle:o}):function({participantNames:e,replyUsersCount:t,replyCount:a,prefixWithReplyCount:n}){const s=t-2,i=Object(r.a)(e,2);i.length<s&&i.push(g.rt("others"));const o=Object(b.k)(i,{noEscape:!0}).join("");return n?g.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{replyCount:a,userName1:e[0],userName2:e[1],numOthers:s},({text:e})=>l.a.createElement(m.c,{tip:o},l.a.createElement("span",null,e))):g.rt("{userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{userName1:e[0],userName2:e[1],numOthers:s},({text:e})=>l.a.createElement(m.c,{tip:o},l.a.createElement("span",null,e)))}({participantNames:t,replyCount:n,replyUsersCount:a,prefixWithReplyCount:s}))}O.displayName="ThreadParticipantList",O.defaultProps=y;Object(d.a)(O);var C=Object(c.b)(function(e,t){const a=t.replyUsers;let r=t.replyUsersCount;const i=Object(h.d)(e),o=Object(s.a)(a,i),l=Object(s.a)(a,_.a),c=Object(f.a)(e,a);return r||(r=a.length),{participantNames:l?Object(n.a)(c,e=>e===_.b):c,replyUsersCount:l?r-1:r,includesSelf:o}})(O);t.a=C},"4lvZ":function(e,t,a){"use strict";var n=a("q1tI"),s=(a("aK/h"),a("OZf9")),r=a("UXvI"),i=a("ifKl"),o=a("t85p"),l=a("o37S"),c=a("kOzZ"),d=a("/V1y");const u=0,p=6e4,h=["focus","focusin","touchstart","mousedown","mouseup","wheel","keydown","keyup","beforeinput","input","scroll","compositionstart","compositionupdate","compositionend"];function m(e){if(!Object(o.m)(e(),"feature_track_time_spent"))return i.a;const t={capture:!0,passive:!0},a=setInterval(()=>(function(e){const t=e(),a=Object(d.a)(Object(d.c)(t)),n=Object(c.a)({state:t});Object(s.a)(a,e=>{null===e.lastLogged?n.track("SESSION_START",{client_session:b(e)}):e.isActive&&e.needsRefresh&&n.track("SESSION_REFRESH",{client_session:b(e)}),e.isActive||n.track("SESSION_END",{client_session:b(e)})})})(e),p),n=Object(r.a)(()=>{document.hasFocus&&document.hasFocus()&&Object(d.e)(Object(d.c)(e()))},5e3,{leading:!0,trailing:!0});h.forEach(e=>{window.addEventListener(e,n,t)});return()=>{h.forEach(e=>{window.removeEventListener(e,n,t)}),clearInterval(a)}}function b(e){return{uid:e.id,timestamp_start:Object(l.a)(e.startTime),timestamp_refresh:Object(l.a)(e.lastActivity),version:u}}a.d(t,"a",function(){return track_time_spent_TrackTimeSpent});class track_time_spent_TrackTimeSpent extends n.Component{constructor(e){super(e),this.removeListener=null}componentDidMount(){this.removeListener=m(()=>this.props.store.getState())}componentWillUnmount(){this.removeListener&&(this.removeListener(),this.removeListener=null)}render(){return this.props.children}}track_time_spent_TrackTimeSpent.displayName="TrackTimeSpent",track_time_spent_TrackTimeSpent.defaultProps={children:null}},"4tN7":function(e,t,a){},"533h":function(e,t,a){"use strict";var n=a("jo6Y"),s=a.n(n),r=a("QbLZ"),i=a.n(r),o=a("ifKl"),l=a("q1tI"),c=a.n(l),d=(a("aK/h"),a("XHGt")),u=a("TSYQ"),p=a.n(u),h=a("HvGc"),m=a("18Pa"),b=a("RAhH"),f=a("nNoG");a("LFzE");const _=new f.b("flexpane");class FlexpaneHeader extends l.PureComponent{constructor(e){super(e),this.closeButtonRef=c.a.createRef(),this.focus=this.focus.bind(this)}focus(){const e=this.closeButtonRef.current;e&&e.focus()}render(){var e=this.props;const t=e.children,a=e.className,n=e.onOptionsClick,s=e.optionsHref,r=e.optionsIconType,o=e.optionsTooltipText,l=e.renderSecondary,d=e.clientTheme,u=e.isIAP1Enabled,h=n||s,f="dark"===d?{backgroundStyle:"dark"}:{},g=h?b.a:1e3,y=l(),O=o||_.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"});return c.a.createElement("div",{className:p()("p-flexpane_header",a)},c.a.createElement("div",{className:"p-flexpane_header__primary"},c.a.createElement("div",{className:"p-flexpane_header__primary_content"},t),h&&c.a.createElement(b.c,{delay:g,tip:O,position:u?"bottom":"top"},c.a.createElement(m.a,i()({"aria-label":_.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"}),className:"p-flexpane_header__control",icon:r,href:s,onClick:n},f))),c.a.createElement(b.c,{delay:g,tip:_.t("Close",{fallbackHash:"1f863990d6ec5b308a2330f10e271f087ccf0bf7"}),position:u?"bottom-right":"top-right"},c.a.createElement(m.a,i()({"aria-label":_.t("Close Right Sidebar"),className:"p-flexpane_header__control",onClick:this.props.closeFlexpane,"data-qa":"close_flexpane",icon:"times",ref:this.closeButtonRef},f)))),y&&c.a.createElement("div",{className:"p-flexpane_header__secondary"},y))}}FlexpaneHeader.displayName="FlexpaneHeader",FlexpaneHeader.defaultProps={children:null,className:void 0,closeFlexpane:o.a,onOptionsClick:void 0,optionsHref:void 0,optionsIconType:"filters",optionsTooltipText:void 0,renderSecondary:o.a,isIAP1Enabled:!1};const g=Object(d.b)(null,{closeFlexpane:h.a})(e=>{let t=e.forwardedRef,a=s()(e,["forwardedRef"]);return c.a.createElement(FlexpaneHeader,i()({ref:t},a))});t.a=c.a.forwardRef((e,t)=>c.a.createElement(g,i()({forwardedRef:t},e)))},"53Ys":function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("jo6Y"),i=a.n(r),o=a("aK/h"),l=a("q1tI"),c=a.n(l),d=a("XfeM"),u=a("dhvi"),p=a("brL+"),h=a("1hAG"),m=a("rWF5"),b=a("g5qt"),f=a("5mKg"),_=a("kOzZ"),g=a("negh"),y=a("XHGt"),O=a("aolG"),C=a("yg0S"),v=a("ifKl"),E=a("ANjH"),k=a("nNoG"),S=a("vmJv"),j=a("za+y"),I=a("XLFM"),w=a("4Twu"),T=a("QkOX"),N=a("TSYQ"),A=a.n(N),R=a("XL7r"),M=a("O5cs"),P=a("IRvZ"),x=a("G4ux"),L=a("Fdc0"),F=a("wfE8"),D=a("3C31");const B=Object(d.b)("Adds app to channel by member id",(e,t,{memberId:a,channelId:n}={})=>{if(!a||!n)return;const s=Object(x.d)(t(),a);Object(L.jb)(s)?e(Object(D.a)({appUserId:a,channelId:n,referringEventId:"INVITE_TO_CHANNEL_DIALOG",referringUiContext:{action:"IMPRESSION"}})):e(Object(F.M)({channelId:n,users:a}))});B.meta={name:"addAppToChannelByMemberId",key:"actionsAddAppToChannelByMemberIdAddAppToChannelByMemberId",description:"Adds app to channel by member id"},B.propTypes={memberId:o.default.string.isRequired,channelId:o.default.string.isRequired};var U=B,q=a("Lev8"),H=a("t85p"),W=a("A8q6"),G=a("NB3s");function K({image:e,title:t,description:a,children:n}={}){return c.a.createElement(c.a.Fragment,null,c.a.createElement(G.d,null,c.a.createElement(G.i,{height:300,width:500,alt:"",src:e}),c.a.createElement(G.j,{title:t}),c.a.createElement(G.e,null,c.a.createElement("p",null,a))),n)}K.displayName="AppsTutorialStep";var V=a("8W09");function z({tutorialStatus:e,actions:t}){return c.a.createElement(V.a,null,c.a.createElement("span",null,e),c.a.createElement(G.g,null,t.map(e=>{let t=e.label,a=i()(e,["label"]);return c.a.createElement(I.d,s()({},a,{key:t}),t)})))}z.displayName="AppsTutorialFooter",z.defaultProps={tutorialStatus:"",actions:[]};var $=z;const Y=new k.b("step_tutorial");const Q=new k.b("apps_browser");function X({closeModal:e}){const t=Object(l.useMemo)(()=>{const t=[{id:"common_tasks",image:cdn_url+"/80588/img/app_space_tutorial_illustration_01.jpg",title:Q.t("Common tasks, done in a jiffy"),description:Q.t("Approve requests, schedule meetings, share documents, and more \u2014 all inside Slack.")},{id:"connect_tools",image:cdn_url+"/80588/img/app_space_tutorial_illustration_02.jpg",title:Q.t("Connect the tools you already use"),description:Q.t("Slack works with the systems you use, for everything from accounting to customer support.")},{id:"discover_ways",image:cdn_url+"/80588/img/app_space_tutorial_illustration_03.jpg",title:Q.t("Discover new ways to work"),description:Q.t("Poll your workspace, send kudos, and automate the coffee run. Have a better workday with apps.")}],a=function({steps:e=[]}={}){return function({index:t,navigate:a,end:n}={}){if(t<0||t>=e.length)return;const s=0===t,r=t===e.length-1,i=[],o=Y.t("{current} of {total}",{current:t+1,total:e.length});return s||i.push({type:"outline",label:Y.t("Back"),onClick:()=>a(e[t-1].id)}),i.push({label:r?Y.t("Done"):Y.t("Next"),onClick:r?n:()=>a(e[t+1].id)}),{step:e[t],footer:{tutorialStatus:o,actions:i}}}}({steps:t});return t.reduce((t,n,s)=>(t[n.id]={render:({switchPane:t}={})=>{const n=a({index:s,navigate:t,end:e});return c.a.createElement(K,n.step,c.a.createElement($,n.footer))}},t),{})},[e]);return c.a.createElement(W.b,{defaultPane:"common_tasks",isOpen:!0,invertCloseButton:!0,panes:t,closeModal:e})}X.displayName="AppsTutorial";var J=Object(y.b)(null,e=>Object(E.b)({closeModal:u.a},e))(X),Z=a("F+Fq"),ee=a("s0HP");const te=Object(d.b)("Opens the apps tutorial modal",(e,t)=>{const a=t(),n=Object(_.a)({state:a});Object(H.m)(a,"feature_m11n_apps_browser")?(n.track("APP_TUTORIAL_VIEW",null),Object(R.k)(a,"seen_app_space_tutorial")||e(Object(ee.b)({pref:"seen_app_space_tutorial",value:!0})),e(Object(u.e)({element:c.a.createElement(J),isStackable:!0}))):Object(Z.a)()});te.meta={name:"openAppsTutorialModal",key:"actionsOpenAppsTutorialModalOpenAppsTutorialModal",description:"Opens the apps tutorial modal"},te.propTypes=null;var ae=te,ne=a("uksu"),se=a("eR+M"),re=a("AjwY"),ie=a("eK0w"),oe=a("VBRD"),le=a("cD5Y"),ce=a("M4HD"),de=a("V/As"),ue=a("yywf"),pe=a("od5y"),he=a("llxT");const me=new k.b("apps_browser"),be=(o.default.shape({app_id:o.default.string,is_installed:o.default.bool,bot_user_id:o.default.string}).isRequired,o.default.bool.isRequired,o.default.string.isRequired,o.default.bool.isRequired,o.default.func,o.default.func,o.default.number.isRequired,{onClick:void 0,onMouseLeave:void 0}),fe=e=>c.a.createElement(he.a,{className:"p-apps_browser__enter_button","aria-label":e,key:"enter-or-preview"},c.a.createElement(pe.b,{type:"enter",inline:!0}),c.a.createElement("span",null,e));fe.displayName="renderEnter";const _e=({app:e,appCanBeAdded:t,className:a,featureAppBrowserViewInstall:n,onClick:s,onMouseLeave:r,"data-app_index":i})=>{let o=me.t("Install"),l=me.t("Install app",{fallbackHash:"fd6c3ebf7befca9f8208f86c76e4d4180303745c"});"tutorial_app"===e.app_id?(o=me.t("Start"),l=me.t("Start app tutorial",{fallbackHash:"952f375412e89ff213a8aca383d18e5691354347"})):t?(o=me.t("Add"),l=me.t("Add app",{fallbackHash:"61cc55aa0453184734c3fa0b621eda6fa874bd83"})):e.is_installed&&(o=me.t("View"),l=me.t("View app",{fallbackHash:"69bd4ef9fbd0894a22759c3766b859defbdedbc8"}));const d=Object(de.b)(e,72);return c.a.createElement("div",{className:a,onClick:s,onMouseLeave:r,"data-app":!0,"data-app_index":i,"data-is_installed":e.is_installed,"data-app_id":e.app_id,"data-bot_id":e.bot_id,"data-bot_user_id":e.bot_user_id,"data-can_app_be_added":t||null,"data-qa":"apps_browser_row",role:"presentation"},c.a.createElement("img",{className:"p-apps_browser__app_icon",src:d,alt:e.name}),c.a.createElement("div",{className:"p-apps_browser__app_info"},c.a.createElement("div",{className:"p-apps_browser__app_name"},c.a.createElement("strong",null,e.name)),c.a.createElement("div",{className:"p-apps_browser__app_description"},Object(ue.a)(e.short_description,(e,t)=>c.a.createElement("strong",{key:t},e)))),n?fe(o):c.a.createElement(I.d,{"data-qa":"apps_browser_row_action",className:"p-apps_browser__app_action",type:"outline","aria-label":l},o))};_e.displayName="AppsBrowserActionText",_e.defaultProps=be;var ge=Object(y.b)((e,{addAppsVariant:t,app:a,channelId:n})=>({appCanBeAdded:t&&Object(ce.a)(e,a,n),featureAppBrowserViewInstall:Object(H.m)(e,"feature_app_browser_view_install")}))(_e),ye=a("0f2Y"),Oe=a("MnCE"),Ce=a("RAhH");a("qqis");const ve=new k.b("apps_browser"),Ee=(o.default.arrayOf(o.default.object),o.default.bool,o.default.bool,o.default.bool,o.default.bool,({apps:e,isFirefoxAndWindows:t,isFirefoxAndMac:a,isInternetExplorer:n,featureM11nAppsBrowser:s})=>{if(!s)return null;if(e.length>10)return null;const r=[...e,...Array(10-e.length)],i=r.map((e,s)=>{const r=!e,i=`limit-apps-${s}`;let o="bottom";0===s?o="bottom-left":9===s&&(o="bottom-right");const l=A()("p-apps_browser__app_limit_meter__apps","inline_block",{"p-apps_browser__app_limit_meter__blank_app_box":r,is_ff_and_win:t,is_ff_and_mac:a,is_ie:n});return c.a.createElement(Ce.c,{key:i,tip:r?ve.t("Try a new app"):e.name,position:o,offsetY:17},c.a.createElement("div",{className:l,"data-qa":r?"app_limit_meter__blank_app_box":"app_limit_meter__app_box"},!r&&c.a.createElement("img",{className:"p-apps_browser__app_limit_meter__app_icon align_top",src:Object(de.b)(e,24),alt:""})))}),o=r.map((e,t)=>{if(0===t)return null;const a=`color-meter-${t}`,n=!e,s=A()({first:1===t,meter_first_green:t<4&&!n,meter_second_green:4===t&&!n,meter_third_green:5===t&&!n,meter_fourth_green:6===t&&!n,meter_yellow:7===t&&!n,meter_orange:8===t&&!n,meter_red:9===t&&!n,on:!n,off:n&&1!==t});return c.a.createElement("li",{className:s,key:a})}),d=A()("p-apps_browser__app_limit_meter__color_meter",{is_ff_and_win:t});return c.a.createElement(l.Fragment,null,c.a.createElement("div",{className:"p-apps_browser__app_limit_meter__apps_container"},i),c.a.createElement("ul",{className:d},o))});Ee.displayName="AppLimitMeter",Ee.defaultProps={apps:[],isFirefoxAndWindows:!1,isFirefoxAndMac:!1,isInternetExplorer:!1,featureM11nAppsBrowser:!1};var ke=Object(Oe.a)(Ee);const Se=new k.b("apps_browser");o.default.bool,o.default.bool,o.default.bool,o.default.bool,o.default.object.isRequired,o.default.array,o.default.bool,o.default.bool,o.default.bool;class app_limit_meter_container_AppLimitMeterContainer extends l.Component{constructor(e){super(e),this.limitMeterClogId="",this.firstSelectableAppIndex=e.hasSeenAppSpaceTutorial?1:0,this.appLimitMeterClogPayload={},this.cloggedLimitMeterImpression=!1,this.showLimitMeter=!1,this.handleAppLimitMeterClickClog=this.handleAppLimitMeterClickClog.bind(this)}handleAppLimitMeterClickClog(){const e=this.props.clogger;"GROWTH_PRICING"===this.LimitMeterClogId&&(this.appLimitMeterClogPayload.contexts.ui_context.action="click",e.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload))}render(){const e=this.props.installedApps.length;var t=this.props;const a=t.isFirefoxAndWindows,n=t.isFirefoxAndMac,s=t.isInternetExplorer,r=t.clogger,i=t.featureM11nAppsBrowser,o=t.isShowingDefaultAppCategories;if(!e||e>10||!o)return null;const l=`num_of_apps=${e}`,d=!!e,u=`limit-meter-${P.f}`;if(this.showLimitMeter=d,!this.showLimitMeter)return null;let p,h,m,b,f;this.firstSelectableAppIndex=0;const _=A()("p-apps_browser__app_limit_meter",{is_ff_and_mac:n});return e<6?(p=Se.t("Add apps to get things done"),m="/apps?utm_source=in-prod&utm_medium=inprod-link_see_app_suggestions-apps_browser-click",this.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE",b="link_app_directory",h=Se.rt("Schedule meetings, share docs, and more \u2014 straight from Slack. <a>See app suggestions</a>",null,({tag:e,text:t})=>"a"!==e?null:c.a.createElement(ye.a,{href:m,target:"new","data-app":!0,"data-app_index":this.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":this.LimitMeterClogId,"data-clog-ui-element":b,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":l,onClick:this.handleAppLimitMeterClickClog},t))):e<10?(p=Se.t("Upgrade for unlimited apps"),m=Object(re.k)({entryPoint:"app_limit_meter"}),this.LimitMeterClogId="GROWTH_PRICING",b="pricing_link",f=A()({hidden:this.props.isMacSsbBuild}),h=Se.rt("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. <a>See upgrade options</a>",{numOfApps:e},({tag:e,text:t})=>"a"!==e?null:c.a.createElement(ye.a,{className:f,href:m,target:"new","data-app":!0,"data-app_index":this.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":this.LimitMeterClogId,"data-clog-ui-element":b,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":l,onClick:this.handleAppLimitMeterClickClog},t))):(p=Se.t("Upgrade to add more apps"),m=Object(re.k)({entryPoint:"app_limit_meter"}),this.LimitMeterClogId="GROWTH_PRICING",b="pricing_link",f=A()({hidden:this.props.isMacSsbBuild}),h=Se.rt("Your team\u2019s already using 10 apps, the max you can use with the free version of Slack. Upgrade to a paid plan to add as many apps as you\u2019d like. <a>See upgrade options</a>",null,({tag:e,text:t})=>"a"!==e?null:c.a.createElement(ye.a,{className:f,href:m,target:"new","data-app":!0,"data-app_index":this.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":this.LimitMeterClogId,"data-clog-ui-element":b,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":l,onClick:this.handleAppLimitMeterClickClog},t))),this.appLimitMeterClogPayload={num_of_apps:e,contexts:{ui_context:{step:"apps_browser",action:"impression",ui_element:b}}},this.cloggedLimitMeterImpression||("GROWTH_PRICING"===this.LimitMeterClogId?(r.track(this.LimitMeterClogId,this.appLimitMeterClogPayload),r.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)):(r.track(this.LimitMeterClogId,this.appLimitMeterClogPayload),r.track("APP_CLICK_LINK_SEE_APP_SUGGESTIONS_IN_APPS_BROWSER",{contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_see_app_suggestions"}}})),this.cloggedLimitMeterImpression=!0),c.a.createElement("div",{className:"p-apps_browser__app_limit_meter__container",key:u},c.a.createElement("div",{className:_,"data-qa":"apps_browser_app_limit_meter"},c.a.createElement("p",{className:"p-apps_browser__app_limit_meter__heading very_small_bottom_margin"},c.a.createElement("b",null,p)),c.a.createElement("p",{className:"p-apps_browser__app_limit_meter__paragraph","data-qa":"apps_browser_app_limit_meter_paragraph"},h),c.a.createElement(ke,{apps:this.props.installedApps,isFirefoxAndWindows:a,isFirefoxAndMac:n,isInternetExplorer:s,featureM11nAppsBrowser:i})))}}app_limit_meter_container_AppLimitMeterContainer.displayName="AppLimitMeterContainer",app_limit_meter_container_AppLimitMeterContainer.defaultProps={isInternetExplorer:!1,isFirefoxAndMac:!1,isFirefoxAndWindows:!1,isMacSsbBuild:!1,installedApps:[],isShowingDefaultAppCategories:!0,featureM11nAppsBrowser:!1,hasSeenAppSpaceTutorial:!1};var je=Object(y.b)(e=>{const t=Object(m.g)();return{installedApps:Object(M.j)(e),isInternetExplorer:"ie"===t,isFirefoxAndWindows:"firefox"===t&&Object(m.E)(),isFirefoxAndMac:"firefox"===t&&Object(m.q)(),isMacSsbBuild:Object(b.T)(),clogger:Object(_.a)({state:e}),featureM11nAppsBrowser:Object(H.m)(e,"feature_m11n_apps_browser")}},null)(app_limit_meter_container_AppLimitMeterContainer);const Ie=new k.b("apps_browser"),we=(o.default.object.isRequired,o.default.string,o.default.object.isRequired,o.default.bool,o.default.func,o.default.bool.isRequired,o.default.func,o.default.string.isRequired,o.default.array.isRequired,o.default.array.isRequired,o.default.bool.isRequired,o.default.string,o.default.func,o.default.func,o.default.func,o.default.func,o.default.string,{addAppToChannelByMemberId:v.a,hasSeenAppSpaceTutorial:!1,channelId:void 0,nextCursor:void 0,loadMoreApps:v.a,openAboutApp:v.a,openAppsTutorialModal:v.a,closeModal:v.a,getChannelMembershipInfoForUsers:v.a,clientTheme:"light"}),Te=()=>({name:Ie.t("What are apps?"),short_description:Ie.t("A quick look at how apps in Slack can streamline your work"),icons:{image_84:cdn_url+"/80588/img/tutorial@2x.png"},app_id:"tutorial_app",bot_id:"",bot_user_id:"",is_installed:!1});class apps_browser_results_AppsBrowserResults extends l.Component{constructor(e){super(e),this.isPaginating=!1,this.renderRow=this.renderRow.bind(this),this.isFocusableItem=this.isFocusableItem.bind(this),this.paginate=this.paginate.bind(this),this.handleItemClick=this.handleItemClick.bind(this)}componentDidUpdate(e){var t=this.props;const a=t.results,n=t.addAppsVariant;if(a!==e.results&&n){const e=a.reduce((e,t)=>("app"===t.type&&t.bot_user_id&&e.push(t.bot_user_id),e),[]);this.props.getChannelMembershipInfoForUsers({channelId:this.props.channelId,userIds:e})}}paginate(){this.shouldPaginate()&&this.loadMoreApps()}shouldPaginate(){return!!this.props.nextCursor}loadMoreApps(){this.isPaginating||(this.isPaginating=!0,this.props.loadMoreApps().then(()=>{this.isPaginating=!1}))}isFocusableItem({index:e}){const t=(this.props.results[e]||{}).type;return t===P.h.APP||t===P.h.APP_LIMIT_METER||t===P.h.APP_TUTORIAL}handleItemClick(e){const t=e.currentTarget.children[0].dataset;t.app_id&&this.selectApp(t)}openAboutApp(e){this.props.openAboutApp({appId:e.app_id,serviceId:e.bot_id,memberId:e.bot_user_id})}selectApp(e){var t=this.props;const a=t.clogger,n=t.channelId,r={app_id:e.app_id,bot_id:e.bot_id,is_from_search:this.props.isShowingDefaultAppCategories?"0":"1",contexts:{core:{app_id:e.app_id,bot_id:e.bot_id}}};if("tutorial_app"===e.app_id)this.props.openAppsTutorialModal();else if("app_limit_meter"===e.app_id){const t=parseInt(e.clogParams.split("=")[1],10);"pricing_link"===e.clogUiElement?(Object(f.P)(this.props.team,Object(re.k)({entryPoint:"apps_browser_results"})),a.track("GROWTH_PRICING",{num_of_apps:t,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}}),a.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:t,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}})):(Object(f.P)(this.props.team,"/apps"),a.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:t,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_app_directory"}}}))}else"true"===e.can_app_be_added?(this.props.closeModal(),this.props.addAppToChannelByMemberId({memberId:e.bot_user_id,channelId:n})):"true"===e.is_installed?(this.openAboutApp(e),a.track("APP_INDEX_VIEW_CLICK",r)):(Object(f.P)(this.props.team,`/apps/${e.app_id}?utm_source=in-prod&utm_medium=inprod-btn_app_install-index-click`),a.track("APP_INDEX_INSTALL_CLICK",r),a.track("APP_CLICK_BTN_APP_INSTALL_IN_INDEX",s()({},r,{contexts:s()({},r.contexts,{ui_context:{step:"index",action:"click",ui_element:"btn_app_install"}})})))}renderRow(e,{key:t}){const a=this.props.results[e];switch(a.type){case P.h.LOADING:return c.a.createElement("div",{style:{height:62}},c.a.createElement(le.a,{size:"jumbo"}));case P.h.APP_LIMIT_METER:{var n=this.props;const e={isShowingDefaultAppCategories:n.isShowingDefaultAppCategories,hasSeenAppSpaceTutorial:n.hasSeenAppSpaceTutorial};return c.a.createElement(je,e)}case P.h.CATEGORY:{const t=a.display_name;return c.a.createElement("div",{className:A()("p-apps_browser__category_header",{margin_top_150:!(0===e)}),"data-category_header":"true","data-qa":"apps_browser__category_header"},t)}case P.h.APP_TUTORIAL:return c.a.createElement(ge,{key:t,addAppsVariant:this.props.addAppsVariant,app:Te(),className:"p-apps_browser__app p-apps_browser__app--tutorial","data-app_index":e});case P.h.APP:return c.a.createElement(ge,{key:t,addAppsVariant:this.props.addAppsVariant,channelId:this.props.channelId,app:a,className:"p-apps_browser__app","data-app_index":e});default:return c.a.createElement(c.a.Fragment,null)}}render(){var e=this.props;const t=e.clientTheme,a=e.results,n=e.keys,s=e.searchInput;if(!a.length&&s)return c.a.createElement("section",{key:"no-results",className:"p-apps_browser__no_results","data-qa":"apps_browser__no_results"},Ie.t("There are no apps matching"),"\xa0",c.a.createElement("strong",null,s));const r=A()("p-apps_browser__list_container",{"p-apps_browser__list_container--loading":0===n.length,[`p-apps_browser__list_container--loading--${t}`]:0===n.length&&"light"!==t});return c.a.createElement(oe.a,null,({width:e,height:t,measureRef:a})=>c.a.createElement("div",{className:r,"data-qa":"apps_browser__results_list",ref:a},c.a.createElement(ie.a,{width:e,height:Math.floor(t),keys:n,rowRenderer:this.renderRow,onItemClick:this.handleItemClick,loadPost:this.paginate,loadAround:this.paginate,isFocusableItem:this.isFocusableItem,hideHiddenStopTabs:!0})))}}apps_browser_results_AppsBrowserResults.displayName="AppsBrowserResults",apps_browser_results_AppsBrowserResults.defaultProps=we;var Ne=Object(y.b)(e=>({clogger:Object(_.a)({state:e}),hasSeenAppSpaceTutorial:Object(R.k)(e,"seen_app_space_tutorial"),searchInput:Object(M.s)(e),results:Object(M.r)(e),keys:Object(M.o)(e),nextCursor:Object(M.p)(e),isShowingDefaultAppCategories:Object(M.n)(e),clientTheme:Object(q.c)(e)}),e=>Object(E.b)({openAboutApp:ne.b,openAppsTutorialModal:ae,closeModal:u.a,getChannelMembershipInfoForUsers:se.g,loadMoreApps:j.e,addAppToChannelByMemberId:U},e))(apps_browser_results_AppsBrowserResults);a("x4cI");const Ae=new k.b("apps_browser"),Re=(o.default.object.isRequired,o.default.string,o.default.bool,o.default.object,o.default.func,o.default.func,{channelId:void 0,addAppsVariant:!1,team:void 0,fetchDefaultApps:v.a,resetSearch:v.a});class apps_browser_v2_AppsBrowser extends l.Component{constructor(e){super(e),this.handleAppDirectoryButtonClick=this.handleAppDirectoryButtonClick.bind(this),this.renderHeader=this.renderHeader.bind(this)}componentDidMount(){this.props.fetchDefaultApps()}componentWillUnmount(){this.props.resetSearch()}handleAppDirectoryButtonClick(){const e=this.props.clogger;Object(f.P)(this.props.team,"/apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-index-click"),e.track("APP_INDEX_VIEW_APP_DIRECTORY_CLICK"),e.track("APP_CLICK_LINK_APP_DIRECTORY_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_app_directory"}}})}renderHeader(){var e=this.props;const t=e.addAppsVariant,a=e.channelId;let n;return n=t&&a?c.a.createElement("h2",{className:"overflow_hidden"},Ae.rt("Add apps to {channelName}",{channelName:c.a.createElement(w.a,{channelId:a,inline:!0,className:"overflow_ellipsis"})})):c.a.createElement("h2",null,Ae.t("Browse Apps")),c.a.createElement("div",{className:"p-apps_browser__filter_header","data-qa":"apps_browser__header"},n,c.a.createElement(I.d,{className:"p-apps_browser__browse_apps flex_shrink_none","data-qa":"apps_browser__app_directory_button",size:"large",type:"outline",onClick:this.handleAppDirectoryButtonClick},Ae.t("View App Directory")))}render(){var e=this.props;const t={addAppsVariant:e.addAppsVariant,channelId:e.channelId,team:e.team};return c.a.createElement("div",{className:"p-apps_browser","data-qa":"apps_browser"},c.a.createElement("div",{className:"p-apps_browser__filter_container"},this.renderHeader(),c.a.createElement(T.a,null)),c.a.createElement(Ne,t))}}apps_browser_v2_AppsBrowser.displayName="AppsBrowser",apps_browser_v2_AppsBrowser.defaultProps=Re;var Me=Object(y.b)(e=>{const t=Object(h.d)(e);return{channelId:Object(S.a)(e),team:t,clogger:Object(_.a)({state:e})}},e=>Object(E.b)({fetchDefaultApps:j.c,resetSearch:j.g},e))(apps_browser_v2_AppsBrowser),Pe=a("4M+g"),xe=a("6kok");const Le=new k.b("apps_browser");function Fe({tutorialSeen:e,openAppsTutorial:t,clogger:a}){const n=Object(l.useCallback)(()=>{a.track("APP_INDEX_MANAGE_CLICK",null),a.track("APP_CLICK_LINK_MANAGE_APPS_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_manage_apps"}}})},[a]);return c.a.createElement("div",{className:"p-apps_browser_links"},c.a.createElement(he.a,{className:"p-apps_browser_links__link",href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-link_manage_apps-index-click",onClick:n,"data-qa":"apps_browser_manage_apps"},c.a.createElement(pe.b,{type:"cog-o",inline:!0,className:"p-apps_browser_links__link_icon"}),Le.t("Manage apps...")),e&&c.a.createElement(he.a,{className:"p-apps_browser_links__link","data-qa":"apps_browser_view_tutorial",onClick:t},c.a.createElement(pe.b,{type:"lightbulb-o",inline:!0,className:"p-apps_browser_links__link_icon"}),Le.t("What are apps?")))}Fe.displayName="AppsBrowserHeaderLinks";var De=Object(y.b)(e=>({tutorialSeen:Object(R.k)(e,"seen_app_space_tutorial"),clogger:Object(_.a)({state:e})}),e=>Object(E.b)({openAppsTutorial:ae},e))(Fe);const Be=new k.b("apps_browser");function Ue(e){const t=e.addAppsVariant,a=e.channelName,n=e.clogger,s=t&&a?Be.t("Add apps to {channelName}",{channelName:a}):Be.t("Browse Apps");return c.a.createElement(O.a,{showGoButton:!1,showCancelButton:!1,onCancel:()=>{n.track(g.EventId.APP_BROWSER_CLOSE,{contexts:{ui_context:{step:g.UiStep.APPS_BROWSER,action:g.UiAction.CLICK,ui_properties:{element_type:g.ElementType.X,element_name:"app_browser_fullscreen_modal_close"}}}})},contentLabel:s,"data-qa":"apps_browser_modal",modalClasses:"p-apps_browser_modal"},c.a.createElement(De,null),c.a.createElement(C.a,null,c.a.createElement("div",{className:"p-apps_browser_container"},c.a.createElement(Me,e))))}Ue.displayName="AppsBrowserModal",Ue.defaultProps={addAppsVariant:!1,channelName:"",clogger:{}};var qe=Object(y.b)(e=>{const t=Object(S.a)(e),a=Object(_.a)({state:e});if(!t)return{};const n=Object(Pe.e)(e,t);return{channelName:Object(xe.x)(e,n,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),clogger:a}})(Ue),He=a("1tsX"),We=a("97va");const Ge=Object(d.b)("Opens the apps browser modal",(e,t,a={})=>{let n=a.referringEventId,r=a.referringUiContext,o=a.channelId,l=i()(a,["referringEventId","referringUiContext","channelId"]);const d=Object(He.a)(t());!l.addAppsVariant&&d&&e(Object(We.a)());const y=Object(_.a)({getState:t});y.track(g.EventId.APP_INDEX_OPEN,null),l.addAppsVariant&&n&&y.track(g.EventId.APPS_BROWSER_ADD_TO_CHANNEL,{contexts:{ui_context:{action:g.UiAction.IMPRESSION},referring_ui_context:r,core:{channel_id:o}},referring_event_id:n});const O=Object(p.b)(t()),C=Object(h.i)(t(),O),v=Object(f.s)(C),E=Object(f.D)(C),k=Object(m.g)(),S={isUnpaid:!E&&!v,isInternetExplorer:"ie"===k,isFirefoxAndWindows:"firefox"===k&&Object(m.E)(),isFirefoxAndMac:"firefox"===k&&Object(m.q)(),isMacSsbBuild:Object(b.T)()};e(Object(u.e)({element:c.a.createElement(qe,s()({},l,S))}))});Ge.meta={name:"openAppsBrowserModal",key:"actionsOpenAppsBrowserModalOpenAppsBrowserModal",description:"Opens the apps browser modal"},Ge.propTypes={addAppsVariant:o.default.bool,eventId:o.default.number,uiContext:o.default.object,channelId:o.default.string};t.a=Ge},"59b6":function(e,t,a){"use strict";a.d(t,"a",function(){return d}),a.d(t,"b",function(){return u});var n=a("nNoG"),s=a("AFNo"),r=a("Fdc0"),i=a("+yrr"),o=a("OX5w"),l=a("7Ztl");const c=new n.b("calls"),d=Object(s.e)(e=>{const t=e.activeCall.incomingInviterUserId&&Object(r.W)(e,e.activeCall.incomingInviterUserId),a=e.activeCall.name,n=e.activeCall.conversationId,s=e.activeCall.hasJoined,l=Object(i.v)(e),d=l.length,u=Object(o.d)(e),p=Object(i.h)(e);if(a&&s)return a;if(u)return c.t("{inviterName} is calling you",{inviterName:t});if(n&&!d&&p.length){const t=Object(r.W)(e,p[0]),a=p.length-1;return p.length>1?c.t("Calling {namedInvitedUser} and {remainingInvitedUserCount,plural,=1{# other person}other{# other people}}",{namedInvitedUser:t,remainingInvitedUserCount:a,fallbackHash:"1f193c850fe96a988a352bb5c38247343e49f235"}):c.t("Calling {namedInvitedUser}",{namedInvitedUser:t})}if(!d)return c.t("Slack call, waiting for others to join");const h=Object(r.W)(e,l[0]),m=l.length-1;return l.length>1?c.t("Slack call with {namedPeer} and {remainingJoinedPeers,plural,=1{# other person}other{# other people}}",{namedPeer:h,remainingJoinedPeers:m,fallbackHash:"6f6600f1cf4eef0e7f75926baabfc8baf445c5c8"}):c.t("Slack call with {namedPeer}",{namedPeer:h})});d.meta={name:"getCallWindowTitle",key:"callsReduxSelectorsGetCallWindowTitleGetCallWindowTitle"};const u=Object(s.e)(e=>{const t=Object(l.c)(e),a=t&&t.incomingInvite&&Object(r.W)(e,t.incomingInvite.userId);return a?c.t("{inviterName} is calling you",{inviterName:a}):c.t("Incoming call")});u.meta={name:"getIncomingCallAriaLabelForBrowser",key:"callsReduxSelectorsGetCallWindowTitleGetIncomingCallAriaLabelForBrowser"}},"5DNE":function(e,t,a){},"5NHF":function(e,t,a){},"5SxQ":function(e,t,a){},"5g6K":function(e,t,a){},"5iqv":function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("TSYQ"),o=a.n(i),l=a("XHGt"),c=a("GbAX"),d=a("V18M"),u=a("Smdl"),p=a("tbBR"),h=a("aLpA"),m=a("QbLZ"),b=a.n(m),f=a("zmn3"),_=a("ifKl"),g=a("UXvI"),y=a("tn36"),O=a("vFlG"),C=a("t85p");function v(e,t){const a=Object(C.m)(e,"feature_fuzzy_match"),n=Object(O.a)(t,"metadata.query_rewriting.spell_correction_context.method");return a&&n}var E=a("9/ob"),k=a("yHhI"),S=a("Mj3f"),j=a("Szmb"),I=a("XfeM"),w=a("kyuO"),T=a("7dYf"),N=a("Rjjz"),A=a("nW5E");const R=Object(I.b)("Clog a search open event using data from redux",(e,t,{messageSort:a}={})=>{Object(k.a)({getState:t}).info("IMPROVED_SEARCH",`Set message sort method. messageSort: ${a}`),e(Object(T.f)({pref:"search_sort",value:a})),e(Object(N.d)({module:"messages",reason:"search-messages-sort-changed"})),e(Object(w.k)({method:`set_sort_${a===A.f.relevantMessages?"score":"timestamp"}`}))});R.meta={name:"setMessageSort",key:"actionsUniversalSearchSetMessageSortSetMessageSort",description:"Clog a search open event using data from redux"},R.propTypes={method:r.default.string};var M=a("1hAG"),P=a("JrUZ"),x=a("quKg"),L=a("qgNY"),F=a("1F8+"),D=a("HvGc"),B=a("g5qt"),U=a("5mKg"),q=a("nNoG"),H=a("MREy"),W=a("XLFM"),G=a("od5y"),K=a("j4mf"),V=a("U28S");function z(e){return e>=1e4?Object(V.a)(e,{precision:4,decimal_places:0,lowercase:!0}):Object(K.a)(e)}var $=a("ICFZ"),Y=a("HXD8"),Q=a("x91h"),X=a("qrk6"),J=a("A/mR");function Z(e,t){const a=e[0]&&e[0].ts;if(!a)return"";const n=Object(J.n)(a,{returnMoment:!0});return Object(J.k)(n,{shortenMonth:t,excludeYear:Object(J.i)(a)})}var ee=a("Xthn"),te=a("fdJE"),ae=a("XL7r"),ne=a("rsVu"),se=a("k2C/"),re=a("6kok"),ie=a("4M+g");function oe(e,t){return"string"==typeof t?Object(ie.e)(e,t,!0):Object(re.qb)(t)?Object(ie.e)(e,t.id,!0):(t&&t.id&&Object(ie.e)(e,t.id,!0),t)}const le=new q.b("search"),ce=/[\ue000\ue001]/g;var de=a("gLeh"),ue=a("tjIJ"),pe=a("Zr7G"),he=a("Go8C"),me=a("jo6Y"),be=a.n(me),fe=a("3dqR"),_e=a("y7mK"),ge=a("Uk1S");a("L5SX");const ye=new q.b("search");r.default.bool,r.default.string;function Oe(e){const t=e.theme;return e.featureTinyspeck?s.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},s.a.createElement("strong",null,"Message Group failed to render. "),"Please go to #triage-search and"," ",s.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org."):s.a.createElement("div",{className:"c-message_group"},s.a.createElement("div",{className:`c-search_message c-search_message--${t}`},s.a.createElement("div",{className:"c-search_message__gutter"},s.a.createElement(fe.c,{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),s.a.createElement("div",{className:"c-search_message__content"},s.a.createElement("div",{className:"c-search_message__content_header"},s.a.createElement(_e.a,{userId:"",isInteractive:!0})),s.a.createElement("div",{className:"c-search_message__body sk_foreground_max"},ye.t("There was an error displaying this message.")))))}Oe.displayName="ErrorSearchMessage",Oe.defaultProps={featureTinyspeck:!1,theme:"light"};var Ce=Object(l.b)(e=>{let t="",a=!1;try{t=Object(ge.a)(e),a=Object(C.m)(e,"feature_tinyspeck")}catch(n){}return{theme:t,featureTinyspeck:a}})(Oe),ve=a("owWc"),Ee=a("jLdI"),ke=a("UF3u"),Se=a("0f2Y"),je=a("4Twu"),Ie=a("llxT");const we=new q.b("search");r.default.bool,r.default.string,r.default.object,r.default.string,r.default.string;function Te(e){const t=e.user,a=e.theme,n=e.ts,r=e.channel;return e.featureTinyspeck?s.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},s.a.createElement("strong",null,"Message ",n," in ",r.id||"[Channel id missing]"," failed to render."," "),"Please go to #triage-search and"," ",s.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org."):s.a.createElement("div",{className:`c-search_message c-search_message--${a}`},s.a.createElement("div",{className:"c-search_message__gutter"},s.a.createElement(fe.c,{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),s.a.createElement("div",{className:"c-search_message__content"},s.a.createElement("div",{className:"c-search_message__content_header"},s.a.createElement(_e.a,{userId:t||"",isInteractive:!0})),s.a.createElement("div",{className:"c-search_message__body sk_foreground_max"},we.t("There was an error displaying this message."))))}Te.displayName="ErrorSearchMessage",Te.defaultProps={featureTinyspeck:!1,user:"",ts:"[Message timestamp (ts) missing]",channel:{},theme:"light"};var Ne=Object(l.b)(e=>{let t="",a=!1;try{t=Object(ge.a)(e),a=Object(C.m)(e,"feature_tinyspeck")}catch(n){}return{theme:t,featureTinyspeck:a}})(Te),Ae=a("lCmp"),Re=a("Bekf"),Me=a("B/i4"),Pe=a("cErB"),xe=a("bA/L");var Le=Object(l.b)((e,t)=>{const a=t.bot_id,n=t.bot_profile,s=t.thread_ts,r=t.teamId,i=t.ts,o=t.channel,l=t.replies,c=t.permalink,d=t.blocks,u=t.attachments,p=Object(ge.a)(e),h=Object(M.d)(e);let m;h&&(m=h.domain);const b=Object(Ae.a)(t.extracts,e=>e.truncated_head||e.truncated_tail),f=t.text.length>200,_=!(!t.attachments||!t.attachments.length),g=!!t.text;let y=b&&f||_&&g;(d||Object(Ae.a)(u,"blocks"))&&(y=!1);const O=Object(M.d)(e).id!==r;let v="";if(l&&l.length){const e=l[0].ts;v=`https://${Object(Pe.k)(c).hostname}${Object(Me.a)({channelId:o.id,ts:e,threadTs:i})}`}return{hasText:g,isCrossWorkspace:O,botId:a,botProfile:n,threadTs:s,theme:p,permalinkToMessageThread:v,hasAdHocSender:Object(Re.a)(t),featureTinyspeck:Object(C.m)(e,"feature_tinyspeck"),canBeTruncated:y,teamDomain:m,channelName:Object(re.x)(e,o),wysiwygSearchHighlightingEnabled:"treatment"===Object(x.c)(e,"wysiwyg_search_highlighting")}},null)(xe.a);const Fe="IMPROVED_SEARCH";r.default.object.isRequired,r.default.object.isRequired;class protected_search_message_ProtectedSearchMessage extends n.PureComponent{constructor(){super(),this.state={hasError:!1}}componentDidCatch(e,t){this.props.telemeter.count("search_ui_messages_result_message_render_error"),this.props.logger.error(Fe,`Error caught by ProtectedSearchMessage ${t.componentStack}`,e),this.setState(()=>({hasError:!0}))}render(){return this.state.hasError?s.a.createElement(Ne,this.props):s.a.createElement(Le,this.props)}}protected_search_message_ProtectedSearchMessage.displayName="ProtectedSearchMessage";var De=protected_search_message_ProtectedSearchMessage;a("zXku");const Be=new q.b("search"),Ue=(r.default.func.isRequired,r.default.number,r.default.arrayOf(r.default.shape({iid:r.default.string.isRequired,user:r.default.string.isRequired,ts:r.default.string.isRequired,extracts:r.default.array})).isRequired,r.default.shape({id:r.default.string.isRequired,name:r.default.string.isRequired}).isRequired,r.default.string.isRequired,r.default.string,r.default.object.isRequired,r.default.bool.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func,r.default.func,r.default.object.isRequired,r.default.object.isRequired,{workspaceName:"",index:null,clogSearchMessageClick:_.a,clogMessageClick:_.a});class message_group_SearchMessageGroup extends n.PureComponent{constructor(e){super(e),this.state={isExpanded:!1,isHoveringOnExpandLinks:!1},Object(y.a)(this,["expand","onChannelClick","onMessageJump","onFileJump","onExpandHoverStart","onExpandHoverEnd","onLinkClick","onRepliesClick"])}onChannelClick(){const e=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();e[0]&&this.onMessageJump({iid:e[0].iid,permalink:e[0].permalink,ts:e[0].ts,channelId:this.props.channel.id,userId:e[0].user,botId:e[0].botId})}onLinkClick(e,t){this.props.clogSearchMessageClick({iid:t.iid,ts:t.ts,channelId:t.channelId,botId:t.botId,userId:t.userId,type:t.type,position:this.props.index}),t.type===w.b.copyLink?this.props.clogMessageClick({msg:e,payload:t}):t.type===w.b.channel&&this.props.close()}onMessageJump({iid:e,permalink:t,ts:a,channelId:n,userId:s,botId:r}){this.props.onMessageJump({teamId:this.props.currentTeam.id,permalink:t}),this.props.clogSearchMessageClick({type:w.b.messageJump,iid:e,ts:a,channelId:n,userId:s,botId:r,position:this.props.index})}onFileJump(e,{file:t,iid:a,ts:n,channelId:s,userId:r,botId:i}){this.props.onFileJump(e,{file:t,iid:a,ts:n,channelId:s,userId:r,botId:i,position:this.props.index})}onRepliesClick(e){this.props.onRepliesClick(e),this.props.clogSearchMessageClick({type:w.b.repliesJump,iid:e.iid,ts:e.ts,channelId:e.channelId,userId:e.userId,botId:e.botId,position:this.props.index})}onExpandHoverStart(){this.setState(()=>({isHoveringOnExpandLinks:!0}))}onExpandHoverEnd(){this.setState(()=>({isHoveringOnExpandLinks:!1}))}getCondensedMessageArray(){const e=this.props.messages;return Object(ve.a)(e,(e,t)=>{const a=e.length&&e[e.length-1].collapsedStub;return t.stub&&(!t.text||t.text.length>200||a)?a?e[e.length-1].count+=1:e.push({collapsedStub:!0,count:1}):e.push(t),e},[])}expand({iid:e,ts:t,channelId:a,userId:n,botId:s}){this.setState(()=>({isExpanded:!0})),this.props.clogSearchMessageClick({type:w.b.expand,iid:e,ts:t,channelId:a,userId:n,botId:s,position:this.props.index})}formatHeaderDate(){return Z(this.props.messages,!0)}renderHeader(){const e=this.props.channel;if(!e)return null;const t=this.formatHeaderDate();return s.a.createElement(Se.a,{className:"c-message_group__header",onClick:this.onChannelClick,"data-qa":"search_message_group_header"},s.a.createElement(je.a,{channel:e,teamIconSize:"14",showPresence:!0,inline:!0,showTeamIconForXwsChannels:!0}),s.a.createElement("span",null,"\u2013"),s.a.createElement("span",{className:"c-message_group__header_date"},t),s.a.createElement("span",{className:"c-message_group__header_view_label"},Be.t("View in channel")))}renderMessages(){const e=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();return Object(f.a)(e,(e,t)=>e.collapsedStub&&!this.state.isExpanded?s.a.createElement(Ie.a,{key:t,className:"c-message_group__divider",onClick:this.expand,"aria-expanded":this.state.isExpanded},s.a.createElement("hr",{className:"c-message_group__divider_rule"}),s.a.createElement("div",{className:"c-message_group__divider_text"},Be.t("+{count, plural, =1 {# message} other {# messages}}",{count:e.count}))):s.a.createElement(De,b()({key:e.ts,index:this.props.index},e,{teamId:this.props.team,channel:this.props.channel,expanded:this.state.isExpanded,onExpand:this.expand,onClick:this.onMessageJump,onLinkClick:t=>{this.onLinkClick(e,t)},onFileClick:this.onFileJump,onRepliesClick:this.onRepliesClick,onExpandHoverStart:this.onExpandHoverStart,onExpandHoverEnd:this.onExpandHoverEnd,logger:this.props.logger,telemeter:this.props.telemeter})))}render(){const e=o()("c-message_group",{"c-message_group--hover-expand":this.state.isHoveringOnExpandLinks});return s.a.createElement("div",{className:e,"data-qa":"search_message_group"},this.renderHeader(),this.renderMessages())}}message_group_SearchMessageGroup.displayName="SearchMessageGroup",message_group_SearchMessageGroup.defaultProps=Ue;const qe={clogSearchMessageClick:(...e)=>Object(w.i)(...e),clogMessageClick:(...e)=>Object(Ee.a)(...e),close:(...e)=>Object(F.a)(...e)};var He=Object(l.b)((e,{channel:t,team:a})=>{const n=Object(M.d)(e),s=Object(M.i)(e,a||n.id),r=Object(U.e)(s),i=oe(e,t);return{channel:b()({},i,{team_id:a}),isEnterpriseOrg:!(!n||!n.enterprise_id),workspaceName:r,currentTeam:n}},qe,null,{areStatePropsEqual:(e,t)=>Object(ke.a)(e,t,2)})(message_group_SearchMessageGroup);const We="IMPROVED_SEARCH";r.default.object.isRequired,r.default.object.isRequired;class protected_message_group_ProtectedMessageGroup extends n.PureComponent{constructor(){super(),this.state={hasError:!1}}componentDidCatch(e,t){this.props.telemeter.count("search_ui_messages_result_message_group_render_error"),this.props.logger.error(We,`Error caught by ProtectedMessageGroup ${t.componentStack}`,e),this.setState(()=>({hasError:!0}))}render(){var e=this.props;const t=e.logger,a=be()(e,["logger"]);return this.state.hasError?s.a.createElement(Ce,a):s.a.createElement(He,b()({logger:t},a))}}protected_message_group_ProtectedMessageGroup.displayName="ProtectedMessageGroup";var Ge=protected_message_group_ProtectedMessageGroup,Ke=a("wljo");r.default.bool,r.default.number.isRequired,r.default.number.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired;const Ve=new q.b("search");function ze({visible:e,currentPageOffset:t,totalPageCount:a,onBack:n,onForward:r,onFeedbackClick:i}){if(!e)return null;const o=1===t,l=t===a;let c="";const d={currentPageOffset:Object(K.a)(t),totalPageCount:Object(K.a)(a)};c=Ve.t("Page {currentPageOffset} of {totalPageCount}",d,{fallbackHash:"12d107c2f54959a419ebf8a58dc959d76473b0ea"});const u=s.a.createElement(Se.a,{className:"c-search__pager__button_forward",onClick:r,disabled:l,"data-qa":"search_pager_forward_button"},o&&Ve.t("See more")||Ve.t("Next"),s.a.createElement(G.b,{type:"chevron-medium-right",size:"inherit"})),p=s.a.createElement(Se.a,{className:"c-search__pager__button__back",onClick:n,disabled:o,"data-qa":"search_pager_back_button"},s.a.createElement(G.b,{type:"chevron-medium-left",size:"inherit"}),Ve.t("Previous")),h=s.a.createElement(Ke.a,{short:!0,className:"c-search__pager_feedback",onClick:i});return s.a.createElement("div",{className:"c-search__pager"},o||p,s.a.createElement("div",null,s.a.createElement("span",{className:"c-search__pager__details"},c),h),l||u)}ze.displayName="Pager",ze.defaultProps={visible:!0};var $e=ze,Ye=a("HI9p"),Qe=a("G4ux"),Xe=a("brL+"),Je=a("zbZx"),Ze=a("TGBA"),et=a("Hh47"),tt=a("wmz2"),at=a("nOXG");function nt(e,t,a){const n=Object(P.n)(t()),s=n?n.query:"";return e(Object(P.d)()),e(Object(et.a)()),e(Object(N.a)({query:s,reason:a,fetchSuggestions:Object(at.a)(t())}))}const st=Object(I.b)("Message/file search: exclude bots checkbox changed",(e,t,{value:a}={})=>{e(Object(j.i)({value:a})),nt(e,t,"search-exclude-bots-changed")});st.meta={name:"messageAndFileSearchExcludeBotsChanged",key:"actionsUniversalSearchSearchPrefsChangedMessageAndFileSearchExcludeBotsChanged",description:"Message/file search: exclude bots checkbox changed"},st.propTypes={value:r.default.bool.isRequired};const rt=Object(I.b)("Message/file search: only my channels checkbox changed",(e,t,{value:a}={})=>{e(Object(j.j)({value:a})),nt(e,t,"search-only-my-channels-changed")});rt.meta={name:"messageAndFileSearchOnlyMyChannelsChanged",key:"actionsUniversalSearchSearchPrefsChangedMessageAndFileSearchOnlyMyChannelsChanged",description:"Message/file search: only my channels checkbox changed"},rt.propTypes={value:r.default.bool.isRequired};const it=Object(I.b)("Channel search: hide member channels flag changed",(e,t,{value:a,refetch:n=!0}={})=>{e(Object(j.g)({value:a})),n&&nt(e,t,"search-hide-member-channels-changed")});it.meta={name:"channelSearchHideMemberChannelsChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchHideMemberChannelsChanged",description:"Channel search: hide member channels flag changed"},it.propTypes={value:r.default.bool.isRequired};const ot=Object(I.b)("File search: sort changed",(e,t,{sort:a}={})=>{e(Object(tt.b)({sort:a})),e(Object(N.d)({module:"files",reason:"search-files-sort-changed"}))});ot.meta={name:"fileSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedFileSearchSortChanged",description:"File search: sort changed"},ot.propTypes={sort:r.default.oneOf(Object(Ze.a)(A.c)).isRequired};const lt=Object(I.b)("Channel search: sort changed",(e,t,{sort:a}={})=>{e(Object(j.h)({sort:a})),e(Object(N.d)({module:"channels",reason:"search-channels-sort-changed"}))});lt.meta={name:"channelSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchSortChanged",description:"Channel search: sort changed"},lt.propTypes={sort:r.default.oneOf(Object(Ze.a)(A.b)).isRequired};const ct=Object(I.b)("People search: sort changed",(e,t,{sort:a}={})=>{e(Object(j.l)({sort:a})),e(Object(N.d)({module:"people",reason:"search-people-sort-changed"}))});ct.meta={name:"peopleSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchSortChanged",description:"People search: sort changed"},ct.propTypes={sort:r.default.oneOf(Object(Ze.a)(A.b)).isRequired};const dt=Object(I.b)("Channel search: filter type changed",(e,t,{type:a}={})=>{e(Object(S.j)({type:a})),nt(e,t,"search-channels-filter-type-changed")});dt.meta={name:"channelSearchFilterTypeChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchFilterTypeChanged",description:"Channel search: filter type changed"},dt.propTypes={type:r.default.oneOf(Object(Ze.a)(A.a)).isRequired};const ut=Object(I.b)("All of search: search only current workspace changed",(e,t,{value:a,refetch:n=!0}={})=>{e(Object(j.m)({value:a})),n&&nt(e,t,"search-only-search-workspace-changed")});ut.meta={name:"searchOnlySearchWorkspaceChanged",key:"actionsUniversalSearchSearchPrefsChangedSearchOnlySearchWorkspaceChanged",description:"All of search: search only current workspace changed"},ut.propTypes={value:r.default.bool.isRequired};const pt=Object(I.b)("All of search: search by selected enterprise team id",(e,t,{value:a,refetch:n=!0}={})=>{e(Object(S.g)({selectedEnterpriseTeamId:a})),n&&nt(e,t,"search-only-by-enterprise-team-id")});pt.meta={name:"searchOnlyByEnterpriseTeamId",key:"actionsUniversalSearchSearchPrefsChangedSearchOnlyByEnterpriseTeamId",description:"All of search: search by selected enterprise team id"},pt.propTypes={value:r.default.string.isRequired};const ht=Object(I.b)("Channel search: update an external org filter",(e,t,{teamId:a,value:n}={})=>{const s=t();let r=[...Object(c.e)(s)];const i=Object(c.d)(s);n?r.push(a):r=r.filter(e=>e!==a),e(Object(S.k)({teamIds:Array.from(new Set([...i,a]))})),e(Object(S.l)({orgFilters:r})),nt(e,t,"search-channels-org-filter-changed")});ht.meta={name:"toggleChannelSearchOrgFilter",key:"actionsUniversalSearchSearchPrefsChangedToggleChannelSearchOrgFilter",description:"Channel search: update an external org filter"},ht.propTypes={teamId:r.default.string.isRequired,value:r.default.bool.isRequired};const mt=Object(I.b)("People search: update an external org filter",(e,t,{teamId:a,value:n}={})=>{const s=t();let r=[...Object(c.n)(s)];const i=Object(c.m)(s);n?r.push(a):r=r.filter(e=>e!==a),e(Object(S.x)({teamIds:Array.from(new Set([...i,a]))})),e(Object(S.y)({orgFilters:r})),nt(e,t,"search-people-org-filter-changed")});mt.meta={name:"togglePeopleSearchOrgFilter",key:"actionsUniversalSearchSearchPrefsChangedTogglePeopleSearchOrgFilter",description:"People search: update an external org filter"},mt.propTypes={teamId:r.default.string.isRequired,value:r.default.bool.isRequired};const bt=Object(I.b)("People search: filter type changed",(e,t,{type:a,teamId:n,refetch:s=!0}={})=>{e(Object(S.w)({type:a,teamId:n})),s&&nt(e,t,"search-people-filter-type-changed")});bt.meta={name:"peopleSearchFilterTypeChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchFilterTypeChanged",description:"People search: filter type changed"},bt.propTypes={type:r.default.oneOf(Object(Ze.a)(A.h)).isRequired,teamId:r.default.string};const ft=Object(I.b)("People search: custom filter changed",(e,t,{id:a,value:n,checked:s}={})=>{e(Object(S.v)({id:a,value:n,checked:s})),nt(e,t,"search-people-custom-filter-changed")});ft.meta={name:"peopleSearchCustomFilterChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchCustomFilterChanged",description:"People search: custom filter changed"},ft.propTypes={id:r.default.string.isRequired,value:r.default.string.isRequired,checked:r.default.bool.isRequired};const _t=Object(I.b)("People search: hide deactivated users pref changed",(e,t,{value:a,refetch:n=!0}={})=>{e(Object(j.k)({value:a})),n&&nt(e,t,"search-people-hide-deactivated-users-changed")});_t.meta={name:"peopleSearchHideDeactivatedUsersChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchHideDeactivatedUsersChanged",description:"People search: hide deactivated users pref changed"},_t.propTypes={value:r.default.bool.isRequired};const gt=Object(I.b)("People search: timezone filter changed",(e,t,{label:a,value:n,checked:s}={})=>{e(Object(S.C)({label:a,value:n,checked:s})),nt(e,t,"search-people-timezone-filter-changed")});gt.meta={name:"peopleSearchTimezoneFilterChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchTimezoneFilterChanged",description:"People search: timezone filter changed"},gt.propTypes={label:r.default.string.isRequired,value:r.default.string.isRequired,checked:r.default.bool.isRequired};var yt=a("FHcd"),Ot=a("+1yX"),Ct=a("jYCR"),vt=a("fujP");var Et=a("Fdc0"),kt=a("c48M"),St=a("NOj5"),jt=a("nlS/"),It=a("AgpX");a("ym0a");const wt=new q.b("search"),Tt=(r.default.bool,r.default.string.isRequired,r.default.string.isRequired,r.default.string.isRequired,r.default.arrayOf(r.default.shape({value:r.default.string.isRequired,label:r.default.node,checked:r.default.bool.isRequired})).isRequired,r.default.func.isRequired,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,{onOptionChange:_.a,onOptionAdd:_.a,renderVisibleOption:void 0,renderOption:void 0,filterOptions:(e,t)=>t,showMoreOptions:!0}),Nt={};class search_filter_multi_select_SearchFilterMultiSelect extends n.Component{constructor(e){super(e),this.initialState={isSelectVisible:!1,isLoading:!1,emptyMessage:Nt,activeRowIndex:null,filterQuery:"",options:[],selectId:`search-multi-select-filter-${e.checkboxName}`,isExpanded:!1,isInvalid:!1,isDisabled:!1},this.state=this.initialState,Object(y.a)(this,["onShowSelectClick","setSelectState","renderOption","emptyStateMessage"]),this.loadOptionsPromise=null,this.inputRef=s.a.createRef()}componentDidMount(){this.reloadOptions("")}componentWillUnmount(){this.loadOptionsPromise&&this.loadOptionsPromise.cancel()}onShowSelectClick(){this.setState(()=>({isSelectVisible:!0}),()=>{this.inputRef.current.focus()})}setSelectState(e,t){let a=!1;this.setState(t=>{const n=e();var s=n.activeRowIndex;const r=void 0===s?t.activeRowIndex:s;var i=n.filterQuery;const o=void 0===i?t.filterQuery:i;var l=n.isExpanded;const c=void 0===l?t.isExpanded:l;var d=n.isInvalid;const u=void 0===d?t.isInvalid:d;var p=n.isDisabled;const h=void 0===p?t.isDisabled:p;var m=n.options;const b=void 0===m?t.options:m;var f=n.selectId;const _=void 0===f?t.selectId:f;void 0!==o&&o!==t.filterQuery&&(a=!0);const g=Object(St.a)(b,t.options,"value").length;return g===b.length&&g===t.options.length||(a=!0),{activeRowIndex:r,filterQuery:o,isExpanded:c,isInvalid:u,isDisabled:h,options:this.props.filterOptions(o,b),selectId:_}},()=>{a&&this.reloadOptions(this.state.filterQuery),t&&t()})}refilterOptions(){this.setState(e=>({options:this.props.filterOptions(e.filterQuery,e.options)}))}reloadOptions(e){this.loadOptionsPromise&&this.loadOptionsPromise.cancel(),this.setState(()=>({isLoading:!0})),this.loadOptionsPromise=this.props.loadOptions(e).then(({options:e,emptyMessage:t=Nt}={})=>{this.setState(a=>({options:this.props.filterOptions(a.filterQuery,e),emptyMessage:t}))}).catch(_.a).finally(()=>{this.loadOptionsPromise.isCancelled()||this.setState(()=>({isLoading:!1}))})}emptyStateMessage(){return this.state.emptyMessage===Nt?wt.t("Nothing found",{fallbackHash:"f4e12416c6b8d6a75b8a34fc79a221e1a43d1120",fallbackHashNs:"select"}):this.state.emptyMessage}renderOption(e,t){const a=t.isActive,n=t.isSelected;return s.a.createElement("div",{className:o()("p-search_filter__option p-search_filter__option--suggestion",{"p-search_filter__option--active":a,"p-search_filter__option--selected":n})},this.props.renderOption?this.props.renderOption(e,t):s.a.createElement("span",{className:"p-search_filter__option_label"},e.label))}render(){var e=this.props;const t=e.checkboxName,a=e.visibleOptions,n=e.placeholderText,r=e.onOptionChange,i=e.onOptionAdd,l=e.renderVisibleOption,c=e.showMoreOptions,d=e.showMoreOptionsAriaLabel,u=this.state.isSelectVisible,p=0===a.length;return s.a.createElement("div",null,a.map(e=>s.a.createElement("label",{key:e.value,htmlFor:`search-filter-${t}-${e.value}`,className:o()("p-search_filter__visible_option",{"p-search_filter__visible_option--selected":e.checked}),"data-qa":"search_filter_suggestion"},l?l(e):s.a.createElement("span",{className:"p-search_filter__option_label"},e.label),s.a.createElement("span",{className:"p-search_filter__visible_checkbox"},s.a.createElement("input",{id:`search-filter-${t}-${e.value}`,type:"checkbox",name:t,value:e.value,checked:e.checked,onChange:t=>{r(e,t.target.checked),this.refilterOptions()}})))),c&&(u?s.a.createElement("div",{className:"p-search_filter__select"},s.a.createElement(jt.b,{width:"100%",inputRef:this.inputRef,selectId:`search-multi-select-filter-${t}`,placeholderText:n,emptyStateMessage:this.emptyStateMessage,options:this.state.options,isLoading:this.state.isLoading,setSelectState:this.setSelectState,isExpanded:!!this.state.emptyMessage&&this.state.isExpanded,selectState:{activeRowIndex:this.state.activeRowIndex,filterQuery:this.state.filterQuery,options:this.state.options,selectId:this.state.selectId,isExpanded:!!this.state.emptyMessage&&this.state.isExpanded,isInvalid:this.state.isInvalid,isDisabled:this.state.isDisabled},onOptionSelected:(...e)=>{this.setState(e=>b()({},this.initialState,{options:e.options})),i(...e)},renderOption:this.renderOption})):s.a.createElement(It.a,{className:o()("p-search_filter__more_link",{"p-search_filter__empty_more_link":p}),"data-qa":"search_filter_multi_select__more_link",onClick:this.onShowSelectClick,"aria-label":d,"aria-expanded":"false"},wt.t("More\u2026"))))}}search_filter_multi_select_SearchFilterMultiSelect.displayName="SearchFilterMultiSelect",search_filter_multi_select_SearchFilterMultiSelect.defaultProps=Tt;var At=search_filter_multi_select_SearchFilterMultiSelect,Rt=a("fX3E"),Mt=a("derf"),Pt=a("hUMe"),xt=a("z+SX"),Lt=a("wd/R"),Ft=a.n(Lt),Dt=a("/NHa");a("D3Vj");const Bt=e=>s.a.createElement("div",{className:"c-search_filter_section"},s.a.createElement("h3",{className:"c-search_filter_section__title"},e.title),e.children);Bt.displayName="SearchFilterSection",Bt.defaultProps={children:null};var Ut=Bt,qt=a("hFPh");r.default.func.isRequired,r.default.func.isRequired,r.default.string,r.default.string,r.default.string,r.default.string.isRequired,r.default.string.isRequired,r.default.string.isRequired,r.default.string;const Ht=-364;class date_selector_DateSelector extends n.PureComponent{constructor(e){super(e),Object(y.a)(this,["onClearDateChange"])}onClearDateChange(){this.props.onDateChange(null)}render(){var e=this.props;const t=e.onDateChange,a=e.date,n=e.isDateDisabled,r=e.disableDatesBefore,i=e.disableDatesAfter,l=e.dateLabel,c=e.dateAriaLabel,d=e.removeAriaLabel,u=e.qaLabel,p="es-ES"===Object(q.s)()||"es-LA"===Object(q.s)(),h=a?Object(J.k)(Ft()(a),{shortenMonth:p,shortenDay:p}):"",m=o()("p-search_filter__datepicker_trigger",{"p-search_filter__datepicker_trigger--empty":!a});return s.a.createElement("div",{className:"p-search_filter__date","data-qa":u},s.a.createElement(qt.d,{position:"bottom",offsetY:Ht,selectedDate:a,dateFormat:"YYYY-MM-DD",onDateChange:t,isDateDisabled:n,disableDatesBefore:r,disableDatesAfter:i},s.a.createElement(Ie.a,{className:m,"aria-label":a?void 0:c,"data-qa":`${u}_button`},s.a.createElement("div",{className:"p-search_filter__date_label"},l),s.a.createElement("div",{className:"p-search_filter__date_readout"},h),a?null:s.a.createElement(G.b,{type:"calendar",className:"p-search_filter__calendar_icon"}))),a?s.a.createElement(Ie.a,{"aria-label":d,className:"p-search_filter__date_close",onClick:this.onClearDateChange,"data-qa":`${u}_close`},s.a.createElement(G.b,{type:" c-icon--times-small"})):null)}}date_selector_DateSelector.displayName="DateSelector",date_selector_DateSelector.defaultProps={date:null,disableDatesBefore:null,disableDatesAfter:null,qaLabel:""};var Wt=date_selector_DateSelector;const Gt=new q.b("search");r.default.func.isRequired,r.default.func.isRequired,r.default.string,r.default.string;class date_range_filter_DateRangeFilter extends n.PureComponent{constructor(e){super(e),Object(y.a)(this,["isDateDisabledStart","isDateDisabledEnd"])}isDateDisabledStart(e){const t=this.props.endDate;return t&&e.isAfter(t)||e.isAfter(Ft()())}isDateDisabledEnd(e){const t=this.props.startDate;return t&&e.isBefore(t)||e.isAfter(Ft()())}render(){var e=this.props;const t=e.onStartDateChange,a=e.onEndDateChange,n=e.endDate,r=e.startDate;return s.a.createElement(Ut,{title:Gt.t("Date")},s.a.createElement("div",{className:"p-search_filter__dates"},s.a.createElement(Wt,{date:r,onDateChange:e=>{t(e?Ft()(e):null)},isDateDisabled:this.isDateDisabledStart,disableDatesAfter:n||Ft()().format("YYYY-MM-DD"),dateLabel:Gt.t("Starting"),dateAriaLabel:Gt.t("Starting date"),removeAriaLabel:Gt.t("Remove starting date"),qaLabel:"search_starting_date"}),s.a.createElement(Wt,{date:n,onDateChange:e=>{a(e?Ft()(e):null)},isDateDisabled:this.isDateDisabledEnd,disableDatesBefore:r,disableDatesAfter:Ft()().format("YYYY-MM-DD"),dateLabel:Gt.t("Ending"),dateAriaLabel:Gt.t("Ending date"),removeAriaLabel:Gt.t("Remove ending date"),qaLabel:"search_ending_date"})))}}date_range_filter_DateRangeFilter.displayName="DateRangeFilter",date_range_filter_DateRangeFilter.defaultProps={startDate:null,endDate:null};var Kt=date_range_filter_DateRangeFilter;r.default.number.isRequired,r.default.bool;function Vt({variation:e,includeAvatar:t}){return s.a.createElement("div",{className:"p-search_filter__placeholder_suggestion"},t?s.a.createElement("div",{className:"p-search_filter__placeholder_avatar"}):null,s.a.createElement("div",{className:`p-search_filter__placeholder_name p-search_filter__placeholder_name--${e}`}))}Vt.displayName="PlaceholderSuggestion",Vt.defaultProps={includeAvatar:!1};var zt=Vt,$t=a("g9w/");const Yt=new q.b("search");function Qt(e){const t=e.loggedInEnterpriseTeams,a=e.searchOnlyWorkspaceTeamId,r=e.selfEnterpriseOrgName,i=e.featureSearchTeamLimitFilter;if(i&&!1===i)return null;const o=[{renderLabel:s.a.createElement("div",{className:"p-search_filter__limit_team_filter_dropdown_item"},Yt.rt("All {enterpriseName} Workspaces",{enterpriseName:r})),label:Yt.t("All {enterpriseName} Workspaces",{enterpriseName:r}),value:""},...t.map(e=>({renderLabel:s.a.createElement("div",{className:"p-search_filter__limit_team_filter_dropdown_item"},s.a.createElement(n.Fragment,null,s.a.createElement(Mt.b,{className:"p-search_filter__limit_team_filter_icon",id:e.id,size:18})," ",s.a.createElement(Pt.a,{id:e.id,bold:!1}))),label:e.name,value:e.id}))],l=""===a?o[0]:o.find(e=>e.value===a);return s.a.createElement($t.a,{options:o,selectId:"search_limit_team_filter_dropdown",width:"100%",onOptionSelected:t=>{e.onChange(t)},renderOption:e=>s.a.createElement("span",null,e.renderLabel),selectedOption:l,renderSelectedOption:e=>s.a.createElement("span",null,e.renderLabel)})}Qt.displayName="SearchLimitTeamFilterDropdown",Qt.defaultProps={loggedInEnterpriseTeams:[],searchOnlyWorkspaceTeamId:"",selfEnterpriseOrgName:"",onChange:_.a,featureSearchTeamLimitFilter:!1};var Xt=Qt;a("YyUD");const Jt=new q.b("search"),Zt="IMPROVED_SEARCH",ea=(r.default.bool,r.default.bool,r.default.object.isRequired,r.default.object.isRequired,r.default.object.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.object.isRequired,r.default.bool.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.shape({searchOnlyCurrentTeam:r.default.bool.isRequired,searchExcludeBots:r.default.bool.isRequired,searchOnlyMyChannels:r.default.bool.isRequired}).isRequired,r.default.object.isRequired,r.default.bool.isRequired,r.default.bool.isRequired,r.default.func,r.default.func.isRequired,r.default.bool.isRequired,r.default.bool.isRequired,r.default.func.isRequired,r.default.func,r.default.func,r.default.bool.isRequired,r.default.string,r.default.bool.isRequired,r.default.string,r.default.array.isRequired,r.default.func,{showOnlyActiveFilters:!1,showFileFilters:!1,logInfo:_.a,clogSearchFilterAdded:_.a,clogSearchFilterRemoved:_.a,searchOnlyWorkspaceTeamId:"",selfEnterpriseOrgName:"",searchOnlyByEnterpriseTeamId:_.a});class messages_filter_ui_MessagesFilterUIBase extends n.PureComponent{constructor(e){super(e),Object(y.a)(this,["onChannelSelect","onMemberSelect","onEndDateSelect","onStartDateSelect","onFileTypeChange","loadInFilterOptions","loadFromFilterOptions","onSearchLimitTeamFilterDropdownChange"]),this.onStartDateSelect=this.onStartDateSelect.bind(this),this.onEndDateSelect=this.onEndDateSelect.bind(this)}onChannelSelect(e,{offset:t}={}){if(!e)return;const a={filter_in:!0,filter_position:t};Object(yt.a)(e)?a.click_user_id=e:a.click_channel_id=e,this.props.filters.in.indexOf(e)>-1?this.props.clogSearchFilterRemoved(a):this.props.clogSearchFilterAdded(a);let n=e;this.props.imToUserMap[e]&&(n=this.props.imToUserMap[e]),this.props.toggleEditableRequestQueryFilterInItem({channelId:n})}onMemberSelect(e,{offset:t}={}){e&&(this.props.filters.from.indexOf(e)>-1?this.props.clogSearchFilterRemoved({click_user_id:e,filter_from:!0,filter_position:t}):this.props.clogSearchFilterAdded({click_user_id:e,filter_from:!0,filter_position:t}),this.props.toggleEditableRequestQueryFilterFromItem({memberId:e}))}onEndDateSelect(e){const t=e&&e.add(1,"days").format(Dt.a);t?this.props.clogSearchFilterAdded({filter_before:t}):this.props.clogSearchFilterRemoved({filter_before:""}),this.props.setEditableRequestQueryFilterBefore({dateString:t})}onStartDateSelect(e){const t=e&&e.subtract(1,"days").format(Dt.a);t?this.props.clogSearchFilterAdded({filter_after:t}):this.props.clogSearchFilterRemoved({filter_after:""}),this.props.setEditableRequestQueryFilterAfter({dateString:t})}onSearchPrefChange(e){var t=this.props.searchPrefs;const a=t.searchOnlyCurrentTeam,n=t.searchExcludeBots,s=t.searchOnlyMyChannels;let r;switch(this.props.logInfo(Zt,`Changing search pref. pref: ${e}`),e){case A.n:r=!a,this.props.searchOnlySearchWorkspaceChanged({value:r});break;case A.k:r=!n,this.props.messageAndFileSearchExcludeBotsChanged({value:r});break;case A.o:r=!s,this.props.messageAndFileSearchOnlyMyChannelsChanged({value:r});break;default:return}r?this.props.clogSearchFilterAdded({filter_other:e}):this.props.clogSearchFilterRemoved({filter_other:e})}onSearchLimitTeamFilterDropdownChange(e){this.props.searchOnlyByEnterpriseTeamId({value:e.value})}onFileTypeChange(e){this.props.clogSearchFilterAdded({filter_file_type:e}),this.props.setEditableRequestQueryFilterFileType({fileType:e})}loadInFilterOptions(e){return!e||e.length<=1?Promise.resolve({options:[],emptyMessage:null}):this.props.search({query:e,options:{limit:150,entities:{channels:{includeArchived:!0,onlyIfMember:this.props.searchPrefs.searchOnlyMyChannels,includeFromAnotherTeam:!this.props.searchPrefs.searchOnlyCurrentTeam,includeMpims:!0},members:{includeSelf:!0,includeSlackbot:!this.props.searchPrefs.searchExcludeBots,includeBots:!this.props.searchPrefs.searchExcludeBots,includeDeleted:!0}}}}).then(e=>{const t=e.filter(e=>{return-1===Object(Ye.a)(this.props.suggestions.in,t=>t.id===e.id)}),a={};return this.props.suggestions.in.forEach(e=>{a[e.name]=(a[e.name]||0)+1}),t.forEach(e=>{a[e.name]=(a[e.name]||0)+1}),{options:t.map(e=>({label:null,model:e,member:Object(Et.yb)(e)&&e,mpim:Object(re.qb)(e)&&e,channel:Object(re.Z)(e)&&e,value:e.id}))}})}loadFromFilterOptions(e){return!e||e.length<=1?Promise.resolve({options:[],emptyMessage:null}):this.props.search({query:e,options:{entities:{members:{includeSelf:!0,includeSlackbot:!0,includeBots:!0,includeDeleted:!0}}}}).then(e=>{return{options:e.filter(e=>-1===this.props.suggestions.from.indexOf(e.id)).map(e=>({label:null,model:e,member:Object(Et.yb)(e)&&e,mpim:Object(re.qb)(e)&&e,channel:Object(re.Z)(e)&&e,value:e.id}))}})}shouldRenderDateFilter(){var e=this.props;const t=e.filters,a=e.showOnlyActiveFilters;return!((!(n=t)||Object(vt.a)(n)||!(n.in&&n.in.length||n.from&&n.from.length||n.to&&n.to.length||n.before||n.after||n.has_star||n.has_pin||n.has_link||n.has_rxn))&&a)&&(!a||t.before&&t.after);var n}renderInFilter(){var e=this.props;const t=e.filters,a=e.suggestions,n=e.fileSuggestions,r=e.loading,i=e.loadingFileSuggestions,o=e.showFileFilters;if(r&&!o||i&&o)return this.renderInPlaceholder();const l=(o?n:a).in,c={};l.forEach(e=>{c[e.name]=(c[e.name]||0)+1});const d=[],u={};return l.forEach(e=>{const a=t.in.indexOf(e.id)>-1;a&&(u[e.id]=!0),d.push({label:null,model:e,member:Object(Et.yb)(e)&&e,mpim:Object(re.qb)(e)&&e,channel:Object(re.Z)(e)&&e,value:e.id,checked:a})}),s.a.createElement(Ut,{title:Jt.t("Channels & direct messages")},s.a.createElement(At,{checkboxName:"in_filter",placeholderText:Jt.t("Enter a channel or direct message",{fallbackHash:"f95c98e247b782d3e4650fac888dac7c9ca383a9"}),showMoreOptionsAriaLabel:Jt.t("More channels or direct messages to filter by"),loadOptions:this.loadInFilterOptions,renderVisibleOption:e=>s.a.createElement(je.a,{className:"p-search_filter__in_channel",channel:e.model,showTeamIconForLocalChannels:c[e.model.name]>1,showTeamIconForXwsChannels:!0}),renderOption:e=>e.member?s.a.createElement(xt.a,{className:"p-search_filter__in_member",id:e.member.id}):s.a.createElement(je.a,{className:"p-search_filter__in_channel",channel:e.model,teamIconSize:18,showTeamIconForLocalChannels:c[e.model.name]>1,showTeamIconForXwsChannels:!0}),visibleOptions:d,onOptionChange:e=>{this.onChannelSelect(e.value,{offset:d.indexOf(e)})},onOptionAdd:e=>{this.onChannelSelect(e.value,{offset:null})},filterOptions:(e,t)=>t.filter(e=>!u[e.value])}))}renderInPlaceholder(){return s.a.createElement(Ut,{title:Jt.t("Channels & direct messages")},s.a.createElement(zt,{variation:0}),s.a.createElement(zt,{variation:1}),s.a.createElement(Se.a,{className:"p-search_filter__more_link",disabled:!0,"aria-label":Jt.t("More channels or direct messages to filter by"),"aria-expanded":"false"},Jt.t("More\u2026")))}renderFromFilter(){var e=this.props;const t=e.filters,a=e.suggestions,r=e.fileSuggestions,i=e.loading,o=e.loadingFileSuggestions,l=e.showFileFilters;if(i&&!l||o&&l)return this.renderFromPlaceholder();const c=[],d={};return(l?r:a).from.forEach(e=>{const a=t.from.indexOf(e.id)>-1;a&&(d[e.id]=!0),c.push({label:null,model:e,member:Object(Et.yb)(e)&&e,mpim:Object(re.qb)(e)&&e,channel:Object(re.Z)(e)&&e,value:e.id,checked:a})}),s.a.createElement(Ut,{title:Jt.t("People")},s.a.createElement(At,{checkboxName:"from_filter",placeholderText:Jt.t("Enter a teammate\u2019s name",{fallbackHash:"670ca2ba897531a14d0d51f4b85583c58e9b03dc"}),showMoreOptionsAriaLabel:Jt.t("More people to filter by"),loadOptions:this.loadFromFilterOptions,renderVisibleOption:e=>s.a.createElement(n.Fragment,null,s.a.createElement(fe.c,{className:"p-search_filter__from_avatar",userId:e.model.id,size:18,ariaHidden:"true",tabIndex:"-1",isInteractive:!1}),s.a.createElement(xt.a,{className:"p-search_filter__from_name",id:e.model.id})),renderOption:e=>s.a.createElement(n.Fragment,null,s.a.createElement(fe.c,{className:"p-search_filter__from_avatar",userId:e.model.id,size:18,ariaHidden:"true",tabIndex:"-1",isInteractive:!1}),s.a.createElement(xt.a,{className:"p-search_filter__from_name",id:e.model.id})),visibleOptions:c,onOptionChange:e=>{this.onMemberSelect(e.value,{offset:c.indexOf(e)})},onOptionAdd:e=>{this.onMemberSelect(e.value,{offset:null})},filterOptions:(e,t)=>t.filter(e=>!d[e.value])}))}renderFromPlaceholder(){return s.a.createElement(Ut,{title:Jt.t("People")},s.a.createElement(zt,{includeAvatar:!0,variation:0}),s.a.createElement(zt,{includeAvatar:!0,variation:1}),s.a.createElement(Se.a,{className:"p-search_filter__more_link",disabled:!0,"aria-label":Jt.t("More people to filter by"),"aria-expanded":"false"},Jt.t("More\u2026")))}renderFileTypeFilter(){var e=this.props;const t=e.filters,a=e.showOnlyActiveFilters;return!e.showFileFilters||a&&!t.fileType?null:s.a.createElement(Ut,{title:Jt.t("File type")},s.a.createElement(Rt.a,{filetype:t.fileType,onChange:this.onFileTypeChange}))}renderPrefs(){var e=this.props;const t=e.showOnlyActiveFilters,a=e.isEnterpriseOrg,r=e.showDebugOption,i=e.isDebugInfoVisible,l=e.currentTeam,c=e.featureSearchLimitTeamFilter,d=e.searchOnlyWorkspaceTeamId,u=e.selfEnterpriseOrgName,p=e.loggedInEnterpriseTeams,h=e.showEnterpriseOptions;var m=this.props.searchPrefs;const b=m.searchOnlyCurrentTeam,f=m.searchExcludeBots,_=m.searchOnlyMyChannels;return t?null:s.a.createElement(n.Fragment,null,h&&c?s.a.createElement(Ut,{title:Jt.t("Workspace"),"data-qa":"search-filter-workspace-section"},s.a.createElement("div",{className:"p-search_filter__select"},s.a.createElement(Xt,{loggedInEnterpriseTeams:p,selfEnterpriseOrgName:u,searchOnlyWorkspaceTeamId:d,onChange:this.onSearchLimitTeamFilterDropdownChange,featureSearchLimitTeamFilter:c}))):null,s.a.createElement(Ut,{title:Jt.t("More options")},a&&!c?s.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":b}),htmlFor:"search_only_current_team"},Jt.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:s.a.createElement(n.Fragment,null,s.a.createElement(Mt.b,{className:"p-search_filter__workspace_only_team_icon",team:l,size:18})," ",s.a.createElement(Pt.a,{id:l.id,bold:b}))}),s.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_current_team",checked:b,onChange:()=>this.onSearchPrefChange(A.n)})):null,s.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":_}),htmlFor:"search_only_my_channels"},Jt.t("Only search my channels")," ",s.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_my_channels",checked:_,onChange:()=>this.onSearchPrefChange(A.o)})),s.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":f}),htmlFor:"search_exclude_bots"},Jt.t("Hide apps and bots")," ",s.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_exclude_bots",checked:f,onChange:()=>this.onSearchPrefChange(A.k)})),r&&s.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":i}),htmlFor:"search_show_debug_info"},"[DEBUG] Show solr debug info"," ",s.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_show_debug_info",checked:i,onChange:()=>this.props.toggleDebugInfoVisible()}))))}render(){const e=this.props.filters.after&&Ft()(this.props.filters.after,Dt.a).add(1,"days").format(Dt.a),t=this.props.filters.before&&Ft()(this.props.filters.before,Dt.a).subtract(1,"days").format(Dt.a);return s.a.createElement("div",{className:"p-search_filters"},this.renderFromFilter(),this.renderInFilter(),this.renderFileTypeFilter(),s.a.createElement(Kt,{onStartDateChange:this.onStartDateSelect,onEndDateChange:this.onEndDateSelect,startDate:e,endDate:t}),this.renderPrefs())}}messages_filter_ui_MessagesFilterUIBase.displayName="MessagesFilterUIBase",messages_filter_ui_MessagesFilterUIBase.defaultProps=ea;function ta(e,t){return Object(Ot.a)(t)?Object(ie.e)(e,t):Object(yt.a)(t)?Object(Qe.d)(e,t):null}const aa={setEditableRequestQueryFilterAfter:(...e)=>Object(P.u)(...e),setEditableRequestQueryFilterBefore:(...e)=>Object(P.v)(...e),setEditableRequestQueryFilterFileType:(...e)=>Object(P.w)(...e),toggleEditableRequestQueryFilterFromItem:(...e)=>Object(P.F)(...e),toggleEditableRequestQueryFilterInItem:(...e)=>Object(P.G)(...e),search:(...e)=>Object(Ct.c)(...e),toggleDebugInfoVisible:(...e)=>Object(S.K)(...e),clogSearchFilterAdded:(...e)=>Object(w.g)(...e),clogSearchFilterRemoved:(...e)=>Object(w.h)(...e),searchOnlySearchWorkspaceChanged:(...e)=>ut(...e),messageAndFileSearchExcludeBotsChanged:(...e)=>st(...e),messageAndFileSearchOnlyMyChannelsChanged:(...e)=>rt(...e),searchOnlyByEnterpriseTeamId:(...e)=>pt(...e)};var na=Object(l.b)(e=>{const t=Object(P.h)(e)||kt.b,a=Object(P.j)(e)||kt.b,n=Object(P.k)(e)||kt.b,s=Object(C.d)(e),r=Object(M.d)(e),i=!!r.enterprise_id,o=function(e,t=[]){return t.reduce((t,a)=>{if(Object(yt.a)(a)){const n=Object(ie.l)(e,a);n&&(t[n]=a)}return t},{})}(e,t.in),l=(Object(c.j)(e,"suggestions")||kt.b).loading,d=(Object(c.j)(e,"suggestionsForFiles")||{loading:!1}).loading,u="solr_rank_debug"===Object(x.c)(e,"solr_rank_debug"),p=Object(Xe.a)(e),h=Object(C.b)(e).filter(e=>!!e.enterprise_id&&e.enterprise_id===p),m={searchOnlyCurrentTeam:Object(ae.k)(e,A.n),searchExcludeBots:Object(ae.k)(e,A.k),searchOnlyMyChannels:Object(ae.k)(e,A.o)};return{suggestions:{in:(a.in||kt.a).map(t=>ta(e,t)).filter(e=>!!e),from:(a.from||kt.a).map(t=>ta(e,t)).filter(e=>!!e)},fileSuggestions:{in:(n.in||kt.a).map(t=>ta(e,t)).filter(e=>!!e),from:(n.from||kt.a).map(t=>ta(e,t)).filter(e=>!!e)},currentTeam:r,isEnterpriseOrg:i,myUserId:s,filters:{in:t.in||kt.a,from:t.from||kt.a,before:t.before,after:t.after,fileType:t.fileType},imToUserMap:o,searchPrefs:m,loading:l,loadingFileSuggestions:d,logInfo:Object(k.a)({state:e}).info,isDebugInfoVisible:Object(c.h)(e),showDebugOption:u,filterWorkspaceOnly:Object(j.f)(e),allAccountsOfCurrentEnterprise:h,loggedInEnterpriseTeams:h.map(t=>Object(M.i)(e,t.id)),featureSearchLimitTeamFilter:Object(C.m)(e,"feature_search_limit_team_filter"),searchOnlyWorkspaceTeamId:Object(c.r)(e),selfEnterpriseOrgName:Object(M.e)(e),showEnterpriseOptions:Object(Je.d)(e)}},aa,null,{areStatePropsEqual:(e,t)=>Object(ke.a)(e,t,2)})(messages_filter_ui_MessagesFilterUIBase),sa=a("negh"),ra=a("AjwY"),ia=a("kOzZ");const oa=Object(I.b)("Clog clicks on the message/storage limit banner that appears in search for free teams",(e,t,{elementName:a,uiAction:n,elementType:s}={})=>{Object(ia.a)({state:t()}).track(sa.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:sa.UiStep.SEARCH_PANE,action:n,element_name:a,element_type:s}}})});oa.meta={name:"clogLimitBannerInteraction",key:"actionsUniversalSearchClogLimitBannerInteractionClogLimitBannerInteraction",description:"Clog clicks on the message/storage limit banner that appears in search for free teams"},oa.propTypes={elementName:r.default.string.isRequired,uiAction:r.default.number.isRequired,elementType:r.default.number.isRequired};var la=oa;a("IpQt");const ca=new q.b("search");r.default.oneOf(["messages","files"]).isRequired,r.default.bool.isRequired,r.default.bool.isRequired,r.default.func.isRequired;class message_limit_banner_MessageLimitBanner extends n.PureComponent{constructor(e){super(e),this.clogLinkClick=this.clogLinkClick.bind(this)}componentDidMount(){this.isVisible()&&this.props.clogLimitBannerInteraction({uiAction:sa.UiAction.IMPRESSION,elementName:this.getClogElementName(),elementType:sa.ElementType.BANNER})}getClogElementName(){return this.props.overStorageLimit?"storage_limit_banner":"message_limit_banner"}getClogUIElement(){return this.props.overStorageLimit?sa.UiElement.FILE_SEARCH_PRICING_LINK:sa.UiElement.MESSAGE_SEARCH_LINK_TOP}clogLinkClick(){this.props.clogLimitBannerInteraction({uiAction:sa.UiAction.CLICK,elementName:this.getClogElementName(),elementType:sa.ElementType.LINK})}isVisible(){var e=this.props;const t=e.overMessageLimit,a=e.overStorageLimit,n=e.type;return t||a&&"files"===n}render(){if(!this.isVisible())return null;var e=this.props;const t=e.type;let a,n;return e.overStorageLimit&&"files"===t?(a=ca.t("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit."),n=ca.t("See paid plans")):(a="messages"===t?ca.t("Some older messages may not be shown because your workspace has over 10,000 messages."):ca.t("Some older files may not be shown because your workspace has over 10,000 messages."),n=ca.t("Learn more")),s.a.createElement("div",{className:"p-message_limit_banner"},s.a.createElement("div",{className:"p-message_limit_banner__graphic"},s.a.createElement(G.b,{type:"eye-closed"})),s.a.createElement("div",{className:"p-message_limit_banner__content"},a,"\xa0",s.a.createElement(Se.a,{href:Object(ra.k)({entryPoint:"message_limit_banner"}),onClick:this.clogLinkClick,target:"new","data-qa":"message-limit-banner_pricing-link"},n)))}}message_limit_banner_MessageLimitBanner.displayName="MessageLimitBanner";const da={clogLimitBannerInteraction:la};var ua=Object(l.b)(e=>{const t=Object(M.d)(e);return{overMessageLimit:Object(U.B)(t),overStorageLimit:Object(U.C)(t)}},da)(message_limit_banner_MessageLimitBanner),pa=a("yt6e"),ha=a("RMmo"),ma=a("3zPy"),ba=a.n(ma);r.default.any.isRequired,r.default.bool.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.string.isRequired,r.default.any.isRequired;class focus_managed_list_item_FocusManagedListItem extends n.PureComponent{constructor(){super(),Object(y.a)(this,["setContainerRef","onFocusEnter","onKeyDown","onFocusLeave"]),this.focusedAfterUpdate=!1}componentDidUpdate(e){!e.focused&&this.props.focused&&this.container&&(this.focusedAfterUpdate=!0,this.container.focus())}onFocusEnter({relatedEvent:e}){e&&"mousedown"===e.type||(this.props.onFocusEnter({id:this.props.id,isLifeCycleUpdate:this.focusedAfterUpdate}),this.focusedAfterUpdate&&(this.focusedAfterUpdate=!1))}onFocusLeave(){this.props.onFocusLeave({id:this.props.id})}onKeyDown(e){e.keyCode===ma.codes.enter&&e.target===this.container&&this.props.onSelect(e,this.props.id)}setContainerRef(e){this.container=e}focus(){this.container&&this.container.focus()}render(){var e=this.props;const t=e.ariaLabel,a=e.focused,n=e.children;return s.a.createElement(pa.a,{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onFocusWithin:this.onFocusLeave},s.a.createElement("div",{tabIndex:"-1",className:o()("c-focus_manage_list__item",{"c-focus_manage_list__item--focus":a}),ref:this.setContainerRef,role:"listitem","aria-label":t,onKeyDown:this.onKeyDown},n))}}focus_managed_list_item_FocusManagedListItem.displayName="FocusManagedListItem";var fa=focus_managed_list_item_FocusManagedListItem;function _a(e,t,a,n){if(0===e.length)return null;if(null===t&&null!==a)return a;const s=e.indexOf(t);let r=s+n;return r>=e.length?r=e.length-1:-1===s&&n<0?r=e.length-1:r<0&&(r=0),e[r]}a("guNz");r.default.array.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func;const ga={onSelectItem:_.a};class focus_managed_list_FocusManagedList extends n.PureComponent{constructor(e){super(e),Object(y.a)(this,["onFocusLeave","onItemFocusEnter","onItemFocusLeave","onArrowKeyDown","setContainerRef"]),this.state={activeItem:null},this.inferredActiveItem=null,this.containerRef=null,this.keyCommands=null,this.itemRefs={}}onArrowKeyDown(e){e.preventDefault();let t=0;e.keyCode===ma.codes.up&&(t=-1),e.keyCode===ma.codes.down&&(t=1),0!==t&&this.setState(e=>({activeItem:_a(this.props.ids,e.activeItem,this.inferredActiveItem,t)}))}onItemFocusEnter({id:e,isLifeCycleUpdate:t}){t||(this.inferredActiveItem=e,this.setState(()=>({activeItem:null})))}onItemFocusLeave({id:e}){this.setState(({activeItem:t})=>({activeItem:t===e?null:t}))}onFocusLeave(){this.setState(()=>({activeItem:null})),this.inferredActiveItem=null}setContainerRef(e){if(this.containerRef=e,this.keyCommands&&(this.keyCommands.reset(),this.keyCommands=null),this.containerRef){const e=[{keys:["up","down"],handler:this.onArrowKeyDown,ignoreInputs:!0}];this.keyCommands=new ha.a(this.containerRef),this.keyCommands.bindAll(e)}}setItemRef(e,t){this.itemRefs[e]=t}focus(){this.containerRef&&this.containerRef.focus()}focusItem(e){this.itemRefs[e]&&(this.itemRefs[e].focus(),this.inferredActiveItem=e)}render(){var e=this.props;const t=e.ids,a=e.itemAriaLabel,n=e.renderItem,r=e.onSelectItem;return s.a.createElement(pa.a,{onFocusLeave:this.onFocusLeave},s.a.createElement("div",{role:"list",ref:this.setContainerRef,className:"c-search_focus_managed_list",tabIndex:"-1"},t.map(e=>s.a.createElement(fa,{ref:t=>this.setItemRef(e,t),key:e,id:e,ariaLabel:a(e),focused:this.state.activeItem===e,onFocusEnter:this.onItemFocusEnter,onFocusLeave:this.onItemFocusLeave,onSelect:r},n(e)))))}}focus_managed_list_FocusManagedList.displayName="FocusManagedList",focus_managed_list_FocusManagedList.defaultProps=ga;var ya=focus_managed_list_FocusManagedList,Oa=a("uPpK"),Ca=a("LxWA"),va=a("cD5Y"),Ea=a("zoXk"),ka=a("mIgp"),Sa=a("z0G2"),ja=a("ukTK");const Ia=new q.b("search");r.default.func.isRequired;function wa(e){return s.a.createElement("div",{className:"c-search__back_to_filters"},s.a.createElement(W.d,{type:"outline",size:"small",className:"padding_left_50",onClick:e.onClick},s.a.createElement(G.b,{type:"arrow-up-medium"}),"\xa0",Ia.t("Back to Filters",{fallbackHash:"2e2575b332e9f936eb1d97f0ef2c04e7ec73cefe"})))}wa.displayName="BackToFiltersButton";var Ta=wa;const Na=new q.b("search"),Aa="IMPROVED_SEARCH",Ra=300;class search_results_container_SearchResultsContainerBase extends n.Component{constructor(e){super(e),this.state={isScrolledTop:e.scrollPosition<Ra},this.scrollPosition=this.props.scrollPosition,this.wrapperRef=s.a.createRef(),this.keyboardNavigableListRef=s.a.createRef(),this.virtualizedContainerScrollTop=0,this.filterUIPositionTop=0,this.topScrollElementRef=s.a.createRef(),this.virtualListWidth=0,this.heightCache=new ja.a({heights:this.props.heightCache}),this.layout=new Sa.a({heightCache:this.heightCache}),Object(y.a)(this,["onScroll","scrollTop","onVirtualizedContainerScroll","onResize","setKeyboardNavigableListScrollTop","setHeightCache"]),this.debouncedOnVirtualizedContainerScroll=Object(Ca.a)(this.onVirtualizedContainerScroll,150)}componentDidMount(){!this.props.featureSearchResultsVirtualized&&this.props.scrollPosition&&(this.wrapperRef.current.scrollTop=this.props.scrollPosition),this.logTelemetry()}componentDidUpdate(e){e.loading===this.props.loading&&e.errorType===this.props.errorType||this.logTelemetry()}componentWillUnmount(){this.props.setScrollPosition(this.scrollPosition),this.props.featureSearchResultsVirtualized&&this.setHeightCache(this.layout.heightCache.heights)}onScroll(){this.updateScrollPosition(this.wrapperRef.current.scrollTop)}onVirtualizedContainerScroll(e,{scrollTop:t}){this.updateScrollPosition(t)}onItemKeyDown(e){if(e.keyCode===ba()("enter")){const t=e.currentTarget.querySelector("a,button");if(!t)return;t.click()}}onResize({width:e}){e!==this.virtualListWidth&&this.heightCache.invalidate(),this.virtualListWidth=e}setKeyboardNavigableListScrollTop(e){this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current&&this.keyboardNavigableListRef.current.node&&this.keyboardNavigableListRef.current.node.scroller&&(this.keyboardNavigableListRef.current.node.scroller.scrollTop=e)}getToastOffset(){const e=window.innerWidth,t=window.innerHeight,a=this.wrapperRef.current?this.wrapperRef.current.getBoundingClientRect():{right:e,top:t};return{offsetX:24+e-a.right,offsetY:24+t-a.bottom}}setHeightCache(e){this.props.setHeightCache({heights:e})}logTelemetry(){const e=this.props.module.replace(/\./g,"_");if(this.props.loading)this.props.telemeter.count(`search_ui_${e}_view_loading`);else switch(this.props.errorType){case A.g.None:this.props.telemeter.count(`search_ui_${e}_view`);break;case A.g.NoQuery:this.props.telemeter.count(`search_ui_${e}_error_noquery`);break;case A.g.Timeout:this.props.telemeter.count(`search_ui_${e}_error_timeout`);break;case A.g.RenderErrorCaught:this.props.telemeter.count(`search_ui_${e}_error_render`);break;case A.g.Unknown:this.props.telemeter.count(`search_ui_${e}_error_unknown`);break;default:this.props.telemeter.count(`search_ui_${e}_unknown`)}}scrollTop(){this.props.logInfo(Aa,"Scrolling to top of results page"),this.topScrollElementRef.current&&(this.updateScrollPosition(0),this.props.featureSearchResultsVirtualized?this.setKeyboardNavigableListScrollTop(0):this.wrapperRef.current.scrollTop=0)}updateScrollPosition(e){this.scrollPosition=e,this.setState(e=>{const t=this.scrollPosition<Ra;return e.isScrolledTop!==t?{isScrolledTop:t}:null})}render(){var e=this.props;const t=e.errorType,a=e.loading,n=e.filterUI,r=e.id,i=e.children,l=e.emptyResultsTitle,c=e.numResults,d=e.sortDropdown,u=e.onClickRefreshSearch,p=e.alertHeader,h=e.userQuery,m=e.showNumResults,b=!this.props.usePrimarySearch||!this.props.secondaryView,f=this.state.isScrolledTop;if(this.props.featureSearchResultsVirtualized)return s.a.createElement("div",{className:"c-search__results--virtualized"},s.a.createElement(Oa.a,{onResize:this.onResize},({width:e,height:t})=>s.a.createElement(ka.b,{containerClassName:"c-search__results_container--virtualized",ref:this.keyboardNavigableListRef,keys:this.props.rowKeys,layout:this.layout,rowRenderer:this.props.rowRenderer,isFocusableItem:this.props.rowFocusability,height:t,width:e,onScroll:this.debouncedOnVirtualizedContainerScroll,initialScrollTop:this.props.scrollPosition,onItemKeyDown:this.onItemKeyDown,onFocusEnter:this.props.onFocusEnter,onFocusLeave:this.props.onFocusLeave,getPropsForItem:this.props.getPropsForItem,siblingNode:b&&s.a.createElement("div",{className:"c-search__extras--virtualized",ref:this.topScrollElementRef},s.a.createElement("div",{className:"c-search__section"},s.a.createElement("h4",{className:o()("c-search__section_header",!this.props.showNumResults&&"c-search__section_header--compact")},Na.t("Filter by")),n)),hideHiddenStopTabs:!0})),!f&&s.a.createElement(Ta,{onClick:this.scrollTop}));const _=c?Na.rt("{totalItemCount, plural, =1 {{totalItemCountStr} result} other {{totalItemCountStr} results}}",{totalItemCount:c,totalItemCountStr:z(c)}):null,g=!a&&t===A.g.NoQuery,y=!a&&!g&&t!==A.g.None,O=!!h,C=!(a||g||y||c),v=!a&&!g&&!y&&c>0,E=a||c>0;return s.a.createElement("div",{className:"c-search__results",onScroll:this.onScroll,ref:this.wrapperRef},p,s.a.createElement("div",{className:o()("c-search__view",{"c-search__view--hide_filters":!b}),id:r,role:"tabpanel"},s.a.createElement("div",{className:"c-search__section c-search__main"},s.a.createElement("h4",{className:o()("c-search__section_header",!m&&"c-search__section_header--compact")},g&&Na.t("Search for messages, files, and more",{fallbackHash:"8d886c0ba6f2b683daba5f19568a316226ce3e4c"}),y&&Na.t("Something went wrong"),C&&l,m&&s.a.createElement("span",null,v&&_),E&&s.a.createElement("div",{className:"c-search__section_more_link","data-qa":"search_sort_toggle"},d)),a&&s.a.createElement(va.a,{size:"large"}),g&&s.a.createElement("p",null,Na.t("To start your search, simply type into the box above.",{fallbackHash:"e0a09e2db4a36cd1de53ef2d911b8faa689b8983"})),y&&s.a.createElement("p",null,Na.t("For some reason, Slack wasn\u2019t able to complete your search."),"\xa0",O&&s.a.createElement(Se.a,{"data-qa":"search-retry",onClick:u},Na.t("Try again"))),C&&i,v&&i),b&&s.a.createElement("div",{className:"c-search__extras",ref:this.topScrollElementRef},s.a.createElement("div",{className:"c-search__section"},s.a.createElement("h4",{className:o()("c-search__section_header",!this.props.showNumResults&&"c-search__section_header--compact")},Na.t("Filter by")),n)),!f&&s.a.createElement(Ta,{onClick:this.scrollTop})))}}search_results_container_SearchResultsContainerBase.displayName="SearchResultsContainerBase",search_results_container_SearchResultsContainerBase.defaultProps={id:void 0,children:void 0,filterUI:void 0,numResults:void 0,emptyResultsTitle:void 0,sortDropdown:void 0,alertHeader:void 0,loading:!1,module:"unknown",errorType:A.g.None,secondaryView:void 0,setScrollPosition:_.a,onClickRefreshSearch:_.a,scrollPosition:0,userQuery:void 0,logInfo:_.a,usePrimarySearch:!1,telemeter:pe.d,featureSearchResultsVirtualized:!1,rowRenderer:_.a,rowKeys:[],rowFocusability:_.a,heightCache:{},setHeightCache:_.a,onFocusEnter:_.a,onFocusLeave:_.a,getPropsForItem:_.a,showNumResults:!0};const Ma={setHeightCache:(...e)=>Object(S.p)(...e)};var Pa=Object(l.b)(e=>{const t=Object(x.c)(e,"search_tab_counts");return{logInfo:Object(k.a)({state:e}).info,usePrimarySearch:Object(d.a)(e),userQuery:Object(he.d)(e),secondaryView:Object(Ea.j)(e),telemeter:Object(pe.c)({state:e}),featureSearchResultsVirtualized:Object(C.m)(e,"feature_search_results_virtualized"),heightCache:Object(c.f)(e),showNumResults:"counts"!==t&&"counts_and_sort"!==t}},Ma,null,{withRef:!0})(search_results_container_SearchResultsContainerBase),xa=a("sk9p"),La=a.n(xa),Fa=a("WD4z"),Da=a("Atrf");a("YlHk");const Ba=new q.b("search"),Ua=1e4,qa=3,Ha=(r.default.bool,r.default.number,r.default.arrayOf(r.default.shape({id:r.default.string.isRequired}).isRequired),r.default.shape({id:r.default.string}),r.default.shape({track:r.default.func.isRequired}).isRequired,{featurePersSearchMsgLimitWarningI18N:!1,hiddenMessagesCount:void 0,hiddenUsers:[],currentUser:{}});class hidden_messages_banner_HiddenMessagesBanner extends n.PureComponent{constructor(e){super(e),Object(y.a)(this,["getBannerData","clogClick"]),this.impressionClogged=!1}getBannerData(){var e=this.props,t=e.currentUser;const a=void 0===t?{}:t;var n=e.hiddenUsers;const s=(void 0===n?[]:n).slice(0,qa);let r;const i=[];let o=0,l=!1;return s.forEach(e=>{e.id===a.id?r=e:i.push(e),Object(Et.Z)(e)&&(o+=1)}),{currentUserToDisplay:r,otherUsersToDisplay:i,shouldDisplayAvatars:l=o===qa}}getFormattedMessagesCount(){const e=this.props.hiddenMessagesCount,t=e<Ua?Object(K.a)(e):Object(V.a)(e,{precision:4,decimal_places:0,lowercase:!0});return s.a.createElement("span",{"data-qa":"banner_hidden_messages_message_count"},t)}getClogStepVariantString(){var e=this.getBannerData();const t=e.currentUserToDisplay,a=e.shouldDisplayAvatars;let n="";switch(this.props.hiddenUsers.length){case 0:n="0_users";break;case 1:n="1_user";break;case 2:n="2_users";break;case 3:n="3_users";break;default:n="more_than_3_users"}return t&&(n+="_incl_current"),a&&(n+="_with_avatars"),n}clogImpression(){this.impressionClogged||(this.clog(sa.UiAction.IMPRESSION,sa.ElementType.BANNER,"banner"),this.impressionClogged=!0)}clogClick(){this.clog(sa.UiAction.CLICK,sa.ElementType.LINK,"cta")}clog(e,t,a){this.props.clogger.track(sa.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:sa.UiStep.SEARCH_PANE,action:e,ui_component:sa.UiComponent.HIDDEN_MESSAGES_BANNER,ui_properties:{element_type:t,element_name:a,step_variant:this.getClogStepVariantString()}}}})}renderBannerMessage({currentUserToDisplay:e,otherUsersToDisplay:t}){var a=this.props;const n=a.featurePersSearchMsgLimitWarningI18N,r=a.hiddenMessagesCount,i=a.hiddenUsers;if(!n)return null;var o=t.map(({id:e})=>s.a.createElement(Da.a,{key:e,id:e,noLinking:!0})),l=La()(o,3);const c=l[0],d=l[1],u=l[2],p=({tag:e,text:t})=>{if("a"!==e)return null;const a=Object(ra.k)({entryPoint:"hidden_messages_banner"});return s.a.createElement(Se.a,{href:a,onClick:this.clogClick,"data-qa":"banner_hidden_messages_upgrade_cta"},t)};let h;switch(i.length){case 0:h=Ba.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:r,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),fallbackHash:"49cf70bf4860e256ac4ad7c39249c1d905e1278b"},p);break;case 1:h=e?Ba.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:r,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),fallbackHash:"49cf70bf4860e256ac4ad7c39249c1d905e1278b"},p):Ba.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> from {user1Handle} that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:r,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:c,fallbackHash:"e0e00b306fcf1dc9be2f8968aba4c663a998fdd2"},p);break;case 2:h=e?Ba.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle} and yourself.",{hiddenMessagesCount:r,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:c,fallbackHash:"db9c908e896007c4ca03a95d22a348bfdc3606b3"},p):Ba.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle} and {user2Handle}.",{hiddenMessagesCount:r,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:c,user2Handle:d,fallbackHash:"f75fc3a0de5cbbd8192386c8f8dbad5c6aefc555"},p);break;case 3:h=e?Ba.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, and yourself.",{hiddenMessagesCount:r,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:c,user2Handle:d,fallbackHash:"027a3831dd2785910794440ff4a2fdf825866666"},p):Ba.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, and {user3Handle}.",{hiddenMessagesCount:r,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:c,user2Handle:d,user3Handle:u,fallbackHash:"0834aed47d2f532db9ac4251f198eb17d1e60de4"},p);break;default:h=e?Ba.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, yourself, and other teammates.",{hiddenMessagesCount:r,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:c,user2Handle:d,fallbackHash:"1b18372df292c706b9c8e6b0344379fc91fb2cb4"},p):Ba.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, {user3Handle}, and other teammates.",{hiddenMessagesCount:r,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:c,user2Handle:d,user3Handle:u,fallbackHash:"fe9326538241a04ce8b934d622e15e3cee334dc2"},p)}return s.a.createElement("div",{className:"p-hidden_messages_banner__text","data-qa":"banner_hidden_messages_text"},h)}renderAvatars({currentUserToDisplay:e,otherUsersToDisplay:t}){const a=(e?[...t,e]:t).map(({id:e})=>s.a.createElement(fe.c,{key:e,userId:e,ariaHidden:"true",size:36,isInteractive:!1,tabIndex:"-1",className:"p-hidden_messages_banner__avatar","data-qa":"banner_hidden_messages_avatar"}));return s.a.createElement("div",{className:"p-hidden_messages_banner__avatars","data-qa":"banner_hidden_messages_avatars"},a)}render(){if(!(this.props.hiddenMessagesCount>0))return null;const e=this.getBannerData();return this.clogImpression(),s.a.createElement(Fa.a,{type:"custom",level:"warning",className:"p-hidden_messages_banner","data-qa":"banner_hidden_messages"},s.a.createElement("div",{className:"p-hidden_messages_banner__content"},e.shouldDisplayAvatars&&this.renderAvatars(e),this.renderBannerMessage(e)))}}hidden_messages_banner_HiddenMessagesBanner.displayName="HiddenMessagesBanner",hidden_messages_banner_HiddenMessagesBanner.defaultProps=Ha;var Wa=Object(l.b)(e=>{const t=Object(P.l)(e)||{from:[]},a=[];return t.from.forEach(t=>{a.push(Object(Qe.d)(e,t.id))}),{featurePersSearchMsgLimitWarningI18N:Object(C.m)(e,"feature_pers_search_msg_limit_warning_i18n"),currentUser:Object(Qe.b)(e),hiddenUsers:a,hiddenMessagesCount:t.count,clogger:Object(ia.a)({state:e})}})(hidden_messages_banner_HiddenMessagesBanner),Ga=a("vP1t"),Ka=a("lek6"),Va=a("RAhH"),za=a("qkTT"),$a=a("xE6W"),Ya=a("Yujr"),Qa=a("7E97"),Xa=a("Qrgz");a("PIS5");const Ja=new q.b("search"),Za="IMPROVED_SEARCH",en=(r.default.object.isRequired,r.default.string.isRequired,r.default.string,r.default.string.isRequired,r.default.string,r.default.string,r.default.number.isRequired,r.default.string,r.default.func,r.default.func,r.default.func,r.default.bool,r.default.bool,r.default.string,r.default.bool,r.default.string,r.default.object,r.default.object,{joinState:"",leaveState:"",justification:null,onClickLeave:_.a,onClickJoin:_.a,onClickChannel:_.a,canJoinChannel:!0,canLeaveChannel:!0,canLeaveChannelReason:"",channelPreviousName:null,useChannelEntity:!1,iid:"unknown",logger:{error:_.a},telemeter:{count:_.a}});class channel_search_result_ChannelSearchResult extends s.a.Component{constructor(e){super(e),Object(y.a)(this,["onFocus","onBlur","onClickJoin","onClickLeave","onActionButtonFocus","onActionButtonBlur","onActionsMouseEnter","onActionsMouseLeave","onInteractionButtonClick","onInteractionButtonFocus","onInteractionButtonBlur"]),this.state={didCatch:!1,hasFocus:!1,hasActionFocus:!1,hasActionHover:!1},this.interactionTooltipRef=s.a.createRef(),this.rootRef=s.a.createRef(),this.hasRenderedNonexistentChannel=!1}static getDerivedStateFromError(){return{didCatch:!0}}onFocus(){this.setState(()=>({hasFocus:!0}))}onBlur(){this.setState(()=>({hasFocus:!1}))}onInteractionButtonClick(e){e.preventDefault(),e.stopPropagation()}onInteractionButtonFocus(){this.interactionTooltipRef.current&&this.interactionTooltipRef.current.showTip()}onInteractionButtonBlur(){this.interactionTooltipRef.current&&this.interactionTooltipRef.current.hideTip()}onActionButtonFocus(e){this.setState(()=>({hasActionFocus:!0})),e.target.parentNode.scrollTop=0}onActionButtonBlur(){this.setState(()=>({hasActionFocus:!1}))}onActionsMouseEnter(){this.setState(()=>({hasActionHover:!0}))}onActionsMouseLeave(){this.setState(()=>({hasActionHover:!1}))}onClickJoin(e){this.props.onClickJoin(e).then(()=>{this.updateFocusState()})}onClickLeave(e){this.props.onClickLeave(e).then(()=>{this.updateFocusState()})}componentDidCatch(e,t){this.props.telemeter.count("search_ui_channels_result_channel_render_error"),this.props.logger.error(Za,`Error caught by ChannelSearchResult ${t.componentStack}`,e)}updateFocusState(){this.rootRef&&this.rootRef.current&&this.setState(()=>({hasFocus:this.rootRef.current.contains(document.activeElement)}))}trackNonExistentChannelRender(){this.hasRenderedNonexistentChannel||(this.hasRenderedNonexistentChannel=!0,this.props.telemeter.count("search_channels_nonexistent_channel_rendered",1),this.props.logger.error("Channel search displayed nonexistent channel",{channelId:this.props.channel.id,iid:this.props.iid},{subtype:"search_channels"}))}renderError(){const e=this.props.onClickChannel;return s.a.createElement("div",{className:"c-channel_search_result","data-qa":"channel_search_result"},s.a.createElement("div",{role:"presentation",onClick:e},s.a.createElement("div",{className:"c-channel_search_result__channel"},s.a.createElement("div",{className:"c-channel_search_result__name_error"},s.a.createElement($a.a,{type:"unknown"})),s.a.createElement("div",null,Ja.t("For some reason, Slack wasn\u2019t able to fetch info about this channel.")))))}render(){if(this.state.didCatch)return this.renderError();var e=this.props;const t=e.channel,a=e.channelTeamName,n=e.channelPreviousName,r=e.memberCount,i=e.joinState,l=e.leaveState,c=e.justification,d=e.onClickChannel,u=e.useChannelEntity,p=Ja.t("Required"),h=Ja.t("Archived"),m=Ja.t("Can\u2019t leave"),b=Ja.t("Another workspace"),f=Ja.t("Can\u2019t leave"),_=Ja.t("Your organization requires everyone to be in this channel."),g=Ja.t("You can\u2019t join an archived channel, but you can view and search its contents."),y=Ja.t("To join this channel, you\u2019ll need to switch to the {channelTeamName} workspace.",{channelTeamName:a}),O=Ja.t("To leave this channel, you\u2019ll need to switch to the {channelTeamName} workspace.",{channelTeamName:a}),C=Ja.t("For some reason, you can\u2019t currently change your membership for {channelName}.",{channelName:this.props.channelName}),v=Ja.t("As a guest, you can\u2019t leave the channel you were invited to."),E=Ja.t("As a guest, you need to be in at least one channel."),k=Object(re.ob)(t),S="loading"===i,j="loading"===l,I=k&&this.props.canLeaveChannel;let w=null,T=null;if(k&&!I){switch(this.props.canLeaveChannelReason){case Xa.b.LAST_MEMBER:break;case Xa.b.USER_IS_RESTRICTED:w=m,T=v;break;case Xa.b.USER_IS_RESTRICTED_LAST_CHANNEL:case Xa.b.USER_IS_ULTRA_RESTRICTED:w=m,T=E;break;case Xa.b.CANT_LEAVE_GENERAL:case Xa.b.CANT_LEAVE_MANDATORY_SHARED_CHANNEL:w=p,T=_;break;case Xa.b.USER_NOT_FOUND:case Xa.b.CHANNEL_NOT_FOUND:default:w=f,T=C}Object(re.db)(t)&&(w=b,T=O)}else Object(re.Y)(t)?(w=h,T=g):Object(re.db)(t)?k?(w=b,T=O):(w=b,T=y):k||this.props.canJoinChannel||(w=f,T=C);const N=!Object(re.Ob)(t)&&w&&T,A=!(Object(re.Ob)(t)||w&&T),R=Object(re.sb)(t);return R?(this.trackNonExistentChannelRender(),this.renderError()):s.a.createElement("div",{className:o()("c-channel_search_result",{"c-channel_search_result--focused":this.state.hasFocus,"c-channel_search_result--show_suffix":!(this.state.hasActionFocus||this.state.hasActionHover),"c-channel_search_result--can_leave":I}),ref:this.rootRef,onFocus:this.onFocus,onBlur:this.onBlur,"data-qa":"channel_search_result"},s.a.createElement("div",{role:"presentation",onClick:d},!R&&(u?s.a.createElement(Ya.a,{className:"c-channel_search_result__channel",channel:t,bestFormerName:n,onClick:d,inlineNameSuffix:Ja.t("View channel"),nameSuffix:N&&s.a.createElement("div",{className:"c-channel_search_result__inaction_label","data-qa":"channel_search_result_inaction_label"},s.a.createElement(Va.c,{tip:T,ref:this.interactionTooltipRef},s.a.createElement(W.c,{"aria-disabled":"true",className:"c-channel_search_result__inaction_label_button",onClick:this.onInteractionButtonClick,onFocus:this.onInteractionButtonFocus,onBlur:this.onInteractionButtonBlur},w," ",s.a.createElement(G.b,{type:"info-circle",size:"inherit"})))),showUnreadBadge:!0,metadata:s.a.createElement("div",{className:"c-channel_search_result__metadata","data-qa":"channel_search_result_metadata"},Ja.t("{count, plural, =1 {# member} other {# members}}",{count:r}),c&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"c-channel_search_result__vline"}),s.a.createElement(G.b,{type:"sparkles-filled",size:"inherit",className:"c-channel_search_result__justification_icon"})," ",s.a.createElement(Ka.a,{className:"c-channel_search_result__justification",text:c,emojiSize:za.a.MEDIUM,showTooltips:!1,noHighlights:!0})))}):s.a.createElement(Qa.a,{size:"medium",className:"c-channel_search_result__channel",channel:t,bestFormerName:n,onClick:d,inlineNameSuffix:Ja.t("View channel"),nameSuffix:N&&s.a.createElement("div",{className:"c-channel_search_result__inaction_label","data-qa":"channel_search_result_inaction_label"},s.a.createElement(Va.c,{tip:T,ref:this.interactionTooltipRef},s.a.createElement(W.c,{"aria-disabled":"true",className:"c-channel_search_result__inaction_label_button",onClick:this.onInteractionButtonClick,onFocus:this.onInteractionButtonFocus,onBlur:this.onInteractionButtonBlur},w," ",s.a.createElement(G.b,{type:"info-circle",size:"inherit"})))),showUnreadBadge:!0,metadata:s.a.createElement("div",{className:"c-channel_search_result__metadata","data-qa":"channel_search_result_metadata"},Ja.t("{count, plural, =1 {# member} other {# members}}",{count:r}),c&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"c-channel_search_result__vline"}),s.a.createElement(G.b,{type:"sparkles-filled",size:"inherit",className:"c-channel_search_result__justification_icon"})," ",s.a.createElement(Ka.a,{className:"c-channel_search_result__justification",text:c,emojiSize:za.a.MEDIUM,showTooltips:!1,noHighlights:!0})))}))),A&&s.a.createElement("div",{className:"c-channel_search_result__actions","data-qa":"channel_search_result_actions",onMouseEnter:this.onActionsMouseEnter,onMouseLeave:this.onActionsMouseLeave},s.a.createElement(W.b,{type:"danger",className:"c-channel_search_result__action_leave","data-qa":"leave-channel",loading:j,onClick:this.onClickLeave,onFocus:this.onActionButtonFocus,onBlur:this.onActionButtonBlur},j?Ja.t("Leaving..."):Ja.t("Leave")),s.a.createElement("div",{className:o()("c-button","c-button--medium","c-button--primary","c-channel_search_result__joined_indicator")},Ja.t("Joined")),s.a.createElement(W.b,{type:"outline-primary",className:"c-channel_search_result__action_join","data-qa":"join-channel",loading:S,onClick:this.onClickJoin,onFocus:this.onActionButtonFocus,onBlur:this.onActionButtonBlur},S?Ja.t("Joining..."):Ja.t("Join")),s.a.createElement("div",{className:"c-button c-button--medium c-button--primary c-channel_search_result__width_placeholder"},Ja.t("Joined")),s.a.createElement("div",{className:"c-button c-button--medium c-button--outline-primary c-channel_search_result__width_placeholder"},Ja.t("Join")),s.a.createElement("div",{className:"c-button c-button--medium c-button--danger c-channel_search_result__width_placeholder"},Ja.t("Leave")),s.a.createElement(W.b,{type:"danger",className:"c-channel_search_result__width_placeholder",loading:!0,role:"presentation"},Ja.t("Leaving...")),s.a.createElement(W.b,{type:"outline-primary",className:"c-channel_search_result__width_placeholder",loading:!0,role:"presentation"},Ja.t("Joining..."))))}}channel_search_result_ChannelSearchResult.displayName="ChannelSearchResult",channel_search_result_ChannelSearchResult.defaultProps=en;var tn=Object(l.b)((e,{channel:t,channelData:a})=>{const n=b()({},t,{name:a.name,purpose:a.purpose}),s=Object(Xa.j)(e,a.id),r=Object(M.d)(e);return{useChannelEntity:"channel_search_new_entity"===Object(x.c)(e,"channel_search_new_entity"),channel:Object(re.Ob)(t)?t:n,channelName:Object(re.x)(e,t),channelPreviousName:a.previous_name,channelTeamName:Object(U.e)(Object(re.db)(t)?Object(M.i)(e,Object(re.ac)(e,t)):r),isMember:Object(re.db)(t)?Object(re.ob)(t):a.is_member,memberCount:a.member_count,justification:a.justification,joinState:Object(c.a)(e,a.id),leaveState:Object(c.b)(e,a.id),canJoinChannel:Object(Xa.f)(e,a.id),canLeaveChannel:s.ok,canLeaveChannelReason:s.reason,logger:Object(k.a)({state:e}),telemeter:Object(pe.c)({state:e})}})(channel_search_result_ChannelSearchResult),an=a("ipyK"),nn=a("Muja"),sn=a("IF1j"),rn=a("hCvz"),on=a("Cudy"),ln=a("Apsv"),cn=a("mOAw"),dn=a("O/xh"),un=a("ZYn4"),pn=a("zZZw"),hn=a("1zbP"),mn=a("e9Nc"),bn=a("BrU6");const fn=Object(I.b)("People search result top terms clicked",(e,t,{member:a}={})=>{const n=t(),s=`${Object(he.b)(n)} ${Object(mn.b)(n,a)}`;return e(Object(bn.a)({textyString:s,queryIsUserGenerated:!1})).then(()=>(e(Object(S.I)({tab:"messages"})),e(Object(P.y)({query:s}))))});fn.meta={name:"peopleSearchRefineTopTerms",key:"actionsUniversalSearchPeopleSearchTopTermsPeopleSearchRefineTopTerms",description:"People search result top terms clicked"},fn.propTypes={member:r.default.object.isRequired};a("Bui7");const _n=new q.b("member_profile"),gn="IMPROVED_SEARCH",yn=(r.default.bool.isRequired,r.default.string,r.default.object.isRequired,r.default.object.isRequired,r.default.arrayOf(r.default.shape({label:r.default.string.isRequired,name:r.default.string.isRequired,type:r.default.string.isRequired})).isRequired,r.default.objectOf(r.default.string).isRequired,r.default.string,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.object,r.default.object,{iid:"",displayQuery:"",onClickMember:_.a,clogSearchPeopleClick:_.a,startImByMemberId:_.a,closeSearch:_.a,onClickTopTerms:_.a,showMemberProfile:_.a,onNavigateError:_.a,onViewProfileError:_.a,logger:{error:_.a},telemeter:pe.d}),On=e=>s.a.createElement(Ka.a,{emojiSize:za.a.SMALL,text:e,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noEmojiText:!0,noHexColors:!0,noCode:!0,noQuotes:!0,noHighlights:!0});On.displayName="renderSearchHighlightText";const Cn=()=>/[\ue000\ue001]/g,vn=e=>Cn().test(e);class people_search_result_PeopleSearchResult extends s.a.Component{constructor(e){super(e),Object(y.a)(this,["onClickMemberName","onClickMember","onFocusResult","onBlurResult","onFocusPerson","onBlurPerson","onClickShowMore","onClickNavigate","onClickViewProfile","onInfoTooltipClick","onInfoTooltipFocus","onInfoTooltipBlur","onClickTopTerms"]),this.infoTooltipRef=s.a.createRef(),this.state={didCatch:!1,resultHasFocus:!1,personHasFocus:!1,isExpanded:!1}}static getDerivedStateFromError(){return{didCatch:!0}}shouldComponentUpdate(e,t){return!Object(nn.a)(this.props,e)||!Object(nn.a)(this.state,t)}onFocusResult(){this.setState(()=>({resultHasFocus:!0}))}onBlurResult(){this.setState(()=>({resultHasFocus:!1}))}onFocusPerson(){this.setState(()=>({personHasFocus:!0}))}onBlurPerson(){this.setState(()=>({personHasFocus:!1}))}onClickMember(e){e.isDefaultPrevented()||this.props.onClickMember(e)}onClickMemberName(e){e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:w.c.avatar,iid:this.props.iid,userId:this.props.member.id}),this.props.featureReactMemberProfileCard||(e.persist(),Object(cn.a)(e,this.props.member.id))}onClickShowMore(e){e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:w.c.showMore,iid:this.props.iid,userId:this.props.member.id}),this.setState(()=>({isExpanded:!0}))}onClickNavigate(e){e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:w.c.navigateToMessages,iid:this.props.iid,userId:this.props.member.id}),this.props.startImByMemberId({memberId:this.props.member.id}).then(()=>{this.props.closeSearch()}).catch(t=>{throw this.props.onNavigateError(()=>this.onClickNavigate(e)),t})}onClickViewProfile(e){e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:w.c.viewProfile,iid:this.props.iid,userId:this.props.member.id}),this.props.showMemberProfile({memberId:this.props.member.id}).then(()=>{this.props.closeSearch()}).catch(t=>{throw this.props.onViewProfileError(()=>this.onClickViewProfile(e)),t})}onClickTopTerms(e){e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:w.c.topTerms,iid:this.props.iid,userId:this.props.member.id}),this.props.onClickTopTerms({member:this.props.member})}onInfoTooltipClick(e){e.preventDefault(),e.stopPropagation()}onInfoTooltipFocus(){this.infoTooltipRef.current&&this.infoTooltipRef.current.showTip()}onInfoTooltipBlur(){this.infoTooltipRef.current&&this.infoTooltipRef.current.hideTip()}getRenderingData(){var e=this.props;const t=e.member,a=e.memberWithHighlights,n=e.teamCustomProfileFields,r=e.customProfileFieldMemberNamesById,i=Object(Et.xb)(t),o=!!a.top_terms,l=Object(Et.K)(a),c=Object(Et.F)(a),d=Object(Et.S)(a),u=Object(Et.D)(a),p=Object(Et.v)(a),h=Object(Et.J)(a),m=Object(Et.E)(a),b=m&&m.status_emoji,f=m&&m.status_text;if(i)return{rows:[],realName:l,memberTitle:d};let _=[];if(c&&l!==c&&vn(c)&&_.push({className:null,key:"displayname",term:_n.t("Display name",{ns:"member_profile"}),valueAsText:c,node:On(c)}),p&&vn(p)&&_.push({className:null,key:"email",term:_n.t("Email address",{ns:"member_profile"}),valueAsText:p,node:On(p)}),u&&vn(u)&&_.push({className:null,key:"phone",term:_n.t("Phone number",{ns:"member_profile"}),valueAsText:u,node:On(u)}),b&&vn(b)||f&&vn(f)){const e=[];b&&e.push(b),f&&e.push(f);const t=e.join(" ");_.push({className:null,key:"status",term:_n.t("Status",{ns:"member_profile"}),valueAsText:t,node:On(t)})}return n.forEach(e=>{const t=e.name;if(h&&h[t]&&h[t].value&&Cn().test(h[t].value))if("user"===e.type){const a=h[t].value.split(","),n=Object(pn.a)(a.map(e=>{const t=vn(e),a=e.replace(Cn(),"");return t?`\ue000${r[a]}\ue001`:r[a]}),{noConj:!0}).join("");_.push({className:null,key:t,term:e.label,valueAsText:n,node:On(n)})}else"link"!==e.type&&_.push({className:null,key:t,term:e.label,valueAsText:h[t].value,node:On(h[t].value)})}),o&&_.push({className:"p-people_search_result__row--top_terms",key:"top_terms",term:null,valueAsText:"top_terms",node:s.a.createElement("span",{className:"p-people_search_result__top_terms"},s.a.createElement(G.b,{className:"p-people_search_result__top_terms_sparkles",type:"sparkles_filled",inline:!0,size:"inherit"}),s.a.createElement(It.a,{className:"p-people_search_result__top_terms_link","data-qa":"people_search_result__top_terms_link",onClick:this.onClickTopTerms},_n.rt("Talks about \u201c{query}\u201d",{query:s.a.createElement(Ka.a,{className:"p-people_search_result__top_terms_term",emojiSize:za.a.SMALL,text:this.props.displayQuery,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noHexColors:!0,noCode:!0,noQuotes:!0,noHighlights:!0})})),s.a.createElement(Va.c,{tip:_n.t("Based on public channels and conversations with you"),ref:this.infoTooltipRef},s.a.createElement(Ie.a,{"aria-disabled":"true",className:"p-people_search_result__top_terms_info",onClick:this.onInfoTooltipClick,onFocus:this.onInfoTooltipFocus,onBlur:this.onInfoTooltipBlur},s.a.createElement(G.b,{type:"info-circle",inline:!0,size:"inherit"}))))}),{rows:_=Object(an.a)(_,(e,t)=>e.term===t.term&&e.valueAsText===t.valueAsText),realName:l,memberTitle:d}}componentDidCatch(e,t){this.props.telemeter.count("search_ui_people_result_people_render_error"),this.props.logger.error(gn,`Error caught by PeopleSearchResult ${t.componentStack}`,e)}render(){var e=this.props;const t=e.member,a=e.featureReactMemberProfileCard,n=Object(Et.P)(t),r=Object(Et.ib)(t),i=Object(Et.mb)(t),l=Object(Et.Kb)(t),c=Object(Et.tb)(t),d=Object(Et.Hb)(t),u=Object(hn.c)(t),p=Object(hn.d)(t),h=Object(Et.xb)(t);if(this.state.didCatch||u)return s.a.createElement("div",{className:"p-people_search_result p-people_search_result--non_existent"},s.a.createElement("div",{className:"p-people_search_result__person"},s.a.createElement("div",{className:"p-people_search_result__avatar_placeholder"}),s.a.createElement("div",{className:"p-people_search_result__body"},_n.t("For some reason, Slack wasn\u2019t able to display this result."))));if(p)return s.a.createElement("div",{className:"p-people_search_result p-people_search_result--unknown"},s.a.createElement("div",{className:"p-people_search_result__person"},s.a.createElement("div",{className:"p-people_search_result__avatar_placeholder"}),s.a.createElement("div",{className:"p-people_search_result__body"},s.a.createElement("div",{className:"p-people_search_result__row"},s.a.createElement(rn.b,{size:"random"})),s.a.createElement("div",{className:"p-people_search_result__row"},s.a.createElement(rn.b,{size:"random"})))));let m;m=i||l?_n.t("View History"):_n.t("Message");var b=this.getRenderingData();const f=b.rows,_=b.realName,g=b.memberTitle,y=!!g||h,O=f.length>0,C=y?f.length>1:f.length>2,v=this.state.isExpanded?f.length:3,E=!this.state.isExpanded&&f.length>v;return s.a.createElement("div",{className:o()("p-people_search_result",{"p-people_search_result--has-focus":this.state.resultHasFocus}),onFocus:this.onFocusResult,onBlur:this.onBlurResult},s.a.createElement("div",{role:"presentation",onClick:this.onClickMember,"data-qa":"people_search_result"},s.a.createElement("div",{className:o()("p-people_search_result__person",{"p-people_search_result__person--has-focus":this.state.personHasFocus,"p-people_search_result__person--deactivated":i}),onFocus:this.onFocusPerson,onBlur:this.onBlurPerson},s.a.createElement(sn.c,{className:"p-people_search_result__avatar",size:70,user:t,userId:t.id,isExternal:c,teamId:n,isInteractive:!0,showCard:!0,showTooltip:!0,showBadge:!1,ariaHidden:"true",tabIndex:"-1"}),s.a.createElement("div",{className:o()("p-people_search_result__body",{"p-people_search_result__body--many_rows":C,"p-people_search_result__body--no_title":!y})},s.a.createElement("div",{className:"p-people_search_result__name","data-qa":"people_search_result__name"},a?s.a.createElement(dn.a,{userId:t.id,onClick:this.onClickMemberName},s.a.createElement(Ie.a,{className:"p-people_search_result__name_button","data-qa":"people_search_result__name_button"},s.a.createElement(on.a,{"data-qa":"name",name:On(_),isAppOrBot:r,isDeleted:i,isSelf:d,isNonExistent:u,isUnknown:p}))):s.a.createElement(Ie.a,{onClick:this.onClickMemberName,className:"p-people_search_result__name_button","data-qa":"people_search_result__name_button"},s.a.createElement(on.a,{"data-qa":"name",name:On(_),isAppOrBot:r,isDeleted:i,isSelf:d,isNonExistent:u,isUnknown:p})),!i&&s.a.createElement(un.a,{memberId:t.id,"data-qa":"people_search_result__presence",className:"c-member__presence"})),y&&s.a.createElement("div",{className:"p-people_search_result__title","data-qa":"people_search_result__title"},h?_n.t("Invited member",{fallbackHash:"c4649618a3f5b67c775775107529f167c8d739e5",fallbackHashNs:"members"}):On(g)),O&&s.a.createElement("div",{className:"p-people_search_result__rows","data-qa":"people_search_result__rows"},f.slice(0,v).map(e=>s.a.createElement("div",{key:e.key,className:o()("p-people_search_result__row",e.className),"data-qa":"people_search_result__row"},e.term&&s.a.createElement("b",{"data-qa":"people_search_result__term",className:"p-people_search_result__term"},e.term,":"," "),s.a.createElement("span",{"data-qa":"people_search_result__definition",className:"p-people_search_result__definition"},e.node)))),E&&!this.state.isExpanded&&s.a.createElement(It.a,{className:"p-people_search_result__show_more","data-qa":"people_search_result__show_more",onClick:this.onClickShowMore,"aria-expanded":"false"},_n.t("Show more\u2026"))))),s.a.createElement("div",{className:"p-people_search_result__actions"},s.a.createElement(W.d,{className:"p-people_search_result__action_button",type:"outline",size:"medium",onClick:this.onClickNavigate,"data-qa":"people_search_result__message-button"},m),s.a.createElement(W.d,{className:"p-people_search_result__action_button",type:"outline",size:"medium",onClick:this.onClickViewProfile,"data-qa":"people_search_result__profile-button"},_n.t("View Profile"))))}}people_search_result_PeopleSearchResult.displayName="PeopleSearchResult",people_search_result_PeopleSearchResult.defaultProps=yn;var En=Object(l.b)((e,{memberWithHighlights:t})=>{const a=Object(M.d)(e),n=Object(ln.a)(a),s=Object(Et.J)(t),r={};return s&&n.forEach(t=>{if("user"===t.type){const a=s&&s[t.name];a&&a.value&&a.value.split(",").forEach(t=>{const a=t.replace(/[\ue000\ue001]/g,""),n=Object(Qe.d)(e,a);r[a]=Object(Et.K)(n)})}}),{featureReactMemberProfileCard:Object(C.m)(e,"feature_react_member_profile_card"),teamCustomProfileFields:n,customProfileFieldMemberNamesById:r,displayQuery:Object(he.b)(e),logger:Object(k.a)({state:e}),telemeter:Object(pe.c)({state:e})}},e=>({clogSearchPeopleClick:(...t)=>e(Object(w.l)(...t)),closeSearch:(...t)=>e(Object(F.a)(...t)),onClickTopTerms:(...t)=>e(fn(...t))}))(people_search_result_PeopleSearchResult);const kn=new q.b("search"),Sn={HEADER:"search-result-header",RELATED_RESULTS_HEADER:"search-related-results-header",LOADING:"search-loading",BLANK:"search-blank",ERROR:"search-error",ERROR_RETRY:"search-error-retry",DEBUG:"search-debug-info",HIDDEN_MESSAGES:"search-hidden-messages-banner",MESSAGE_LIMIT_MESSAGES:"search-message-limit-banner-messages",MESSAGE_LIMIT_FILES:"search-message-limit-banner-files",NO_MESSAGE_RESULTS:"search-no-message-results",NO_MESSAGE_RESULTS_FUZZY_MATCH:"search-no-message-results-fuzzy-match",NO_FILE_RESULTS:"search-no-file-results",NO_CHANNEL_RESULTS:"search-no-channel-results",NO_PEOPLE_RESULTS:"search-no-people-results",MESSAGE_RESULT:"search-message-result",PAGER:"search-pager",FEEDBACK_LINK:"search-feedback-link",FILE_RESULT:"search-file-result",CHANNEL_RESULT:"search-channel-result",PEOPLE_RESULT:"search-people-result",PEOPLE_DISCOVERY:"search-people-discovery"},jn=(e,{isLoading:t,errorType:a,numResults:n,emptyResultsTitle:r,jumpToMessage:i,jumpToFile:o,onRepliesClick:l,sortDropdown:c,onClickRefreshSearch:d,onFeedbackClick:u,pageForward:p,pageBack:h,totalPageCount:m,currentPageOffset:f,onFileClick:_,clogLinkClick:g,onChannelClick:y,onChannelJoin:O,onChannelLeave:C,displayEmailAddresses:v,currentDisplayQuery:E,featureFantailNurture:S,startImByMemberId:j,showMemberProfile:I,onViewProfileError:w,onPeopleSearchResultNavigateError:T,getMemberClickHandler:N,telemeter:A,logger:R,showNumResults:M})=>P=>{const x=e[P];switch(x.type){case Sn.MESSAGE_RESULT:return s.a.createElement(Ge,b()({key:x.data.iid},x.data,{onMessageJump:i,onFileJump:o,onRepliesClick:l,telemeter:A,logger:R,index:x.data.index}));case Sn.FILE_RESULT:return s.a.createElement(Ga.a,{key:x.data.id,index:x.data.index,file:x.data,onClick:_,clickLinkClick:g});case Sn.CHANNEL_RESULT:return s.a.createElement(tn,{key:x.data.searchData.id,channel:x.data.flannelData,channelData:x.data.searchData,iid:x.data.searchData.iid,onClickChannel:y(x.data.searchData.iid,x.data.flannelData),onClickJoin:O(x.data.searchData.id),onClickLeave:C(x.data.searchData.id)});case Sn.PEOPLE_RESULT:return s.a.createElement(En,{key:x.data.member.id,iid:x.data.highlightData.iid,member:x.data.member,memberWithHighlights:x.data.highlightData,onClickMember:N(x.data.member.id),startImByMemberId:j,showMemberProfile:I,onViewProfileError:w,onNavigateError:T});case Sn.PEOPLE_DISCOVERY:return s.a.createElement("div",{className:"c-channel_search__new_feature_alert"},s.a.createElement(G.b,{className:"c-channel_search__new_feature_icon",type:"sparkles_filled"}),s.a.createElement("div",null,kn.rt("<strong>Find people at your organization</strong>. Now you can search for people by their name, profile info, or even the topics they talk about.",{fallbackHash:"07cbc99aff3e533e8b10d9bf430890987c65f7ae"})));case Sn.HEADER:return wn({isLoading:t,errorType:a,numResults:n,emptyResultsTitle:r,sortDropdown:c,showNumResults:M});case Sn.LOADING:return s.a.createElement(va.a,{size:"large"});case Sn.BLANK:return s.a.createElement("p",null,kn.t("To start your search, simply type into the box above.",{fallbackHash:"e0a09e2db4a36cd1de53ef2d911b8faa689b8983"}));case Sn.ERROR:return s.a.createElement("p",null,kn.t("For some reason, Slack wasn\u2019t able to complete your search."));case Sn.ERROR_RETRY:return s.a.createElement("p",null,kn.t("For some reason, Slack wasn\u2019t able to complete your search."),"\xa0",s.a.createElement(Se.a,{"data-qa":"search-retry",onClick:d},kn.t("Try again")));case Sn.DEBUG:return s.a.createElement("div",{className:"c-search__debug"},s.a.createElement("h4",{className:"c-search__section_header"},"Solr debug info"),s.a.createElement("pre",{className:"c-search__debug_json"},x.data),s.a.createElement(W.d,{className:"c-search__debug_copy",size:"small",type:"outline",onClick:()=>Object($.c)(x.data)},"Copy to clipboard"));case Sn.HIDDEN_MESSAGES:return s.a.createElement(Wa,null);case Sn.MESSAGE_LIMIT_MESSAGES:return s.a.createElement(ua,{type:"messages"});case Sn.MESSAGE_LIMIT_FILES:return s.a.createElement(ua,{type:"files"});case Sn.NO_MESSAGE_RESULTS:return Tn(!1);case Sn.NO_MESSAGE_RESULTS_FUZZY_MATCH:return Tn(!0);case Sn.NO_FILE_RESULTS:return Nn();case Sn.NO_CHANNEL_RESULTS:return An();case Sn.NO_PEOPLE_RESULTS:return Rn({displayEmailAddresses:v,currentDisplayQuery:E,featureFantailNurture:S});case Sn.RELATED_RESULTS_HEADER:return s.a.createElement("h4",{className:"c-search__section_header--virtualized"},kn.rt("{totalItemCount, plural, =1 {{totalItemCountStr} related result} other {{totalItemCountStr} related results}}",{totalItemCount:x.data,totalItemCountStr:z(x.data)}));case Sn.PAGER:return s.a.createElement($e,{currentPageOffset:f,totalPageCount:m,onForward:p,onBack:h,onFeedbackClick:u});case Sn.FEEDBACK_LINK:return s.a.createElement(Ke.a,{className:x.data>0?"c-search__feedback_small":"c-search__feedback",onClick:u});default:return Object(k.b)().warn(`Row type ${x.type} is not implemented for Search virtualization`,x),A.count("search_ui__result_row_render_error"),null}},In=e=>({index:t})=>{return"presentation"!==e[t].role};function wn({isLoading:e,errorType:t,numResults:a,emptyResultsTitle:n,sortDropdown:r,showNumResults:i}){const l=!e&&t===A.g.NoQuery,c=!e&&!l&&t!==A.g.None,d=!(e||l||c||a),u=!e&&!l&&!c&&a>0,p=e||a>0,h=a?kn.rt("{totalItemCount, plural, =1 {{totalItemCountStr} result} other {{totalItemCountStr} results}}",{totalItemCount:a,totalItemCountStr:z(a)}):null;return s.a.createElement("h4",{className:o()("c-search__section_header--virtualized",!i&&"c-search__section_header--compact")},l&&kn.t("Search for messages, files, and more",{fallbackHash:"8d886c0ba6f2b683daba5f19568a316226ce3e4c"}),c&&kn.t("Something went wrong"),d&&n,i&&s.a.createElement("span",null,u&&h),p&&s.a.createElement("div",{className:"c-search__section_more_link","data-qa":"search_sort_toggle"},r))}function Tn(e=!1){return e?s.a.createElement("p",null,kn.t("You may want to try using different keywords, checking for typos, or adjusting your filters.",{fallbackHash:"4a81ec18521572e71c7085ea0c159585442445d6"})):s.a.createElement(n.Fragment,null,s.a.createElement("p",null,kn.t("Slack couldn\u2019t find any messages related to your search. You may want to try\u2026")),Mn())}function Nn(){return s.a.createElement(n.Fragment,null,s.a.createElement("p",null,kn.t("Slack couldn\u2019t find any files related to your search. You may want to try\u2026")),Mn())}function An(){return s.a.createElement(n.Fragment,null,s.a.createElement("p",null,kn.t("Slack couldn\u2019t find any channels related to your search. You may want to try\u2026")),Mn())}function Rn({displayEmailAddresses:e,currentDisplayQuery:t,featureFantailNurture:a}){const r=t.replace(/<@[^>]*>/g,"").indexOf("@")>-1;return!e&&r&&a?s.a.createElement(n.Fragment,null,s.a.createElement("p",null,kn.t("Slack couldn\u2019t find any people related to your search.")),s.a.createElement("p",null,kn.t("Searching for people by email has been disabled in this workspace. Questions? Contact a Workspace Admin."))):s.a.createElement(n.Fragment,null,s.a.createElement("p",null,kn.t("Slack couldn\u2019t find any people related to your search. You may want to try\u2026")),Mn())}function Mn(){return s.a.createElement("ul",null,s.a.createElement("li",null,kn.t("Using different keywords.")),s.a.createElement("li",null,kn.t("Checking for typos.")),s.a.createElement("li",null,kn.t("Adjusting your filters.")))}wn.displayName="renderHeader",Tn.displayName="makeNoMessageResultsFragment",Nn.displayName="makeNoFileResultsFragment",An.displayName="makeNoChannelResultsFragment",Rn.defaultProps={displayEmailAddresses:!0,currentDisplayQuery:"",featureFantailNurture:!1},Mn.displayName="makeNoResultsSuggestions",wn.defaultProps={isLoading:!1,errorType:void 0,numResults:void 0,emptyResultsTitle:void 0,sortDropdown:_.a,showNumResults:!0};var Pn=({moduleName:e,messageResults:t=[],fileResults:a=[],peopleResults:n=[],channelSearchResults:s=[],channelFlannelMap:r={},isLoading:i,errorType:o,isDebugInfoVisible:l,debugInfo:c,bannerType:d,isFuzzyMatchEnabled:u,totalItemCount:p,isPagerVisible:h,userQuery:m,showPeopleDiscovery:f})=>{const _=[],g=!i&&o===A.g.NoQuery,y=!i&&!g&&o!==A.g.None,O=!!m,C=!i&&!g&&!y;return _.push({key:"search-result-header",type:Sn.HEADER,data:null,role:"presentation"}),i&&_.push({key:"search-loading",type:Sn.LOADING,data:null,role:"presentation"}),g&&_.push({key:"search-blank",type:Sn.BLANK,data:null,role:"presentation"}),y&&!O&&_.push({key:"error",type:Sn.ERROR,data:null,role:"presentation"}),y&&O&&_.push({key:"error-retry",type:Sn.ERROR_RETRY,data:null,role:"presentation"}),C&&"messages"===e&&(l&&c&&_.push({key:"solr-debug-info",type:Sn.DEBUG,data:JSON.stringify(c,null,2),role:"presentation"}),d===A.d&&_.push({key:"hidden-messages-banner",type:Sn.HIDDEN_MESSAGES,data:null,role:"presentation"}),d===A.e&&_.push({key:"message-limit-banner",type:Sn.MESSAGE_LIMIT_MESSAGES,data:null,role:"presentation"}),u&&(_.push({key:"no-results-fuzzy-match",type:Sn.NO_MESSAGE_RESULTS_FUZZY_MATCH,data:null,role:"presentation"}),p>0&&_.push({key:"related-results-header",type:Sn.RELATED_RESULTS_HEADER,data:p,role:"presentation"})),_.push(...t.map((e,t)=>({key:`messages-result-${e.iid}`,type:Sn.MESSAGE_RESULT,data:b()({},e,{index:t}),role:"listitem"}))),!u&&p<=0&&_.push({key:"no-results",type:Sn.NO_MESSAGE_RESULTS,data:null,role:"presentation"}),d===A.d&&t.length>10&&_.push({key:"hidden-messages-banner",type:Sn.HIDDEN_MESSAGES,data:null,role:"presentation"})),C&&"files"===e&&(_.push({key:"message-limit-banner",type:Sn.MESSAGE_LIMIT_FILES,data:null,role:"presentation"}),_.push(...a.map((e,t)=>({key:`files-result-${e.iid}`,type:Sn.FILE_RESULT,data:b()({},e,{index:t}),role:"listitem"}))),p<=0&&_.push({key:"no-file-results",type:Sn.NO_FILE_RESULTS,data:null,role:"presentation"})),C&&"channels"===e&&(_.push(...s.map((e,t)=>({key:`channels-result-${e.iid}`,type:Sn.CHANNEL_RESULT,data:{flannelData:r[e.id],searchData:e,id:e.id,index:t},role:"listitem"}))),p<=0&&_.push({key:"no-channel-results",type:Sn.NO_CHANNEL_RESULTS,data:null,role:"presentation"})),"people"===e&&(f&&_.push({key:"people-search-discovery",type:Sn.PEOPLE_DISCOVERY,data:null,role:"presentation"}),C&&(_.push(...n.map((e,t)=>({key:`people-result-${e.iid}`,type:Sn.PEOPLE_RESULT,data:{member:e.member,highlightData:e.highlightData,id:e.member.id,index:t},role:"listitem"}))),p<=0&&_.push({key:"no-people-results",type:Sn.NO_PEOPLE_RESULTS,data:null,role:"presentation"}))),C&&(h?_.push({key:"pager",type:Sn.PAGER,data:null,role:"presentation"}):_.push({key:"feedback-link",type:Sn.FEEDBACK_LINK,data:p,role:"presentation"})),_};const xn=new q.b("search"),Ln="IMPROVED_SEARCH",Fn="HIDDEN_MESSAGES_BANNER",Dn="MESSAGE_LIMIT_BANNER",Bn=(r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.object.isRequired,r.default.object,r.default.object,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.string.isRequired,r.default.func.isRequired,r.default.number.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func,r.default.func.isRequired,r.default.bool.isRequired,r.default.func,r.default.object,r.default.object,r.default.func,r.default.oneOf([Fn,Dn,""]),r.default.bool,r.default.bool,r.default.bool,r.default.string,r.default.bool,r.default.bool,{results:{},uiState:{},logInfo:_.a,setTab:_.a,telemeter:pe.d,logger:{},openSearchFeedbackDialog:_.a,bannerType:"",featureFuzzyMatch:!1,featureSearchResultsVirtualized:!1,featureSearchTabsA11yImprovements:!1,userQuery:"",isScreenReaderEnabled:!1,showNumResults:!0});class message_view_MessageView extends n.PureComponent{constructor(e){super(e),Object(y.a)(this,["pageForward","pageBack","jumpToMessage","jumpToFile","onSelectItem","onRepliesClick","setListRef","renderResultRow","renderSortToggleMenu","onFeedbackClick","setScrollPosition","getPropsForItem","onResultsFocusEnter","onResultsFocusLeave"]),this.state={hasKeyboardFocus:!1},this.searchResultsContainerRef=s.a.createRef(),this.markSearchModuleRenderStart=Object(g.a)(()=>{const t=this.props.results;Object(Y.f)("messages","messages",t&&t.pagination&&t.pagination.page||1,e.telemeter)},2e3,{leading:!0})}componentDidMount(){this.logTelemetry()}componentDidUpdate(e){e.uiState.loading===this.props.uiState.loading&&e.uiState.error===this.props.uiState.error&&e.uiState.page===this.props.uiState.page||this.logTelemetry()}onRepliesClick(e){const t=e.channelId,a=e.ts,n=e.permalink;this.props.logInfo(Ln,`Jumping to message replies. channel: ${t} ts: ${a}`),this.props.openPermalink({permalink:n}).then(()=>this.props.close())}onSelectItem(e,t){const a=this.getVisibleMessages()[t];if(a&&a.messages&&a.messages.length){const e=a.messages[0];this.jumpToMessage({permalink:e.permalink,teamId:this.props.currentTeam.id})}}onFeedbackClick(){this.props.openSearchFeedbackDialog({module:"messages"})}onResultsFocusEnter(){this.setState(()=>({hasKeyboardFocus:!0}))}onResultsFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}setListRef(e){this.listEl=e}setScrollPosition(e){this.props.setViewScrollPosition({view:"messages",position:e})}getVisibleMessages(){return this.props.results.items[this.props.uiState.page]||[]}getPropsForItem(e){return({index:t})=>{const a=e[t],n={};return a.type===Sn.MESSAGE_RESULT&&(this.props.isScreenReaderEnabled||this.state.hasKeyboardFocus)&&(n["aria-label"]=this.props.getMessageResultSummary(a.data)),n}}makeNoResultsFragment(e=!1,t){return e&&t>0?s.a.createElement(E.a,{enabled:["feature_fuzzy_match"]},s.a.createElement(n.Fragment,null,s.a.createElement("p",null,xn.t("You may want to try using different keywords, checking for typos, or adjusting your filters.",{fallbackHash:"4a81ec18521572e71c7085ea0c159585442445d6"})))):t<=0?s.a.createElement(n.Fragment,null,s.a.createElement("p",null,xn.t("Slack couldn\u2019t find any messages related to your search. You may want to try\u2026")),s.a.createElement("ul",null,s.a.createElement("li",null,xn.t("Using different keywords.")),s.a.createElement("li",null,xn.t("Checking for typos.")),s.a.createElement("li",null,xn.t("Adjusting your filters.")))):null}jumpToMessage({teamId:e,permalink:t}){this.props.logInfo(Ln,`Jumping to message. team: ${e} permalink: ${t}`),this.props.openPermalink({permalink:t}).then(()=>this.props.close()).catch(()=>this.props.logInfo(Ln,"FAILED:("))}jumpToFile(e,{file:t,iid:a,ts:n,channelId:s,userId:r,botId:i,index:o}){this.props.logInfo(Ln,`Jumping to file. file: ${t.id}`),this.props.clogSearchFileClick({iid:a,ts:n,channelId:s,userId:r,botId:i,fileId:t.id,position:o}),this.props.previewFile({fileId:t.id}),this.props.close()}logTelemetry(){if(!this.props.uiState.loading&&this.props.uiState.error===A.g.None){const e=this.getVisibleMessages();e&&this.props.telemeter.count("search_ui_messages_results_view_count",e.length)}}pageForward(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo(Ln,"Page forwards in search results"),this.props.clogSearchNextPage(),this.pageSearchResults(1)}pageBack(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo(Ln,"Page backwards in search results"),this.props.clogSearchPreviousPage(),this.pageSearchResults(-1)}pageSearchResults(e){var t=this.props;const a=t.results,n=t.uiState,s=Math.max(n.page+e,1);a.items[s]?this.props.setPageForModule({moduleType:"messages",page:s}):(this.props.logInfo(Ln,"Fetching more results to display on next page"),this.props.fetchSearchResultsByModule({module:"messages",reason:"search-messages-page",page:s}))}shouldRenderBottomHiddenMessagesBanner(){var e=this.props;const t=e.bannerType,a=e.uiState,n=this.getVisibleMessages()||[];return t===Fn&&!a.loading&&n.length>10}renderResultRow(e){return t=>s.a.createElement(Ge,b()({key:e[t].iid,index:t},e[t],{onMessageJump:this.jumpToMessage,onFileJump:this.jumpToFile,onRepliesClick:this.onRepliesClick,logger:this.props.logger,telemeter:this.props.telemeter}))}renderResults(){const e=this.props.uiState;let t=[],a=[];return e.loading||(t=this.getVisibleMessages(),a=Object(f.a)(t,(e,t)=>t)||[]),s.a.createElement(ya,{ref:this.setListRef,ids:a,onSelectItem:this.onSelectItem,itemAriaLabel:e=>this.props.isScreenReaderEnabled||this.state.hasKeyboardFocus?this.props.getMessageResultSummary(t[e]):null,renderItem:this.renderResultRow(t)})}renderSortToggleMenu(e){return s.a.createElement(H.f,e,s.a.createElement(H.b,{key:"recent",label:xn.t("Most recent"),onSelected:()=>this.props.setMessageSort({messageSort:A.f.recentMessages})}),s.a.createElement(H.b,{key:"relevant",label:xn.t("Most relevant"),onSelected:()=>this.props.setMessageSort({messageSort:A.f.relevantMessages})}))}renderSortToggle(){var e=this.props;const t=e.messageSort,a=e.showNumResults,n=e.featureSearchTabsA11yImprovements;let r,i;return t===A.f.recentMessages?(r=xn.t("most recent",{fallbackHash:"88ac2cf7230bd7f626ef49e4e5c391c6fb6b620e"}),i=xn.t("Most recent")):(r=xn.t("most relevant",{fallbackHash:"71b35d44d5b8790ce001fcd485b57fa927e93b01"}),i=xn.t("Most relevant")),s.a.createElement(H.e,{renderMenu:this.renderSortToggleMenu,position:"bottom-right",width:180,offsetX:0,offsetY:0},s.a.createElement(W.c,{"aria-label":n?xn.t("Message results sorted by {sortName}",{sortName:r}):void 0,className:o()(!a&&"c-search__section_header--compact")},!a&&"Sort by ",a?i:r,s.a.createElement(G.b,{type:"chevron-down",inline:!0})))}renderHiddenMessagesBanner(){return this.props.uiState.loading?null:s.a.createElement(Wa,null)}renderMessageLimitBanner(){return this.props.uiState.loading?null:s.a.createElement(ua,{type:"messages"})}renderDebug(){var e=this.props;const t=e.isDebugInfoVisible,a=e.results,n=t&&a.debug,r=n&&JSON.stringify(a.debug,null,2);return n&&s.a.createElement("div",{className:"c-search__debug"},s.a.createElement("h4",{className:"c-search__section_header"},"Solr debug info"),s.a.createElement("pre",{className:"c-search__debug_json"},r),s.a.createElement(W.d,{className:"c-search__debug_copy",size:"small",type:"outline",onClick:()=>Object($.c)(r)},"Copy to clipboard"))}renderSearchResults(){var e=this.props;const t=e.results,a=e.uiState,r=e.bannerType,i=e.featureFuzzyMatch,o=t&&t.pagination&&t.pagination.total_count||0,l=z(o),c=t&&t.pagination&&t.pagination.page_count||0,d=c>1&&!a.loading,u=a.page||1;return s.a.createElement(n.Fragment,null,this.renderDebug(),r===Fn&&this.renderHiddenMessagesBanner(),r===Dn&&this.renderMessageLimitBanner(),this.makeNoResultsFragment(i,o),i&&o>0&&s.a.createElement(E.a,{enabled:["feature_fuzzy_match"]},s.a.createElement("h4",{className:"c-search__section_header"},xn.rt("{totalItemCount, plural, =1 {{totalItemCountStr} related result} other {{totalItemCountStr} related results}}",{totalItemCount:o,totalItemCountStr:l}))),o>0&&this.renderResults(),this.shouldRenderBottomHiddenMessagesBanner()&&this.renderHiddenMessagesBanner(),!d&&s.a.createElement(Ke.a,{className:o>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),s.a.createElement($e,{visible:d,currentPageOffset:u,totalPageCount:c,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}render(){var e=this.props;const t=e.results,a=e.uiState,n=e.scrollPosition,r=e.featureFuzzyMatch,i=e.isDebugInfoVisible,o=e.bannerType,l=e.userQuery;a.loading||this.markSearchModuleRenderStart();const c=t&&t.pagination&&t.pagination.total_count||0,d=r?0:c,u=r&&c>0?xn.t("No exact matches",{fallbackHash:"09e2b0361ef96f7c05039903cace2ab512999989"}):xn.t("No results",{fallbackHash:"09e2b0361ef96f7c05039903cace2ab512999989"}),p=this.getVisibleMessages(),h=a.loading,m=a.error,b=t&&t.pagination&&t.pagination.page_count||0,f=a.page||1,_=b>1&&!a.loading,g=Pn({messageResults:p,moduleName:"messages",isLoading:h,errorType:m,isDebugInfoVisible:i,debugInfo:t.debug,bannerType:o,isFuzzyMatchEnabled:r,totalItemCount:c,isPagerVisible:_,userQuery:l}),y=g.map(e=>e.key),O=this.renderSortToggle(),C=jn(g,{isLoading:h,errorType:m,numResults:d,emptyResultsTitle:u,jumpToMessage:this.jumpToMessage,jumpToFile:this.jumpToFile,onRepliesClick:this.onRepliesClick,sortDropdown:O,onClickRefreshSearch:this.props.onClickRefreshSearch,pageForward:this.pageForward,pageBack:this.pageBack,onFeedbackClick:this.onFeedbackClick,totalPageCount:b,currentPageOffset:f,telemeter:this.props.telemeter,logger:this.props.logger,showNumResults:this.props.showNumResults}),v=In(g),E=this.getPropsForItem(g);return this.props.featureSearchResultsVirtualized?s.a.createElement(Pa,{id:"c-search__tab__messages",module:"messages",scrollPosition:n,loading:h,setScrollPosition:this.setScrollPosition,filterUI:s.a.createElement(na,null),ref:this.searchResultsContainerRef,rowRenderer:C,rowKeys:y,rowFocusability:v,onFocusEnter:this.onResultsFocusEnter,onFocusLeave:this.onResultsFocusLeave,getPropsForItem:E,persistentKeys:[Sn.HEADER,Sn.PAGER,Sn.FEEDBACK_LINK]}):s.a.createElement(Pa,{id:"c-search__tab__messages",module:"messages",scrollPosition:n,loading:a.loading,errorType:a.error,setScrollPosition:this.setScrollPosition,filterUI:s.a.createElement(na,null),numResults:d,emptyResultsTitle:u,sortDropdown:this.renderSortToggle(),onClickRefreshSearch:this.props.onClickRefreshSearch,ref:this.searchResultsContainerRef},this.renderSearchResults())}}message_view_MessageView.displayName="MessageView",message_view_MessageView.defaultProps=Bn;const Un={clogSearchNextPage:(...e)=>Object(w.j)(...e),clogSearchPreviousPage:(...e)=>Object(w.m)(...e),clogSearchFileClick:(...e)=>Object(w.f)(...e),previewFile:(...e)=>Object(D.c)(...e),displayModelOrViewById:L.a,fetchSearchResultsByModule:(...e)=>Object(N.d)(...e),setMessageSort:R,setPageForModule:(...e)=>Object(S.u)(...e),setViewScrollPosition:(...e)=>Object(S.J)(...e),showThread:(...e)=>Object(D.l)(...e),close:(...e)=>Object(F.a)(...e),openPermalink:(...e)=>Object(ue.a)(...e),openSearchFeedbackDialog:(...e)=>Object(N.r)(...e)};var qn=Object(l.b)(e=>{const t=Object(M.d)(e),a=Object(k.a)({state:e}),n=Object(P.q)(e,{module:"messages"})||{items:{}},s=Object(x.c)(e,"search_tab_counts"),r="counts"!==s&&"counts_and_sort"!==s,i=Object(c.j)(e,"messages"),o=Object(j.c)(e),l=Object(P.q)(e,{module:"files"})||{items:{}},d=l.pagination&&l.pagination.total_count,u=Object(de.b)(e);const p=(Object(P.l)(e)||{}).count;let h;return Object(C.m)(e,"feature_pers_search_msg_limit_warning_i18n")?void 0!==p&&(p>0&&!Object(B.T)()&&"treatment"===Object(x.c)(e,"pers_search_msg_limit_warning")?h=Fn:Object(U.B)(t)&&(h=Dn)):Object(U.B)(t)&&(h=Dn),{results:n,uiState:i,messageSort:o,currentTeam:t,numOfFileResults:d,showNumResults:r,getMessageResultSummary:t=>(function(e,t){if(!t)return null;const a=t.team,n=oe(e,t.channel),s=t.messages||[],r=Object(M.d)(e);let i,o=null;if(a&&Object(se.a)(a)&&r.id!==a){const t=Object(M.i)(e,a||r.id);o=Object(U.e)(t)}const l=Object(re.x)(e,n,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),c=Z(s),d=s.length,u=r&&r.id!==a&&Object(se.a)(a);return i=Object(re.ib)(n)?le.t("{count, plural, =1 {Direct} other {# messages from a direct}} message with {conversationName} on {date}:",{conversationName:l,date:c,count:d}):Object(re.qb)(n)?le.t("{count, plural, =1 {Group} other {# messages from group}} message with {conversationName} on {date}:",{conversationName:l,date:c,count:d}):Object(re.zb)(n)?le.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a pending shared channel, on {date}:",{conversationName:l,date:c,count:d,fallbackHash:"24663e65e2ac4dc269e630e2237e65674bc121fd"}):Object(re.bb)(n)?le.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:l,date:c,count:d}):u?le.t("{count, plural, =1 {From} other {# messages in}} {conversationName} in {workspaceName} on {date}:",{conversationName:l,date:c,count:d,workspaceName:o}):Object(re.wb)(n)?le.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:l,date:c,count:d}):le.t("{count, plural, =1 {From} other {# messages in}} {conversationName} on {date}:",{conversationName:l,date:c,count:d}),`${i=Object(Q.a)(i)} ${s.map(t=>Object(X.a)({day:{ts:t.ts,isFirstDay:!1,isLastDay:!1},name:Object(ee.a)(e,{userId:t.user}),time:Object(ne.a)(t.ts,{do24hrTime:Object(ae.k)(e,"time24"),includeSeconds:!1}),text:Object(te.a)(e,t.text.replace(ce,"")),reactionCount:t.reactions&&t.reactions.length||0,replyCount:t.reply_count||0,isStarred:t.is_starred,isPinned:!1,isFirstMsgForDay:!1,isLastMsgForDay:!1,isFirstUnreadMsg:!1})).join(". ")}.`})(e,t),logInfo:a.info,logger:a,isScreenReaderEnabled:u,isDebugInfoVisible:Object(c.h)(e),scrollPosition:Object(c.q)(e).messages,telemeter:Object(pe.c)({state:e}),bannerType:h,featureFuzzyMatch:v(e,n),featureSearchResultsVirtualized:Object(C.m)(e,"feature_search_results_virtualized"),featureSearchTabsA11yImprovements:Object(C.m)(e,"feature_search_tabs_a11y_improvements"),userQuery:Object(he.d)(e)}},Un)(message_view_MessageView),Hn=a("GTwG");const Wn=new q.b("search"),Gn=/[\ue000\ue001]/g;const Kn=new q.b("search"),Vn="IMPROVED_SEARCH",zn=(r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.string,r.default.func,r.default.object,r.default.func,r.default.oneOf(Object(Ze.a)(A.c)),r.default.object,r.default.func,r.default.bool,r.default.func,r.default.func,r.default.func,r.default.number,r.default.func,r.default.func,r.default.object,r.default.func,r.default.bool,r.default.bool,r.default.bool,r.default.bool,{clogFileClick:_.a,clogSearchFileClick:_.a,clogSearchNextPage:_.a,clogSearchPreviousPage:_.a,close:_.a,error:"",fetchSearchResultsByModule:_.a,fileResults:{},fileSearchSortChanged:_.a,fileSort:A.c.relevant,fileState:{},getFileResultSummary:_.a,loading:!1,logInfo:_.a,onClickRefreshSearch:_.a,previewFile:_.a,scrollPosition:0,setPageForModule:_.a,setViewScrollPosition:_.a,telemeter:pe.d,openSearchFeedbackDialog:_.a,featureSearchResultsVirtualized:!1,isScreenReaderEnabled:!1,showNumResults:!0,featureSearchTabsA11yImprovements:!1});class file_view_FileViewBase extends n.PureComponent{constructor(e){super(e),Object(y.a)(this,["pageForward","pageBack","pageSearchResults","setListRef","onFileClick","onSelectItem","setScrollPosition","clogLinkClick","onFeedbackClick","renderSortToggle","onResultsFocusEnter","onResultsFocusLeave"]),this.searchResultsContainerRef=s.a.createRef(),this.state={hasKeyboardFocus:!1},this.markSearchModuleRenderStart=Object(g.a)(()=>{const t=this.props.fileResults;Object(Y.f)("files","score",t&&t.pagination&&t.pagination.page||1,e.telemeter)},2e3,{leading:!0})}componentDidMount(){this.logTelemetry()}componentDidUpdate(e){e.loading===this.props.loading&&e.error===this.props.error&&e.fileState.page===this.props.fileState.page||this.logTelemetry()}onFileClick(e,{file:t,index:a}){this.props.logInfo(Vn,`Jumping to file. file: ${t.id}`),this.props.clogSearchFileClick({iid:t.iid,userId:t.user,fileId:t.id,position:a}),this.props.previewFile({fileId:t.id}),this.props.close()}onResultsFocusEnter(){this.setState(()=>({hasKeyboardFocus:!0}))}onResultsFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}onSelectItem(e,t){const a=this.getVisibleFiles()[t];this.onFileClick(e,{file:a,index:t})}onFeedbackClick(){this.props.openSearchFeedbackDialog({module:"files"})}getPropsForItem(e){return({index:t})=>{const a=e[t],n={};return a.type===Sn.FILE_RESULT&&(this.state.hasKeyboardFocus||this.props.isScreenReaderEnabled)&&(n["aria-label"]=this.props.getFileResultSummary(a.data)),n}}getClogLinkClickHandler(e){return t=>{this.clogLinkClick(e[0],t)}}setListRef(e){this.listEl=e}setScrollPosition(e){this.props.setViewScrollPosition({view:"files",position:e})}getVisibleFiles(){return this.props.fileResults.items[this.props.fileState.page]||[]}clogLinkClick(e,t){this.props.clogFileClick({file:e,payload:t})}logTelemetry(){if(!this.props.loading&&this.props.error===A.g.None){const e=this.getVisibleFiles();e&&this.props.telemeter.count("search_ui_files_results_view_count",e.length)}}pageForward(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo(Vn,"Page forwards in search results"),this.props.clogSearchNextPage(),this.pageSearchResults(1)}pageBack(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo(Vn,"Page backwards in search results"),this.props.clogSearchPreviousPage(),this.pageSearchResults(-1)}pageSearchResults(e){var t=this.props;const a=t.fileState,n=t.fileResults,s=Math.max(a.page+e,1);n.items[s]?this.props.setPageForModule({moduleType:"files",page:s}):this.props.fetchSearchResultsByModule({module:"files",sort:"score",reason:"search-files-page",page:s})}renderSortToggle(){let e,t;return this.props.fileSort===A.c.recent?(t=Kn.t("most recent",{fallbackHash:"88ac2cf7230bd7f626ef49e4e5c391c6fb6b620e"}),e=Kn.t("Most recent")):(t=Kn.t("most relevant",{fallbackHash:"71b35d44d5b8790ce001fcd485b57fa927e93b01"}),e=Kn.t("Most relevant")),s.a.createElement(H.e,{"data-qa":"file_sort_toggle",renderMenu:({onTriggerClose:e})=>s.a.createElement(H.f,null,s.a.createElement(H.b,{"data-qa-sort":A.c.recent,onSelected:()=>{this.props.fileSearchSortChanged({sort:A.c.recent}),e()}},Kn.t("Most recent")),s.a.createElement(H.b,{"data-qa-sort":A.c.relevant,onSelected:()=>{this.props.fileSearchSortChanged({sort:A.c.relevant}),e()}},Kn.t("Most relevant"))),position:"bottom-right",width:180,offsetX:0,offsetY:0},s.a.createElement(W.c,{"data-qa":"file_sort_selection","aria-label":this.props.featureSearchTabsA11yImprovements?Kn.t("File results sorted by {sortName}",{sortName:t}):void 0,className:o()(!this.props.showNumResults&&"c-search__section_header--compact")},!this.props.showNumResults&&"Sort by ",this.props.showNumResults?e:t,s.a.createElement(G.b,{type:"chevron-down",inline:!0})))}renderFiles(){var e=this.props;const t=e.fileState,a=e.fileResults;let n=[],r=[];return a.items[t.page||1]&&(this.markSearchModuleRenderStart(),r=(n=this.getVisibleFiles()).map((e,t)=>t)),s.a.createElement(ya,{ref:this.setListRef,ids:r,onSelectItem:this.onSelectItem,renderItem:e=>s.a.createElement(Ga.a,{key:n[e].id,index:e,file:n[e],onClick:this.onFileClick,clogLinkClick:e=>{this.clogLinkClick(n[0],e)}}),itemAriaLabel:e=>!(!this.props.isScreenReaderEnabled&&!this.state.hasKeyboardFocus)&&this.props.getFileResultSummary(n[e])})}renderSearchResults(){var e=this.props;const t=e.fileState,a=e.fileResults,r=e.loading,i=a&&a.pagination&&a.pagination.total_count||0,o=a&&a.pagination&&a.pagination.page_count||0,l=o>1&&!this.props.loading,c=t.page||1;return s.a.createElement(n.Fragment,null,!r&&s.a.createElement(ua,{type:"files"}),i>0&&this.renderFiles(),i<=0&&s.a.createElement(n.Fragment,null,s.a.createElement("p",null,Kn.t("Slack couldn\u2019t find any files related to your search. You may want to try\u2026")),s.a.createElement("ul",null,s.a.createElement("li",null,Kn.t("Using different keywords.")),s.a.createElement("li",null,Kn.t("Checking for typos.")),s.a.createElement("li",null,Kn.t("Adjusting your filters.")))),!l&&s.a.createElement(Ke.a,{className:i>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),s.a.createElement($e,{visible:l,currentPageOffset:c,totalPageCount:o,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}render(){this.props.loading||this.markSearchModuleRenderStart();var e=this.props;const t=e.scrollPosition,a=e.loading,n=e.fileResults,r=e.fileState,i=e.error,o=n&&n.pagination&&n.pagination.total_count||0,l=Kn.t("No results",{fallbackHash:"7cded9ea830e64e87819b27ea57209379f4858af"});if(this.props.featureSearchResultsVirtualized){const e=n&&n.pagination&&n.pagination.page_count||0,c=this.getVisibleFiles(),d=e>1&&!this.props.loading,u=r.page||1,p=Pn({moduleName:"files",fileResults:c,isLoading:a,totalItemCount:o,isPagerVisible:d,errorType:i}),h=p.map(e=>e.key),m=jn(p,{isLoading:a,errorType:i,numResults:o,emptyResultsTitle:l,onFileClick:this.onFileClick,clogLinkClick:this.getClogLinkClickHandler(c),onFeedbackClick:this.onFeedbackClick,pageForward:this.pageForward,pageBack:this.pageBack,totalPageCount:e,currentPageOffset:u,sortDropdown:this.renderSortToggle(),telemeter:this.props.telemeter,showNumResults:this.props.showNumResults}),b=In(p),f=this.getPropsForItem(p);return s.a.createElement(Pa,{id:"c-search__tab_file",module:"files",scrollPosition:t,ref:this.searchResultsContainerRef,setScrollPosition:this.setScrollPosition,filterUI:s.a.createElement(na,{showFileFilters:!0}),rowKeys:h,rowRenderer:m,rowFocusability:b,onFocusEnter:this.onResultsFocusEnter,onFocusLeave:this.onResultsFocusLeave,getPropsForItem:f})}return s.a.createElement(Pa,{id:"c-search__tab_file",module:"files",scrollPosition:t,loading:a,setScrollPosition:this.setScrollPosition,filterUI:s.a.createElement(na,{showFileFilters:!0}),numResults:o,emptyResultsTitle:l,errorType:this.props.error,onClickRefreshSearch:this.props.onClickRefreshSearch,ref:this.searchResultsContainerRef,sortDropdown:this.renderSortToggle()},this.renderSearchResults())}}file_view_FileViewBase.displayName="FileViewBase",file_view_FileViewBase.defaultProps=zn;const $n={setPageForModule:(...e)=>Object(S.u)(...e),setViewScrollPosition:(...e)=>Object(S.J)(...e),fetchSearchResultsByModule:(...e)=>Object(N.d)(...e),clogSearchFileClick:(...e)=>Object(w.f)(...e),clogFileClick:(...e)=>Object(Hn.a)(...e),clogSearchNextPage:(...e)=>Object(w.j)(...e),clogSearchPreviousPage:(...e)=>Object(w.m)(...e),previewFile:(...e)=>Object(D.c)(...e),close:(...e)=>Object(F.a)(...e),fileSearchSortChanged:(...e)=>ot(...e),openSearchFeedbackDialog:(...e)=>Object(N.r)(...e)};var Yn=Object(l.b)(e=>{const t=Object(P.q)(e,{module:"files"})||{items:[]},a=Object(x.c)(e,"search_tab_counts"),n="counts"!==a&&"counts_and_sort"!==a,s=Object(c.j)(e,"files"),r=Object(P.q)(e,{module:"messages"})||{items:{}};return{fileResults:t,fileState:s,numOfMessageResults:r.pagination&&r.pagination.total_count,getFileResultSummary:t=>(function(e,t){if(!t)return null;const a=t.pretty_type,n=t.name,s=t.timestamp,r=t.user,i=Object(J.k)(Object(J.n)(s,{returnMoment:!0}),{shortenMonth:!1,excludeYear:Object(J.i)(s)});return Object(Q.a)(Wn.t("{type} file \u201c{fileName}\u201d shared by {user} on {date}",{type:a,fileName:n.replace(Gn,""),user:Object(ee.a)(e,{userId:r}),date:i}))})(e,t),isScreenReaderEnabled:Object(de.b)(e),scrollPosition:Object(c.q)(e).files,loading:s&&s.loading,error:s&&s.error,logInfo:Object(k.a)({state:e}).info,fileSort:Object(tt.a)(e),telemeter:Object(pe.c)({state:e}),featureSearchResultsVirtualized:Object(C.m)(e,"feature_search_results_virtualized"),featureSearchTabsA11yImprovements:Object(C.m)(e,"feature_search_tabs_a11y_improvements"),showNumResults:n}},$n)(file_view_FileViewBase),Qn=a("1myf"),Xn=a("K7TJ"),Jn=a("Z7Ay"),Zn=a("ynxK"),es=a("qafc"),ts=a("ns4K"),as=a("S3eg"),ns=a("CUc0"),ss=a("G4Tr");const rs=new q.b("search");var is=a("x4bP");r.default.shape({type:r.default.oneOf(Object(Ze.a)(A.a)),teamId:r.default.string,teamDisplayName:r.default.string}),r.default.shape({state:r.default.oneOf(["ready","loading","error"]).isRequired,teams:r.default.arrayOf(r.default.shape({id:r.default.string.isRequired,name:r.default.string.isRequired})).isRequired}),r.default.arrayOf(r.default.string),r.default.arrayOf(r.default.string);var os=a("BeL+"),ls=a("wfE8");const cs=Object(I.b)("Channel/people search: fetch shared teams",(e,t,{reason:a}={})=>{const n=Object(c.s)(t());return"ready"===n.state&&n.refreshed<=Date.now()-36e5||"error"===n.state?(e(Object(S.E)()),e(Object(ls.n)({reason:a})).then(a=>{if(!a.ok)throw new Error(a);const n=Object(os.a)(a.channels.map(e=>e.team.id)),s=t(),r={[Object(Xe.b)(s)]:!0};Object(Je.d)(s)&&(r[Object(Xe.a)(s)]=!0,Object(M.a)(s).forEach(e=>{r[e.id]=!0}));const i=n.filter(e=>!r[e]);e(Object(S.F)({teamIds:i})),e(Object(S.k)({teamIds:i.slice(0,3)})),e(Object(S.x)({teamIds:i.slice(0,3)}))}).catch(()=>{e(Object(S.D)())})):Promise.resolve()});cs.meta={name:"fetchSharedTeams",key:"actionsUniversalSearchFetchSharedTeamsFetchSharedTeams",description:"Channel/people search: fetch shared teams"},cs.propTypes={reason:r.default.string};const ds=Object(I.b)("Channel search filter select is opened",e=>e(cs({reason:"channel_search_open"})));ds.meta={name:"channelSearchOpened",key:"actionsUniversalSearchChannelSearchOpenedChannelSearchOpened",description:"Channel search filter select is opened"},ds.propTypes=null;var us=a("hE2u");const ps=new q.b("search"),hs=(r.default.func.isRequired,r.default.func,r.default.func,{sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:_.a,clogSearchFilterRemoved:_.a});class search_org_filter_SearchOrgFilter extends n.PureComponent{constructor(e){super(e),Object(y.a)(this,["loadOptions","filterOptions","renderOption"])}onOrgFilterChange(e,t){const a=!this.props.filters.includes(e);a?this.props.clogSearchFilterAdded({filter_channel_team:e,filter_position:t}):this.props.clogSearchFilterRemoved({filter_channel_team:e,filter_position:t}),this.props.toggleSearchOrgFilter({teamId:e,value:a})}loadOptions(e){const t=this.props.sharedTeams,a=new us.b(e);return Promise.resolve({options:Object(Qn.a)(t.teams.map(t=>({value:t.id,score:0===e.length?0:a.normalizeAndScore(Object(U.e)(t))})),"score")})}filterOptions(e,t){const a=this.props.filters;return t.filter(e=>isFinite(e.score)&&!a.includes(e.value))}renderOption(e){const t=this.props.filters,a=e.value;return s.a.createElement(n.Fragment,null,s.a.createElement(Mt.b,{id:a,size:18,ariaHidden:"true",tabIndex:"-1"})," ",s.a.createElement("span",{className:"no_wrap overflow_ellipsis padding_left_50"},s.a.createElement(Pt.a,{bold:t.includes(a),id:a})))}render(){var e=this.props;const t=e.sharedTeams,a=e.filters,n=e.filterSuggestions,r="loading"===t.state,i=t.teams&&t.teams.length>0;if(r||!i)return null;const o=n.map(e=>({value:e,checked:a.includes(e)}));return s.a.createElement(Ut,{title:ps.t("External organizations")},s.a.createElement(At,{checkboxName:"external_org",placeholderText:ps.t("Enter an external organization"),showMoreOptionsAriaLabel:ps.t("More external organizations to filter by"),loadOptions:this.loadOptions,renderVisibleOption:this.renderOption,renderOption:this.renderOption,visibleOptions:o,onOptionChange:e=>{this.onOrgFilterChange(e.value,o.indexOf(e))},onOptionAdd:e=>{this.onOrgFilterChange(e.value,null)},filterOptions:this.filterOptions}))}}search_org_filter_SearchOrgFilter.displayName="SearchOrgFilter",search_org_filter_SearchOrgFilter.defaultProps=hs;a("a001");const ms=new q.b("search");class channels_filter_channel_type_ChannelsFilterChannelType extends n.Component{constructor(){super(),this.onChange=this.onChange.bind(this)}onChange(e){this.props.onChannelTypeChange({type:e.value})}render(){const e=this.props.sharedTeams,t=["all","private","archived"];"ready"===e.state&&e.teams.length>1&&t.push("shared");const a={all:ms.t("All channels"),private:ms.t("Private channels"),archived:ms.t("Archived channels"),shared:ms.t("Shared channels")},n=t.map(e=>({label:a[e],value:e})),r=n.find(e=>e.value===this.props.channelType.type);return s.a.createElement($t.a,{width:"100%",selectId:"channel_filter_type",options:n,selectedOption:r,onOptionSelected:this.onChange})}}channels_filter_channel_type_ChannelsFilterChannelType.displayName="ChannelsFilterChannelType",channels_filter_channel_type_ChannelsFilterChannelType.defaultProps={channelType:{type:A.a.all},sharedTeams:{state:"ready",teams:[]},onChannelTypeChange:_.a};const bs=new q.b("search");function fs(e){const t=e.filterWorkspaceOnly,a=e.currentTeam;return s.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":t}),htmlFor:"search-channel-filter-workspace-only"},bs.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:s.a.createElement(n.Fragment,null,s.a.createElement(Mt.b,{className:"p-search_filter__workspace_only_team_icon",team:a,size:18})," ",s.a.createElement(Pt.a,{id:a.id,bold:t}))}),s.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",checked:t,onChange:t=>e.checkOnlySearchWorkspace(t),id:"search-channel-filter-workspace-only"}))}fs.displayName="SearchLimitTeamFilterCheckbox",fs.defaultProps={filterWorkspaceOnly:_.a,checkOnlySearchWorkspace:_.a};var _s=fs;const gs=new q.b("search");class channels_filter_ui_ChannelsFilterUIBase extends n.Component{constructor(e){super(e),Object(y.a)(this,["onOnlySearchWorkspaceChange","onHideMemberChannelsChange","onChannelTypeChange","onSearchLimitTeamFilterDropdownChange"])}componentDidMount(){this.props.onChannelSearchOpened()}onChannelTypeChange({type:e}={}){this.props.clogSearchFilterAdded({filter_channel_type:e}),this.props.setChannelSearchFilterType({type:e})}onOnlySearchWorkspaceChange(e){e.target.checked?this.props.clogSearchFilterAdded({filter_other:"workspace_only"}):this.props.clogSearchFilterRemoved({filter_other:"workspace_only"}),this.props.setSearchOnlySearchWorkspace({value:e.target.checked})}onHideMemberChannelsChange(e){e.target.checked?this.props.clogSearchFilterAdded({filter_other:"hide_my_channels"}):this.props.clogSearchFilterRemoved({filter_other:"hide_my_channels"}),this.props.setChannelSearchHideMemberChannels({value:e.target.checked})}onSearchLimitTeamFilterDropdownChange(e){this.props.searchOnlyByEnterpriseTeamId({value:e.value})}renderPrefs(){var e=this.props;const t=e.showEnterpriseOptions,a=e.filterWorkspaceOnly,r=e.hideMemberChannels,i=e.currentTeam,l=e.featureSearchLimitTeamFilter,c=e.searchOnlyWorkspaceTeamId,d=e.selfEnterpriseOrgName,u=e.loggedInEnterpriseTeams;return s.a.createElement(n.Fragment,null,t&&l?s.a.createElement(Ut,{title:gs.t("Workspace"),"data-qa":"search-filter-workspace-section"},s.a.createElement("div",{className:"p-search_filter__select"},s.a.createElement(Xt,{loggedInEnterpriseTeams:u,selfEnterpriseOrgName:d,searchOnlyWorkspaceTeamId:c,onChange:this.onSearchLimitTeamFilterDropdownChange,featureSearchLimitTeamFilter:l}))):null,s.a.createElement(Ut,{title:gs.t("More options")},t&&!l?s.a.createElement(_s,{currentTeam:i,filterWorkspaceOnly:a,checkOnlySearchWorkspace:this.onOnlySearchWorkspaceChange,featureSearchLimitTeamFilter:l}):null,s.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":r}),htmlFor:"search-channel-filter-hide-member-channels"},gs.t("Hide my channels")," ",s.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",checked:r,onChange:this.onHideMemberChannelsChange,id:"search-channel-filter-hide-member-channels"}))))}render(){var e=this.props;const t=e.channelType,a=e.sharedTeams,n=e.filters,r=e.filterSuggestions,i="loading"===a.state;return s.a.createElement("div",{className:"p-search_filters"},s.a.createElement(Ut,{title:gs.t("Channel type")},s.a.createElement("div",{className:"p-search_filter__select"},s.a.createElement(channels_filter_channel_type_ChannelsFilterChannelType,{isLoading:i,sharedTeams:a,channelType:t,onChannelTypeChange:this.onChannelTypeChange}))),a.teams.length>0&&s.a.createElement(search_org_filter_SearchOrgFilter,{sharedTeams:a,filters:n,filterSuggestions:r,toggleSearchOrgFilter:this.props.toggleChannelSearchOrgFilter,clogSearchFilterAdded:this.props.clogSearchFilterAdded,clogSearchFilterRemoved:this.props.clogSearchFilterRemoved}),this.renderPrefs())}}channels_filter_ui_ChannelsFilterUIBase.displayName="ChannelsFilterUIBase",channels_filter_ui_ChannelsFilterUIBase.defaultProps={channelType:{type:A.a.all},sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:_.a,clogSearchFilterRemoved:_.a,selfEnterpriseOrgName:"",loggedInEnterpriseTeams:[],searchOnlyByEnterpriseTeamId:_.a};const ys={setChannelSearchFilterType:(...e)=>dt(...e),setSearchOnlySearchWorkspace:(...e)=>ut(...e),setChannelSearchHideMemberChannels:(...e)=>it(...e),onChannelSearchOpened:(...e)=>ds(...e),toggleChannelSearchOrgFilter:(...e)=>ht(...e),clogSearchFilterAdded:(...e)=>Object(w.g)(...e),clogSearchFilterRemoved:(...e)=>Object(w.h)(...e),searchOnlyByEnterpriseTeamId:(...e)=>pt(...e)};var Os=Object(l.b)(e=>{const t=Object(c.s)(e),a=Object(c.d)(e),n=Object(M.d)(e);var s=Object(c.c)(e);const r=s.type,i=s.teamId,o=Object(Xe.a)(e),l=Object(C.b)(e).filter(e=>!!e.enterprise_id&&e.enterprise_id===o);return{channelType:{type:r,teamId:i,teamDisplayName:i&&Object(U.e)(Object(M.i)(e,i))},filters:Object(c.e)(e),filterSuggestions:Object(M.j)(e,a).map(e=>e.id),currentTeam:n,showEnterpriseOptions:Object(Je.d)(e),filterWorkspaceOnly:Object(j.f)(e),hideMemberChannels:Object(j.a)(e),sharedTeams:{state:t.state,teams:Object(M.j)(e,t.teamIds).map(e=>({id:e.id,name:Object(U.e)(e)}))},allAccountsOfCurrentEnterprise:l,loggedInEnterpriseTeams:l.map(t=>Object(M.i)(e,t.id)),featureSearchLimitTeamFilter:Object(C.m)(e,"feature_search_limit_team_filter"),searchOnlyWorkspaceTeamId:Object(c.r)(e),selfEnterpriseOrgName:Object(M.e)(e)}},ys)(channels_filter_ui_ChannelsFilterUIBase);a("9wy/");const Cs=new q.b("search"),vs="IMPROVED_SEARCH";function Es(e){const t=e.channelName,a=e.onRetry,n=be()(e,["channelName","onRetry"]);return s.a.createElement(es.b,b()({position:"bottom-right",icon:"warning",showCloseButton:!0},n),s.a.createElement("span",null,s.a.createElement("strong",null,Cs.rt("Couldn\u2019t join {channelName}.",{channelName:t}))," ",Cs.t("This could be a connection issue, or just a little blip.")," ",s.a.createElement(Zn.a,{onClick:a},Cs.t("Try again"))))}function ks(e){const t=e.channelName,a=be()(e,["channelName"]);return s.a.createElement(es.b,b()({position:"bottom-right",icon:"warning",showCloseButton:!0},a),s.a.createElement("span",null,s.a.createElement("strong",null,Cs.rt("Couldn\u2019t leave {channelName}.",{channelName:t}))," ",Cs.t("Your organization requires everyone to be in it, so no one misses important info.")," "))}function Ss(e){const t=e.channelName,a=e.onRetry,n=be()(e,["channelName","onRetry"]);return s.a.createElement(es.b,b()({position:"bottom-right",icon:"warning",showCloseButton:!0},n),s.a.createElement("span",null,s.a.createElement("strong",null,Cs.rt("Couldn\u2019t leave {channelName}.",{channelName:t}))," ",Cs.t("This could be a connection issue, or just a little blip.")," ",s.a.createElement(Zn.a,{onClick:a},Cs.t("Try again"))))}Es.displayName="ErrorToastCannotJoinBlip",ks.displayName="ErrorToastCannotLeaveRestricted",Ss.displayName="ErrorToastCannotLeaveBlip";class channel_view_ChannelViewBase extends n.Component{constructor(e){super(e),Object(y.a)(this,["setScrollPosition","pageForward","pageBack","pageSearchResults","setListRef","onFeedbackClick","renderSortToggle","onChannelClick","onChannelJoin","onChannelLeave","onResultsFocusEnter","onResultsFocusLeave","getPropsForItem"]),this.searchResultsContainerRef=s.a.createRef(),this.state={hasKeyboardFocus:!1}}componentDidMount(){this.logTelemetry()}componentDidUpdate(e){e.moduleState.loading===this.props.moduleState.loading&&e.moduleState.error===this.props.moduleState.error&&e.moduleState.page===this.props.moduleState.page||this.logTelemetry()}onResultsFocusEnter(){this.setState(()=>({hasKeyboardFocus:!0}))}onResultsFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}onNavigateChannel(e){let t;if(this.props.clogSearchChannelClick({type:w.a.channel,iid:this.props.iidMap[e.id],channelId:e.id}),Object(re.db)(e)){const a=this.props.teamIdForChannelFromAnotherTeam(e);t=Object(is.a)()?this.props.setPrimaryView({id:e.id,teamId:a}):this.props.openChannelFromAnotherTeam({channelId:e.id,teamId:a})}else t=this.props.setPrimaryView({id:e.id,teamId:e.team_id});return t.then(()=>this.props.close())}onJoinChannelId(e){return this.props.clogSearchChannelClick({type:w.a.channelJoin,iid:this.props.iidMap[e],channelId:e}),this.props.joinChannelFromSearch({channelId:e}).then(()=>{this.listEl&&this.listEl.focusItem(e)}).catch(()=>{const t=this.props.getDisplayNameForChannel(this.props.flannelChannelMap[e]);this.props.enqueueToast({element:s.a.createElement(Es,b()({channelName:t,onRetry:()=>this.onJoinChannelId(e)},this.getToastOffset()))})})}onLeaveChannelId(e){return this.props.clogSearchChannelClick({type:w.a.channelLeave,iid:this.props.iidMap[e],channelId:e}),this.props.leaveChannelFromSearch({channelId:e}).then(()=>{this.listEl&&this.listEl.focusItem(e)}).catch(()=>{const t=this.props.getDisplayNameForChannel(this.props.flannelChannelMap[e]);var a=this.props.canLeaveChannelWithReason(e);const n=a.ok,r=a.reason,i=!n&&[Xa.b.CANT_LEAVE_GENERAL,Xa.b.CANT_LEAVE_MANDATORY_SHARED_CHANNEL].includes(r);this.props.enqueueToast({element:i?s.a.createElement(ks,b()({channelName:t},this.getToastOffset())):s.a.createElement(Ss,b()({channelName:t,onRetry:()=>this.onLeaveChannelId(e)},this.getToastOffset()))})})}onFeedbackClick(){this.props.openSearchFeedbackDialog({module:"channels"})}onChannelClick(e,t){return a=>{let n=a.target,s=!1;for(;n&&n!==a.currentTarget;)"A"===n.tagName&&n.href&&(s=!0),n=n.parentNode;s?this.props.clogSearchChannelClick({type:w.a.channelPurposeLink,iid:e,channelId:t.id}):(a.preventDefault(),this.onNavigateChannel(t))}}onChannelJoin(e){return t=>(t.preventDefault(),this.onJoinChannelId(e))}onChannelLeave(e){return t=>(t.preventDefault(),this.onLeaveChannelId(e))}getToastOffset(){if(this.searchResultsContainerRef.current){return this.searchResultsContainerRef.current.getWrappedInstance().getToastOffset()}return{}}getPropsForItem(e){return({index:t})=>{const a=e[t],n={};return a.type===Sn.CHANNEL_RESULT&&(this.state.hasKeyboardFocus||this.props.isScreenReaderEnabled)&&(n["aria-label"]=this.props.channelSummaryLabels[a.data.id]),n}}getVisibleChannels(){return this.props.channelsResponse.items[this.props.moduleState.page||1]}setListRef(e){this.listEl=e}setScrollPosition(e){this.props.setViewScrollPosition({view:"channels",position:e})}logTelemetry(){if(!this.props.moduleState.loading&&this.props.moduleState.error===A.g.None){const e=this.getVisibleChannels();e&&this.props.telemeter.count("search_ui_channels_results_view_count",e.length)}}pageForward(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo(vs,"Page forward in channel results"),this.props.clogSearchNextPage(),this.pageSearchResults(1)}pageBack(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo(vs,"Page backwards in channel results"),this.props.clogSearchPreviousPage(),this.pageSearchResults(-1)}pageSearchResults(e){var t=this.props;const a=t.moduleState,n=t.channelsResponse,s=t.sort,r=Math.max(a.page+e,1);n.items[r]?this.props.setPageForModule({moduleType:"channels",page:r}):this.props.fetchSearchResultsByModule({module:"channels",sort:s,reason:"search-channels-page",page:r})}renderSortToggle(){var e=this.props;const t=e.sort,a=e.setSort,n=e.showNumResults,r=e.featureSearchTabsA11yImprovements,i=[[A.b.relevant,{uppercase:Cs.t("Most relevant"),lowercase:Cs.t("most relevant",{fallbackHash:"71b35d44d5b8790ce001fcd485b57fa927e93b01"})}],[A.b.created,{uppercase:Cs.t("Date created (newest to oldest)"),lowercase:Cs.t("date created (newest to oldest)",{fallbackHash:"a02a13d5dfbf8c3838a8ee189079acede35b2a47"})}],[A.b.name,{uppercase:Cs.t("Name (A to Z)"),lowercase:Cs.t("name (A to Z)",{fallbackHash:"e53a5982ee84aaa2d647582a947002c97d33552d"})}],[A.b.memberCount,{uppercase:Cs.t("Members (most to least)"),lowercase:Cs.t("members (most to least)",{fallbackHash:"6bae871504502b91e5730a1574b493e167d09f62"})}]],l=Object(Xn.a)(i);return s.a.createElement(H.e,{"data-qa":"channel_sort_toggle",renderMenu:({onTriggerClose:e})=>s.a.createElement(H.f,null,i.map(([t,n])=>s.a.createElement(H.b,{"data-qa-sort":t,key:t,onSelected:()=>{a({sort:t}),e()}},n.uppercase))),position:"bottom-right",width:180,offsetX:0,offsetY:0},s.a.createElement(W.c,{"data-qa":"channel_sort_selection","aria-label":r?Cs.t("Channel results sorted by {sortName}",{sortName:l[t].lowercase}):void 0,className:o()(!n&&"c-search__section_header--compact")},!n&&"Sort by ",n?l[t].uppercase:l[t].lowercase,s.a.createElement(G.b,{type:"chevron-down",inline:!0})))}render(){var e=this.props;const t=e.scrollPosition,a=e.moduleState,r=e.channelsResponse,i=e.channelSummaryLabels,o=e.flannelChannelMap,l=this.getVisibleChannels()||[],c=l.reduce((e,t)=>(e[t.id]=t,e),{}),d=r.pagination&&r.pagination.total_count,u=d>0;r.debug&&Object(Jn.a)("channelSearchExplain",Object(Qn.a)(r.debug.features,e=>-e.total_score));const p=r&&r.pagination&&r.pagination.page_count||0,h=p>1&&!a.loading,m=a.page||1;if(this.props.featureSearchResultsVirtualized){const e=Pn({moduleName:"channels",channelSearchResults:l,channelFlannelMap:o,isLoading:a.loading,totalItemCount:d,isPagerVisible:h,errorType:a.error}),n=e.map(e=>e.key),r=jn(e,{isLoading:a.loading,errorType:a.error,numResults:d,emptyResultsTitle:Cs.t("No results"),pageForward:this.pageForward,pageBack:this.pageBack,onFeedbackClick:this.onFeedbackClick,totalPageCount:p,currentPageOffset:m,sortDropdown:this.renderSortToggle(),onChannelClick:this.onChannelClick,onChannelJoin:this.onChannelJoin,onChannelLeave:this.onChannelLeave,telemeter:this.props.telemeter,showNumResults:this.props.showNumResults}),i=In(e),c=this.getPropsForItem(e);return s.a.createElement(Pa,{id:"c-search__tab_channel",module:"channels",scrollPosition:t,ref:this.searchResultsContainerRef,setScrollPosition:this.setScrollPosition,filterUI:s.a.createElement(Os,null),rowKeys:n,rowRenderer:r,rowFocusability:i,onFocusEnter:this.onResultsFocusEnter,onFocusLeave:this.onResultsFocusLeave,getPropsForItem:c})}return s.a.createElement(Pa,{id:"c-search__tab_channel",module:"channels",loading:a.loading,errorType:a.error,scrollPosition:t,setScrollPosition:this.setScrollPosition,filterUI:s.a.createElement(Os,null),numResults:d,emptyResultsTitle:Cs.t("No results"),ref:this.searchResultsContainerRef,onClickRefreshSearch:this.props.onClickRefreshSearch,sortDropdown:this.renderSortToggle()},u&&s.a.createElement(ya,{ref:this.setListRef,ids:l.map(e=>e.id),onSelectItem:(e,t)=>this.onNavigateChannel(o[t]),itemAriaLabel:e=>i[e],renderItem:e=>s.a.createElement(tn,{key:e,channel:o[e],channelData:c[e],iid:this.props.iidMap[e],onClickChannel:this.onChannelClick(this.props.iidMap[e],o[e]),onClickJoin:this.onChannelJoin(e),onClickLeave:this.onChannelLeave(e)})}),!u&&s.a.createElement(n.Fragment,null,s.a.createElement("p",null,Cs.t("Slack couldn\u2019t find any channels related to your search. You may want to try\u2026")),s.a.createElement("ul",null,s.a.createElement("li",null,Cs.t("Using different keywords.")),s.a.createElement("li",null,Cs.t("Checking for typos.")),s.a.createElement("li",null,Cs.t("Adjusting your filters.")))),!h&&s.a.createElement(Ke.a,{className:d>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),s.a.createElement($e,{visible:h,currentPageOffset:m,totalPageCount:p,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}}channel_view_ChannelViewBase.displayName="ChannelViewBase",channel_view_ChannelViewBase.defaultProps={sort:A.b.relevant,setSort:_.a,scrollPosition:0,setViewScrollPosition:_.a,moduleState:{},channelsResponse:{items:{}},setPageForModule:_.a,fetchSearchResultsByModule:_.a,logInfo:_.a,setPrimaryView:_.a,openChannelFromAnotherTeam:_.a,close:_.a,teamIdForChannelFromAnotherTeam:_.a,clogSearchChannelClick:_.a,clogSearchNextPage:_.a,clogSearchPreviousPage:_.a,channelSummaryLabels:{},iidMap:{},joinChannelFromSearch:_.a,leaveChannelFromSearch:_.a,flannelChannelMap:{},getDisplayNameForChannel:_.a,enqueueToast:_.a,canLeaveChannelWithReason:_.a,onClickRefreshSearch:_.a,openSearchFeedbackDialog:_.a,telemeter:pe.d,featureSearchResultsVirtualized:!1,featureSearchTabsA11yImprovements:!1,isScreenReaderEnabled:!1,showNumResults:!0};var js=Object(l.b)(e=>{const t=Object(c.j)(e,"channels")||{},a=Object(P.q)(e,{module:"channels"})||{items:{}},n=a.items[t.page||1]||[],s={},r={},i={},o=Object(de.b)(e);n.forEach(t=>{r[t.id]=function(e,t){const a=Object(ie.e)(e,t.id),n=Object(M.i)(e,Object(re.db)(a)?Object(re.ac)(e,a):a.team_id),s=Object(U.e)(n),r=Object(U.s)(n)?Object(M.e)(e):null,i=Object(re.x)(e,a,{publicChannelIncludeHashSign:!1}),o=Object(ss.a)({channelName:i,workspaceName:s,orgName:r,isOrgGlobalSharedPublicOrPrivateChannel:Object(re.vb)(a),isOrgSharedPublicOrPrivateChannel:Object(re.xb)(a),isExternallySharedChannel:Object(re.bb)(a),isArchived:Object(re.Y)(a),isPrivate:Object(re.Cb)(a),isNotMember:!Object(re.ob)(a)}),l=Object(te.a)(e,Object(re.R)(a));return rs.t("{channelDescription}, {memberCount, plural, =1 {# member} other {# members}}, {channelPurpose}",{channelDescription:o,memberCount:t.member_count,channelPurpose:l})}(e,t);const a=Object(ie.e)(e,t.id);i[t.id]=a,s[t.id]=t.iid});const l=Object(x.c)(e,"search_tab_counts"),d="counts"!==l&&"counts_and_sort"!==l;return{sort:Object(j.b)(e),scrollPosition:Object(c.q)(e).channels,moduleState:t,channelsResponse:a,iidMap:s,isScreenReaderEnabled:o,channelSummaryLabels:r,flannelChannelMap:i,logInfo:Object(k.a)({state:e}).info,teamIdForChannelFromAnotherTeam:(...t)=>Object(re.ac)(e,...t),getDisplayNameForChannel:(...t)=>Object(re.x)(e,...t),canLeaveChannelWithReason:(...t)=>Object(Xa.j)(e,...t),telemeter:Object(pe.c)({state:e}),featureSearchResultsVirtualized:Object(C.m)(e,"feature_search_results_virtualized"),featureSearchTabsA11yImprovements:Object(C.m)(e,"feature_search_tabs_a11y_improvements"),showNumResults:d}},e=>({setSort:(...t)=>e(lt(...t)),setViewScrollPosition:(...t)=>e(Object(S.J)(...t)),setPageForModule:(...t)=>e(Object(S.u)(...t)),fetchSearchResultsByModule:(...t)=>e(Object(N.d)(...t)),setPrimaryView:(...t)=>e(Object(as.a)(...t)),openChannelFromAnotherTeam:(...t)=>e(Object(ns.a)(...t)),close:(...t)=>e(Object(F.a)(...t)),clogSearchChannelClick:(...t)=>e(Object(w.d)(...t)),clogSearchNextPage:(...t)=>e(Object(w.j)(...t)),clogSearchPreviousPage:(...t)=>e(Object(w.m)(...t)),joinChannelFromSearch:(...t)=>e(Object(N.h)(...t)),leaveChannelFromSearch:(...t)=>e(Object(N.i)(...t)),enqueueToast:(...t)=>e(Object(ts.c)(...t)),openSearchFeedbackDialog:(...t)=>e(Object(N.r)(...t))}))(channel_view_ChannelViewBase),Is=a("9oTK"),ws=a("9E9B"),Ts=a("h9PG"),Ns=a("eJ6O"),As=a("Ik/9");const Rs=new q.b("search");class people_filter_account_type_PeopleFilterAccountType extends n.Component{constructor(e){super(e),Object(y.a)(this,["onChange"])}onChange(e){this.props.onAccountTypeChange({type:e.value})}render(){const e=[{value:A.h.all,label:Rs.t("All types")},{value:A.h.owners,label:Rs.t("Owners")},{value:A.h.admins,label:Rs.t("Admins")},{value:A.h.full,label:Rs.t("Full Members (includes owners and admins)")},{value:A.h.guests,label:Rs.t("Guests")},{value:A.h.deactivated,label:Rs.t("Deactivated accounts"),isDisabled:this.props.hideDeactivatedUsers}],t=e.find(e=>e.value===this.props.accountType.type),a=this.props.hideDeactivatedUsers?"deactivated-accounts-disabled":"deactivated-accounts-enabled";return s.a.createElement($t.a,{key:a,width:"100%",options:e,ariaLabel:Rs.t("Select an account type to filter by"),className:"c-people_filter",selectedOption:t,onOptionSelected:this.onChange})}}people_filter_account_type_PeopleFilterAccountType.displayName="PeopleFilterAccountType",people_filter_account_type_PeopleFilterAccountType.defaultProps={accountType:{type:A.h.all},hideDeactivatedUsers:!1,onAccountTypeChange:_.a};var Ms=people_filter_account_type_PeopleFilterAccountType,Ps=a("okZA");const xs=Object(I.b)("people search: tab opened, initializing data",(e,t)=>{const a=t(),n=Object(M.d)(a),s=Object(Qe.b)(a),r=Object(ln.a)(n),i=Object(Et.J)(s),o=Object(c.k)(a);r.forEach(t=>{if(t.options&&t.options.length>1){const a=t.name,n=[];if(i&&i[a]){const e=t.options.find(e=>e.value===i[a].value);e&&n.push(e.value)}n.push(...t.options.slice(0,3).map(e=>e.value)),Object(os.a)(n).slice(0,3).forEach(t=>{const n=o&&o[a]&&o[a].find(e=>e.value===t);e(Object(S.v)({id:a,value:t,checked:!!n&&n.checked}))})}})});xs.meta={name:"populateVisibleOptions",key:"actionsUniversalSearchPeopleSearchOpenedPopulateVisibleOptions",description:"people search: tab opened, initializing data"};const Ls=Object(I.b)("people search: tab opened, initializing data",(e,t)=>{const a=t(),n=Object(c.o)(a);return n&&"ready"===n.state&&n.refreshed>=Date.now()-36e5?(e(xs()),Promise.resolve()):(e(Object(S.A)()),e(Object(Ps.e)({reason:"people_search_open"})).then(()=>{e(xs()),e(Object(S.B)())}).catch(()=>{e(Object(S.z)())}))});Ls.meta={name:"updatePeopleSearchProfileFieldValues",key:"actionsUniversalSearchPeopleSearchOpenedUpdatePeopleSearchProfileFieldValues",description:"people search: tab opened, initializing data"};const Fs=Object(I.b)("people search: tab opened, initializing data",(e,t)=>{const a=t();return Object(C.m)(a,"feature_steeple_church_ext")?Promise.all([e(cs({reason:"people_search_open"})),e(Ls())]):e(Ls())});Fs.meta={name:"peopleSearchOpened",key:"actionsUniversalSearchPeopleSearchOpenedPeopleSearchOpened",description:"people search: tab opened, initializing data"},Fs.propTypes={};var Ds=Fs,Bs=a("oTSI"),Us=(a("Olm7"),a("NRPS")),qs=a("JvzI");const Hs=Object(Bs.a)(()=>{const e=Object(Us.a)(Object(qs.a)()),t={};return e.forEach(e=>{const a=e[1],n=e[0];t[a]=n}),t});const Ws=new q.b("search"),Gs=(r.default.shape({type:r.default.oneOf(Object(Ze.a)(A.h))}),r.default.func,r.default.func.isRequired,r.default.object.isRequired,r.default.objectOf(r.default.arrayOf(r.default.shape({value:r.default.string.isRequired,checked:r.default.bool.isRequired}))),r.default.func,r.default.array,r.default.func.isRequired,r.default.func,r.default.func,r.default.bool.isRequired,r.default.bool,r.default.bool.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.shape({state:r.default.oneOf(["loading","error","ready"]),refreshed:r.default.number}),r.default.bool.isRequired,r.default.string,r.default.func,r.default.array,r.default.string,{accountType:{type:A.h.all},visibleFilterState:{},sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:_.a,clogSearchFilterRemoved:_.a,peopleSearchOpened:_.a,peopleSearchCustomFilterChanged:_.a,timezoneSuggestions:[],teamProfileState:{state:"ready",refreshed:0},filterWorkspaceOnly:!1,searchOnlyWorkspaceTeamId:"",searchOnlyByEnterpriseTeamId:_.a,loggedInEnterpriseTeams:[],selfEnterpriseOrgName:""});class people_filter_ui_PeopleFilterUIBase extends n.Component{constructor(e){super(e),Object(y.a)(this,["onAccountTypeChange","onOnlySearchWorkspaceChange","onHideDeactivatedUsersChange","onSearchLimitTeamFilterDropdownChange"]),this.peopleSearchOpenedPromise=null}componentDidMount(){this.peopleSearchOpenedPromise=this.props.peopleSearchOpened()}componentWillUnmount(){this.peopleSearchOpenedPromise&&this.peopleSearchOpenedPromise.cancel()}onAccountTypeChange({type:e}={}){this.props.clogSearchFilterAdded({filter_account_type:e}),this.props.setPeopleSearchFilterType({type:e})}onOnlySearchWorkspaceChange(e){e.target.checked?this.props.clogSearchFilterAdded({filter_other:"workspace_only"}):this.props.clogSearchFilterRemoved({filter_other:"workspace_only"}),this.props.setSearchOnlySearchWorkspace({value:e.target.checked})}onSearchLimitTeamFilterDropdownChange(e){this.props.searchOnlyByEnterpriseTeamId({value:e.value})}onHideDeactivatedUsersChange(e){e.target.checked?this.props.clogSearchFilterAdded({filter_other:"hide_deactivated_users"}):this.props.clogSearchFilterRemoved({filter_other:"hide_deactivated_users"}),this.props.setPeopleSearchHideDeactivatedUsers({value:e.target.checked})}loadOptions(e,t){const a=new us.b(e);return Object(Qn.a)(t.map(t=>({value:t.value,label:t.label,score:0===e.length?0:a.normalizeAndScore(t.label)})),"score")}filterOptions(e,t,a){return t.filter(e=>isFinite(e.score)&&!a.some(t=>t.checked&&t.value===e.value))}renderTimezoneFilter(){const e=this.props.timezoneSuggestions,t=Hs(),a=Object.keys(t).map(e=>({value:e,label:t[e]})),n=Ws.t("Choose another");return s.a.createElement(Ut,{title:Ws.t("Time zone",{ns:"edit_profile"}),"data-qa":"search-filter-section-people-timezones"},s.a.createElement(At,{checkboxName:"timezone",placeholderText:n,showMoreOptionsAriaLabel:n,loadOptions:e=>Promise.resolve({options:this.loadOptions(e,a)}),visibleOptions:e,onOptionChange:(e,t)=>{this.props.peopleSearchTimezoneFilterChanged({label:e.label,value:e.value,checked:t})},onOptionAdd:t=>{const a=e&&e.find(e=>e.value===t.value),n=a&&a.checked;this.props.peopleSearchTimezoneFilterChanged({label:t.label,value:t.value,checked:!n})},filterOptions:(t,a)=>this.filterOptions(t,a,e)}))}renderPrefs(){var e=this.props;const t=e.showEnterpriseOptions,a=e.filterWorkspaceOnly,n=e.hideDeactivatedUsers,r=e.currentTeam,i=e.accountType,l=e.featureSearchLimitTeamFilter,c=e.searchOnlyWorkspaceTeamId,d=e.selfEnterpriseOrgName,u=e.loggedInEnterpriseTeams,p=i.type===A.h.deactivated;return s.a.createElement("div",null,t&&l?s.a.createElement(Ut,{title:Ws.t("Workspace"),"data-qa":"search-filter-workspace-section"},s.a.createElement("div",{className:"p-search_filter__select"},s.a.createElement(Xt,{loggedInEnterpriseTeams:u,selfEnterpriseOrgName:d,searchOnlyWorkspaceTeamId:c,onChange:this.onSearchLimitTeamFilterDropdownChange,featureSearchLimitTeamFilter:l}))):null,s.a.createElement(Ut,{title:Ws.t("More options")},s.a.createElement("div",{className:"p-search_filter__select"},t&&!l?s.a.createElement(_s,{currentTeam:r,filterWorkspaceOnly:a,checkOnlySearchWorkspace:this.onOnlySearchWorkspaceChange,featureSearchLimitTeamFilter:l}):null,s.a.createElement("label",{className:o()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":n,"p-search_filter__checkbox_label--disabled":p}),htmlFor:"search-people-filter-hide-deactivated-users"},Ws.t("Hide deactivated accounts")," ",s.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",disabled:p,checked:n,onChange:this.onHideDeactivatedUsersChange,id:"search-people-filter-hide-deactivated-users"})))))}render(){var e=this.props;const t=e.accountType,a=e.currentTeam,r=e.visibleFilterState,i=e.sharedTeams,o=e.teamProfileState,l=e.filters,c=e.filterSuggestions,d=e.hideDeactivatedUsers,u="loading"===o.state||"loading"===i.state,p=Ws.t("Choose another"),h=Object(ln.a)(a).filter(e=>e.options&&e.options.length>1),m={};return h.forEach(e=>{const t=e.name,a={};e.options.forEach(e=>{a[e.value]=e}),m[t]=r[t]?r[t].filter(e=>a[e.value]).map(e=>({value:e.value,label:a[e.value].label,checked:e.checked})):[]}),s.a.createElement(n.Fragment,null,s.a.createElement(Ut,{title:Ws.t("Account type")},s.a.createElement("div",{className:"p-search_filter__select"},s.a.createElement(Ms,{accountType:t,hideDeactivatedUsers:d,onAccountTypeChange:this.onAccountTypeChange}))),s.a.createElement(E.a,{enabled:["feature_steeple_church_ext"]},!u&&i.teams.length>0&&s.a.createElement(search_org_filter_SearchOrgFilter,{sharedTeams:i,filters:l,filterSuggestions:c,toggleSearchOrgFilter:this.props.togglePeopleSearchOrgFilter,clogSearchFilterAdded:this.props.clogSearchFilterAdded,clogSearchFilterRemoved:this.props.clogSearchFilterRemoved})),this.renderPrefs(),u?s.a.createElement("div",null,s.a.createElement(zt,{variation:0}),s.a.createElement(zt,{variation:1})):h.map((e,t)=>s.a.createElement(Ut,{key:e.name,title:e.label,"data-qa":"search-filter-section-people-custom"},s.a.createElement(At,{checkboxName:e.name,visibleOptions:m[e.name],loadOptions:t=>Promise.resolve({options:this.loadOptions(t,e.options)}),filterOptions:(t,a)=>this.filterOptions(t,a,m[e.name]),onOptionChange:(a,n)=>{n?this.props.clogSearchFilterAdded({filter_custom_profile:!0,filter_module_position:t,filter_position:m[e.name].indexOf(a)}):this.props.clogSearchFilterRemoved({filter_custom_profile:!0,filter_module_position:t,filter_position:m[e.name].indexOf(a)}),this.props.peopleSearchCustomFilterChanged({id:e.name,value:a.value,checked:n})},onOptionAdd:a=>{const n=r[e.name]&&r[e.name].find(e=>e.value===a.value),s=n&&n.checked;this.props.peopleSearchCustomFilterChanged({id:e.name,value:a.value,checked:!s}),s?this.props.clogSearchFilterRemoved({filter_custom_profile:!0,filter_module_position:t,filter_position:null}):this.props.clogSearchFilterAdded({filter_custom_profile:!0,filter_module_position:t,filter_position:null})},placeholderText:p,showMoreOptionsAriaLabel:p,showMoreOptions:e.options.length>m[e.name].length}))))}}people_filter_ui_PeopleFilterUIBase.displayName="PeopleFilterUIBase",people_filter_ui_PeopleFilterUIBase.defaultProps=b()({},Gs);const Ks={setPeopleSearchFilterType:(...e)=>bt(...e),peopleSearchCustomFilterChanged:(...e)=>ft(...e),peopleSearchTimezoneFilterChanged:(...e)=>gt(...e),clogSearchFilterAdded:(...e)=>Object(w.g)(...e),clogSearchFilterRemoved:(...e)=>Object(w.h)(...e),peopleSearchOpened:(...e)=>Ds(...e),togglePeopleSearchOrgFilter:(...e)=>mt(...e),setSearchOnlySearchWorkspace:(...e)=>ut(...e),setPeopleSearchHideDeactivatedUsers:(...e)=>_t(...e),searchOnlyByEnterpriseTeamId:(...e)=>pt(...e)};var Vs=Object(l.b)(e=>{const t=Object(c.l)(e),a=Object(c.s)(e),n=Object(c.m)(e),s=Object(Xe.a)(e),r=Object(C.b)(e).filter(e=>!!e.enterprise_id&&e.enterprise_id===s);return{accountType:t,currentTeam:Object(M.d)(e),visibleFilterState:Object(c.k)(e),sharedTeams:{state:a.state,teams:Object(M.j)(e,a.teamIds).map(e=>({id:e.id,name:Object(U.e)(e)}))},filters:Object(c.n)(e),filterSuggestions:Object(M.j)(e,n).map(e=>e.id),showEnterpriseOptions:Object(Je.d)(e),filterWorkspaceOnly:Object(j.f)(e),hideDeactivatedUsers:Object(j.d)(e),timezoneSuggestions:Object(c.p)(e),teamProfileState:Object(c.o)(e),featureSearchLimitTeamFilter:Object(C.m)(e,"feature_search_limit_team_filter"),allAccountsOfCurrentEnterprise:r,loggedInEnterpriseTeams:r.map(t=>Object(M.i)(e,t.id)),searchOnlyWorkspaceTeamId:Object(c.r)(e),selfEnterpriseOrgName:Object(M.e)(e)}},Ks)(people_filter_ui_PeopleFilterUIBase);a("yNt+");const zs=new q.b("search"),$s="IMPROVED_SEARCH",Ys=(r.default.oneOf(Object(Ze.a)(A.i)),r.default.func,r.default.number,r.default.func,r.default.object,r.default.object,r.default.func,r.default.func,r.default.object,r.default.object,r.default.func,r.default.func,r.default.func,r.default.objectOf(r.default.string),r.default.objectOf(r.default.string),r.default.func.isRequired,r.default.bool,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.bool,r.default.string,r.default.bool,r.default.bool,r.default.bool,r.default.bool,r.default.bool,r.default.bool,{sort:A.i.relevant,setSort:_.a,scrollPosition:0,setViewScrollPosition:_.a,moduleState:{},peopleResponse:{items:{}},setPageForModule:_.a,fetchSearchResultsByModule:_.a,logger:{error:_.a,info:_.a},telemeter:pe.d,clogSearchPeopleClick:_.a,clogSearchNextPage:_.a,clogSearchPreviousPage:_.a,memberSummaryLabels:{},iidMap:{},showNewPeopleSearch:!1,displayEmailAddresses:!1,currentDisplayQuery:"",featureFantailNurture:!1,markPeopleSearchSeen:_.a,incrementPeopleSearchSeenCount:_.a,onClickRefreshSearch:_.a,showMemberProfile:_.a,closeSearch:_.a,startImByMemberId:_.a,enqueueToast:_.a,openSearchFeedbackDialog:_.a,shouldIncrementPeopleSearchSeenCount:!1,featureSearchResultsVirtualized:!1,featureSearchTabsA11yImprovements:!1,isScreenReaderEnabled:!1,showNumResults:!0});class people_view_PeopleViewBase extends n.Component{constructor(e){super(e),Object(y.a)(this,["setScrollPosition","pageForward","pageBack","pageSearchResults","setListRef","onNavigateError","onViewProfileError","onFeedbackClick","getMemberClickHandler","renderSortToggle","onResultsFocusEnter","onResultsFocusLeave","getPropsForItem"]),this.searchResultsContainerRef=s.a.createRef(),this.state={hasKeyboardFocus:!1}}componentDidMount(){this.logTelemetry()}componentDidUpdate(e){e.moduleState.loading===this.props.moduleState.loading&&e.moduleState.error===this.props.moduleState.error&&e.moduleState.page===this.props.moduleState.page||this.logTelemetry()}componentWillUnmount(){this.props.showNewPeopleSearch&&this.props.markPeopleSearchSeen(),this.props.shouldIncrementPeopleSearchSeenCount&&this.props.incrementPeopleSearchSeenCount()}onSelectItem(e){var t=this;return Object(Is.coroutine)(function*(){t.props.clogSearchPeopleClick({type:w.c.people,iid:t.props.iidMap[e.id],userId:e.id});try{yield Object(Is.resolve)(t.props.startImByMemberId({memberId:e.id}))}catch(a){throw t.onNavigateError(()=>t.onSelectItem(e)),a}try{yield Object(Is.resolve)(t.props.showMemberProfile({memberId:e.id}))}catch(a){throw t.onViewProfileError(()=>t.onSelectItem(e)),a}t.props.closeSearch()})()}onNavigateError(e){this.props.enqueueToast({element:s.a.createElement(es.b,b()({position:"bottom-right",icon:"warning",showCloseButton:!0},this.getToastOffset()),s.a.createElement("span",null,zs.rt("<strong>Couldn\u2019t open conversation</strong>. This could be a connection issue or just a temporary blip. <a>Try again</a>",null,({tag:t,key:a,text:n})=>{switch(t){case"strong":return s.a.createElement("strong",{key:a},n);case"a":return s.a.createElement(Se.a,{key:a,onClick:e},n);default:return null}})))})}onResultsFocusEnter(){this.setState(()=>({hasKeyboardFocus:!0}))}onResultsFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}onViewProfileError(e){this.props.enqueueToast({element:s.a.createElement(es.b,b()({position:"bottom-right",icon:"warning",showCloseButton:!0},this.getToastOffset()),s.a.createElement("span",null,zs.rt("<strong>Couldn\u2019t open profile</strong>. This could be a connection issue or just a temporary blip. <a>Try again</a>",null,({tag:t,key:a,text:n})=>{switch(t){case"strong":return s.a.createElement("strong",{key:a},n);case"a":return s.a.createElement(Se.a,{key:a,onClick:e},n);default:return null}})))})}onFeedbackClick(){this.props.openSearchFeedbackDialog({module:"people"})}getMemberClickHandler(e){return t=>{t.preventDefault(),this.onSelectItem(this.props.getMemberById(e))}}getToastOffset(){if(this.searchResultsContainerRef.current){return this.searchResultsContainerRef.current.getWrappedInstance().getToastOffset()}return{}}getPropsForItem(e){return({index:t})=>{const a=e[t],n={};return a.type===Sn.PEOPLE_RESULT&&(this.state.hasKeyboardFocus||this.props.isScreenReaderEnabled)&&(n["aria-label"]=this.props.memberSummaryLabels[a.data.id]),n}}getVisiblePeople(){return this.props.peopleResponse.items[this.props.moduleState.page||1]||[]}setListRef(e){this.listEl=e}setScrollPosition(e){this.props.setViewScrollPosition({view:"people",position:e})}logTelemetry(){if(!this.props.moduleState.loading&&this.props.moduleState.error===A.g.None){const e=this.getVisiblePeople();e&&this.props.telemeter.count("search_ui_people_results_view_count",e.length)}}pageForward(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logger.info($s,"Page forward in people results"),this.props.clogSearchNextPage(),this.pageSearchResults(1)}pageBack(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logger.info($s,"Page backwards in people results"),this.props.clogSearchPreviousPage(),this.pageSearchResults(-1)}pageSearchResults(e){var t=this.props;const a=t.moduleState,n=t.peopleResponse,s=t.sort,r=Math.max(a.page+e,1);n.items[r]?this.props.setPageForModule({moduleType:"people",page:r}):this.props.fetchSearchResultsByModule({module:"people",sort:s,reason:"search-people-page",page:r})}renderEmptyResults(){var e=this.props;const t=e.displayEmailAddresses,a=e.currentDisplayQuery,r=e.featureFantailNurture,i=a.replace(/<@[^>]*>/g,"").indexOf("@")>-1;return!t&&i&&r?s.a.createElement(n.Fragment,null,s.a.createElement("p",null,zs.t("Slack couldn\u2019t find any people related to your search.")),s.a.createElement("p",null,zs.t("Searching for people by email has been disabled in this workspace. Questions? Contact a Workspace Admin."))):s.a.createElement(n.Fragment,null,s.a.createElement("p",null,zs.t("Slack couldn\u2019t find any people related to your search. You may want to try\u2026")),s.a.createElement("ul",null,s.a.createElement("li",null,zs.t("Using different keywords.")),s.a.createElement("li",null,zs.t("Checking for typos.")),s.a.createElement("li",null,zs.t("Adjusting your filters."))))}renderSortToggle(){var e=this.props;const t=e.sort,a=e.setSort,n=e.showNumResults,r=e.featureSearchTabsA11yImprovements,i=[[A.i.relevant,{uppercase:zs.t("Most relevant"),lowercase:zs.t("most relevant",{fallbackHash:"71b35d44d5b8790ce001fcd485b57fa927e93b01"})}],[A.i.name,{uppercase:zs.t("Name (A to Z)"),lowercase:zs.t("name (A to Z)",{fallbackHash:"e53a5982ee84aaa2d647582a947002c97d33552d"})}]],l=Object(Xn.a)(i);return s.a.createElement(H.e,{"data-qa":"people_sort_toggle",renderMenu:({onTriggerClose:e})=>s.a.createElement(H.f,null,i.map(([t,n])=>s.a.createElement(H.b,{"data-qa-sort":t,key:t,onSelected:()=>{a({sort:t}),e()}},n.uppercase))),position:"bottom-right",width:180,offsetX:0,offsetY:0},s.a.createElement(W.c,{"data-qa":"people_sort_selection","aria-label":r?zs.t("Channel results sorted by {sortName}",{sortName:l[t].lowercase}):void 0,className:o()(!n&&"c-search__section_header--compact")},!n&&"Sort by ",n?l[t].uppercase:l[t].lowercase,s.a.createElement(G.b,{type:"chevron-down",inline:!0})))}render(){var e=this.props;const t=e.scrollPosition,a=e.moduleState,n=e.peopleResponse,r=e.memberSummaryLabels,i=e.displayEmailAddresses,o=e.currentDisplayQuery,l=e.featureFantailNurture,c=this.getVisiblePeople(),d=c.reduce((e,t)=>(e[t.id]=t,e),{}),u=n.pagination&&n.pagination.total_count,p=u>0;n.debug&&Object(Jn.a)("peopleSearchExplain",Object(Qn.a)(n.debug.features,e=>-e.total_score));const h=n&&n.pagination&&n.pagination.page_count||0,m=h>1&&!a.loading,b=a.page||1,f=c.map(e=>({highlightData:e,member:this.props.getMemberById(e.id),iid:e.iid}));if(this.props.featureSearchResultsVirtualized){const e=Pn({moduleName:"people",peopleResults:f,isLoading:a.loading,errorType:a.error,totalItemCount:u,isPagerVisible:m,showPeopleDiscovery:this.props.showNewPeopleSearch}),n=e.map(e=>e.key),r=jn(e,{isLoading:a.loading,errorType:a.error,numResults:u,emptyResultsTitle:zs.t("No results"),pageForward:this.pageForward,pageBack:this.pageBack,onFeedbackClick:this.onFeedbackClick,totalPageCount:h,currentPageOffset:b,sortDropdown:this.renderSortToggle(),displayEmailAddresses:i,currentDisplayQuery:o,featureFantailNurture:l,startImByMemberId:this.props.startImByMemberId,showMemberProfile:this.props.showMemberProfile,onViewProfileError:this.onViewProfileError,onNavigateError:this.onNavigateError,getMemberClickHandler:this.getMemberClickHandler,telemeter:this.props.telemeter,showNumResults:this.props.showNumResults}),c=In(e),d=this.getPropsForItem(e);return s.a.createElement(Pa,{id:"c-search__tab_people",module:"people",scrollPosition:t,setScrollPosition:this.setScrollPosition,filterUI:s.a.createElement(Vs,null),ref:this.searchResultsContainerRef,rowKeys:n,rowRenderer:r,rowFocusability:c,onFocusEnter:this.onResultsFocusEnter,onFocusLeave:this.onResultsFocusLeave,getPropsForItem:d})}return s.a.createElement(Pa,{id:"c-search__tab_people",module:"people",loading:a.loading,errorType:a.error,scrollPosition:t,setScrollPosition:this.setScrollPosition,filterUI:s.a.createElement(Vs,null),numResults:u,emptyResultsTitle:zs.t("No results"),ref:this.searchResultsContainerRef,onClickRefreshSearch:this.props.onClickRefreshSearch,sortDropdown:this.renderSortToggle(),alertHeader:this.props.showNewPeopleSearch&&s.a.createElement("div",{className:"c-channel_search__new_feature_alert"},s.a.createElement(G.b,{className:"c-channel_search__new_feature_icon",type:"sparkles_filled"}),s.a.createElement("div",null,zs.rt("<strong>Find people at your organization</strong>. Now you can search for people by their name, profile info, or even the topics they talk about.",{fallbackHash:"07cbc99aff3e533e8b10d9bf430890987c65f7ae"})))},p?s.a.createElement(ya,{ref:this.setListRef,ids:c.map(e=>e.id),onSelectItem:(e,t)=>this.onSelectItem(this.props.getMemberById(t)),itemAriaLabel:e=>r[e],renderItem:e=>s.a.createElement(En,{key:e,iid:this.props.iidMap[e],member:this.props.getMemberById(e),memberWithHighlights:d[e],onClickMember:t=>{t.preventDefault(),this.onSelectItem(this.props.getMemberById(e))},startImByMemberId:this.props.startImByMemberId,showMemberProfile:this.props.showMemberProfile,onViewProfileError:this.onViewProfileError,onNavigateError:this.onNavigateError})}):this.renderEmptyResults(),!m&&s.a.createElement(Ke.a,{className:u>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),s.a.createElement($e,{visible:m,currentPageOffset:b,totalPageCount:h,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}}people_view_PeopleViewBase.displayName="PeopleViewBase",people_view_PeopleViewBase.defaultProps=Ys;var Qs=Object(l.b)(e=>{const t=Object(c.j)(e,"people")||{},a=Object(P.q)(e,{module:"people"})||{items:{}},n=a.items[t.page||1]||[],s={},r={},i=Object(de.b)(e);n.forEach(t=>{const a=Object(Qe.d)(e,t.id);r[t.id]=Object(As.a)({name:Object(Et.K)(a),isGuest:Object(Et.wb)(a),isSelf:Object(Et.Hb)(a),isDeleted:Object(Et.mb)(a),isAppOrBot:Object(Et.ib)(a)}),s[t.id]=t.iid});const o=Object(x.c)(e,"search_tab_counts"),l="counts"!==o&&"counts_and_sort"!==o;return{sort:Object(j.e)(e),scrollPosition:Object(c.q)(e).people,moduleState:t,peopleResponse:a,iidMap:s,memberSummaryLabels:r,isScreenReaderEnabled:i,getMemberById:t=>Object(Qe.d)(e,t),logger:Object(k.a)({state:e}),telemeter:Object(pe.c)({state:e}),showNewPeopleSearch:!Object(ae.k)(e,"seen_people_search"),displayEmailAddresses:Object(Ts.a)(e,"display_email_addresses"),currentDisplayQuery:Object(he.b)(e),featureFantailNurture:Object(Ns.a)(e),shouldIncrementPeopleSearchSeenCount:Object(ae.f)(e),featureSearchResultsVirtualized:Object(C.m)(e,"feature_search_results_virtualized"),featureSearchTabsA11yImprovements:Object(C.m)(e,"feature_search_tabs_a11y_improvements"),showNumResults:l}},e=>({setSort:(...t)=>e(ct(...t)),setViewScrollPosition:(...t)=>e(Object(S.J)(...t)),setPageForModule:(...t)=>e(Object(S.u)(...t)),fetchSearchResultsByModule:(...t)=>e(Object(N.d)(...t)),clogSearchPeopleClick:(...t)=>e(Object(w.l)(...t)),clogSearchNextPage:(...t)=>e(Object(w.j)(...t)),clogSearchPreviousPage:(...t)=>e(Object(w.m)(...t)),markPeopleSearchSeen:(...t)=>e(Object(N.j)(...t)),incrementPeopleSearchSeenCount:(...t)=>e(Object(N.e)(...t)),showMemberProfile:(...t)=>e(Object(D.j)(...t)),closeSearch:(...t)=>e(Object(F.a)(...t)),startImByMemberId:(...t)=>e(Object(ws.startImByMemberId)(...t)),enqueueToast:(...t)=>e(Object(ts.c)(...t)),openSearchFeedbackDialog:(...t)=>e(Object(N.r)(...t))}))(people_view_PeopleViewBase);const Xs=Object(I.b)("Clog a search open event using data from redux",(e,t,{tab:a}={})=>{e(Object(S.I)({tab:a})),Object(k.a)({getState:t}).info("IMPROVED_SEARCH",`Switching to tab "${a}"`)});Xs.meta={name:"setTab",key:"actionsUniversalSearchSetTabSetTab",description:"Clog a search open event using data from redux"},Xs.propTypes={method:r.default.string};var Js=Xs,Zs=(a("DFT4"),a("BA81"));const er=new q.b("search"),tr=(r.default.shape({messages:r.default.number,files:r.default.number,channels:r.default.number,people:r.default.number}),r.default.string.isRequired,r.default.func.isRequired,r.default.bool,r.default.bool,r.default.bool,r.default.func,{counts:{messages:NaN,files:NaN,channels:NaN,people:NaN},showCounts:!1,sortTabs:!1,featureSearchTabsA11yImprovements:!1,clogSearchOpen:_.a});class search_type_switch_SearchTypeSwitch extends n.PureComponent{constructor(e){super(e),Object(y.a)(this,["getClickHandler"])}getClickHandler(e){return()=>{this.props.setTab({tab:e}),this.props.clogSearchOpen({method:"search_tab"})}}isSortReady(e){return Number.isFinite(e.channels)&&Number.isFinite(e.people)&&Number.isFinite(e.files)}render(){const e=this.props.featureSearchTabsA11yImprovements,t=[{id:"messages",title:er.t("Messages"),titleCount:this.props.showCounts?this.props.counts.messages:NaN,isLoading:"messages"!==this.props.tab&&this.props.sortTabs&&!this.isSortReady(this.props.counts),isCountLoading:this.props.showCounts&&!Number.isFinite(this.props.counts.messages),onClick:this.getClickHandler("messages"),"data-qa":"search_tab_messages","aria-label":e?er.t("Messages, {numResults} {numResults, plural, =1 {result} other {results}}",{numResults:this.props.counts.messages||0}):void 0},{id:"files",title:er.t("Files"),titleCount:this.props.showCounts?this.props.counts.files:NaN,isLoading:"files"!==this.props.tab&&this.props.sortTabs&&!this.isSortReady(this.props.counts),isCountLoading:this.props.showCounts&&!Number.isFinite(this.props.counts.files),onClick:this.getClickHandler("files"),"data-qa":"search_tab_files","aria-label":e?er.t("Files, {numResults} {numResults, plural, =1 {result} other {results}}",{numResults:this.props.counts.files||0}):void 0},{id:"channels",title:er.t("Channels"),titleCount:this.props.showCounts?this.props.counts.channels:NaN,isLoading:"channels"!==this.props.tab&&this.props.sortTabs&&!this.isSortReady(this.props.counts),isCountLoading:this.props.showCounts&&!Number.isFinite(this.props.counts.channels),onClick:this.getClickHandler("channels"),"data-qa":"search_tab_channels","aria-label":e?er.t("Channels, {numResults} {numResults, plural, =1 {result} other {results}}",{numResults:this.props.counts.channels||0}):void 0},{id:"people",title:er.t("People"),titleCount:this.props.showCounts?this.props.counts.people:NaN,isLoading:"people"!==this.props.tab&&this.props.sortTabs&&!this.isSortReady(this.props.counts),isCountLoading:this.props.showCounts&&!Number.isFinite(this.props.counts.people),onClick:this.getClickHandler("people"),"data-qa":"search_tab_people","aria-label":e?er.t("People, {numResults} {numResults, plural, =1 {result} other {results}}",{numResults:this.props.counts.people||0}):void 0}];return this.props.sortTabs&&t.sort((e,t)=>"messages"===e.id?-1:"messages"===t.id?1:Number.isFinite(e.titleCount)?Number.isFinite(t.titleCount)?t.titleCount-e.titleCount:-1:1),s.a.createElement("div",{className:"c-search__tabs c-tabs__tab_menu"},s.a.createElement(Zs.a,{currentTabId:this.props.tab,tabs:t,formatCount:!0}))}}search_type_switch_SearchTypeSwitch.displayName="SearchTypeSwitch",search_type_switch_SearchTypeSwitch.defaultProps=tr;const ar={setTab:(...e)=>Js(...e),clogSearchOpen:(...e)=>Object(w.k)(...e)};var nr=Object(l.b)(e=>{const t=Object(x.c)(e,"search_tab_counts");return{counts:Object(P.r)(e),tab:Object(c.u)(e),showCounts:"counts"===t||"counts_and_sort"===t,sortTabs:"counts_and_sort"===t,featureSearchTabsA11yImprovements:Object(C.m)(e,"feature_search_tabs_a11y_improvements")}},ar)(search_type_switch_SearchTypeSwitch);r.default.string.isRequired,r.default.func.isRequired,r.default.bool;class search_view_SearchView extends n.PureComponent{renderCurrentView(){switch(this.props.tab){case"messages":return s.a.createElement(qn,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"files":return s.a.createElement(Yn,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"channels":return s.a.createElement(js,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"people":return s.a.createElement(Qs,{onClickRefreshSearch:this.props.onClickRefreshSearch});default:return null}}render(){const e=o()("c-search__container",{"c-search__container--primary_search_sonic":this.props.usePrimarySearch&&Object(u.a)(),"c-search__container--primary_search_legacy":this.props.usePrimarySearch&&!Object(u.a)()});return s.a.createElement(p.a,{id:h.I.SEARCH},s.a.createElement("div",{className:e},s.a.createElement("div",{className:o()("c-search"),"data-qa":"search_view"},!this.props.usePrimarySearch&&s.a.createElement(nr,null),this.renderCurrentView())))}}search_view_SearchView.displayName="SearchView",search_view_SearchView.defaultProps={usePrimarySearch:!1};t.a=Object(l.b)(e=>({tab:Object(c.u)(e),usePrimarySearch:Object(d.a)(e)}))(search_view_SearchView)},"5oz1":function(e,t,a){},"67Ky":function(e,t,a){},"6EwF":function(e,t,a){"use strict";a.r(t);var n=a("QbLZ"),s=a.n(n),r=a("NZ+B"),i=a("tn36"),o=a("q1tI"),l=a.n(o),c=a("aK/h"),d=a("XHGt"),u=a("TSYQ"),p=a.n(u),h=a("sJy+"),m=a("HOkk"),b=a("Rszm"),f=a("O0RF"),_=a("8wro"),g=a("XfeM"),y=a("t85p"),O=a("brL+"),C=a("S3eg"),v=a("h9dl"),E=a("H2PH"),k=a("nNoG"),S=a("oLrU"),j=a("e+d/");const I=new k.b("snippet-dialog"),w=Object(g.b)("Upload a Snippet, maybe share it too",(e,t,{broadcast:a,fileName:n,fileType:s,fileContent:r,channelOrMemberId:i,threadTs:o,introMessage:l,blocks:c}={})=>{const d=t(),u=Object(y.m)(d,"feature_sonic_snippets"),p=n||(u?I.t("Untitled"):""),h=j.a[s],m=h&&h.mimeType||"text/plain",b=new Blob([r],{type:m});b.name=p,b.snippetType=s;const f=Object(O.b)(d),_=Object(E.a)(f);return i?e(Object(v.a)({channelOrMemberId:i})).then(t=>_.uploadFiles({files:[b],shareData:{channelId:t,threadTs:t?o:void 0,clientMsgId:t?Object(S.a)():void 0,introMessage:l,blocks:c,broadcast:!(!t||!o)&&a}}).then(()=>e(Object(C.a)({id:t})))):_.uploadFiles({files:[b]})});w.meta={name:"uploadSnippet",key:"actionsUploadSnippetUploadSnippet",description:"Upload a Snippet, maybe share it too"},w.propTypes={fileName:c.default.string,fileType:c.default.string,fileContent:c.default.string.isRequired,channelOrMemberId:c.default.string,threadTs:c.default.string,introMessage:c.default.string,blocks:c.default.array,broadcast:c.default.bool};var T=w,N=a("AzV5"),A=a("aLpA"),R=a("RB1+"),M=a("JvzI"),P=a("+1yX"),x=a("XoJV"),L=a("dhvi"),F=a("IyaR"),D=a("Y6FH"),B=a("Hvpu"),U=a("Zwlx"),q=a("iJ4v"),H=a("r6UO");a("T/b3");a.d(t,"BaseSnippetDialog",function(){return snippet_dialog_SnippetDialog});const W=new k.b("snippet-dialog"),G=(c.default.string,c.default.string,c.default.string,c.default.string,c.default.bool,c.default.string,c.default.string,c.default.string,c.default.object,c.default.string,c.default.func.isRequired,c.default.func.isRequired,c.default.func.isRequired,c.default.bool,c.default.string,c.default.func.isRequired,c.default.string,c.default.func.isRequired,c.default.string,c.default.oneOf(["mpim","im","channel","private"]),c.default.node.isRequired,c.default.bool.isRequired,c.default.bool.isRequired,c.default.array,c.default.func.isRequired,c.default.func.isRequired,c.default.bool,{initialName:"",initialType:void 0,initialSnippetText:"",initialChannelId:void 0,initialShareWith:void 0,threadTs:void 0,viewContext:void 0,resetSnippetText:void 0,initialContents:void 0,resetChannelId:void 0,featureSonicSnippets:!1,msgText:"",channelType:null,selectedChannelId:null,disallowedKeywordInMsgText:null,msgOps:void 0,featureWysiwygComposer:!1});class snippet_dialog_SnippetDialog extends o.PureComponent{constructor(e){super(e),Object(i.a)(this,["handleBroadcastChange","handleFileNameChange","handleFileTypeChange","handleFileContentChange","handleShareWithChange","handleMsgTextChange","handleSubmit","handleSubmitError","shouldShowSpeedBump","handleCancel"]),this.state={fileName:e.initialName,fileType:e.initialType,fileContent:e.initialSnippetText,shareWith:Object(r.a)(e.initialShareWith)?e.initialShareWith:!!e.initialChannelId,overMsgLengthLimit:!1,broadcast:!1}}isGoButtonDisabled(){var e=this.props;const t=e.disallowedKeywordInMsgText,a=e.canPostInSelectedChannel,n=e.threadTs,s=e.canThread;var r=this.state;const i=r.overMsgLengthLimit,o=r.fileName,l=r.fileContent,c=r.shareWith,d=o.length>A.y;return c&&!a&&!n||c&&n&&!s||!!t||!l||i||d}shouldShowSpeedBump(e){if("cancel"===e||"close"===e){const e=this.state.fileContent;var t=this.props;const a=t.resetSnippetText,n=t.initialSnippetText;return t.featureWysiwygComposer?e!==n:e!==a}return!1}handleBroadcastChange(e){this.setState(()=>({broadcast:e}))}handleFileNameChange(e){this.setState(()=>({fileName:e}))}handleFileTypeChange(e){this.setState(()=>({fileType:e}))}handleFileContentChange(e){this.setState(()=>({fileContent:e}))}handleShareWithChange(e){const t=e.target.checked;this.setState(()=>({shareWith:!!t}))}handleMsgTextChange({text:e,msgOps:t,overLimit:a}){this.props.featureWysiwygComposer?this.props.setMsgOps(t):this.props.setMsgText(e),this.setState(()=>({overMsgLengthLimit:a}))}handleSubmit(){var e=this.props;const t=e.selectedChannelId,a=e.msgText,n=e.msgOps,s=e.threadTs,r=e.featureWysiwygComposer;var i=this.state;const o=i.broadcast,l=i.fileName,c=i.fileType,d=i.fileContent,u=i.shareWith;let p;r&&(p=this.props.converMsgOpsToRichTextMessage({msgOps:n,channelId:t,inThread:!!s})),this.props.uploadSnippet({fileName:Object(x.c)({locale:Object(M.a)(),text:l}),fileType:c,fileContent:d,channelOrMemberId:u?t:void 0,threadTs:u?s:void 0,introMessage:a,blocks:r?p:void 0,broadcast:o}).catch(this.handleSubmitError),this.props.closeModal()}handleSubmitError(){var e=this.props;const t=e.selectedChannelId,a=e.threadTs,n=e.msgText,s=e.initialContents,r=e.resetSnippetText,i=e.resetChannelId,o=e.viewContext;var c=this.state;const d=c.fileName,u=c.fileType,p=c.fileContent,h=c.shareWith;this.props.openModal({element:l.a.createElement(V,{initialName:d,initialType:u,initialSnippetText:p,initialChannelId:t,initialShareWith:h,initialContents:s,initialText:n,threadTs:a,resetSnippetText:r,resetChannelId:i,viewContext:o})})}handleCancel(){var e=this.props;const t=e.resetSnippetText,a=e.initialContents,n=e.resetChannelId,s=e.threadTs,r=e.viewContext,i=e.featureWysiwygComposer,o=Object(R.a)({channelId:n,threadTs:s,viewContext:r});if(o)if(i){if(!a||!o.setContents||!o.focus)return;o.setContents(a),o.focus()}else if(t){if(!o.setText)return;o.setText(t)}}maybeRenderBroadcast(){var e=this.props;const t=e.threadTs,a=e.canPostInSelectedChannel,n=e.channelType,s=e.selectedChannelName,r=this.state.broadcast;return t&&a?l.a.createElement("div",{className:"p-snippet_dialog__broadcast_section"},l.a.createElement(H.a,{channelType:n,selectedChannelName:s,value:r,onChange:this.handleBroadcastChange})):null}renderShareWith(){const e=this.state.shareWith,t=W.t("Share with:",{fallbackHash:"134bfa9822f411e84749498f9747ec887fd5d0fd",fallbackHashNs:"share-dialog"});return l.a.createElement(f.a,{text:t,htmlFor:"create-snippet-share-with-checkbox",type:"inline"},l.a.createElement(b.a,{id:"create-snippet-share-with-checkbox","data-qa":"share_with",checked:e,onChange:this.handleShareWithChange}))}renderChannelPicker(){var e=this.props;const t=e.selectedChannelId,a=e.setSelectedChannel,n=this.state.shareWith;return l.a.createElement(D.a,{onChange:a,initialChannelId:t,isDisabled:!n,dialogType:"share_snippet_dialog"})}renderShareWithPicker(){var e=this.props;const t=e.selectedChannelId,a=e.featureSonicSnippets,n=e.threadTs;return n?l.a.createElement(q.a,{label:a?W.t("Sharing snippet in a thread"):"",channelId:t,threadTs:n}):l.a.createElement("div",{className:"p-snippet_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}renderShareAlert(){if(!this.state.shareWith)return null;const e=Object(U.a)(s()({},this.props));return e?l.a.createElement("div",{className:"p-share_dialog__section"},l.a.createElement(h.d,{type:"inline",level:"warning",className:"margin_bottom_100"},e)):null}renderMessageInput(){var e=this.props;const t=e.selectedChannelId,a=e.msgText,n=this.state.shareWith,s=W.t("Add a message, if you\u2019d like.",{fallbackHash:"23c9aa1fa55b5fbe8da1b3748ad70b595d6fadc5",fallbackHashNs:"share-dialog"}),r=p()("p-share_dialog__section","p-share_dialog__create_snippet_message_input",{"p-share_dialog__create_snippet_message_input--hide":!n}),i=Object(P.a)(t)?t:void 0;return l.a.createElement("div",{className:r},l.a.createElement(F.a,{text:a,channelId:i,onTextChange:this.handleMsgTextChange,enabled:n,placeholder:s,ariaLabel:s,onEnter:this.handleSubmit}),this.maybeRenderBroadcast())}render(){var e=this.state;const t=e.fileName,a=e.fileType,n=e.fileContent;if(!this.props.featureSonicSnippets)return null;const s=W.t("Create snippet"),r=W.t("Create Snippet");return l.a.createElement(m.a,{className:"p-snippet_dialog",title:s,goButtonText:r,useSlackScrollbarWithPadding:!0,shouldCloseOnGo:!1,onGo:this.handleSubmit,onClose:this.handleCancel,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled(),getShouldShowSpeedBump:this.shouldShowSpeedBump,speedBumpTitleText:W.t("Are you sure you want to discard this snippet permanently?"),speedBumpCancelButtonText:W.t("No, keep it"),speedBumpContinueButtonText:W.t("Yes, discard this snippet"),showCancelButton:!1},l.a.createElement(_.a,{fileName:t,onFileNameChange:this.handleFileNameChange,fileType:a,onFileTypeChange:this.handleFileTypeChange,fileContent:n,onFileContentChange:this.handleFileContentChange,onKBSubmit:this.handleSubmit}),this.renderShareAlert(),this.renderMessageInput())}}snippet_dialog_SnippetDialog.displayName="SnippetDialog",snippet_dialog_SnippetDialog.defaultProps=G;const K=Object(d.b)(function(e,t){return s()({},Object(B.b)(e,t),{featureSonicSnippets:Object(y.m)(e,"feature_sonic_snippets")})},function(e){return{uploadSnippet:(...t)=>e(T(...t)),closeModal:(...t)=>e(Object(L.a)(...t)),openModal:(...t)=>e(Object(L.e)(...t)),converMsgOpsToRichTextMessage:(...t)=>e(Object(N.a)(...t))}})(snippet_dialog_SnippetDialog),V=Object(B.a)(K);t.default=V},"6S4m":function(e,t,a){},"6mX7":function(e,t,a){},"6ne/":function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("jo6Y"),i=a.n(r),o=a("q1tI"),l=a.n(o),c=a("aK/h"),d=a("hXpn"),u=a("kd6D"),p=a("0z7M");a("JfyJ");c.default.string,c.default.string.isRequired,c.default.bool,c.default.bool,c.default.bool,c.default.node;const h={className:void 0,isActive:!1,isDeactivated:!1,isDisabled:!1,secondaryContent:void 0};function m(e){let t,a=e.className,n=e.isActive,r=e.isDeactivated,o=e.isDisabled,c=e.secondaryContent,h=i()(e,["className","isActive","isDeactivated","isDisabled","secondaryContent"]);return n?t=o||r?u.c.highlightDim:u.c.highlightLight:(o||r)&&(t=u.c.dim),l.a.createElement(d.a,{className:a,primaryContent:l.a.createElement(p.a,s()({isDeactivated:r},h)),secondaryContent:c,size:"medium",style:t})}m.displayName="MediumUserGroupListEntity",m.defaultProps=h,t.a=m},"6u4E":function(e,t,a){},"7/T7":function(e,t,a){},"7ARk":function(e,t,a){"use strict";var n=a("XfeM"),s=a("BrU6"),r=a("GbAX"),i=a("Mj3f"),o=a("HG/F");const l=Object(n.b)("Reset people search UI",(e,t)=>{const a=t().searchUi.sharedTeams.teamIds;e(Object(i.e)()),a&&Array.isArray(a)&&a.length&&e(Object(o.f)({teamIds:a.slice(0,3)}))});l.meta={name:"resetPeopleSearchUi",key:"actionsUniversalSearchResetPeopleSearchUiResetPeopleSearchUi",description:"Reset people search UI"};var c=l,d=a("iW0Y"),u=a("tfx1"),p=a("YYb+"),h=a("JrUZ"),m=a("smh8"),b=a("hPzE");const f=Object(n.b)("Clear the search input, resetting the editable query and ending the search and query sessions",(e,t)=>{const a=t();if(e(Object(s.a)({textyString:"",fetchAutocompleteSuggestions:!0})),e(Object(d.a)({interfaceMode:u.a.EDIT})),e(Object(h.s)()),e(Object(i.m)()),e(Object(m.a)()),e(Object(i.c)()),e(Object(p.g)()),e(c()),!Object(r.v)(a)){e(Object(b.c)());const t=Object(r.t)(a);t&&(clearTimeout(t),e(Object(i.G)({sessionTimeoutId:null})))}});f.meta={name:"clearSearchInput",key:"actionsUniversalSearchClearSearchInputClearSearchInput",description:"Clear the search input, resetting the editable query and ending the search and query sessions"},f.propTypes=null;t.a=f},"7SIE":function(e,t,a){},"81jb":function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("MnCE"),o=a("TSYQ"),l=a.n(o);a("dVmK");r.default.node.isRequired,r.default.string,r.default.string;const c={className:void 0,"data-qa":void 0},d=({children:e,className:t,"data-qa":a})=>s.a.createElement("div",{className:l()(t,"c-card"),"data-qa":a},e);d.displayName="Card",d.displayName="Card",d.defaultProps=c;var u=Object(i.a)(d);r.default.node.isRequired,r.default.string,r.default.string;const p={className:void 0,"data-qa":void 0},h=({children:e,className:t,"data-qa":a})=>s.a.createElement("div",{className:l()("c-card__header",t),"data-qa":a},e);h.displayName="CardHeader",h.displayName="CardHeader",h.defaultProps=p;var m=Object(i.a)(h);r.default.node.isRequired,r.default.string,r.default.string;const b={className:void 0,"data-qa":void 0},f=({children:e,className:t,"data-qa":a})=>s.a.createElement("div",{className:l()("c-card__section",t),"data-qa":a},e);f.displayName="CardSection",f.displayName="CardSection",f.defaultProps=b;var _=Object(i.a)(f);a.d(t,"a",function(){return u}),a.d(t,"b",function(){return m}),a.d(t,"c",function(){return _})},"8IIt":function(e,t,a){},"8ISr":function(e,t,a){},"8LWd":function(e,t,a){},"8Mhq":function(e,t,a){"use strict";var n=a("q2IZ");t.a=n.a},"8XR2":function(e,t,a){},"8tlt":function(e,t,a){},"8vJI":function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("XfeM"),o=a("dhvi"),l=a("8Mhq"),c=a("XHGt"),d=a("81nI"),u=a("7nxQ"),p=a("q2IZ"),h=a("NB3s"),m=a("0f2Y");a("kNze");r.default.func.isRequired;const b=({dispatch:e})=>{const t=Object(n.useCallback)(()=>{e(Object(o.a)())},[e]),a=Object(n.useMemo)(()=>Object(d.b)({zdLocale:Object(u.a)()}),[]);return s.a.createElement(h.a,{isOpen:!0,centered:!0,closeModal:t,maxWidth:600,className:"p-help_dialog"},s.a.createElement(h.h,null,s.a.createElement(h.j,{title:"Help"},s.a.createElement(m.a,{href:a,className:"p-help_dialog__browse"},"Browse all answers"))),s.a.createElement(h.d,{showScrollIndicatorBottom:!1},s.a.createElement("div",{className:"p-help_dialog__content"},s.a.createElement(p.a,{withoutFullscreenModal:!0}))))};b.displayName="HelpDialog";var f=Object(c.b)()(b),_=a("kcos");a.d(t,"a",function(){return g});const g=Object(i.b)("Opens the help modal",(e,t,a)=>{Object(_.c)(t())?e(Object(o.e)({element:s.a.createElement(f,null)})):e(Object(o.e)({element:s.a.createElement(l.a,a)}))});g.meta={name:"openHelpModal",key:"actionsHelpActionsOpenHelpModal",description:"Opens the help modal"},g.propTypes={trigger:r.default.string.isRequired}},"8vlY":function(e,t,a){},"8yst":function(e,t,a){},"8zv/":function(e,t,a){},"9/ob":function(e,t,a){"use strict";var n=a("aK/h"),s=a("t85p");const r={children:n.default.node,enabled:n.default.array,disabled:n.default.array,featureFlags:n.default.object};function i(e,t){const a=function(e){const t=e&&e.store;if(t&&t.getState)return t.getState();return}(t);if(!a)throw new Error("Feature component is being used without being provided a redux instance. A Feature component must have a Provider ancestor");const n=function(e,t){var a=t.enabled;const n=void 0===a?[]:a;var r=t.disabled;const i=void 0===r?[]:r,o={};return n.concat(i).forEach(t=>{o[t]=!!Object(s.m)(e,t)}),{featureFlags:o}}(a,e).featureFlags,r=e.enabled,i=e.disabled,o=e.children;return r.length&&r.some(e=>!n[e])?null:i.some(e=>n[e])?null:o}i.contextTypes={store:n.default.object},i.propTypes=r,i.defaultProps={children:null,enabled:[],disabled:[],featureFlags:{}};var o=i;t.a=o},"97Bz":function(e,t,a){},"97va":function(e,t,a){"use strict";var n=a("XfeM"),s=a("S3eg");const r=Object(n.b)("Switches to the App Launcher view",e=>{e(Object(s.a)({id:"Papps"}))});r.meta={name:"openAppLauncherView",key:"actionsOpenAppLauncherViewOpenAppLauncherView",description:"Switches to the App Launcher view"},t.a=r},"9Oym":function(e,t,a){},"9jbU":function(e,t,a){},"9m5W":function(e,t,a){},"9pzU":function(e,t,a){},"9wy/":function(e,t,a){},ABxf:function(e,t,a){},AByf:function(e,t,a){},ALaB:function(e,t,a){"use strict";var n=a("ifKl"),s=a("aK/h"),r=a("q1tI"),i=a.n(r),o=a("XHGt"),l=a("TSYQ"),c=a.n(l),d=a("fYfO"),u=a("t85p"),p=a("hOQf"),h=a("HvGc"),m=a("nNoG"),b=a("ynxK");const f=new m.b("message"),_=(s.default.string.isRequired,s.default.string.isRequired,s.default.string.isRequired,s.default.string.isRequired,s.default.string,s.default.func,s.default.bool,{className:void 0,showThread:n.a,featureNewRepliesAfterBcast:!1});class ThreadBroadcastFooter extends r.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){var t=this.props;const a=t.channelId,n=t.threadTs,s=t.ts;e.preventDefault(),this.props.showThread({channelId:a,threadTs:n,highlightTs:s})}render(){var e=this.props;const t=e.ts,a=e.latestReply;if(!e.featureNewRepliesAfterBcast||!a)return null;if(a<=t)return null;const n=c()("c-message__broadcast_footer",this.props.className);return i.a.createElement(b.a,{className:n,onClick:this.onClick},f.t("View newer replies"))}}ThreadBroadcastFooter.displayName="ThreadBroadcastFooter",ThreadBroadcastFooter.defaultProps=_;t.a=Object(o.b)((e,t)=>{const a=t.channelId,n=t.threadTs,s=Object(d.a)(e,a,n);return{latestReply:Object(p.C)(s),featureNewRepliesAfterBcast:Object(u.m)(e,"feature_new_replies_after_bcast")}},{showThread:h.l})(ThreadBroadcastFooter)},ARZM:function(e,t,a){"use strict";var n=a("3zPy"),s=a("aK/h"),r=a("XfeM"),i=a("YYb+"),o=a("iH/p"),l=a("1F8+");const c=Object(r.b)("toggle the omniswitcher using command+k",(e,t,{key:a}={})=>{Object(i.e)(t())?e(Object(l.a)()):e(Object(o.g)({key:a}))});c.meta={name:"toggleFromQuickSwitcherCmd",key:"actionsUniversalSearchToggleFromToggleFromQuickSwitcherCmd",description:"toggle the omniswitcher using command+k"},c.propTypes={key:s.default.string.isRequired};const d=Object(r.b)("maybe shows omni switcher modal",(e,t,{event:a,keyCode:s}={})=>{let r;return a&&a.preventDefault(),s&&(s===n.codes.k?r="k":s===n.codes.t&&(r="t")),e(c({key:r||"button"})),!0});d.meta={name:"maybeShowOmniSwitcher",key:"actionsToggleOmniSwitcherMaybeShowOmniSwitcher",description:"maybe shows omni switcher modal"},d.propTypes={event:s.default.object,keyCode:s.default.number};t.a=d},Aev0:function(e,t,a){},AuaN:function(e,t,a){},BfV3:function(e,t,a){},Blhu:function(e,t,a){},BuFM:function(e,t,a){},Bui7:function(e,t,a){},C8Zo:function(e,t,a){},"C9/x":function(e,t,a){"use strict";var n=a("pfyZ");t.a=(({isPinned:e=!1,isEphemeral:t=!1,isStarred:a=!1,isBroadcast:s=!1,subtype:r,sliHighlight:i}={})=>{return{isPinned:e,isStarred:a,isEphemeral:t,isBroadcast:s,isCustomResponse:"slackbot_response"===r,isSliHighlight:Object(n.i)(i)}})},CDIG:function(e,t,a){},CDdZ:function(e,t,a){},CSbb:function(e,t,a){e.exports=a.p+"gsuite@2x-321c184.png"},CSrb:function(e,t,a){},CUc0:function(e,t,a){"use strict";var n=a("NFsq"),s=a("7EGn"),r=a("aK/h"),i=a("XfeM"),o=a("um7Q"),l=a("g5qt"),c=a("1hAG"),d=a("rWF5"),u=a("cewN"),p=a("n74X"),h=a("GdsW");const m=Object(i.b)("Open channel from another workspace",(e,t,{channelId:a,teamId:r}={})=>{const i=t();if(Object(d.v)()){return(Object(n.a)(Object(l.qb)(i),r)?Promise.resolve():Object(h.i)(r)).then(()=>new Promise(e=>window.requestAnimationFrame(e))).then(()=>{if(Object(d.w)("3.2"))Object(l.m)(r,a);else{const e=document.createElement("iframe"),t=Object(u.c)({team:r,id:a});e.src=`slack://channel${t}`,document.body.appendChild(e),setTimeout(()=>e.remove(),1e3)}})}const m=Object(c.i)(i,r),b=Object(s.a)(m,"domain"),f=`${Object(o.b)(i,b)}/messages/${a}`;return Object(p.d)(f,r),Promise.resolve()});m.meta={name:"openChannelFromAnotherTeam",key:"actionsOpenChannelFromAnotherTeamOpenChannelFromAnotherTeam",description:"Open channel from another workspace"},m.propTypes={channelId:r.default.string.isRequired,teamId:r.default.string.isRequired},t.a=m},Cmng:function(e,t,a){},CoJr:function(e,t,a){},CsEc:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("ifKl"),i=a("q1tI"),o=a.n(i),l=a("XHGt"),c=a("aK/h"),d=a("TSYQ"),u=a.n(d),p=a("4M+g"),h=a("pfyZ"),m=a("t85p"),b=a("Uk1S"),f=a("vmJv"),_=a("S3eg"),g=a("LzXF"),y=a("HvGc"),O=a("kcos"),C=a("hOQf"),v=a("6kok"),E=a("C9/x"),k=a("YmYS"),S=a("2ojh"),j=a("od5y"),I=a("0f2Y"),w=a("zrHi"),T=a("tMdt"),N=a("Q/6m");const A=new(a("nNoG").b)("message"),R={PINNED:"pinned",UNPINNED:"unpinned",STARRED:"starred",UNSTARRED:"unstarred"},M=(c.default.object.isRequired,c.default.string,c.default.bool,c.default.bool,{currentUserId:void 0,isIAP1Enabled:!1,featureContextualMessageShortcuts:!1});class labels_aria_live_message_LabelsAriaLiveMessage extends i.Component{constructor(e){super(e),this.state={ariaLiveMessage:null}}componentDidUpdate(e){this.maybeSetAriaLiveMessage(e)}componentWillUnmount(){this.cancelTimerToClearMessage()}getAriaLiveMessageOnUpdate(e){var t=this.props;const a=t.currentUserId,n=t.msg,s=Object(C.K)(e.msg),r=(s&&s.pinnedBy)===a,i=Object(C.K)(n),o=(i&&i.pinnedBy)===a,l=Object(C.rb)(e.msg),c=Object(C.rb)(n);return r&&!o?R.UNPINNED:!r&&o?R.PINNED:!l&&c?R.STARRED:l&&!c?R.UNSTARRED:null}getAriaLiveMessageText(){var e=this.props;const t=e.isIAP1Enabled,a=e.featureContextualMessageShortcuts,n=this.state.ariaLiveMessage;return a?n===R.PINNED?A.t("Added to the pinned items",{note:"Used to confirm the pin action for customers using screen readers. Not visible on screen."}):n===R.UNPINNED?A.t("Removed from the pinned items",{note:"Used to confirm the remove pin action for customers using screen readers. Not visible on screen."}):n===R.STARRED?t?"Added to your saved items":A.t("Added to your starred items",{note:"Used to confirm the star action for customers using screen readers. Not visible on screen."}):n===R.UNSTARRED?t?"Removed from your saved items":A.t("Removed from your starred items",{note:"Used to confirm the remove star action for customers using screen readers. Not visible on screen."}):"":""}maybeSetAriaLiveMessage(e){if(!this.props.featureContextualMessageShortcuts)return;const t=this.getAriaLiveMessageOnUpdate(e);t&&t!==this.state.ariaLiveMessage&&(this.cancelTimerToClearMessage(),this.setState(()=>({ariaLiveMessage:t}),()=>{this.startTimerToClearMessage()}))}startTimerToClearMessage(){this.ariaLiveMessageTimer=setTimeout(()=>{this.setState(()=>({ariaLiveMessage:null}))},3e3)}cancelTimerToClearMessage(){clearTimeout(this.ariaLiveMessageTimer)}render(){return o.a.createElement("div",{className:"c-message_kit__labels__offscreen_message","aria-live":"assertive"},this.getAriaLiveMessageText())}}labels_aria_live_message_LabelsAriaLiveMessage.displayName="LabelsAriaLiveMessage",labels_aria_live_message_LabelsAriaLiveMessage.defaultProps=M;var P=Object(l.b)(function(e){return{currentUserId:Object(m.d)(e),isIAP1Enabled:Object(O.c)(e),featureContextualMessageShortcuts:Object(m.m)(e,"feature_contextual_message_shortcuts")}})(labels_aria_live_message_LabelsAriaLiveMessage);a("GZud");const x={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled",broadcast:"jump"},L=(c.default.object.isRequired,c.default.string,c.default.node,c.default.bool,c.default.bool,c.default.bool,c.default.oneOf(["light","dense"]),c.default.object,c.default.string,c.default.string,c.default.bool,c.default.bool,c.default.func,c.default.bool,c.default.func,{className:void 0,children:void 0,showPinned:!0,showStarred:!0,showBroadcast:!1,theme:"light",sliHighlight:void 0,currentUserId:void 0,primaryView:void 0,isSelfIm:!1,isSlackbotIm:!1,dispatch:r.a,isIAP1Enabled:!1,setBackground:r.a});class labels_MessageLabels extends i.PureComponent{constructor(e){super(e),this.onBroadcastClick=this.onBroadcastClick.bind(this),this.renderHighlight=this.renderHighlight.bind(this),this.renderStarButton=this.renderStarButton.bind(this),this.renderBroadcast=this.renderBroadcast.bind(this),this.onStarClick=this.onStarClick.bind(this),this.labelText=null,this.primaryLabelType=null}componentDidMount(){this.setBackground()}componentDidUpdate(){this.setBackground()}onStarClick(){(0,this.props.dispatch)(Object(y.k)())}onBroadcastClick(e){var t=this.props;const a=t.dispatch,n=t.msg,s=t.primaryView;e.preventDefault(),s!==n.channel?a(Object(_.a)({id:n.channel,startTs:n.ts})):a(Object(g.c)({ts:n.ts,highlight:!0}))}setBackground(){(0,this.props.setBackground)({labels:this.labelText&&this.primaryLabelType})}getLabelTypes(){var e=this.props;const t=e.msg,a=e.sliHighlight,n=e.showPinned,s=e.showStarred,r=e.showBroadcast,i=Object(C.K)(t);return Object(E.a)({isPinned:n&&!!i,isEphemeral:Object(C.bb)(t),isStarred:s&&Object(C.rb)(t),isBroadcast:r&&Object(C.ub)(t),subtype:t.subtype,sliHighlight:!!a})}renderPinnedBy(e){return o.a.createElement(w.a,{className:"c-message_kit__labels__link",id:e})}renderStarButton({text:e}={}){return e?o.a.createElement(I.a,{onClick:this.onStarClick,className:"c-message_kit__labels__link"},e):null}renderBroadcast({text:e}={}){return e?o.a.createElement(I.a,{onClick:this.onBroadcastClick,className:"c-message_kit__labels__link"},e):null}renderLabelText(e){var t=this.props;const a=t.msg,n=t.currentUserId,r=t.isSelfIm,i=t.isSlackbotIm,l=t.isIAP1Enabled,c=Object(C.K)(a),d=c&&c.pinnedBy,u=Object(S.a)(s()({},e,{isSelfIm:r,isSlackbotIm:i,currentUserId:n,pinnedBy:d,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton,renderHighlight:this.renderHighlight,renderBroadcast:this.renderBroadcast,featureMessageLabelsCopy:!0,isIAP1Enabled:l}));return u?o.a.createElement("span",{className:"c-message_kit__labels__text"},u):null}renderLabelIcon(e){const t=this.props.isIAP1Enabled;let a=x[e];return a?(t&&"starred"===e&&(a="bookmark-filled"),o.a.createElement("div",{className:"c-message_kit__labels__icon"},o.a.createElement(j.b,{type:a,size:"inherit"}))):null}renderHighlight(){var e=this.props;const t=e.msg,a=e.sliHighlight,n=t.channel,s=t.ts;return Object(h.i)(a)?o.a.createElement(T.a,{sliHighlight:a,channelId:n,ts:s}):null}render(){var e=this.props;const t=e.children,a=e.theme,n=e.msg,s=this.getLabelTypes(),r=Object(k.a)(s),i=this.renderLabelIcon(r),l=this.renderLabelText(s);this.labelText=l,this.primaryLabelType=r;const c=u()(this.props.className,"c-message_kit__labels",`c-message_kit__labels--${r}`,`c-message_kit__labels--${a}`),d=l?o.a.createElement("div",{className:c},o.a.createElement("div",{className:"c-message_kit__labels__label"},i,l),t):t;return o.a.createElement(o.a.Fragment,null,o.a.createElement(P,{msg:n}),d)}}labels_MessageLabels.displayName="MessageLabels",labels_MessageLabels.defaultProps=L;t.a=Object(N.b)(Object(l.b)((e,t)=>{const a=t.msg;if(!a)return null;const n=a.channel,s=a.ts,r=Object(m.d)(e),i=Object(p.e)(e,n),o=Object(f.a)(e);const l=Object(h.e)(e,{channelId:n,ts:s}).sliHighlight,c=Object(v.Ib)(i),d=Object(v.Ub)(r,i);return{theme:Object(b.a)(e),currentUserId:r,primaryView:o,sliHighlight:l,isSlackbotIm:c,isSelfIm:d,isIAP1Enabled:Object(O.c)(e)}})(labels_MessageLabels))},D3Vj:function(e,t,a){},DBPf:function(e,t,a){"use strict";var n=a("q1tI"),s=a("XHGt"),r=a("aK/h"),i=a("yHhI"),o=a("G3Sk");const l=new(a("nNoG").b)("view");r.default.string.isRequired,r.default.number,r.default.object.isRequired;let c=0;class document_title_DocumentTitle extends n.PureComponent{componentDidMount(){c&&this.props.logger.error("Multiple DocumentTitles mounted"),c+=1,this.originalTitle=document.title,this.updateTitle()}componentDidUpdate(e){e.title===this.props.title&&e.totalUnreadHighlights===this.props.totalUnreadHighlights||this.updateTitle()}componentWillUnmount(){c-=1,document.title=this.originalTitle}updateTitle(){var e=this.props;const t=e.totalUnreadHighlights,a=e.title,n=l.t("Slack");0!==a.length?document.title=t?`${n} | ${a} | ${this.unreadHighlightsCountString()}`:`${n} | ${a}`:document.title=n}unreadHighlightsCountString(){return l.t("{totalUnreadHighlights, plural, =1 {# new item} other {# new items}}",{totalUnreadHighlights:this.props.totalUnreadHighlights})}render(){return null}}document_title_DocumentTitle.displayName="DocumentTitle",document_title_DocumentTitle.defaultProps={totalUnreadHighlights:null};var d=Object(s.b)(e=>({logger:Object(i.a)({state:e}),totalUnreadHighlights:Object(o.f)(e)}))(document_title_DocumentTitle);t.a=d},DEaQ:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("q1tI"),i=a.n(r),o=a("aK/h"),l=a("XHGt"),c=a("MREy"),d=a("od5y"),u=a("Gogr"),p=a("1hAG"),h=a("vmJv"),m=a("Gmrf"),b=a("rWF5"),f=a("YB7p"),_=a("ICFZ"),g=a("GNdI"),y=a("rb67"),O=a("4ULK"),C=a("rz65"),v=a("nOCT");o.default.object,o.default.string.isRequired,o.default.string,o.default.string.isRequired,o.default.string.isRequired,o.default.object.isRequired;const E={menuProps:void 0,lastError:void 0},k="not registered",S=document&&document.documentElement&&document.documentElement.dataset,j={versionTs:S.versionTs,versionHash:S.versionHash,minVersionDataTs:v.a};class DebugMenu extends r.Component{constructor(e){super(e),this.resetCredentials=this.resetCredentials.bind(this),this.copyVersionInfo=this.copyVersionInfo.bind(this),this.debugMenuPurgeStoredModel=this.debugMenuPurgeStoredModel.bind(this),this.copyVersionInfo=this.copyVersionInfo.bind(this),this.state={sw:k,cachedRequests:{},storageQuota:0,storageUsage:0}}componentWillUnmount(){this.serviceWorkerP&&this.serviceWorkerP.cancel&&this.serviceWorkerP.cancel(),this.cachedRequestsP&&this.cachedRequestsP.cancel&&this.cachedRequestsP.cancel(),this.storageEstimateP&&this.storageEstimateP.cancel&&this.storageEstimateP.cancel()}UNSAFE_componentWillMount(){this.serviceWorkerP=Object(y.c)().then(e=>{void 0!==e&&e.active&&this.setState(()=>({sw:e.active.state}))}),this.cachedRequestsP=Object(y.b)().then(e=>{e&&this.setState(()=>({cachedRequests:e}))}),Object(b.r)()&&(this.storageEstimateP=navigator.storage.estimate().then(e=>{this.setState(()=>({storageQuota:e.quota,storageUsage:e.usage}))}))}copyVersionInfo(){const e=I(j.versionTs),t=I(j.minVersionDataTs);Object(_.c)(`Version TS: ${j.versionTs}${e&&` (${e})`||""}, Version Hash: ${j.versionHash}, Min Version Data TS: ${j.minVersionDataTs}${t&&` (${t})`||""}`)}debugMenuPurgeStoredModel(){return Object(O.a)(Object(g.a)())}resetCredentials(){Object(u.g)(),Object(f.b)({reason:"Reload initiated from user clicking reset credentials in sonic debug menu",reasonKey:"sonic_debug_menu",noCache:!0})}renderSWStorage(){return Object(b.r)()&&this.state.storageUsage&&this.state.storageQuota?i.a.createElement(i.a.Fragment,null,"Storage: ",(this.state.storageUsage/1024/1024).toFixed(1)," of"," ",Math.round(this.state.storageQuota/1024/1024),"MB (",(this.state.storageUsage/this.state.storageQuota).toFixed(2),"%)"):null}render(){var e=this.props;const t=e.menuProps,a=e.lastError,n=e.version,r=Object.keys(this.state.cachedRequests).map(e=>{return{label:`${e}: ${this.state.cachedRequests[e].length}`}}),o=[{children:i.a.createElement("div",{style:{whiteSpace:"normal"}},i.a.createElement(d.b,{type:"warning",inline:!0})," ",a),hide:!a,key:"last-error"},{label:"Cold boot",click:()=>Object(f.a)({reason:"debug-menu",reasonKey:"debug_menu"})},{label:"Cold boot immediately",click:()=>Object(f.a)({reason:"debug-menu-immediate",reasonKey:"debug_menu",immediate:!0})},{label:"Re-fetch credentials",click:this.resetCredentials},{label:"Copy Version Info",click:this.copyVersionInfo},{type:"separator"},{children:i.a.createElement("div",{style:{whiteSpace:"normal",opacity:.7}},i.a.createElement("strong",null,"Version TS:")," ",n.versionTs,i.a.createElement("br",null),I(n.versionTs),I(n.versionTs)&&i.a.createElement("br",null),i.a.createElement("strong",null,"Data Version:")," ",n.minVersionDataTs,i.a.createElement("br",null),I(n.minVersionDataTs),i.a.createElement("br",null),i.a.createElement("strong",null,"Version Hash:")," ",n.versionHash&&n.versionHash.slice(0,14)),click:this.copyVersionInfo,key:"version-info"},{type:"separator"},{label:"Service Worker",type:C.a.submenu,template:[{children:i.a.createElement("div",{style:{whiteSpace:"normal",opacity:.7}},"State: ",this.state.sw,i.a.createElement("br",null),this.renderSWStorage()),key:"sw-state"},{type:"separator"},{label:"Cached Requests",type:C.a.submenu,template:r.length>0?r:[{label:"None"}]},{type:"separator"},{label:"Register SW",click:y.d,hide:"not registered"!==this.state.sw},{label:"Unregister SW",click:y.e,hide:"not registered"===this.state.sw},{label:"Update SW",click:y.f,hide:"not registered"===this.state.sw},{label:"Clear the SW cache",click:y.a,hide:0===Object.keys(this.state.cachedRequests).length}].filter(e=>!e.hide)},{label:"IndexedDB",type:C.a.submenu,template:[{label:"Purge Stored Model for this Workspace",click:this.debugMenuPurgeStoredModel}]}].filter(e=>!e.hide);return i.a.createElement(c.a,s()({},t,{template:o}))}}function I(e){return parseInt(e,10)?new Date(1e3*e).toLocaleString("en-CA",{hour12:!1,timeZoneName:"short"}):null}DebugMenu.displayName="DebugMenu",DebugMenu.defaultProps=E,t.a=Object(l.b)(function(e){const t=Object(h.a)(e),a=Object(p.d)(e),n=Object(m.b)(e);return{channelId:t,lastError:n?n.message:"",teamDomain:a.domain,teamId:a.id,version:j}})(DebugMenu)},DFT4:function(e,t,a){},Dcvo:function(e,t,a){},Drpm:function(e,t,a){},Ect7:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("TSYQ"),i=a.n(r),o=a("XHGt"),l=a("aK/h"),c=a("nNoG"),d=a("5mKg"),u=a("Fdc0"),p=a("derf"),h=a("od5y"),m=a("RAhH"),b=a("/m+M");a("e3Uf");const f=new c.b("team");function _(e){return s.a.createElement(m.c,{position:"bottom-right",tip:e,zIndex:"above_fs"},s.a.createElement(h.b,{type:"question-circle"}))}_.displayName="renderTooltip";l.default.string,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.object.isRequired;const g={className:void 0,memberIsAdmin:!1,memberIsOwner:!1};function y({className:e,member:t,memberIsAdmin:a,memberIsOwner:n,team:r}){if(!Object(b.a)().featureModernProfileFlexpane)return null;const o=i()(e,"p-member_profile_restriction"),l=Object(u.xb)(t)&&f.t("This person hasn\u2019t finished signing up. They may receive messages via email.");return Object(u.tb)(t)?s.a.createElement("div",{className:o},s.a.createElement(p.b,{className:"p-member_profile_restriction__team_icon",id:r.id,size:16}),s.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(d.e)(r))):Object(u.mb)(t)?s.a.createElement("div",{className:o},s.a.createElement(h.b,{className:"p-member_profile_restriction__icon",type:"archived-channel"}),s.a.createElement("span",{className:"p-member_profile_restriction__text"},f.t("Deactivated account",{fallbackHash:"d57fa5164165105a1507c830ae06f7af8307870a",fallbackHashNs:"team"}))):Object(u.Mb)(t)?s.a.createElement("div",{className:o},s.a.createElement(h.b,{className:"p-member_profile_restriction__icon",type:Object(u.xb)(t)?"envelope-o":"single-channel-guest"}),s.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(u.xb)(t)?f.t("Invited Guest"):f.t("Single-Channel Guest")),_(l||f.t("Single-Channel Guests see a partial directory and can only access messages and files from selected channels."))):Object(u.Gb)(t)?s.a.createElement("div",{className:o},s.a.createElement(h.b,{className:"p-member_profile_restriction__icon",type:Object(u.xb)(t)?"envelope-o":"restricted-user"}),s.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(u.xb)(t)?f.t("Invited Guest"):f.t("Multi-Channel Guest")),_(l||f.t("Multi-Channel Guests see a partial directory and can only access messages and files from selected channels."))):n?s.a.createElement("div",{className:o},s.a.createElement("span",{className:"p-member_profile_restriction__text"},f.t("Owner of {teamName}",{teamName:Object(c.q)(Object(d.e)(r))}))):a?s.a.createElement("div",{className:o},s.a.createElement("span",{className:"p-member_profile_restriction__text"},f.t("Workspace Admin"))):Object(u.xb)(t)?s.a.createElement("div",{className:o},s.a.createElement(h.b,{className:"p-member_profile_restriction__icon",type:"envelope-o"}),s.a.createElement("span",{className:"p-member_profile_restriction__text"},f.t("Invited Member")),_(l)):null}y.defaultProps=g,t.a=Object(o.b)((e,{member:t})=>({memberIsAdmin:Object(u.eb)(e,t),memberIsOwner:Object(u.Eb)(e,t)}))(y)},EnhK:function(e,t,a){},EpXI:function(e,t,a){},EtLH:function(e,t,a){},"F+Fq":function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return i});var n=a("ifKl"),s=a("ROZo");Object(s.b)("TS.ui.apps_browser.routeAppOpen",n.a);const r=Object(s.b)("TS.ui.apps_browser.showAppTutorial",n.a),i=(Object(s.b)("TS.ui.apps_browser.canAppBeAdded",n.a),Object(s.b)("TS.ui.apps_browser.addAppToChannel",n.a),Object(s.b)("TS.ui.apps_browser.buildAddAppsTitle",n.a),Object(s.b)("TS.ui.apps_browser.startAddApps",n.a));Object(s.b)("TS.ui.apps_browser.ensureAppMembershipIsKnown",n.a)},F5ou:function(e,t,a){},F8qq:function(e,t,a){"use strict";var n=a("XfeM"),s=a("YYb+"),r=a("rzSx"),i=a("hPzE"),o=a("aK/h"),l=a("kOzZ"),c=a("Go8C"),d=a("GbAX"),u=a("9vuj");const p=Object(n.b)("Clog clicks on a message or file using data from redux",(e,t,{suggestion:a}={})=>{const n=t(),r=e(Object(i.g)()),o=e(Object(i.f)()),p=Object(s.d)(n),h=Object(s.c)(n),m=p.map(e=>e.featureVector),b=Object(l.a)({state:n}),f=Object(c.d)(n),_=f?f.length:0,g=Object(d.i)(n),y={accept_module_name:"results_unified",accept_module_length:p.length,accept_item_offset:h,feature_vector_list:m,suggestion_type:a.type,is_navigational:a.is_type_navigational,is_action:a.is_type_action,navigation_model_id:a.id,request_id:Object(u.a)(n),search_session_id:r,client_request_id:o,query_length:_,open_method:g};b.track("SEARCH_AUTOCOMPLETE_ACCEPT",y)});p.meta={name:"clogAutocompleteAccept",key:"actionsUniversalSearchClogAutocompleteClogAutocompleteAccept",description:"Clog clicks on a message or file using data from redux"},p.propTypes={suggestion:o.default.object.isRequired};var h=p,m=a("za+y"),b=a("JrUZ"),f=a("BrU6"),_=a("iW0Y"),g=a("tfx1"),y=a("HvGc"),O=a("qgNY"),C=a("1F8+"),v=a("yHhI"),E=a("k2C/"),k=a("MjS2"),S=a("V18M"),j=a("s19S"),I=a("S3eg"),w=a("CUc0"),T=a("6kok"),N=a("Fdc0"),A=a("Smdl"),R=a("vRZS"),M=a("rtjy"),P=a("YCXn"),x=a("53Ys"),L=a("97va"),F=a("hUCq"),D=a("brL+"),B=a("toaU"),U=a("kLJo"),q=a("5mKg"),H=a("hjTk"),W=a("t85p"),G=a("24Q/"),K=a("1Tny"),V=a("1tsX"),z=a("FHcd"),$=a("4M+g"),Y=a("lhZz"),Q=a("wR6u"),X=a("0nhw"),J=a("G4ux"),Z=a("KXvl"),ee=a("s5Is"),te=a("IY6O");a.d(t,"a",function(){return ae});const ae=Object(n.b)("Accept the selected (or 0th) search autocomplete suggestion",(e,t)=>{Object(v.a)({getState:t}).info("IMPROVED_SEARCH","Accepted search query");const a=t(),n=Object(s.c)(a)||0,o=Object(s.d)(a)[n];if(o)if(e(h({suggestion:o})),o.is_type_query_completion){const n=Object(r.f)(o.suggestion_replacement),l=Object(r.f)(o.suggestion_replacement_for_request);Object(v.a)({getState:t}).info("IMPROVED_SEARCH","Accepting query suggestion"),e(Object(b.y)({query:l})),e(Object(i.j)({query:l})),e(Object(c.g)({displayQuery:n})),Object(S.a)(a)?(e(Object(s.a)()),Object(j.n)("Vsearch")):e(Object(_.a)({interfaceMode:g.a.SEARCH_RESULTS}))}else if(o.is_type_navigational){if(o.is_type_file)Object(v.a)({getState:t}).info("IMPROVED_SEARCH",`Navigating to file. file: ${o.file.id}`),e(Object(y.c)({fileId:o.file.id}));else{if(Object(v.a)({getState:t}).info("IMPROVED_SEARCH",`Navigating to model: id: ${o.id}`),Object(E.a)(o.id))if(Object(A.a)()){const n=Object(J.b)(a);ne(o.id)?Object(U.g)(B.a,{teamId:o.id},{reason:"omniswitcher:searchAutocompleteSuggestionAccept"}):Object(Z.b)()?se(e,t,n,o.id):re(e,t,n,o.id)}else if(Object(R.a)())Object(k.m)(o.id);else{const e=o.team.url||Object(q.n)(o.team);Object(H.a)(e)}else if(o.channel&&Object(T.db)(o.channel)){const n=o.channel.id,s=Object(F.a)({state:a,channel:o.channel,currentTeamId:Object(D.b)(a)})||Object(T.ac)(a,o.channel);if(Object(A.a)()){const r=Object(J.b)(a);ne(s)?e(Object(I.a)({id:n,teamId:s})):Object(Z.b)()?se(e,t,r,s,n):re(e,t,r,s,n)}else e(Object(w.a)({teamId:s,channelId:n}))}else if(o.channel&&Object(T.Vb)(a,o.channel)){const t=o.channel.team_id,a=o.channel.id;Object(A.a)()?e(Object(I.a)({id:a,teamId:t})):e(Object(w.a)({teamId:t,channelId:a}))}else if("Vapp_space"===o.id){const a=Object(W.m)(t(),"feature_m11n_apps_browser"),n=Object(V.a)(t());a?n?(e(Object(L.a)()),e(Object(m.a)({eventId:"APP_LAUNCHER_OPEN_FROM_SEARCH"}))):e(Object(x.a)()):Object(P.a)()}else{let t;Object(z.a)(o.id)&&(t=Object($.l)(a,o.id)),e(Object(O.a)({id:t||o.id}))}const n=o.channel||o.member||{id:o.id},s=Object(c.d)(a);e(Object(M.c)({id:n.id,text:s}))}e(Object(f.a)({textyString:""})),e(Object(C.a)()),e(Object(s.a)())}else if(o.is_type_action&&Object(G.a)(a)){if(o.is_type_app_action){const t=o.app_action,n=Object(c.d)(a);e(Object(K.a)({actionId:t.id,appId:t.app_id,referrer:"quickswitcher"})),e(Object(M.c)({id:t.id,text:n}))}Object(v.a)({getState:t}).action("Executed action",o),e(Object(f.a)({textyString:""})),e(Object(C.a)()),e(Object(s.a)())}});function ne(e){const t=Object(Y.getStateForClientStore)();return!(!Object(te.getWorkspacesMeta)(t)[e]||Object(te.isWorkspaceExpired)(t,e))}function se(e,t,a,n,s){return Object(N.zb)(a,n)?Object(Y.dispatchForClientStore)(Object(ee.fetchAuthAndSetFocusedWorkspace)({teamId:n,channelId:s})):(Object(Q.d)(!1),e(Object(X.b)({teamId:n})).catch(e=>{if(!e.data||"user_already_team_member"!==e.data.error)throw e}).then(()=>Object(Y.dispatchForClientStore)(Object(ee.fetchAuthAndSetFocusedWorkspace)({teamId:n,channelId:s}))).catch(e=>{Object(v.a)({getState:t}).error(`Unable to join team ${n}: ${e}`),Object(Q.d)(!0)}))}function re(e,t,a,n,s){return Object(N.zb)(a,n)?Promise.resolve(ie(e,n,s)):(Object(Q.d)(!1),e(Object(X.b)({teamId:n})).catch(e=>{if(!e.data||"user_already_team_member"!==e.data.error)throw e}).then(()=>{ie(e,n,s)}).catch(e=>{Object(v.a)({getState:t}).error(`Unable to join team ${n}: ${e}`)}).finally(()=>Object(Q.d)(!0)))}function ie(e,t,a){a?e(Object(I.a)({id:a,teamId:t})):Object(U.g)(B.a,{teamId:t},{reason:"omniswitcher:searchAutocompleteSuggestionAccept"})}ae.meta={name:"searchAutocompleteSuggestionAccept",key:"actionsUniversalSearchSearchAutocompleteSuggestionAcceptSearchAutocompleteSuggestionAccept",description:"Accept the selected (or 0th) search autocomplete suggestion"},ae.propTypes={}},FQfs:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("TGBA"),i=a("q1tI"),o=a.n(i),l=a("XHGt"),c=a("TSYQ"),d=a.n(c),u=a("aK/h"),p=a("G4ux"),h=a("Fdc0"),m=a("hXpn"),b=a("WeBd"),f=a("HfwO"),_=a("kd6D");u.default.string,u.default.string.isRequired,u.default.bool,u.default.bool,u.default.bool,u.default.node,u.default.oneOf(Object(r.a)(f.a)),u.default.bool,u.default.number;const g={className:void 0,isActive:!1,isDeactivated:!1,isDisabled:!1,secondaryContent:void 0,secondaryContentPosition:f.a.right,showUnreadCount:!1,unreadCount:null};class MediumMemberListEntity extends i.Component{render(){var e=this.props;const t=e.className,a=e.id,n=e.isActive,r=e.isDeactivated,i=e.isDisabled,l=e.secondaryContent,c=e.secondaryContentPosition,u=e.showUnreadCount,p=e.unreadCount,h=o.a.createElement(b.b,{className:"c-member__unread_count",count:p,style:b.a.red}),g=o.a.createElement("span",{className:"c-member__details","data-qa":"member-entity__secondary-content"},l),y=o.a.createElement("span",{className:"c-member__secondary_content"},l&&c===f.a.right&&g,u&&p&&h),O=d()(t,"c-medium_member_list_entity");let C;return n?C=i||r?_.c.highlightDim:_.c.highlightLight:(i||r)&&(C=_.c.dim),o.a.createElement(m.a,{"data-qa":"medium_member_list_entity",className:O,style:C,primaryContent:o.a.createElement(f.b,s()({id:a,isDeactivated:r},this.props,{secondaryContent:c===f.a.right?null:l})),secondaryContent:y,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,size:"medium"})}}MediumMemberListEntity.displayName="MediumMemberListEntity",MediumMemberListEntity.defaultProps=g,t.a=Object(l.b)(function(e,{id:t}){const a=Object(p.d)(e,t);return{member:a,unreadCount:Object(h.s)(e,a)}})(MediumMemberListEntity)},FXxD:function(e,t,a){},FeTz:function(e,t,a){},Fsvi:function(e,t,a){},G4Tr:function(e,t,a){"use strict";a.d(t,"a",function(){return s});const n=new(a("nNoG").b)("a11y");function s({channelName:e,previousChannelName:t,workspaceName:a,orgName:s,isOrgGlobalSharedPublicOrPrivateChannel:r,isOrgSharedPublicOrPrivateChannel:i,isExternallySharedChannel:o,isArchived:l,isCurrent:c,hasUnreads:d,hasNotifications:u,isPrivate:p,isNotMember:h,isMuted:m,isStarred:b,hasDraft:f}={}){const _=(()=>o&&a?n.t("shared with {workspaceName}",{workspaceName:a}):r&&s?n.t("shared across all {orgName} workspaces",{orgName:s}):i?n.t("shared channel"):"")(),g=(()=>l?n.t("archived channel"):c&&d&&u&&p&&h&&m&&b&&f?n.t("current channel, has unread messages and notifications, private, not a member, muted, starred, has a draft message"):!c&&d&&u&&p&&h&&m&&b&&f?n.t("has unread messages and notifications, private, not a member, muted, starred, has a draft message"):c&&!d&&u&&p&&h&&m&&b&&f?n.t("current channel, has notifications, private, not a member, muted, starred, has a draft message"):!c&&!d&&u&&p&&h&&m&&b&&f?n.t("has notifications, private, not a member, muted, starred, has a draft message"):c&&d&&!u&&p&&h&&m&&b&&f?n.t("current channel, has unread messages, private, not a member, muted, starred, has a draft message"):!c&&d&&!u&&p&&h&&m&&b&&f?n.t("has unread messages, private, not a member, muted, starred, has a draft message"):c&&!d&&!u&&p&&h&&m&&b&&f?n.t("current channel, private, not a member, muted, starred, has a draft message"):!c&&!d&&!u&&p&&h&&m&&b&&f?n.t("private, not a member, muted, starred, has a draft message"):c&&d&&u&&!p&&h&&m&&b&&f?n.t("current channel, has unread messages and notifications, not a member, muted, starred, has a draft message"):!c&&d&&u&&!p&&h&&m&&b&&f?n.t("has unread messages and notifications, not a member, muted, starred, has a draft message"):c&&!d&&u&&!p&&h&&m&&b&&f?n.t("current channel, has notifications, not a member, muted, starred, has a draft message"):!c&&!d&&u&&!p&&h&&m&&b&&f?n.t("has notifications, not a member, muted, starred, has a draft message"):c&&d&&!u&&!p&&h&&m&&b&&f?n.t("current channel, has unread messages, not a member, muted, starred, has a draft message"):!c&&d&&!u&&!p&&h&&m&&b&&f?n.t("has unread messages, not a member, muted, starred, has a draft message"):c&&!d&&!u&&!p&&h&&m&&b&&f?n.t("current channel, not a member, muted, starred, has a draft message"):!c&&!d&&!u&&!p&&h&&m&&b&&f?n.t("not a member, muted, starred, has a draft message"):c&&d&&u&&p&&!h&&m&&b&&f?n.t("current channel, has unread messages and notifications, private, muted, starred, has a draft message"):!c&&d&&u&&p&&!h&&m&&b&&f?n.t("has unread messages and notifications, private, muted, starred, has a draft message"):c&&!d&&u&&p&&!h&&m&&b&&f?n.t("current channel, has notifications, private, muted, starred, has a draft message"):!c&&!d&&u&&p&&!h&&m&&b&&f?n.t("has notifications, private, muted, starred, has a draft message"):c&&d&&!u&&p&&!h&&m&&b&&f?n.t("current channel, has unread messages, private, muted, starred, has a draft message"):!c&&d&&!u&&p&&!h&&m&&b&&f?n.t("has unread messages, private, muted, starred, has a draft message"):c&&!d&&!u&&p&&!h&&m&&b&&f?n.t("current channel, private, muted, starred, has a draft message"):!c&&!d&&!u&&p&&!h&&m&&b&&f?n.t("private, muted, starred, has a draft message"):c&&d&&u&&!p&&!h&&m&&b&&f?n.t("current channel, has unread messages and notifications, muted, starred, has a draft message"):!c&&d&&u&&!p&&!h&&m&&b&&f?n.t("has unread messages and notifications, muted, starred, has a draft message"):c&&!d&&u&&!p&&!h&&m&&b&&f?n.t("current channel, has notifications, muted, starred, has a draft message"):!c&&!d&&u&&!p&&!h&&m&&b&&f?n.t("has notifications, muted, starred, has a draft message"):c&&d&&!u&&!p&&!h&&m&&b&&f?n.t("current channel, has unread messages, muted, starred, has a draft message"):!c&&d&&!u&&!p&&!h&&m&&b&&f?n.t("has unread messages, muted, starred, has a draft message"):c&&!d&&!u&&!p&&!h&&m&&b&&f?n.t("current channel, muted, starred, has a draft message"):c||d||u||p||h||!m||!b||!f?c&&d&&u&&p&&h&&!m&&b&&f?n.t("current channel, has unread messages and notifications, private, not a member, starred, has a draft message"):!c&&d&&u&&p&&h&&!m&&b&&f?n.t("has unread messages and notifications, private, not a member, starred, has a draft message"):c&&!d&&u&&p&&h&&!m&&b&&f?n.t("current channel, has notifications, private, not a member, starred, has a draft message"):!c&&!d&&u&&p&&h&&!m&&b&&f?n.t("has notifications, private, not a member, starred, has a draft message"):c&&d&&!u&&p&&h&&!m&&b&&f?n.t("current channel, has unread messages, private, not a member, starred, has a draft message"):!c&&d&&!u&&p&&h&&!m&&b&&f?n.t("has unread messages, private, not a member, starred, has a draft message"):c&&!d&&!u&&p&&h&&!m&&b&&f?n.t("current channel, private, not a member, starred, has a draft message"):!c&&!d&&!u&&p&&h&&!m&&b&&f?n.t("private, not a member, starred, has a draft message"):c&&d&&u&&!p&&h&&!m&&b&&f?n.t("current channel, has unread messages and notifications, not a member, starred, has a draft message"):!c&&d&&u&&!p&&h&&!m&&b&&f?n.t("has unread messages and notifications, not a member, starred, has a draft message"):c&&!d&&u&&!p&&h&&!m&&b&&f?n.t("current channel, has notifications, not a member, starred, has a draft message"):!c&&!d&&u&&!p&&h&&!m&&b&&f?n.t("has notifications, not a member, starred, has a draft message"):c&&d&&!u&&!p&&h&&!m&&b&&f?n.t("current channel, has unread messages, not a member, starred, has a draft message"):!c&&d&&!u&&!p&&h&&!m&&b&&f?n.t("has unread messages, not a member, starred, has a draft message"):c&&!d&&!u&&!p&&h&&!m&&b&&f?n.t("current channel, not a member, starred, has a draft message"):c||d||u||p||!h||m||!b||!f?c&&d&&u&&p&&!h&&!m&&b&&f?n.t("current channel, has unread messages and notifications, private, starred, has a draft message"):!c&&d&&u&&p&&!h&&!m&&b&&f?n.t("has unread messages and notifications, private, starred, has a draft message"):c&&!d&&u&&p&&!h&&!m&&b&&f?n.t("current channel, has notifications, private, starred, has a draft message"):!c&&!d&&u&&p&&!h&&!m&&b&&f?n.t("has notifications, private, starred, has a draft message"):c&&d&&!u&&p&&!h&&!m&&b&&f?n.t("current channel, has unread messages, private, starred, has a draft message"):!c&&d&&!u&&p&&!h&&!m&&b&&f?n.t("has unread messages, private, starred, has a draft message"):c&&!d&&!u&&p&&!h&&!m&&b&&f?n.t("current channel, private, starred, has a draft message"):c||d||u||!p||h||m||!b||!f?c&&d&&u&&!p&&!h&&!m&&b&&f?n.t("current channel, has unread messages and notifications, starred, has a draft message"):!c&&d&&u&&!p&&!h&&!m&&b&&f?n.t("has unread messages and notifications, starred, has a draft message"):c&&!d&&u&&!p&&!h&&!m&&b&&f?n.t("current channel, has notifications, starred, has a draft message"):c||d||!u||p||h||m||!b||!f?c&&d&&!u&&!p&&!h&&!m&&b&&f?n.t("current channel, has unread messages, starred, has a draft message"):c||!d||u||p||h||m||!b||!f?!c||d||u||p||h||m||!b||!f?c||d||u||p||h||m||!b||!f?c&&d&&u&&p&&h&&m&&!b&&f?n.t("current channel, has unread messages and notifications, private, not a member, muted, has a draft message"):!c&&d&&u&&p&&h&&m&&!b&&f?n.t("has unread messages and notifications, private, not a member, muted, has a draft message"):c&&!d&&u&&p&&h&&m&&!b&&f?n.t("current channel, has notifications, private, not a member, muted, has a draft message"):!c&&!d&&u&&p&&h&&m&&!b&&f?n.t("has notifications, private, not a member, muted, has a draft message"):c&&d&&!u&&p&&h&&m&&!b&&f?n.t("current channel, has unread messages, private, not a member, muted, has a draft message"):!c&&d&&!u&&p&&h&&m&&!b&&f?n.t("has unread messages, private, not a member, muted, has a draft message"):c&&!d&&!u&&p&&h&&m&&!b&&f?n.t("current channel, private, not a member, muted, has a draft message"):!c&&!d&&!u&&p&&h&&m&&!b&&f?n.t("private, not a member, muted, has a draft message"):c&&d&&u&&!p&&h&&m&&!b&&f?n.t("current channel, has unread messages and notifications, not a member, muted, has a draft message"):!c&&d&&u&&!p&&h&&m&&!b&&f?n.t("has unread messages and notifications, not a member, muted, has a draft message"):c&&!d&&u&&!p&&h&&m&&!b&&f?n.t("current channel, has notifications, not a member, muted, has a draft message"):!c&&!d&&u&&!p&&h&&m&&!b&&f?n.t("has notifications, not a member, muted, has a draft message"):c&&d&&!u&&!p&&h&&m&&!b&&f?n.t("current channel, has unread messages, not a member, muted, has a draft message"):!c&&d&&!u&&!p&&h&&m&&!b&&f?n.t("has unread messages, not a member, muted, has a draft message"):c&&!d&&!u&&!p&&h&&m&&!b&&f?n.t("current channel, not a member, muted, has a draft message"):c||d||u||p||!h||!m||b||!f?c&&d&&u&&p&&!h&&m&&!b&&f?n.t("current channel, has unread messages and notifications, private, muted, has a draft message"):!c&&d&&u&&p&&!h&&m&&!b&&f?n.t("has unread messages and notifications, private, muted, has a draft message"):c&&!d&&u&&p&&!h&&m&&!b&&f?n.t("current channel, has notifications, private, muted, has a draft message"):!c&&!d&&u&&p&&!h&&m&&!b&&f?n.t("has notifications, private, muted, has a draft message"):c&&d&&!u&&p&&!h&&m&&!b&&f?n.t("current channel, has unread messages, private, muted, has a draft message"):!c&&d&&!u&&p&&!h&&m&&!b&&f?n.t("has unread messages, private, muted, has a draft message"):c&&!d&&!u&&p&&!h&&m&&!b&&f?n.t("current channel, private, muted, has a draft message"):c||d||u||!p||h||!m||b||!f?c&&d&&u&&!p&&!h&&m&&!b&&f?n.t("current channel, has unread messages and notifications, muted, has a draft message"):!c&&d&&u&&!p&&!h&&m&&!b&&f?n.t("has unread messages and notifications, muted, has a draft message"):c&&!d&&u&&!p&&!h&&m&&!b&&f?n.t("current channel, has notifications, muted, has a draft message"):c||d||!u||p||h||!m||b||!f?c&&d&&!u&&!p&&!h&&m&&!b&&f?n.t("current channel, has unread messages, muted, has a draft message"):c||!d||u||p||h||!m||b||!f?!c||d||u||p||h||!m||b||!f?c||d||u||p||h||!m||b||!f?c&&d&&u&&p&&h&&!m&&!b&&f?n.t("current channel, has unread messages and notifications, private, not a member, has a draft message"):!c&&d&&u&&p&&h&&!m&&!b&&f?n.t("has unread messages and notifications, private, not a member, has a draft message"):c&&!d&&u&&p&&h&&!m&&!b&&f?n.t("current channel, has notifications, private, not a member, has a draft message"):!c&&!d&&u&&p&&h&&!m&&!b&&f?n.t("has notifications, private, not a member, has a draft message"):c&&d&&!u&&p&&h&&!m&&!b&&f?n.t("current channel, has unread messages, private, not a member, has a draft message"):!c&&d&&!u&&p&&h&&!m&&!b&&f?n.t("has unread messages, private, not a member, has a draft message"):c&&!d&&!u&&p&&h&&!m&&!b&&f?n.t("current channel, private, not a member, has a draft message"):c||d||u||!p||!h||m||b||!f?c&&d&&u&&!p&&h&&!m&&!b&&f?n.t("current channel, has unread messages and notifications, not a member, has a draft message"):!c&&d&&u&&!p&&h&&!m&&!b&&f?n.t("has unread messages and notifications, not a member, has a draft message"):c&&!d&&u&&!p&&h&&!m&&!b&&f?n.t("current channel, has notifications, not a member, has a draft message"):c||d||!u||p||!h||m||b||!f?c&&d&&!u&&!p&&h&&!m&&!b&&f?n.t("current channel, has unread messages, not a member, has a draft message"):c||!d||u||p||!h||m||b||!f?!c||d||u||p||!h||m||b||!f?c||d||u||p||!h||m||b||!f?c&&d&&u&&p&&!h&&!m&&!b&&f?n.t("current channel, has unread messages and notifications, private, has a draft message"):!c&&d&&u&&p&&!h&&!m&&!b&&f?n.t("has unread messages and notifications, private, has a draft message"):c&&!d&&u&&p&&!h&&!m&&!b&&f?n.t("current channel, has notifications, private, has a draft message"):c||d||!u||!p||h||m||b||!f?c&&d&&!u&&p&&!h&&!m&&!b&&f?n.t("current channel, has unread messages, private, has a draft message"):c||!d||u||!p||h||m||b||!f?!c||d||u||!p||h||m||b||!f?c||d||u||!p||h||m||b||!f?c&&d&&u&&!p&&!h&&!m&&!b&&f?n.t("current channel, has unread messages and notifications, has a draft message"):c||!d||!u||p||h||m||b||!f?!c||d||!u||p||h||m||b||!f?c||d||!u||p||h||m||b||!f?!c||!d||u||p||h||m||b||!f?c||!d||u||p||h||m||b||!f?!c||d||u||p||h||m||b||!f?c||d||u||p||h||m||b||!f?c&&d&&u&&p&&h&&m&&b&&!f?n.t("current channel, has unread messages and notifications, private, not a member, muted, starred"):!c&&d&&u&&p&&h&&m&&b&&!f?n.t("has unread messages and notifications, private, not a member, muted, starred"):c&&!d&&u&&p&&h&&m&&b&&!f?n.t("current channel, has notifications, private, not a member, muted, starred"):!c&&!d&&u&&p&&h&&m&&b&&!f?n.t("has notifications, private, not a member, muted, starred"):c&&d&&!u&&p&&h&&m&&b&&!f?n.t("current channel, has unread messages, private, not a member, muted, starred"):!c&&d&&!u&&p&&h&&m&&b&&!f?n.t("has unread messages, private, not a member, muted, starred"):c&&!d&&!u&&p&&h&&m&&b&&!f?n.t("current channel, private, not a member, muted, starred"):!c&&!d&&!u&&p&&h&&m&&b&&!f?n.t("private, not a member, muted, starred"):c&&d&&u&&!p&&h&&m&&b&&!f?n.t("current channel, has unread messages and notifications, not a member, muted, starred"):!c&&d&&u&&!p&&h&&m&&b&&!f?n.t("has unread messages and notifications, not a member, muted, starred"):c&&!d&&u&&!p&&h&&m&&b&&!f?n.t("current channel, has notifications, not a member, muted, starred"):!c&&!d&&u&&!p&&h&&m&&b&&!f?n.t("has notifications, not a member, muted, starred"):c&&d&&!u&&!p&&h&&m&&b&&!f?n.t("current channel, has unread messages, not a member, muted, starred"):!c&&d&&!u&&!p&&h&&m&&b&&!f?n.t("has unread messages, not a member, muted, starred"):c&&!d&&!u&&!p&&h&&m&&b&&!f?n.t("current channel, not a member, muted, starred"):c||d||u||p||!h||!m||!b||f?c&&d&&u&&p&&!h&&m&&b&&!f?n.t("current channel, has unread messages and notifications, private, muted, starred"):!c&&d&&u&&p&&!h&&m&&b&&!f?n.t("has unread messages and notifications, private, muted, starred"):c&&!d&&u&&p&&!h&&m&&b&&!f?n.t("current channel, has notifications, private, muted, starred"):!c&&!d&&u&&p&&!h&&m&&b&&!f?n.t("has notifications, private, muted, starred"):c&&d&&!u&&p&&!h&&m&&b&&!f?n.t("current channel, has unread messages, private, muted, starred"):!c&&d&&!u&&p&&!h&&m&&b&&!f?n.t("has unread messages, private, muted, starred"):c&&!d&&!u&&p&&!h&&m&&b&&!f?n.t("current channel, private, muted, starred"):c||d||u||!p||h||!m||!b||f?c&&d&&u&&!p&&!h&&m&&b&&!f?n.t("current channel, has unread messages and notifications, muted, starred"):!c&&d&&u&&!p&&!h&&m&&b&&!f?n.t("has unread messages and notifications, muted, starred"):c&&!d&&u&&!p&&!h&&m&&b&&!f?n.t("current channel, has notifications, muted, starred"):c||d||!u||p||h||!m||!b||f?c&&d&&!u&&!p&&!h&&m&&b&&!f?n.t("current channel, has unread messages, muted, starred"):c||!d||u||p||h||!m||!b||f?!c||d||u||p||h||!m||!b||f?c||d||u||p||h||!m||!b||f?c&&d&&u&&p&&h&&!m&&b&&!f?n.t("current channel, has unread messages and notifications, private, not a member, starred"):!c&&d&&u&&p&&h&&!m&&b&&!f?n.t("has unread messages and notifications, private, not a member, starred"):c&&!d&&u&&p&&h&&!m&&b&&!f?n.t("current channel, has notifications, private, not a member, starred"):!c&&!d&&u&&p&&h&&!m&&b&&!f?n.t("has notifications, private, not a member, starred"):c&&d&&!u&&p&&h&&!m&&b&&!f?n.t("current channel, has unread messages, private, not a member, starred"):!c&&d&&!u&&p&&h&&!m&&b&&!f?n.t("has unread messages, private, not a member, starred"):c&&!d&&!u&&p&&h&&!m&&b&&!f?n.t("current channel, private, not a member, starred"):c||d||u||!p||!h||m||!b||f?c&&d&&u&&!p&&h&&!m&&b&&!f?n.t("current channel, has unread messages and notifications, not a member, starred"):!c&&d&&u&&!p&&h&&!m&&b&&!f?n.t("has unread messages and notifications, not a member, starred"):c&&!d&&u&&!p&&h&&!m&&b&&!f?n.t("current channel, has notifications, not a member, starred"):c||d||!u||p||!h||m||!b||f?c&&d&&!u&&!p&&h&&!m&&b&&!f?n.t("current channel, has unread messages, not a member, starred"):c||!d||u||p||!h||m||!b||f?!c||d||u||p||!h||m||!b||f?c||d||u||p||!h||m||!b||f?c&&d&&u&&p&&!h&&!m&&b&&!f?n.t("current channel, has unread messages and notifications, private, starred"):!c&&d&&u&&p&&!h&&!m&&b&&!f?n.t("has unread messages and notifications, private, starred"):c&&!d&&u&&p&&!h&&!m&&b&&!f?n.t("current channel, has notifications, private, starred"):c||d||!u||!p||h||m||!b||f?c&&d&&!u&&p&&!h&&!m&&b&&!f?n.t("current channel, has unread messages, private, starred"):c||!d||u||!p||h||m||!b||f?!c||d||u||!p||h||m||!b||f?c||d||u||!p||h||m||!b||f?c&&d&&u&&!p&&!h&&!m&&b&&!f?n.t("current channel, has unread messages and notifications, starred"):c||!d||!u||p||h||m||!b||f?!c||d||!u||p||h||m||!b||f?c||d||!u||p||h||m||!b||f?!c||!d||u||p||h||m||!b||f?c||!d||u||p||h||m||!b||f?!c||d||u||p||h||m||!b||f?c||d||u||p||h||m||!b||f?c&&d&&u&&p&&h&&m&&!b&&!f?n.t("current channel, has unread messages and notifications, private, not a member, muted"):!c&&d&&u&&p&&h&&m&&!b&&!f?n.t("has unread messages and notifications, private, not a member, muted"):c&&!d&&u&&p&&h&&m&&!b&&!f?n.t("current channel, has notifications, private, not a member, muted"):!c&&!d&&u&&p&&h&&m&&!b&&!f?n.t("has notifications, private, not a member, muted"):c&&d&&!u&&p&&h&&m&&!b&&!f?n.t("current channel, has unread messages, private, not a member, muted"):!c&&d&&!u&&p&&h&&m&&!b&&!f?n.t("has unread messages, private, not a member, muted"):c&&!d&&!u&&p&&h&&m&&!b&&!f?n.t("current channel, private, not a member, muted"):c||d||u||!p||!h||!m||b||f?c&&d&&u&&!p&&h&&m&&!b&&!f?n.t("current channel, has unread messages and notifications, not a member, muted"):!c&&d&&u&&!p&&h&&m&&!b&&!f?n.t("has unread messages and notifications, not a member, muted"):c&&!d&&u&&!p&&h&&m&&!b&&!f?n.t("current channel, has notifications, not a member, muted"):c||d||!u||p||!h||!m||b||f?c&&d&&!u&&!p&&h&&m&&!b&&!f?n.t("current channel, has unread messages, not a member, muted"):c||!d||u||p||!h||!m||b||f?!c||d||u||p||!h||!m||b||f?c||d||u||p||!h||!m||b||f?c&&d&&u&&p&&!h&&m&&!b&&!f?n.t("current channel, has unread messages and notifications, private, muted"):!c&&d&&u&&p&&!h&&m&&!b&&!f?n.t("has unread messages and notifications, private, muted"):c&&!d&&u&&p&&!h&&m&&!b&&!f?n.t("current channel, has notifications, private, muted"):c||d||!u||!p||h||!m||b||f?c&&d&&!u&&p&&!h&&m&&!b&&!f?n.t("current channel, has unread messages, private, muted"):c||!d||u||!p||h||!m||b||f?!c||d||u||!p||h||!m||b||f?c||d||u||!p||h||!m||b||f?c&&d&&u&&!p&&!h&&m&&!b&&!f?n.t("current channel, has unread messages and notifications, muted"):c||!d||!u||p||h||!m||b||f?!c||d||!u||p||h||!m||b||f?c||d||!u||p||h||!m||b||f?!c||!d||u||p||h||!m||b||f?c||!d||u||p||h||!m||b||f?!c||d||u||p||h||!m||b||f?c||d||u||p||h||!m||b||f?c&&d&&u&&p&&h&&!m&&!b&&!f?n.t("current channel, has unread messages and notifications, private, not a member"):!c&&d&&u&&p&&h&&!m&&!b&&!f?n.t("has unread messages and notifications, private, not a member"):c&&!d&&u&&p&&h&&!m&&!b&&!f?n.t("current channel, has notifications, private, not a member"):c||d||!u||!p||!h||m||b||f?c&&d&&!u&&p&&h&&!m&&!b&&!f?n.t("current channel, has unread messages, private, not a member"):c||!d||u||!p||!h||m||b||f?!c||d||u||!p||!h||m||b||f?c||d||u||!p||!h||m||b||f?c&&d&&u&&!p&&h&&!m&&!b&&!f?n.t("current channel, has unread messages and notifications, not a member"):c||!d||!u||p||!h||m||b||f?!c||d||!u||p||!h||m||b||f?c||d||!u||p||!h||m||b||f?!c||!d||u||p||!h||m||b||f?c||!d||u||p||!h||m||b||f?!c||d||u||p||!h||m||b||f?c||d||u||p||!h||m||b||f?!(c&&d&&u&&p)||h||m||b||f?c||!d||!u||!p||h||m||b||f?!c||d||!u||!p||h||m||b||f?c||d||!u||!p||h||m||b||f?!c||!d||u||!p||h||m||b||f?c||!d||u||!p||h||m||b||f?!c||d||u||!p||h||m||b||f?c||d||u||!p||h||m||b||f?!(c&&d&&u)||p||h||m||b||f?c||!d||!u||p||h||m||b||f?!c||d||!u||p||h||m||b||f?c||d||!u||p||h||m||b||f?!c||!d||u||p||h||m||b||f?c||!d||u||p||h||m||b||f?!c||d||u||p||h||m||b||f?"":n.t("current channel"):n.t("has unread messages"):n.t("current channel, has unread messages"):n.t("has notifications"):n.t("current channel, has notifications"):n.t("has unread messages and notifications"):n.t("current channel, has unread messages and notifications"):n.t("private"):n.t("current channel, private"):n.t("has unread messages, private"):n.t("current channel, has unread messages, private"):n.t("has notifications, private"):n.t("current channel, has notifications, private"):n.t("has unread messages and notifications, private"):n.t("current channel, has unread messages and notifications, private"):n.t("not a member"):n.t("current channel, not a member"):n.t("has unread messages, not a member"):n.t("current channel, has unread messages, not a member"):n.t("has notifications, not a member"):n.t("current channel, has notifications, not a member"):n.t("has unread messages and notifications, not a member"):n.t("private, not a member"):n.t("current channel, private, not a member"):n.t("has unread messages, private, not a member"):n.t("has notifications, private, not a member"):n.t("muted"):n.t("current channel, muted"):n.t("has unread messages, muted"):n.t("current channel, has unread messages, muted"):n.t("has notifications, muted"):n.t("current channel, has notifications, muted"):n.t("has unread messages and notifications, muted"):n.t("private, muted"):n.t("current channel, private, muted"):n.t("has unread messages, private, muted"):n.t("has notifications, private, muted"):n.t("not a member, muted"):n.t("current channel, not a member, muted"):n.t("has unread messages, not a member, muted"):n.t("has notifications, not a member, muted"):n.t("private, not a member, muted"):n.t("starred"):n.t("current channel, starred"):n.t("has unread messages, starred"):n.t("current channel, has unread messages, starred"):n.t("has notifications, starred"):n.t("current channel, has notifications, starred"):n.t("has unread messages and notifications, starred"):n.t("private, starred"):n.t("current channel, private, starred"):n.t("has unread messages, private, starred"):n.t("has notifications, private, starred"):n.t("not a member, starred"):n.t("current channel, not a member, starred"):n.t("has unread messages, not a member, starred"):n.t("has notifications, not a member, starred"):n.t("private, not a member, starred"):n.t("muted, starred"):n.t("current channel, muted, starred"):n.t("has unread messages, muted, starred"):n.t("has notifications, muted, starred"):n.t("private, muted, starred"):n.t("not a member, muted, starred"):n.t("has a draft message"):n.t("current channel, has a draft message"):n.t("has unread messages, has a draft message"):n.t("current channel, has unread messages, has a draft message"):n.t("has notifications, has a draft message"):n.t("current channel, has notifications, has a draft message"):n.t("has unread messages and notifications, has a draft message"):n.t("private, has a draft message"):n.t("current channel, private, has a draft message"):n.t("has unread messages, private, has a draft message"):n.t("has notifications, private, has a draft message"):n.t("not a member, has a draft message"):n.t("current channel, not a member, has a draft message"):n.t("has unread messages, not a member, has a draft message"):n.t("has notifications, not a member, has a draft message"):n.t("private, not a member, has a draft message"):n.t("muted, has a draft message"):n.t("current channel, muted, has a draft message"):n.t("has unread messages, muted, has a draft message"):n.t("has notifications, muted, has a draft message"):n.t("private, muted, has a draft message"):n.t("not a member, muted, has a draft message"):n.t("starred, has a draft message"):n.t("current channel, starred, has a draft message"):n.t("has unread messages, starred, has a draft message"):n.t("has notifications, starred, has a draft message"):n.t("private, starred, has a draft message"):n.t("not a member, starred, has a draft message"):n.t("muted, starred, has a draft message"))();return!t||_||g?t||_||!g?t&&!_&&g?n.t("{channelName}, previously {previousChannelName} ({context})",{channelName:e,previousChannelName:t,context:g}):t||!_||g?t&&_&&!g?n.t("{channelName}, previously {previousChannelName}, {workspaceDescription}",{channelName:e,workspaceDescription:_,previousChannelName:t}):!t&&_&&g?n.t("{channelName}, {workspaceDescription} ({context})",{channelName:e,workspaceDescription:_,context:g}):t&&_&&g?n.t("{channelName}, previously {previousChannelName}, {workspaceDescription} ({context})",{channelName:e,workspaceDescription:_,previousChannelName:t,context:g}):e||"":n.t("{channelName}, {workspaceDescription}",{channelName:e,workspaceDescription:_}):n.t("{channelName} ({context})",{channelName:e,context:g}):n.t("{channelName}, previously {previousChannelName}",{channelName:e,previousChannelName:t})}},G4eq:function(e,t,a){},G59f:function(e,t,a){},G7w5:function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("XHGt"),o=a("aK/h"),l=a("nNoG"),c=a("DOXe"),d=a("Fdc0"),u=a("h9PG"),p=a("t85p"),h=a("KD8n"),m=a("0f2Y"),b=a("lwWk"),f=a("Atrf"),_=a("llxT"),g=a("6avh"),y=a("RAhH"),O=a("XLFM"),C=a("QbLZ"),v=a.n(C),E=a("fujP"),k=a("5mKg");var S=a("guIn");var j=a("sk9p"),I=a.n(j),w=a("ICFZ"),T=a("/m+M"),N=a("0rID"),A=a("TSYQ"),R=a.n(A),M=a("Rjct");a("LCkN");o.default.node,o.default.string.isRequired,o.default.node,o.default.string;const P={children:void 0,value:void 0,className:void 0};function x({children:e,label:t,value:a,className:n}){const i=Object(s.useContext)(M.a);return t?r.a.createElement("div",{className:R()("p-member_profile_field",{"p-member_profile_field--keyboard":i},n)},r.a.createElement("div",{className:"p-member_profile_field__primary"},r.a.createElement("div",{className:"p-member_profile_field__label"},t),r.a.createElement("div",{className:"p-member_profile_field__value"},a)),e&&r.a.createElement("div",{className:"p-member_profile_field__secondary"},e)):null}x.displayName="MemberProfileField",x.defaultProps=P;var L=x;const F=new l.b("member_profile"),D=(o.default.object,{member:void 0});function B({member:e}){var t=Object(N.a)(!1,2e3),a=I()(t,2);const n=a[0],s=a[1];if(!Object(T.a)().featureModernProfileFlexpane)return null;let i,o;n?(o="success",i=F.t("Copied!")):i=F.t("Copy");const l=Object(d.v)(e);return r.a.createElement(L,{label:F.t("Email address"),value:r.a.createElement(m.a,{href:`mailto:${l}`},l)},Object(w.a)()&&r.a.createElement(y.c,{status:o,tip:i,zIndex:"above_fs"},r.a.createElement(O.d,{"aria-label":F.t("Copy Email Address"),onClick:()=>{Object(w.c)(l),s(!0)},icon:"all-files",type:"outline"})))}B.displayName="MemberEmailField",B.defaultProps=D;var U=B,q=a("2olY"),H=a("2Inn"),W=a("od5y"),G=a("ENxx"),K=a("rGr5");a("QSlP");const V=new l.b("member_profile"),z=(o.default.string,o.default.func,o.default.bool,o.default.object,o.default.func,{member:void 0,memberPhoneNumber:void 0,onClick:n.a,isCallMenuEnabled:!1,startCall:n.a});function $({memberPhoneNumber:e,onClick:t,isCallMenuEnabled:a,startCall:n}){var i=Object(s.useState)(!1),o=I()(i,2);const l=o[0],c=o[1],d=Object(s.useCallback)(()=>c(!1),[]),u=Object(s.useCallback)(()=>c(!0),[]),p=Object(s.useCallback)(({appId:e})=>{t(),n({appId:e})},[n,t]),h=a?e:r.a.createElement(b.a,{href:`tel:${e}`,onClick:t},e);return r.a.createElement(L,{key:"phone",label:V.t("Phone number"),value:h,className:l&&"p-member_phone_field__menu_open"},a&&r.a.createElement(K.a,{onCloseMenuCallback:d,onMenuItemSelected:p,onRenderMenuCallback:u,memberPhoneNumber:e},r.a.createElement(O.d,{type:"outline",size:"medium",className:"p-member_phone_field__calls_button"},r.a.createElement("div",{className:"display_flex"},r.a.createElement(W.b,{type:"phone",className:"p-classic_nav__model__button__icon"}),r.a.createElement(W.b,{"data-qa":"call_icon_chevron_down",className:"p-classic_nav__model__button--chevron",type:"chevron_down",inline:!0})))))}$.displayName="MemberPhoneField",$.defaultProps=z;var Y=Object(i.b)((e,{member:t})=>{const a=Object(G.d)(e),n=Object(q.b)(e),s=Object(d.D)(t);return{isCallMenuEnabled:Object(G.e)(n,a,s),memberPhoneNumber:s}},e=>({startCall:(...t)=>{e(Object(H.d)(...t))}}))($),Q=a("M+5u"),X=a("XL7r"),J=a("NYp8");const Z=new l.b("member_profile");o.default.object,o.default.bool;const ee={member:void 0,time24:!1};function te({member:e,time24:t}){var a=Object(s.useState)(),n=I()(a,2);const i=n[0],o=n[1];return Object(J.a)(()=>{o(function(e,t){return Object(Q.a)(Date.now(),{timeZone:Object(d.Q)(e),timeZoneOffset:Object(d.R)(e),do24hrTime:t})}(e,t))}),r.a.createElement(L,{label:Z.t("Local time"),value:i})}te.displayName="MemberLocalTimeField",te.defaultProps=ee;var ae=Object(i.b)(function(e){return{time24:Object(X.k)(e,"time24")}})(te),ne=a("CPJ1"),se=a("cD5Y"),re=a("zmn3"),ie=a("Z0Cl"),oe=a("1zbP"),le=a("B/i4"),ce=a("4M+g"),de=a("4Twu");const ue=new l.b("member_profile"),pe=(o.default.arrayOf(o.default.object.isRequired),{channels:void 0});function he({channels:e}){if(!Object(T.a)().featureModernProfileFlexpane)return null;const t=Object(ie.a)(e,oe.b);return Object(E.a)(t)?ue.t("None"):r.a.createElement("ul",{className:"p-member_profile_field__list"},t.map(e=>r.a.createElement("li",{key:e.id,className:"p-member_profile_field__list_item"},r.a.createElement(m.a,{href:Object(le.a)({channelId:e.id})},r.a.createElement(de.a,{channelId:e.id,className:"cursor_pointer",iconProps:{inherit:!0}})))))}he.displayName="ChannelList",he.defaultProps=pe;var me=Object(i.b)(function(e,{channelIds:t}){return{channels:Object(re.a)(t,t=>Object(ce.e)(e,t))}})(he);function be({fetchMemberProfileExtras:e,member:t}){var a=Object(s.useState)(!1),n=I()(a,2);const r=n[0],i=n[1];var o=Object(s.useState)([]),l=I()(o,2);const c=l[0],u=l[1];return Object(s.useEffect)(()=>{let a;Object(d.Gb)(t)?a=["channels"]:Object(d.tb)(t)&&(a=["shared_channels"]),a&&(i(!0),e({keys:a,userId:t.id,reason:"useProfileExtras"}).then((e={})=>{u(e.channels||e.shared_channels)}).finally(()=>{i(!1)}))},[e,t]),{extras:c,isLoading:r}}const fe=new l.b("member_profile"),_e=(o.default.func,o.default.object,{fetchMemberProfileExtras:n.a,member:void 0});function ge({fetchMemberProfileExtras:e,member:t}){var a=be(e);const n=a.extras,s=a.isLoading;return Object(T.a)().featureModernProfileFlexpane?r.a.createElement(L,{label:fe.t("Shared Channels"),value:s?r.a.createElement(se.a,{size:"small",inline:!0}):r.a.createElement(me,{channelIds:n})}):null}ge.displayName="MemberSharedChannelsField",ge.defaultProps=_e;const ye={fetchMemberProfileExtras:(...e)=>Object(ne.e)(...e)};var Oe=Object(i.b)(null,ye)(ge),Ce=a("UF3u"),ve=a("9soY"),Ee=a("G4ux"),ke=a("1hAG");const Se=new l.b("member_profile"),je=(o.default.arrayOf(o.default.object.isRequired),{teams:void 0});function Ie({teams:e}){if(!Object(T.a)().featureModernProfileFlexpane)return null;const t=Object(ie.a)(e,oe.b);return Object(E.a)(t)?Se.t("None"):r.a.createElement("ul",{className:"p-member_profile_field__list"},t.map(e=>r.a.createElement("li",{key:e.id,className:"p-member_profile_field__list_item"},Object(k.e)(e))))}Ie.displayName="TeamList",Ie.defaultProps=je;var we=Object(i.b)(function(e,{teamIds:t}){return{teams:Object(re.a)(t,t=>Object(ke.i)(e,t))}})(Ie);const Te=new l.b("member_profile");o.default.func,o.default.arrayOf(o.default.string.isRequired);const Ne={fetchAndUpsertTeamsFromAPI:n.a,sharedTeamIds:void 0};function Ae({fetchAndUpsertTeamsFromAPI:e,sharedTeamIds:t}){const a=function(e,t){var a=Object(s.useState)(!1),n=I()(a,2);const r=n[0],i=n[1];return Object(s.useEffect)(()=>{Object(E.a)(t)||(i(!0),e({ids:t,reason:"MemberSharedWorkspacesField"}).finally(()=>i(!1)))},[e,t]),{isLoading:r}}(e,t).isLoading;if(!Object(T.a)().featureModernProfileFlexpane)return null;const n=a?r.a.createElement(se.a,{size:"small",inline:!0}):r.a.createElement(we,{teamIds:t});return r.a.createElement(L,{label:Te.t("Shared Workspaces"),value:n})}Ae.displayName="MemberSharedWorkspacesField",Ae.defaultProps=Ne;const Re=r.a.memo(Ae,(e,t)=>Object(Ce.a)(t,e,2));const Me={fetchAndUpsertTeamsFromAPI:(...e)=>Object(ve.b)(...e)};var Pe=Object(i.b)(function(e,{member:t}){const a=Object(Ee.b)(e);return{sharedTeamIds:Object(d.U)(t,a)}},Me)(Re);const xe=new l.b("member_profile"),Le=(o.default.object,{member:void 0});function Fe({member:e}){if(!Object(T.a)().featureModernProfileFlexpane)return null;const t=Object(d.x)(e);return t?r.a.createElement(L,{key:"invited_by",label:xe.t("Invited By"),value:r.a.createElement(f.a,{id:t})}):null}Fe.displayName="MemberGuestInvitedByField",Fe.defaultProps=Le;var De=Fe,Be=a("WhMD"),Ue=a("rsVu");const qe=new l.b("member_profile"),He=(o.default.object,{member:void 0});function We({member:e}){if(!Object(T.a)().featureModernProfileFlexpane)return null;const t=Object(d.w)(e);return t?r.a.createElement(L,{label:qe.t("Member Until"),value:qe.t("{date} at {time}",{date:Object(Be.a)(t),time:Object(Ue.a)(t)})}):null}We.displayName="MemberGuestUntilField",We.defaultProps=He;var Ge=We;const Ke=new l.b("member_profile"),Ve=(o.default.bool,o.default.func,o.default.object,o.default.object,{currentMemberIsAdmin:!1,fetchMemberProfileExtras:n.a,member:void 0,team:void 0});function ze({currentMemberIsAdmin:e,fetchMemberProfileExtras:t,member:a,team:n}){var s=be({fetchMemberProfileExtras:t,member:a});const i=s.extras,o=s.isLoading;if(!Object(T.a)().featureModernProfileFlexpane)return null;const l=o?r.a.createElement(se.a,{size:"small",inline:!0}):r.a.createElement(me,{channelIds:i});return r.a.createElement(L,{key:"channels",label:Ke.t("Channels"),value:l},Object(d.Gb)(a)&&e&&r.a.createElement(y.c,{tip:Ke.t("Manage")},r.a.createElement(O.d,{"aria-label":Ke.t("Manage Guest Channels"),href:`${Object(k.n)(n)}admin?#restricted`,icon:"filters",type:"outline"})))}ze.displayName="MemberGuestChannelsField",ze.defaultProps=Ve;const $e={fetchMemberProfileExtras:(...e)=>Object(ne.e)(...e)};var Ye=Object(i.b)(function(e){return{currentMemberIsAdmin:Object(d.eb)(e,Object(Ee.b)(e))}},$e)(ze);a.d(t,"a",function(){return Qe});const Qe={CUSTOM:"custom",EMAIL:"email",PHONE:"phone",STATUS:"status",TIME:"time",NAME:"name",CHANNELS:"channels",SHARED_WORKSPACES:"shared_workspaces",GUEST:"guest"},Xe=new l.b("member_profile"),Je=(o.default.bool,o.default.bool,o.default.object,o.default.func,o.default.func,o.default.bool,o.default.object,o.default.arrayOf(o.default.oneOf(Object.values(Qe)).isRequired).isRequired,o.default.bool.isRequired,{hasStatus:!1,isEnterprise:!1,member:void 0,onClick:n.a,openCustomStatusDialog:n.a,prefDisplayEmailAddresses:!1,team:void 0});class member_profile_fields_MemberProfileFields extends s.Component{getProfileLinkHTML(e,t){return r.a.createElement(b.a,{href:e,onClick:this.props.onClick,target:"_blank",title:e},t||e)}getProfileUserFieldHTML(e){const t=e.split(/\s*,\s*/).map(e=>r.a.createElement(f.a,{id:e}));return Object(l.k)(t,{noConj:!0,react:!0})}getVisibleTeamProfileFieldsForMember(){var e=this.props;return function(e,t){const a=Object(k.m)(t);if(Object(E.a)(a))return[];const n=Object(d.J)(e);if(Object(E.a)(n))return[];const s=[];return a.forEach(e=>{if(e.is_hidden)return;const t=n[e.id];t&&t.value&&s.push(v()({},e,{alt:t.alt,value:t.value}))}),s}(e.member,e.team).map(e=>{let t,a;if("date"===e.type)t=Object(c.a)(e.value),a=e.value;else if("user"===e.type)a=this.getProfileUserFieldHTML(e.value);else if("link"===e.type)a=this.getProfileLinkHTML(e.value,e.alt||e.label);else if(function(e){return e&&"text"===e.type&&"skype"===e.label.toLowerCase()}(e)){const t=`skype:${e.value}?call`;a=this.getProfileLinkHTML(t,e.value)}else t=e.alt,a=e.value;return{alt:t,id:e.id,label:e.label,value:a}})}render(){var e=this.props;const t=e.featureModernProfileFlexpane,a=e.hasStatus,n=e.isEnterprise,s=e.member,i=e.onClick,o=e.prefDisplayEmailAddresses,l=e.team,c=e.types;if(!t)return null;const u=[];return c.forEach(e=>{if(e===Qe.EMAIL&&(o||Object(d.Hb)(s))){const e=Object(d.v)(s);Object(S.a)(e)&&u.push(r.a.createElement(U,{key:"email",member:s}))}else if(e===Qe.PHONE){const e=Object(d.D)(s);Object(S.a)(e)&&u.push(r.a.createElement(Y,{key:"phone",member:s,onClick:i}))}else if(e===Qe.STATUS){let e;if(a){const t=r.a.createElement(g.b,{animated:!0,className:"p-member_profile_field__status",memberId:s.id,tooltip:!1});e=Object(d.Hb)(s)?r.a.createElement(y.c,{tip:Xe.t("Edit")},r.a.createElement(_.a,{onClick:()=>{i(),this.props.openCustomStatusDialog()},tabIndex:-1},t,r.a.createElement(g.a,{className:"p-member_profile_field__status_expiration",memberId:s.id}))):t}else Object(d.Hb)(s)&&(e=r.a.createElement(m.a,{className:"p-member_profile_field__interactable",onClick:()=>{i(),this.props.openCustomStatusDialog()}},Xe.t("Set a status")));e&&u.push(r.a.createElement(L,{key:"status",label:Xe.t("Status"),value:e},Object(d.Hb)(s)&&a&&r.a.createElement(y.c,{tip:Xe.t("Edit"),zIndex:"above_fs"},r.a.createElement(O.d,{"aria-label":Xe.t("Edit Custom Status"),onClick:()=>{i(),this.props.openCustomStatusDialog()},icon:"pencil",type:"outline"}))))}else if(e!==Qe.TIME||Object(d.Ib)(s))if(e===Qe.NAME){const e=Object(d.F)(s);Object(S.a)(e)&&u.push(r.a.createElement(L,{key:"name",label:Xe.t("Display name"),value:e}))}else if(e===Qe.CUSTOM){this.getVisibleTeamProfileFieldsForMember().forEach(e=>{Object(S.a)(e.value)&&u.push(r.a.createElement(L,{key:e.id,label:e.label,value:e.alt||e.value}))})}else e===Qe.SHARED_CHANNELS?Object(d.tb)(s)&&u.push(r.a.createElement(Oe,{key:Qe.SHARED_CHANNELS,member:s})):e===Qe.SHARED_WORKSPACES?n&&u.push(r.a.createElement(Pe,{key:Qe.SHARED_WORKSPACES,member:s})):e===Qe.GUEST&&Object(d.Gb)(s)&&u.push(r.a.createElement(De,{key:"guest-invited",member:s}),r.a.createElement(Ge,{key:"guest-until",member:s}),r.a.createElement(Ye,{key:"guest-channels",member:s,team:l}));else u.push(r.a.createElement(ae,{key:"time",member:s}))}),r.a.createElement("div",null,u)}}member_profile_fields_MemberProfileFields.displayName="MemberProfileFields",member_profile_fields_MemberProfileFields.defaultProps=Je;const Ze={openCustomStatusDialog:(...e)=>Object(h.a)(...e)};t.b=Object(i.b)(function(e,{member:t}){return{hasStatus:Object(d.ab)(t),isEnterprise:Object(p.q)(e),prefDisplayEmailAddresses:Object(u.a)(e,"display_email_addresses"),featureModernProfileFlexpane:Object(p.m)(e,"feature_modern_profile_flexpane")}},Ze)(member_profile_fields_MemberProfileFields)},GXNc:function(e,t,a){},GZud:function(e,t,a){},GdkL:function(e,t,a){},GhVE:function(e,t,a){},Gmrf:function(e,t,a){"use strict";a.d(t,"b",function(){return d});var n=a("aK/h"),s=a("EzZj"),r=a("MNvw"),i=a("lhZz"),o=a("Z7Ay");const l=Object(s.b)("Stores an Error object");l.meta={name:"setLastError",key:"appSonicReduxErrorStoreSetLastError",description:"Stores an Error object"},l.propTypes=n.default.string;const c=Object(r.b)({[l]:(e,t)=>({lastError:t})},{lastError:null},{storeKey:"error",persistenceEnabled:!1});c.meta={name:"error",key:"appSonicReduxErrorStoreError"},c.propTypes={lastError:n.default.object};const d=e=>e&&e.error&&e.error.lastError;t.a=c,Object(o.a)("setLastError",(e,t)=>{Object(i.dispatchForTeamId)(e,l(t))})},GoIT:function(e,t,a){},H3xq:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("F294"),i=a("XHGt"),o=a("kOzZ"),l=a("yHhI"),c=a("jLdI"),d=a("NuWb"),u=a("fYfO"),p=a("qnZ7"),h=a("0wDQ"),m=a("AUAP"),b=a("G4ux"),f=a("brL+"),_=a("1hAG"),g=a("4M+g"),y=a("uvIC"),O=a("XL7r"),C=a("Uk1S"),v=a("pfyZ"),E=a("ULIY"),k=a("h0LD"),S=a("0sSB"),j=a("IxGy"),I=a("t85p"),w=a("BUzq"),T=a("6kok"),N=a("hOQf"),A=a("Q+UV"),R=a("Ro9a"),M=a("NrNc"),P=a("nNoG");const x=new P.b("email_workflow"),L=(e,t)=>{if(Object(R.a)(e)&&Object(M.a)(e,t))return[{name:"eyes",tooltip:x.t("I\u2019m looking into this")},{name:"white_check_mark",tooltip:x.t("Mark as resolved")}]};var F=a("Bekf"),D=a("mVkb"),B=a("Smdl"),U=a("sk9p"),q=a.n(U),H=a("fujP"),W=a("x91h"),G=a("qAkX"),K=a("TGBA"),V=a("S1sa"),z=a("Z0Cl"),$=a("CpTu"),Y=a("ifKl"),Q=a("zmn3"),X=a("aK/h"),J=a("q1tI"),Z=a.n(J),ee=a("TSYQ"),te=a.n(ee),ae=a("8dKT"),ne=a("HHn2"),se=a("Jnln"),re=a("YmYS"),ie=a("C9/x"),oe=a("yPgC"),le=a("aLpA"),ce=a("vSXf"),de=a("lfjV"),ue=a("t3QL"),pe=a("VymY"),he=a("rsVu"),me=a("tqVr"),be=a("UF3u"),fe=a("HOOb"),_e=a("uQ8d"),ge=a("EHyS"),ye=a("s19S"),Oe=a("gtcZ"),Ce=a("ubOb"),ve=a("XLFM"),Ee=a("lV3N"),ke=a("3dqR"),Se=a("oqAd"),je=a("lek6"),Ie=a("RAhH"),we=a("FXaq"),Te=a("VwYs"),Ne=a("m36V"),Ae=a("cAy8"),Re=a("od5y"),Me=a("3fyd"),Pe=a("CaXY"),xe=a("Aeia"),Le=a("y7mK"),Fe=a("qYtJ"),De=a("NvKv"),Be=a("y/l/"),Ue=a("Wzrj"),qe=a("yk+1"),He=a("RjVJ"),We=a("ALaB"),Ge=a("0gKA"),Ke=a("Y6eO"),Ve=a("xUg9"),ze=a("HvGc"),$e=a("kcos"),Ye=a("2ojh"),Qe=a("tMdt"),Xe=a("Atrf");const Je=new P.b("message"),Ze={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled"},et=(X.default.bool,X.default.bool,X.default.bool,X.default.bool,X.default.bool,X.default.bool,X.default.bool,X.default.bool,X.default.oneOf(["ephemeral","custom_response","pinned","starred","sli_highlight"]),X.default.shape({loading:X.default.bool,isHighlight:X.default.bool,feedbackOptions:X.default.object,justification:X.default.string,feedback:X.default.string}),X.default.bool,X.default.string,X.default.string,X.default.string,X.default.string,X.default.bool.isRequired,X.default.bool.isRequired,X.default.func,X.default.bool,{isVisible:!1,isPinned:!1,isStarred:!1,isEphemeral:!1,isCustomResponse:!1,isSliHighlight:!1,isSelfIm:!1,isSlackbotIm:!1,primaryType:void 0,sliHighlight:void 0,isHovered:!1,channelId:void 0,ts:void 0,currentUserId:void 0,pinnedByMemberId:void 0,showStarredItemsList:Y.a,isIAP1Enabled:!1});class message_label_MessageLabel extends J.PureComponent{static getDerivedStateFromProps(e,t){const a=e.currentUserId,n=e.pinnedByMemberId,s=e.isPinned,r=e.isStarred,i=e.featureContextualMessageShortcuts,o=e.isIAP1Enabled;if(!i)return null;if(n===a){if(!t.isPinnedByCurrentUser&&s)return{isPinnedByCurrentUser:!0,ariaLiveMessage:Je.t("Added to the pinned items",{note:"Used to confirm the pin action for customers using screen readers. Not visible on screen."})};if(t.isPinnedByCurrentUser&&!s)return{isPinnedByCurrentUser:!1,ariaLiveMessage:Je.t("Removed from the pinned items",{note:"Used to confirm the remove pin action for customers using screen readers. Not visible on screen."})}}return!t.isStarred&&r?{isStarred:!0,ariaLiveMessage:o?"Added to your saved items":Je.t("Added to your starred items",{note:"Used to confirm the star action for customers using screen readers. Not visible on screen."})}:t.isStarred&&!r?{isStarred:!1,ariaLiveMessage:o?"Removed from your saved items":Je.t("Removed from your starred items",{note:"Used to confirm the remove star action for customers using screen readers. Not visible on screen."})}:null}constructor(e){super(e),this.renderHighlight=this.renderHighlight.bind(this),this.renderStarButton=this.renderStarButton.bind(this),this.state={isPinnedByCurrentUser:!1,isStarred:!1,ariaLiveMessage:void 0}}componentDidUpdate(){this.eventuallyRemoveAriaLiveMessage()}componentWillUnmount(){this.timerId&&clearTimeout(this.timerId)}eventuallyRemoveAriaLiveMessage(){this.state.ariaLiveMessage&&(this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.setState(()=>({ariaLiveMessage:void 0})),this.timerId=null},3e3))}renderHighlight(){var e=this.props;const t=e.sliHighlight,a=e.channelId,n=e.ts,s=e.isHovered;return Object(v.i)(t)?Z.a.createElement(Qe.a,{channelId:a,ts:n,isHovered:s,sliHighlight:t}):null}renderPinnedBy(e){return Z.a.createElement(Xe.a,{id:e,className:"c-message__label_link"})}renderStarButton({text:e}){return Z.a.createElement(ve.c,{onClick:this.props.showStarredItemsList,className:"c-message__label_button"},e)}renderGutter(){var e=this.props;const t=e.primaryType,a=e.featureSonicInputs,n=e.isIAP1Enabled;let s=Ze[t];n&&"starred"===t&&(s="bookmark-filled");const r=te()("c-message__label__gutter",{"c-message__label__gutter--feature_sonic_inputs":a});return Z.a.createElement("div",{className:r},s&&Z.a.createElement(Re.b,{type:s,className:"c-message__label__icon",size:"inherit",inline:!0}))}render(){var e=this.props;const t=e.isPinned,a=e.isStarred,n=e.isEphemeral,s=e.isCustomResponse,r=e.isSliHighlight,i=e.isSelfIm,o=e.isSlackbotIm,l=e.isVisible,c=e.currentUserId,d=e.pinnedByMemberId,u=e.isIAP1Enabled,p=Object(Ye.a)({isPinned:t,isStarred:a,isEphemeral:n,isCustomResponse:s,isSliHighlight:r,isSelfIm:i,isSlackbotIm:o,isIAP1Enabled:u,currentUserId:c,pinnedBy:d,renderHighlight:this.renderHighlight,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton}),h=l&&p?Z.a.createElement("div",{className:"c-message__label"},this.renderGutter(),Z.a.createElement("div",{className:"c-message__label__text"},p)):void 0;return Z.a.createElement(Z.a.Fragment,null,h,Z.a.createElement("div",{className:"c-message__visually_hidden_label","aria-live":"assertive"},this.state.ariaLiveMessage))}}message_label_MessageLabel.displayName="MessageLabel",message_label_MessageLabel.defaultProps=et;var tt=Object(i.b)(e=>({featureSonicInputs:Object(I.m)(e,"feature_sonic_inputs"),featureContextualMessageShortcuts:Object(I.m)(e,"feature_contextual_message_shortcuts"),isIAP1Enabled:Object($e.c)(e)}),e=>({showStarredItemsList:(...t)=>e(Object(ze.k)(...t))}))(message_label_MessageLabel);a("67Ky");const at=new P.b("message"),nt=200,st=20,rt=10,it="theme_install_button",ot={quote:!0,pre:!0},lt=(X.default.object,X.default.object,X.default.string,X.default.bool,X.default.string,X.default.string,X.default.string,X.default.string,X.default.bool,X.default.oneOf(["dense","light"]),X.default.string,X.default.string,X.default.string,X.default.string,X.default.bool,X.default.string,X.default.string,X.default.arrayOf(X.default.shape({name:X.default.string.isRequired,tooltip:X.default.string})),X.default.arrayOf(X.default.shape({ts:X.default.string,user:X.default.string})),X.default.number,X.default.arrayOf(X.default.string),X.default.number,X.default.string,X.default.bool,X.default.bool,X.default.bool,X.default.string,X.default.arrayOf(X.default.shape({color:X.default.string,fallback:X.default.string})),X.default.string,X.default.arrayOf(X.default.string),X.default.shape({id:X.default.string,user:X.default.string,comment:X.default.string,is_starred:X.default.bool}),X.default.bool,X.default.bool,X.default.bool,X.default.bool,X.default.bool,X.default.func,X.default.shape({ts:X.default.string,user:X.default.string}),X.default.bool,X.default.string,oe.a.Rollup(),X.default.func,X.default.func,X.default.bool,X.default.bool,X.default.bool,X.default.string,X.default.string,X.default.shape({loading:X.default.bool,isHighlight:X.default.bool,feedbackOptions:X.default.object,justification:X.default.string,feedback:X.default.string}),X.default.bool,X.default.bool,X.default.bool,X.default.bool,X.default.shape({emoji:X.default.string}),X.default.object,X.default.string,X.default.bool,X.default.func,X.default.bool,X.default.bool,X.default.bool,X.default.string,X.default.func,X.default.func,X.default.bool,X.default.bool,X.default.bool,X.default.bool,X.default.bool,X.default.bool,X.default.string,X.default.bool.isRequired,X.default.bool,X.default.string,X.default.bool,X.default.bool,X.default.bool,X.default.string,X.default.object,X.default.string,X.default.bool,X.default.bool,X.default.string,X.default.bool,oe.a.BlockKitBlocks,X.default.string,X.default.bool,X.default.func,X.default.func,X.default.bool,X.default.string,X.default.func,X.default.oneOf(Object(K.a)(Pe.a)),X.default.string,X.default.bool,X.default.func,X.default.func,X.default.bool.isRequired,{logger:{info:Y.a,warn:Y.a,error:Y.a},message:null,ts:null,messageNotFound:!1,channelId:void 0,text:null,noSpecials:!1,alertType:null,subtype:null,theme:"light",userId:null,botId:null,appId:null,username:null,hasAdHocSender:!1,reactionKey:null,reactionKeyForInitialFileComment:null,cannedReactions:[],replies:[],replyCount:0,replyUsers:[],replyUsersCount:0,latestReply:null,threadsEverythingPref:null,expandInlineImgsPref:!1,expandNonMediaAttachmentsPref:!1,threadTs:null,attachments:[],fileId:null,fileIds:null,comment:null,isUpload:!1,showUser:!0,isFileFollowup:!1,isEditing:!1,isHovered:!1,maybeStartEditingMessage:Y.a,edited:null,isLast:!1,latestMessageTsWithReactions:null,rollup:null,logMessage:Y.a,setUnreadPoint:Y.a,isStarred:!1,isStandalone:!1,isPinned:!1,currentUserId:void 0,pinnedByMemberId:void 0,sliHighlight:null,isEphemeral:!1,isRichTextMessage:!1,shouldRenderBlocks:!1,isDeleting:!1,icons:null,botProfile:null,slackbotFeels:null,fadeAwayHighlight:!1,doneHighlighting:Y.a,isUnprocessed:!1,showResend:!1,showCancel:!1,sourceTeamId:"",resendMsg:Y.a,removeMsg:Y.a,shouldJumpToTimestamp:!1,isSelfIm:!1,isSlackbotIm:!1,isTombstonedMessage:!1,isUnknown:!1,isEKMError:!1,featureAttachmentsV2:!1,teamDomain:void 0,channelSessionId:null,previousMessageIsPinned:void 0,previousMessageIsEphemeral:void 0,previousMessageIsStarred:void 0,previousMessageSubtype:void 0,previousMessageSliHighlight:void 0,previousMessagePinnedByMemberId:void 0,renderActions:!1,renderActionsOffscreen:!1,messageContainerType:void 0,ariaAssertive:void 0,blocks:void 0,serviceTeamId:void 0,featureSonicInputs:!1,clogMessageClick:Y.a,clogUserClick:Y.a,isThreadExpanded:!1,threadListId:void 0,showThreadIfThreadable:Y.a,blocksContainerContext:Pe.a.message,hasKeyboardFocusWithin:!1,onFocus:Y.a,onBlur:Y.a,parentId:void 0});class message_Message extends J.PureComponent{constructor(e){super(e),this.setRef=this.setRef.bind(this),this.onContainerClick=this.onContainerClick.bind(this),this.onTimestampClick=this.onTimestampClick.bind(this),this.startEditing=this.startEditing.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onMenuToggle=this.onMenuToggle.bind(this),this.startHighlightingTimer=this.startHighlightingTimer.bind(this),this.onDoneHighlighting=this.onDoneHighlighting.bind(this),this.onDeleteAnimationTick=this.onDeleteAnimationTick.bind(this),this.onDeleteAnimationEnd=this.onDeleteAnimationEnd.bind(this),this.resendMsg=this.resendMsg.bind(this),this.removeMsg=this.removeMsg.bind(this),this.formatInlineAttachmentMaybe=this.formatInlineAttachmentMaybe.bind(this),this.formatThemeInstallButton=this.formatThemeInstallButton.bind(this),this.customFormatHandler=this.customFormatHandler.bind(this),this.customContentHandler=this.customContentHandler.bind(this),this.clogLinkClick=this.clogLinkClick.bind(this),this.clogUserClick=this.clogUserClick.bind(this),this.shouldShowAttachment=this.shouldShowAttachment.bind(this),this.messageRef=null,this.deleteAnimation=null,this.hasDisplayedContent=!0,this.inlineAttachmentsKey=0,this.setAttachmentsSorted(),this.state={isHovered:e.isHovered,actionsMenuOpen:!1,height:null}}componentDidMount(){this.props.fadeAwayHighlight&&this.startHighlightingTimer(),this.isDeleting()&&this.onDeleteAnimationEnd()}componentWillUnmount(){this.highlightTimer&&(clearTimeout(this.highlightTimer),this.onDoneHighlighting()),this.deleteAnimation&&(this.deleteAnimation.cancel(),this.onDeleteAnimationEnd())}onContainerClick(e){if(e.shiftKey&&Object(ge.a)(e)&&!Object(fe.a)(e.target))return e.stopPropagation(),void this.props.logMessage({channelId:this.props.channelId,ts:this.props.ts});e.altKey&&(e.preventDefault(),this.props.setUnreadPoint({channelId:this.props.channelId,unreadTs:this.props.ts}))}onDeleteAnimationEnd(){this.removeMsg(),this.deleteAnimation=null}onDeleteAnimationTick({value:e,nextTick:t}){this.messageRef&&this.setState(()=>({height:e}),t)}onDoneHighlighting(){this.props.doneHighlighting(),this.highlightTimer=null}onMenuToggle(e){e?this.setState(()=>({actionsMenuOpen:e})):setTimeout(()=>{this.setState(()=>({actionsMenuOpen:!1}))},100)}onMouseEnter(){this.setState(()=>({isHovered:!0}))}onMouseLeave(){this.setState(()=>({isHovered:!1}))}onTimestampClick(e){e.preventDefault(),this.props.shouldJumpToTimestamp&&Object(ye.q)(this.props.channelId,this.props.ts,this.props.threadTs)}getResendText(){return this.props.isEKMError?at.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel."):at.t("Slack couldn\u2019t send this message")}getTextWithThemes(){if(!this.props.text)return this.props.text;return this.props.text.replace(/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){7})(#[A-Fa-f0-9]{6})(\b)/g,e=>`${e} <${it}|${e}>`)}setAttachmentsSorted({attachments:e,text:t}=this.props){var a=Object(V.a)(Object(Q.a)(Object(z.a)(e,this.shouldShowAttachment),ue.b),e=>this.isInlineImage(e,t)),n=q()(a,2);const s=n[0],r=n[1];this.attachmentsInline&&s&&!Object(be.a)(this.attachmentsInline,s,2)&&(this.inlineAttachmentsKey+=1),this.attachmentsInline=s,this.attachmentsBelow=r}setRef(e){this.messageRef=e}UNSAFE_componentWillReceiveProps(e){const t=this.props.fadeAwayHighlight;e.fadeAwayHighlight&&!t&&this.startHighlightingTimer(),this.isDeleting(e)&&!this.isDeleting()&&this.startDeleteAnimation(),this.setAttachmentsSorted(e),this.setState(()=>({isHovered:e.isHovered}))}clogLinkClick(e={}){var t=this.props;const a=t.ts,n=t.channelId,r={ts:a,user:t.userId,channel:n,bot_id:t.botId},i=s()({},e,{request_id:null});"user_link"===e.type?this.props.clogUserClick({msg:r,payload:i}):this.props.clogMessageClick({msg:r,payload:i})}clogUserClick(e){this.clogLinkClick(s()({type:"user_link"},e))}componentDidCatch(e){this.setState(()=>({caughtError:!0}));const t=e?e.message:"",a=e?e.stack:"",n=this.props||{},s=n.channel&&n.channelId,r=n.logger;r.error(`Message componentDidCatch: ${n.subtype} ${n.ts} in ${s}, ${t}`),a&&r.error(a)}customContentHandler(e){if(this.props.edited){const t=Object(G.a)(e)||{};e.push({type:"custom_edited_label",omitWhitespace:!!ot[t.type]})}return this.hasDisplayedContent=!!e.length,e}customFormatHandler(e){const t=e.item,a=e.getDefaultOutput;let n;return"link"===t.type?n=t.url===it?this.formatThemeInstallButton(e):this.formatInlineAttachmentMaybe(e):"custom_edited_label"===t.type&&(n=this.renderEditedLabel({omitWhitespace:t.omitWhitespace})),n||a()}focusFirst(e){this.focusNode(Object(pe.b)(e))}focusLast(e){this.focusNode(Object(pe.c)(e))}focusNode(e){e&&document.activeElement!==e&&(e.focus(),e.classList.add("focus-ring"))}formatInlineAttachmentMaybe({item:e,getDefaultOutput:t}){var a=this.props;const n=a.ts,r=a.channelId,i=a.sourceTeamId,o=e.url,l=Object($.a)(this.attachmentsInline,{fromUrl:Object(W.a)(o)});return l?Z.a.createElement(J.Fragment,null,t(),Z.a.createElement(Ee.a,s()({},l,{messageTs:n,activeChannelId:r,sourceTeamId:i,clogLinkClick:this.clogLinkClick,botProfile:this.props.botProfile,isInline:!0}))):t()}formatThemeInstallButton({item:e}){const t=e.contents[0].text.replace(/\s/g,"").split(",");return Z.a.createElement("div",{className:"c-message__theme_button_container"},Z.a.createElement(Ve.a,{colors:t,clogLinkClick:this.clogLinkClick}))}isDeleting(e=this.props){const t=e.isDeleting,a=e.isStandalone;return t&&!a}isInlineImage(e,t=this.props.text){return t&&-1!==Object(W.a)(t).indexOf(e.fromUrl)&&Object(we.l)(e)}isThreadRootTombstone(){return"tombstone"===this.props.subtype}removeMsg(){var e=this.props;const t=e.ts,a=e.channelId,n=e.messageContainerType,s="thread_broadcast"===e.subtype&&n===le.I.THREADS_FLEXPANE;this.props.removeMsg({channelId:a,ts:t,broadcastDelete:s})}resendMsg(){var e=this.props;const t=e.ts,a=e.channelId;this.props.resendMsg(a,t)}shouldShowAttachment(e){var t=this.props;const a=t.text,n=t.blocks,s=t.subtype,r=t.isStandalone,i=t.expandInlineImgsPref,o=t.expandNonMediaAttachmentsPref,l=t.isRichTextMessage;return Object(se.g)({attachment:e,messageText:a,messageBlocks:n,messageSubtype:s,messageIsStandalone:r,expandInlineImgsPref:i,expandNonMediaAttachmentsPref:o,isRichTextMessage:l})}shouldShowMessageLabel({labelTypes:e}){var t=this.props;const a=t.showUser,n=t.isFileFollowup,s=t.pinnedByMemberId,r=t.previousMessageIsStarred,i=t.previousMessageIsPinned,o=t.previousMessageIsEphemeral,l=t.previousMessageSubtype,c=t.previousMessageSliHighlight,d=t.previousMessagePinnedByMemberId;if(Object(H.a)(e))return!1;if(e.sliHighlight)return!0;if(!a||n){const t=Object(ie.a)({isStarred:r,isPinned:i,isEphemeral:o,subtype:l,sliHighlight:c});if(Object(be.a)(e,t))return e.isPinned&&t.isPinned&&d!==s}return!0}shouldShowResendControls(){var e=this.props;const t=e.showResend,a=e.showCancel;return t||a}startDeleteAnimation(){if(!this.messageRef)return;const e=this.messageRef.clientHeight;this.deleteAnimation=Object(de.a)({fromValue:e,toValue:0,duration:nt,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}startEditing(){var e=this.props;(0,e.maybeStartEditingMessage)({channelId:e.channelId,ts:e.ts,scroll:!0})}startHighlightingTimer(){this.highlightTimer||(this.highlightTimer=setTimeout(this.onDoneHighlighting,4500))}renderActions(){var e=this.props;const t=e.ts,a=e.reactionKey,n=e.fileId,s=e.fileIds,r=e.comment,i=e.replies,o=e.replyCount,l=e.rollup,c=e.threadsEverythingPref,d=e.threadTs,u=e.channelId,p=e.subtype,h=e.isStarred,m=e.isPinned,b=e.isEphemeral,f=e.isDeleting,_=e.isStandalone,g=e.isUnknown,y=e.setUnreadPoint,O=e.theme,C=e.renderActions,v=e.renderActionsOffscreen,E=e.messageContainerType,k=e.hasKeyboardFocusWithin,S=e.parentId;var j=this.state;const I=j.actionsMenuOpen,w=j.isHovered;if(!t||!u)return null;const T=v&&!k&&!w&&!C;return I||w||k||T||C?f||_||g?null:Z.a.createElement(Ge.a,{reactionKey:a,fileId:n,fileIds:s,comment:r&&r.id,replies:i,replyCount:o,rollup:l,ts:t,threadsEverythingPref:c,threadTs:d,channelId:u,subtype:p,isStarred:h,isPinned:m,isEphemeral:b,editHandler:this.startEditing,unreadHandler:y,onMenuOpen:()=>this.onMenuToggle(!0),onMenuClose:()=>this.onMenuToggle(!1),onEmojiPickerOpen:()=>this.onMenuToggle(!0),onEmojiPickerClose:()=>this.onMenuToggle(!1),theme:O,renderOffscreen:T,messageContainerType:E,parentId:S}):null}renderAttachments(){var e=this.props;const t=e.ts,a=e.channelId,n=e.blocks,r=e.text,i=e.blocksContainerContext,o=e.sourceTeamId,l=this.attachmentsBelow;if(!l||!l.length)return null;let c=st;const d=Object(Q.a)(l,(e,l)=>{const d=e.id||l+1,u=e.botId||this.props.botId;return e.blocks&&(c=rt),Z.a.createElement(Ee.a,s()({},e,{service:u,messageTs:t,activeChannelId:a,sourceTeamId:o,key:d,clogLinkClick:this.clogLinkClick,botProfile:this.props.botProfile,isOnlyMessageContent:!this.hasDisplayedContent||!n&&!r,blocksContainerContext:i}))}),u=d.splice(c);return Z.a.createElement("div",{className:"c-message__attachments"},d,this.renderAttachmentsOverLimitMaybe(u,c))}renderAttachmentsOverLimitMaybe(e,t){if(!e.length)return null;const a=this.props.featureAllyBugbash,n={useAttachmentRules:!1,shouldBeExpandedByDefault:!1,expandableKey:Object(ne.a)("attachmentsOverLimit",this.props.ts,{limit:t})},r=e.length-t,i=a?{"aria-label":at.t("{remainingAttachments, plural, =1 {Toggle attachment} other {Toggle additional {remainingAttachments} attachments}}",{remainingAttachments:r,note:"the label for the button that expands/collapses addtional message attachments, describes the button for customers using screen readers"})}:{};return Z.a.createElement("div",null,Z.a.createElement(Te.a,s()({},n,i),e),Z.a.createElement(Ne.a,s()({},n,{render:(t,a)=>Z.a.createElement(Ae.a,{isExpanded:t.isExpanded,onClick:a,attachmentsOverLimitCount:e.length})})))}renderAutomatedSubtype(){return Z.a.createElement(qe.a,{subtype:this.props.subtype,channelId:this.props.channelId,timestamp:this.props.ts})}renderAvatar(){if(this.isThreadRootTombstone())return Z.a.createElement("div",{className:"c-message__tombstone_icon"},Z.a.createElement(Re.a,{type:"trash",align:"top"}));var e=this.props;const t=e.userId,a=e.hasAdHocSender,n=e.botId,s=e.botProfile,r=e.isStandalone,i=e.icons,o=e.slackbotFeels,l=e.isTombstonedMessage,c=e.isUnknown;return Z.a.createElement(ke.c,{className:"c-message__avatar",userId:t,isAdHocMember:a,botId:n,botProfile:s,slackbotFeels:o,size:36,icons:i,isInteractive:!l&&!r,isUnknown:c,showCard:!0,showTooltip:!0,clogLinkClick:this.clogUserClick,ariaHidden:"true",tabIndex:"-1"})}renderBody(){var e=this.props;const t=e.ts,a=e.fileId,n=e.subtype,s=e.rollup,r=e.userId,i=e.edited,o=e.noSpecials,l=e.ariaAssertive,c=e.attachments,d=e.blocks,u=e.shouldRenderBlocks,p=e.isTombstonedMessage,h=e.isUnknown,m=e.sourceTeamId,b=e.message,f=e.blocksContainerContext,_=e.isRichTextMessage,g=e.theme;if(this.isThreadRootTombstone())return Z.a.createElement("span",{className:"c-message__body c-message__body--tombstone"},at.t("This message was deleted."));if(h)return Z.a.createElement("span",{className:"c-message__body c-message__body--unknown"},"\xa0");if(a||"file_comment"===n||"file_mention"===n)return null;if(s)return this.renderRollup();if(Object(ae.a)(n))return this.renderAutomatedSubtype();const y=te()("c-message__body",{"c-message__body--me":"me_message"===n,"c-message__body--automated":p});if(d&&u)return Z.a.createElement(Me.a,{blocksContainerContext:f,msg:b,clogLinkClick:this.clogLinkClick,inline:_&&"dense"===g});const O=parseInt(t,10)>le.a;return Z.a.createElement(je.a,{"data-qa":"message-text",className:y,text:this.getTextWithThemes(),memberId:r,customFormatHandler:this.customFormatHandler,customContentHandler:this.customContentHandler,key:this.inlineAttachmentsKey,doSlackActionLinks:!0,clogLinkClick:this.clogLinkClick,noSpecials:o,ariaAssertive:l,ignoredPropEdited:i,ignoredPropAttachments:c,addDirectionAttr:O,sourceTeamId:m})}renderContent(){var e=this.props;const t=e.showUser,a=e.theme,n=e.isStandalone,s=e.reactionKey,r=e.reactionKeyForInitialFileComment,i=te()("c-message__content",{"c-message__content--feature_sonic_inputs":this.props.featureSonicInputs});return Z.a.createElement("div",{className:i,"data-qa":"message_content"},t&&this.renderContentHeader(),"light"===a&&this.renderThreadBroadcastPreamble(),this.renderBody(),this.renderFile(),this.renderFiles(),this.renderAttachments(),!n&&!this.isThreadRootTombstone()&&this.renderReactions(s),!n&&!this.isThreadRootTombstone()&&this.renderReactions(r),!n&&this.renderReplyBar(),this.renderThreadBroadcastFooter(),this.shouldShowResendControls()&&this.renderResendControls())}renderContentHeader(){var e=this.props;const t=e.userId,a=e.botId,n=e.username,s=e.theme,r=e.isUpload,i=e.isStandalone,o=e.isTombstonedMessage,l=e.botProfile;if(this.isThreadRootTombstone())return null;const c=o?Object(_e.a)({upload:r}):void 0;return Z.a.createElement("div",{className:"c-message__content_header"},Z.a.createElement(Le.a,{overrideNameText:c,userId:t,botId:a,username:n,isInteractive:!i&&!o,botProfile:l,clogLinkClick:this.clogUserClick})," ","light"===s&&this.renderTimestamp(),"dense"===s&&Z.a.createElement("span",{className:"c-message__dense_copy_timestamp copy_only"},this.renderTimestamp(),Z.a.createElement("br",null)),"dense"===s&&"\xa0","dense"===s&&this.renderThreadBroadcastPreamble())}renderEdit(){var e=this.props;const t=e.channelId,a=e.ts,n=e.messageContainerType;return a&&t?Z.a.createElement("div",{className:"c-message__content"},Z.a.createElement(Ke.a,{channelId:t,ts:a,messageContainerType:n})):null}renderEditedLabel({omitWhitespace:e=!1}={}){const t=this.props.edited.ts,a=Z.a.createElement("span",{key:"edited",className:"c-message__edited_label",dir:"ltr"},!e&&"\xa0",at.t("(edited)"),!e&&"\xa0");if(t){const e=at.t("{date} at {time}",{date:Object(me.a)(t,{shortenMonth:!0}),time:Object(he.a)(t)});return Z.a.createElement(Ie.c,{key:"edited",delay:Ie.a,tip:e},a)}return a}renderError(){if(!this.props.featureTinyspeck)return null;var e=this.props;const t=e.ts,a=e.channelId;return Z.a.createElement("div",{style:{background:"#FFCFCF",padding:"24px"}},Z.a.createElement("strong",null,"TS-ONLY: Message ",t," in ",a," failed to render.")," ","Please go to #escal-messages and read up to see if this was already reported. If not, please make a report including a link to the message before this one (if in a public channel.)")}renderFile(){var e=this.props;const t=e.fileId,a=e.comment,n=e.subtype;return t&&a&&"file_comment"===n?this.renderFileComment():null}renderFileComment(){var e=this.props;const t=e.fileId,a=e.comment,n=e.isFileFollowup,s=e.theme,r=e.subtype,i=e.userId;return t&&a?["file_comment"===r&&(!n||"dense"===s)&&Z.a.createElement(Be.a,{fileId:t,comment:a,followup:n,key:`${a.id}-meta`})||null,Z.a.createElement(je.a,{text:a.comment,memberId:i,className:"c-message__comment c-message__body",key:`${a.id}-body`,clogLinkClick:this.clogLinkClick})]:null}renderFiles(){var e=this.props;const t=e.fileIds,a=e.channelId,n=e.subtype,s=e.text;if(!t||!t.length||!a)return null;if("file_comment"===n)return null;const r=Z.a.createElement(xe.b,{msg:this.props.message}),i=te()("c-message__files","c-message__files--file_threads_meta_data","c-message__files--pillow",{"c-message__files--empty_body":!s});return Z.a.createElement("div",{className:i},r)}renderGutter(){const e=te()("c-message__gutter",{"c-message__gutter--feature_sonic_inputs":this.props.featureSonicInputs});if("light"===this.props.theme){if(this.props.isFileFollowup)return Z.a.createElement("div",{className:te()(e,"c-message__gutter--empty")});if(this.props.isEditing||this.props.showUser)return Z.a.createElement("div",{className:e},this.renderAvatar())}return Z.a.createElement("div",{className:e},this.renderTimestamp({isHiddenFromCopy:"dense"===this.props.theme}))}renderMessageLabel({labelTypes:e,primaryLabelType:t}){var a=this.props;const n=a.sliHighlight,r=a.isSlackbotIm,i=a.isSelfIm,o=a.channelId,l=a.ts,c=a.currentUserId,d=a.pinnedByMemberId,u=a.sourceTeamId,p=this.state.isHovered;return Z.a.createElement(tt,s()({},e,{isVisible:this.shouldShowMessageLabel({labelTypes:e}),primaryType:t,channelId:o,ts:l,isHovered:p,isSlackbotIm:r,isSelfIm:i,sliHighlight:n,currentUserId:c,pinnedByMemberId:d,sourceTeamId:u}))}renderReactions(e){var t=this.props;const a=t.ts,n=t.latestMessageTsWithReactions,s=t.cannedReactions;if("file_comment"===this.props.subtype)return null;if(!e)return null;const r=a===n;return Z.a.createElement(Se.a,{reactionKey:e,cannedReactions:s,isLatestReactionInChannel:r})}renderReplyBar(){var e=this.props;const t=e.replies,a=e.replyCount,n=e.replyUsers,s=e.replyUsersCount,r=e.latestReply,i=e.channelId,o=e.threadTs,l=e.isThreadExpanded,c=e.threadListId,d=e.showThreadIfThreadable;return i&&a?Z.a.createElement(Fe.a,{channelId:i,threadTs:o,replies:t,replyCount:a,replyUsers:n,replyUsersCount:s,latestReply:r,isThreadExpanded:l,threadListId:c,showThreadIfThreadable:d}):null}renderResendControls(){var e=this.props;const t=e.isEKMError,a=e.showResend,n=e.showCancel;let s=null;a&&(s=Z.a.createElement(ve.c,{className:"c-message__resend",onClick:this.resendMsg},at.t("Try again")));let r=null;n&&(r=Z.a.createElement(ve.c,{className:"c-message__cancel",onClick:this.removeMsg},t?at.t("Clear"):at.t("Cancel")));let i=null;return a&&n&&(i=" | "),Z.a.createElement("div",{className:"c-message__resend_controls"},Z.a.createElement("div",{className:"c-message__resend_column"}),this.getResendText(),s,i,r)}renderRollup(){var e=this.props;const t=e.rollup,a=e.channelId,n=e.userId;return t&&a?Z.a.createElement(Ue.a,{rollup:t,channelId:a,user:n}):null}renderThreadBroadcastFooter(){var e=this.props;const t=e.ts,a=e.threadTs,n=e.channelId,s=e.subtype,r=e.isStandalone;return t&&n&&a&&!r&&"thread_broadcast"===s?Z.a.createElement(We.a,{ts:t,threadTs:a,channelId:n}):null}renderThreadBroadcastPreamble(){var e=this.props;const t=e.ts,a=e.threadTs,n=e.channelId,s=e.subtype,r=e.isStandalone;return t&&n&&!r&&"thread_broadcast"===s?Z.a.createElement(He.a,{ts:t,threadTs:a,channelId:n}):null}renderTimestamp({isHiddenFromCopy:e=!1}={}){var t=this.props;const a=t.teamDomain,n=t.channelId,r=t.ts,i=t.threadTs,o=t.isStandalone,l=t.isTombstonedMessage;if(!r||!n||l)return null;let c,d;o||(c=Object(N.u)({teamDomain:a,channelId:n,ts:r,threadTs:i}),d=this.onTimestampClick);const u={};return e&&(u["data-stringify-text"]=""),Z.a.createElement(De.b,s()({timestamp:r,relative:!1,full:!1,link:c,onClick:d},u))}render(){if(this.state.caughtError)return this.renderError();if(this.props.messageNotFound)return null;var e=this.props;const t=e.theme,a=e.isEditing,n=e.showUser,s=e.alertType,r=e.fadeAwayHighlight,i=e.isLast,o=e.isStandalone,l=e.isUnprocessed,c=e.subtype,d=e.rollup,u=e.sliHighlight,p=e.ts,h=e.isPinned,m=e.isEphemeral,b=e.isStarred,f=e.isTombstonedMessage,_=e.isEKMError,g=e.hasKeyboardFocusWithin;var y=this.state;const O=y.isHovered,C=y.actionsMenuOpen,E=y.height,k=Object(ie.a)({isPinned:h,isEphemeral:m,isStarred:b,subtype:c,sliHighlight:u}),S=Object(re.a)(k),j=te()("c-message",{[`c-message--${t}`]:t,"c-message--hover":O||C,"c-message--focus-within":g,"c-message--adjacent":!a&&!n&&!o,"c-message--thread_broadcast":"thread_broadcast"===c,"c-message--highlight_yellow_bg":"shared_channel_join"===s,"c-message--highlight":!o&&a,"c-message--fade_highlight":r&&!S,"c-message--last":i,"c-message--rollup":d,"c-message--standalone":o,"c-message--unprocessed":l,"c-message--resend":this.shouldShowResendControls(),"c-message--deleting":this.isDeleting(),"c-message--editing":a,"c-message--sli_highlight_negative":Object(v.f)(u),[`c-message--${S}`]:S});let I={};return null!==E&&(I={height:E}),Z.a.createElement("div",{ref:this.setRef,className:j,onClick:this.onContainerClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseEnter,onFocus:this.props.onFocus,onBlur:this.props.onBlur,style:I,role:"document","data-qa":"message_container","data-qa-placeholder":Object(N.tb)(p)},this.renderMessageLabel({labelTypes:k,primaryLabelType:S}),this.renderGutter(),!o&&a&&this.renderEdit(),(o||!a)&&this.renderContent(),!f&&!_&&!o&&!a&&this.renderActions())}}message_Message.displayName="Message",message_Message.defaultProps=lt;var ct=Object(ce.a)("feature_ally_bugbash")(Object(Ce.a)(Object(Oe.a)(message_Message)));const dt={logMessage:(...e)=>Object(k.a)(...e),clogMessageClick:(...e)=>Object(c.a)(...e),clogUserClick:(...e)=>Object(d.a)(...e),maybeStartEditingMessage:(...e)=>Object(j.g)(...e),removeMsg:(...e)=>Object(h.a)(...e),resendMsg:(...e)=>Object(p.a)(...e)};t.a=Object(i.b)((e,{ts:t,channelId:a,previousMessageTs:n})=>{const i=Object(u.a)(e,a,t),c=Object(C.a)(e),d=Object(O.k)(e,"threads_everything"),p=Object(O.k)(e,"expand_inline_imgs"),h=Object(O.k)(e,"expand_non_media_attachments"),k=Object(g.e)(e,a),R=Object(I.m)(e,"feature_attachments_v2"),M=Object(I.m)(e,"feature_sonic_inputs"),P=Object(I.m)(e,"feature_tinyspeck"),x=Object(o.a)({state:e}),U=Object(l.a)({state:e});if(!i)return{channelId:a,clogger:x,logger:U,featureTinyspeck:P,messageNotFound:!0};const q=Object(f.b)(e);t&&Object(E.d)(q,a,t),n&&Object(E.d)(q,a,n);const H=i.files,W=Object(y.c)(e,Object(r.a)(H)),G=Object(N.cb)(i)?W&&W.id:void 0,K=Object(u.a)(e,a,n,!1),V=!Object(N.W)(e,i,K),z=Object(D.a)(i,K),$=Object(A.b)(i),Y=Object(N.R)(e,i),Q=Y.botId&&Object(m.d)(e,i),X=Q?Q.app_id:null,J=i.slackbot_feels||null,Z=i.comment&&W&&Object(y.d)(e,W.id,i.comment.id)||i.comment;var ee=Object(v.e)(e,{channelId:a,ts:t});const te=ee.isDeleting,ae=ee.sliHighlight,ne=!!Object(j.e)(e,{channelId:a,ts:t}),se=Object(N.K)(i),re=se?se.pinnedBy:null;let ie;if(K){const t=Object(N.K)(K),s=t?t.pinnedBy:null;ie={previousMessageIsStarred:Object(N.rb)(K),previousMessageIsPinned:Object(w.j)(e,{channelId:a,ts:n}),previousMessageIsEphemeral:Object(N.bb)(K),previousMessageSubtype:K.subtype,previousMessageSliHighlight:K.sliHighlight,previousMessagePinnedByMemberId:s}}const oe=i.thread_ts;let le;oe&&(le={replyCount:i.reply_count},Object(B.a)()?i.reply_users?(le.replyUsers=i.reply_users,le.replyUsersCount=i.reply_users_count,le.latestReply=i.latest_reply):i.replies&&(le.replies=i.replies):i.replies?le.replies=i.replies:(le.replyUsers=i.reply_users,le.replyUsersCount=i.reply_users_count,le.latestReply=i.latest_reply));const ce=Object(I.d)(e),de=Object(_.d)(e),ue=de&&de.domain;let pe;if(Q){const t=Object(b.d)(e,i.user);pe=Object(S.c)({bot:Q,botProfile:i.bot_profile,member:t,teamId:q})}return s()({message:i,channelId:a,clogger:x,logger:U,blocks:i.blocks,alertType:i.alert_type,subtype:i.subtype,text:i.text,noSpecials:!1===i.mrkdwn,theme:c},Y,{appId:X,hasAdHocSender:Object(F.a)(i)},le,{threadTs:oe,threadsEverythingPref:d,expandInlineImgsPref:p,expandNonMediaAttachmentsPref:h,attachments:i.attachments,fileId:G,fileIds:H,comment:Z,isUpload:i.upload,reactionKey:$,cannedReactions:L(e,i),showUser:V,isFileFollowup:z,edited:i.edited,isStarred:Object(N.rb)(i,W,"file_comment"===i.subtype&&Z),isPinned:Object(w.j)(e,{channelId:a,ts:t}),currentUserId:ce,pinnedByMemberId:re,sliHighlight:ae,botProfile:i.bot_profile,slackbotFeels:J,icons:i.icons,isEditing:ne,isUnprocessed:Object(N.sb)(i)&&!Object(N.bb)(i),isEphemeral:Object(N.bb)(i),isDeleting:te,showResend:i.showResend,showCancel:i.showCancel,isSlackbotIm:Object(T.Ib)(k),isRichTextMessage:Object(N.mb)(i),shouldRenderBlocks:Object(N.Cb)(e,i),sourceTeamId:Object(N.V)(i)||Object(f.b)(e),isSelfIm:Object(T.Ub)(ce,k),isTombstonedMessage:Object(N.ab)(i)||Object(N.Y)(i),isUnknown:Object(N.jb)(i),isEKMError:i.isEKMError,teamDomain:ue},ie,{featureTinyspeck:P,featureAttachmentsV2:R,ariaAssertive:Object(N.Z)(i),serviceTeamId:pe,featureSonicInputs:M})},dt)(ct)},"HAG/":function(e,t,a){},HOOb:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a("yZHI");function s(e){return Object(n.a)(e,e=>"A"===e.nodeName)}},HQme:function(e,t,a){},HaAk:function(e,t,a){},HfwO:function(e,t,a){"use strict";a.d(t,"a",function(){return w});var n=a("QbLZ"),s=a.n(n),r=a("TGBA"),i=a("NZ+B"),o=a("q1tI"),l=a.n(o),c=a("XHGt"),d=a("TSYQ"),u=a.n(d),p=a("aK/h"),h=a("1zbP"),m=a("4M+g"),b=a("G4ux"),f=a("6kok"),_=a("Fdc0"),g=a("3dqR"),y=a("X5Eo"),O=a("0DE1"),C=a("8Sv9"),v=a("3tRM"),E=a("6avh"),k=a("od5y"),S=a("Cudy"),j=a("ZYn4"),I=a("kd6D");a("A4tE");const w={right:"right",bottom:"bottom"},T=(p.default.string,p.default.string.isRequired,p.default.node,p.default.oneOf(Object(r.a)(w)),p.default.bool,p.default.bool,p.default.bool,p.default.bool,p.default.bool,p.default.bool,p.default.object,p.default.string,p.default.string,p.default.bool,p.default.bool,{className:void 0,member:void 0,memberPrimaryName:void 0,memberSecondaryName:void 0,secondaryContent:void 0,secondaryContentPosition:w.bottom,invert:!1,showAvatar:!0,showDraftIcon:!1,showPresence:!0,showStatus:!0,showTooltip:!0,isDeactivated:!1,useShortMode:!1});function N(e){const t=e.className,a=e.id,n=e.invert,r=e.member,i=e.memberPrimaryName,o=e.memberSecondaryName,c=e.secondaryContent,d=e.secondaryContentPosition,p=e.showAvatar,m=e.showDraftIcon,b=e.showPresence,f=e.showStatus,T=e.showTooltip,N=e.isDeactivated,A=e.useShortMode,R=Object(_.ib)(r),M=Object(_.mb)(r),P=Object(_.Hb)(r),x=Object(h.c)(a),L=Object(h.d)(a),F=l.a.createElement(S.a,{"data-qa":"member-entity__primary-name",name:i,invert:n&&!N,isAppOrBot:R,isDeleted:M,isSelf:P,isNonExistent:x,isUnknown:L}),D=l.a.createElement(v.a,{className:"c-member__secondary-name","data-qa":"member-entity__secondary-name"},o),B=r&&l.a.createElement(C.a,{className:"c-member__title","data-qa":"member-entity__title"},Object(_.S)(r)),U=l.a.createElement(k.b,{type:"pencil",size:"inherit",className:"c-member__draft_icon","aria-hidden":!0,"data-qa":"member-entity__draft-icon"}),q=!M&&l.a.createElement(j.a,{memberId:a,className:"c-member__presence",invert:n&&!N,"data-qa":"member-entity__presence"}),H=l.a.createElement(E.b,{memberId:a,tooltip:T,animated:A,className:"c-member__current-status c-member__current-status--medium","data-qa":"member-entity__status"}),W=d===w.bottom&&c?l.a.createElement(O.a,{"data-qa":"member-entity__metadata"},c):null,G=l.a.createElement("span",{className:"c-member__primary_content"},F,b&&q,!A&&D,f&&H),K=M||N?I.c.dim:null,V=u()(t,"c-member","c-member--medium",{"c-member--with-presence":b});return l.a.createElement(y.a,{avatar:e=>p&&(m?U:l.a.createElement(g.c,s()({},e,{size:I.a.medium,userId:a,"data-qa":"member-entity__avatar",isInteractive:!1}))),className:V,size:"medium",style:K,text:G,subtext:B,metadata:!M&&W,"data-qa":"medium_member_entity"})}N.displayName="MediumMemberEntity",N.defaultProps=T,t.b=Object(c.b)(function(e,{id:t,isDraftContext:a,showStatus:n,isUnknown:s}){const r=Object(b.d)(e,t);let o;if(a){const a=Object(m.k)(e,t);o=!(!a||!Object(f.y)(e,a.id))}return{member:r,memberPrimaryName:Object(_.V)(e,r,!1,!1),memberSecondaryName:Object(_.M)(e,r),showDraftIcon:o,showStatus:n&&Object(_.ab)(r),isUnknown:Object(i.a)(s)?s:Object(h.d)(r)}})(N)},Ho8D:function(e,t,a){},HyiT:function(e,t,a){},Hza5:function(e,t,a){},IEWa:function(e,t,a){"use strict";a.d(t,"b",function(){return p}),a.d(t,"a",function(){return h}),a.d(t,"c",function(){return m});var n=a("0VPD"),s=a("7EGn"),r=a("G4ux"),i=a("1hAG"),o=a("Fdc0"),l=a("5mKg"),c=a("t85p"),d=a("h9PG"),u=a("oZ18");const p=e=>{const t=Object(r.b)(e),a=Object(o.Gb)(t),n=Object(c.m)(e,"feature_builder_can_access");return!a&&!!n},h=e=>{const t=Object(r.b)(e),a=Object(o.Gb)(t),p=Object(i.d)(e),h=Object(u.d)(e);if(!Object(c.m)(e,"feature_builder_can_access"))return!1;if(!Object(l.D)(p))return!1;if(Object(l.s)(p)&&!1===Object(d.a)(e,"workflow_builder_enabled"))return!1;const m=Object(d.a)(e,"who_can_create_workflows"),b=Object(s.a)(m,"type",[]),f=Object(s.a)(m,"subteam",[]),_=Object(s.a)(m,"user",[]);return!(!b.includes("regular")||a)||(!(!b.includes("admin")||!Object(o.eb)(e,t))||(!(!b.includes("owner")||!Object(o.Eb)(e,t))||(!!_.includes(t.id)||(Object(n.a)(f,h).length>0||0===b.length&&!a))))},m=e=>{const t=Object(c.m)(e,"feature_builder_webhook_trigger"),a=Object(d.a)(e,"workflows_webhook_trigger_enabled");return t&&a}},"Ik/9":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("nNoG"),s=a("NqlN");const r=new n.b("a11y");function i({name:e,isGuest:t,isSelf:a,isAppOrBot:n,isDeleted:i,isPrescenceAway:o,isPrescenceDND:l,statusEmojiCode:c,statusText:d,isCurrent:u,hasNotifications:p,isStarred:h,isMuted:m,hasDraft:b}={}){const f=(()=>i?r.t("deactivated"):n?r.t("APP"):t&&!o&&l?r.t("guest, do not disturb"):t&&o&&!l?r.t("guest, away"):!t||o||l?a&&!o&&l?r.t("you, do not disturb"):!a||o||l?t||o||!l?t||!o||l?"":r.t("away"):r.t("do not disturb"):r.t("you"):r.t("guest"))(),_=c&&Object(s.a)(c),g=(()=>_&&!d?_:_&&d?r.t("{statusEmoji} {statusText}",{statusEmoji:_,statusText:d,fallbackHash:"ad5c47c4aa7f1e2be1e151ea075d02eff6e54376"}):!_&&d?d:"")(),y=(()=>u&&p&&m&&h&&b?r.t("current conversation, has notifications, muted, starred, has a draft message"):!u&&p&&m&&h&&b?r.t("has notifications, muted, starred, has a draft message"):u&&!p&&m&&h&&b?r.t("current conversation, muted, starred, has a draft message"):!u&&!p&&m&&h&&b?r.t("muted, starred, has a draft message"):u&&p&&!m&&h&&b?r.t("current conversation, has notifications, starred, has a draft message"):!u&&p&&!m&&h&&b?r.t("has notifications, starred, has a draft message"):u&&!p&&!m&&h&&b?r.t("current conversation, starred, has a draft message"):u||p||m||!h||!b?u&&p&&m&&!h&&b?r.t("current conversation, has notifications, muted, has a draft message"):!u&&p&&m&&!h&&b?r.t("has notifications, muted, has a draft message"):u&&!p&&m&&!h&&b?r.t("current conversation, muted, has a draft message"):u||p||!m||h||!b?u&&p&&!m&&!h&&b?r.t("current conversation, has notifications, has a draft message"):u||!p||m||h||!b?!u||p||m||h||!b?u||p||m||h||!b?u&&p&&m&&h&&!b?r.t("current conversation, has notifications, muted, starred"):!u&&p&&m&&h&&!b?r.t("has notifications, muted, starred"):u&&!p&&m&&h&&!b?r.t("current conversation, muted, starred"):u||p||!m||!h||b?u&&p&&!m&&h&&!b?r.t("current conversation, has notifications, starred"):u||!p||m||!h||b?!u||p||m||!h||b?u||p||m||!h||b?u&&p&&m&&!h&&!b?r.t("current conversation, has notifications, muted"):u||!p||!m||h||b?!u||p||!m||h||b?u||p||!m||h||b?!u||!p||m||h||b?u||!p||m||h||b?!u||p||m||h||b?"":r.t("current conversation"):r.t("has notifications"):r.t("current conversation, has notifications"):r.t("muted"):r.t("current conversation, muted"):r.t("has notifications, muted"):r.t("starred"):r.t("current conversation, starred"):r.t("has notifications, starred"):r.t("muted, starred"):r.t("has a draft message"):r.t("current conversation, has a draft message"):r.t("has notifications, has a draft message"):r.t("muted, has a draft message"):r.t("starred, has a draft message"))();return e&&f&&g&&y?r.t("{name} ({userInfo}), status: {status} ({context})",{name:e,userInfo:f,status:g,context:y}):e&&!f&&g&&y?r.t("{name}, status: {status} ({context})",{name:e,status:g,context:y}):e&&f&&!g&&y?r.t("{name} ({userInfo}) ({context})",{name:e,userInfo:f,context:y}):e&&!f&&!g&&y?r.t("{name} ({context})",{name:e,context:y}):e&&f&&g&&!y?r.t("{name} ({userInfo}), status: {status}",{name:e,userInfo:f,status:g}):e&&!f&&g&&!y?r.t("{name}, status: {status}",{name:e,status:g}):e&&f&&!g&&!y?r.t("{name} ({userInfo})",{name:e,userInfo:f}):e||""}},IpQt:function(e,t,a){},IqgZ:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("XHGt"),i=a("t85p"),o=a("aK/h"),l=a("yHhI");o.default.object.isRequired,o.default.node,o.default.bool,o.default.object.isRequired;class MessageErrorBoundary extends n.Component{constructor(e){super(e),this.state={error:!1}}componentDidCatch(e,t){this.setState(()=>({error:!0}));const a=e?e.message:"",n=e?e.stack:"";var s=this.props.msg;const r=s.ts,i=s.channel,o=s.subtype;this.props.logger.error(`Message Kit componentDidCatch: ${o} ${r} in ${i}, ${a}`),n&&this.props.logger.error(n),t&&t.componentStack&&this.props.logger.error(t.componentStack)}render(){if(!this.state.error)return this.props.children;if(!this.props.featureTinyspeck)return null;var e=this.props.msg;const t=e.ts,a=e.channel;return s.a.createElement("div",{className:"sk_raspberry_red_bg sk_inverted_foreground padding_100 padding_bottom_25"},s.a.createElement("p",null,s.a.createElement("strong",null,"Message ",t," in ",a," failed to render."," ")),s.a.createElement("p",null,"Please go to #escal-messages and,"," ",s.a.createElement("strong",null,"if it has not been reported yet"),", post a report including a screenshot and a link to the previous message if this is a public channel."),s.a.createElement("p",null,"This message is only displayed to workspaces in the Slack org."))}}MessageErrorBoundary.displayName="MessageErrorBoundary",MessageErrorBoundary.defaultProps={children:null,featureTinyspeck:!1};t.a=Object(r.b)(e=>({featureTinyspeck:Object(i.m)(e,"feature_tinyspeck"),logger:Object(l.a)({state:e})}))(MessageErrorBoundary)},"J0/G":function(e,t,a){},J19L:function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("aK/h"),o=a("XHGt"),l=a("6kok"),c=a("nNoG"),d=a("4M+g"),u=a("/9ln"),p=a("HOkk"),h=a("H3xq");const m=new c.b("msg_edit"),b=(i.default.string.isRequired,i.default.string.isRequired,i.default.string,i.default.func,{channelType:void 0,removeMessage:n.a});class BaseRemoveBroadcastDialog extends s.PureComponent{constructor(){super(),this.onGo=this.onGo.bind(this)}onGo(){var e=this.props;const t=e.ts,a=e.channelId;(0,e.removeMessage)({channelId:a,ts:t,broadcastDelete:!0}).catch(n.a)}render(){var e=this.props;const t=e.ts,a=e.channelId;let n,s;return"channel"===e.channelType?(n=m.t("Remove from channel"),s=m.t("Are you sure you want to remove this message from the channel?")):(n=m.t("Remove from conversation"),s=m.t("Are you sure you want to remove this message from the conversation?")),r.a.createElement(p.a,{title:n,goButtonText:m.t("Remove message"),onGo:this.onGo},r.a.createElement("div",{className:"margin_bottom_100"},s,m.t("The original reply will still be visible in its thread.")),r.a.createElement(h.a,{ts:t,channelId:a,isStandalone:!0}))}}BaseRemoveBroadcastDialog.displayName="BaseRemoveBroadcastDialog",BaseRemoveBroadcastDialog.defaultProps=b;const f={removeMessage:u.a},_=Object(o.b)((e,{channelId:t})=>{const a=Object(d.e)(e,t);return{channelType:Object(l.v)(a)}},f)(BaseRemoveBroadcastDialog);_.propTypes={channelId:i.default.string.isRequired},t.a=_},JHKc:function(e,t,a){},JlHJ:function(e,t,a){},Jm6a:function(e,t,a){},JvzI:function(e,t,a){"use strict";a.d(t,"a",function(){return f}),a.d(t,"b",function(){return g}),a.d(t,"d",function(){return y}),a.d(t,"c",function(){return O});a("QbLZ");var n=a("9oTK"),s=(a("xnu4"),a("nNoG")),r=a("XxnT"),i=a("4qCO"),o=a("TVjB"),l=(a("lhZz"),a("t85p"),a("XKj7")),c=a("x4bP"),d=a("XoJV"),u=a("GNdI"),p=a("yHhI"),h=a("DlLn"),m=a("IbTH"),b=a("Gogr");function f({recalc:e=!1,teamId:t=Object(u.a)()}={}){return Object(s.s)({recalc:e,teamId:t})}const _={};function g({teamId:e,fn:t}){if(_[e]){Object(p.a)({teamId:e,label:"INFRA-I18N"}).error("Attempted to registerLocaleCallback for a registered team",e)}else _[e]=t}function y({teamId:e}){if(_[e])delete _[e];else{Object(p.a)({teamId:e,label:"INFRA-I18N"}).error("Attempted to unregisterLocaleCallback for an unregistered team",e)}}let O=(C=Object(n.coroutine)(function*(e,t,{shouldEnsureTranslationBundle:a=!0}={}){if(!Object(c.a)())return Object(l.e)({name:"locale",value:e});if(Object(b.d)(t,"user_locale")!==e&&Object(b.i)(t,"user_locale",e),Object(u.a)()!==t)return e;const p=Object(s.l)();if(!Object.keys(p).includes(e))return Object(h.e)();!0===a&&(yield Object(n.resolve)(Object(m.a)(e)));const f="es-LA"===e?"es-419":e;return document.documentElement.lang=f,Object(r.b)(e),Object(i.c)(e),Object(s.s)({recalc:!0,teamId:t}),Object(d.i)(e)||Object(o.a)(),_[t]&&_[t]({locale:e}),e}),function(e,t,a){return C.apply(this,arguments)});var C},K1NN:function(e,t,a){},K6R2:function(e,t,a){e.exports=a.p+"gsuite-01ee1e1.png"},KGMq:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("XfeM"),o=a("t85p"),l=a("dhvi"),c=a("jo6Y"),d=a.n(c),u=a("QbLZ"),p=a.n(u),h=a("HI9p"),m=a("CpTu"),b=a("7EGn"),f=a("NOj5"),_=a("1myf"),g=a("F3Uw"),y=a("Z0Cl"),O=a("fujP"),C=a("ifKl"),v=a("wSSu"),E=a("TSYQ"),k=a.n(E),S=a("XHGt"),j=a("tn36"),I=a("uQWY"),w=a("vRZS"),T=a("1hAG"),N=a("G4ux"),A=a("Fdc0"),R=a("ns4K"),M=a("yHhI"),P=a("XL7r"),x=a("y+1o"),L=a("7dYf"),F=a("nNoG"),D=a("kOzZ"),B=a("0nhw"),U=a("CPJ1"),q=a("Smdl"),H=a("KXvl"),W=a("UF3u"),G=a("od5y"),K=a("qafc"),V=a("c4EP"),z=a("0f2Y"),$=a("cD5Y"),Y=a("vSXf"),Q=a("3dqR"),X=a("derf"),J=a("6GV3"),Z=a("xoiQ");a("y5qN");r.default.oneOf(["member","org","workspace","app"]),r.default.number.isRequired,r.default.object.isRequired,r.default.func,r.default.string,r.default.bool.isRequired,r.default.bool.isRequired,r.default.bool;const ee={entityType:"member",onClick:C.a,customClasses:null,isInteractive:!0};class entity_icon_EntityIcon extends n.PureComponent{getImageKeyFromDimension(e,t){return`image_${Object(J.a)(e,{member:[512,192,72,48,32,24],app:[1024,512,192,128,96,72,64,48,36,32],workspace:[230,132,102,88,68,44,34],org:[230,132,102,88,68,44,34]}[t])}`}mapRawMemberDataToProps({rawMemberData:e,iconDimension:t,customClasses:a,clickHandler:n}){const s=Object(Z.a)({size:t,teamId:Object(b.a)(e,"enterprise_id"),memberId:Object(b.a)(e,"id"),avatarHash:Object(b.a)(e,"profile.avatar_hash")});return{imageUrl:s.imageUrl,imageUrl2x:s.imageUrl2x,isExternal:e.is_external,isRestricted:e.is_restricted,isUltraRestricted:e.is_ultra_restricted,size:t,className:a,onClick:n}}mapRawWorkspaceOrOrgDataToProps({rawWorkspaceOrOrgData:e,iconDimension:t,customClasses:a}){return{size:t,icon:e.icon,showToolTip:!1,teamName:e.name,className:a}}render(){var e=this.props;const t=e.entityType,a=e.entityData,n=e.customClasses,r=e.dimension,i=e.isInteractive,o=e.onClick,l=e.featureReactMessages,c=e.featureReactMemberProfileCard,d=k()(n,"p-ent_entity_icon");switch(t){case"member":{const e={rawMemberData:a,iconDimension:r,customClasses:d,clickHandler:o},t=this.mapRawMemberDataToProps(e);return s.a.createElement(Q.b,p()({},t,{featureReactMessages:l,featureReactMemberProfileCard:c,isInteractive:i}))}case"org":case"workspace":{const e={rawWorkspaceOrOrgData:a,iconDimension:r,customClasses:d},t=this.mapRawWorkspaceOrOrgDataToProps(e);return s.a.createElement(X.a,t)}default:{const e="?";return s.a.createElement(X.a,{teamName:e,size:r})}}}}entity_icon_EntityIcon.displayName="EntityIcon",entity_icon_EntityIcon.defaultProps=ee;var te=Object(Y.a)("feature_react_messages","feature_react_member_profile_card")(entity_icon_EntityIcon),ae=a("aolG"),ne=a("sk9p"),se=a.n(ne),re=a("Vfgr"),ie=a("bo4X"),oe=a("NB3s"),le=a("WD4z"),ce=a("O0RF"),de=a("plEq"),ue=a("P3Po");const pe=new F.b("enterprise_workspaces"),he=(r.default.func,r.default.func,{closeModal:C.a,requestCreateWorkspaceApi:C.a}),me=255,be=512,fe={required:"required",nameTaken:"nameTaken",maxLength:"maxLength"};function _e({closeModal:e,requestCreateWorkspaceApi:t}){var a=Object(n.useState)(),r=se()(a,2);const i=r[0],o=r[1];var l=Object(n.useState)(),c=se()(l,2);const d=c[0],u=c[1];var p=Object(n.useState)(!1),h=se()(p,2);const m=h[0],b=h[1];var f=Object(n.useState)(!1),_=se()(f,2);const g=_[0],y=_[1];var O=Object(n.useState)(fe.required),C=se()(O,2);const v=C[0],E=C[1];var k=Object(n.useState)(fe.required),S=se()(k,2);const j=S[0],I=S[1];function w(e,{maxLength:t}){const a=Object(re.a)(e);return a?t&&a.length>t?fe.maxLength:void 0:fe.required}return s.a.createElement(ie.a,{labelledby:"request_workspace__title-bar",centered:!0,closeModal:e},s.a.createElement(oe.h,null,s.a.createElement(oe.j,{id:"request_workspace__title-bar",title:pe.t("Request creation of a new workspace")})),s.a.createElement(oe.d,null,s.a.createElement(oe.e,null,g&&s.a.createElement(le.a,{level:"error",className:"margin_bottom_100"},pe.t("Sorry! Something went wrong. Please try again.",{fallbackHash:"48faa2ac6ac6d273cd7dacbe15a5b6f7e1822087",fallbackHashNs:"edit_profile"})),s.a.createElement("p",null,pe.t("To create a new workspace, you\u2019ll need to send a request to an organization administrator. Before sending this request, be sure to check the Find Workspaces list to see whether a similar workspace already exists.")),s.a.createElement(ce.a,{htmlFor:"p-request-workspace__name_input",id:"p-request-workspace__name_label",text:pe.t("Workspace Name")},s.a.createElement(de.a,{ariaDescribedby:"p-request-workspace__name_label",id:"p-request-workspace__name_input",name:"workspace_name",size:"large",useInlineAlert:!0,onChange:function(e){y(!1),o(e);const t=w(e,{maxLength:me});E(t)},errorText:v===fe.nameTaken?pe.t("That workspace name is already taken.",{fallbackHash:"26cf402314e8bf926ba97077c467adcadb1c715e",fallbackHashNs:"enterprise_dashboard"}):void 0,value:i,isRequired:!0,minCharacterLimit:1,maxCharacterLimit:me})),s.a.createElement(ce.a,{htmlFor:"p-request-workspace__message_input",id:"p-request-workspace__message_label",text:pe.t("Message to administrators")},s.a.createElement(ue.a,{ariaDescribedby:"p-request-workspace__message_label",id:"p-request-workspace__message_input",name:"workspace_message",size:"large",useInlineAlert:!0,onChange:function(e){y(!1),u(e);const t=w(e,{maxLength:be});I(t)},value:d,isRequired:!0,minCharacterLimit:1,maxCharacterLimit:be})))),s.a.createElement(oe.f,null,s.a.createElement(oe.g,null,s.a.createElement(oe.c,{"data-qa":"request_workspace_dialog_cancel_button",type:"outline"},pe.t("Cancel")),s.a.createElement(oe.c,{"data-qa":"request_workspace_dialog_go_button",onClick:function(){y(!1),b(!0),t({workspaceName:i,workspaceMessage:d,reason:"workspace_directory_request_new_workspace"}).then(()=>e()).catch(({data:e})=>{b(!1),"name_taken"===e.error?E(fe.nameTaken):y(!0)})},loading:m,disabled:!!(j||v||g)},pe.t("Send Request")))))}_e.displayName="RequestWorkspaceDialog",_e.defaultProps=he;const ge={closeModal:(...e)=>Object(l.a)(...e),requestCreateWorkspaceApi:(...e)=>Object(B.j)(...e)};var ye=Object(S.b)(null,ge)(_e),Oe=a("yIs4"),Ce=a("9/ob"),ve=a("YB7p"),Ee=a("XLFM"),ke=a("hbEN"),Se=a("mX9+"),je=a("TGBA"),Ie=a("xWuZ"),we=a("zmn3"),Te=a("RMmo"),Ne=a("MjS2"),Ae=a("3Hq1"),Re=a("HiDb"),Me=a("YH8F"),Pe=a("RbWr"),xe=a("e4Fz"),Le=a("sKU9");a("MbVY");const Fe={default:"default",short:"short"},De=new F.b("form"),Be={autoSelectFirstOption:r.default.bool,className:r.default.string,displayValue:r.default.string,id:r.default.string,isLoading:r.default.bool,labelId:r.default.string,membersOnly:r.default.bool,name:r.default.string,onChange:r.default.func,onClearButtonClick:r.default.func.isRequired,onClose:r.default.func,onFilterInputChange:r.default.func,onOptionHighlighted:r.default.func,onOutsideClick:r.default.func,onOpen:r.default.func,onScroll:r.default.func,optionClassName:r.default.string,optionGroups:r.default.array,options:r.default.array,optionsListOffsetBottom:r.default.number,optionsListOffsetTop:r.default.number,optionsListWidth:r.default.number,optionsRowHeight:r.default.number,pillarClassName:r.default.string,placeholder:r.default.string,selectedOption:r.default.object,selectedValueClassName:r.default.string,type:r.default.oneOf(Object(je.a)(Fe)),useFullWidthOptions:r.default.bool,usePlaceholderOption:r.default.bool,wrapperClassName:r.default.string,value:r.default.string},Ue={className:null,displayValue:void 0,id:`select-${Object(xe.d)()}`,isLoading:!1,labelId:null,membersOnly:!0,name:null,onChange:C.a,onClose:C.a,onFilterInputChange:C.a,onOptionHighlighted:C.a,onOutsideClick:C.a,onOpen:C.a,optionClassName:void 0,optionGroups:void 0,options:void 0,optionsListOffsetBottom:0,optionsListOffsetTop:0,optionsListWidth:void 0,pillarClassName:void 0,placeholder:void 0,selectedOption:void 0,selectedValueClassName:void 0,type:Fe.default,usePlaceholderOption:!0,wrapperClassName:null,value:""};class workspace_search_select_WorkspaceSearchSelect extends Pe.a{constructor(e){if(!e.optionGroups&&!e.options)throw new Error('WorkspaceSearchSelect requires an "optionGroups" or "options" prop.');super(e),this.preventFocusAndBlur=!1,this.state={filterQuery:"",isOpen:!1,selectedOptionValue:""},Object(j.a)(this,["getFilteredOptions","getFilteredOptionGroups","onBlurred","onClearInput","onClicked","onFilterInputChanged","onFocused","onKeyPressedEsc","onKeyPressedUpOrDown","onOptionSelected","onOutsideClicked","onWrapperMouseDownOrTouchStart","onWrapperMouseUpOrTouchEnd","setRef"])}componentDidMount(){this.initKeyCommands()}UNSAFE_componentWillReceiveProps(){this.setState(e=>({isOpen:e.isOpen}))}componentDidUpdate(e,t){var a=this.props;const n=a.onClose,s=a.onOpen,r=a.selectedOption;var i=this.state;const o=i.isOpen,l=i.selectedOptionValue;if(r){const e=Object(Ne.h)(r)?Object(A.K)(r):Object(b.a)(r,"name");e!==l&&this.setSelectedOptionValue(e)}else l&&this.setSelectedOptionValue("");this.state.isOpen?(document.addEventListener("click",this.onOutsideClicked),t.isOpen||(this.filterInput&&this.filterInput.focus(),s(this.filterInput))):(document.removeEventListener("click",this.onOutsideClicked),t.isOpen&&n()),this.filterInput&&o&&this.filterInput.focus()}componentWillUnmount(){document.removeEventListener("click",this.onOutsideClicked),this.resetKeyCommads()}onBlurred(){this.preventFocusAndBlur||this.toggleOpenState(!1)}onClicked(e){e.target===this.filterInput?this.toggleOpenState(!0):this.toggleOpenState()}onClearInput(){const e=this.props.onClearButtonClick;this.filterInput&&(this.filterInput.value=""),this.setFilterQuery(""),this.setSelectedOptionValue(""),this.toggleOpenState(!1),e()}onFilterInputChanged(){if(this.filterInput){const e=this.filterInput.value;this.props.onFilterInputChange(e),this.setFilterQuery(e)}}onFocused(){this.preventFocusAndBlur||this.toggleOpenState(!0);const e=this.props.displayValue;e&&this.filterInput&&(this.filterInput.value=e)}onKeyPressedEsc(){this.state.isOpen&&(this.toggleOpenState(!1),this.focus())}onKeyPressedUpOrDown(e){this.state.isOpen||(this.toggleOpenState(!0),e.stopPropagation())}onOptionSelected({value:e}={}){if(!e)return;const t=this.getSelectedOptionDisplayValue({value:e});this.setSelectedOptionValue(t),this.props.onChange(e),this.toggleOpenState(!1),this.filterInput&&this.filterInput.blur()}onOutsideClicked(e){this.wrapper&&!this.wrapper.contains(e.target)&&(this.toggleOpenState(!1),this.props.onOutsideClick())}onWrapperMouseDownOrTouchStart(){this.preventFocusAndBlur=!0}onWrapperMouseUpOrTouchEnd(){this.preventFocusAndBlur=!1}onSearchAgainTriggered(){const e=this.props.onClearButtonClick;this.preventFocusAndBlur=!0,this.filterInput&&(this.filterInput.value=""),this.setFilterQuery(""),this.setSelectedOptionValue(""),e(),this.filterInput.focus(),this.toggleOpenState(),this.preventFocusAndBlur=!1}maybeShowOptions(){var e=this.props;const t=e.selectedOption,a=e.membersOnly,n=this.getFilterQuery(),s=a?this.getFilteredOptions:this.getFilteredOptionGroups;return n.length>0||t?s():[]}getPlaceholder(){return this.props.placeholder||De.t("Choose an option\u2026")}getFilteredOptionGroups(){var e=this.props;const t=e.optionGroups,a=e.usePlaceholderOption,n=this.getFilterQuery();return t?!n&&a?[this.getPlaceholderOptionGroup(),...t]:t:null}getFilteredOptions(){var e=this.props;const t=e.options,a=e.usePlaceholderOption,n=this.getFilterQuery();return t?!n&&a?[this.getPlaceholderOption(),...t]:t:null}getFilterQuery(){return Object(b.a)(this,"filterInput.value","")}getOptionsListEmptyMessage(){return this.getFilterQuery().length>0?this.renderOptionsListEmptyMessage():this.renderOptionsListHintText()}getOptionsListTargetMeasurements(){var e=this.props;const t=e.optionsListOffsetBottom,a=e.optionsListOffsetTop,n=e.optionsListWidth,s=this.select.getBoundingClientRect(),r=this.select.offsetTop-Object(Me.a)(this.select,this.select.offsetParent),i=this.select.offsetLeft,o=this.select.offsetParent.clientHeight-r,l=r+s.height;return{bottom:s.bottom,offsetBottom:t,offsetTop:a,relativeBottom:l,relativeLeft:i,relativeTop:o,top:s.top,width:n||s.width}}getPlaceholderOption(){return{isPlaceholder:!0,label:this.getPlaceholder(),value:""}}getPlaceholderOptionGroup(){return{isPlaceholder:!0,options:[this.getPlaceholderOption()]}}getSelectedOptionDisplayValue({value:e}={}){var t=this.props;const a=t.optionGroups,n=t.options,s=a?Object(Re.a)(a,"options"):n,r=Object(m.a)(s,{value:e});return Object(b.a)(r,"displayValue")}setFilterQuery(e){this.setState(()=>({filterQuery:e}))}setSelectedOptionValue(e){this.setState(()=>({selectedOptionValue:e}))}setRef(e){return t=>{this[e]=t}}focus(){this.preventFocusAndBlur=!0,this.select.focus(),this.preventFocusAndBlur=!1}blur(){this.select.blur(),this.filterInput&&this.filterInput.blur()}filterOption(e){const t=e.label.toLowerCase(),a=this.getFilterQuery().toLowerCase();return-1!==t.indexOf(a)}initKeyCommands(){this.keyCommands=new Te.a(this.select),this.keyCommands.bindAll([{keys:["esc"],handler:this.onKeyPressedEsc},{keys:["up","down"],handler:this.onKeyPressedUpOrDown}])}resetKeyCommads(){this.keyCommands&&this.keyCommands.reset()}toggleOpenState(e){this.setState(t=>{const a={isOpen:Object(Ae.a)(e)?!t.isOpen:e};return a.isOpen||(a.filterQuery=""),a})}renderFilterInput(){var e=this.state;const t=e.filterQuery,a=e.selectedOptionValue,n=this.props.displayValue,r={"aria-label":"Filter for option list",className:"c-input_select__filter_input p-workspace-search__select",onChange:this.onFilterInputChanged,placeholder:this.getPlaceholder(),ref:this.setRef("filterInput"),type:"text"};return r.value=a&&!t?a:a||!n||t?t:n,s.a.createElement("input",r)}renderOptionsListMaybe(){if(!this.state.isOpen)return null;var e=this.props;const t=e.autoSelectFirstOption,a=e.id,n=e.isLoading,r=e.membersOnly,i=e.optionClassName,o=e.optionsRowHeight,l=e.pillarClassName,c=e.useFullWidthOptions,d=e.value,u=e.onScroll,p=e.onOptionHighlighted,h=r?240:400,m=Object(xe.a)(a,this.state.selectedOptionValue);return s.a.createElement(Le.a,{"aria-activedescendant":m,autoSelectFirstOption:t,emptyStateMessage:this.getOptionsListEmptyMessage(),isLoading:n,maxListHeight:h,onOptionSelected:this.onOptionSelected,optionClassName:i,onScroll:u,optionGroups:r?null:this.maybeShowOptions(),options:r?this.maybeShowOptions():null,optionsRowHeight:o,pillarClassName:l,targetMeasurements:this.getOptionsListTargetMeasurements(),useFullWidthOptions:c,value:d,onActiveOptionUpdated:p})}renderOptionsListEmptyMessage(){const e=this.getFilterQuery(),t=De.rt('No workspaces found matching <span class="sk_primary_foreground bold">{query}</span>.',{query:e}),a=De.t("Try searching for another workspace or searching for a teammate\u2019s workspaces.");return s.a.createElement("div",{className:"p-workspace_search__no-results-message"},s.a.createElement("p",{className:"margin_0"},t),s.a.createElement("p",{className:"margin_0"},a))}renderOptionsListHintText(){const e=this.props.membersOnly?De.rt('Enter a teammate\u2019s <span class="sk_primary_foreground bold">name</span> or <span class="sk_primary_foreground bold">email address</span>.'):De.rt('Enter a teammate\u2019s <span class="sk_primary_foreground bold">name</span> or <span class="sk_primary_foreground bold">email address</span>, or search for a <span class="sk_primary_foreground bold">specific workspace</span>.');return s.a.createElement("div",{className:"p-workspace_search__no-results-message"},s.a.createElement("p",{className:"margin_0"},e))}render(){var e=this.props;e.autoSelectFirstOption;const t=e.className,a=e.displayValue,n=(e.isLoading,e.labelId),r=(e.membersOnly,e.name),i=(e.onChange,e.onClearButtonClick,e.onClose,e.onFilterInputChange,e.onOutsideClick,e.onOpen,e.onOptionHighlighted,e.onScroll,e.optionClassName,e.options,e.optionsListOffsetBottom,e.optionsListOffsetTop,e.optionsListWidth,e.optionsRowHeight,e.optionGroups,e.pillarClassName,e.placeholder,e.selectedOption,e.selectedValueClassName,e.type),o=(e.useFullWidthOptions,e.usePlaceholderOption,e.wrapperClassName),l=d()(e,["autoSelectFirstOption","className","displayValue","isLoading","labelId","membersOnly","name","onChange","onClearButtonClick","onClose","onFilterInputChange","onOutsideClick","onOpen","onOptionHighlighted","onScroll","optionClassName","options","optionsListOffsetBottom","optionsListOffsetTop","optionsListWidth","optionsRowHeight","optionGroups","pillarClassName","placeholder","selectedOption","selectedValueClassName","type","useFullWidthOptions","usePlaceholderOption","wrapperClassName"]),c=this.state.filterQuery,u=k()("c-input_select__wrapper",o),h=k()("c-input_select",{"c-input_select--active":this.state.isOpen,"c-input_select--short":"short"===i},t),m=k()("p-workspace_search__clear-button",{hidden:!c&&!a});return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:u,onMouseDown:this.onWrapperMouseDownOrTouchStart,onMouseUp:this.onWrapperMouseUpOrTouchEnd,onTouchStart:this.onWrapperMouseDownOrTouchStart,onTouchEnd:this.onWrapperMouseUpOrTouchEnd,ref:this.setRef("wrapper"),role:"group"},s.a.createElement("div",p()({},l,{"aria-labelledby":n,className:h,"data-name":r,onBlur:this.onBlurred,onMouseDown:this.onClicked,onFocus:this.onFocused,ref:this.setRef("select")}),this.renderFilterInput()),this.renderOptionsListMaybe()),s.a.createElement(Ee.c,{className:m,onClick:this.onClearInput,ref:this.setRef("closeButton")}))}}workspace_search_select_WorkspaceSearchSelect.displayName="WorkspaceSearchSelect",workspace_search_select_WorkspaceSearchSelect.propTypes=Be,workspace_search_select_WorkspaceSearchSelect.defaultProps=Ue;var qe=workspace_search_select_WorkspaceSearchSelect;a("RQ+B");r.default.object,r.default.oneOf(["member","workspace"]),r.default.bool.isRequired,r.default.bool.isRequired;class workspace_search_options_list_item_WorkspaceSearchOptionsListItem extends n.PureComponent{constructor(e){super(e),Object(j.a)(this,["maybeRenderTitle","maybeRenderEmail"])}maybeRenderEmail(e){return e?s.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},e):null}maybeRenderTitle(e){return e?s.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},e):null}renderEntityIcon({item:e,type:t}){var a=this.props;const n=a.featureReactMemberProfileCard,r=a.featureReactMessages;return s.a.createElement(te,{entityType:t,dimension:36,entityData:e,customClasses:"p-workspace_search_options_list_item__avatar",featureReactMessages:r,featureReactMemberProfileCard:n})}renderItemAsMember({item:e,type:t}){const a=Object(b.a)(e,"profile"),n=a.real_name,r=a.email,i=a.title;return s.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:e,type:t}),s.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},s.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},n),s.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},this.maybeRenderTitle(i),this.maybeRenderEmail(r))))}renderItemAsWorkspace({item:e,type:t}){const a=e.name,n=e.description;return s.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:e,type:t}),s.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},s.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},a),s.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},n)))}render(){var e=this.props;const t=e.item,a=e.type;return"member"===a?this.renderItemAsMember({item:t,type:a}):this.renderItemAsWorkspace({item:t,type:a})}}workspace_search_options_list_item_WorkspaceSearchOptionsListItem.displayName="WorkspaceSearchOptionsListItem",workspace_search_options_list_item_WorkspaceSearchOptionsListItem.defaultProps={item:{},type:"member"};a("pVvT");const He=new F.b("workspace_directory"),We=(r.default.string,r.default.string,r.default.func.isRequired,r.default.func.isRequired,r.default.bool,r.default.func,r.default.func,r.default.func,r.default.object,r.default.func,{className:"",containerIdSelector:"",membersOnly:!0,onClearInput:C.a,onOptionsListClosed:C.a,onOptionsListOpened:C.a,prepopulatedOption:void 0,triggerAction:C.a});class workspace_search_WorkspaceSearch extends n.Component{constructor(e){super(e),this.state={nextCursorMark:"*",totalResultsCount:null,memberResultsCount:null,workspaceResultsCount:null,currentOptionsData:[],currentSearchQuery:"",prepopulatedOptionData:void 0,selectedOptionData:void 0,value:void 0,loadingResults:!0,isAnOptionHighlighted:!1},Object(j.a)(this,["clearInput","formatMemberOptionData","formatOptionsDataArrayOrObject","getOptionsFetcher","fetchMemberData","fetchMemberAndWorkspaceData","onChange","onClearButtonClicked","onFilterInputChange","onOptionHighlighted","onScroll","renderMemberItemTemplate","setIsAnOptionHighlighted","setCurrentSearchQuery","setIsLoading","setValue","triggerActionWithValue","onClose","onKeyPressedEnter","onOpen","setSelectRef"]),this.select=null,this.debouncedOnFilterInputChange=Object(ke.a)(this.onFilterInputChange,100)}componentDidMount(){var e=this.props;const t=e.prepopulatedOption,a=e.membersOnly;Object(O.a)(t)||this.setPrepopulatedOptionData(t),this.getOptionsFetcher(),a||(this.keyCommands=this.initKeyCommands())}componentDidUpdate(e){const t=this.props.prepopulatedOption,a=e.prepopulatedOption;Object(O.a)(t)||t===a||this.setPrepopulatedOptionData(t)}componentWillUnmount(){this.keyCommands&&this.keyCommands.reset()}onChange(e){const t=this.props.membersOnly;var a=this.state;const n=a.currentOptionsData,s=a.currentSearchQuery;let r,i,o;if(e===Ne.b)r={id:Ne.b,displayValue:s},o=n;else if(t)r=Object(m.a)(n,{id:e}),i=Object(A.K)(r),o=[r];else{r=Object(m.a)(Object(Ie.a)(Object(je.a)(n)),{id:e});const t=Object(Ne.h)(r);i=t?Object(A.K)(r):Object(b.a)(r,"name"),o=t?{members:[r],workspaces:[]}:{members:[],workspaces:[r]}}this.setState(()=>{return{value:e,selectedOptionData:r,currentSearchQuery:e===Ne.b?s:i,nextCursorMark:"*",currentOptionsData:o}},this.triggerActionWithValue)}onClearButtonClicked(){const e=this.props.onClearInput;this.clearInput(),e()}onClose(){const e=this.props.onOptionsListClosed;this.setIsAnOptionHighlighted(!1),e()}onFilterInputChange(e){var t=this.props;const a=t.triggerAction,n=t.membersOnly;this.setIsLoading(!0),this.setSelectedOptionData(null),this.setPrepopulatedOptionData(null),this.setValue(null),n&&a({selectedOptionData:null}),this.getOptionsFetcher(e)}onKeyPressedEnter(){if(this.props.membersOnly)return;var e=this.state;const t=e.selectedOptionData,a=e.currentSearchQuery,n=e.isAnOptionHighlighted;if(!a||n)return;const s=Object(b.a)(this.select,"filterInput.value",a);t||(this.select.blur(),this.setState(()=>{return{selectedOptionData:{id:Ne.b,displayValue:s},currentSearchQuery:s,nextCursorMark:"*"}},this.triggerActionWithValue))}onOpen(){(0,this.props.onOptionsListOpened)()}onOptionHighlighted(e){const t=!Object(O.a)(e);this.setIsAnOptionHighlighted(t)}onScroll(e){var t=this.state;const a=t.currentSearchQuery;var n=t.currentOptionsData;const s=void 0===n?[]:n,r=t.totalResultsCount,i=e.clientHeight;e.scrollHeight-(e.scrollTop+i)<200&&s.length<r&&this.getOptionsFetcher(a,{doFetchNextPage:!0})}onSearchAgainTriggered(){this.select.onSearchAgainTriggered()}getBoundingRect(e){return this._workspaceSearchBoundingContainer||(this._workspaceSearchBoundingContainer=document.getElementById(e)),this._workspaceSearchBoundingContainer?this._workspaceSearchBoundingContainer.getBoundingClientRect():{}}getOptionsFetcher(e,{forceNewSearch:t=!1,doFetchNextPage:a=!1}={}){const n=this.state.currentSearchQuery,s=this.props.membersOnly?this.fetchMemberData:this.fetchMemberAndWorkspaceData,r={searchTerm:e};return a||e!==n||t?(r.nextCursorMark=n===e?this.state.nextCursorMark:"",this.setCurrentSearchQuery(e),s({args:r,forceNewSearch:t,newSearchQuery:e,stashedSearchQuery:n})):null}getPlaceHolderText(e){const t=He.t("Search for a teammate"),a=He.t("Search");return e?t:a}setCurrentOptionGroupsData({memberOptionData:e,workspaceOptionData:t,isNewSearch:a,totalResultsCount:n,memberResultsCount:s=0,workspaceResultsCount:r=0}){const i=this.state.currentOptionsData;let o;const l=!s&&!r||n?n:s+r;o=a?{members:e,workspaces:t}:{members:Object(f.a)(Object(b.a)(i,"members"),e,"id"),workspaces:Object(f.a)(Object(b.a)(i,"workspaces"),t,"id")},this.setState(()=>({currentOptionsData:o,totalResultsCount:l,memberResultsCount:s,workspaceResultsCount:r})),this.setIsLoading(!1)}setCurrentOptionsData({optionData:e,isNewSearch:t,totalResultsCount:a}){const n=this.state.currentOptionsData;let s;s=t?e:Object(f.a)(n,e,"id"),this.setState(()=>({currentOptionsData:s,totalResultsCount:a})),this.setIsLoading(!1)}setCurrentSearchQuery(e){this.setState(()=>({currentSearchQuery:e}))}setIsAnOptionHighlighted(e){this.setState(()=>({isAnOptionHighlighted:e}))}setIsLoading(e){this.setState(()=>({loadingResults:e}))}setNextCursorMark(e){this.setState(()=>({nextCursorMark:e}))}setPrepopulatedOptionData(e){this.setState(()=>({prepopulatedOptionData:e}))}setSelectRef(e){this.select=e}setSelectedOptionData(e){this.setState(()=>({selectedOptionData:e}))}setValue(e){this.setState(()=>({value:e}))}blur(){this.select.blur()}clearInput(){const e=this.props.triggerAction;this.setSelectedOptionData(null),this.setCurrentSearchQuery(null),this.setPrepopulatedOptionData(null),this.setValue(null),this.getOptionsFetcher(),e({selectedOptionData:null,type:null}),this.select.toggleOpenState()}fetchMemberAndWorkspaceData({args:e,forceNewSearch:t,newSearchQuery:a,stashedSearchQuery:n}){const s=[(0,this.props.fetchMembers)(e),this.props.fetchDirectoryWorkspaces(e)];return Promise.all(s).then(e=>{var s=e[0],r=s.items;const i=void 0===r?[]:r,o=s.next_cursor_mark,l=s.num_found;var c=e[1],d=c.items;const u=void 0===d?[]:d,p=c.next_cursor_mark,h=c.num_found;let m;(i.length||"*"===o||u.length||"*"===p)&&(i.length&&!u.length?this.setNextCursorMark(o):u.length&&!i.length&&this.setNextCursorMark(p),i.length&&!u.length?m=l:u.length&&!i.length&&(m=h),this.setCurrentOptionGroupsData({memberOptionData:i,workspaceOptionData:u,isNewSearch:t||n!==a,totalResultsCount:m,memberResultsCount:l,workspaceResultsCount:h}))})}fetchMemberData({args:e,forceNewSearch:t,newSearchQuery:a,stashedSearchQuery:n}){return(0,this.props.fetchMembers)(e).then(e=>{var s=e.items;const r=void 0===s?[]:s,i=e.next_cursor_mark,o=e.num_found;(r.length||"*"===i)&&(this.setNextCursorMark(i),this.setCurrentOptionsData({optionData:r,isNewSearch:t||n!==a,totalResultsCount:o}))})}focus(){this.select.focus()}formatMemberOptionData(e){const t=Object(A.K)(e),a=Object(b.a)(e,"id");return{label:this.renderMemberItemTemplate({item:e,type:"member"}),value:a,displayValue:t}}formatMemberOptionsGroupsHeader(){var e=this.state;const t=e.memberResultsCount,a=e.selectedOptionData?1:t;return He.t("Search by coworker ({num})",{num:a})}formatOptionsDataArrayOrObject(e){let t=[];if(this.props.membersOnly)t=Object(we.a)(e,e=>this.formatMemberOptionData(e));else{const a=e.members,n=e.workspaces,s=Object(b.a)(a,"length",0),r=Object(b.a)(n,"length",0);if(s){const e={label:this.formatMemberOptionsGroupsHeader(),options:[]},n=r>0?Object(Se.a)(a,0,4):a;e.options=Object(we.a)(n,e=>this.formatMemberOptionData(e)),t.push(e)}if(r){const e={label:this.formatWorkspaceOptionsGroupsHeader(),options:[]};e.options=Object(we.a)(n,e=>this.formatWorkspaceOptionData(e)),t.push(e)}}return t}formatWorkspaceOptionData(e){const t=Object(b.a)(e,"name"),a=Object(b.a)(e,"id");return{label:this.renderMemberItemTemplate({item:e,type:"workspace"}),value:a,displayValue:t}}formatWorkspaceOptionsGroupsHeader(){const e=this.props.prepopulatedOption;var t=this.state;const a=t.currentSearchQuery,n=t.workspaceResultsCount,s=t.selectedOptionData,r=Object(b.a)(e,"displayValue","")?Object(b.a)(e,"displayValue",""):a,i=s?1:n,o=Object(Ne.c)()?50:150,l=Object(b.a)(r,"length",0)>o?`${r.slice(0,o)}...`:r;return He.t("Workspaces matching \u201c{query}\u201d ({num})",{query:Object(F.q)(l),num:i})}initKeyCommands(){const e=new Te.a;return e.bindAll([{keys:["enter"],handler:this.onKeyPressedEnter}]),e}triggerActionWithValue(){const e=this.props.triggerAction,t=this.state.selectedOptionData;e({selectedOptionData:t,type:Object(Ne.h)(t)?"member":"workspace"})}renderMemberItemTemplate({item:e,type:t}){return s.a.createElement(workspace_search_options_list_item_WorkspaceSearchOptionsListItem,{item:e,type:t,featureReactMessages:!0,featureReactMemberProfileCard:!0})}renderShowAllWorkspacesListItem(){const e=this.state.currentSearchQuery;return s.a.createElement("div",{className:"p-workspace_search_options_list_item"},s.a.createElement("div",{className:"p-workspace_search__search_icon_wrapper"},s.a.createElement(G.b,{type:"search"})),s.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_1"},s.a.createElement("div",{className:"p-workspace_search_options_list_item__alternate_content"},He.rt('All workspace results for <span class="p-workspace_search_options_list_item__alternate_content--highlight">{query}</span>',{query:Object(F.q)(e)}))))}render(){var e=this.props;const t=e.containerIdSelector,a=e.membersOnly;var n=this.state;const r=n.value,i=n.currentOptionsData,o=n.loadingResults,l=n.currentSearchQuery,c=n.prepopulatedOptionData,d=n.selectedOptionData;var u=this.getBoundingRect(t),h=u.bottom;const m=void 0===h?0:h;var f=u.top;const _=void 0===f?0:f,g={autoSelectFirstOption:!0,className:"p-workspace_search",displayValue:l,isLoading:o,membersOnly:a,onChange:this.onChange,onClearButtonClick:this.onClearButtonClicked,onClose:this.onClose,onFilterInputChange:this.debouncedOnFilterInputChange,onOpen:this.onOpen,onOptionHighlighted:this.onOptionHighlighted,onScroll:this.onScroll,optionsListOffsetBottom:window.innerHeight-m,optionsListOffsetTop:_,optionsRowHeight:48,placeholder:this.getPlaceHolderText(a),pillarClassName:"p-workspace_search",selectedOption:d,usePlaceholderOption:!1,useFullWidthOptions:!0,value:r,wrapperClassName:"p-workspace_search__wrapper"};if(a?g.options=this.formatOptionsDataArrayOrObject(i):g.optionGroups=this.formatOptionsDataArrayOrObject(i),c&&!r)if(Object(b.a)(c,"id")===Ne.b)g.selectedOption=c,g.displayValue=Object(b.a)(c,"displayValue");else{const e=Object(Ne.h)(c)?this.formatMemberOptionData(c):this.formatWorkspaceOptionData(c);g.selectedOption=c,g.displayValue=Object(b.a)(e,"displayValue")}return s.a.createElement("div",{className:"position_relative"},s.a.createElement(qe,p()({},g,{ref:this.setSelectRef})))}}workspace_search_WorkspaceSearch.displayName="WorkspaceSearch",workspace_search_WorkspaceSearch.defaultProps=We;const Ge={fetchMembers:B.k,fetchDirectoryWorkspaces:B.f};var Ke=Object(S.b)(null,Ge,null,{withRef:!0})(workspace_search_WorkspaceSearch),Ve=a("wR6u");const ze=new F.b("workspace_directory"),$e={launch:"launch",join:"join",request:"request",request_sent:"request_sent",default:"default"},Ye=(r.default.shape({id:r.default.string,description:r.default.string,discoverable:r.default.string,name:r.default.string,domain:r.default.string,is_member:r.default.bool,date_requested_join:r.default.oneOfType([r.default.string,r.default.number]),icon:r.default.object,is_inactive:r.default.bool,user_counts:r.default.object}).isRequired,r.default.oneOf(Object(je.a)(Ne.a)),r.default.bool.isRequired,r.default.string,r.default.func,r.default.func,r.default.bool,r.default.bool,r.default.func,r.default.func,r.default.string,r.default.bool,r.default.func,r.default.func,r.default.oneOf(["medium","large"]),r.default.bool,{buttonContext:"largeCard",customClasses:"",onWorkspaceLaunch:C.a,onDefaultButtonClick:C.a,doLaunchInNewTab:!1,displayDirectoryInModal:!1,callJoinWorkspace:C.a,callRequestToJoinWorkspace:C.a,size:"large",onActionReject:C.a,onActionResolve:C.a,anchorPage:void 0,doUpsertJoin:!1,preventAppLaunch:!1}),Qe=({displayDirectoryInModal:e,preventAppLaunch:t})=>{let a;return{text:a=t?ze.t("Join and Continue",{fallbackHash:"e6533ebcba1f476e42b0bc2d0890470600735435"}):e?ze.t("Join and Open"):ze.t("Join and Launch Slack"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":"join","data-qa":"join"}},Xe=()=>{const e="request_to_join";return{text:ze.t("Request to Join"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":e,"data-qa":e}},Je=()=>{const e="request_sent";return{text:ze.t("Request Sent"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":e,"data-qa":e,disabled:!0}},Ze=({displayDirectoryInModal:e,preventAppLaunch:t})=>{let a;return{text:a=t?ze.t("Continue",{fallbackHash:"cf9b77061f7b3126b49d50a6fa68f7ca8c26b7a3"}):e?ze.t("Open"):ze.t("Launch in Slack"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":"launch","data-qa":"launch"}},et=()=>{const e="default";return{type:"outline",text:ze.t("View Details",{fallbackHash:"6319b15f86fee6c8e5aa4846437f377ec352787c"}),"data-qa-ws-directory-button-type":"outline","data-qa-ws-directory-button-text":e,"data-qa":e}};class workspace_directory_button_WorkspaceDirectoryButton extends n.Component{constructor(e){super(e),this.state={loading:!1},this.buttonType=null,this.onClick=this.onClick.bind(this),this.onKeyPress=this.onKeyPress.bind(this)}onClick(e){e.stopPropagation(),e.preventDefault(),this.handleButtonAction()}onKeyPress(e){e.stopPropagation(),e.preventDefault(),13===e.which&&this.handleButtonAction()}onWorkspaceJoin({windowOpener:e}={}){var t=this.props;const a=t.team,n=t.onActionReject,r=t.onActionResolve,i=t.anchorPage,o=t.doUpsertJoin;return Object(q.a)()&&Object(Ve.d)(!1),this.props.callJoinWorkspace({teamId:a.id,anchorPage:i,doUpsertJoin:o}).then(()=>{const e={};o&&(e.workspace=p()({},a,{is_member:!0})),r(e),Object(q.a)()&&!Object(H.b)()&&Object(Ve.d)(!0)}).then(()=>this.props.onWorkspaceLaunch(e)).catch(t=>{Object(q.a)()&&Object(Ve.d)(!0),e&&(this.setLoading(!1),e.close()),n({node:s.a.createElement("span",null,ze.rt("Workspace couldn\u2019t be joined. Please reload and try again.")),err:t})})}onWorkspaceRequestToJoin(){var e=this.props;const t=e.team,a=e.onActionReject,n=e.onActionResolve,r=e.anchorPage;return this.props.callRequestToJoinWorkspace({teamId:t.id,anchorPage:r}).then(()=>{n({node:s.a.createElement("div",{className:"display_flex"},s.a.createElement(G.b,{type:"check-circle-o",className:"margin_right_50 sk_lilypad_green"}),s.a.createElement("span",null,ze.rt("<strong>Request sent!</strong> You\u2019ll be notified by email when a Workspace Admin grants access."))),workspace:p()({},t,{date_requested_join:String(Math.floor(Date.now()))})})}).then(()=>{this.setLoading(!1)}).catch(e=>{a({node:s.a.createElement("span",null,ze.rt("Your request couldn\u2019t be sent. Please reload and try again.")),err:e})})}getButtonProps(e){var t=this.props;const a=t.displayDirectoryInModal,n=t.preventAppLaunch;switch(e){case $e.launch:return Ze({displayDirectoryInModal:a,preventAppLaunch:n});case $e.request:return Xe();case $e.join:return Qe({displayDirectoryInModal:a,preventAppLaunch:n});case $e.request_sent:return Je();case $e.default:return et();default:return null}}setLoading(e){this.setState(()=>({loading:e}))}handleButtonAction(){const e=this.props.doLaunchInNewTab;if("default"===this.buttonType)return this.props.onDefaultButtonClick();if(this.setLoading(!0),"join"===this.buttonType){if(e){const e=window.open("","_blank");return this.onWorkspaceJoin({windowOpener:e})}return this.onWorkspaceJoin()}return"request"===this.buttonType?this.onWorkspaceRequestToJoin():("launch"===this.buttonType&&(this.props.onWorkspaceLaunch(),e&&this.setLoading(!1)),null)}render(){var e=this.props;const t=e.featureZeroWorkspaceOnboarding,a=e.team,n=e.buttonContext,r=e.customClasses,i=e.size,o=this.state.loading,l=function(e,{context:t=Ne.a.smallCard,featureZeroWorkspaceOnboarding:a=!0}){if(!a)return null;const n=e.is_member,s=e.date_requested_join,r=e.is_assigned,i=e.discoverable;if(n)return $e.launch;if(t!==Ne.a.smallCard){if(r)return $e.join;switch(i){case"open":return $e.join;case"closed":if(!s)return $e.request;if(t===Ne.a.largeCard)return $e.request_sent}return null}return $e.default}(a,{context:n,featureZeroWorkspaceOnboarding:t});this.buttonType=l;const c=this.getButtonProps(l);if(!l||Object(O.a)(c))return null;const u=a.id,h=c.text,m=d()(c,["text"]),b=m.disabled||o;return s.a.createElement(Ee.b,p()({},m,{className:r,onClick:this.onClick,onKeyPress:this.onKeyPress,"data-workspace-id":u,"data-qa-ws-directory-button":!0,loading:o,disabled:b,size:i}),h)}}workspace_directory_button_WorkspaceDirectoryButton.displayName="WorkspaceDirectoryButton",workspace_directory_button_WorkspaceDirectoryButton.defaultProps=Ye;const tt={callJoinWorkspace:B.b,callRequestToJoinWorkspace:B.d};var at=Object(S.b)((e,{team:t,onActionResolve:a,anchorPage:n,doLaunchInNewTab:s,channelRedirect:r,postLaunchAction:i,userIdFromURL:l})=>{const c=Object(N.b)(e);return{featureZeroWorkspaceOnboarding:Object(o.m)(e,"feature_zero_workspace_onboarding"),displayDirectoryInModal:Object(o.l)(e),onWorkspaceLaunch:o=>Object(Ne.i)(e,{team:t,user:c,onActionResolve:a,anchorPage:n,doLaunchInNewTab:s,windowOpener:o,channelRedirect:r,postLaunchAction:i,userIdFromURL:l})}},tt)(workspace_directory_button_WorkspaceDirectoryButton);a("ah8n");const nt=new F.b("workspace_directory"),st={large:"large",small:"small"},rt={large:64,small:48},it=(r.default.shape({id:r.default.string,description:r.default.string,discoverable:r.default.string,name:r.default.string,domain:r.default.string,is_member:r.default.bool,date_requested_join:r.default.oneOfType([r.default.string,r.default.number]),icon:r.default.object,is_inactive:r.default.bool,user_counts:r.default.object}).isRequired,r.default.oneOf(Object(je.a)(st)),r.default.bool.isRequired,r.default.string,r.default.func,r.default.func,r.default.string,r.default.func,r.default.bool,r.default.bool,{size:st.large,className:"",onActionResolve:C.a,onActionReject:C.a,anchorPage:"",openDialog:C.a,doLaunchInNewTab:!1,preventAppLaunch:!1});class workspace_directory_card_WorkspaceDirectoryCard extends n.Component{constructor(e){super(e),this.onCardClick=this.onCardClick.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.onResize=this.onResize.bind(this),this.openDialog=this.openDialog.bind(this),this.state={isMobileView:!1}}componentDidMount(){this.setIsMobileView(Object(Ne.c)()),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}onCardClick(e){e.stopPropagation(),e.preventDefault(),this.isSmallVariationCard()&&this.openDialog()}onKeyPress(e,t){if(e.preventDefault(),"Enter"===e.key)switch(t){case"openDialog":if(this.isSmallVariationCard())return this.openDialog()}return null}onResize(){this.setIsMobileView(Object(Ne.c)())}setIsMobileView(e){this.setState(()=>({isMobileView:e}))}isLargeVariationCard(){return this.props.size===st.large}isSmallVariationCard(){return this.props.size===st.small}openDialog(){var e=this.props;const t=e.team;(0,e.openDialog)({team:t})}renderAvatar(){const e=this.props.team,t=this.isLargeVariationCard()&&!this.state.isMobileView?rt[st.large]:rt[st.small];return s.a.createElement("div",{className:"display_flex"},s.a.createElement(te,{entityType:"workspace",customClasses:this.isSmallVariationCard()?"cursor_pointer":"",dimension:t,entityData:e,featureReactMessages:!0,featureReactMemberProfileCard:!0}))}renderButton(){var e=this.props;const t=e.team,a=e.size,n=e.onActionReject,r=e.onActionResolve,i=e.anchorPage,o=e.doLaunchInNewTab,l=e.preventAppLaunch,c=this.isLargeVariationCard()?"large":"medium";return s.a.createElement(at,{team:t,buttonContext:`${a}Card`,featureZeroWorkspaceOnboarding:!0,customClasses:"p-workspace_directory_card__button",onDefaultButtonClick:this.openDialog,onActionReject:n,onActionResolve:r,anchorPage:i,doLaunchInNewTab:o,size:c,preventAppLaunch:l})}renderWorkspaceDescription(){const e=this.props.team.description;return s.a.createElement("div",{className:"p-workspace_directory_card__description","data-qa-ws-directory-card-description":!0},e)}renderWorkspaceName(){const e=this.props.team.name;return s.a.createElement("span",{className:"p-workspace_directory_card__title","data-qa-ws-directory-card-title":!0,title:e},e)}renderWorkspaceStatus(){var e=this.props;const t=e.featureZeroWorkspaceOnboarding,a=e.team;if(!t||this.isSmallVariationCard())return null;const n=Object(Ne.f)(a,{context:"largeCard",featureZeroWorkspaceOnboarding:t});return n?s.a.createElement("div",{className:"p-workspace_directory_card__status"},n):null}renderWorkspaceSubtitle(){var e=this.props;const t=e.featureZeroWorkspaceOnboarding,a=e.team;if(!t)return null;const n=this.state.isMobileView,r=a.date_requested_join,i=a.discoverable,o=a.domain;var l=a.user_counts,c=(l=void 0===l?{}:l).active_members;const d=void 0===c?0:c,u=nt.t("{activeMembers} active members",{activeMembers:d?Object(F.o)(d):0});let p;return p=this.isLargeVariationCard()&&!n?s.a.createElement("div",null,s.a.createElement("span",{className:"border_right padding_right_50 margin_right_50 float_left"},u),s.a.createElement("span",{className:"overflow_ellipsis"},`${o}.slack.com`)):this.isSmallVariationCard()&&"closed"===i&&r?s.a.createElement("span",null,nt.t("Awaiting admin approval")):s.a.createElement("span",{className:"overflow_ellipsis"},u),s.a.createElement("div",{className:"p-workspace_directory_card__subtitle","data-qa-ws-directory-card-subtitle":!0},p)}render(){var e=this.props;const t=e.featureZeroWorkspaceOnboarding,a=e.size,n=e.className;if(!t)return null;const r=this.props.team.id,i=k()("p-workspace_directory_card",n,{"p-workspace_directory_card--large":this.isLargeVariationCard(),"p-workspace_directory_card--small":this.isSmallVariationCard()});return s.a.createElement("div",{className:i,onClick:this.onCardClick,"data-workspace-id":r,"data-qa-ws-directory-card":!0,"data-qa-ws-directory-card-size":a,role:"presentation"},s.a.createElement("div",{className:"display_flex flex_direction_column"},s.a.createElement("div",{className:"display_flex align_self_start full_width"},this.renderAvatar(),s.a.createElement("div",{className:"p-workspace_directory_card__heading nudge_top_1"},this.renderWorkspaceName(),this.renderWorkspaceSubtitle())),this.renderWorkspaceStatus(),this.renderWorkspaceDescription()),this.renderButton())}}workspace_directory_card_WorkspaceDirectoryCard.displayName="WorkspaceDirectoryCard",workspace_directory_card_WorkspaceDirectoryCard.defaultProps=it;var ot=Object(S.b)(e=>({featureZeroWorkspaceOnboarding:Object(o.m)(e,"feature_zero_workspace_onboarding")}))(workspace_directory_card_WorkspaceDirectoryCard),lt=a("mIgp");a("8XR2");const ct=new F.b("grid_onboarding"),dt=(r.default.string,r.default.object.isRequired,r.default.bool.isRequired,r.default.func.isRequired,r.default.any,r.default.func,r.default.func,r.default.object.isRequired,{orgName:"",scrollElement:window,enqueueToast:C.a,onFooterClick:C.a}),ut=24,pt=1200,ht=Object(M.b)();function mt({totalWorkspaces:e,onWorkspaces:t}){return!e&&t}function bt({totalWorkspaces:e,onWorkspaces:t}){return!e&&!t}const ft=({workspaces:e,noAccessToWorkspaces:t,noWorkspaces:a,hasApiError:n,featureZeroWorkspaceOnboarding:r})=>{if(!r)return"";const i=function(e){return e?{oneJoinableWorkspace:ct.t("Join this workspace to start working with them on Slack."),moreThanOneJoinableWorkspaces:ct.t("Join the workspace that seems right for your role to get started."),noAccess:ct.t("Get in touch with them to be invited to a workspace they\u2019re in."),noWorkspaces:ct.t("Try searching for someone else on your team."),onApiError:ct.rt("You may want to try <a>reloading this page</a> and searching again, or try searching for someone else.",null,({text:e,key:t,tag:a})=>"a"===a?s.a.createElement(z.a,{onClick:()=>Object(ve.b)({reason:"Search failure, user initiated reload via link in error message",reasonKey:"search_results_failure",noCache:!0}),target:"_self",key:t},e):{text:e})}:""}(r);if(n)return i.onApiError;const o=function(e=[]){return Object(y.a)(e,(e={})=>"open"===e.discoverable||"closed"===e.discoverable||"unlisted"===e.discoverable&&e.is_assigned)}(e).length;return 1===o?i.oneJoinableWorkspace:o>1?i.moreThanOneJoinableWorkspaces:t?i.noAccess:a?i.noWorkspaces:""},_t=({noAccessToWorkspaces:e,noWorkspaces:t,memberRealName:a,totalWorkspaces:n,hasApiError:s,featureZeroWorkspaceOnboarding:r})=>r?s?ct.t("We ran into some trouble fetching {memberName}\u2019s workspaces",{memberName:Object(F.q)(a)}):e?ct.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:Object(F.q)(a)}):t?ct.t("{memberName} hasn\u2019t joined a workspace",{memberName:Object(F.q)(a)}):ct.t("{memberName} is in {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{memberName:Object(F.q)(a),numWorkspaces:n}):"";class search_results_screen_SearchResultsScreen extends n.Component{constructor(e){super(e),this.state={isMobileView:!1,loadingWorkspaces:!1,nextCursorMark:null,memberRealName:"",selectedMember:{},workspaces:[],totalWorkspaces:0,onWorkspaces:!1,hasApiError:!1},this.resultsList=null,this.searchBar=null,this.userHasNoAccessToWorkspaces=!1,this.memberHasNoWorkspaces=!1,this.noWorkspacesToDisplay=!1,this.doRenderSearchAgainButton=!1,Object(j.a)(this,["onFooterClick","onResize","onScroll","setListRef","setSearchBarRef","renderWorkspaceCard","getListKeys","onSearchAgainButtonClick","onSelectColleague","setWorkspaceFetchOptions","fetchWorkspaces","onButtonActionReject","onButtonActionResolve","setToastText","setLoadingWorkspaces"])}componentDidMount(){window.addEventListener("resize",this.onResize),this.clientHeight=window.innerHeight,this.setSelectedMember(this.props.selectedMember)}componentDidUpdate(e,t){this.maybeFetchNextPage(t),this.maybeTriggerNewSearch(t),this.maybeUpdateMemberRealName(t)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}onButtonActionReject({node:e}){e&&this.setToastText(e)}onButtonActionResolve({node:e,i:t,workspace:a}){Object(Oe.a)(t)&&a&&this.setWorkspaceByIndex({index:t,workspace:a}),e&&this.setToastText(e)}onFooterClick(){this.props.onFooterClick()}onResize(){this.clientHeight=window.innerHeight;const e=Object(Ne.c)(),t=this.state.isMobileView!==e;(e||t)&&this.resultsList.invalidateRowHeights()}onScroll({scrollTop:e,scrollHeight:t}){this.doInfiniteScrollHandler({scrollTop:e,scrollHeight:t})}onSearchAgainButtonClick(e){e.preventDefault(),e.stopPropagation(),this.searchBar&&this.searchBar.getWrappedInstance&&this.searchBar.getWrappedInstance().onSearchAgainTriggered()}onSelectColleague(e){const t=e.selectedOptionData;t&&this.setSelectedMember(t)}getListKeys(){return this.state.workspaces?this.state.workspaces.map(e=>String(e.id)):[]}setHasApiError(e){this.setState(()=>({hasApiError:e}))}setListRef(e){this.resultsList=e}setLoadingWorkspaces(e){this.setState(()=>({loadingWorkspaces:e}))}setMemberRealName(e){this.setState(()=>({memberRealName:e}))}setSearchBarRef(e){this.searchBar=e}setSelectedMember(e){this.setState(()=>({selectedMember:e}))}setToastText(e){this.props.enqueueToast({element:s.a.createElement(K.b,{position:"bottom-right",offsetY:50},e)})}setWorkspaceByIndex({index:e,workspace:t}){this.setState(a=>{const n=[].concat(a.workspaces);return e>=n.length?(ht.warn(`SearchResultsScreen: Out of bounds index ${e} passed into setWorkspaceByIndex`),a):(n[e]=t,{workspaces:n})})}setWorkspaceFetchOptions({workspaces:e,totalWorkspaces:t,onWorkspaces:a,nextCursorMark:n}){this.setState(()=>({workspaces:e,totalWorkspaces:t,onWorkspaces:a,nextCursorMark:n}))}clearWorkspaceFetchOptions(){this.setWorkspaceFetchOptions({workspaces:[],totalWorkspaces:0,onWorkspaces:!1,nextCursorMark:null})}doInfiniteScrollHandler({scrollTop:e,scrollHeight:t}){const a=this.hasScrolledWithinScrollThreshold({scrollTop:e,scrollHeight:t});a&&!this.hasFetchedAllWorkspaces()?this.setLoadingWorkspaces(!0):!a&&this.hasFetchedAllWorkspaces()&&this.setLoadingWorkspaces(!1)}fetchWorkspaces(){var e=this.state;const t=e.nextCursorMark,a=e.selectedMember;return this.setHasApiError(!1),this.props.fetchDirectoryWorkspaces({nextCursorMark:t,id:Object(b.a)(a,"id"),type:"single_user"}).then(e=>{this.setLoadingWorkspaces(!1);const a=e.num_found,n=e.on_workspaces,s=e.items,r=s?[].concat(this.state.workspaces,s):[];this.setWorkspaceFetchOptions({workspaces:r,totalWorkspaces:a,onWorkspaces:n,nextCursorMark:e.next_cursor_mark}),t||Object(Ne.e)({anchorPage:"grid_onboarding",numSearchResults:Object(b.a)(e,"num_found",0),clogger:this.props.clogger})}).catch(e=>{this.setHasApiError(!0),this.setLoadingWorkspaces(!1),ht.error("SearchResultsScreen: Error in FetchWorkspaces -",e)})}hasFetchedAllWorkspaces(){return this.state.workspaces.length===this.state.totalWorkspaces}hasScrolledWithinScrollThreshold({scrollHeight:e,scrollTop:t}){return e-(t+this.clientHeight)<pt}maybeFetchNextPage(e){!e.loadingWorkspaces&&this.state.loadingWorkspaces&&this.fetchWorkspaces()}maybeTriggerNewSearch(e){e.selectedMember!==this.state.selectedMember&&(this.clearWorkspaceFetchOptions(),this.setLoadingWorkspaces(!0))}maybeUpdateMemberRealName(e){if(e.selectedMember!==this.state.selectedMember){const e=Object(A.K)(this.state.selectedMember);this.setMemberRealName(e)}}renderFooter(){const e=this.props.orgName,t=k()("p-grid_onboarding__footer","p-grid_onboarding__footer_link",{margin_top_250:!this.noWorkspacesToDisplay||!this.doRenderSearchAgainButton,margin_top_150:this.noWorkspacesToDisplay});return s.a.createElement(Ce.a,{enabled:["feature_zero_workspace_onboarding"]},s.a.createElement(z.a,{onClick:this.onFooterClick,className:t},ct.t("View all {orgName} workspaces",{orgName:e}),s.a.createElement(G.a,{type:"chevron-right",key:"footer-chevron-icon",className:"p-grid_onboarding__footer_icon"})))}renderHeading(){const e=this.props.featureZeroWorkspaceOnboarding;if(!e)return null;var t=this.state;const a=t.totalWorkspaces,n=t.selectedMember,r=t.hasApiError,i=Object(A.K)(n),o=_t({noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,totalWorkspaces:a,memberRealName:i,hasApiError:r,featureZeroWorkspaceOnboarding:e}),l=k()("p-grid_onboarding__results_heading_container",{align_center:this.noWorkspacesToDisplay});return s.a.createElement("div",{className:l},s.a.createElement("span",{className:"p-grid_onboarding__results_heading"},s.a.createElement(te,{entityType:"member",dimension:ut,entityData:n,featureReactMessages:!0,customClasses:"p-grid_onboarding_results__icon"}),o))}renderInfiniteSpinner(){return s.a.createElement("div",{className:"p-grid_onboarding__spinner"},s.a.createElement($.a,{size:"jumbo",className:"inline_block full_width margin_top_200"}))}renderResults(){var e=this.state;const t=e.loadingWorkspaces,a=e.selectedMember;return t&&this.memberHasNoWorkspaces||!a?this.renderInfiniteSpinner():s.a.createElement(s.a.Fragment,null,this.renderHeading(),this.renderSubheading(),!this.noWorkspacesToDisplay&&this.renderWorkspaceList(),t&&this.renderInfiniteSpinner(),this.doRenderSearchAgainButton&&this.renderSearchAgainButton(),!t&&this.renderFooter())}renderSearchAgainButton(){return s.a.createElement(Ce.a,{enabled:["feature_zero_workspace_onboarding"]},s.a.createElement("div",{className:"display_flex justify_content_center margin_top_150"},s.a.createElement(Ee.d,{type:"outline",onClick:this.onSearchAgainButtonClick},ct.t("Search Again"))))}renderSearchBar(){return s.a.createElement("div",{className:"p-grid_onboarding_results__search"},s.a.createElement(Ke,{triggerAction:this.onSelectColleague,containerIdSelector:"colleagueSearchResults",membersOnly:!0,className:"margin_bottom_200",prepopulatedOption:this.props.selectedMember,ref:this.setSearchBarRef}))}renderSubheading(){const e=this.props.featureZeroWorkspaceOnboarding;if(!e)return null;var t=this.state;const a=t.workspaces,n=t.hasApiError,r=ft({workspaces:a,featureZeroWorkspaceOnboarding:e,noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,hasApiError:n}),i=k()("p-grid_onboarding__results_subheading",{align_center:this.noWorkspacesToDisplay});return s.a.createElement("div",{className:i},r)}renderWorkspaceCard(e){var t=this.state;const a=t.workspaces,n=t.totalWorkspaces,r=k()("p-grid_onboarding_results__list_item",{margin_bottom_0:e===n-1});return s.a.createElement(ot,{team:a[e],size:"large",featureZeroWorkspaceOnboarding:!0,className:r,onActionResolve:t=>this.onButtonActionResolve(p()({},t,{i:e})),onActionReject:t=>this.onButtonActionReject(p()({},t,{i:e})),anchorPage:"grid_onboarding"})}renderWorkspaceList(){const e=this.props.scrollElement;return s.a.createElement(I.a,{scrollElement:e,onScroll:this.onScroll},({height:t,isScrolling:a,onChildScroll:n,scrollTop:r,registerChild:i})=>s.a.createElement("div",{className:"p-grid_onboarding_results__list",ref:i},s.a.createElement(lt.a,{keys:this.getListKeys(),rowRenderer:this.renderWorkspaceCard,ref:this.setListRef,scrollElement:e,onScroll:n,height:t,isScrolling:a,scrollTop:r})))}render(){var e=this.state;const t=e.totalWorkspaces,a=e.onWorkspaces,n=e.loadingWorkspaces,r=e.hasApiError;return this.userHasNoAccessToWorkspaces=mt({totalWorkspaces:t,onWorkspaces:a}),this.memberHasNoWorkspaces=bt({totalWorkspaces:t,onWorkspaces:a}),this.noWorkspacesToDisplay=this.userHasNoAccessToWorkspaces||this.memberHasNoWorkspaces,this.doRenderSearchAgainButton=!n&&this.noWorkspacesToDisplay&&!r,s.a.createElement(Ce.a,{enabled:["feature_zero_workspace_onboarding"]},s.a.createElement("div",{className:"p-grid_onboarding__results",id:"colleagueSearchResults"},this.renderSearchBar(),this.renderResults()))}}search_results_screen_SearchResultsScreen.displayName="SearchResultsScreen",search_results_screen_SearchResultsScreen.defaultProps=dt;const gt={enqueueToast:R.c,fetchDirectoryWorkspaces:B.f};Object(S.b)((e,{selectedMember:t,workspaces:a})=>{return{selectedMember:t,workspaces:a,orgName:Object(T.e)(e),clogger:Object(D.a)({state:e}),featureZeroWorkspaceOnboarding:Object(o.m)(e,"feature_zero_workspace_onboarding"),featureSingleUserWorkspacePagination:Object(o.m)(e,"feature_single_user_workspace_pagination")}},gt)(search_results_screen_SearchResultsScreen);var yt=a("cW5R"),Ot=a("HOkk");a("zzVd");const Ct=new F.b("workspace_directory"),vt=(r.default.shape({admins:r.default.arrayOf(r.default.shape({real_name:r.default.string})),can_leave:r.default.bool,cannot_leave_reasons:r.default.array,created:r.default.number,deleted:r.default.bool,description:r.default.string,discoverable:r.default.string,domain:r.default.string,enterprise_id:r.default.string,date_requested_join:r.default.oneOfType([r.default.string,r.default.number]),icon:r.default.object,id:r.default.string,is_member:r.default.bool,joined_date:r.default.number,name:r.default.string,user_counts:r.default.object}).isRequired,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.func,r.default.bool,r.default.bool,r.default.string,r.default.string,r.default.string,r.default.string,{callLeaveWorkspace:C.a,onClose:C.a,onActionResolve:C.a,onActionReject:C.a,fetchEnterpriseTeamById:C.a,onLeaveReject:C.a,onLeaveResolve:C.a,onDone:C.a,fetchTeam:C.a,isGuest:!1,displayDirectoryInModal:!1,channelRedirect:null,postLaunchAction:null,userIdFromURL:null,preventAppLaunch:!1});class workspace_directory_dialog_WorkspaceDirectoryDialog extends n.Component{constructor(e){super(e),this.state={team:{},loading:!1},this.onWorkspaceLeave=this.onWorkspaceLeave.bind(this),this.setLoading=this.setLoading.bind(this)}componentDidMount(){const e=this.props.team;this.setWorkspace(e),this.fetchWorkspaceInfo()}onWorkspaceLeave(e){var t=this.props;const a=t.team,n=t.onLeaveReject,r=t.onLeaveResolve,i=t.onDone;return e.preventDefault(),this.props.callLeaveWorkspace({teamId:a.id}).then(()=>r({workspace:p()({},a,{is_member:!1})})).then(()=>i()).catch(e=>n({node:s.a.createElement("span",null,Ct.rt("Workspace couldn\u2019t be left. Please reload and try again.")),err:e}))}getTitleAria(){var e=this.state.team.name;const t=void 0===e?"":e;return t||"Workspace Name"}setLoading(e){this.setState(()=>({loading:e}))}setWorkspace(e,t){this.setState(()=>({team:e}),t)}canLeaveWorkspace(){var e=this.state.team;const t=e.is_member,a=e.can_leave,n=this.props.isGuest;return t&&a&&!n}fetchWorkspaceInfo(){const e=this.props.team.id;return this.setLoading(!0),this.props.fetchEnterpriseTeamById({teamId:e,additionalOptions:{include_admins:!0}}).then(e=>{this.setWorkspace(e,()=>this.setLoading(!1))})}listifyAdminRealNames(e){const t=Object(we.a)(e,e=>Object(A.K)(e));return Object(F.k)(t,{noEscape:!0})}renderButton(){var e=this.props;const t=e.onActionReject,a=e.onActionResolve,n=e.preventAppLaunch;var r=this.state;const i=r.team;if(r.loading)return null;const o=!(Object(w.a)()||Object(q.a)()&&Object(H.b)());return s.a.createElement(at,{team:i,customClasses:"margin_top_100",buttonContext:"dialog",featureZeroWorkspaceOnboarding:!0,onActionReject:t,onActionResolve:a,anchorPage:"workspace_directory",size:"medium",doLaunchInNewTab:o,channelRedirect:this.props.channelRedirect,postLaunchAction:this.props.postLaunchAction,userIdFromURL:this.props.userIdFromURL,doUpsertJoin:!0,preventAppLaunch:n})}renderDialogBody(){if(this.state.loading)return this.renderInfiniteSpinner();var e=this.state.team;const t=e.description,a=e.admins,n=e.user_counts,r=[];t&&r.push({heading:Ct.t("About"),text:t,key:"dialog-description"}),r.push({heading:Ct.t("Active members"),text:Ct.t("{activeMembers}",{activeMembers:Object(F.o)(Object(b.a)(n,"active_members",0))}),key:"dialog-active-members"},{heading:Ct.t("Workspace admins"),text:this.listifyAdminRealNames(a),key:"dialog-admins"});return s.a.createElement("div",{className:"p-workspace_directory_dialog__body"},r.map(e=>(e=>s.a.createElement("div",{key:e.key},s.a.createElement("p",{className:"margin_bottom_25 bold"},e.heading),s.a.createElement("p",null,e.text)))(e)))}renderDialogFooter(){return s.a.createElement(Ee.c,{className:"p-workspace_directory_dialog__leave",onClick:this.onWorkspaceLeave},Ct.t("Leave this workspace"))}renderDialogHeader(e){const t=this.state.team;var a=t.name;const n=void 0===a?"":a;var r=t.domain;const i=void 0===r?"":r,o=k()("p-workspace_directory_dialog__header",{"p-workspace_directory_dialog__header--mobile":Object(Ne.c)()});return s.a.createElement("div",{className:o},s.a.createElement(te,{entityType:"workspace",dimension:100,entityData:t,featureReactMessages:!0,featureReactMemberProfileCard:!0}),s.a.createElement("div",{className:"p-workspace_directory_dialog__name"},Ct.t("{name}",{name:Object(F.q)(n)})),s.a.createElement("div",{className:"p-workspace_directory_dialog__domain"},Ct.t("{domain}.slack.com",{domain:i})),this.renderDialogHeaderCaption(e),this.renderButton())}renderDialogHeaderCaption(e){return this.state.loading?null:e?s.a.createElement("span",{className:"p-workspace_directory_dialog__caption"},s.a.createElement(G.b,{size:"inherit",type:"exclamation-circle",align:"baseline",className:"margin_right_25"}),e):null}renderDialogOnMobile(e){const t=this.canLeaveWorkspace();return s.a.createElement(ae.a,{showCancelButton:!1,showCloseButton:!1,showGoButton:!1,position:"fixed",modalBodyClasses:"p-workspace_directory_dialog--mobile"},this.renderDialogHeader(e),s.a.createElement("div",{className:"p-workspace_directory_dialog__contents--mobile"},this.renderDialogBody(),t&&this.renderDialogFooter()))}renderInfiniteSpinner(){return s.a.createElement("div",{className:"overflow_hidden margin_100"},s.a.createElement($.a,{size:"jumbo",className:"inline_block full_width"}))}render(){const e=this.state.team,t=Object(Ne.f)(e,{context:"dialog"});if(Object(Ne.c)())return this.renderDialogOnMobile(t);const a=this.props.displayDirectoryInModal;let n={contentLabel:t,className:k()("p-workspace_directory_dialog",{"p-workspace_directory_dialog--focus_ring":!a}),showCloseButton:!0,showCancelButton:!1,showGoButton:!1,showHeader:!0,title:this.renderDialogHeader(t),titleAria:this.getTitleAria(),useSlackScrollbar:!1,showFooter:!1,shouldCloseOnOverlayClick:!0,invertCloseButton:!0};return this.canLeaveWorkspace()&&(n=p()({},n,{showFooter:!0,footerText:this.renderDialogFooter()})),s.a.createElement(Ot.a,n,this.renderDialogBody())}}workspace_directory_dialog_WorkspaceDirectoryDialog.displayName="WorkspaceDirectoryDialog",workspace_directory_dialog_WorkspaceDirectoryDialog.defaultProps=vt;const Et={callLeaveWorkspace:B.c,fetchEnterpriseTeamById:B.g};var kt=Object(S.b)(null,Et)(workspace_directory_dialog_WorkspaceDirectoryDialog),St=a("XhtD");a("+BnW");r.default.array.isRequired,r.default.any,r.default.func,r.default.func,r.default.number;const jt={scrollElement:window,onScroll:C.a,renderWorkspaceCard:C.a,topOffset:0};class workspace_grid_list_WorkspaceGridList extends n.PureComponent{static getUpdatedRowIndex({currentRow:e=0,prevColumns:t=0,updatedColumns:a=0}){if(!e)return 0;if(t===a)return e;const n=e*t;return Math.floor(n/a)}constructor(e){super(e),Object(j.a)(this,["onScroll","onResize","setListRef","getListKeys","renderRow","renderCell"]),this.state={columns:3},this.list=null,this.keys=[],this.rowsByIndex=[],this.currentRow=0}componentDidMount(){window.addEventListener("resize",this.onResize),this.calculateColumns()}componentDidUpdate(e,t){if(this.state.columns!==t.columns){const e=workspace_grid_list_WorkspaceGridList.getUpdatedRowIndex({currentRow:this.currentRow,prevColumns:t.columns,updatedColumns:this.state.columns});this.currentRow=e;const a=this.getKeyForRow(e);this.keys.length&&this.list.scrollToKey(a)}}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}onResize(){const e=this.list.getVisibleRange().start;this.currentRow=e||0,this.calculateColumns()}onScroll(e){return this.props.onScroll(e)}getContentHeight(){return this.list.getContentHeight()}getKeyForRow(e){return this.keys[e]}getListKeys(){return this.keys}getWorkspacesByRowIndex(e){const t=this.state.columns,a=this.props.workspaces,n=this.rowsByIndex[e],s=Math.min(n+t,a.length);return Object(St.a)(n,s)}setColumns(e){this.setState(()=>({columns:e}))}setListRef(e){this.list=e}calculateColumns(){const e=window.innerWidth;let t=3;t=Object(Ne.c)(e)?1:Object(Ne.d)(e)?2:3,this.state.columns!==t&&this.setColumns(t)}renderCell(e){var t=this.props;const a=t.workspaces,n=t.renderWorkspaceCard,r=a[e];return r?s.a.createElement("div",{className:"p-workspace_grid_list__cell",key:`grid_list_cell_${e}`},n(r)):null}renderRow(e){const t=this.getWorkspacesByRowIndex(e),a=k()("p-workspace_grid_list__row",{"p-workspace_grid_list__row--one_column":1===this.state.columns});return s.a.createElement("div",{className:a},t.map(e=>this.renderCell(e)))}render(){var e=this.props;e.topOffset,e.scrollElement;const t=d()(e,["topOffset","scrollElement"]);return this.rowsByIndex=Object(St.a)(0,this.props.workspaces.length,this.state.columns),this.keys=this.rowsByIndex.map(e=>e.toString()),s.a.createElement(lt.a,p()({keys:this.getListKeys(),rowRenderer:this.renderRow,ref:this.setListRef,scrollElement:this.props.scrollElement,onScroll:this.onScroll,topOffset:this.props.topOffset},t))}}workspace_grid_list_WorkspaceGridList.displayName="WorkspaceGridList",workspace_grid_list_WorkspaceGridList.defaultProps=jt;var It=workspace_grid_list_WorkspaceGridList,wt=a("um7Q"),Tt=a("MREy"),Nt=a("lwWk");a("wb76");r.default.string,r.default.string,r.default.object,r.default.string,r.default.object,r.default.bool,r.default.func,r.default.string,r.default.string,r.default.func;const At={logoLink:null,logoAriaLabel:null,logoLinkProps:{},title:null,team:{},isEnterprise:null,renderRightContents:C.a,rightClassName:null,renderCenterContents:C.a,centerClassName:null};class navigation_bar_NavigationBar extends n.Component{renderRightContents(){var e=this.props;const t=e.rightClassName,a=e.renderRightContents,n=k()("p-navigation_bar__right",t);return s.a.createElement("div",{className:n},a())}renderCenterContents(){var e=this.props;const t=e.centerClassName,a=e.renderCenterContents,n=k()("p-navigation_bar__center",t);return s.a.createElement("div",{className:n},a())}renderTitle(){var e=this.props;const t=e.title,a=e.team,n=e.isEnterprise;return s.a.createElement("div",{className:"p-navigation_bar__heading"},s.a.createElement(te,{entityType:n?"org":"workspace",dimension:28,entityData:a,customClasses:"flex_none",featureReactMessages:!0}),s.a.createElement("span",{className:"p-navigation_bar__title nudge_bottom_1"},t))}renderLogo(){var e=this.props;const t=e.logoLink,a=e.logoAriaLabel,n=e.logoLinkProps,r=s.a.createElement("div",{className:"p-navigation_bar__logo","data-qa":"nav_bar_logo",alt:"Slack"});return t?s.a.createElement(Nt.a,p()({href:t,"aria-label":a,className:"flex_none"},n),r):r}render(){const e=this.props.title;return s.a.createElement("nav",{className:"p-navigation_bar"},s.a.createElement("div",{className:"p-navigation_bar__left"},this.renderLogo(),e&&this.renderTitle()),this.renderCenterContents(),this.renderRightContents())}}navigation_bar_NavigationBar.displayName="NavigationBar",navigation_bar_NavigationBar.defaultProps=At;var Rt=navigation_bar_NavigationBar;a("ABxf");const Mt=new F.b("workspace_directory"),Pt=(r.default.shape({icon:r.default.object,id:r.default.string,name:r.default.string}).isRequired,r.default.shape({id:r.default.string,is_admin:r.default.bool,is_owner:r.default.bool,is_primary_owner:r.default.bool,profile:r.default.object}).isRequired,r.default.bool,r.default.bool,r.default.bool,r.default.string.isRequired,r.default.string,r.default.string,r.default.object,r.default.func,r.default.func,{isMobileView:!1,displayManageOrgButton:!1,displaySearchBar:!1,prefCompliantMemberName:"",organizationUrl:"",selectedSearchOption:{},onOptionSelected:C.a,onClearHeaderInput:C.a});class workspace_directory_header_WorkspaceDirectoryHeader extends n.Component{constructor(e){super(e),Object(j.a)(this,["maybeRenderSearchBar","onSelectOption","onMenuItemSelected","renderUserMenu","renderUserSettings"])}onMenuItemSelected(e){const t=`${window.location.origin}/account/settings`;switch(e){case"settings":window.open(t,"_self")}return null}onSelectOption(e){this.props.onOptionSelected(e)}maybeRenderManageOrganizationButton(){if(!this.props.displayManageOrgButton)return null;const e=Mt.t("Manage Organization",{fallbackHash:"35677e6e3c1751d4a193cc6db0f31a75016c019f"});return s.a.createElement(Ee.d,{"data-qa":"ws_directory_manage_org_button",className:"p-workspace_directory_header__manage_org no_underline nudge_bottom_1",type:"outline",href:"/manage",target:"_blank"},e)}maybeRenderSearchBar(){const e=this.props.selectedSearchOption;return!this.props.displaySearchBar||this.props.isMobileView?null:s.a.createElement("div",{className:"p-workspace_directory_header__search","data-qa":"ws_directory_search_bar"},s.a.createElement(Ke,{prepopulatedOption:e,featureZeroWorkspaceOnboarding:!0,membersOnly:!1,containerIdSelector:"directory_mount_point",triggerAction:this.onSelectOption,onClearInput:this.props.onClearHeaderInput}))}renderAvatar(){const e=this.props.user;return s.a.createElement(Tt.e,{"data-qa":"ws_directory_user_menu_trigger",renderMenu:this.renderUserMenu,position:"bottom-right",offsetX:0,offsetY:7.5},s.a.createElement(Ee.c,{"aria-haspopup":!0,className:"p-workspace_directory_header__user_icon"},s.a.createElement(te,{entityType:"member",dimension:36,entityData:e,customClasses:"flex_none cursor_pointer",featureReactMessages:!0,isInteractive:!1})))}renderUserMenu(e){var t=this.props;const a=t.prefCompliantMemberName,n=t.enterprise,r=t.signoutUrl;return s.a.createElement(Tt.f,p()({},e,{menuClassNames:"p-workspace_directory_header__menu","data-qa":"ws_directory_user_menu"}),(()=>s.a.createElement(Tt.b,{key:"workspace_directory_user_menu_name",label:s.a.createElement("span",{className:"black"},a),description:Mt.t("Account settings",{fallbackHash:"e32707613d1f53b92e6162cc5ddb4a9bb58a2ec6"}),href:"/account/settings",onSelected:()=>this.onMenuItemSelected("settings"),className:"no_underline"}))(),s.a.createElement(Tt.d,null),(()=>s.a.createElement(Tt.b,{key:"workspace_directory_user_menu_sign_out",label:Mt.t("Sign out of {orgName}",{orgName:Object(F.q)(n.name)}),href:r,className:"no_underline",showLinkIndicatorIcon:!1,target:"_self",danger:!0}))())}renderUserSettings(){return s.a.createElement("div",{className:"p-workspace_directory_header__settings"},this.maybeRenderManageOrganizationButton(),this.renderAvatar())}render(){var e=this.props;const t=e.enterprise,a=e.isMobileView,n=e.organizationUrl,r=a?Mt.t("Directory"):Mt.t("Workspace Directory");return s.a.createElement(Rt,{"data-qa":"ws_directory_header",title:r,team:t,isEnterprise:!0,logoAriaLabel:"Slack",logoLink:n,renderRightContents:this.renderUserSettings,renderCenterContents:this.maybeRenderSearchBar})}}workspace_directory_header_WorkspaceDirectoryHeader.displayName="WorkspaceDirectoryHeader",workspace_directory_header_WorkspaceDirectoryHeader.defaultProps=Pt;var xt=Object(S.b)((e,{user:t,enterprise:a={}})=>({signoutUrl:Object(o.f)(e,"signout_url"),prefCompliantMemberName:Object(A.V)(e,t),organizationUrl:Object(wt.a)(e,a.domain)}))(workspace_directory_header_WorkspaceDirectoryHeader);a("YL49");r.default.node,r.default.node,r.default.bool,r.default.func,r.default.string,r.default.bool;const Lt={title:"",description:"",showCloseButton:!1,onClose:C.a,className:"",isHidden:!0};class workspace_directory_banner_WorkspaceDirectoryBanner extends n.PureComponent{constructor(e){super(e),this.onClose=this.onClose.bind(this),this.onKeyPress=this.onKeyPress.bind(this)}onClose(e){this.props.onClose(e)}onKeyPress(e){return e.preventDefault(),13===e.which?this.props.onClose(e):null}renderBannerText(){var e=this.props;const t=e.title,a=e.description;return s.a.createElement("div",{className:"p-workspace_directory_banner__text"},s.a.createElement("div",{className:"p-workspace_directory_banner__title"},t),s.a.createElement("span",{className:"p-workspace_directory_banner__description"},a))}renderCloseButton(){const e=this.props.isHidden;return s.a.createElement(Ee.c,{tabIndex:e?-1:0,className:"p-workspace_directory_banner__close_btn",onClick:this.onClose,onKeyPress:this.onKeyPress},s.a.createElement(G.b,{type:"times"}))}render(){var e=this.props;const t=e.showCloseButton,a=e.className,n=k()("p-workspace_directory_banner",a);return s.a.createElement("div",{className:n},this.renderBannerText(),t&&this.renderCloseButton())}}workspace_directory_banner_WorkspaceDirectoryBanner.displayName="WorkspaceDirectoryBanner",workspace_directory_banner_WorkspaceDirectoryBanner.defaultProps=Lt;var Ft=workspace_directory_banner_WorkspaceDirectoryBanner;a("oE+f");const Dt=new F.b("workspace_directory"),Bt=(r.default.shape({id:r.default.string,name:r.default.string,domain:r.default.string,icon:r.default.object,locale:r.default.string}).isRequired,r.default.shape({id:r.default.string,name:r.default.string,is_admin:r.default.bool,is_owner:r.default.bool,profile:r.default.object}),r.default.bool,r.default.func.isRequired,r.default.func.isRequired,r.default.func,r.default.func.isRequired,r.default.func,r.default.func,r.default.bool,r.default.func,r.default.string,r.default.bool,r.default.func,r.default.bool,r.default.object,r.default.func,r.default.object.isRequired,r.default.bool,{user:{},userIsAdminOrOwner:!1,enqueueToast:C.a,openModal:C.a,closeModal:C.a,allowWorkspaceRequest:!1,showRequestDialog:C.a,launchTeamId:null,displayDirectoryInModal:!0,onClose:C.a,hasSeenOnboardingBanner:!1,queryString:null,setUserPrefByApi:C.a,featureModernRequestWorkspaceDialog:!1}),Ut=300,qt=Object(M.b)();class workspace_directory_WorkspaceDirectory extends n.Component{static sortListByWorkspaceName(e){return Object(_.a)(e,e=>e.name)}constructor(e){super(e),this.state={isMobileView:!1,hasScrolledPastHeaderPane:!1,allWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},yourWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},dialogWorkspaceDetail:null,selectedOption:null,hideOnboardingBanner:!0,viewingHiddenWorkspace:!1},this.dialog=null,this.headerPaneHeight=null,this.clientHeight=null,this.page=null,this.pageSearch=null,this.listRefs={allWorkspaces:null,yourWorkspaces:null},this.windowScroller=null,this.onboardingBannerHeight=0,this.trackingCode="",Object(j.a)(this,["setPageRef","setPageSearchRef","setHeaderPaneRef","setOnboardingBannerRef","onScroll","onWindowScrollerScroll","onFullscreenModalClose","onResize","openWorkspaceRequestForm","openDialog","closeDialog","onOnboardingBannerDismiss","onWorkspaceLeave","onActionResolve","onActionReject","onSelectOption","onClearHeaderInput","setToastText","setListRef","setWindowScrollerRef","renderWorkspaceCard","fetchSingleMemberToPrepopulate"])}componentDidMount(){this.setIsMobileView(Object(Ne.c)()),window.addEventListener("resize",this.onResize),this.clientHeight=window.innerHeight,this.setLoadingWorkspaces("allWorkspaces",!0),this.setLoadingWorkspaces("yourWorkspaces",!0),this.props.launchTeamId&&(this.trackingCode="workspace_url",this.fetchTeam(this.props.launchTeamId));const e=this.props.hasSeenOnboardingBanner;this.setHideOnboardingBanner(e),Object(Ne.k)({trackingCode:this.trackingCode,clogger:this.props.clogger});const t=this.props.queryString&&Object(b.a)(this.props.queryString,"user",null);t&&this.fetchSingleMemberToPrepopulate(t)}componentDidUpdate(e,t){this.headerPane&&(this.headerPaneHeight=this.headerPane.clientHeight);const a=this.getListHeight("yourWorkspaces");a!==this.state.allWorkspaces.topOffset&&this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:a}),this.props.hasSeenOnboardingBanner||!this.onboardingBanner||this.onboardingBannerHeight||(this.onboardingBannerHeight=Object(v.findDOMNode)(this.onboardingBanner).clientHeight),!t.hideOnboardingBanner&&this.state.hideOnboardingBanner&&this.windowScroller.updatePosition(),t.selectedOption!==this.state.selectedOption&&this.fetchSearchResults(),this.maybeFetchNextPage(t)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}onActionReject({node:e,err:t}){e&&this.setToastText(e),qt.error("Error with Workspace Action in WorkspaceDirectory - ",t)}onActionResolve({node:e,workspace:t}={}){if(t)if(t.member){if(this.onWorkspaceJoin({workspace:t}),this.props.displayDirectoryInModal)return this.onFullscreenModalClose()}else t.date_requested_join&&this.onWorkspaceRequested({workspace:t});return e&&this.setToastText(e),this.closeDialog()}onClearHeaderInput(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().clearInput()}onFullscreenModalClose(){this.dialog&&this.dialog.close(),this.props.onClose&&this.props.onClose()}onOnboardingBannerDismiss(){this.setHideOnboardingBanner(!0),this.props.setUserPrefByApi({pref:"seen_onboarding_banner",value:!0}).catch(e=>qt.error("Error setting seen_onboarding_banner user pref",e))}onResize(){this.clientHeight=window.innerHeight,this.setIsMobileView(Object(Ne.c)());const e=this.getListHeight("yourWorkspaces");this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:e})}onScroll(e){const t=e.currentTarget.scrollTop>=this.headerPaneHeight;t&&this.pageSearch.getWrappedInstance().blur(),t!==this.state.hasScrolledPastHeaderPane&&this.setHasScrolledPastHeaderPane(t)}onSearchAgainButtonClick(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().onSearchAgainTriggered()}onSelectOption(e){this.setSearchResultsOptions(e)}onWindowScrollerScroll({scrollTop:e}){this.doInfiniteScrollHandler({scrollTop:e})}onWorkspaceJoin({workspace:e}){this.setState(t=>{const a=this.maybeUpsertWorkspaceToSearchResults(t,e),n=t.yourWorkspaces.workspaces,s=Object(f.a)([e],n,"id"),r=t.yourWorkspaces.totalWorkspaces+1;return{yourWorkspaces:p()({},t.yourWorkspaces,{workspaces:workspace_directory_WorkspaceDirectory.sortListByWorkspaceName(s),totalWorkspaces:r}),searchResults:p()({},t.searchResults,{workspaces:workspace_directory_WorkspaceDirectory.sortListByWorkspaceName(a)})}})}onWorkspaceLeave({workspace:e}){this.setState(t=>{const a=this.maybeUpsertWorkspaceToSearchResults(t,e),n=t.yourWorkspaces.workspaces,s=Object(y.a)(n,t=>t.id!==e.id),r=t.yourWorkspaces.totalWorkspaces-1,i=t.allWorkspaces.workspaces,o=Object(f.a)([e],i,"id");return{yourWorkspaces:p()({},t.yourWorkspaces,{workspaces:s,totalWorkspaces:r}),allWorkspaces:p()({},t.allWorkspaces,{workspaces:workspace_directory_WorkspaceDirectory.sortListByWorkspaceName(o)}),searchResults:p()({},t.searchResults,{workspaces:workspace_directory_WorkspaceDirectory.sortListByWorkspaceName(a)})}},()=>{this.closeDialog()})}onWorkspaceRequested({workspace:e}){e&&this.setState(t=>{const a=[...t.allWorkspaces.workspaces],n=Object(h.a)(a,t=>t.id===e.id);return n<0?null:(a[n]=e,{allWorkspaces:p()({},t.allWorkspaces,{workspaces:a})})})}getListHeading(e){const t=this.state.selectedOption;if("allWorkspaces"===e){const e=this.state.allWorkspaces.totalWorkspaces,t=this.state.yourWorkspaces.totalWorkspaces;return Dt.t("Browse {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{numWorkspaces:Math.max(e-t,0)})}if("yourWorkspaces"===e)return Dt.t("Your Workspaces");if("searchResults"===e){var a=this.state.searchResults;const e=a.loadingWorkspaces,n=a.totalWorkspaces,r=Object(b.a)(t,"selectedOptionData");if(e)return null;if("member"===Object(b.a)(t,"type")){const e=Object(A.K)(r),t=Dt.t("{memberName} is in {workspaceCount, plural, =1 {# workspace} other {# workspaces}}",{memberName:e,workspaceCount:n});return s.a.createElement(s.a.Fragment,null,s.a.createElement(te,{entityType:"member",dimension:28,entityData:r,customClasses:"margin_right_75",featureReactMessages:!0,featureReactMemberProfileCard:!1}),t)}if("workspace"===Object(b.a)(t,"type")&&0===n)return Dt.t("No workspaces found matching \u201c{searchQuery}\u201d",{searchQuery:"SEARCH QUERY"});if((!Object(b.a)(t,"type")||r.id===Ne.b)&&n>0)return Dt.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{searchQuery}\u201d",{workspaceCount:n,searchQuery:Object(b.a)(r,"displayValue")});if("workspace"===Object(b.a)(t,"type")&&n>0)return Dt.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{workspaceName}\u201d",{workspaceCount:n,workspaceName:Object(b.a)(t,"selectedOptionData.name")})}return""}getListHeight(e){return this.listRefs[e]?this.listRefs[e].getContentHeight():0}getWorkspaceListTopOffset(e){return this.state[e]?this.state[e].topOffset:0}getWorkspacesForList(e){if("allWorkspaces"===e){const e=this.state.allWorkspaces.workspaces,t=this.state.yourWorkspaces.workspaces;return Object(g.a)(e,t,"id")}return"yourWorkspaces"===e?this.state.yourWorkspaces.workspaces:"searchResults"===e?this.state.searchResults.workspaces:[]}setDialogWorkspaceDetail(e,t){this.setState(()=>({dialogWorkspaceDetail:e}),t)}setHasApiError(e,t){this.setState(a=>({[e]:p()({},a[e],{hasApiError:t})}))}setHasScrolledPastHeaderPane(e){this.setState(()=>({hasScrolledPastHeaderPane:e}))}setHeaderPaneRef(e){this.headerPane=e}setHideOnboardingBanner(e){this.setState(()=>({hideOnboardingBanner:e}))}setIsMobileView(e){this.setState(()=>({isMobileView:e}))}setListRef({workspaceListKey:e,ref:t}){this.listRefs[e]=t}setListTopOffset({workspaceListKey:e,topOffset:t}){this.setState(a=>({[e]:p()({},a[e],{topOffset:t})}))}setLoadingWorkspaces(e,t){this.setState(a=>({[e]:p()({},a[e],{loadingWorkspaces:t})}))}setOnboardingBannerRef(e){this.onboardingBanner=e}setPageRef(e){this.page=e}setPageSearchRef(e){this.pageSearch=e}setSearchResultsOptions(e){this.setState(()=>({searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},selectedOption:e}))}setToastText(e){this.props.enqueueToast({element:s.a.createElement(K.b,{position:"bottom-right",offsetY:50},e)})}setViewingHiddenWorkspace(e){this.setState(()=>({viewingHiddenWorkspace:e}))}setWindowScrollerRef(e){this.windowScroller=e}setWorkspaceFetchOptions(e,{workspaces:t=[],totalWorkspaces:a=0,onWorkspaces:n=!1,nextCursorMark:s=null}){this.setState(r=>({[e]:p()({},r[e],{workspaces:t,totalWorkspaces:a,onWorkspaces:n,nextCursorMark:s})}))}closeDialog(){this.props.displayDirectoryInModal||window.history.replaceState({},"","/")}doInfiniteScrollHandler({scrollTop:e}){const t=this.hasFetchedAllWorkspaces("yourWorkspaces")?"allWorkspaces":"yourWorkspaces";let a=this.getListHeight("yourWorkspaces");"allWorkspaces"===t&&(a+=this.getListHeight("allWorkspaces"));const n=this.hasScrolledWithinScrollThreshold({scrollTop:e,scrollHeight:a});n&&!this.hasFetchedAllWorkspaces(t)?this.setLoadingWorkspaces(t,!0):!n&&this.hasFetchedAllWorkspaces(t)&&this.setLoadingWorkspaces(t,!1)}fetchSearchResults(){var e=this.state.selectedOption;const t=e.selectedOptionData,a=e.type,n={};t&&(this.setLoadingWorkspaces("searchResults",!0),Object(b.a)(t,"id")===Ne.b?n.searchTerm=t.displayValue:(n.id=t.id,n.type="member"===a?"single_user":"single_workspace"),Object(Ne.j)({searchType:a,clogger:this.props.clogger}),this.fetchWorkspacesWithArgs(n))}fetchSingleMemberToPrepopulate(e){this.props.fetchRawMembersFromAPI({ids:[e]}).then(e=>{const t={selectedOption:{selectedOptionData:e.members[0],type:"member"}};this.setState(t)})}fetchTeam(e){return this.props.fetchEnterpriseTeamById({teamId:e}).then(e=>{this.setSearchResultsOptions({selectedOptionData:e,type:"workspace"}),this.openDialog({team:e})}).catch(e=>{this.setViewingHiddenWorkspace(!0),qt.error("Error fetching workspace detail for launch_team_id -",e)})}fetchWorkspaces({additionalOptions:e,workspaceListKey:t="allWorkspaces"}={}){const a=this.state[t].nextCursorMark;return this.setHasApiError(t,!1),this.props.fetchDirectoryWorkspaces(p()({nextCursorMark:a},e)).then(e=>{const n=e.num_found,s=e.on_workspaces;let r=e.items;a&&(r=Object(f.a)(this.state[t].workspaces,r,"id")),this.setWorkspaceFetchOptions(t,{workspaces:r,totalWorkspaces:n,onWorkspaces:s,nextCursorMark:e.next_cursor_mark}),this.setLoadingWorkspaces(t,!1)}).catch(e=>{this.setHasApiError(t,!0),this.setLoadingWorkspaces(t,!1),qt.error("WorkspaceDirectory: Error in FetchWorkspaces -",e)})}fetchWorkspacesWithArgs({type:e,id:t,searchTerm:a}){const n=this.props.user.id,s=this.state.selectedOption,r=Object(O.a)(s),i=t===n&&r?"yourWorkspaces":"searchResults";return this.fetchWorkspaces({workspaceListKey:i,additionalOptions:{type:e,id:t,searchTerm:a}})}hasFetchedAllWorkspaces(e){return this.state[e].workspaces.length>=this.state[e].totalWorkspaces}hasScrolledWithinScrollThreshold({scrollHeight:e,scrollTop:t}){return e-(t+this.clientHeight)<Ut}maybeFetchNextPage(e){!e.allWorkspaces.loadingWorkspaces&&this.state.allWorkspaces.loadingWorkspaces&&this.fetchWorkspaces(),!e.yourWorkspaces.loadingWorkspaces&&this.state.yourWorkspaces.loadingWorkspaces&&this.fetchWorkspacesWithArgs({id:this.props.user.id,type:"single_user"})}maybeUpsertWorkspaceToSearchResults(e,t){const a=Object(b.a)(e.searchResults,"workspaces",[]);return Object(m.a)(a,e=>t.id===e.id)?Object(f.a)([t],a,"id"):a}openDialog({team:e}){this.props.displayDirectoryInModal||window.history.replaceState({},"",`/workspace/${e.id}`),Object(Ne.l)({teamId:e.id,trackingCode:this.trackingCode,clogger:this.props.clogger}),this.setDialogWorkspaceDetail(e,()=>{this.dialog=this.props.openModal({element:this.renderDialog(),isStackable:!0,name:"find-more-workspaces-info"})})}openWorkspaceRequestForm(){var e=this.props;const t=e.showRequestDialog,a=e.featureModernRequestWorkspaceDialog,n=e.openModal;a?n({element:s.a.createElement(ye,null),isStackable:!0}):t({displayModernToast:({type:e,errorType:t,teamName:a})=>{const n=Object(Ne.g)({type:e,errorType:t,teamName:a});this.setToastText(s.a.createElement("div",{className:"display_flex"},"success"===e&&s.a.createElement(G.b,{type:"check-circle-o",className:"margin_right_50 sk_lilypad_green"}),s.a.createElement("span",null,n)))}})}renderAllWorkspaces(e){return this.renderList({listProps:e,workspaceListKey:"allWorkspaces"})}renderDialog(){var e=this.state;const t=e.dialogWorkspaceDetail,a=e.displayDirectoryInModal,n=this.props.user,r=Object(b.a)(this.props.queryString,"channel",null),i=Object(b.a)(this.props.queryString,"action",null),o=Object(b.a)(this.props.queryString,"user",null),l=Object(A.wb)(n),c=!!Object(yt.c)("post_signin");return s.a.createElement(kt,{team:t,displayDirectoryInModal:a,onClose:this.closeDialog,featureZeroWorkspaceOnboarding:!0,onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,onLeaveResolve:this.onWorkspaceLeave,onLeaveReject:this.onActionReject,isGuest:l,channelRedirect:r,postLaunchAction:i,userIdFromURL:o,preventAppLaunch:c})}renderDirectoryInModal(){const e=this.props.enterprise,t=k()("p-workspace_directory__page","p-workspace_directory__page--modal_view");return s.a.createElement(ae.a,{onCancel:this.onFullscreenModalClose,showCancelButton:!1,showGoButton:!1,title:Dt.t("Workspaces at {orgName}",{orgName:e.name,__react:!0}),position:"fixed",modalBodyClasses:"p-workspace_directory__modal_body",modalClasses:"p-workspace_directory_modal",fullBleedModalBodyContent:!0,withHeader:!0},s.a.createElement("div",{className:t,onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()))}renderDirectoryLists(e){const t=this.state.selectedOption,a=e.onChildScroll,n=e.registerChild,r=d()(e,["onChildScroll","registerChild"]),i=p()({onScroll:a,scrollElement:this.page},r);return!!Object(b.a)(t,"selectedOptionData")?s.a.createElement("div",{ref:n},this.renderSearchResults(i)):s.a.createElement("div",{ref:n},this.renderYourWorkspaces(i),this.renderAllWorkspaces(i))}renderDirectoryPage(){const e=this.props.user,t=this.state.viewingHiddenWorkspace;var a=this.state.allWorkspaces;const n=a.workspaces,r=a.loadingWorkspaces;var i=this.state.yourWorkspaces;const o=i.workspaces,l=!i.loadingWorkspaces&&Object(O.a)(o),c=!r&&Object(O.a)(n);return l&&Object(A.wb)(e)?this.renderEmptyState({isZeroWorkspaceGuest:!0}):c&&l?this.renderEmptyState({isZeroWorkspaceOrg:!0}):t?this.renderEmptyState({isHiddenWorkspace:!0}):s.a.createElement("div",{className:"p-workspace_directory",id:"workspace_directory"},this.renderWorkspaceDirectoryHeaderPane(),this.renderWorkspaceDirectoryBody())}renderEmptyState(e){const t=this.props.enterprise;return s.a.createElement("div",{className:"p-workspace_directory__empty_state_container"},s.a.createElement(Vt,p()({enterprise:t},e)))}renderInfiniteSpinner({renderFullPage:e}={}){const t=k()("p-workspace_directory__spinner",{"p-workspace_directory__spinner--fs":!!e});return s.a.createElement("div",{className:t},s.a.createElement($.a,{size:"jumbo",className:"inline_block full_width margin_top_200"}))}renderList({listProps:e,workspaceListKey:t}){const a=this.getWorkspacesForList(t),n=this.state[t].loadingWorkspaces;if("searchResults"===t&&Object(O.a)(a)&&!n)return this.renderSearchEmptyState();if(Object(O.a)(a)&&!n)return null;const r=this.getWorkspaceListTopOffset(t),i=this.getListHeading(t);return s.a.createElement(s.a.Fragment,null,this.renderListHeading(i),s.a.createElement("div",{className:"p-workspace_directory__list"},s.a.createElement(It,p()({scrollElement:this.page,workspaces:a,renderWorkspaceCard:this.renderWorkspaceCard,topOffset:r,ref:e=>this.setListRef({workspaceListKey:t,ref:e})},e))),n&&this.renderInfiniteSpinner())}renderListHeading(e){return s.a.createElement("p",{className:"p-workspace_directory__list_title"},e)}renderOnboardingBanner(){if(this.props.hasSeenOnboardingBanner)return null;const e=this.state.hideOnboardingBanner,t=k()("p-workspace_directory__banner","p-workspace_directory__banner--onboarding",{"p-workspace_directory__banner--hidden":e}),a=Dt.t("Workspaces are where you and your teammates communicate and get work done. To get started, find your team\u2019s workspace.");return s.a.createElement(Ft,{title:Dt.t("What is a workspace?"),description:a,className:t,onClose:this.onOnboardingBannerDismiss,isHidden:e,showCloseButton:!0,ref:this.setOnboardingBannerRef})}renderSearchEmptyState(){var e=this.state;const t=e.searchResults,a=e.selectedOption,n=Object(b.a)(a,"selectedOptionData");let r,i;if(Object(Ne.h)(n)){const e=Object(b.a)(t,"totalWorkspaces"),a=Object(b.a)(t,"onWorkspaces"),o=Object(A.K)(n);return bt({totalWorkspaces:e,onWorkspaces:a})&&!mt({totalWorkspaces:e,onWorkspaces:a})&&(r=Dt.t("{memberName} hasn\u2019t joined any workspaces",{memberName:o}),i=Dt.rt("Try <a>searching for someone else</a> on your team, or for a specific workspace",null,({text:e,key:t,tag:a})=>"a"===a?s.a.createElement(z.a,{onClick:()=>this.onSearchAgainButtonClick(),key:t},e):{text:e})),mt({totalWorkspaces:e,onWorkspaces:a})&&(r=Dt.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:o}),i=Dt.rt("Get in touch with {memberName} to be invited to a workspace they\u2019re in, or try <a>searching for someone else</a> on your team.",{memberName:o},({text:e,key:t,tag:a})=>"a"===a?s.a.createElement(z.a,{onClick:()=>this.onSearchAgainButtonClick(),key:t},e):{text:e})),s.a.createElement("div",{className:"align_center"},s.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},s.a.createElement(te,{entityType:"member",dimension:28,entityData:n,customClasses:"margin_right_75",featureReactMessages:!0,featureReactMemberProfileCard:!1}),r),s.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},i))}return r=Dt.t("No workspaces found matching \u201c{searchTerm}\u201d",{searchTerm:Object(b.a)(n,"displayValue")}),i=Dt.rt("Try <a>searching for another workspace</a> or searching for a teammate\u2019s workspaces.",null,({text:e,key:t,tag:a})=>"a"===a?s.a.createElement(z.a,{onClick:()=>this.onSearchAgainButtonClick(),key:t},e):{text:e}),s.a.createElement("div",{className:"align_center"},s.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},r),s.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},i))}renderSearchResults(e){return this.renderList({listProps:e,workspaceListKey:"searchResults"})}renderTitle(){const e=this.props.enterprise.name;return s.a.createElement("div",{className:"p-workspace_directory__title"},Dt.t("Workspaces at {name}",{name:Object(F.q)(e)}))}renderWorkspaceCard(e){if(Object(O.a)(e))return null;const t=!(Object(w.a)()||Object(q.a)()&&Object(H.b)()),a=!!Object(yt.c)("post_signin");return s.a.createElement(ot,{team:e,key:e.id,size:"small",onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,openDialog:this.openDialog,anchorPage:"workspace_directory",doLaunchInNewTab:t,doUpsertJoin:!0,preventAppLaunch:a})}renderWorkspaceDirectoryBody(){var e=this.state;const t=e.searchResults,a=e.hideOnboardingBanner,n=k()("p-workspace_directory__body",{"p-workspace_directory__body--has_banner":!a}),r={};return this.onboardingBannerHeight&&!a&&(r.transform=`translate3d(0, ${this.onboardingBannerHeight}px, 0)`),this.page?s.a.createElement(s.a.Fragment,null,this.renderOnboardingBanner(),s.a.createElement("div",{"data-js":"workspace_directory_body",className:n,style:r},s.a.createElement(I.a,{scrollElement:this.page,onScroll:this.onWindowScrollerScroll,ref:this.setWindowScrollerRef},e=>this.renderDirectoryLists(e)),!Object(b.a)(t,"loadingWorkspaces")&&this.renderWorkspaceRequestBanner())):null}renderWorkspaceDirectoryHeader(){var e=this.props;const t=e.user,a=e.userIsAdminOrOwner,n=e.enterprise;var r=this.state;const i=r.isMobileView,o=r.hasScrolledPastHeaderPane,l=r.selectedOption;return s.a.createElement(xt,{enterprise:n,displayManageOrgButton:a,displaySearchBar:this.headerPane&&o,"data-js":"workspace_directory_sticky_header",user:t,isMobileView:i,selectedSearchOption:Object(b.a)(l,"selectedOptionData"),onOptionSelected:this.onSelectOption,onClearHeaderInput:this.onClearHeaderInput})}renderWorkspaceDirectoryHeaderPane(){var e=this.props;const t=e.displayDirectoryInModal,a=e.user,n=k()("p-workspace_directory__header_pane",{margin_top_75:t});return s.a.createElement("div",{className:n,"data-js":"workspace_directory_header_pane",ref:this.setHeaderPaneRef},!t&&this.renderTitle(),!Object(A.wb)(a)&&this.renderWorkspaceSearchInput())}renderWorkspaceRequestBanner(){if(!this.props.allowWorkspaceRequest)return null;const e=Dt.rt("Your team might not be using Slack yet. You may ask your admins to <Link>create a new workspace</Link>.",null,({text:e})=>s.a.createElement(z.a,{onClick:this.openWorkspaceRequestForm},e));return s.a.createElement(Ft,{title:Dt.t("Can\u2019t find your workspace?"),description:e,className:"p-workspace_directory__banner p-workspace_directory__banner--workspace_request",onClose:C.a})}renderWorkspaceSearchInput(){const e=this.state.selectedOption;return s.a.createElement("div",{className:"p-workspace_directory__search"},s.a.createElement(Ke,{containerIdSelector:"workspace_directory",ref:this.setPageSearchRef,membersOnly:!1,triggerAction:this.onSelectOption,prepopulatedOption:Object(b.a)(e,"selectedOptionData")}))}renderYourWorkspaces(e){return this.renderList({listProps:e,workspaceListKey:"yourWorkspaces"})}render(){const e=this.props.displayDirectoryInModal;var t=this.state.allWorkspaces;const a=t.workspaces,n=t.loadingWorkspaces;var r=this.state.yourWorkspaces;const i=r.workspaces,o=r.loadingWorkspaces&&Object(O.a)(i),l=n&&Object(O.a)(a),c=o||l;return e?this.renderDirectoryInModal():s.a.createElement("div",{className:"p-workspace_directory__wrapper"},this.renderWorkspaceDirectoryHeader(),c&&this.renderInfiniteSpinner({renderFullPage:!0}),s.a.createElement("div",{className:"p-workspace_directory__page",onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()),s.a.createElement(V.a,null))}}workspace_directory_WorkspaceDirectory.displayName="WorkspaceDirectory",workspace_directory_WorkspaceDirectory.defaultProps=Bt;const Ht={enqueueToast:R.c,openModal:(...e)=>Object(l.e)(...e),closeModal:l.a,fetchRawMembersFromAPI:U.g,setUserPrefByApi:L.f,fetchEnterpriseTeamById:B.g,fetchDirectoryWorkspaces:B.f};var Wt=Object(S.b)((e,{userId:t})=>{const a=Object(T.g)(e)||{},n=Object(N.d)(e,t),s=Object(x.b)(e,"enterprise_team_creation_request"),r=s&&s.is_enabled&&!Object(A.wb)(n),i=Object(o.l)(e),l=Object(P.k)(e,"seen_onboarding_banner"),c=Object(D.a)({state:e});return{enterprise:a,user:p()({id:t},n),userIsAdminOrOwner:Object(A.fb)(e,n),allowWorkspaceRequest:r,displayDirectoryInModal:i,hasSeenOnboardingBanner:l,clogger:c,featureModernRequestWorkspaceDialog:Object(o.m)(e,"feature_modern_request_workspace_dialog")}},Ht,null,{areStatePropsEqual:(e,t)=>Object(W.a)(e,t,2)})(workspace_directory_WorkspaceDirectory);const Gt=new F.b("workspace_directory"),Kt=(r.default.shape({id:r.default.string,name:r.default.string,domain:r.default.string,icon:r.default.object,locale:r.default.string}).isRequired,r.default.bool,r.default.bool,r.default.bool,r.default.string,{isZeroWorkspaceGuest:!1,isZeroWorkspaceOrg:!1,isHiddenWorkspace:!1,directoryUrl:void 0});class workspace_directory_empty_state_WorkspaceDirectoryEmptyState extends n.PureComponent{constructor(e){super(e),this.redirectToDirectory=this.redirectToDirectory.bind(this)}redirectToDirectory(){const e=this.props.directoryUrl;window.open(`${e}/signin/find-workspaces`,"_self")}renderBody(){var e=this.props;const t=e.isZeroWorkspaceGuest,a=e.isZeroWorkspaceOrg,n=e.isHiddenWorkspace;return t?this.renderZeroWorkspaceGuestBody():a?this.renderZeroWorkspaceOrgBody():n?this.renderHiddenWorkspaceBody():null}renderFooter(){const e=this.props.enterprise;return s.a.createElement(z.a,{onClick:this.redirectToDirectory,className:"p-workspace_directory_empty_state__footer"},Gt.t("View all {orgName} workspaces",{orgName:Object(F.q)(e.name)}),s.a.createElement(G.b,{type:"chevron-right",key:"footer-chevron-icon",inline:!0}))}renderHeading(){var e=this.props;const t=e.enterprise,a=e.isHiddenWorkspace?Gt.t("No workspace found"):Gt.t("No available workspaces");return s.a.createElement("span",{className:"p-workspace_directory_empty_state__heading"},s.a.createElement("span",{className:"p-workspace_directory_empty_state__icon"},s.a.createElement(te,{entityType:"org",dimension:28,entityData:t,customClasses:"flex_none",featureReactMessages:!0})),a)}renderHiddenWorkspaceBody(){const e=this.props.enterprise;return s.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Gt.t("Either this workspace doesn\u2019t exist, or you do not have access to it. If you need to be added to a workspace, contact the {orgName} IT team.",{orgName:Object(F.q)(e.name)}))}renderZeroWorkspaceGuestBody(){const e=this.props.enterprise;return s.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Gt.t("You have a guest account with {orgName}, which means someone needs to invite you to join a workspace. You may want to get in touch with the person who helped you create an account.",{orgName:Object(F.q)(e.name)}))}renderZeroWorkspaceOrgBody(){const e=this.props.enterprise;return s.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Gt.t("{orgName} doesn\u2019t have any open workspaces that you can join. If you need to be added to a workspace, contact your manager or the {orgName} IT team.",{orgName:Object(F.q)(e.name)}))}render(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"p-workspace_directory_empty_state"},this.renderHeading(),this.renderBody()),this.props.isHiddenWorkspace&&this.renderFooter())}}workspace_directory_empty_state_WorkspaceDirectoryEmptyState.displayName="WorkspaceDirectoryEmptyState",workspace_directory_empty_state_WorkspaceDirectoryEmptyState.defaultProps=Kt;var Vt=Object(S.b)((e,{enterprise:t})=>({directoryUrl:Object(wt.a)(e,t.domain)}))(workspace_directory_empty_state_WorkspaceDirectoryEmptyState),zt=Wt;const $t=Object(i.b)("Opens the Find More Workspaces modal.",(e,t,a)=>{Object(o.m)(t(),"feature_sonic_find_more_wksps")&&e(Object(l.e)({element:s.a.createElement(zt,{userId:a}),name:"find-more-workspaces",isStackable:!0}))});$t.meta={name:"openFindMoreWorkspacesModal",key:"actionsOpenFindMoreWorkspacesModalOpenFindMoreWorkspacesModal",description:"Opens the Find More Workspaces modal."},$t.propTypes={userId:r.default.string.isRequired};t.a=$t},KU1P:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("XHGt"),i=a("aK/h"),o=a("kOzZ"),l=a("oHBb");i.default.node.isRequired,i.default.object.isRequired;function c({children:e,clogger:t}){return s.a.createElement(l.a.Provider,{value:t},e)}c.displayName="CloggerContextProvider",t.a=Object(r.b)(function(e){return{clogger:Object(o.a)({state:e})}})(c)},"Kdk+":function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a("U/ze");const s=Object(n.b)(e=>e&&e.flexpaneFocus&&e.flexpaneFocus.focusKey);s.meta={name:"getFocusKey",key:"flexpaneFocusStoreFlexpaneFocusSelectorsGetFocusKey"}},KrOh:function(e,t,a){},L0DF:function(e,t,a){},L5SX:function(e,t,a){},"LAi+":function(e,t,a){"use strict";var n=a("aLpA");let s;t.a=(()=>{if(s)return s;const e=Object.keys(n.l).map(e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"));return s=new RegExp(`(^|\\s)(${e.join("|")})(?=$|[\\s|\\?\\.,!])`,"g")})},LCkN:function(e,t,a){},LFzE:function(e,t,a){},LWrH:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("jo6Y"),i=a.n(r),o=a("q1tI"),l=a.n(o),c=a("XHGt"),d=a("aK/h"),u=a("g5qt"),p=a("Tc5z"),h=a("x3CK"),m=a("XL7r"),b=a("yHhI");d.default.object.isRequired,d.default.any.isRequired,d.default.string,d.default.string;const f={keyboardPref:void 0,keyboardLayout:void 0};class WithKeyboardLocale extends o.Component{constructor(e){if(super(e),void 0===e.keyboardLayout){const e=()=>{if(Object(u.eb)()){const e=Object(u.ob)().currentKeyboardLayout;return Object(h.d)(e)}return null};this.state={legacyKeyboardLayout:e()},Object(u.eb)()&&(this.desktopKeyboardLayoutDisposable=Object(u.wb)(()=>this.setState(()=>({legacyKeyboardLayout:e()}))))}}componentWillUnmount(){this.desktopKeyboardLayoutDisposable&&(this.desktopKeyboardLayoutDisposable.dispose?this.desktopKeyboardLayoutDisposable.dispose():this.props.logger.warn("WITH-KB-LOCALE","Cannot unsubscribe from keyboard layout changes"))}render(){var e=this.props;const t=e.keyboardLayout,a=e.WrappedComponent,n=e.keyboardPref,r=(e.logger,i()(e,["keyboardLayout","WrappedComponent","keyboardPref","logger"]));let o=(void 0!==t?t:this.state.legacyKeyboardLayout)||n;return"en-US"===o&&(o="us"),l.a.createElement(a,s()({keyboardLocale:o},r))}}WithKeyboardLocale.displayName="WithKeyboardLocale",WithKeyboardLocale.defaultProps=f,t.a=function(e){return Object(c.b)(function(t){const a=Object(p.f)(t,"keyboardLayout");return{logger:Object(b.a)({state:t}),keyboardPref:Object(m.k)(t,"keyboard"),WrappedComponent:e,keyboardLayout:a&&Object(h.d)(a)}})(WithKeyboardLocale)}},Lpwv:function(e,t,a){},LsCE:function(e,t,a){},Lts7:function(e,t,a){"use strict";var n=a("XfeM"),s=a("aK/h"),r=a("brL+"),i=a("SZMM"),o=a("Zr7G"),l=a("IEWa"),c=a("yHhI");const d={},u=Object(n.b)("launch workflow builder",(e,t,{subPath:a="",source:n=""}={})=>{const s=t();if(Object(l.b)(s)){const t=Object(r.b)(s),l=Object(o.c)({state:s}),p=Object(c.a)({label:"WORKFLOW-BUILDER",state:s}),h="/"===a.charAt(0)?a.slice(1):a,m=d[t];if(m&&m.focus&&m.isClosed&&!m.isClosed())try{return m.focus(),l.count(n?`workflow_builder_focused_from_client__${n}`:"workflow_builder_focused_from_client"),void p.debug("Workflow Builder window focused")}catch(u){p.error("Unable to focus existing Workflow Builder window. Will try opening a new one.",u)}try{const a=e(Object(i.f)({pathname:`/workflow-builder/${t}/${h}`,windowOptions:{height:700,width:1024}}));d[t]=a,l.count(n?`workflow_builder_launched_from_client__${n}`:"workflow_builder_launched_from_client"),p.debug("Workflow Builder window opened")}catch(u){p.error("Unable to open new Workflow Builder window.",u)}}});u.meta={name:"launchWorkflowBuilder",key:"actionsLaunchWorkflowBuilderLaunchWorkflowBuilder",description:"launch workflow builder"},u.propTypes={subPath:s.default.string,source:s.default.string},t.a=u},MIIS:function(e,t,a){"use strict";var n=a("TOkS");t.a=n.a},MYD1:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("XHGt"),o=a("/m+M"),l=a("BUzq"),c=a("9cNQ"),d=a("HOkk"),u=a("nNoG"),p=a("hQtm");const h=new u.b("channel_details"),m=(r.default.object.isRequired,r.default.string.isRequired,r.default.func.isRequired,r.default.func.isRequired,({pin:e,channelId:t,unpinMessage:a,pinsRemove:r})=>{const i=Object(n.useCallback)(()=>{const n={channelId:t,reason:"pins-list-remove"};switch(e.type){case l.a.MESSAGE:n.ts=e.ts;break;case l.a.FILE:n.fileId=e.id;break;case l.a.FILE_COMMENT:n.fileCommentId=e.id}e.type===l.a.MESSAGE?a(n):r(n)},[e,t,a,r]);return Object(o.a)().featureM11nChannelDetails?s.a.createElement(d.a,{title:h.t("Remove pinned item"),goButtonText:h.t("Remove pinned item"),onGo:i},s.a.createElement("p",null,h.t("Are you sure you want to remove this pinned item?")),s.a.createElement(p.a,{pin:e})):null});m.displayName="PinnedItemRemoveConfirm";const b={unpinMessage:(...e)=>Object(l.q)(...e),pinsRemove:(...e)=>Object(c.c)(...e)};t.a=Object(i.b)(null,b)(m)},Mhgg:function(e,t,a){e.exports=a.p+"messages-be9654a.png"},MjS2:function(e,t,a){"use strict";a.d(t,"c",function(){return x}),a.d(t,"d",function(){return L}),a.d(t,"a",function(){return F}),a.d(t,"b",function(){return D}),a.d(t,"f",function(){return B}),a.d(t,"h",function(){return q}),a.d(t,"g",function(){return H}),a.d(t,"m",function(){return W}),a.d(t,"i",function(){return G}),a.d(t,"k",function(){return K}),a.d(t,"l",function(){return V}),a.d(t,"e",function(){return z}),a.d(t,"j",function(){return $});var n=a("QbLZ"),s=a.n(n),r=a("NFsq"),i=a("vFlG"),o=a("ifKl"),l=a("q1tI"),c=a.n(l),d=a("nNoG"),u=a("WhMD"),p=a("kOzZ"),h=a("t85p"),m=a("lhZz"),b=a("rWF5"),f=a("KXvl"),_=a("hjTk"),g=a("XKj7"),y=a("vRZS"),O=a("Smdl"),C=a("toaU"),v=a("kLJo"),E=a("sDWr"),k=a("g5qt"),S=a("brL+"),j=a("yHhI"),I=a("5mKg"),w=a("od5y"),T=a("IY6O"),N=a("s5Is");const A=new d.b("workspace_directory"),R="ENTERPRISE_DISCOVER_WORKSPACES",M="WORKSPACE_DIR",P=Object(j.b)(),x=()=>window.innerWidth<=480,L=()=>window.innerWidth<=1024,F={dialog:"dialog",largeCard:"largeCard",smallCard:"smallCard"},D="SHOW_ALL";function B(e,{context:t=F.smallCard,featureZeroWorkspaceOnboarding:a=!0}){if(!a)return null;const n=function(e){if(!e)return{};const t=A.t("Requires an invite to join");return{requestCardLarge:A.t("Awaiting admin approval to join"),requestDialog:e=>A.t("Requested access on {requestDate}",{requestDate:Object(u.a)(e)}),inviteOnlyWithLockIcon:c.a.createElement("span",null,c.a.createElement(w.a,{type:"lock",key:"private-icon",className:"nudge_bottom_2"}),t),inviteOnly:t}}(a),s=e.date_requested_join,r=e.discoverable;return e.is_member?null:"closed"===r&&s?t===F.largeCard?n.requestCardLarge:n.requestDialog(s):"invite_only"===r?t===F.largeCard?n.inviteOnlyWithLockIcon:n.inviteOnly:null}function U(e,t){let a=document.createElement("a");a.href=t;const n=`${a.protocol}//${e.domain}.${a.host}/`;return a=null,n}function q(e){return Object(i.a)(e,"profile")||Object(i.a)(e,"enterprise_user")}function H({type:e,teamName:t,errorType:a}){if("success"===e)return A.rt("Request to create <strong>{teamName}</strong> sent! You\u2019ll be notified once it\u2019s reviewed.",{teamName:Object(d.q)(t)});const n={name_taken:A.rt("Request failed: The name <strong>{teamName}</strong> is already taken by another workspace.",{teamName:Object(d.q)(t)}),name_is_empty:A.t("Request failed: A name is required."),name_too_long:A.t("Request failed: The name you provided is too long."),reason_too_long:A.t("Request failed: The reason you provided is too long."),unknown:A.rt("Request failed: The response error was <strong>{error}</strong>.",{error:a||"unknown"})};return n[a]||n.unknown}function W(e){if(e)if(Object(b.w)("2.8"))P.info(M,`switchToTeamById - Calling legacyDisplayTeamById('${e}') in the SSB.`),Object(k.jb)(e);else{P.info(M,`switchToTeamById - SSB < 2.8, fallback to using an iframe to open ${e}`);const t=document.createElement("iframe"),a=`slack://open?team=${e}`;t.src=a,document.body.appendChild(t),setTimeout(()=>t.remove(),1e3)}}const G=(e,{user:t={},team:a={},anchorPage:n,doLaunchInNewTab:i=!1,onActionResolve:l=o.a,channelRedirect:c=null,postLaunchAction:d=null,userIdFromURL:u=null,windowOpener:j})=>{if(Object(O.a)())return((e,t,a,n)=>{const s=t&&"open_profile"===t&&a,r=s?E.o:C.a,i=s?{teamId:e.id,memberId:a}:{teamId:e.id};if(!Object(f.b)()){const t=Object(v.i)(r,i);n&&(n.location.href=t);const a=Object(f.a)(e.subdomain)||`_team_${e.id}`;return void Object(_.a)(t,a)}const o=Object(m.getStateForClientStore)();if(Object(T.getWorkspacesMeta)(o)[e.id])Object(v.g)(r,i,{reason:"find-more-workspaces"});else{P.info(M,`fetchAuthAndSetFocusedWorkspace - for team ${e.id}`);const t=!1;Object(m.dispatchForClientStore)(Object(N.fetchAuthAndSetFocusedWorkspace)({teamId:e.id,avoidRedirectLoops:t}))}})(a,d,u,j),l({workspace:a});const w=Object(h.f)(e,"signin_url"),A=Object(h.f)(e,"is_ssb_browser_signin"),x=Object(p.a)({state:e});let L=`${U(a,w)}messages`;if(function({teamId:e,anchorPage:t,fromWhere:a="",clogger:n}){const r={anchor_page:t,entity_key:"launch_workspace",target_team_id:e,tracking_code:a};n.track(R,s()({},r,{contexts:{ui_context:{action:"click",action_status:1}}}))}({teamId:a.id,anchorPage:n,clogger:x}),A&&(L=`${U(a,w)}ssb/signin_redirect`),c&&(L=`${L}/${c}`),d&&"open_profile"===d&&u&&(L=`${L}/team/${u}`),Object(h.l)(e)&&Object(S.b)(e)===a.id)return P.info(M,`onWorkspaceLaunch - User has team ${a.id} to launch currently open. Do nothing and resolve the action (which closes the modal).`),l({workspace:a});if(Object(y.a)()){P.info(M,"onWorkspaceLaunch - Detected that user is logged in via the SSB.");let e=Object(k.qb)();P.info(M,`onWorkspaceLaunch - Successfully called legacyGetSignedInTeamIds and returned ${e}`);const n={name:t.name,id:t.id,team_id:a.id,team_name:Object(I.e)(a),team_url:L};if(Object(r.a)(e,a.id)){if(P.info(M,`onWorkspaceLaunch - User already signed into workspace '${a.id}'`),Object(r.a)(e,a.id)){let e;Object(b.w)("3.0")?(P.info(M,`onWorkspaceLaunch - SSB >= 3.0, attempting to determine if team ${a.id} has a valid session.`),W(a.id),(e=Object(k.lb)())?e.hasValidSession?P.info(M,`onWorkspaceLaunch - currentTeam.hasValidSession for ${a.id}. Work done.`):(P.info(M,`onWorkspaceLaunch - current session NOT valid. Signing into ${a.id}.`),Object(k.j)(n)):(P.info(M,`onWorkspaceLaunch - currentTeam not found. Calling didSignIn() for ${a.id}.`),Object(k.j)(n))):(P.info(M,`onWorkspaceLaunch - SSB < 3.0, cannot determine session state. Calling didSignIn() for ${a.id}.`),Object(k.j)(n))}}else P.info(M,`onWorkspaceLaunch - calling didSignIn on ${JSON.stringify(n)}`),Object(k.j)(n),e=Object(k.qb)();l({workspace:a}),P.info(M,`onWorkspaceLaunch - Removing team from enterprise excluded team pref ${a.id}`),Object(g.g)(a.id)}else if(i){if(j){j.location.href=L}else window.open(L,"_blank");l({workspace:a})}else window.location=L;return null};function K({trackingCode:e="",clogger:t}){const a={anchor_page:"workspace_directory",tracking_code:e};t.track(R,s()({},a,{contexts:{ui_context:{action:"impression"}}}))}function V({teamId:e,trackingCode:t,clogger:a}){const n={entity_key:"workspace_detail",anchor_page:"workspace_directory",target_team_id:e,tracking_code:t};a.track(R,s()({},n,{contexts:{ui_context:{action:"impression",action_status:1}}}))}const z=({anchorPage:e,numSearchResults:t,clogger:a})=>{const n={},r={};n.action="impression",n.action_status=t?1:2,n.ui_element="SEARCH_BAR",r.entity_key="search_workspaces",r.anchor_page=e,r.num_search_results=t,a.track(R,s()({},r,{contexts:{ui_context:n}}))},$=({searchType:e="workspace",clogger:t})=>{const a={action:"impression",ui_element:"workspace"===e?"DIRECTORY_SEARCH_FREE":"DIRECTORY_SEARCH_BY_COLLEAGUE"};t.track(R,s()({},{anchor_page:"workspace_directory",entity_key:"search_workspaces"},{contexts:{ui_context:a}}))}},"Ms/R":function(e,t,a){},Mv5p:function(e,t,a){"use strict";var n=a("oTSI");const s=Object(n.a)(()=>{const e=document.createElement("div");e.id="__sb",e.style.overflow="scroll",e.style.width="40px",e.style.height="40px",e.style.position="absolute",e.style.left="-40px",e.innerHTML="&shy;<style>#__sb::-webkit-scrollbar {width:10px;}</style>",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth==10;return document.body.removeChild(e),t});t.a=s},MvLI:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return i});var n=a("lhZz");let s;function r(e){s=e}function i(){return Object(n.getStoreInstanceByTeamId)(s)}},Mzw9:function(e,t,a){},"N/g+":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return r});var n=a("ROZo");Object(n.b)("TS.ui.needToBlockAtChannelKeyword"),Object(n.b)("TS.ui.needToShowAtChannelWarning");const s=Object(n.b)("TS.ui.showVersionInfo"),r=Object(n.b)("TS.ui.teamSelectionChanged")},N391:function(e,t,a){},N5rH:function(e,t,a){},NPpR:function(e,t,a){"use strict";var n=a("cdPG"),s=a("hbEN"),r=a("ifKl"),i=a("nNoG"),o=a("aK/h"),l=a("q1tI"),c=a.n(l),d=a("eglI"),u=a("XHGt"),p=a("tn36"),h=a("od5y"),m=a("XLFM"),b=a("Go8C"),f=a("YYb+"),_=a("7ARk"),g=a("Smdl"),y=a("x91h");var O=a("V18M"),C=(a("Tjgr"),a("RX/a"));const v=new i.b("search"),E=(o.default.bool.isRequired,o.default.bool.isRequired,o.default.bool,o.default.bool.isRequired,o.default.string.isRequired,o.default.bool,o.default.func,o.default.func,o.default.func,o.default.func,o.default.func.isRequired,o.default.func.isRequired,o.default.number,{autoFocus:!1,queryIsUserGenerated:!1,onBlur:r.a,onEnter:r.a,onEscape:r.a,onFocus:r.a,autocompleteSelectedIndex:void 0});let k=null,S=0;class search_input_box_SearchInputBox extends l.Component{constructor(e){super(e),this.texty=null,Object(p.a)(this,["onClickClear","getTextyString","onEnter","onUserQueryChange","setTextyRef","updateDisplayQuery"]),this.queryHasChanged=!1,this.queryHasBeeenSubmitted=!1,this.onUserInput=Object(s.a)(this.onUserInput,100),this.placeholderCopy=this.lazyInitializeShuffledPlaceholderCopy()}componentDidMount(){var e=this.props;const t=e.autoFocus,a=e.usePrimarySearch,n=e.isSearchAutocompleteOpen;if(t||a&&n){const e=window._searchAutocompleteCatch;if(e){delete window._searchAutocompleteCatch;const t=e.value;this.texty.value(this.texty.value()+t),e.parentNode.removeChild(e)}this.texty.setCursorAtEnd()}}shouldComponentUpdate(e){return this.props.usePrimarySearch&&e.isSearchAutocompleteOpen!==this.props.isSearchAutocompleteOpen||this.props.displayQuery!==e.displayQuery||this.props.autocompleteSelectedIndex!==e.autocompleteSelectedIndex}componentDidUpdate(e){this.texty&&this.props.usePrimarySearch&&!e.isSearchAutocompleteOpen&&this.props.isSearchAutocompleteOpen&&this.texty.focus(),this.props.queryIsUserGenerated||e.displayQuery===this.props.displayQuery||this.updateDisplayQuery()}onUserInput(){this.queryHasChanged?(this.queryHasChanged=!1,this.props.searchInputChanged({textyString:this.getTextyString()}).then(()=>{this.queryHasBeeenSubmitted&&(this.props.onEnter(),this.queryHasBeeenSubmitted=!1)})):this.queryHasBeeenSubmitted&&(this.props.onEnter(),this.queryHasBeeenSubmitted=!1)}onUserQueryChange(){this.queryHasChanged=!0,this.onUserInput()}onEnter(){null!==this.props.autocompleteSelectedIndex&&(this.queryHasBeeenSubmitted=!0,this.onUserInput())}onClickClear(){this.props.clearSearchInput(),this.texty&&this.texty.focus()}setTextyRef(e){const t=!(!e||!e.getWrappedInstance);this.texty=t?e.getWrappedInstance():e}getTextyString(){return this.texty?this.texty.value().replace(/<@([A-Z0-9a-z]+)\|([^>]+)>/g,(e,t,a)=>`<@${t}|${Object(y.a)(a)}>`):this.props.displayQuery}lazyInitializeShuffledPlaceholderCopy(){const e=[v.t("Search for comments, asides, eurekas, and more"),v.t("Search for messages, replies, or even insightful asides"),v.t("Search for files, facts, figures, and stats"),v.t("Search for files, for people, for half-remembered fragments of conversation"),v.t("Search for a missing link"),v.t("Search for whatever; let\u2019s find it together"),v.t("Search discussions, directories, data, and more"),v.t("Search messages, files, around corners, under rugs, etc."),v.t("Search all across Slack"),v.t("Search far and wide"),v.t("Search high and low"),v.t("Search the Log of All Conversation and Knowledge"),v.t("Search because it\u2019s faster than scrolling"),v.t("Type what you want to search for. Slack will do the rest."),v.t("What do you want to search for today?"),v.t("Surely that\u2019s around here somewhere\u2026"),v.t("You\u2019re digging in the right place"),v.t("We\u2019re all searching, in a way. You can search Slack, specifically, here."),v.t("Input search. Beep boop."),v.t("Search for something. Anything. You have the window open now anyway."),v.t("Delve into your archives, seize upon the answers. Rejoice.")];return null===k&&(k=Object(n.a)(e.map((e,t)=>t))),S=(S+1)%k.length,e[k[S]]}focusTexty(){this.texty&&this.texty.focus()}updateDisplayQuery(){this.texty&&this.props.displayQuery!==this.getTextyString()&&this.texty.value(this.props.displayQuery)}render(){const e=v.t("Search"),t=this.props.displayQuery?"c-search__input_box__clear":"c-search__input_box__clear c-search__input_box__clear__hidden",a={autocomplete:"list",owns:"c-search_autocomplete__suggestion_list",expanded:!0,activedescendant:"number"==typeof this.props.autocompleteSelectedIndex?Object(C.b)(this.props.autocompleteSelectedIndex):void 0};let n;return n=this.placeholderCopy?this.placeholderCopy:v.t("Search messages, files, and channels",{fallbackHash:"2c741ca32c78642194b2b88f355b5ebb8d3ea849"}),c.a.createElement("div",{className:"c-search__input_box","data-qa":"search_input_box"},c.a.createElement(h.b,{type:"search-medium",className:"c-search__input_box__icon"}),c.a.createElement(d.default,{className:"c-search__input_box__input",modules:{tabcomplete:{completers:[]},keyboard:{useFormattingCommands:!1}},ref:this.setTextyRef,ariaLabel:e,ariaDescribedBy:"footer-instructions",unsafeAriaProps:a,initialText:this.props.displayQuery,placeholder:n,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onEnter:this.onEnter,onTextChange:this.onUserQueryChange,onEscape:this.props.onEscape,isSingleLine:!0,focusOnMount:this.props.autoFocus,useLegacyCreate:!this.props.isSonic,isJumbomojiEnabled:!1,showMentionTooltips:!1,enableBroadcastKeywords:!1,useFocusRing:!1,"data-qa":"focusable_search_input"}),c.a.createElement(m.c,{className:t,onClick:this.onClickClear,label:v.t("Clear"),"data-qa":"search_input_clear"},v.t("Clear")))}}search_input_box_SearchInputBox.displayName="SearchInputBox",search_input_box_SearchInputBox.defaultProps=E;const j={searchInputChanged:(...e)=>Object(b.f)(...e),clearSearchInput:(...e)=>Object(_.a)(...e)};t.a=Object(u.b)(e=>({usePrimarySearch:Object(O.a)(e),isSearchAutocompleteOpen:Object(f.e)(e),displayQuery:Object(b.b)(e),queryIsUserGenerated:Object(b.c)(e),autocompleteSelectedIndex:Object(f.c)(e),isSonic:Object(g.a)(e)}),j,null,{withRef:!0})(search_input_box_SearchInputBox)},NPry:function(e,t,a){},NYp8:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("q1tI"),s=a("UF3u");function r(e,t=[]){const a=Object(n.useRef)(),r=Object(n.useRef)(),i=Object(n.useRef)();Object(s.a)(a.current,t)||(a.current=t,r.current=e,r.current()),Object(n.useEffect)(()=>{return function e(){let t=60-(new Date).getSeconds();t<5&&(t=5),i.current=setTimeout(()=>{r.current(),e()},1e3*t)}(),()=>{clearTimeout(i.current)}},[])}},Nc5J:function(e,t,a){"use strict";var n=a("XfeM"),s=a("S3eg"),r=a("vmJv"),i=a("zRJ2");const o=Object(n.b)("Switches to the All Unreads view",(e,t)=>{e("Punreads"===Object(r.a)(t())?Object(i.b)():Object(s.a)({id:"Punreads"}))});o.meta={name:"openUnreadsView",key:"actionsOpenUnreadsViewOpenUnreadsView",description:"Switches to the All Unreads view"},t.a=o},NrNc:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"a",function(){return o});var n=a("F294"),s=a("uvIC"),r=a("P9LH");const i=(e,t)=>{const a=t.file||Object(n.a)(t.files),i=Object(s.c)(e,a);return"email"===Object(r.p)(i)?i:null},o=(e,t)=>!!i(e,t)},O6kw:function(e,t,a){"use strict";var n=a("c8Bs"),s=a("Z0Cl"),r=a("wBxZ"),i=a("gSGL"),o=a("q1tI"),l=a.n(o),c=a("aK/h"),d=a("XfeM"),u=a("dhvi"),p=a("h9PG"),h=a("8Duq"),m=a("P9LH"),b=a("aLpA"),f=a("syB0"),_=a("ifKl"),g=a("oT5T"),y=a("nNoG");const O=new y.b("files");function C({proceedToNextDialog:e,disableFileUploadsPref:t}){const a=O.t("Uploads disabled");let n="";"disable_all"===t&&(n=O.t("At the request of your administrator, file uploads have been disabled on this workspace.")),"disable_all_except_images"===t&&(n=O.t("At the request of your administrator, only images can be uploaded to this workspace."));return l.a.createElement(g.a,{title:a,onGo:()=>Object(f.a)(()=>{e()})},l.a.createElement("p",null,n))}C.displayName="FileUploadsDisabledAlert",C.defaultProps={proceedToNextDialog:_.a,disableFileUploadsPref:""};var v=C;const E=new y.b("file_upload");function k({proceedToNextDialog:e,excludedFiles:t,goodFiles:a}){let n,s,r,i,o,c,d="";const u=t.length+a.length;t.length&&(n=[],i="",c="",n=t.map(e=>l.a.createElement("li",{key:e.name},l.a.createElement("strong",null,e.name))),t.length>1?(s=t.length===u?E.t("All files unsupported"):E.t("Some files unsupported"),o=E.t("Try uploading a .zip version of these files instead."),i=l.a.createElement("ul",null,n)):1===t.length&&(s=E.t("File unsupported"),o=E.t("Try uploading a .zip version of this file instead.")),a.length>1?c=E.t("(Don\u2019t worry, your other files are next.)"):1===a.length&&(c=E.t("(Don\u2019t worry, your other file is next.)")),r=1===t.length?E.rt("Sorry, {excluded_file} is a type of file not supported by Slack",{excluded_file:l.a.createElement("strong",null,t[0].name)}):t.length===u?E.t("Sorry, none of those file types are supported by Slack."):E.t("Sorry, some of those file types are not supported by Slack."),d=l.a.createElement("div",null,l.a.createElement("p",null,r),i,l.a.createElement("p",null,o),l.a.createElement("p",null,c)));return l.a.createElement(g.a,{title:s,onGo:()=>{Object(f.a)(()=>{e()})}},d)}k.displayName="FileUploadUnsupportedAlert",k.defaultProps={proceedToNextDialog:_.a,goodFiles:[],excludedFiles:[]};var S=k,j=a("Lnf+");const I=new y.b("file-upload"),w={SINGLE:"single",MULTIPLE:"multiple",ALL:"all"};function T({type:e,proceedToNextDialog:t}){const a=I.t("File too large");let n="";n=e===w.ALL?I.t("All of those files are too large and cannot be uploaded. The limit is {limit}.",{limit:Object(j.a)(b.ab)}):e===w.SINGLE?I.t("That file is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(j.a)(b.ab)}):I.t("We\u2019ll upload what we can, but one or more of those files is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(j.a)(b.ab)});const s=e===w.MULTIPLE?()=>{Object(f.a)(()=>{t()})}:_.a;return l.a.createElement(g.a,{title:a,onGo:s},l.a.createElement("p",null,n))}T.displayName="FileUploadSizeAlert",T.defaultProps={type:w.SINGLE,proceedToNextDialog:_.a};var N=T,A=a("ns4K"),R=a("qafc");const M=new y.b("multi_file_upload"),P=Object(d.b)("renders a toast with error message for uploading too many files",e=>{const t=M.t("You can only upload {count, plural, =1 {# file} other {# files}} at a time.",{count:b.z}),a=l.a.createElement(R.b,{icon:"warning",iconClassName:"sk_reddish_orange"},l.a.createElement("span",null,t));setTimeout(()=>e(Object(A.c)({element:a})),500)});P.meta={name:"renderFileLimitToast",key:"componentsMultiFileUploadUtilityRenderFileLimitToastRenderFileLimitToast",description:"renders a toast with error message for uploading too many files"};var x=P;const L=Object(d.b)("filters invalid files before they can be uploaded",(e,t,{selectedFiles:a,channelId:o,threadTs:c}={})=>(({dispatch:e,getState:t,files:a}={})=>{if(!a)return Promise.resolve();const r=Object(n.a)(a,e=>Object(m.F)(e));return new Promise(n=>{const i=Object(p.a)(t(),"disable_file_uploads");if("disable_all"!==i||r){if("disable_all_except_images"===i&&!r){const t=Object(s.a)(a,e=>Object(m.N)(e));if(t.length!==a.length)return void e(Object(u.e)({element:l.a.createElement(v,{disableFileUploadsPref:i,proceedToNextDialog:()=>n(t)}),isStackable:!0}))}n(a)}else e(Object(u.e)({element:l.a.createElement(v,{disableFileUploadsPref:i,proceedToNextDialog:()=>n()}),isStackable:!0}))})})({dispatch:e,getState:t,files:a}).then(t=>(({dispatch:e,files:t}={})=>t?new Promise(a=>{Object(m.S)(t,t=>{t.excludedFiles.length?e(Object(u.e)({element:l.a.createElement(S,{goodFiles:t.goodFiles,excludedFiles:t.excludedFiles,proceedToNextDialog:()=>a(t.goodFiles)}),isStackable:!0})):a(t.goodFiles)})}):Promise.resolve())({dispatch:e,files:t})).then(t=>(({dispatch:e,files:t}={})=>t?new Promise(a=>{const n=t.filter(e=>Object(i.a)(e)||void 0===e.size||e.size<=b.ab);if(n.length<t.length)return 1===t.length?(e(Object(u.e)({element:l.a.createElement(N,{type:w.SINGLE}),isStackable:!0})),void a()):n.length?void e(Object(u.e)({element:l.a.createElement(N,{type:w.MULTIPLE,proceedToNextDialog:()=>a(n)}),isStackable:!0})):(e(Object(u.e)({element:l.a.createElement(N,{type:w.ALL}),isStackable:!0})),void a());a(n)}):Promise.resolve())({dispatch:e,files:t})).then(a=>(({dispatch:e,getState:t,files:a,channelId:n,threadTs:s}={})=>{if(!a)return Promise.resolve();const i=t(),o=Object(h.f)(i,{channelId:n,threadTs:s})||[];if(o.length+a.length>b.z){e(x());const t=b.z-o.length,n=Object(r.a)(a,t);return Promise.resolve(n)}return Promise.resolve(a)})({dispatch:e,getState:t,files:a,channelId:o,threadTs:c})));L.meta={name:"filterFilesForUpload",key:"actionsFilterFilesForUploadFilterFilesForUpload",description:"filters invalid files before they can be uploaded"},L.propTypes={selectedFiles:c.default.array.isRequired,channelId:c.default.string,threadTs:c.default.string};t.a=L},OISv:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("ifKl"),i=a("q1tI"),o=a.n(i),l=a("aK/h"),c=a("TSYQ"),d=a.n(c),u=a("b7Ww"),p=a("1Uzj"),h=a("RhZ7"),m=a("TOh8"),b=a("0dpy"),f=a("BRQ/"),_=a("0gqo"),g=a("rUi3"),y=a("8CL7"),O=a("VrmM"),C=a("Aeia"),v=a("gl+W");a("XThT"),a("bj+V");const E=Object(p.a)(u.a),k=(l.default.object.isRequired,l.default.string,l.default.bool,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.string,l.default.string,{className:void 0,showSender:!0,onFileClick:r.a,timestampClickable:!0,timestampFull:!0,timestampRelative:!1,flexOrigin:"activity",flexOriginId:void 0,blocksContainerContext:void 0});class CondensedMessage extends i.PureComponent{render(){var e=this.props;const t=e.className,a=e.msg,n=e.showSender,r=e.onFileClick,i=e.timestampClickable,l=e.timestampFull,c=e.timestampRelative,u=e.flexOrigin,p=e.flexOriginId,k=e.blocksContainerContext,S=n&&o.a.createElement("div",{className:"c-message_kit__condensed_message_header"},o.a.createElement(h.a,{msg:a,size:16}),"\xa0",o.a.createElement(m.a,{msg:a,className:"c-message_kit__condensed_message_sender"}),o.a.createElement(b.a,{msg:a,clickable:i,full:l,relative:c}));return o.a.createElement(v.a,{className:d()("c-message_kit__message","c-message_kit__condensed_message",t)},S,o.a.createElement(y.a,{className:"c-message_kit__condensed_message_text",msg:a,isSingleLine:!0}),o.a.createElement(O.a,{msg:a,blockLimit:1,blocksContainerContext:k}),o.a.createElement(C.b,{msg:a,renderFile:e=>o.a.createElement(E,s()({},e,{className:d()("c-message_kit__condensed_message_file",{"c-message_kit__condensed_message_file--isolated":!a.text}),onClick:r}))}),o.a.createElement("div",{className:"c-message_kit__condensed_message_meta"},o.a.createElement(f.a,{msg:a,className:"c-message_kit__condensed_message_reactions"}),o.a.createElement(_.a,{msg:a,flexOrigin:u,flexOriginId:p})),o.a.createElement(g.a,{msg:a,flexOrigin:u,flexOriginId:p}))}}CondensedMessage.displayName="CondensedMessage",CondensedMessage.defaultProps=k,t.a=CondensedMessage},OX5w:function(e,t,a){"use strict";a.d(t,"h",function(){return m}),a.d(t,"f",function(){return b}),a.d(t,"g",function(){return f}),a.d(t,"e",function(){return _}),a.d(t,"d",function(){return y}),a.d(t,"j",function(){return O}),a.d(t,"i",function(){return C}),a.d(t,"c",function(){return v}),a.d(t,"b",function(){return E});var n=a("QbLZ"),s=a.n(n),r=a("AFNo"),i=a("1YQg"),o=a("k55U"),l=a("rWF5"),c=a("vRZS"),d=a("or6P"),u=a("RgZo"),p=a("zA5J"),h=a("+yrr");const m=Object(r.a)("Update part or all of the call");m.meta={name:"update",key:"appCallsReduxActiveCallStoreUpdate",description:"Update part or all of the call"};const b=Object(r.a)("Update the active call token");b.meta={name:"setServerToken",key:"appCallsReduxActiveCallStoreSetServerToken",description:"Update the active call token"};const f=Object(r.a)("Update the elapsed call time");f.meta={name:"tickCallTime",key:"appCallsReduxActiveCallStoreTickCallTime",description:"Update the elapsed call time"};const _=Object(r.a)("Store gleaned contextual information from the url");_.meta={name:"setInitialContext",key:"appCallsReduxActiveCallStoreSetInitialContext",description:"Store gleaned contextual information from the url"};const g=Object(r.d)({},{hasJoined:!1,hasSelfConnected:!1,hasRemotePeerConnected:!1,hasVideoBeenEnabled:!1,elapsedDisplayTime:Object(u.a)(0)},{storeKey:"activeCall",persistenceEnabled:!1}).on(_,(e,{callOrConversationId:t,inviterUserId:a})=>{const n=Object(i.j)(t);return Object(c.a)()!==Object(l.v)()&&Object(p.a)().warn("utility/is-ssb does not agree with utility/environment"),Object(c.a)()!==Object(d.a)()&&Object(p.a)().warn("utility/is-ssb does not agree with isDesktopFn"),s()(s()({},e),{id:n?t:void 0,conversationId:n?void 0:t,incomingInviterUserId:a,incomingInviteResponse:Object(l.v)()?void 0:i.c.Accept})}).on(m,(e,t)=>s()(s()({},e),t)).on(f,e=>e.callStartedTimestamp?s()(s()({},e),{elapsedDisplayTime:Object(u.a)(Date.now()-1e3*e.callStartedTimestamp)}):e).on(b,(e,{token:t,tokenExpiry:a})=>e.server?s()(s()({},e),{server:s()(s()({},e.server),{token:t,tokenExpiry:a})}):(Object(o.f)("Cannot set server token without a server"),e)).on(h.O,(e,t)=>s()(s()({},e),{hasVideoBeenEnabled:e.hasVideoBeenEnabled||!!(t.isCameraEnabled||Object(h.D)(t)&&t.isScreenshareEnabled),hasSelfConnected:e.hasSelfConnected||!(!Object(h.D)(t)||!t.isConnected)})).on(h.I,(e,t)=>s()(s()({},e),{hasRemotePeerConnected:e.hasRemotePeerConnected||!!t.isConnected})).on(h.J,(e,t)=>s()(s()({},e),{hasVideoBeenEnabled:e.hasVideoBeenEnabled||!!t.isScreenshareEnabled}));t.a=g;const y=e=>!!e.activeCall.incomingInviterUserId&&!e.activeCall.incomingInviteResponse,O=e=>!!e.activeCall.incomingInviterUserId,C=e=>!!e.activeCall.conversationId&&Object(i.m)(e.activeCall.conversationId),v=e=>e.activeCall.id,E=e=>e.activeCall.hasSelfConnected&&e.activeCall.hasRemotePeerConnected},OrkY:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"route",function(){return Ke.nc}),a.d(n,"error",function(){return Ve.a}),a.d(n,"accessibility",function(){return Ke.a}),a.d(n,"activity",function(){return Ke.b}),a.d(n,"adminInvites",function(){return Ke.c}),a.d(n,"allThreads",function(){return Ke.f}),a.d(n,"allUnreads",function(){return Ke.g}),a.d(n,"appsBrowser",function(){return Ke.s}),a.d(n,"appsInChannels",function(){return Ke.t}),a.d(n,"blockKit",function(){return Ke.u}),a.d(n,"bootData",function(){return Ke.x}),a.d(n,"browsers",function(){return Ke.z}),a.d(n,"canInteract",function(){return Ke.A}),a.d(n,"cfm",function(){return Ke.B}),a.d(n,"channelLoading",function(){return Ke.F}),a.d(n,"channelSidebar",function(){return Ke.I}),a.d(n,"channelSidebarFolders",function(){return Ke.J}),a.d(n,"channelSections",function(){return Ke.H}),a.d(n,"channelPrefixes",function(){return Ke.G}),a.d(n,"checkoutFlow",function(){return Ke.M}),a.d(n,"connectivity",function(){return Ke.Q}),a.d(n,"consistency",function(){return Ke.R}),a.d(n,"customEmoji",function(){return Ke.S}),a.d(n,"deletedMessages",function(){return Ke.U}),a.d(n,"desktop",function(){return Ke.V}),a.d(n,"dnd",function(){return Ke.Y}),a.d(n,"docs",function(){return Ke.Z}),a.d(n,"drafts",function(){return Ke.bb}),a.d(n,"draftsExpansion",function(){return Ke.cb}),a.d(n,"draftPendingFileIds",function(){return Ke.ab}),a.d(n,"ekmChanges",function(){return Ke.db}),a.d(n,"ephemeralMessages",function(){return Ke.ib}),a.d(n,"expandables",function(){return Ke.jb}),a.d(n,"experiments",function(){return Ke.kb}),a.d(n,"fileRefresh",function(){return Ke.ob}),a.d(n,"fileUpload",function(){return Ke.pb}),a.d(n,"filesFlexpane",function(){return Ke.rb}),a.d(n,"flannelUrl",function(){return Ke.sb}),a.d(n,"globalNav",function(){return Ke.ub}),a.d(n,"help",function(){return Ke.vb}),a.d(n,"imports",function(){return Ke.xb}),a.d(n,"inbox",function(){return Ke.yb}),a.d(n,"incrementalBoot",function(){return Ke.zb}),a.d(n,"inlineFilePreviews",function(){return Ke.Ab}),a.d(n,"emailRender",function(){return Ke.eb}),a.d(n,"invites",function(){return Ke.Bb}),a.d(n,"lastUsedSlashCommand",function(){return Ke.Db}),a.d(n,"memberDirectoryFlexpane",function(){return Ke.Fb}),a.d(n,"messageEdit",function(){return Ke.Jb}),a.d(n,"messagePane",function(){return Ke.Lb}),a.d(n,"messagePaneBanner",function(){return Ke.Mb}),a.d(n,"teamMenuCTA",function(){return Ke.Cc}),a.d(n,"modal",function(){return Ke.Pb}),a.d(n,"navigationHistory",function(){return Ke.Qb}),a.d(n,"noop",function(){return Ke.Rb}),a.d(n,"onboarding",function(){return Ke.Tb}),a.d(n,"openPopoversCount",function(){return Ke.Ub}),a.d(n,"appOrgAwareness",function(){return Ke.n}),a.d(n,"pendingFiles",function(){return Ke.ac}),a.d(n,"pendingFileUploads",function(){return Ke.Zb}),a.d(n,"pendingOpenChannel",function(){return Ke.bc}),a.d(n,"persistedApiCalls",function(){return Ke.cc}),a.d(n,"prefs",function(){return Ke.ec}),a.d(n,"presence",function(){return Ke.fc}),a.d(n,"pricingPlans",function(){return Ke.gc}),a.d(n,"reactionsToast",function(){return Ke.jc}),a.d(n,"roles",function(){return Ke.mc}),a.d(n,"searchAutocomplete",function(){return Ke.oc}),a.d(n,"searchChannelsUsers",function(){return Ke.pc}),a.d(n,"searchInputBox",function(){return Ke.rc}),a.d(n,"searchInProductEducation",function(){return Ke.qc}),a.d(n,"searchResults",function(){return Ke.sc}),a.d(n,"searchSession",function(){return Ke.tc}),a.d(n,"searchUi",function(){return Ke.uc}),a.d(n,"socket",function(){return Ke.yc}),a.d(n,"stars",function(){return Ke.zc}),a.d(n,"pins",function(){return Ke.dc}),a.d(n,"tabs",function(){return Ke.Ac}),a.d(n,"teamCreation",function(){return Ke.Bc}),a.d(n,"threadsFlexpane",function(){return Ke.Fc}),a.d(n,"threadSub",function(){return Ke.Ec}),a.d(n,"toast",function(){return Ke.Gc}),a.d(n,"topics",function(){return Ke.Hc}),a.d(n,"typing",function(){return Ke.Jc}),a.d(n,"uiSerialization",function(){return Ke.Kc}),a.d(n,"unfurls",function(){return Ke.Lc}),a.d(n,"unreadCounts",function(){return Ke.Mc}),a.d(n,"unreadsView",function(){return Ke.Nc}),a.d(n,"userGroupsFlexpane",function(){return Ke.Qc}),a.d(n,"usersCounts",function(){return Ke.Rc}),a.d(n,"workspace",function(){return Ke.Vc}),a.d(n,"welcomePlace",function(){return Ke.Sc}),a.d(n,"enablePopupsBanner",function(){return Ke.gb}),a.d(n,"whatsNew",function(){return Ke.Tc}),a.d(n,"composerToolbarUI",function(){return Ke.P}),a.d(n,"recentlySharedFilesPicker",function(){return Ke.lc}),a.d(n,"channelBrowser",function(){return Ke.D}),a.d(n,"dmBrowser",function(){return Ke.X}),a.d(n,"flexpaneFocus",function(){return Ke.tb}),a.d(n,"messageFocus",function(){return Ke.Kb}),a.d(n,"clientTheme",function(){return Ke.N}),a.d(n,"adminMembers",function(){return Ke.d}),a.d(n,"allCalls",function(){return Ke.e}),a.d(n,"appActions",function(){return Ke.h}),a.d(n,"appGlobalActions",function(){return Ke.k}),a.d(n,"channelActions",function(){return Ke.C}),a.d(n,"appHomes",function(){return Ke.l}),a.d(n,"appHomesV2",function(){return Ke.m}),a.d(n,"appPermissions",function(){return Ke.o}),a.d(n,"appProfiles",function(){return Ke.p}),a.d(n,"appViews",function(){return Ke.q}),a.d(n,"appCollaborators",function(){return Ke.i}),a.d(n,"blockKitModals",function(){return Ke.v}),a.d(n,"apps",function(){return Ke.r}),a.d(n,"blocks",function(){return Ke.w}),a.d(n,"bots",function(){return Ke.y}),a.d(n,"channelHistory",function(){return Ke.E}),a.d(n,"channels",function(){return Ke.K}),a.d(n,"channelsMeta",function(){return Ke.L}),a.d(n,"customizeEmoji",function(){return Ke.T}),a.d(n,"developerActions",function(){return Ke.W}),a.d(n,"emoji",function(){return Ke.fb}),a.d(n,"environment",function(){return Ke.hb}),a.d(n,"externalTeamIds",function(){return Ke.mb}),a.d(n,"externalTeamsChannels",function(){return Ke.nb}),a.d(n,"files",function(){return Ke.qb}),a.d(n,"idpGroups",function(){return Ke.wb}),a.d(n,"lastNetworkSend",function(){return Ke.Cb}),a.d(n,"memberCounts",function(){return Ke.Eb}),a.d(n,"members",function(){return Ke.Gb}),a.d(n,"membership",function(){return Ke.Hb}),a.d(n,"membershipOrdered",function(){return Ke.Ib}),a.d(n,"messages",function(){return Ke.Nb}),a.d(n,"messagesMeta",function(){return Ke.Ob}),a.d(n,"notifications",function(){return Ke.Sb}),a.d(n,"paidFeatures",function(){return Ke.Yb}),a.d(n,"reactions",function(){return Ke.ic}),a.d(n,"recentConversations",function(){return Ke.kc}),a.d(n,"sharedChannelInvites",function(){return Ke.wc}),a.d(n,"slashCommand",function(){return Ke.xc}),a.d(n,"selfTeamIds",function(){return Ke.vc}),a.d(n,"teams",function(){return Ke.Dc}),a.d(n,"userGroups",function(){return Ke.Pc}),a.d(n,"userGroupMembership",function(){return Ke.Oc}),a.d(n,"window",function(){return Ke.Uc}),a.d(n,"appConfig",function(){return Ke.j}),a.d(n,"orgApps",function(){return Ke.Vb}),a.d(n,"orgUserGroups",function(){return Ke.Xb}),a.d(n,"commsImpact",function(){return Ke.O}),a.d(n,"promo",function(){return Ke.hc}),a.d(n,"externalDirectory",function(){return Ke.lb}),a.d(n,"orgAppsSearchWorkspace",function(){return Ke.Wb}),a.d(n,"tspEmailDelivery",function(){return Ke.Ic});var s=a("JgE6"),r=a.n(s),i=a("7Kh5"),o=a("fFfO"),l=a("oTSI"),c=a("YjHT"),d=a("yHhI"),u=a("quKg"),p=a("DlLn"),h=a("QbLZ"),m=a.n(h),b=a("cErB"),f=a("BNw7"),_=a("t85p"),g=a("Gogr");function y(){const e=Object(g.c)("teams"),t=Object(g.c)("prevTeams");return m()({},t,e)}var O=a("lhZz"),C=a("8Az7"),v=a("KXvl"),E=a("qe1s"),k=a("HuaI"),S=a("IY6O"),j=a("kLJo"),I=a("dhvi"),w=a("/Rx2"),T=a("BeG2"),N=a("rWF5"),A=a("Zr7G");function R({avoidReloadIfPossible:e,comparison:t,returnToUrl:a}={}){const n=Object(A.a)();function s(){return n.count("safh_reload"),Object(b.j)(a),Object(f.a)()}n.count("safh_start");const r=Object(d.b)({label:"AUTH"}),i=Object(b.k)(a).pathname,o=Object(j.e)(i,{throwOnNoRoute:!1});if(!e||!function(e,t){const a=Object(O.getStateForClientStore)();if(!Object(S.didBootAllWorkspaces)(a))return!1;if(e.removed.length>0)return!1;if(!t)return!1;const n=Object(S.getFocusedWorkspace)(a),s=t.params.teamId;return!(!Object(v.b)()&&s&&s!==n||e.usersChanged||Object(N.y)()&&e.isNoOp&&s&&Object(S.isWorkspaceExpired)(Object(O.getStateForClientStore)(),s))}(t,o))return e?n.count("safh_reload_requested"):n.count("safh_cannot_handle"),r.info(`Fetched auth but need to reload to handle the change; navigating to ${a}`),s();r.info("Fetched auth and processing changes without reloading...");try{Object(g.f)()}catch(c){return r.error(`Encountered an error while ingesting auth payload: ${c}`),s()}const l=Object(v.b)()?function(e){const t=Object(d.b)({label:"AUTH"}),a=y(),n=e.map(e=>(Object(S.isWorkspaceExpired)(Object(O.getStateForClientStore)(),e)?(t.info(`Re-adding expired workspace ${e} / ${a[e].url}`),Object(O.dispatchForClientStore)(Object(k.updateWorkspaceMeta)({id:e,meta:m()({},a[e],{isExpired:!1})}))):(t.info(`Adding workspace ${e} / ${a[e].url}`),Object(O.dispatchForClientStore)(Object(k.addWorkspace)({id:e,meta:a[e]}))),Object(E.a)({teamId:e,shouldSetFocus:!1})));return Promise.all(n)}(t.added):Promise.resolve();return function(e){const t=Object(d.b)({label:"AUTH"}),a=y();e.forEach(e=>{if(!Object(O.getStoreInstanceByTeamId)(e))return;t.info(`Updating credentials for workspace ${e} / ${a[e].url}`);const n=Object(g.d)(e,"token"),s=Object(g.d)(e,"enterprise_api_token");Object(C.c)(n,e),Object(O.dispatchForClientStore)(Object(k.updateWorkspaceMeta)({id:e,meta:a[e]})),Object(O.dispatchForTeamId)(e,Object(T.l)(n)),Object(O.dispatchForTeamId)(e,Object(_.z)({apiToken:n,enterpriseApiToken:s}))})}(t.changed),l.then(()=>(function(e){const t=Object(S.getFocusedWorkspace)(Object(O.getStateForClientStore)());if(e===t)return;if(Object(w.b)(Object(O.getStateByTeamId)(t)))return;const a=Object(d.b)({label:"AUTH"});if(a.info("Not allowed to switch workspaces right now; seeing if closing a modal helps"),Object(O.dispatchForTeamId)(t,Object(I.a)()),!Object(w.b)(Object(O.getStateByTeamId)(t)))throw a.info("Still not allowed to switch workspaces right now despite having closed a modal"),new Error("Not allowed to switch workspaces; we should reload instead");a.info("Closing a modal helped")}(o.params.teamId),Object(j.g)(o.routeName,o.params,{reason:"Sonic authFetchedHandler"}))).then(()=>{n.count("safh_ok"),t.added.length>0&&n.count("safh_added"),t.changed.length>0&&n.count("safh_changed"),t.isNoOp&&n.count("safh_noop"),r.info("Successfully processed auth changes without needing to reload")}).catch(e=>(r.error(`Encountered an error while processing auth changes: ${e}`),n.count("safh_error"),s()))}var M=a("V5VI");let P=!1;function x({payload:e}={},t,a){if(P)return;const n=a();e||"incremental"===Object(u.c)(n,"sonic_incr_auth")&&(P=!0,Object(d.b)().info("AUTH","Installing incremental auth handler"),Object(p.j)(R))}var L=a("g5qt"),F=a("bYMc"),D=a("1PKr"),B=a("XfeM"),U=a("brL+"),q=a("eK5+");const H="lastBootSonicValue",W="sonicDowngradeTs",G=432e5,K=Object(B.b)("Signal to the desktop that all delegates are ready",(e,t)=>{Object(L.i)(),function(e){if(!Object(_.m)(e(),"feature_desktop_force_production_channel"))return;Object(L.Yb)({name:"releaseChannel",value:"prod"})}(t),function(){try{if(!Object(N.E)())return;if(!Object(N.w)("3.2"))return;if(Object(N.w)("3.3"))return;if(Object(L.G)("isOpenExternalShellForced"))return;Object(L.Yb)({name:"isOpenExternalShellForced",value:!0})}catch(e){Object(d.b)().error("Tried to set isOpenExternalShellForced, but failed",e)}}(),function(e){try{if(!Object(_.m)(e(),"feature_desktop_notifications_2018"))return;if(!Object(N.w)("3.3"))return;Object(L.Yb)({name:"notificationTimeout",value:6e3}),Object(L.Yb)({name:"notificationAfterHoverTimeout",value:2e3}),Object(L.Yb)({name:"notificationMaxItems",value:8}),Object(L.Yb)({name:"notificationStyle",value:"2018"})}catch(t){Object(d.b)().error("Tried to set notification style for 2018, but failed",t)}}(t),function(e){try{if(!Object(_.m)(e(),"feature_tinyspeck"))return;if(!Object(N.w)("4.2.0"))return;const a=Object(L.G)("debugFeatures")||[];if(!a.includes("react-devtools"))return;Object(L.Yb)({name:"debugFeatures",value:a.filter(e=>"react-devtools"!==e)})}catch(t){Object(d.b)().error("Tried to enable debug features, but failed",t),Object(d.b)().error(t.message),Object(d.b)().error(t.stack)}}(t),function(e){setTimeout(()=>{const t=e();if(!Object(_.m)(t,"feature_desktop_logs_upload"))return;const a=Object(_.f)(t,"api_token"),n=Object(U.b)(t);D.b.fetch({method:"api.features",args:{token:a,platform:"ssb"},teamId:n}).then(e=>{e&&e.features&&e.features.desktop_diagnostics_timestamp&&z(n)})},6e4)}(t),function(e){if(!Object(L.db)())return;if(!Object(N.w)("4.0.0"))return;const t=Object(L.C)("bootSonic"),a=localStorage.getItem(H);if(t===a)return;const n=e(),s=Object(A.c)({state:n}),r="beta"===Object(L.H)();Object(d.b)().info(`Decision to boot Sonic changed since last session: '${a}' -> '${t}'`);try{localStorage.setItem(H,t)}catch(i){Object(d.b)().error(`Unable to set '${H}'`,i)}switch(t){case"once":s.count(r?"sonic_rollout_upgrade_to_sonic_beta_3":"sonic_rollout_upgrade_to_sonic_3");break;case"never":s.count(r?"sonic_rollout_downgrade_to_legacy_beta_3":"sonic_rollout_downgrade_to_legacy_3");try{localStorage.setItem(W,Date.now())}catch(i){Object(d.b)().error(`Unable to set '${W}'`,i)}!r&&Object(q.a)(5)&&z(Object(U.b)(n)).then(()=>{s.count("sonic_rollout_downgrade_to_legacy_logs_available_3")})}}(t),function(){if(!Object(L.db)())return;if(!Object(N.w)("4.0.0"))return;const e=Object(L.C)("bootSonic");if("once"===e)Object(L.Wb)({name:"bootSonic",value:"always"});else if("never"===e){const e=localStorage.getItem(W);if(null===e)return;const t=Date.now()-e;t>G&&Object(L.Wb)({name:"bootSonic",value:"once"})}}()});K.meta={name:"onWebappBooted",key:"desktopOnWebappBootedOnWebappBooted",description:"Signal to the desktop that all delegates are ready"};var V=K;function z(e){return Object(L.p)().then(t=>{const a=t&&t.length>0?t[0]:null;if(!a)return Promise.resolve();const n=a instanceof File?a:new File(a.buffer,a.name,a.options),s=Object(O.getStateByTeamId)(e),r=Object(_.f)(s,"api_token");return r?D.b.fetch({method:"profiling.addLogging",httpMethod:"POST",args:{token:r,platform:"ssb",log_file:n},teamId:e}):Promise.resolve()}).catch(t=>{Object(d.a)({teamId:e}).error(`Unable to upload app logs: ${t}`)})}const $="DESKTOP-SIDE-EFFECT";function Y(e){if(Object(S.getAllWorkspaces)(e).filter(t=>!Object(S.isWorkspaceExpired)(e,t)).length-Object(S.getBootedWorkspaces)(e).length-Object(S.getFailedToBootWorkspaces)(e).length==0){const t=Object(S.getFocusedWorkspace)(e);Object(d.a)({teamId:t}).info($,"Attempted boot for all workspaces, signaling desktop"),Object(O.dispatchForTeamId)(t,V())}}var Q=a("5v1V"),X=a("jo6Y"),J=a.n(X),Z=a("aK/h"),ee=a("om+M"),te=a("4zXV");const ae=Object(ee.a)("Fetch start data",(e,t,a)=>{let n=a.reason,s=J()(a,["reason"]);const r=m()({flannel_api_ver:4,only_self_subteams:1},s);return e(Object(te.b)({method:"client.boot",args:r,reason:n}))});ae.meta={name:"fetchStartData",key:"fetchersStartApiFetchStartData",description:"Fetch start data"},ae.propTypes={reason:Z.default.string.isRequired,only_self_subteams:Z.default.oneOf([0,1])};var ne=a("0QyR"),se=a("wsMj"),re=a("9E9B"),ie=a("+8mH"),oe=a("c6rO"),le=a("gLeh"),ce=a("2VxW"),de=a("okZA"),ue=a("8MYE"),pe=a("X5aw"),he=a("s0HP"),me=a("aClT"),be=a("oZ18"),fe=a("1CNK");const _e=Object(B.b)("Set model data in Redux stores based on response from client.boot",(e,t,{appHomesData:a,channelsData:n,teamData:s,selfData:r,userPrefsData:o,teamPrefsData:l,userGroupMembershipData:c,enterpriseData:d,enterprisePrefsData:u,paidFeatures:p,emojiBootData:h,slashCommandsBootData:m}={})=>{e(Object(le.c)(Object(L.Z)())),e(Object(re.bulkAddChannels)({channels:n})),e(Object(oe.c)({team:s})),e(Object(ce.a)({members:[r]})),e(Object(he.c)(o)),e(Object(ie.f)(o&&o.muted_channels||"")),e(Object(me.c)(l)),e(Object(be.b)()),e(Object(be.a)({userGroups:c,isMember:!0})),a&&e(Object(se.b)(a)),d&&e(Object(de.l)({team:d})),u&&e(Object(fe.c)(u)),e(Object(ue.c)(p||[])),e(Object(i.c)({serverCacheTs:h.cacheTs})),e(Object(pe.c)({serverCacheTs:m.cacheTs}))});_e.meta={name:"setModelData",key:"appSonicReduxActionsSetModelDataSetModelData",description:"Set model data in Redux stores based on response from client.boot"},_e.propTypes={channelsData:Z.default.array,teamData:Z.default.object.isRequired,selfData:Z.default.object.isRequired,miscBootData:Z.default.object,userPrefsData:Z.default.object,teamPrefsData:Z.default.object,userGroupMembershipData:Z.default.array,enterpriseData:Z.default.object,paidFeatures:Z.default.arrayOf(Z.default.string)};var ge=_e;let ye={};function Oe(e,t,a){const n=Object(U.b)(a());ye[n]=(ye[n]||0)+1;const s=ye[n];return Object(Q.f)(a())?(t(Object(c.i)(!0)),t(ae({reason:"provisionally-connected"})).then(ne.b).then(e=>{const r=ye[n];Object(Q.n)(a())&&r===s&&t(Object(T.f)()),t(ge(e))}).finally(()=>t(Object(c.i)(!1)))):Promise.resolve(t(Object(T.f)()))}var Ce=a("XL7r"),ve=a("7dYf");function Ee({payload:e}={},t,a){if(!Object(v.b)())return;const n=a();if(e||!Object(Q.l)(n))return;if(!Object(U.a)(n))return;const s=Object(U.b)(n);Object(g.e)().includes(s)&&Object(Ce.c)(n).includes(s)&&(Object(d.a)({teamId:s}).info("Removing this team from the app exclusion list"),t(Object(ve.b)({teamId:s})))}var ke=a("70KD"),Se=a("ocl4");const je=3e4;function Ie(e,t,a){Object(_.m)(a(),"feature_desync_resync")&&t(ae({reason:"resynced-topics"})).timeout(je).then(ne.b).then(e=>{t(Object(ke.c)()),t(ge(e))}).catch(()=>t(Object(ke.c)())).finally(()=>t(Object(Se.b)()))}var we=Object(l.a)(()=>{Object(M.d)({actions:[c.i],sideEffect:x}),Object(M.a)({actions:[k.setWorkspaceBooted],sideEffect:(e,t,a)=>{if(!L.V)return;const n=e.payload,s=a();Object(d.a)({teamId:n}).info($,`Team ${n} booted, creating delegate`),Object(O.dispatchForTeamId)(n,Object(F.a)()),Y(s)}}),Object(M.a)({actions:[k.setWorkspaceFailedToBoot],sideEffect:(e,t,a)=>{L.V&&Y(a())}}),Object(M.d)({actions:[Q.u],sideEffect:Oe}),Object(M.d)({actions:[Se.e],sideEffect:Ie}),Object(M.d)({actions:[Q.a],sideEffect:Ee})});function Te(...e){return we(),Object(o.a)(...e)}var Ne=a("IEu+"),Ae=a("OFWM"),Re=a("2/vs"),Me=a("CPJ1"),Pe=a("G4ux"),xe=a("5dgH"),Le=a("m2ga"),Fe=a("nNoG"),De=a("JvzI"),Be=a("TVjB"),Ue=a("s/0T"),qe=a("0dCl"),He=a("iTOt"),We=a("rb67"),Ge=a("rkcT"),Ke=a("5Fft"),Ve=a("Gmrf"),ze=a("s5Is"),$e=a("9oTK"),Ye=a("fujP"),Qe=a("Z7Ay"),Xe=a("Z0v/"),Je=a("pR3f"),Ze=a("bhDD"),et=a("JtEI"),tt=a("M/q2"),at=a("kymL");let nt="3";const st="persist:slack-persistence-method-version";function rt(e){const t=Object(d.b)();if(!Object(tt.a)("localStorage"))return t.info(Xe.F,"Not checking persistence storage method version because localStorage doesn't appear to be supported"),Promise.resolve();const a=`${st}-${e}`,n=`${st}-${Object(et.c)()}-${e}`;let s=localStorage.getItem(n);if(!s){s=localStorage.getItem(a)||"0";try{localStorage.setItem(n,nt),localStorage.removeItem(a)}catch(r){t.error(`Error persisting persistence method version for ${e}: ${r}`)}}if(s!==nt){try{localStorage.setItem(n,nt)}catch(r){t.error(`Error persisting persistence method version for ${e}: ${r}`)}if("1"===s&&"2"===nt)t.info(Xe.F,`(${e}) Removing localStorage persistence data because it is now stored in IndexedDb`),localStorage.removeItem(`persist:${Xe.I}-${e}`);else if("2"===s&&"3"===nt){t.info(Xe.F,`(${e}) Removing outdated persistence data because it is now stored key off of which gantry app you are using`);const a=`persist:${Xe.I}-${e}`;return at.a.delete(a).catch(a=>{t.error(`Error removing persisted data "persist:${Xe.I}-${e}"`,a)})}}return Promise.resolve()}const it=Object(d.b)();var ot=a("UioL");const lt=Object(q.a)(10),ct=`${Xe.h}_process_stored_state_mark_${Xe.i}`;var dt=(()=>{var e=Object($e.coroutine)(function*({teamId:e,reducerConfig:t=Object(Xe.u)(e),storedState:a={}}={}){const n=Object(A.a)(),s=Object(d.a)({teamId:e});s.info(Xe.F,"Checking for persistence method changes"),yield Object($e.resolve)(rt()),s.info(Xe.F,"Preparing state for hydration"),lt&&n.mark(ct);const r=function e({state:t,logger:a,teamId:n,reducerConfig:s={},storedPersistenceHashes:r={},currentPersistenceHashes:i={}}){const o={};return Object.keys(t).forEach(l=>{const c=s[l];if(Object(Xe.y)(c))return void(o[l]=e({state:t[l],reducerConfig:Object(Xe.q)(c),logger:a,teamId:n}));var d=Object(Xe.v)(c)||{},u=d.persistenceEnabled;const p=void 0!==u&&u;var h=d.persistImmediately;const m=void 0!==h&&h,b=d.afterReadTransform;if(!p||m)return;const f=r[l],_=i[l];_===f?o[l]=b?b(t[l],n):t[l]:a.info(Xe.F,`${l} store's shape has changed, throwing away persisted data for it. New hash ${_} doesn't equal old hash ${f}`)}),o}({state:a,teamId:e,logger:s,reducerConfig:t,storedPersistenceHashes:a.persistenceHashes,currentPersistenceHashes:Object(Je.b)(m()({},t,{persistenceHashes:Ze.a}))});return!r||Object(Ye.a)(r)?(s.info(Xe.F,"No persisted state found"),lt&&n.clearMarks(ct),null):(s.info(Xe.F,"State prepared for hydration"),lt&&n.measureAndClear(ct),s.info(Xe.F,"Checking for required data"),function({teamId:e,reducerConfig:t,state:a={}}={}){return Object.keys(t).some(n=>{const s=t[n],r=Object(Xe.D)(s)&&(null===a[n]||void 0===a[n]);return r&&it.info(Xe.F,`(${e}) Not using persisted model because ${n} is required and empty`),r})}({teamId:e,reducerConfig:t,state:r})?(s.info(Xe.F,"Missing some required data, throwing away persisted state"),n.count(`${Xe.h}_missing_required_reducers_${Xe.i}`),null):r)});return function(t){return e.apply(this,arguments)}})();Object(Qe.a)("persist.processStoredState",e=>{const t=Object(Xe.u)(e);return processStoredState({teamId:e,reducerConfig:t,storedState:Object(ot.a)({teamId:e})})});var ut=a("lhpG"),pt=a("4ULK"),ht=a("UXvI");let mt=!1;const bt=e=>{if(!e)return;let t="";const a=e.srcElement||e.target,n=d.b&&Object(d.b)();if(a&&a.nodeName)if("SCRIPT"===a.nodeName){const n=a.src;t=`[${e.type||"error"}] from script at ${n} (failed to load?)`}else if("IMG"===a.nodeName){const e=a.src||a.currentSrc||"unknown";return void n.warn(`<img> fired error with url = ${e}`)}if(e.error&&e.error.stack&&(t+=` ${e.error.stack}`),e.filename){const a=e.filename,n=e.lineno,s=e.colno;t+=` from ${a}`,n&&(t+=` @ line ${n}, col ${s}`)}let s;if((s=e.error&&e.error.stack?t:`${e.message||""} ${t}`)&&s.replace&&(s=s.replace(/\s+/g," ").trim()),!s||!s.length)if(a){s=`error event from node of ${a.nodeName||"unknown"}, no message provided?`}else s="error event fired, no relevant message or node found";s=`\ud83d\udc1e ${s}`;!function(e){const t=e.error,a=e.msg,n={subtype:e.subtype};Object(d.b)().error(t,a,n)}({error:e.error||e,msg:s,subtype:"js_runtime_error"})};var ft=()=>{if(mt)return;const e=Object(ht.a)(bt,1e4);window.addEventListener("error",e,!0),mt=!0};let _t=!1;const gt=()=>{const e=Object(A.a)(),t=Object(d.b)();e.count(`${Object(et.c)()}_beforeunload`),t.info("RELOAD","Page is about to unload. This might not be a reload, it could be a window close or navigation")};var yt=()=>{_t||(window.addEventListener("beforeunload",gt),_t=!0)},Ot=a("YB7p"),Ct=a("rCFu"),vt=a("IbTH"),Et=a("xUyV");function kt({teamToken:e,teamId:t,reason:a}={}){const n=document.documentElement,s=!(!n||!n.dataset)&&n.dataset.versionTs;return s?Object(vt.g)({token:e,teamId:t,versionTs:s,reason:a}).then(e=>{if(e&&e.should_reload){const t=e.client_min_version;Object(Et.a)(t)&&Object(Ot.a)({reason:"Reloading due to a min version bump (rtm.shouldReload)",reasonKey:"min_version_bump"})}return Promise.resolve()}):Promise.resolve()}function St({isWarmBooting:e,bootData:t={}}={}){const a=document.documentElement,n=!(!a||!a.dataset)&&a.dataset.versionTs;if(!n)return Promise.resolve(!1);const s=t.should_reload,r=t.client_min_version;if(e){const e=function({versionTs:e,clientMinVersion:t,shouldReload:a}){if(a)return Object(d.b)().warn("MIN-VERSION","We somehow managed to cache the should_reload => true value. We can safely ignore this as it\u2019s likely a programming error?"),!1;const n=document.documentElement,s=n&&n.dataset?n.dataset.minVersionSplaySeconds:0;if(!s)return!1;const r=parseInt(s,10),i=t+r;if(Date.now()/1e3>=i&&e<t&&Object(Et.a)(t))return!0;return!1}({clientMinVersion:r,shouldReload:s,versionTs:n});return e&&Object(Ot.a)({reason:`Reloading because our assets (${n}) are at least 3 hours older than the last min-version (${r})`,reasonKey:"min_version_bump"}),Promise.resolve(e)}if(s&&Object(Et.a)(r)){Object(Ot.a)({reason:"Reloading due to a min version bump (client.boot)",reasonKey:"min_version_bump"});const e=!0;return Promise.resolve(e)}return Promise.resolve(!1)}var jt=a("ANjH"),It=a("sINF"),wt=a("Bw5p"),Tt=a("Xzpq"),Nt=a("YS90"),At=a("1hAG");const Rt=["domain","enterprise_id","enterprise_name","id","icon","name","url"],Mt=Object(Nt.b)("Broadcast workspaces state to other stores",(e,t,a)=>{const n=e.getState(),s=t(a),r=e.getState(),i=Object(S.getBootedWorkspaces)(r),o=n&&Object(S.getBootedWorkspaces)(n),l=Object(S.getAllWorkspaces)(r),c=Object(S.getAllWorkspaces)(n),d=!c||l.some((e,t)=>e!==c[t]),u=Object(S.getRecentlyFocusedWorkspaces)(r),p=n&&Object(S.getRecentlyFocusedWorkspaces)(n);return o!==i||d?(!function(e,t){const a=e.reduce((e,a)=>{const n=Object(O.getStateByTeamId)(a);return e[a]=m()({},Object(wt.a)(Object(At.i)(n,a,!1),Rt),{order:t.indexOf(a)}),e},{});Object(L.vc)(a)}(i,l),Pt(i,u)):p!==u&&Pt(i,u),s});function Pt(e,t){const a=t[0];e.forEach(e=>{Object(O.dispatchForTeamId)(e,Object(Tt.f)(t))}),Object(L.Pb)(a)}Mt.meta={name:"broadcastWorkspacesMiddleware",key:"appSonicReduxMiddlewareBroadcastWorkspacesBroadcastWorkspacesMiddleware",description:"Broadcast workspaces state to other stores"};var xt=Mt,Lt=a("vWCh"),Ft=a("dxEi"),Dt=a("ifKl");var Bt=function({state:e,prevState:t,workspaces:a=[],broadcastSelector:n=Dt.a,broadcastAction:s=Dt.a,featureFlag:r}={}){const i=n(e),o=n(t);i!==o&&a.forEach(e=>{const t=Object(O.getStateByTeamId)(e);r&&!Object(_.m)(t,r)||Object(O.dispatchForTeamId)(e,s(i))})};const Ut=Object(Nt.b)("Broadcast connectivity state to other stores",(e,t,a)=>{const n=e.getState(),s=t(a),r=e.getState(),i=Object(S.getBootedWorkspaces)(r);return Bt({state:r,prevState:n,workspaces:i,broadcastSelector:e=>Object(Ft.c)(e),broadcastAction:e=>Object(Lt.a)(e),featureFlag:"feature_connectivity_manager"}),Bt({state:r,prevState:n,workspaces:i,broadcastSelector:e=>Object(Ft.e)(e),broadcastAction:e=>Object(Lt.b)(e),featureFlag:"feature_connectivity_manager"}),s});Ut.meta={name:"broadcastConnectivityMiddleware",key:"appSonicReduxMiddlewareBroadcastConnectivityBroadcastConnectivityMiddleware",description:"Broadcast connectivity state to other stores"};var qt=Ut,Ht=a("OtLZ"),Wt=a("wBxZ"),Gt=a("0VPD"),Kt=a("MNvw");const Vt=16,zt=Object(Kt.b)({[k.initialize]:(e,t)=>(function(e,{focusedWorkspace:t,allWorkspaces:a,workspacesMeta:n}={}){if(e.allWorkspaces)throw new Error("workspaces-store:initialize cannot be called more than once");if(!t)throw new Error("workspaces-store:initialize must be given a focusedWorkspace");if(!a)throw new Error("workspaces-store:initialize must be given an array of workspaces");if(a.indexOf(t)<0)throw new Error(`workspaces-store:initialize ${t} is not one of the valid workspaces: ${a}`);return m()({},e,{focusedWorkspace:t,allWorkspaces:a,workspacesMeta:n,recentlyFocusedWorkspaces:[t]})})(e,t),[k.setDidBootAllWorkspaces]:e=>m()({},e,{didBootAllWorkspaces:!0}),[k.setWorkspaceOrder]:(e,t)=>(function(e,t){const a=e.allWorkspaces;if(Object(Gt.a)(a,t).length!==a.length)throw new Error("workspaces-store:setWorkspaceOrder can only re-order items in the array; additions or removals are not allowed");return Object(g.h)("orderedTeamIds",t),m()({},e,{allWorkspaces:t})})(e,t),[k.setWorkspaceBooted]:(e,t)=>(function(e,t){const a=e.bootedWorkspaces.includes(t)?e.bootedWorkspaces:[...e.bootedWorkspaces,t];return m()({},e,{bootedWorkspaces:a})})(e,t),[k.setWorkspaceFailedToBoot]:(e,t)=>(function(e,t){if(!t)return e;const a=e.failedToBootWorkspaces.includes(t)?e.failedToBootWorkspaces:[...e.failedToBootWorkspaces,t];return m()({},e,{failedToBootWorkspaces:a})})(e,t),[k.setWillNavigateToUnbootedWorkspaceId]:(e,t)=>m()({},e,{willNavigateToUnbootedWorkspaceId:t}),[k.setWorkspaceIsMigrating]:(e,t)=>(function(e,t){if(!t)return e;const a=e.migratingWorkspaces.includes(t)?e.migratingWorkspaces:[...e.migratingWorkspaces,t];return m()({},e,{migratingWorkspaces:a})})(e,t),[k.setWorkspaceMigrationIsComplete]:(e,t)=>(function(e,t){if(!t)return e;const a=e.completedMigrationWorkspaces.includes(t)?e.completedMigrationWorkspaces:[...e.completedMigrationWorkspaces,t];return m()({},e,{completedMigrationWorkspaces:a})})(e,t),[k.setWorkspaceIsAccessLimited]:(e,t)=>(function(e,t){if(!t)return e;const a=e.accessLimitedWorkspaces.includes(t)?e.accessLimitedWorkspaces:[...e.accessLimitedWorkspaces,t];return m()({},e,{accessLimitedWorkspaces:a})})(e,t),[k.addWorkspace]:(e,{id:t,meta:a}={})=>{if(!t||!a)throw new Error("'id' and 'meta' are both required when adding a workspace");if(e.allWorkspaces.includes(t))return Object(d.b)({label:"WORKSPACES"}).warn(`Cannot add workspace; it is already present: ${t}`),e;const n=e.allWorkspaces,s=e.workspacesMeta;return m()({},e,{allWorkspaces:[...n,t],workspacesMeta:m()({},s,{[t]:a})})},[k.updateWorkspaceMeta]:(e,{id:t,meta:a}={})=>{const n=e.workspacesMeta;if(!n[t])throw new Error(`Cannot update workspace meta for ${t}; no such team`);return m()({},e,{workspacesMeta:m()({},n,{[t]:a})})},[k.internalSetFocusedWorkspaceType]:(e,t)=>m()({},e,{focusedWorkspace:t,recentlyFocusedWorkspaces:Yt(e.recentlyFocusedWorkspaces,t)}),[k.internalRemoveWorkspaceType]:(e,t)=>m()({},e,{allWorkspaces:Object(Ht.a)(e.allWorkspaces,t)})},{bootedWorkspaces:[],failedToBootWorkspaces:[],migratingWorkspaces:[],completedMigrationWorkspaces:[],accessLimitedWorkspaces:[],recentlyFocusedWorkspaces:[]},{storeKey:"workspaces",persistenceEnabled:!0});zt.meta={name:"workspaces",key:"appSonicReduxWorkspacesStoreWorkspacesReducerWorkspaces"},zt.propTypes={allWorkspaces:Z.default.arrayOf(Z.default.string),bootedWorkspaces:Z.default.arrayOf(Z.default.string),failedToBootWorkspaces:Z.default.arrayOf(Z.default.string),recentlyFocusedWorkspaces:Z.default.arrayOf(Z.default.string),focusedWorkspace:Z.default.string,workspacesMeta:Z.default.object};var $t=zt;function Yt(e,t){const a=[t,...e.filter(e=>e!==t)];return a.length>Vt?Object(Wt.a)(a,Vt):a}var Qt=a("xIQt"),Xt=a("Jsq1"),Jt=a("Tc5z"),Zt=a("NZir"),ea=a("fpvb"),ta=a("4GGS"),aa=a("8Cw3"),na=a("Lev8");const sa=Object(Nt.b)("Broadcast client theme state to other stores",(e,t,a)=>{const n=e.getState(),s=t(a),r=e.getState(),i=Object(S.getBootedWorkspaces)(r);return Bt({state:r,prevState:n,workspaces:i,broadcastSelector:e=>Object(na.c)(e),broadcastAction:e=>Object(na.g)(e)}),Bt({state:r,prevState:n,workspaces:i,broadcastSelector:e=>Object(na.d)(e),broadcastAction:e=>Object(na.i)(e)}),Bt({state:r,prevState:n,workspaces:i,broadcastSelector:e=>Object(na.e)(e),broadcastAction:e=>Object(na.j)(e)}),s});sa.meta={name:"broadcastClientThemeMiddleware",key:"appSonicReduxMiddlewareClientThemeBroadcastClientThemeMiddleware",description:"Broadcast client theme state to other stores"};var ra=sa;function ia(){const e=Object(O.getClientStoreInstance)();if(e)return Object(d.b)().warn("[CLIENT-STORE]","we\u2019ve called configureClientStore before and already have an instance. This is likely a programming error."),e;const t=function(){const e=Object(Zt.a)({teamId:"client",middlewares:[ea.b,It.a,ta.a,xt,qt,ra,Qt.a],customEnhancers:[]}),t=Object(aa.a)({workspaces:$t,window:Ae.a,telemetry:Ue.a,connectivity:Xt.a,accessibility:le.a,desktop:Jt.c,clientTheme:na.b});return Object(jt.e)(t,e)}();Object(O.setClientStoreInstance)(t),Object(Qe.a)("clientStore",m()({},t,{setFocusedWorkspace:ze.setFocusedWorkspace})),Object(Qe.a)("clientStore",t),Object(Qe.b)("teamIds",()=>{const e=t.getState();return S.getAllWorkspaces(e)}),Object(Qe.b)("activeTeam",()=>{const e=t.getState(),a=S.getFocusedWorkspace(e);return window.slackDebug[a]}),Object(Qe.b)("activeTeamId",()=>{const e=t.getState();return S.getFocusedWorkspace(e)});const a={};return Object.keys(k).forEach(e=>{a[e]=((...a)=>t.dispatch(k[e](...a)))}),Object.keys(S).forEach(e=>{a[e]=((...a)=>S[e](t.getState(),...a))}),Object(Qe.a)("clientStore.workspaces",a),t}var oa=a("IxGy"),la=a("sDWr"),ca=a("2HDu"),da=a("aLpA");var ua=({params:e={},prevTeamId:t,nextTeamId:a,routeName:n})=>{if(t!==a)return Promise.resolve();const s=Object(O.getStoreInstanceByTeamId)(t),r=s.getState(),i=Object(He.b)(r),o=Object(He.c)(r),l=Object(oa.e)(r,{ignoreViewContext:!0});return function(e,t,a){return e&&(!e.viewContext||e.viewContext===da.I.MESSAGE_PANE)&&t===e.channelId&&a!==e.channelId}(l,o.entityId,e.entityId)||function(e,t,a,n,s){return e&&e.viewContext===da.I.THREADS_FLEXPANE&&t===la.k&&a===Object(ca.c)(e.channelId,e.threadTs)&&(n!==la.k||s!==Object(ca.c)(e.channelId,e.threadTs))}(l,i,o.threadId,n,e.threadId)?s.dispatch(Object(oa.a)({cancelUnsavedEdits:!1,scroll:!0})):Promise.resolve()},pa=a("4M+g"),ha=a("rgOt"),ma=a("S3eg"),ba=a("q1tI"),fa=a.n(ba),_a=a("ns4K"),ga=a("5mKg"),ya=a("qafc");const Oa=new Fe.b("unavailable_channel");Z.default.string.isRequired;class unavailable_member_toast_UnavailableMemberToast extends ba.PureComponent{render(){var e=this.props;const t=e.teamName,a=J()(e,["teamName"]),n=Oa.t("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:t});return fa.a.createElement(ya.b,m()({fadeDelay:1e4,type:"error"},a),fa.a.createElement("span",null,n))}}unavailable_member_toast_UnavailableMemberToast.displayName="UnavailableMemberToast";var Ca=unavailable_member_toast_UnavailableMemberToast;const va=Object(B.b)("Show unavailable member toast",(e,t,{teamId:a}={})=>{const n=t(),s=Object(At.i)(n,a),r=Object(ga.e)(s);return e(Object(_a.c)({element:fa.a.createElement(Ca,{type:"error",teamName:r})}))});va.meta={name:"showUnavailableMemberToast",key:"actionsShowUnavailableMemberToastShowUnavailableMemberToast",description:"Show unavailable member toast"};var Ea=va,ka=a("Fdc0"),Sa=a("wfE8"),ja=a("6kok"),Ia=a("FHcd"),wa=({nextTeamId:e,params:t={}}={})=>{const a=Object(O.getStoreInstanceByTeamId)(e);if(!a)return Promise.resolve(!0);const n=a.getState();if(!Object(Ia.a)(t.entityId))return Promise.resolve();const s=t.entityId,r=Object(Pe.d)(n,s),i=Object(ka.Nb)(n,r),o=Object(pa.k)(n,s);return Object(ja.tb)(o)?(a.dispatch(Object(ma.a)({id:o.id})),Promise.resolve(!1)):i?(a.dispatch(Ea({teamId:r.team_id})),Promise.resolve(!1)):a.dispatch(Object(Sa.v)({memberIds:[s],reason:"sonic/route-listeners/open-conversation-with-member"})).then(e=>(a.dispatch(Object(ha.a)({channel:e.channel})),a.dispatch(Object(ma.a)({id:e.channel.id})),Promise.resolve(!1)))},Ta=a("+1yX"),Na=({nextTeamId:e,params:t={}}={})=>{const a=Object(O.getStoreInstanceByTeamId)(e),n=a.getState(),s=t.entityId;if(!Object(Ta.a)(s))return Promise.resolve();const r=Object(pa.e)(n,s);return Object(ja.qb)(r)||Object(ja.ib)(r)?Object(ja.tb)(r)?Promise.resolve():a.dispatch(Object(Sa.v)({channel:s,reason:"sonic/route-listeners/open-conversation-with-ids"})):Promise.resolve()},Aa=({nextTeamId:e,params:t={}}={})=>{const a=Object(O.getStoreInstanceByTeamId)(e),n=a.getState();if(!Object(Ta.a)(t.entityId))return Promise.resolve();const s=t.entityId,r=Object(pa.e)(n,s,!1);return Object(ja.ab)(r)?Object(ja.db)(r)?Promise.reject(new Error("tried to switch to a channel from another team")):Promise.resolve():a.dispatch(Object(Sa.f)({ids:[s],reason:"sonic/route-listeners/ensure-channel"})).then(({resolved:e}={})=>!(!e||!e.includes(s)))},Ra=a("NYva"),Ma=a("YSKj"),Pa=a("Fwh9"),xa=({nextTeamId:e,params:t={}}={})=>{const a=Object(O.getStoreInstanceByTeamId)(e),n=a.getState();return!Object(Pa.e)(n)||(!(t.tabId&&!Object(Ma.a)(t.tabId,t.entityId,n))||(a.dispatch(Object(Ra.a)({channelId:t.entityId})),!1))},La=a("m8R6"),Fa=a("X4vX");var Da=({prevTeamId:e,nextTeamId:t,routeName:a,reason:n,params:s={}}={})=>{const r=Object(O.getStoreInstanceByTeamId)(t),i=r.getState();if("clear_timestamp"===n)return;const o=Object(Ta.a)(s.entityId)&&s.entityId,l=s.timestamp,c=Object(He.c)(i),d=Object(Ta.a)(c.entityId)&&c.entityId;(t!==e||d!==o||l)&&(r.dispatch(Object(Fa.a)({channelId:o,startTs:l})),l&&Object(j.g)(a,Object(La.a)(s,"timestamp"),{reason:"clear_timestamp",shouldReplaceState:!0}))},Ba=a("dz01"),Ua=a("LzXF"),qa=({prevTeamId:e,nextTeamId:t,params:a={}}={})=>{const n=Object(O.getStoreInstanceByTeamId)(t),s=n.getState(),r=Object(Ta.a)(a.entityId)&&a.entityId,i=Object(He.c)(s),o=Object(Ta.a)(i.entityId)&&i.entityId;!Object(Ba.p)(s)||t===e&&o===r||n.dispatch(Object(Ua.g)(!1))},Ha=a("miRO");var Wa=({nextTeamId:e,routeName:t,reason:a,params:n={}}={})=>{const s=Object(O.getStoreInstanceByTeamId)(e),r=s.getState();if("clear_thread_timestamp"===a)return;const i=Object(He.c)(r).threadId;n.replyTs?s.dispatch(Object(Ha.i)(n.replyTs)):n.threadId!==i&&s.dispatch(Object(Ha.b)()),n.replyTs&&Object(j.g)(t,Object(La.a)(n,"replyTs"),{reason:"clear_thread_timestamp",shouldReplaceState:!0})},Ga=a("zoXk"),Ka=a("/gpl"),Va=a("1tsX"),za=({prevTeamId:e,nextTeamId:t,params:a={}}={})=>{if(e!==t)return;const n=Object(O.getStoreInstanceByTeamId)(t),s=n.getState(),r=Object(He.b)(s),i=Object(He.c)(s).entityId,o=a.entityId;if(i!==o){["channel_page","group_page","im_page"].includes(Object(Ga.c)(s))&&n.dispatch(Object(Tt.b)({flexOrigin:null}));const e=Object(Ga.f)(s);if(Object(Ta.a)(o)&&e&&r===la.a){n.dispatch(Object(Tt.c)({flexRestore:void 0}));const t=e.routeName,s=m()({},a,e.params);return void Object(j.g)(t,s,{reason:"flex-restore",shouldReplaceState:!0})}if(!Object(Ta.a)(o)&&r===la.d)return n.dispatch(Object(Tt.c)({flexRestore:{routeName:la.d}})),void Object(j.g)(la.a,a,{reason:"close-details",shouldReplaceState:!0});if(Object(Va.a)(s)){const t=!!Object(Ka.a)(o)||"apps"===o,l=!!Object(Ka.a)(i)||"apps"===i,c=t&&!l,d=l&&!t,u=Object(Ga.j)(s);if(c&&u)return n.dispatch(Object(Tt.c)({flexRestore:{routeName:r}})),void Object(j.g)(la.a,a,{reason:"close-flexpane-before-app-launcher",shouldReplaceState:!0});if(d){const t=e&&e.routeName;if(!Object(Ta.a)(o)&&t===la.d)return;if(n.dispatch(Object(Tt.c)({flexRestore:void 0})),!u&&e){const n=m()({},a,e.params);Object(j.g)(t,n,{reason:"flex-restore-after-app-launcher",shouldReplaceState:!0})}}}}},$a=a("hjTk"),Ya=({prevTeamId:e,nextTeamId:t,routeName:a,params:n})=>{if(Object(v.b)()||e===t)return!0;const s=Object(j.i)(a,m()({},n,{teamId:t})),r=Object(O.getStateForClientStore)(),i=Object(S.getWorkspacesMeta)(r),o=i&&i[t]&&i[t].subdomain,l=Object(v.a)(o)||`_team_${t}`;return Object($a.a)(s,l),!1},Qa=a("eoGz"),Xa=({prevTeamId:e,nextTeamId:t})=>{if(!Object(v.b)()||e===t)return!0;const a=Object(O.getStateForClientStore)();return!Object(S.isWorkspaceExpired)(a,t)||(Object(Qa.a)(t),!1)},Ja=a("3lVB"),Za=({prevTeamId:e,nextTeamId:t})=>e!==t?Object(O.dispatchForClientStore)(Object(Ue.e)(!0)):Object(O.dispatchForClientStore)(Object(Ue.e)(!1)),en=({nextTeamId:e,routeName:t,params:a})=>{const n={routeName:t,params:a};return Object(g.i)(e,"lastRoute",n),!0},tn=a("POHe");function an({prevTeamId:e}){const t=Object(O.getStoreInstanceByTeamId)(e);return Object(c.h)(t.getState())&&(t.dispatch(Object(He.d)(!0)),tn.a.delete("setNavigatedDuringWarmBoot")),Promise.resolve()}var nn=a("PXln"),sn=e=>{const t=Object(O.getStoreInstanceByTeamId)(e.nextTeamId);return"SlackHistoryEvent"!==e.reason||"learning-slack"!==e.params.entityId&&"Pwelcome"!==e.params.entityId||t.dispatch(Object(nn.f)("history")),!0},rn=a("YPPF"),on=a("OZf9"),ln=a("+uGN"),cn=a("g+Y+");const dn=Object(B.b)("Delete composer drafts without text or destination",(e,t,{ignoredDraftId:a}={})=>{const n=t(),s=Object(cn.e)(n);if(Object(Ye.a)(s))return;const r=[];Object(on.a)(s,(e,t)=>{Object(ln.r)(e)&&t!==a&&r.push(t)}),Object(Ye.a)(r)||e(Object(rn.a)({ids:r}))});dn.meta={name:"deleteEmptyDrafts",key:"draftsStoreThunksDeleteEmptyDraftsDeleteEmptyDrafts",description:"Delete composer drafts without text or destination"},dn.propTypes={ignoredDraftId:Z.default.string};var un=dn,pn=a("KCFn"),hn=a("wCpp");function mn({nextTeamId:e,prevTeamId:t,params:a={}}){var n=Object(O.getStoreInstanceByTeamId)(e);const s=n.dispatch,r=(0,n.getState)(),i=Object(Ga.j)(r),o=Object(cn.f)(r),l=a.entityId,c=a.threadId;const d=Object(pn.b)(c).threadTs;if(e===t){const e=Object(hn.a)(a.draftId);s(un({ignoredDraftId:e}))}const u=o.filter(e=>{var t=Object(pn.b)(e);const a=t.channelId,n=t.threadTs;return n?"thread"!==i||!d||d!==n:l!==a});return Object(Ye.a)(u)||s(Object(rn.c)({draftIds:u})),!0}var bn=a("obnc"),fn=a("MlY5"),_n=({prevTeamId:e,nextTeamId:t,params:a={}}={})=>{if(e!==t)return;const n=Object(O.getStoreInstanceByTeamId)(t),s=n.getState(),r=Object(He.c)(s).entityId,i=a.entityId;r!==i&&i in fn.a&&n.dispatch(Object(bn.b)({entity:fn.a[i]}))},gn=a("toaU");let yn=(On=Object($e.coroutine)(function*({prevTeamId:e,nextTeamId:t,navigationTimestamp:a}){const n=Object(O.getStateForClientStore)();if(Object(S.hasWorkspaceFailedToBoot)(n,t)||Object(S.isWorkspaceExpired)(n,t))return!0;const s=Object(O.getStoreInstanceByTeamId)(t).getState(),r=Object(He.c)(s),i=Object(He.b)(s)||la.a,o=!e;return yield Object($e.resolve)(Object(j.g)(i,m()({},r,{teamId:t}),{reason:"navigateToLastSavedRoute",shouldReplaceState:o,navigationTimestamp:a})),!1}),function(e){return On.apply(this,arguments)});var On;function Cn({nextTeamId:e,routeName:t,params:a}){Object(O.dispatchForClientStore)(Object(ze.setFocusedWorkspace)({teamId:e,routeName:t,params:a})),Object(O.getStoreInstanceByTeamId)(e)&&Object(O.dispatchForTeamId)(e,Object(He.e)({routeName:t,params:a}))}function vn({prevTeamId:e,nextTeamId:t}){if(!e||!t||e===t)return null;const a=window.location.search.match(/[&?]locale=([a-zA-Z-]*)/),n=a?a[1]:Object(g.d)(t,"user_locale");return Object(De.c)(n,t)}function En(){tn.a.set("maybeOpenOtherTeamInBrowser",Object(j.c)(Ya)),tn.a.set("maybeRedirectToSignin",Object(j.c)(Xa)),tn.a.set("startTeamSwitchTiming",Object(j.c)(Ja.a)),tn.a.set("navigateToLastSavedRoute",Object(j.c)(yn,[gn.a])),tn.a.set("attemptToStopEditingInChannel",Object(j.c)(ua,[])),tn.a.set("openConversationWithMember",Object(j.c)(wa,[])),tn.a.set("openConversationWithIds",Object(j.c)(Na,[])),tn.a.set("ensureChannel",Object(j.c)(Aa,[])),tn.a.set("validateChannelTab",Object(j.c)(xa)),tn.a.set("syncMessagePane",Object(j.b)(Da,[])),tn.a.set("closeAppSpace",Object(j.b)(qa,[])),tn.a.set("syncThreadFlexpane",Object(j.b)(Wa,[la.k])),tn.a.set("syncFlexpane",Object(j.b)(za,[])),tn.a.set("setNavigatedDuringWarmBoot",Object(j.b)(an)),tn.a.set("draftsListener",Object(j.b)(mn)),tn.a.set("syncActiveBrowserEntity",Object(j.b)(_n)),tn.a.set("syncRouteStoreWithUrl",Object(j.b)(Cn)),tn.a.set("ensureCorrectLocaleForTeam",Object(j.b)(vn)),tn.a.set("setShouldLogTeamSwitchMetrics",Object(j.b)(Za)),tn.a.set("setLocalConfigForTeamWithKey",Object(j.b)(en)),tn.a.set("setWelcomePlacePageEntryPoint",Object(j.b)(sn))}Object(Qe.a)("router.listeners",()=>[...tn.a.entries()]);var kn=a("lKeU"),Sn=a("8sNt"),jn=a("aaWX"),In=a("qOjI"),wn=a("Fsnq"),Tn=a("owWc"),Nn=a("HDs8"),An=a("kiPk");const Rn=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Mn=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Pn=(e,t,a,n=2,s=!0)=>{if(0===e)return 0;if(t===a)return parseFloat(e.toFixed(n));const r=s?1024:1e3,i=s?Rn:Mn,o=i.findIndex(e=>e.toLowerCase()===t.toLowerCase()),l=i.findIndex(e=>e.toLowerCase()===a.toLowerCase());if(-1===o)throw new Error(`Unknown currentType '${t}' passed to convertToSize`);if(-1===l)throw new Error(`Unknown desiredType '${a}' passed to convertToSize`);return o<l?parseFloat((e/r**(l-o)).toFixed(n)):parseFloat((e*r**(o-l)).toFixed(n))},xn=(e,t=2)=>Pn(e,"B","MB",t,!1),Ln=(e,t=2)=>Pn(e,"KB","MB",t,!1);var Fn=a("Smdl");const Dn=Object(d.b)(),Bn=e=>{if(!Object(L.fb)())return Promise.resolve(null);const t=Object(L.D)(),a=Object(L.r)(),n=Object(L.q)()||Promise.resolve();return Promise.all([t,a,n]).then(([t,a,s])=>{const r={};if(navigator&&navigator.hardwareConcurrency){const t=Object(An.a)(a,e=>e.cpu.percentCPUUsage*navigator.hardwareConcurrency);r[`cpu_v4_app_${e}_teams`]=t.toFixed(2)}if(Object(N.m)("4.0.0"))if(s){t&&(r.memory_v4_mb_full_client=Math.ceil(Ln(t.private)));const a=Object(An.a)(s,e=>e.memory.private),n=a+Object(An.a)(s,e=>e.memory.shared),i=Math.ceil(Ln(a)),o=Math.ceil(Ln(n));r[`memory_v4_app_mb_${e}_teams`]=o,r[`memory_v4_app_private_mb_${e}_teams`]=i}else Dn.error("STATS",`No memory stats collected getAppMemoryUsage:${L.q} appMemoryMetricsUsage:${n}`,{subtype:"stats_no_memory"});else{t&&(r.memory_v4_mb_full_client=Math.ceil(Ln(t.privateBytes)));const n=Object(An.a)(a,e=>e.memory.privateBytes),s=Object(An.a)(a,e=>e.memory.workingSetSize),i=Math.ceil(Ln(n)),o=Math.ceil(Ln(s));r[`memory_v4_app_mb_${e}_teams`]=o,r[`memory_v4_app_private_mb_${e}_teams`]=i}return window.performance&&window.performance.memory&&(r[`heap_v4_used_mb_${e}_teams`]=xn(performance.memory.usedJSHeapSize),r[`heap_v4_total_mb_${e}_teams`]=xn(performance.memory.totalJSHeapSize)),r}).catch(e=>Dn.warn("metrics: Invalid data returned by desktop.stats",e.message))},Un=()=>{if(!Object(L.fb)())return Promise.resolve(null);const e=Object(L.D)(),t=Object(L.r)(),a=Object(L.q)()||Promise.resolve();return Promise.all([e,t,a]).then(([e,t,a])=>{const n={},s=t.filter(e=>"Tab"===e.type).length-1;if(navigator&&navigator.hardwareConcurrency){const e=Object(An.a)(t,e=>e.cpu.percentCPUUsage*navigator.hardwareConcurrency);n[`cpu_v3_app_${s}_teams`]=e.toFixed(2)}if(Object(N.m)("4.0.0")){if(a){e&&(n.memory_v3_team_mb_full_client=Math.ceil(Ln(e.private)));const t=Object(An.a)(a,e=>e.memory.private),r=t+Object(An.a)(a,e=>e.memory.shared),i=Math.ceil(Ln(t)),o=Math.ceil(Ln(r));n[`memory_v3_app_mb_${s}_teams`]=o,n[`memory_v3_app_private_mb_${s}_teams`]=i}}else{e&&(n.memory_v3_team_mb_full_client=Math.ceil(Ln(e.privateBytes)));const a=Object(An.a)(t,e=>e.memory.privateBytes),r=Object(An.a)(t,e=>e.memory.workingSetSize),i=Math.ceil(Ln(a)),o=Math.ceil(Ln(r));n[`memory_v3_app_mb_${s}_teams`]=o,n[`memory_v3_app_private_mb_${s}_teams`]=i}return n}).catch(e=>Dn.warn("metrics: Invalid data returned by desktop.stats",e.message))};Object(Qe.a)("ssbMetrics",{fetchMemoryStatsV3:Un,fetchMemoryStatsV4:Bn});const qn=18e4,Hn=36e5,Wn=6e5;function Gn(){if(!Object(N.v)())return Promise.resolve();const e=Object(A.a)();function t(){const t=Object(O.getStateForClientStore)(),a=Object(S.getBootedWorkspaces)(t).length;return Bn(a).then(t=>{if(!t)return null;return Object.keys(t).forEach(a=>e.store(a,t[a])),t})}const a=Hn+Math.floor(Math.random()*Wn);return setInterval(()=>t(),a),setTimeout(()=>t(),qn),Promise.resolve()}function Kn(){if(!Object(q.a)(1))return;const e="store_metrics_v3";const t=Hn+Math.floor(Math.random()*Wn);setInterval(()=>(function(){const t=Object(O.getStateForClientStore)();Object(S.getBootedWorkspaces)(t).forEach(t=>{const a=Object(O.getStateByTeamId)(t);if(!a)return;const n=Object(A.c)({state:a});n.mark(`${e}_size_compute_time`);const s=Object(wn.a)(a.files);n.count(`${e}_count_files`,s);const r=Object(wn.a)(a.members);n.count(`${e}_count_members`,r);const i=Object(wn.a)(a.channels);n.count(`${e}_count_channels`,i);const o=Object(Tn.a)(a.messages,(e,t)=>e+Object(wn.a)(t),0);n.count(`${e}_count_messages`,o),n.count(`${e}_count_total`,s+r+i+o);const l=Object(u.c)(a,"redux_cache_eviction_schedule");l&&(n.count(`${e}_count_files_schedule_${l}`,s),n.count(`${e}_count_members_schedule_${l}`,r),n.count(`${e}_count_channels_schedule_${l}`,i),n.count(`${e}_count_messages_schedule_${l}`,o)),n.measureAndClear(`${e}_size_compute_time`)})})(),t)}function Vn(e){const t=new Nn.a,a=(...e)=>Object(d.b)().info("SW-CACHE-API-QUEUE",...e),n=e.bootAssets,s=e.teamId,r=e.teamToken,i=e.userId,o=(0,n.getWorkspacesMetaFromLocalConfig)(),l=Object(A.a)();Object(vt.e)({bootQueue:t,infoLogger:a,shouldCache:!0,teamId:s,token:r,userId:i}).then(()=>{l.count("cached_api_fetch_success_experiments")}).catch(()=>{l.count("cached_api_fetch_failure_experiments")}),Object.keys(o).forEach(e=>{var n=o[e];const s=n.isExpired,r=n.token;s||Object(vt.f)({bootQueue:t,infoLogger:a,teamId:e,token:r,shouldCache:!0}).then(()=>{l.count("cached_api_fetch_success_features")}).catch(()=>{l.count("cached_api_fetch_failure_features")})})}function zn(e){if(Object(q.a)(1)){const t=e.bootAssets.getGenericTelemeter();if(window.PerformanceObserver&&window.PerformanceLongTaskTiming){new PerformanceObserver(e=>{const a=e.getEntries();a&&a.forEach(e=>{"longtask"===e.entryType&&t.store("longtask_sonic",e.duration)})}).observe({entryTypes:["longtask"]})}}}var $n=a("EKWK"),Yn=a("/Bt+"),Qn=a("AUAP"),Xn=a("DO5Y"),Jn=a("JHHQ"),Zn=a("7ob2"),es=a("kKpd"),ts=a("7tsZ"),as=a("zBEu"),ns=a("ayyL"),ss=a("bDqM"),rs=a("GlmH"),is=a("FP5A"),os=a("7EGn"),ls=a("K2Qr"),cs=a("vmJv");const ds=Object(B.b)("Starts the Joiner Landing Place onboarding experience",(()=>{var e=Object($e.coroutine)(function*(e,t){const a=t(),n=Object(cs.a)(a);if(Object(Ta.a)(n)){const t=e(Object(ls.g)({channelId:n})),a=yield Object($e.resolve)(t.promise||Promise.resolve(t));Object(os.a)(a,"counts.member_count",26)<=25&&e(Object(Zn.c)(!0))}return e(Object(is.a)())});return function(t,a){return e.apply(this,arguments)}})());ds.meta={name:"startJoinerLandingPlace",key:"onboardingStoreThunksStartJoinerLandingPlaceStartJoinerLandingPlace",description:"Starts the Joiner Landing Place onboarding experience"};const us=Object(B.b)("Starts joiner onboarding",(()=>{var e=Object($e.method)(function(e,t){const a=t();return Object(Fn.a)()?(e(Object(Zn.b)(!0)),Object(ns.r)(a)?(e(Object(is.a)()),Promise.resolve()):e(ds())):Object(ns.r)(a)?(e(Object(Zn.b)(!0)),e(Object(is.a)()),Object(ns.s)(a)&&!Object(rs.a)(a)?(e(Object(ss.d)()),e(Object(ma.a)({id:"Pwelcome",fromHistory:!1,replaceHistoryState:!1}))):Promise.resolve()):Object(as.f)()});return function(t,a){return e.apply(this,arguments)}})());us.meta={name:"startJoinerOnboarding",key:"onboardingStoreThunksStartJoinerOnboardingStartJoinerOnboarding",description:"Starts joiner onboarding"};var ps=a("t3J7"),hs=a("7nxQ");const ms=Object(ee.a)("Trigger Slackbot channel suggestions (if any available)",e=>e(Object(te.a)({method:"channels.suggestions",args:{},reason:"channels-suggestions"})));ms.meta={name:"channelsSuggestions",key:"fetchersChannelsSuggestionsApiChannelsSuggestions",description:"Trigger Slackbot channel suggestions (if any available)"};var bs=a("9svP");const fs=Object(B.b)("Trigger Slackbot channel suggestions (if any available)",(e,t)=>{const a=Object(bs.a)(75,-.6,.6);setTimeout(()=>{const a=t();Object(Fn.a)()&&!Object(Ga.k)(a)||e(ms())},1e3*a)});fs.meta={name:"maybeSendChannelsSuggestions",key:"actionsMaybeSendChannelsSuggestionsMaybeSendChannelsSuggestions",description:"Trigger Slackbot channel suggestions (if any available)"};var _s=fs;function gs(e,t,a,n={},s={}){const r=t.teamData,i=t.viewData,o=t.featureFlagData,l=t.experimentsData,c=t.miscBootData,p=m()({},o,n);Object(d.b)().info("BOOT",`(${r.id}) Dispatching boot data`),e.dispatch(Object(_.s)(m()({},p,c))),e.dispatch(Object(u.a)(l)),s&&s.all&&e.dispatch(Object(u.d)(s.all)),s&&s[r.id]&&e.dispatch(Object(u.d)(s[r.id])),e.dispatch(ge(t)),c.welcomePlaceOnboardingData&&e.dispatch(Object(nn.h)(m()({},c.welcomePlaceOnboardingData,{lastUsedLocale:Object(hs.f)()})));let h="";if(c.shouldStartJoinerOnboarding&&(c.welcomePlaceOnboardingData?h="learning-slack":r.onboarding_channel_id&&(h=r.onboarding_channel_id)),h){const t=a&&a.params||{};e.dispatch(Object(He.e)({routeName:la.a,params:m()({},t,{entityId:h})}))}else if(i&&i.messagesData){const t=i.messagesData,n=i.membersData,s=i.botsData,r=t.channelId,o=m()({},t,{msgs:e.dispatch(Object(Xn.a)({imsgs:t.msgs,channelId:r}))});if(e.dispatch(Object(ce.a)({members:n})),e.dispatch(Object(Qn.a)({bots:s})),e.dispatch(Object(Jn.a)(o)),n&&n.length&&e.dispatch(Object(Me.f)({ids:n.map(e=>e.id),fetchConditionally:!1})).then(({members:t}={})=>{e.dispatch(Object(ce.a)({members:t}))}),p.feature_channel_actions_client&&i.channelActionsData&&e.dispatch(Object(ts.d)(i.channelActionsData)),!Object(He.f)(e.getState())){const n=a&&a.routeName,s=a&&a.params||{};e.dispatch(Object(He.e)({routeName:a&&n!==gn.a?n:la.a,params:m()({},s,{entityId:t.channelId})}))}}else e.dispatch(Object(He.e)({routeName:a.routeName,params:a.params}));return c.teamCreationWorkflow&&e.dispatch(Object(es.F)(c.teamCreationWorkflow)),c.shouldStartCreatorOnboarding?e.dispatch(Object(Zn.a)(!0)):c.shouldStartJoinerOnboarding&&(c.welcomePlaceOnboardingData&&e.dispatch(Object(nn.b)()),e.dispatch(Object(Zn.e)(r.onboarding_channel_id)),e.dispatch(us())),Object(Pa.e)(e.getState())&&t.channelsPrefsData&&e.dispatch(Object(ps.a)(t.channelsPrefsData)),e.dispatch(_s()),e}var ys=a("SZMM");function Os(e){Object(Qe.c)(e,"openGantryApp",(...t)=>Object(O.dispatchForTeamId)(e,Object(ys.f)(...t)))}a.d(t,"getTracer",function(){return Yn.b}),a.d(t,"startWorkspaceSignIn",function(){return ze.startWorkspaceSignIn}),a.d(t,"configureStore",function(){return Te}),a.d(t,"dispatchBootData",function(){return gs}),a.d(t,"getClientStoreInstance",function(){return O.getClientStoreInstance}),a.d(t,"getStoreInstanceByTeamId",function(){return O.getStoreInstanceByTeamId}),a.d(t,"processStoredState",function(){return dt}),a.d(t,"getImmediatelyPersistedState",function(){return ut.c}),a.d(t,"checkForPersistenceMethodChanges",function(){return rt}),a.d(t,"getWindow",function(){return Ae.c}),a.d(t,"loadAppActions",function(){return Re.a}),a.d(t,"maybeReloadEmoji",function(){return i.c}),a.d(t,"maybeReloadSlashCommands",function(){return pe.c}),a.d(t,"fetchAndUpsertWhatsNewUpdates",function(){return xe.b}),a.d(t,"localesEnabled",function(){return Fe.l}),a.d(t,"getLocaleFeatureFlags",function(){return _.g}),a.d(t,"resetCredentials",function(){return g.g}),a.d(t,"queryStringParse",function(){return b.m}),a.d(t,"removeUrlQueryStringValue",function(){return b.n}),a.d(t,"populateTeamDebugger",function(){return Os}),a.d(t,"purgeStoredModel",function(){return pt.a}),a.d(t,"reducers",function(){return n}),a.d(t,"setLocalConfigForTeamWithKey",function(){return g.i}),a.d(t,"setWindow",function(){return Ae.k}),a.d(t,"setWorkspaceBooted",function(){return k.setWorkspaceBooted}),a.d(t,"setWillNavigateToUnbootedWorkspaceId",function(){return k.setWillNavigateToUnbootedWorkspaceId}),a.d(t,"getWillNavigateToUnbootedWorkspaceId",function(){return S.getWillNavigateToUnbootedWorkspaceId}),a.d(t,"hasWorkspaceFailedToBoot",function(){return S.hasWorkspaceFailedToBoot}),a.d(t,"isWorkspaceMigrating",function(){return S.isWorkspaceMigrating}),a.d(t,"setWorkspaceFailedToBoot",function(){return k.setWorkspaceFailedToBoot}),a.d(t,"setWorkspaceIsMigrating",function(){return k.setWorkspaceIsMigrating}),a.d(t,"setWorkspaceIsAccessLimited",function(){return k.setWorkspaceIsAccessLimited}),a.d(t,"start",function(){return T.j}),a.d(t,"initPersistenceForTeam",function(){return Ne.b}),a.d(t,"upsertMembers",function(){return ce.a}),a.d(t,"fetchRawMembersById",function(){return Me.f}),a.d(t,"getMembersById",function(){return Pe.g}),a.d(t,"setBootType",function(){return Ae.i}),a.d(t,"getTelemeter",function(){return A.c}),a.d(t,"isJsPath",function(){return N.o}),a.d(t,"mountClient",function(){return qe.a}),a.d(t,"maybeCountServiceWorkerNetworkStackFailureRefresh",function(){return Le.b}),a.d(t,"maybeReloadForMinVersionBumpFromApi",function(){return kt}),a.d(t,"maybeReloadForMinVersionBumpFromBootData",function(){return St}),a.d(t,"getRouteName",function(){return He.b}),a.d(t,"getRouteParams",function(){return He.c}),a.d(t,"updateCurrentRoute",function(){return He.e}),a.d(t,"navigateToRoute",function(){return j.g}),a.d(t,"getCurrentRouteInfo",function(){return j.e}),a.d(t,"createDesktopDelegate",function(){return F.a}),a.d(t,"registerServiceWorker",function(){return We.d}),a.d(t,"overrideExperimentAssignments",function(){return u.d}),a.d(t,"initializeWorkspacesStore",function(){return k.initialize}),a.d(t,"configureClientStore",function(){return ia}),a.d(t,"registerRouteListeners",function(){return En}),a.d(t,"getAllWorkspacesFromLocalConfig",function(){return kn.a}),a.d(t,"getWorkspacesMetaFromLocalConfig",function(){return y}),a.d(t,"getLocale",function(){return De.a}),a.d(t,"setLocale",function(){return De.c}),a.d(t,"loadEmojiTranslations",function(){return Be.a}),a.d(t,"saveColorsToLocalConfig",function(){return Sn.a}),a.d(t,"connectSocket",function(){return Ge.b}),a.d(t,"isReload",function(){return N.u}),a.d(t,"createInstanceForTeam",function(){return jn.a}),a.d(t,"isQa",function(){return N.t}),a.d(t,"isDev",function(){return N.l}),a.d(t,"isProduction",function(){return N.s}),a.d(t,"getDesktopPreloadTime",function(){return Ct.d}),a.d(t,"storeSSBMemoryStatsOnAnInterval",function(){return Gn}),a.d(t,"storeReduxStoreStatsOnAnInterval",function(){return Kn}),a.d(t,"registerGlobalErrorHandler",function(){return ft}),a.d(t,"registerGlobalBeforeunloadHandler",function(){return yt}),a.d(t,"registerNetworkConnectivityListener",function(){return In.a}),a.d(t,"forceColdBoot",function(){return Ot.a}),a.d(t,"clearAllPersistedDataExceptForTeamIds",function(){return $n.a}),a.d(t,"setShouldLogTTUMetrics",function(){return Ue.c}),a.d(t,"setShouldLogAppBootMetrics",function(){return Ue.b}),a.d(t,"isServiceWorkerAvailable",function(){return N.x}),a.d(t,"fetchApiCallsForCaching",function(){return Vn}),a.d(t,"ttiPolyfill",function(){return r.a}),a.d(t,"listenForLongTasks",function(){return zn}),a.d(t,"getGenericTelemeter",function(){return A.a})},Oxmb:function(e,t,a){},P5pr:function(e,t,a){},PIS5:function(e,t,a){},PQ52:function(e,t,a){},PRpv:function(e,t,a){},PhaV:function(e,t,a){},Pl1I:function(e,t,a){"use strict";var n=a("ifKl"),s=a("aK/h"),r=a("q1tI"),i=a.n(r),o=a("MnCE"),l=a("nNoG"),c=a("s19S"),d=a("Atrf");const u=new l.b("app_card"),p=(s.default.string,s.default.string,s.default.string,s.default.string,s.default.bool.isRequired,s.default.bool,s.default.func,s.default.bool,{appType:void 0,memberId:void 0,appHomeTeamDisplayName:void 0,appName:"this app",installerIsYou:!1,onMemberClick:n.a,featureAddAppHomeTeamName:!1});function h({appType:e,memberId:t,appName:a,isError:n,installerIsYou:s,onMemberClick:r,appHomeTeamDisplayName:o,featureAddAppHomeTeamName:l}){let p;if(s)p=u.rt("You added {appName} to this workspace.",{appName:a});else{const n=i.a.createElement(d.a,{id:t,onClick:e=>{e.preventDefault(),Object(c.i)(t),r()}});p=o&&l?u.rt("{appName} is installed on {appHomeTeamDisplayName}.",{appHomeTeamDisplayName:o,appName:a}):"custom_integration"===e?u.rt("{installer} added this custom integration to this workspace.",{installer:n,appName:a}):"slack"===e?u.rt("{installer} configured {appName} to post in this channel.",{installer:n,appName:a}):u.rt("{installer} added {appName} to this workspace.",{installer:n,appName:a})}return n?null:i.a.createElement("div",{className:"p-app_profile_card__installation_summary","data-qa":"app_card_installation_summary"},i.a.createElement("span",{"data-qa-app-profile-card-installation-summary":!0},p))}h.defaultProps=p,t.a=Object(o.a)(h)},"Q/6m":function(e,t,a){"use strict";a.d(t,"b",function(){return E});var n=a("QbLZ"),s=a.n(n),r=a("ifKl"),i=a("q1tI"),o=a.n(i),l=a("aK/h"),c=a("XHGt"),d=a("TSYQ"),u=a.n(d),p=a("h0LD"),h=a("0wDQ"),m=a("pfyZ"),b=a("hOQf"),f=a("lfjV"),_=a("EHyS"),g=a("HOOb");a("TJrU");const y=Object(i.createContext)(r.a),O=3e3,C=200,v=(l.default.object,l.default.string,l.default.bool,l.default.func,l.default.bool,l.default.func,l.default.node,l.default.bool,l.default.func,l.default.func,{msg:void 0,className:void 0,hover:!0,onClick:r.a,highlight:void 0,clearHighlight:r.a,children:void 0,isDeleting:void 0,removeMessageAndTimestamp:r.a,logMessage:l.default.func});class MessageBackground extends i.PureComponent{constructor(e){super(e),this.setBackground=this.setBackground.bind(this),this.onClick=this.onClick.bind(this),this.onDeleteAnimationEnd=this.onDeleteAnimationEnd.bind(this),this.onDeleteAnimationTick=this.onDeleteAnimationTick.bind(this),this.highlightTimer=null,this.state={},this.ref=o.a.createRef()}componentDidMount(){this.props.highlight&&this.startHighlightTimer(),this.props.isDeleting&&this.onDeleteAnimationEnd()}componentDidUpdate(e){!e.highlight&&this.props.highlight&&this.startHighlightTimer(),!e.isDeleting&&this.props.isDeleting&&this.startDeleteAnimation()}componentWillUnmount(){this.highlightTimer&&(clearTimeout(this.highlightTimer),this.props.clearHighlight()),this.deleteAnimation&&(this.deleteAnimation.cancel(),this.onDeleteAnimationEnd())}onClick(e){const t=this.props.msg;e.shiftKey&&Object(_.a)(e)&&!Object(g.a)(e.target)&&(e.preventDefault(),this.props.logMessage({channelId:t.channel,ts:t.ts})),this.props.onClick(e)}onDeleteAnimationEnd(){const e=this.props.msg;this.props.removeMessageAndTimestamp({channelId:e.channel,ts:e.ts}),this.deleteAnimation=null}onDeleteAnimationTick({value:e,nextTick:t}){this.setState(()=>({height:e}),t)}setBackground(e){this.setState(t=>s()({},t,e))}startDeleteAnimation(){const e=this.ref.current&&this.ref.current.clientHeight||0;this.deleteAnimation=Object(f.a)({fromValue:e,toValue:0,duration:C,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}startHighlightTimer(){this.highlightTimer&&clearTimeout(this.highlightTimer),this.highlightTimer=setTimeout(()=>{this.highlightTimer=null,this.props.clearHighlight()},O)}render(){const e=this.state.height,t="number"==typeof e?{height:e}:null,a=u()("c-message_kit__background",{"c-message_kit__background--hovered":this.props.hover&&this.state.hover,"c-message_kit__background--labels":this.state.labels,[`c-message_kit__background--labels--${this.state.labels}`]:this.state.labels,"c-message_kit__background--editing":this.state.editing,"c-message_kit__background--highlight":this.props.highlight,"c-message_kit__background--deleting":this.props.isDeleting},this.props.className);return o.a.createElement(y.Provider,{value:this.setBackground},o.a.createElement("div",{role:"document",className:a,ref:this.ref,style:t,onClick:this.onClick,"data-qa":"message_container","data-qa-unprocessed":Object(b.xb)(this.props.msg)},this.props.children))}}MessageBackground.displayName="MessageBackground",MessageBackground.defaultProps=v;function E(e){return function(t){return o.a.createElement(y.Consumer,null,a=>o.a.createElement(e,s()({},t,{setBackground:a})))}}t.a=Object(c.b)(function(e,{msg:t}){let a=!1;t&&(a=Object(m.e)(e,{channelId:t.channel,ts:t.ts}).isDeleting);return{isDeleting:a}},e=>({removeMessageAndTimestamp:t=>e(Object(h.a)(t)),logMessage:t=>e(Object(p.a)(t))}))(MessageBackground)},Q2Pv:function(e,t,a){},Q3H4:function(e,t,a){},Q3oM:function(e,t,a){"use strict";a.d(t,"b",function(){return b});var n=a("QbLZ"),s=a.n(n),r=a("ifKl"),i=a("q1tI"),o=a.n(i),l=a("aK/h"),c=a("TSYQ"),d=a.n(c),u=a("ubOb"),p=a("Q/6m");const h=Object(i.createContext)({hover:!1,setHover:r.a}),m=(l.default.string,l.default.node,l.default.bool,l.default.func,l.default.string,l.default.bool,l.default.bool,l.default.func,l.default.func,{className:null,children:void 0,hovered:!1,setBackground:r.a,"data-qa":void 0,hasKeyboardFocus:!1,hasKeyboardFocusWithin:!1,onFocus:r.a,onBlur:r.a});class MessageHover extends i.PureComponent{constructor(e){super(e),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMutation=this.onMutation.bind(this),this.setHover=this.setHover.bind(this),this.hoveredElement=null,this.mutationObserver=null,this.state={hoverCount:0,hover:!1}}componentDidMount(){this.setBackground()}componentDidUpdate(){this.setBackground()}componentWillUnmount(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}onMouseOver({target:e,currentTarget:t,relatedTarget:a}){t.contains(e)&&(t.contains(a)||(this.setHover(!0),this.mutationObserver||(this.mutationObserver=new MutationObserver(this.onMutation),this.mutationObserver.observe(t,{childList:!0,subtree:!0}))),this.hoveredElement=e)}onMouseOut({target:e,currentTarget:t,relatedTarget:a}){t.contains(e)&&this.hoveredElement&&(t.contains(a)||(this.setHover(!1),this.hoveredElement=null,this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)))}onMutation(e){e.some(e=>Array.from(e.removedNodes).some(e=>e.contains(this.hoveredElement)))&&(this.hoveredElement=null,this.setHover(!1))}setHover(e){this.setState(t=>{const a=Math.max(0,t.hoverCount+(e?1:-1));return{hoverCount:a,hover:a>0}})}setBackground(){this.props.setBackground({hover:this.isHovered()})}isHovered(){const e=this.props.hovered||this.state.hover,t=this.props.hasKeyboardFocus||this.props.hasKeyboardFocusWithin;return e||t}render(){const e=this.isHovered(),t=d()("c-message_kit__hover",{"c-message_kit__hover--hovered":e},this.props.className),a=this.props["data-qa"];return o.a.createElement(h.Provider,{value:{hover:e,setHover:this.setHover}},o.a.createElement("div",{role:"document",className:t,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onFocus:this.props.onFocus,onBlur:this.props.onBlur,"data-qa":a},this.props.children))}}function b(e){return function(t){return o.a.createElement(h.Consumer,null,({hover:a,setHover:n})=>o.a.createElement(e,s()({},t,{hover:a,setHover:n})))}}MessageHover.displayName="MessageHover",MessageHover.defaultProps=m,t.a=Object(p.b)(Object(u.a)(MessageHover))},QSlP:function(e,t,a){},QkOX:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("hbEN"),i=a("ifKl"),o=a("q1tI"),l=a.n(o),c=a("XHGt"),d=a("ANjH"),u=a("aK/h"),p=a("nNoG"),h=a("kOzZ"),m=a("za+y"),b=a("O5cs"),f=a("qPro");const _=new p.b("apps_browser"),g=(u.default.object.isRequired,u.default.bool,u.default.oneOfType([u.default.object,u.default.func]),u.default.func,u.default.func,u.default.bool,u.default.string,u.default.string,{isAppLauncher:!1,forwardedRef:void 0,searchAppsIfNeeded:i.a,setSearchInput:i.a,isLoading:!1,searchInput:"",className:""});class AppsBrowserFilter extends o.Component{constructor(e){super(e),this.handleSearchInputChange=this.handleSearchInputChange.bind(this),this.searchApps=this.searchApps.bind(this),this.debouncedSearchApps=Object(r.a)(this.searchApps,300)}handleSearchInputChange(e){let t="";e.target.value&&(t=e.target.value),""===t.trim()&&(t=t.trim()),t!==this.props.searchInput&&(this.props.setSearchInput({searchInput:t}),this.debouncedSearchApps(t))}searchApps(e){var t=this.props;const a=t.clogger,n=t.isAppLauncher;e.length>0&&a.track("APP_INDEX_SEARCH"),this.props.searchAppsIfNeeded({isAppLauncher:n,searchInput:e})}render(){var e=this.props;const t=e.isLoading,a=e.searchInput,n=e.forwardedRef,s=e.className;return l.a.createElement(f.a,{ref:n,className:s,placeholder:_.t("Search by name or category (e.g. productivity, sales)"),icon:"search",autoFocus:!0,isLoading:t,onChange:this.handleSearchInputChange,value:a,"data-qa":"apps_browser__filter_input",inputAriaLabel:_.t("Search apps by name or category (e.g. productivity, sales)",{fallbackHash:"34fa4221db1bf66f5b9f47b2cb2e449c97fc453d"})})}}AppsBrowserFilter.displayName="AppsBrowserFilter",AppsBrowserFilter.defaultProps=g;const y=Object(c.b)(e=>({clogger:Object(h.a)({state:e}),isLoading:Object(b.m)(e),searchInput:Object(b.s)(e)}),e=>Object(d.b)({searchAppsIfNeeded:m.h,setSearchInput:m.u},e))(AppsBrowserFilter);t.a=l.a.forwardRef((e,t)=>l.a.createElement(y,s()({},e,{forwardedRef:t})))},Qsz7:function(e,t,a){},Qv4Q:function(e,t,a){"use strict";var n=a("W3KZ"),s=a("X6iR"),r=a("OZf9"),i=a("IzLi"),o=a("gSGL"),l=a("fujP"),c=a("rWF5");var d=e=>{const t={},a={},n=Object(c.q)()?"apple":"google";Object(r.a)(e,(e,r)=>{if(!r)return;if(Object(s.a)(e,"alias:"))return void(t[r]=e.slice("alias:".length));let l;Object(o.a)(e)?l=e:Object(i.a)(e)&&(l=e[n]),l&&(a[r]=l)});const d={};return Object(l.a)(a)||(d.emojis=a),Object(l.a)(t)||(d.aliases=t),d},u=a("eK75"),p=a("LAi+");let h;var m=()=>{if(h)return h;const e=Object(u.a)().source;return h=new RegExp(`^(\\+|\uff0b|-|\uff0d) {0,1}(${e})\\s*$`)},b=a("WVKS"),f=a("aLpA");const _=/[-[\]{}()*+?.,\\^$|#\s]/g,g=/\n?(6\)|7\))/;var y=e=>{let t=0;const a=[];let n=e.replace(Object(p.a)(),(n,s,r,i)=>{const o=t;t=i+n.length;const l=-1!==r.indexOf("("),c=-1!==r.indexOf(")");if((l||c)&&-1===a.indexOf(r)&&a.push(r),c&&!l){const t=e.substring(o,i);if(-1!==t.indexOf("(")&&-1===t.indexOf(")"))return n}if("\n8)"===n){const t=e.substring(0,i);if(g.test(t))return n}return f.l[r]?`${s}:${f.l[r]}:`:n});if(a.length){const e=a.map(e=>e.replace(_,"\\$&")),t=new RegExp(`(\\(.+)(${e.join("|")})(.+\\))`,"g");n=n.replace(t,(e,t,a,n)=>f.l[a]?`${t}:${f.l[a]}:${n}`:e)}return n},O=a("yHhI");var C=e=>{if(!Object(o.a)(e))return null;try{const a=e.split("-").map(e=>`0x${e}`);return String.fromCodePoint(...a)}catch(t){Object(O.b)().info("Error converting unicode sequence to native emoji: ",t)}return null},v=a("nKoU"),E=a("bPB8");var k=e=>{if(!Object(o.a)(e))return null;const t=[...e].map(e=>{const t=e.codePointAt(0);if(!t)return null;const a=t.toString("16");return Object(v.a)(a,4,"0")});return Object(E.a)(t).join("-")};a.d(t,"g",function(){return n.a}),a.d(t,"i",function(){return d}),a.d(t,"c",function(){return u.a}),a.d(t,"d",function(){return p.a}),a.d(t,"f",function(){return m}),a.d(t,"e",function(){return b.a}),a.d(t,"h",function(){return y}),a.d(t,"b",function(){return C}),a.d(t,"a",function(){return k})},Qwh8:function(e,t,a){},"R//h":function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=(a("aK/h"),a("XHGt")),i=a("/Rx2"),o=a("RQI5");const l=e=>s.a.createElement(o.a.Provider,{value:e.userAttentionIsOnChat},e.children);l.displayName="UserAttentionProvider",l.defaultProps={userAttentionIsOnChat:!0};t.a=Object(r.b)(e=>({userAttentionIsOnChat:Object(i.e)(e)}))(l)},RHBl:function(e,t,a){},RJyz:function(e,t,a){},"RQ+B":function(e,t,a){},RQI5:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n);t.a=s.a.createContext(!0)},"RX/a":function(e,t,a){"use strict";var n=a("ifKl"),s=a("aK/h"),r=a("q1tI"),i=a.n(r),o=a("tn36"),l=a("TSYQ"),c=a.n(l),d=a("QbLZ"),u=a.n(d),p=a("XHGt"),h=a("M4HD"),m=a("MMa9"),b=a("1zbP"),f=a("AE1P"),_=a("7ajy"),g=a("V/As"),y=a("Rrdp"),O=a("ukeO"),C=a("/3PZ"),v=a("A+cF"),E=a("od5y"),k=a("kd6D"),S=a("yPgC");a("KrOh");const j=k.a.small,I=(s.default.string,s.default.bool,s.default.bool,S.a.maybeUnknown(S.a.App.isRequired).isRequired,S.a.maybeUnknown(S.a.AppGlobalAction.isRequired).isRequired,{className:void 0,isDeactivated:!1,invert:!1});function w({className:e,app:t,action:a,isDeactivated:n,invert:s}){const r=s&&!n;let o,l;const c=Object(b.b)(a)?Object(m.a)(a):null;if(Object(b.b)(t)&&Object(b.b)(a)){o=Object(h.b)(t);const e=Object(g.b)(t,j);l=(t=>i.a.createElement(O.a,u()({},t,{classes:t.className,image:e,ariaHidden:!0})))}else o=i.a.createElement(y.a,{type:Object(b.d)(t)?"unknown":"non-existent",invert:r}),l=(e=>i.a.createElement(C.a,u()({},e,{isNonExistent:Object(b.c)(t),size:j,subtler:n,invert:r})));const d=n&&!s?k.c.dim:null;return i.a.createElement(v.d,{avatar:e=>i.a.createElement("span",{className:"c-app_action_entity__avatar_container"},l(e),i.a.createElement(E.b,{type:"bolt-filled",className:"c-app_action_entity__bolt_icon",size:"inherit"})),className:e,size:"small",style:d,text:i.a.createElement("span",null,i.a.createElement("span",{className:"c-app_action_entity__app_label","data-qa":"action_entity_app_label"},o),c?i.a.createElement("span",{className:"c-app_action_entity__action_label","data-qa":"action_entity_action_label"},c):null)})}w.displayName="SmallAppActionEntity",w.defaultProps=I;var T=Object(p.b)((e,{app:t,appId:a,action:n,actionId:s})=>({app:t||Object(f.e)(e,a),action:n||Object(_.b)(e,{appId:a,actionId:s})}))(w);const N={id:s.default.string.isRequired,index:s.default.number.isRequired,suggestion:s.default.object.isRequired,isSelected:s.default.bool.isRequired,onDelete:s.default.func,onMouseUp:s.default.func.isRequired,onMouseMove:s.default.func.isRequired},A={onDelete:n.a},R=i.a.forwardRef((e,t)=>{const a=e.id,n=e.index,s=e.isSelected,r=e.suggestion,o=e.onMouseUp,l=e.onMouseMove,d=r.suggestion_replacement,u=r.exact_string,p=r.featureVector,h=e.suggestion.app_action;return i.a.createElement("li",{ref:t,"data-index":n,"data-type":r.type,"data-replacement":d,"data-exact-string":u,"data-feature-vector":p,"data-is-action":!0,"data-id":h.id,id:a,role:"option",tabIndex:"-1","aria-selected":s,onMouseMove:l,onClick:o,className:c()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":s})},i.a.createElement(T,{actionId:h.id,appId:h.app_id,className:"c-search_autocomplete__app_action",isActive:s}))});R.defaultProps=A;var M=R,P=a("4Twu"),x=a("6kok"),L=a("Fdc0");s.default.number;const F={unreadCount:void 0};class unread_count_UnreadCount extends r.PureComponent{render(){const e=this.props.unreadCount;if(!e)return null;const t=e<10?e:"9+";return i.a.createElement("span",{className:"c-search_autocomplete__unread_count"},t)}}unread_count_UnreadCount.displayName="UnreadCount",unread_count_UnreadCount.defaultProps=F;var D=Object(p.b)(function(e,{model:t}){let a;return{unreadCount:a=Object(L.yb)(t)?Object(L.s)(e,t):Object(x.p)(t)}})(unread_count_UnreadCount),B=a("nNoG"),U=a("oiAH");const q=new B.b("jumper"),H=i.a.forwardRef((e,t)=>{const a=e.id,n=e.index,s=e.isSelected,r=e.suggestion,o=e.onMouseUp,l=e.onMouseMove,d=e.hasChannelNameCollision,u=r.suggestion_replacement,p=r.exact_string,h=r.featureVector,m=r.channel||r.mpim,b=e.suggestion.channel&&e.suggestion.channel._jumper_previous_name_match,f=Object(x.ob)(r.channel),_=r.channel&&!f&&!Object(x.Y)(m),g=Object(x.qb)(m),y=g&&Object(x.Y)(m),O=e.suggestion.display_context&&e.suggestion.display_context.subqueryScoresByMember;return i.a.createElement("li",{ref:t,"data-index":n,"data-type":r.type,"data-replacement":u,"data-exact-string":p,"data-feature-vector":h,"data-is-navigational":!0,"data-id":m.id,id:a,role:"option",tabIndex:"-1","aria-selected":s,onMouseMove:l,onClick:o,className:c()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":s})},g?i.a.createElement(U.a,{id:m.id,isActive:s,isDeactivated:y,matchData:O,useCarpeMPDM:!0}):i.a.createElement(P.a,{className:"c-search_autocomplete__channel",channel:m,channelId:m.id,showDraftIcon:f,inline:!0,showTeamIconForXwsChannels:!0,showTeamIconForLocalChannels:d,showArchived:!0,previousName:b}),_&&i.a.createElement("span",{className:"c-search_autocomplete__channel-membership"},q.t("Not a member",{fallbackHash:"28de8887932845dddf7c04d15831c5780b353820"})),i.a.createElement(D,{model:m}))});H.defaultProps=A;var W=H,G=a("lek6");const K=i.a.forwardRef((e,t)=>{const a=e.id,n=e.index,s=e.isSelected,r=e.suggestion,o=e.onMouseUp,l=e.onMouseMove,d=r.suggestion_replacement,u=r.exact_string,p=r.featureVector,h=r.file;return i.a.createElement("li",{ref:t,"data-index":n,"data-type":r.type,"data-replacement":d,"data-exact-string":u,"data-feature-vector":p,"data-id":h.id,"data-is-navigational":!0,key:h.id,id:a,role:"option",tabIndex:"-1","aria-selected":s,onMouseMove:l,onClick:o,className:c()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":s})},i.a.createElement(E.b,{file:"tiny",type:e.suggestion.type,className:"c-search_autocomplete__icon  c-search_autocomplete__icon--file"}),i.a.createElement("div",{className:"c-search_autocomplete__filetype_title"},i.a.createElement(G.a,{text:h.title,noLinking:!0,noSpecials:!0,doInlineImages:!1,noJumbomoji:!0,noHighlights:!0,noHexColors:!0,noCode:!0,noQuotes:!0})),i.a.createElement("div",{className:"c-search_autocomplete__filetype_description"},e.suggestion.fileTypeDescription))});K.defaultProps=A;var V=K,z=a("xWuZ"),$=a("OqoL"),Y=a("5mKg"),Q=a("1hAG"),X=a("Lev8"),J=a("XLFM"),Z=a("Rjjz"),ee=a("hPzE");const te=new B.b("search"),ae=(s.default.string.isRequired,s.default.func,s.default.string.isRequired,s.default.string.isRequired,s.default.func.isRequired,{onDelete:n.a});class delete_Delete extends r.PureComponent{constructor(e){super(e),Object(o.a)(this,["onClick"])}onClick(e){e.stopPropagation(),this.props.searchDelete({hash:this.props.queryHash,searchSessionId:this.props.searchSessionId,querySessionId:this.props.querySessionId}).then(()=>{this.props.onDelete()})}render(){return i.a.createElement("div",{className:"c-search_autocomplete__suggestion_action"},i.a.createElement(J.c,{className:"c-search_autocomplete__suggestion_delete",onClick:this.onClick,label:te.t("delete history result")},i.a.createElement(E.b,{type:"times_small",inline:!0})))}}delete_Delete.displayName="Delete",delete_Delete.defaultProps=ae;var ne=Object(p.b)(null,e=>({searchDelete:(...t)=>e(Object(Z.q)(...t)),querySessionId:e(Object(ee.f)()),searchSessionId:e(Object(ee.g)())}))(delete_Delete),se=a("rWF5");const re=new B.b("search");class suggestion_query_user_filter_SuggestionQueryUserFilterBase extends r.PureComponent{render(){var e=this.props;const t=e.user,a=e.fullNameOrDisplayName,n=e.filter,s=Object(L.Gb)(t),r=Object(L.tb)(t),o=Object(L.mb)(t),l=Object(L.kb)(t),d=Object(se.n)();let u;u="from"===n?`${re.t("from")}:`:"to"===n?`${re.t("to")}:`:null;const p={backgroundImage:`url(${d?t.profile.image_48:t.profile.image_24})`};return i.a.createElement("span",{className:c()("token","member_token",{ra:s,external_member:r,deleted:o}),"data-member-id":t.id},i.a.createElement("span",{className:c()({bot:l,member_preview_link:!l},"member_image","thumb_24"),"data-member-id":t.id,"data-thumb-size":"24",style:p,"aria-hidden":"true"})," ",i.a.createElement("span",{className:"token_label"},u,i.a.createElement("b",null,"@",a)))}}suggestion_query_user_filter_SuggestionQueryUserFilterBase.displayName="SuggestionQueryUserFilterBase",suggestion_query_user_filter_SuggestionQueryUserFilterBase.defaultProps={filter:void 0};var ie=Object(p.b)((e,{user:t})=>({fullNameOrDisplayName:Object(L.V)(e,t)}))(suggestion_query_user_filter_SuggestionQueryUserFilterBase),oe=a("hCvz"),le=a("G4ux"),ce=a("4M+g");const de=new B.b("search");class suggestion_query_in_filter_SuggestionQueryInFilterBase extends r.PureComponent{render(){var e=this.props;const t=e.channel,a=e.displayName,n=e.fallbackName,s=e.isUnknown,o=e.isNonExistent,l=de.t("in:");return s?i.a.createElement(oe.b,{size:"random"}):i.a.createElement("span",{className:"token channel_token"},i.a.createElement("span",{className:"token_label"},o&&`${l}${n}`,!o&&!a&&`${l}${n}`,!o&&a&&i.a.createElement(r.Fragment,null,l,Object(x.Cb)(t)&&i.a.createElement(E.b,{type:"lock",size:"inherit"}),Object(x.Db)(t)&&i.a.createElement(E.b,{type:"channel",size:"inherit"}),i.a.createElement("b",null,a),Object(x.bb)(t)&&!Object(x.zb)(t)&&i.a.createElement(E.b,{type:"shared-channels-baseline",size:"inherit",className:"token_label_icon--suffix"}),Object(x.bb)(t)&&Object(x.zb)(t)&&i.a.createElement(E.b,{type:"shared-channels-baseline-pending",size:"inherit",className:"token_label_icon--suffix"}),Object(x.wb)(t)&&i.a.createElement(E.b,{type:"shared-channel",size:"inherit",className:"token_label_icon--suffix"}))))}}suggestion_query_in_filter_SuggestionQueryInFilterBase.displayName="SuggestionQueryInFilterBase",suggestion_query_in_filter_SuggestionQueryInFilterBase.defaultProps={fallbackName:"",displayName:void 0,channel:void 0,isUnknown:!1,isNonExistent:!1};const ue=Object(p.b)((e,{member:t,channel:a,fallbackName:n})=>{let s="",r=!1,i=!1;if(t){const a=Object(le.d)(e,t.id);r=Object(L.Ob)(a),i=Object(L.Bb)(a),s=r||i?"":`@${Object(L.V)(e,a)}`}else if(a){const t=Object(ce.e)(e,a.id);r=Object(x.Nb)(t),i=Object(x.sb)(t),s=r||i?"":Object(x.x)(e,t,{publicChannelIncludeHashSign:!1})}return{fallbackName:n,displayName:s,isUnknown:r,isNonExistent:i}})(suggestion_query_in_filter_SuggestionQueryInFilterBase);ue.propTypes={member:s.default.object,fallbackName:s.default.string},ue.defaultProps={member:void 0,fallbackName:""};var pe=ue,he=a("n3t6");const me=new B.b("search"),be=({theAttribute:e})=>i.a.createElement("span",{className:"token has_token"},i.a.createElement("span",{className:"token_label"},me.t("has"),":",i.a.createElement("b",null,i.a.createElement(G.a,{text:Object(he.a)(e),noLinking:!0,noSpecials:!0,doInlineImages:!1,noJumbomoji:!0,noHighlights:!0,noHexColors:!0,noCode:!0,noQuotes:!0}))));be.displayName="SuggestionQueryHasFilter";var fe=be;const _e=new B.b("search"),ge=({fileType:e})=>i.a.createElement("span",{className:"token type_token"},i.a.createElement("span",{className:"token_label"},_e.t("type"),":",i.a.createElement("b",null,e)));ge.displayName="SuggestionQueryTypeFilter";var ye=ge,Oe=a("uwE/");const Ce=({modifierName:e,dateString:t})=>i.a.createElement("span",{className:"token date_token"},i.a.createElement("span",{className:"token_label"},Object(Oe.f)()[e],": ",t));Ce.displayName="SuggestionQueryDateFilter";var ve=Ce;const Ee=new B.b("search");u()({},N,{getClnMessage:s.default.func.isRequired,orgName:s.default.string,teamName:s.default.string,clientTheme:s.default.oneOf(["light","dark"])});const ke=u()({},A,{orgName:"",teamName:"",clientTheme:"light"}),Se=i.a.forwardRef((e,t)=>{const a=e.id,n=e.index,s=e.isSelected,r=e.suggestion,o=e.onDelete,l=e.onMouseUp,d=e.onMouseMove,u=e.teamName,p=e.orgName,h=e.clientTheme,m=r.suggestion_replacement,b=r.exact_string,f=r.hash,_=r.token_list,g=r.featureVector,y=r.isCustomDateFilter,O=r.deletable;return i.a.createElement("li",{ref:t,"data-index":n,"data-type":r.type,"data-replacement":m,"data-exact-string":b,"data-feature-vector":g,"data-is-custom-date-filter":y,"data-is-replacement-full":!0,id:a,role:"option",tabIndex:"-1","aria-selected":s,onMouseMove:d,onClick:l,className:c()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":s})},i.a.createElement(E.b,{type:"search-medium",className:"c-search_autocomplete__icon c-search_autocomplete__icon--query"}),i.a.createElement("div",{className:"c-search_autocomplete__query_wrapper"},i.a.createElement("span",{className:c()("c-search_autocomplete__query_parts",{[`c-search_autocomplete__query_parts--${h}`]:"light"!==h})},function(e,t){return Object(z.a)(e.map(e=>[t,e])).slice(1)}(_.map((t,a)=>{switch(!0){case t.is_type_string:return i.a.createElement(G.a,{key:a,text:e.getClnMessage(t.string),noLinking:!0,noSpecials:!0,doInlineImages:!1,noJumbomoji:!0,noHighlights:!0,noHexColors:!0,noCode:!0,noQuotes:!0});case t.is_type_phrase:return`\u201c${t.phrase}\u201d`;case t.is_type_member_filter&&t.is_type_from_filter:return i.a.createElement(ie,{key:a,filter:"from",user:t.user});case t.is_type_member_filter&&t.is_type_to_filter:return i.a.createElement(ie,{key:a,filter:"to",user:t.user});case t.is_type_member:return i.a.createElement(ie,{key:a,user:t.user});case t.is_type_in_filter:return i.a.createElement(pe,{key:a,member:t.user,channel:t.channel,fallbackName:t.fallbackName});case t.is_type_has_filter:return i.a.createElement(fe,{key:a,theAttribute:t.thing});case t.is_type_type_filter:return i.a.createElement(ye,{key:a,fileType:t.file_type});case t.is_type_date_filter:return i.a.createElement(ve,{key:a,modifierName:t.modifier,dateString:t.date_string_normalized});default:return null}})," "))),i.a.createElement("span",{className:"c-search_autocomplete__omniswitcher_hint"},"\u2014"," ",Ee.rt("Search {teamName}",{teamName:p||u||""})," "),O&&i.a.createElement(ne,{queryHash:f,onDelete:o}))});Se.defaultProps=ke;var je=Object(p.b)(e=>({getClnMessage:t=>Object($.b)(e,t,{isInternalMessage:!1}),orgName:Object(Q.e)(e)||"",teamName:Object(Y.e)(Object(Q.d)(e)),clientTheme:Object(X.c)(e)}),null,null,{withRef:!0})(Se),Ie=a("AncD");const we=i.a.forwardRef((e,t)=>{const a=e.id,n=e.index,s=e.isSelected,r=e.suggestion,o=e.onMouseUp,l=e.onMouseMove,d=r.suggestion_replacement,u=r.exact_string,p=r.featureVector,h=r.user,m=h&&h.profile&&h.profile.bot_id,b=Object(L.mb)(h);return i.a.createElement("li",{ref:t,"data-index":n,"data-type":r.type,"data-replacement":d,"data-exact-string":u,"data-feature-vector":p,"data-bot-id":m,"data-id":h.id,"data-is-navigational":!0,id:a,role:"option",tabIndex:"-1","aria-selected":s,onMouseMove:l,onClick:o,className:c()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":s})},i.a.createElement("span",{className:c()("c-search_autocomplete__member",{"c-search_autocomplete__member--deleted":b})},i.a.createElement(Ie.a,{id:h.id,size:"small",showPresence:!b,newPresence:!0,showAvatar:!0,isDraftContext:!0,showDeactivatedAnnotation:b})),i.a.createElement(D,{model:h}))});we.defaultProps=A;var Te=we,Ne=a("ndUn");const Ae=i.a.forwardRef((e,t)=>{const a=e.id,n=e.index,s=e.isSelected,r=e.suggestion,o=e.onMouseUp,l=e.onMouseMove,d=r.suggestion_replacement,u=r.exact_string,p=r.featureVector,h=e.suggestion.team;return i.a.createElement("li",{ref:t,"data-index":n,"data-type":r.type,"data-replacement":d,"data-exact-string":u,"data-feature-vector":p,"data-is-navigational":!0,"data-id":h.id,id:a,role:"option",tabIndex:"-1","aria-selected":s,onMouseMove:l,onClick:o,className:c()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":s})},i.a.createElement(Ne.a,{className:"c-search_autocomplete__team",team:h,id:h.id}))});Ae.defaultProps=A;var Re=Ae;a("y/bS");s.default.string,s.default.string.isRequired,s.default.string.isRequired,s.default.bool;const Me={className:void 0,inline:!1};class view_name_ViewName extends r.PureComponent{render(){var e=this.props;const t=e.displayName,a=e.id,n=e.className,s=e.inline;let r="list";return"Vall_threads"===a?r="small-reply":"Vall_unreads"===this.props.id&&(r="list"),i.a.createElement("span",{className:c()("c-view_name",n)},i.a.createElement(E.b,{className:"c-view_name__icon",type:r}),i.a.createElement("span",{className:c()("c-view_name__text",{"c-view_name__text--inline":!s})},t))}}view_name_ViewName.displayName="ViewName",view_name_ViewName.defaultProps=Me,view_name_ViewName.displayName="ViewName";var Pe=view_name_ViewName;const xe=i.a.forwardRef((e,t)=>{const a=e.id,n=e.index,s=e.isSelected,r=e.suggestion,o=e.onMouseUp,l=e.onMouseMove,d=r.suggestion_replacement,u=r.exact_string,p=r.featureVector,h=e.suggestion.view;return i.a.createElement("li",{ref:t,"data-index":n,"data-type":r.type,"data-replacement":d,"data-exact-string":u,"data-feature-vector":p,"data-is-navigational":!0,"data-id":h.id,id:a,role:"option",tabIndex:"-1","aria-selected":s,onMouseMove:l,onClick:o,className:c()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":s})},i.a.createElement(Pe,{displayName:h.name,id:h.id,className:"c-search_autocomplete__view",inline:!0}))});xe.defaultProps=A;var Le=xe;a.d(t,"b",function(){return De});s.default.number.isRequired,s.default.object.isRequired,s.default.bool.isRequired,s.default.func,s.default.func,s.default.func,s.default.bool,s.default.any;const Fe={onAccept:n.a,onSelected:n.a,onDelete:n.a,hasChannelNameCollision:!1,listItemRef:void 0},De=e=>`c-search_autcomplete__suggestion_${e}`;class suggestion_Suggestion extends r.PureComponent{constructor(e){super(e),Object(o.a)(this,["onMouseUp","onMouseMove","onDelete"])}onMouseUp(e){0!==e.button||e.ctrlKey||this.props.onAccept()}onMouseMove(){this.props.isSelected||this.props.onSelected(this.props.index,!0)}onDelete(){this.props.onDelete(this.props.suggestion)}componentClassForSuggestion(e){return e.is_type_query_completion?je:e.is_type_user?Te:e.is_type_channel||e.is_type_mpim?W:e.is_type_file?V:e.is_type_view?Le:e.is_type_team?Re:e.is_type_app_action?M:null}render(){const e=De(this.props.index),t=this.componentClassForSuggestion(this.props.suggestion);return i.a.createElement(t,{ref:this.props.listItemRef,id:e,index:this.props.index,isSelected:this.props.isSelected,suggestion:this.props.suggestion,onDelete:this.onDelete,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,hasChannelNameCollision:this.props.hasChannelNameCollision})}}suggestion_Suggestion.displayName="Suggestion",suggestion_Suggestion.defaultProps=Fe;t.a=suggestion_Suggestion},RZqJ:function(e,t,a){},RjVJ:function(e,t,a){"use strict";var n=a("F294"),s=a("XHGt"),r=a("Uk1S"),i=a("fYfO"),o=a("uvIC"),l=a("brL+"),c=a("1hAG"),d=a("hOQf"),u=a("5mKg"),p=a("HvGc"),h=a("a+Oh"),m=a("ifKl"),b=a("TSYQ"),f=a.n(b),_=a("aK/h"),g=a("q1tI"),y=a.n(g),O=a("nNoG"),C=a("lek6"),v=a("lwWk"),E=a("u97G"),k=a("2WV3");const S=new O.b("threads"),j=(_.default.string.isRequired,_.default.string.isRequired,_.default.string.isRequired,_.default.string,_.default.string,_.default.object.isRequired,_.default.object,_.default.string.isRequired,_.default.func,_.default.bool,{className:null,theme:"light",showThread:m.a,rootFile:void 0,featureRichTextRendering:!1});class thread_broadcast_preamble_ThreadBroadcastPreamble extends g.PureComponent{constructor(e){super(e),this.openThread=this.openThread.bind(this)}openThread(e){var t=this.props;const a=t.showThread,n=t.channelId,s=t.threadTs,r=t.ts;e.preventDefault(),a({channelId:n,threadTs:s,highlightTs:r})}renderRootText(){var e=this.props;const t=e.rootMsg,a=e.rootFile,n=e.featureRichTextRendering;if("tombstone"===Object(d.N)(t))return null;if(n&&Object(d.mb)(t)&&!Object(d.pb)(t,n))return y.a.createElement(k.a,{richTextBlock:t.blocks[0]});const s=Object(d.M)(t,a);return s?y.a.createElement(C.a,{text:s,noHighlights:!0,noHexColors:!0,noJumbomoji:!0,noLinking:!0,noCode:!0,noQuotes:!0,customLineEnding:"\u2026",maxNewlines:1}):null}render(){var e=this.props;const t=e.rootMsg,a=e.teamDomain,n=e.channelId,s=e.ts,r=e.threadTs,i=e.theme;if(!t)return null;const o=Object(d.u)({teamDomain:a,channelId:n,ts:s,threadTs:r}),l=f()("c-message__broadcast_preamble",this.props.className),c=!(!(t&&t.blocks&&t.blocks.length)||Object(d.mb)(t))?null:this.renderRootText();let u;if(c)u=y.a.createElement("div",{className:l},y.a.createElement("span",{"data-qa":"thread-broadcast-preamble-with-text",className:"c-message__broadcast_preamble_meta"},Object(E.a)()),y.a.createElement(v.a,{className:"c-message__broadcast_preamble_link",href:o,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread,dir:"auto"},c));else{const e=S.rt("replied to <a>a thread</a>",null,({key:e,text:t})=>y.a.createElement(v.a,{className:"c-message__broadcast_preamble_link",key:e,href:o,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},t));u=y.a.createElement("div",{className:l},e)}return"light"===i?y.a.createElement("div",{className:"c-message__broadcast_preamble_outer"},u):u}}thread_broadcast_preamble_ThreadBroadcastPreamble.displayName="ThreadBroadcastPreamble",thread_broadcast_preamble_ThreadBroadcastPreamble.defaultProps=j;var I=thread_broadcast_preamble_ThreadBroadcastPreamble;const w={showThread:p.l};t.a=Object(s.b)(function(e,t){const a=t.threadTs,s=t.channelId,p=Object(i.a)(e,s,a);if(!p)return{};let m;if(p.files&&p.files.length){const t=Object(n.a)(p.files);m=Object(o.c)(e,t)}const b=Object(d.V)(p)||Object(l.b)(e),f=Object(c.i)(e,b);return{rootMsg:p,rootFile:m,teamDomain:Object(u.f)(f),theme:Object(r.a)(e),featureRichTextRendering:Object(h.b)(e)}},w)(I)},Rmar:function(e,t,a){},Ro9a:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("t85p"),s=a("quKg");const r=e=>Object(n.m)(e,"feature_email_workflow")&&"treatment"===Object(s.c)(e,"email_workflow")},RoDk:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("nNoG"),o=a("z+SX"),l=a("/m+M");const c=new i.b("team"),d=(r.default.object,{member:void 0});function u({member:e}){if(!Object(l.a)().featureModernProfileFlexpane)return null;const t=c.t("To interact with a person from another organization, you need to be in at least one channel together.");return s.a.createElement("div",{className:"p-member_profile_card__special_text"},s.a.createElement("strong",null,c.rt("You don\u2019t share any channels with {memberName}.",{memberName:s.a.createElement(o.a,{id:e.id})}))," ",t)}u.displayName="MemberProfileStranger",u.defaultProps=d,t.a=u},RwR8:function(e,t,a){e.exports=a.p+"messages@2x-8481913.png"},"Rx/r":function(e,t,a){},SAUz:function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("aK/h"),o=a("XHGt"),l=a("TSYQ"),c=a.n(l),d=a("zoXk"),u=a("HvGc"),p=a("UUlk"),h=a("uFGw"),m=a("18Pa");i.default.string,i.default.arrayOf(i.default.string),i.default.string,i.default.string,i.default.func,i.default.func,i.default.func,i.default.func,i.default.func,i.default.func,i.default.func,i.default.func,i.default.oneOf(["large","medium"]),i.default.string;const b={flexName:void 0,flexParams:void 0,flexOrigin:void 0,flexOriginId:void 0,previewFile:n.a,showUserGroupList:n.a,toggleActivityFlexpane:n.a,showMemberDirectory:n.a,showDetails:n.a,showStarredItemsList:n.a,showMemberProfile:n.a,showFileList:n.a,size:"large",className:void 0};class FlexBack extends s.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.getOrigin=this.getOrigin.bind(this),this.openOrigin=this.openOrigin.bind(this)}onClick(){var e=this.props;const t=e.flexOrigin,a=e.flexName;if(t)return this.openOrigin();switch(a){case"files":return this.props.showFileList();case"team":return this.props.showMemberDirectory();case"groups":case"user_groups":return this.props.showUserGroupList();default:return null}}getOrigin(){var e=this.props;const t=e.flexOrigin,a=e.flexName,n=e.flexParams,s=n&&n[0];if(t)return t;switch(a){case"files":return Object(p.a)(s)?"files":null;case"team":case"groups":return Object(h.a)(s)?"groups":null;case"user_groups":return Object(h.a)(s)?"user_groups":null;default:return null}}openOrigin(){var e=this.props;const t=e.flexOrigin,a=e.flexOriginId;switch(t){case"member_preview":return this.props.showMemberProfile({memberId:a});case"directory":return this.props.showMemberDirectory();case"starred_items":return this.props.showStarredItemsList("stars");case"details":case"channel_page":case"group_page":case"im_page":return this.props.showDetails({sectionId:a});case"activity":case"mentions":return this.props.toggleActivityFlexpane();case"file_details":return Object(p.a)(a)?this.props.previewFile({fileId:a}):this.props.showFileList();case"files":return this.props.showFileList();default:return null}}render(){if(!this.getOrigin())return null;var e=this.props;const t=e.size,a=e.className,n=`chevron-${t}-left`;return r.a.createElement(m.a,{className:c()("p-global_nav__flex_btn","p-global_nav__flex_btn--back",a),icon:n,onClick:this.onClick})}}FlexBack.displayName="FlexBack",FlexBack.defaultProps=b;const f={previewFile:u.c,showUserGroupList:u.o,toggleActivityFlexpane:u.q,showMemberDirectory:u.i,showDetails:u.e,showStarredItemsList:u.k,showMemberProfile:u.j,showFileList:u.g};t.a=Object(o.b)((e,{flexOrigin:t})=>({flexName:Object(d.j)(e),flexParams:Object(d.e)(e),flexOrigin:t||Object(d.c)(e),flexOriginId:Object(d.d)(e)}),f)(FlexBack)},SNtu:function(e,t,a){"use strict";function n({prevUserAttentionIsOnChat:e,prevComposerVisible:t,currentUserAttentionIsOnChat:a,currentComposerVisible:n}){return!(a||!e)||!(t||!n)}a.d(t,"a",function(){return n})},SaAd:function(e,t,a){},Sqd7:function(e,t,a){},T00V:function(e,t,a){"use strict";var n=a("TSYQ"),s=a.n(n),r=a("q1tI"),i=a.n(r),o=a("XHGt"),l=a("aK/h"),c=a("1zbP"),d=a("1hAG"),u=a("5mKg"),p=a("/3PZ"),h=a("6GV3");const m=[230,132,102,88,68,44,34],b=(l.default.string,l.default.bool,l.default.string.isRequired,l.default.number.isRequired,l.default.object,{className:void 0,invert:!1,team:void 0});function f({className:e,id:t,invert:a,size:n,team:r}){const o=Object(c.c)(r),l=Object(c.d)(r);if(o||l)return i.a.createElement(p.a,{className:s()(e,"c-team_entity__icon"),isNonExistent:o,size:n,invert:a,"data-team-id":t});const d=function({size:e,team:t}){const a=Object(u.h)(t);if(!a||a.image_default)return null;const n=2*e;return a[`image_${Object(h.a)(n,m)}`]||[...Object.values(t.icon)].pop()}({size:n,team:r}),b=!d&&function(e){const t=Object(u.e)(e);return Object(u.j)(t,{limit:2})}(r);return i.a.createElement("span",{"aria-hidden":"true",className:s()(e,"c-team_entity__icon",{"c-team_entity__icon--default":!d}),style:{backgroundImage:d&&`url(${d})`,fontSize:`${Math.round(n/1.8)}px`,height:n,lineHeight:`${n}px`,width:n},"data-team-id":t},b)}f.displayName="TeamIcon",f.defaultProps=b;t.a=Object(o.b)((e,t)=>{const a=t.team||Object(d.i)(e,t.id);return{team:a,id:a.id}})(f)},T4si:function(e,t,a){},TBaU:function(e,t,a){},TJrU:function(e,t,a){},TM4O:function(e,t,a){"use strict";t.a=(()=>document.documentElement&&document.documentElement.dataset&&"calls"===document.documentElement.dataset.app)},TOkS:function(e,t,a){"use strict";var n=a("q1tI"),s=a("aK/h"),r=a("yHhI");s.default.shape({getState:s.default.func.isRequired,subscribeImmediate:s.default.func,subscribe:s.default.func.isRequired}).isRequired,s.default.func.isRequired;class ConnectImmediate extends n.PureComponent{static getDerivedStateFromProps({store:e}={}){return e.getState()}constructor(e){super(e);const t=e.store;this.state=t.getState(),this.logger=Object(r.a)({getState:t.getState,label:"CONNECT-IMMEDIATE"}),this.unsubscribe=null,this.update=this.update.bind(this)}componentDidMount(){this.subscribeToStore()}componentDidUpdate(e){this.props.store!==e.store&&(this.unsubscribeFromStore(),this.subscribeToStore())}componentWillUnmount(){this.unsubscribeFromStore()}subscribeToStore(){const e=this.props.store;let t=e.subscribeImmediate;t||(this.logger.warn("subscribeImmediate not found on store"),t=e.subscribe),this.unsubscribe=t(this.update)}unsubscribeFromStore(){this.unsubscribe&&this.unsubscribe()}update(){this.setState(()=>this.props.store.getState())}render(){return this.props.render(this.state)}}ConnectImmediate.displayName="ConnectImmediate",t.a=ConnectImmediate},TVjB:function(e,t,a){"use strict";var n=a("aK/h"),s=a("piHQ"),r=a("NrkL"),i=a("XoJV"),o=a("nNoG"),l=a("3pFD"),c=a("yHhI"),d=a("Z7Ay");const u=()=>{const e=Object(c.b)({label:"EMOJI_TRANSLATION"}),t=Object(o.s)(),a=Object(r.a)();if(Object(o.g)())return e.info("Emoji translations not needed for default locale, only adding keywords"),void Object(i.a)({locale:t,localizedKeywordMap:a});if(!Object(l.c)(t))return void e.info("Emoji translations not yet loaded for locale");if(Object(i.i)(t))return void e.info(`Emoji translations already loaded for ${t}`);const n=Object(s.a)();n?(Object(i.b)({locale:t,canonicalToLocalized:n}),Object(i.a)({locale:t,localizedKeywordMap:a}),e.info(`Emoji translations and keywords loaded for ${t}`)):e.info("Emoji translation map is null")};u.propTypes=n.default.string,t.a=u,Object(d.a)("loadEmojiTranslations",u)},TY84:function(e,t,a){"use strict";var n=a("tjIJ"),s=a("q1tI"),r=a.n(s),i=a("XHGt"),o=a("aK/h"),l=a("QbLZ"),c=a.n(l),d=a("jo6Y"),u=a.n(d),p=a("ifKl"),h=a("vJtL"),m=a("TSYQ"),b=a.n(m),f=a("mM05"),_=a.n(f),g=a("nNoG"),y=a("kOzZ"),O=a("tbBR"),C=a("1zbP"),v=a("UF3u"),E=a("AE1P"),k=a("EOYu"),S=a("1hAG"),j=a("G4ux"),I=a("eR+M"),w=a("Fdc0"),T=a("KPXh"),N=a("Qrgz"),A=a("+1yX"),R=a("vmJv"),M=a("zoXk"),P=a("2HDu"),x=a("aLpA");function L(e,t){if([x.I.MESSAGE_PANE,x.I.CHANNEL_DETAILS_FLEXPANE].includes(t)||!t){const t=Object(R.a)(e);if(Object(A.a)(t))return{channelId:t}}else if(t===x.I.THREADS_FLEXPANE){const t=Object(M.e)(e);return Object(P.a)(t[0])}return{}}var F=a("MREy"),D=a("XLFM"),B=a("RMmo"),U=a("6FZx");a("boyP");o.default.bool,o.default.bool,o.default.string,o.default.func,o.default.func,o.default.func,o.default.number,o.default.string,o.default.string;const q={highlighted:!1,disabled:!1,className:"",onMouseEnter:p.a,onSelected:p.a,menuCallback:p.a,menuCallbackId:null,"data-qa":"menu_item_action_button",activeMenuId:void 0};class menu_item_action_button_MenuItemActionButton extends s.PureComponent{constructor(e){super(e),this.disableHighlightedState=!1,this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleSelected=this.handleSelected.bind(this)}componentDidMount(){this.bindKeyCommands()}componentDidUpdate(){this.props.highlighted||(this.disableHighlightedState=!1)}componentWillUnmount(){this.keyCommands&&this.keyCommands.reset()}handleMouseEnter(e){this.disableHighlightedState=!0,this.props.onMouseEnter(e)}handleSelected(e){this.props.onSelected(e),this.props.menuCallback(this.props.menuCallbackId,e)}handleReturnKey(e){this.props.highlighted&&(this.handleSelected(e),e&&e.preventDefault&&e.preventDefault())}bindKeyCommands(){const e=[{keys:["return"],handler:this.handleReturnKey.bind(this)}];this.keyCommands||(this.keyCommands=new B.a),this.keyCommands.bindAll(e)}render(){var e=this.props;const t=e.disabled,a=e.highlighted,n=e.className,s=(e.onMouseEnter,e.onSelected,e.menuCallback,e.menuCallbackId,e.activeMenuId,u()(e,["disabled","highlighted","className","onMouseEnter","onSelected","menuCallback","menuCallbackId","activeMenuId"])),i=b()("c-menu_item_action_button",n,{"c-menu_item_action_button--highlighted":a&&!t&&!this.disableHighlightedState}),o=this.props.activeMenuId;return r.a.createElement("div",{className:"c-menu_item_action_button__container",onMouseEnter:this.handleMouseEnter,"data-qa":`${this.props["data-qa"]}-wrapper`},r.a.createElement(D.d,c()({id:o,className:i,disabled:t,onClick:this.handleSelected,role:"menuitem",tabIndex:"-1",type:"outline"},s)))}}menu_item_action_button_MenuItemActionButton.displayName="MenuItemActionButton",menu_item_action_button_MenuItemActionButton.defaultProps=q;var H=Object(U.b)(menu_item_action_button_MenuItemActionButton),W=a("cD5Y"),G=(a("guKx"),a("t85p")),K=a("uksu"),V=a("9E9B"),z=a("V/As"),$=a("zwKj"),Y=a("RB1+"),Q=a("u2vH"),X=a("M4HD"),J=a("7EGn"),Z=a("0f2Y"),ee=a("O/xh"),te=a("dhvi"),ae=a("HOkk"),ne=a("02hs");a("5SxQ");const se=new g.b("workflow_builder"),re=({closeModal:e,collaborators:t,appName:a})=>{const n=Object(s.useCallback)(()=>t.map(e=>r.a.createElement(ee.a,{key:e,userId:e,position:"left-bottom",includeRemoveFromChannelAction:!0},r.a.createElement(ne.a,{id:e,className:"p-members_dialog__member_list_btn","data-qa":"collaborator_row_btn"}))),[t]);return r.a.createElement(ae.a,{title:se.rt("{usernameCount} collaborators on {appName}",{usernameCount:t.length,appName:a}),overlayClassName:"p-collaborators_dialog__overlay",onClose:e,showGoButton:!1,cancelText:se.t("Close")},n())};re.displayName="CollaboratorsDialog";var ie=Object(i.b)(null,e=>({closeModal:()=>e(Object(te.a)())}))(re),oe=a("Lts7"),le=a("kMAi");a("Ms/R");const ce=new g.b("app_card"),de=({id:e})=>r.a.createElement(ee.a,{userId:e,position:"left-bottom"},r.a.createElement(Z.a,null,r.a.createElement(le.a,{id:e})));de.displayName="Collaborator";const ue=Object(i.b)(null,e=>({openModal:(...t)=>e(Object(te.e)(...t))}))(({collaborators:e,openModal:t,appName:a})=>{const n=e[0],s=e[1];switch(e.length){case 0:return"";case 1:return ce.rt("{username} created this workflow. ",{username:r.a.createElement(de,{id:n})});case 2:return ce.rt("{firstUser} and {secondUser} are collaborators on this workflow.",{firstUser:r.a.createElement(de,{id:n}),secondUser:r.a.createElement(de,{id:s})});default:return ce.rt("{firstUser}, {secondUser} and {userCount} other people are <a>collaborators on this workflow</a>.",{firstUser:r.a.createElement(de,{id:n}),secondUser:r.a.createElement(de,{id:s}),userCount:e.length-2},({text:n})=>r.a.createElement("span",{"data-collaborators-count":!0},r.a.createElement(Z.a,{onClick:()=>t({element:r.a.createElement(ie,{collaborators:e,appName:a})})},n)))}}),pe=({app:e,cardHeader:t,launchWorkflowBuilder:a,currentUserId:n,disabledMessage:i})=>{const o=Object(J.a)(e,"legacy_app.owner_ids",[]),l=o.some(e=>e===n);return r.a.createElement("div",{className:"p-app_profile_card__container","data-qa":"app_profile_card_container"},r.a.createElement(F.f,{width:320,noMargin:!0},t,r.a.createElement(s.Fragment,null,r.a.createElement(F.d,{noPaddingAbove:!0}),i&&i,!i&&o.length>0&&r.a.createElement("div",{className:"p-workflow_profile_card--body"},r.a.createElement("div",null,r.a.createElement(ue,{collaborators:o,appName:e.profile.name})))),!l&&r.a.createElement(s.Fragment,null,r.a.createElement(F.d,{noPaddingAbove:!0}),r.a.createElement("div",{"data-workflow-profile-card-non-installer":!0,className:"p-workflow_profile_card--body"},ce.rt("Created with <a>Workflow Builder</a>.",null,({text:e})=>r.a.createElement("span",{className:"margin_left_25"},r.a.createElement(Z.a,{onClick:a},e))))),l&&r.a.createElement("div",{"data-workflow-profile-card-installer":!0},r.a.createElement(F.d,{noPaddingAbove:!0}),r.a.createElement(H,{onClick:()=>a({subPath:`slack-apps/${e.app_id}`,source:"workflow_profile_card"}),className:"margin_bottom_100"},ce.t("Open in Workflow Builder")))))};pe.displayName="WorkflowProfileCard",pe.defaultProps={cardHeader:null,currentUserId:null,disabledMessage:null};var he=Object(i.b)(null,e=>({launchWorkflowBuilder:(...t)=>e(Object(oe.a)(...t))}))(pe),me=a("MnCE"),be=a("VMwU"),fe=a("e9ZU"),_e=a("yluG");o.default.string,o.default.string.isRequired,o.default.string.isRequired,o.default.bool,o.default.object;const ge={colorHex:"#2C2D30",isError:!1,externalTeam:void 0};function ye({colorHex:e,imageUrl:t,name:a,isError:n,externalTeam:s}){const i={background:`\n\t\t\tlinear-gradient(\n\t\t\t\t136.53deg,\n\t\t\t\trgba(255, 255, 255, 0.05) 0%,\n\t\t\t\trgba(255, 255, 255, 0.2) 100%\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t312.01deg,\n\t\t\t\t${e} 0%,\n\t\t\t\trgba(${(Object(be.f)(e)||[]).join(",")}, 0.75) 100%\n\t\t\t)\n\t\t`,backgroundColor:e},o=b()("full_width",{"p-app_profile_card__header--external":s,"p-app_profile_card__header":!s});return n?null:r.a.createElement("div",{className:o,style:i,"data-qa":"app_card_header"},r.a.createElement(_e.a,{externalTeam:s}),r.a.createElement("img",{className:"p-app_profile_card__avatar",src:t,alt:a,"data-qa":"app_header_icon"}),r.a.createElement("div",{className:"padding_left_100"},r.a.createElement("div",{className:"padding_bottom_25"},r.a.createElement("strong",{"data-qa":"app_header_name"},a),r.a.createElement("span",{className:"margin_left_50"},r.a.createElement(fe.a,{inverse:!0,"data-qa":"app_header_app_label",isWorkflow:!0})))))}ye.defaultProps=ge;var Oe=Object(me.a)(ye);o.default.string,o.default.string.isRequired,o.default.string.isRequired,o.default.func.isRequired,o.default.bool,o.default.object,o.default.string.isRequired;const Ce={colorHex:"#2C2D30",isError:!1,externalTeam:void 0};function ve({colorHex:e,imageUrl:t,name:a,onClick:n,isError:s,externalTeam:i,tagline:o}){const l={background:`\n\t\t\tlinear-gradient(\n\t\t\t\t136.53deg,\n\t\t\t\trgba(255, 255, 255, 0.05) 0%,\n\t\t\t\trgba(255, 255, 255, 0.2) 100%\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t312.01deg,\n\t\t\t\t${e} 0%,\n\t\t\t\trgba(${(Object(be.f)(e)||[]).join(",")}, 0.75) 100%\n\t\t\t)\n\t\t`,backgroundColor:e},c=b()("full_width",{"p-app_profile_card__header--external":i,"p-app_profile_card__header":!i,cursor_pointer:n!==p.a});return s?null:r.a.createElement(D.c,{className:c,onClick:n,style:l,"data-qa":"app_card_header"},r.a.createElement(_e.a,{externalTeam:i}),r.a.createElement("img",{className:"p-app_profile_card__avatar",src:t,alt:a,"data-qa":"app_header_icon"}),r.a.createElement("div",{className:"p-app_profile_card__title"},r.a.createElement("div",{className:"display_flex align_items_center padding_bottom_25"},r.a.createElement("strong",{className:"overflow_ellipsis","data-qa":"app_header_name"},a),r.a.createElement("span",{className:"margin_left_50"},r.a.createElement(fe.a,{inverse:!0,"data-qa":"app_header_app_label"}))),r.a.createElement("div",{className:"p-app_profile_card__description","data-qa":"app_header_description"},o)))}ve.defaultProps=Ce;var Ee=Object(me.a)(ve),ke=a("Pl1I"),Se=a("pxG+"),je=a("tBeP"),Ie=a("vZqh"),we=a("SOCr"),Te=a("4Twu"),Ne=a("lhZz"),Ae=a("5mKg"),Re=a("negh"),Me=a("xrsA");const Pe=new g.b("app_card"),xe="USER_CARD_CLICK";var Le=function({appId:e,appUser:t,channelIdToRemoveFrom:a,dispatch:n,homeWorkspaceId:s,isActive:i,isExternal:o,isMemberRestricted:l,isMemberUltraRestricted:d,isXoxaApp:u,memberId:p,serviceId:h,showAppSettings:m,showAppDirectoryLink:b,currentTeamId:f,currentUserId:_,locale:g,currentEnterpriseId:O,featureM11nChannelDetails:C}){const v=Object(y.a)({userId:_,teamId:f,locale:g,enterpriseId:O}),E=Object(S.d)(Object(Ne.getStateByTeamId)(f)),k={app_id:e,bot_id:h},j=()=>v.track(xe,k);return[{key:"about_app",label:Pe.t("About this app"),click:()=>{j(),v.track("APP_CLICK_LINK_APP_ABOUT_IN_USER_CARD",c()({},k,{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_about"}}})),n(Object(K.a)({memberId:p,serviceId:h,homeWorkspaceId:s}))},show:!0,dataQa:"app_card_view_details"},{key:"app_directory_link",label:Pe.t("View in app directory"),href:Object(Ae.n)(E,`/apps/${e}?utm_source=in-prod&utm_medium=inprod-link_app_directory-user_card-click`),click:()=>{j(),v.track("APP_CLICK_LINK_APP_DIRECTORY_IN_USER_CARD",c()({},k,{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_directory"}}}))},show:b,dataQa:"app_card_view_app_directory"},{key:"settings",label:Pe.t("Settings"),href:u?void 0:`${Object(Se.a)(Object(Ae.n)(E),"/")}/services/${h}?utm_source=in-prod&utm_medium=inprod-link_app_settings-user_card-click`,click:()=>{j(),v.track("APP_CLICK_LINK_APP_SETTINGS_IN_USER_CARD",{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_settings"}}}),u&&n(Object(je.a)({serviceId:h,referringEventId:xe}))},show:m,dataQa:"app_card_edit_settings"},{key:"channel_invite",label:Pe.t("Add this app to a channel ..."),click:()=>{j(),n(Object(Me.a)({memberId:t.id}))},show:t&&i&&(u?!l:!d),dataQa:"app_card_invite_to_channel"},{key:"channel_remove",dataQa:"app_card_remove",click:()=>{if(!C)return;const s={[Re.UiContextKeys.action]:Re.UiAction.CLICK,[Re.UiContextKeys.ui_element]:Re.UiElement.BTN_REMOVE_APP};v.track(xe,{contexts:{[Re.ClientEventKeys.ui_context]:s,[Re.ClientEventKeys.core]:{[Re.CoreKeys.app_id]:e,[Re.CoreKeys.bot_id]:h,[Re.CoreKeys.channel_id]:a}}}),n(u?Object(we.a)({appUserId:t.id,channelId:a,referringEventId:xe,referringUiContext:s}):Object(Ie.a)({memberId:t.id,channelId:a}))},label:C?Pe.rt("Remove this app from {channelName} ...",{channelName:r.a.createElement("strong",null,r.a.createElement(Te.a,{className:"cursor_pointer",inline:!0,channelId:a,iconProps:{inherit:!0,align:"baseline"}}))}):void 0,show:C&&!!a&&!o}].filter(e=>e.show)},Fe=a("tn36"),De=a("DCka"),Be=a("oIqc"),Ue=a("NAkb"),qe=a("J47P"),He=a("k0G2");const We=r.a.lazy(()=>Promise.resolve().then(a.bind(null,"eglI"))),Ge=new g.b("team"),Ke=(o.default.string.isRequired,o.default.string.isRequired,o.default.func,o.default.bool,o.default.func,o.default.func,o.default.object.isRequired,{kbNavActive:!1,onSubmit:p.a,returnKBNav:p.a,stealKBNav:p.a});class app_profile_card_message_input_AppProfileCardMessageInput extends s.PureComponent{constructor(e){super(e),this.texty=null,this.textyModules={tabcomplete:{positionMenu:e=>{e.style.width=`${this.texty.container.offsetWidth}px`,Object(Ue.a)(e,this.texty.container)},completers:["channels","emoji","members"]}},Object(Fe.a)(this,["setTextyRef","onSubmit","onDocKeyDown","onFocus","onBlur"])}componentDidMount(){document.addEventListener("keydown",this.onDocKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.onDocKeyDown)}onDocKeyDown({which:e,metaKey:t,ctrlKey:a,altKey:n}){this.props.kbNavActive||n||a||t||[He.f,He.e,He.k,He.l,He.c,He.h,He.i].indexOf(e)>-1||this.texty&&this.texty.focus()}onFocus(){var e=this.props;const t=e.kbNavActive,a=e.stealKBNav;t||a()}onBlur(){var e=this.props;const t=e.kbNavActive,a=e.returnKBNav;t&&a()}onSubmit(){const e=this.props.clogger;this.texty&&this.texty.value()&&(e.track("USER_CARD_DM",{}),Object(Be.e)(this.props.userId,!1,this.texty.value()),this.props.onSubmit())}setTextyRef(e){this.texty=e&&e.getWrappedInstance?e.getWrappedInstance():e}render(){const e=Ge.t("Message {username}",{username:this.props.username});return r.a.createElement("div",{className:"p-app_profile_card__footer"},r.a.createElement(De.a,null,r.a.createElement(s.Suspense,{fallback:null},r.a.createElement(We,{"data-qa":"app_card_message_input",ref:this.setTextyRef,className:"p-app_profile_card__message_input",modules:this.textyModules,ariaLabel:e,placeholder:e,onEnter:this.onSubmit,onFocus:this.onFocus,onBlur:this.onBlur,useLegacyCreate:!0,isSingleLine:!0,useFocusRing:!1}))))}}app_profile_card_message_input_AppProfileCardMessageInput.displayName="AppProfileCardMessageInput",app_profile_card_message_input_AppProfileCardMessageInput.defaultProps=Ke;const Ve=Object(i.b)(e=>({clogger:Object(y.a)({state:e})}))(app_profile_card_message_input_AppProfileCardMessageInput);var ze=Object(qe.a)(Ve);a("1c4n");const $e=new g.b("app_card"),Ye=(o.default.bool,o.default.object,o.default.string.isRequired,o.default.string,o.default.string.isRequired,o.default.func.isRequired,o.default.object,o.default.object,o.default.object,o.default.object.isRequired,o.default.bool,o.default.shape({id:o.default.string,name:o.default.string}),o.default.object.isRequired,o.default.string,o.default.string,o.default.string,o.default.bool.isRequired,o.default.bool.isRequired,o.default.bool.isRequired,o.default.bool.isRequired,o.default.bool,o.default.string.isRequired,o.default.string,o.default.string,o.default.string,o.default.bool,o.default.bool,o.default.bool,o.default.bool,o.default.bool,o.default.bool,o.default.bool,o.default.bool,o.default.bool,o.default.arrayOf(o.default.shape({name:o.default.string.isRequired,usage:o.default.string,description:o.default.string}).isRequired),{app:void 0,appUser:void 0,installedByMember:void 0,isError:!1,menuProps:{},memberId:void 0,installerIsYou:!1,externalTeam:{},isAppSpaceEnabled:!0,currentEnterpriseId:void 0,currentUserId:void 0,appHomeTeamDisplayName:void 0,viewContext:x.I.MESSAGE_PANE,channelId:void 0,threadTs:void 0,isMemberRestricted:!1,isMemberUltraRestricted:!1,isActive:!1,isExternal:!1,isOrgShared:!1,showAppSettings:!1,showAppDirectoryLink:!1,showSlashCommands:!1,canBeRemovedFromChannel:!1,commands:[]});class app_profile_card_AppProfileCard extends s.Component{constructor(e){super(e),this.onHeaderClick=this.onHeaderClick.bind(this),this.autoFillSlashCommand=this.autoFillSlashCommand.bind(this)}shouldComponentUpdate(e){var t=this.props;const a=t.commands,n=u()(t,["commands"]),s=e.commands,r=u()(e,["commands"]);return!Object(v.a)(n,r)||!Object(v.a)(a,s)}onHeaderClick(){var e=this.props;const t=e.app,a=e.memberId,n=e.menuProps.onTriggerClose,s=e.serviceId,r=e.clogger,i=e.dispatch,o=t.app_id,l=t.home_workspace_id;r.track("USER_CARD_CLICK",{app_id:o,bot_id:s}),i(Object(K.a)({memberId:a,serviceId:s,homeWorkspaceId:l})),n&&n()}autoFillSlashCommand(e){if(this.props.featureSonicInputs){const t=Object(Y.a)({viewContext:this.props.viewContext,channelId:this.props.channelId,threadTs:this.props.threadTs});if(!t)return;t.prependContents({contents:(new _.a).insert(`${e} `).ops}),t.focus()}else Object($.b)(e)}render(){var e=this.props;const t=e.app,a=e.appUser,n=e.commands,i=e.defaultAppIcon,o=e.menuProps,l=e.installedByMember,d=e.installerIsYou,u=e.isError,m=e.dispatch,f=e.serviceId,_=e.currentTeam,y=e.externalTeam,O=e.featureReactMemberProfileCard,v=e.currentUserId,E=e.currentEnterpriseId,k=e.appHomeTeamDisplayName,S=e.featureAddAppHomeTeamName,j=e.isMemberRestricted,I=e.isMemberUltraRestricted,w=e.isActive,T=e.isExternal,N=e.isOrgShared,A=e.showAppSettings,R=e.showAppDirectoryLink,M=e.showSlashCommands,P=e.channelId,x=e.canBeRemovedFromChannel,L=e.featureM11nChannelDetails;if(Object(C.d)(t))return r.a.createElement("div",{className:"p-app_profile_card__container"},r.a.createElement(F.f,{menuClassNames:"p-app_profile_card p-app_profile_card--loading",width:320},r.a.createElement(W.a,null)));if(!Object(C.b)(t))return null;const D=Object(h.a)(o.onTriggerClose)?o.onTriggerClose:p.a,B=Object(z.b)(t.profile,192,i),U=r.a.createElement(Ee,{colorHex:t.profile.color,imageUrl:B,name:t.profile.name,onClick:!w||T?p.a:this.onHeaderClick,tagline:t.profile.tagline,isError:u,externalTeam:y}),q=w||T||j?null:r.a.createElement("div",{className:"c-menu_item__li p-app_profile_card__disabled_message","data-qa":"app_card_app_disabled"},Object(X.g)(t)?$e.t("This workflow has been disabled"):$e.t("This app has been disabled")),G=Le({appId:t.app_id,appUser:a,channelIdToRemoveFrom:x&&P,dispatch:m,featureM11nChannelDetails:L,featureReactMemberProfileCard:O,homeWorkspaceId:t.home_workspace_id,isActive:w,isMemberRestricted:j,isMemberUltraRestricted:I,isXoxaApp:"xoxa"===t.app_type,isExternal:T,showAppSettings:A,showAppDirectoryLink:R,legacyApp:t.legacy_app,serviceId:f,currentTeamId:_.id,currentUserId:v,locale:Object(g.s)(),currentEnterpriseId:E}).map(e=>"separator"===e.type?r.a.createElement(F.d,{key:e.key}):r.a.createElement(F.b,{key:e.key,label:e.label,onSelected:e.click,href:e.href,"data-qa":e.dataQa}));if(Object(X.g)(t))return r.a.createElement(he,{app:t,cardHeader:r.a.createElement(Oe,{colorHex:t.profile.color,imageUrl:B,name:t.profile.name,isError:u,externalTeam:y}),currentUserId:v,disabledMessage:q});const K=n.slice(0,3),$=M&&K.length?K.map(e=>r.a.createElement(F.b,{key:e.name,onSelected:()=>this.autoFillSlashCommand(e.name),"data-qa":"app_card_slash_command"},r.a.createElement(s.Fragment,null,r.a.createElement("div",{className:"block overflow_ellipsis"},r.a.createElement("strong",{className:"margin_right_25"},e.name),e.usage),r.a.createElement("div",{className:"p-app_profile_card__command_desc c-menu_item__description"},e.description)))):null;let Y;(w&&t.installation&&t.installation.installer_user_id||k&&S)&&(Y=r.a.createElement(ke.a,{appType:t.app_type,memberId:l&&l.id,appName:t.profile.name,isError:u,onMemberClick:D,appHomeTeamDisplayName:k,featureAddAppHomeTeamName:S,installerIsYou:d}));let Q=null,J=w&&t.app_user;T&&(J=t.app_user&&"xoxp"===t.app_type),N&&(J=!!t.app_user),J&&(Q=O?r.a.createElement(H,{className:"p-app_profile_card__direct_message_button",onSelected:()=>m(Object(V.startImByMemberId)({memberId:a.id}))},$e.t("Go to App")):r.a.createElement(ze,{onSubmit:D,userId:t.app_user.id,username:t.app_user.username}));const Z=b()("p-app_profile_card",{"p-app_profile_card--has_footer":J&&!O});return r.a.createElement("div",{className:"p-app_profile_card__container","data-qa":"app_profile_card_container"},r.a.createElement(F.f,c()({},o,{width:320,noMargin:!0,menuClassNames:Z}),U,r.a.createElement(F.d,{noPaddingAbove:!0}),q,G,$&&r.a.createElement(F.d,null),$,Y&&r.a.createElement(F.d,null),Y,Q))}}app_profile_card_AppProfileCard.displayName="AppProfileCard",app_profile_card_AppProfileCard.defaultProps=Ye;var Qe=Object(O.b)(Object(i.b)((e,{serviceId:t,homeWorkspaceId:a,memberId:n,viewContext:s})=>{const r=Object(k.c)(e,{serviceId:t,homeWorkspaceId:a,memberId:n}),i=Object(S.d)(e),o=Object(Q.E)(e,r),l=Object(Q.u)(e,r),c=Object(G.q)(e)?Object(S.g)(e).id:void 0,d=Object(j.b)(e),u=r&&Object(j.d)(e,Object(Q.v)(r)),p=Object(Q.i)(e,r);var h=L(e,s);const m=h.channelId,b=h.threadTs,f=Object(j.d)(e,n||r&&r.app_user&&r.app_user.id),_=m&&Object(I.f)(e,m,n),g=m&&_.isKnown&&_.isMember&&Object(N.r)(e,m,f);let O=[];return m&&r.commands&&(O=r.commands.filter(t=>Object(T.k)(e,t,{channelId:m,isThread:!!b}).isEnabled)),{app:r,appUser:f,channelId:m,threadTs:b,commands:O,defaultAppIcon:Object(E.f)(e),installedByMember:u,installerIsYou:Object(Q.w)(e,r),isAppSpaceEnabled:Object(E.g)(e),isActive:Object(Q.B)(r),isExternal:o,isOrgShared:Object(Q.F)(e,r),showAppSettings:Object(Q.L)(e,r),showAppDirectoryLink:Object(Q.K)(e,r),showSlashCommands:Object(Q.M)(e,r),featureReactMemberProfileCard:Object(G.m)(e,"feature_react_member_profile_card"),featureAddAppHomeTeamName:Object(G.m)(e,"feature_add_app_home_team_name"),featureSonicInputs:Object(G.m)(e,"feature_sonic_inputs"),homeWorkspaceId:Object(Q.j)(r)||a,currentTeam:i,externalTeam:l,clogger:Object(y.a)({state:e}),currentEnterpriseId:c,currentUserId:d.id,appHomeTeamDisplayName:p,isMemberRestricted:Object(w.Gb)(d),isMemberUltraRestricted:Object(w.Mb)(d),canBeRemovedFromChannel:g,featureM11nChannelDetails:Object(G.m)(e,"feature_m11n_channel_details")}})(app_profile_card_AppProfileCard)),Xe=a("1cj1"),Je=a("HvGc"),Ze=a("/m+M"),et=a("OYPW"),tt=a("llxT"),at=a("3JmS"),nt=a("kyN7"),st=a("Ect7"),rt=a("YcId"),it=a("RoDk"),ot=a("bkaq"),lt=a("G7w5");a("NqlN");const ct=new g.b("member_profile"),dt=new g.b("team");function ut({fullName:e,memberType:t}){return t?ct.t("Profile image for {fullName}. {memberType}. Hit enter to view profile",{fullName:e,memberType:t}):ct.t("Profile image for {fullName}. Hit enter to view profile",{fullName:e})}function pt(e,t){const a=Object(Ne.getStateByTeamId)(e),n=Object(w.P)(t),s=Object(S.i)(a,n);return Object(w.tb)(t)?Object(Ae.e)(s):Object(w.mb)(t)?dt.t("Deactivated account",{fallbackHash:"d57fa5164165105a1507c830ae06f7af8307870a",fallbackHashNs:"team"}):Object(w.Mb)(t)?Object(w.xb)(t)?dt.t("Invited Guest"):dt.t("Single-Channel Guest"):Object(w.Gb)(t)?Object(w.xb)(t)?dt.t("Invited Guest"):dt.t("Multi-Channel Guest"):Object(w.Eb)(a,t)?dt.t("Owner of {teamName}",{teamName:Object(g.q)(Object(Ae.e)(s))}):Object(w.eb)(a,t)?dt.t("Workspace Admin"):Object(w.xb)(t)?dt.t("Invited Member"):null}a("kVk7");var ht=a("ynxK");const mt=new g.b("member_profile"),bt=(o.default.string.isRequired,o.default.func,o.default.bool,o.default.string,o.default.func.isRequired,o.default.bool,{onMenuItemSelected:p.a,canRemoveFromChannel:!1,channelId:void 0,featureModernProfileFlexpane:!1});function ft({memberId:e,onMenuItemSelected:t,canRemoveFromChannel:a,channelId:n,dispatchOpenRemoveMemberDialog:s,featureModernProfileFlexpane:i}){if(a&&n){const a=r.a.createElement("strong",null,r.a.createElement(Te.a,{className:"p-member_profile_card__context_action_channel_name",inline:!0,channelId:n,iconProps:{inherit:!0,align:"baseline"}})),o=i?mt.rt("Remove from {channelName}",{channelName:a}):"",l=()=>{s({memberId:e,channelId:n}),t()},c="member_profile_card_remove_from_channel";return r.a.createElement("div",{className:"p-member_profile_card__context_action_container"},r.a.createElement(ht.a,{className:"p-member_profile_card__context_action","data-qa":c,onClick:l},o))}return null}ft.defaultProps=bt;const _t={dispatchOpenRemoveMemberDialog:(...e)=>Object(Ie.a)(...e)};var gt=Object(O.b)(Object(i.b)(function(e,{memberId:t,viewContext:a}){const n=L(e,a).channelId,s=n&&Object(I.f)(e,n,t);return{canRemoveFromChannel:!(Object(G.d)(e)===t)&&s&&s.isKnown&&s.isMember&&Object(N.g)(e,n)&&Object(w.i)(e,t),channelId:n,featureModernProfileFlexpane:Object(G.m)(e,"feature_modern_profile_flexpane")}},_t)(ft));const yt=new g.b("member_profile"),Ot=(o.default.object,o.default.object,o.default.object,o.default.func,o.default.func,o.default.object,o.default.bool,o.default.bool,o.default.object,o.default.func,o.default.func,{currentMember:void 0,member:void 0,memberTeam:void 0,onClose:p.a,showMemberProfile:p.a,team:void 0,includeRemoveFromChannelAction:!1,canInteract:!0,clogger:{track:p.a},onMessageClick:p.a,onCallClick:p.a});function Ct({currentMember:e,member:t,memberTeam:a,onClose:n,showMemberProfile:i,team:o,includeRemoveFromChannelAction:l,canInteract:c,clogger:d,onMessageClick:u,onCallClick:p}){const h=Object(et.a)(()=>{const a=[lt.a.STATUS];return e!==t&&a.push(lt.a.TIME),a},[e,t]);const m=Object(Ze.a)().featureModernProfileFlexpane,b=Object(s.useCallback)(()=>{d.track(Re.EventId.USER_CARD_CLICK),n()},[d,n]);if(Object(s.useEffect)(()=>{const e=document.getElementById("member_profile_card_photo");e&&e.focus()},[]),!m)return null;const f=r.a.createElement(at.a,{className:"p-member_profile_card__picture",member:t}),_=r.a.createElement(st.a,{className:"p-member_profile_card__restriction",member:t,team:a}),g=r.a.createElement(ot.a,{className:"p-member_profile_card__name",member:t});return Object(Ae.K)(a)?r.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},r.a.createElement("div",{className:"p-member_profile_card__header"},f,_),g,r.a.createElement(rt.a,{memberTeam:a})):c?r.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},r.a.createElement("div",{className:"p-member_profile_card__header"},r.a.createElement(tt.a,{id:"member_profile_card_photo",className:"p-member_profile_card__picture_trigger","data-qa":"member_profile_card_photo",onClick:()=>{i({memberId:t.id}),b()},"aria-label":ut({fullName:Object(w.K)(t),memberType:pt(o.id,t)})},r.a.createElement("span",{className:"p-member_profile_card__picture_hint"},yt.t("Click to view profile")),f),_),r.a.createElement(ot.a,{className:"p-member_profile_card__name",member:t,onClick:b,onShowMemberProfile:()=>{i({memberId:t.id})},clogger:d}),r.a.createElement(lt.b,{member:t,onClick:b,team:o,types:h}),r.a.createElement(nt.a,{className:"p-member_profile_card__buttons",member:t,onClick:b,showCallButton:!0,clogger:d,onCallClick:p,onMessageClick:u}),l?r.a.createElement(gt,{memberId:t.id,onMenuItemSelected:b}):null):r.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},r.a.createElement("div",{className:"p-member_profile_card__header"},f,_),g,r.a.createElement(it.a,{member:t}))}Ct.displayName="MemberProfileCard",Ct.defaultProps=Ot;const vt={showMemberProfile:(...e)=>Object(Je.j)(...e)};var Et=Object(i.b)(function(e,{memberId:t}){const a=Object(j.d)(e,t);if(!a)return{};const n=Object(G.m)(e,"feature_stranger_danger")?Object(Xe.a)(e,t):!Object(w.Jb)(a);return{currentMember:Object(j.b)(e),member:a,memberTeam:Object(S.i)(e,Object(w.P)(a)),team:Object(S.d)(e),canInteract:n,clogger:Object(y.a)({state:e})}},vt)(Ct),kt=a("AUAP"),St=a("brL+"),jt=a("0sSB");o.default.object,o.default.string,o.default.string,o.default.string,o.default.bool,o.default.bool;const It={serviceId:void 0,memberId:void 0,homeWorkspaceId:void 0,menuProps:void 0,memberIsHuman:!1,includeRemoveFromChannelAction:!1};function wt(e){const t=e.serviceId,a=e.memberId,n=e.homeWorkspaceId,s=e.menuProps,i=e.memberIsHuman,o=e.includeRemoveFromChannelAction;if(t&&!i)return r.a.createElement(Qe,{serviceId:t,memberId:a,homeWorkspaceId:n,menuProps:s});if(a&&i){var l=s||{};const e=l.onClose,t=l.onCallClick,n=l.onMessageClick;return r.a.createElement(Et,{memberId:a,onClose:e,onCallClick:t,onMessageClick:n,includeRemoveFromChannelAction:o})}return null}wt.defaultProps=It;const Tt={userId:o.default.string,botId:o.default.string,botProfile:o.default.object},Nt=Object(i.b)((e,t)=>{const a=t.userId,n=t.botId,s=t.botProfile;var r=Object(kt.g)(e,{userId:a,botId:n,botProfile:s});const i=r.member,o=r.bot,l=r.memberIsHuman,c=Object(St.b)(e),d=Object(jt.c)({member:i,bot:o,botProfile:s,currentTeamId:c});return{serviceId:o&&o.id,memberId:i&&i.id,homeWorkspaceId:d,memberIsHuman:l}})(wt);Nt.propTypes=Tt;const At=e=>r.a.createElement(Nt,e);At.displayName="renderProfileCard";var Rt=a("X6iR"),Mt=a("h9PG"),Pt=a("B/i4"),xt=a("cErB"),Lt=a("EHyS"),Ft=a("Smdl");const Dt=new Set(["/apps","/services","/account","/admin","/customize","/pricing","/stats","/help","/plans","/interop"]);function Bt(e,t,a,n){if(!e)return!1;let s=e;const r=Object(Ae.n)(t);e.startsWith(r)&&(s=s.slice(r.length-1));let i=s;i.startsWith("/")||(i=`/${i}`);const o=i.indexOf("/",1);o>-1&&(i=i.slice(0,o));const l=i.indexOf("?");return l>-1&&(i=i.slice(0,l)),!!Dt.has(i)&&(a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),Object(Ae.P)(t,s,n),!0)}var Ut=a("6kok"),qt=a("4M+g"),Ht=a("NV6F"),Wt=a("LrgL");o.default.string.isRequired,o.default.node,o.default.func,o.default.string,o.default.bool,o.default.bool,o.default.string,o.default.func,o.default.bool,o.default.bool,o.default.func,o.default.func,o.default.func,o.default.func,o.default.func,o.default.oneOfType([o.default.object,o.default.func]),o.default.object,o.default.string;const Gt={children:void 0,onClick:void 0,className:void 0,disabled:!1,invert:!1,redirDomain:void 0,clogLinkClick:p.a,hideReferersPref:!0,permalinkContainsUnknownChannel:!1,onMouseDown:void 0,onMouseEnter:void 0,onMouseLeave:void 0,onCopy:void 0,openPermalink:p.a,forwardedRef:void 0,currentTeam:void 0,target:void 0};class connected_external_link_ExternalLink extends s.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){var t=this.props;const a=t.onClick,n=t.href,s=t.target,r=t.currentTeam;if(a)return a(e),void(e.defaultPrevented||Bt(n,r,e,s));Bt(n,r,e,s)||Object(Lt.a)(e)||1!==e.button&&this.props.openPermalink({permalink:n})&&(e.preventDefault(),e.stopPropagation())}render(){return r.a.createElement(Wt.a,c()({ref:this.props.forwardedRef},this.props,{onClick:this.onClick}))}}connected_external_link_ExternalLink.displayName="ExternalLink",connected_external_link_ExternalLink.defaultProps=Gt,connected_external_link_ExternalLink.displayName="ExternalLink";const Kt=r.a.forwardRef((e,t)=>r.a.createElement(connected_external_link_ExternalLink,c()({},e,{forwardedRef:t}))),Vt={openPermalink:(...e)=>Object(Ht.b)(...e)},zt=Object(i.b)((e,{href:t})=>{const a=Object(St.b)(e),n=Object(S.i)(e,a),s=Object(R.a)(e);Object(Ft.a)()&&t.startsWith("/")&&(t=Object(Ae.n)(n,t));const r=Object(Pt.b)(t);let i=!1;if(r&&Object(A.a)(r)){const t=Object(qt.e)(e,r);i=Object(Ut.Nb)(t)}const o=Object(xt.k)(t),l=o&&o.pathname,c=o&&o.hostname;return(Object(xt.h)(c)&&Object(Rt.a)(l,"/files/")||Object(xt.g)(t)&&Object(Rt.a)(l,"/docs/"))&&(t=Object(xt.p)(t,"origin_team",a),s&&(t=Object(xt.p)(t,"origin_channel",s))),{href:t,currentTeam:n,redirDomain:Object(G.f)(e,"redir_domain"),hideReferersPref:Object(Mt.a)(e,"hide_referers"),permalinkContainsUnknownChannel:i}},Vt)(connected_external_link_ExternalLink),$t=r.a.forwardRef((e,t)=>r.a.createElement(zt,c()({},e,{forwardedRef:t})));Kt.propTypes={href:o.default.string.isRequired};var Yt=$t;Ht.b.register(n.a),Ht.c.register(At),Ht.a.register(()=>Yt)},Ta79:function(e,t,a){e.exports=a.p+"shared_channels@2x-ce2e8d3.png"},TepT:function(e,t,a){},Tjgr:function(e,t,a){},U5UL:function(e,t,a){},UCMe:function(e,t,a){},UJZI:function(e,t,a){},UceB:function(e,t,a){"use strict";var n=a("ifKl"),s=a("aK/h"),r=a("q1tI"),i=a.n(r),o=a("XHGt"),l=a("TSYQ"),c=a.n(l),d=a("t85p"),u=a("XLFM"),p=a("od5y"),h=a("18Pa"),m=a("RAhH");a("h2AX");s.default.string,s.default.string,s.default.oneOfType([s.default.node,s.default.func]).isRequired,s.default.string,s.default.func,s.default.bool,s.default.string,s.default.object,s.default.string,s.default.string,s.default.bool,s.default.bool;const b={className:"",onClick:n.a,iconType:null,tooltipPosition:"top",ariaHasPopup:!0,"data-qa":void 0,btnRef:null,shortcutKey:null,ariaLabel:null,"aria-pressed":void 0,featureMessageActionsRefresh:!1};class MessageActionButton extends r.PureComponent{constructor(){super(),this.onKeyDown=this.onKeyDown.bind(this)}onKeyDown(e){e&&e.key===this.props.shortcutKey&&(e.stopPropagation(),e.preventDefault(),this.props.onClick(e))}render(){var e=this.props;const t=e.ariaLabel,a=e.featureMessageActionsRefresh,n=e.label,s=c()("c-message_actions__button",this.props.className);return i.a.createElement(m.c,{tip:this.props.label,position:this.props.tooltipPosition,delay:m.b},a?i.a.createElement(h.a,{className:s,onClick:this.props.onClick,"aria-label":t||n,"aria-haspopup":this.props.ariaHasPopup,"data-qa":this.props["data-qa"],ref:this.props.btnRef,onKeyDown:this.props.shortcutKey?this.onKeyDown:null,"aria-pressed":this.props["aria-pressed"],icon:this.props.iconType,size:"small"}):i.a.createElement(u.c,{className:s,onClick:this.props.onClick,"aria-label":t||n,"aria-haspopup":this.props.ariaHasPopup,"data-qa":this.props["data-qa"],ref:this.props.btnRef,onKeyDown:this.props.shortcutKey?this.onKeyDown:null,"aria-pressed":this.props["aria-pressed"]},i.a.createElement(p.b,{type:this.props.iconType})))}}MessageActionButton.displayName="MessageActionButton",MessageActionButton.defaultProps=b,t.a=Object(o.b)(function(e){return{featureMessageActionsRefresh:Object(d.m)(e,"feature_message_actions_refresh")}})(MessageActionButton)},Usoh:function(e,t,a){},VGdo:function(e,t,a){},VJ6R:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("ifKl"),s=a("q1tI"),r=a("UF3u");function i(e=n.a,t=[]){const a=Object(s.useRef)();Object(s.useEffect)(()=>{Object(r.a)(a.current,t)||(a.current=t,e())})}},VQnp:function(e,t,a){e.exports=a.p+"apps@2x-4eec854.png"},VTc2:function(e,t,a){},VmKF:function(e,t,a){},VwqH:function(e,t,a){"use strict";var n=a("7EGn"),s=a("q1tI"),r=a.n(s),i=a("XHGt"),o=a("nNoG"),l=a("G4ux"),c=a("1hAG"),d=a("Fdc0"),u=a("5mKg"),p=a("xoiQ"),h=a("derf"),m=a("XLFM"),b=a("od5y"),f=a("k55U"),_=a("vFlG");var g=a("7Ztl"),y=a("jUSB"),O=a("pJ2S");a("m0k8");const C=new o.b("incoming_call_window");class incoming_call_IncomingCall extends s.PureComponent{componentDidMount(){Object(y.a)(O.g,{loop:!0})}componentWillUnmount(){Object(y.b)(O.g)}getSrcSetAttribute(e){return e?`${e} 2x`:""}maybeRenderGuestBadge(){return this.props.isUltraRestricted?r.a.createElement(b.b,{type:"single-channel-guest",inline:!0}):this.props.isRestricted?r.a.createElement(b.b,{type:"restricted-user",inline:!0}):null}renderUserImage(){var e=this.props.avatarUrls;const t=e.imageUrl,a=e.imageUrl2x;return t||a?r.a.createElement("img",{className:"p-incoming_call__member_image",src:t||a,srcSet:this.getSrcSetAttribute(a),alt:""}):null}renderExternalTeamLabel(){return r.a.createElement("div",{className:"p-incoming_call__external_team_banner"},r.a.createElement("span",{className:"p-incoming_call__external_team_name"},this.props.externalTeamName),r.a.createElement(h.b,{className:"p-incoming_call__external_team_icon",id:this.props.memberTeamId,size:18}))}renderUserName(){return r.a.createElement("div",{className:"p-incoming_call__member_name_wrapper"},r.a.createElement("span",{className:"p-incoming_call__member_name"},this.props.prefCompliantMemberName),this.maybeRenderGuestBadge())}renderCaptionText(){const e=C.t("is calling you");return r.a.createElement("div",{className:"p-incoming_call__user_caption"},e)}renderCallButtons(){return r.a.createElement("div",{className:"p-incoming_call__button_container"},r.a.createElement(m.d,{type:"danger",size:"medium",onClick:()=>this.props.onRejectCall(this.props.callId),className:"p-incoming_call__button","aria-label":"Decline"},r.a.createElement(b.b,{type:"times"})),r.a.createElement(m.d,{type:"primary",size:"medium",onClick:()=>this.props.onAcceptCall(this.props.callId),className:"p-incoming_call__button","aria-label":"Accept"},r.a.createElement(b.b,{type:"phone"})))}render(){return r.a.createElement("div",{className:"p-incoming_call"},this.props.isExternal&&this.renderExternalTeamLabel(),this.renderUserImage(),r.a.createElement("div",{className:"p-incoming_call__info"},this.renderUserName(),this.renderCaptionText(),this.renderCallButtons()))}}function v(e,t){if(function(e){return!!Object(_.a)(e,"activeCall")}(e))return e.activeCall.incomingInviterUserId;const a=Object(g.b)(e,t).incomingInvite;if(a)return a.userId;Object(f.f)("No incoming invite")}incoming_call_IncomingCall.displayName="IncomingCall";t.a=Object(i.b)((e,t)=>{const a=v(e,t.callId);if(!a)throw new Error(`No inviter user id for callId: ${t.callId}`);const s=Object(l.d)(e,a),r=Object(d.P)(s),i=Object(c.i)(e,r),o=Object(d.tb)(s),h=Object(d.V)(e,s),m=Object(u.e)(i),b=Object(n.a)(s,"profile.avatar_hash");return{avatarUrls:Object(p.a)({size:200,teamId:r,memberId:a,avatarHash:b}),prefCompliantMemberName:h,memberTeamId:r,externalTeamName:m,isRestricted:Object(d.Gb)(s),isUltraRestricted:Object(d.Mb)(s),isExternal:o}})(incoming_call_IncomingCall)},W3KZ:function(e,t,a){"use strict";const n=/::[^:]+-([2-6])$/;t.a=(e=>{if(!e)return null;const t=e.toLowerCase().replace(/(^:|:$)/g,""),a=t.match(n),s=t.replace(n,"");if(!s)return null;if(-1!==s.indexOf(":"))return null;let r;return a&&((r=parseInt(a[1],10))<2||r>6)?null:{name:s,skinTone:r}})},W3Yc:function(e,t,a){},"W5K+":function(e,t,a){},W90I:function(e,t,a){},WI3T:function(e,t,a){},WJwm:function(e,t,a){},WOap:function(e,t,a){"use strict";var n=a("TGBA"),s=a("ifKl"),r=a("q1tI"),i=a.n(r),o=a("XHGt"),l=a("aK/h"),c=a("TSYQ"),d=a.n(c),u=a("IxGy"),p=a("BUzq"),h=a("Q+UV"),m=a("hOQf"),b=a("aLpA"),f=a("tbBR"),_=a("0gKA"),g=a("Q3oM");a("qMiJ");l.default.object.isRequired,l.default.string,l.default.node,l.default.string,l.default.oneOf(["default","inside","above"]),l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.oneOf(Object(n.a)(b.I)),l.default.string,l.default.bool,l.default.func,l.default.bool,l.default.func,l.default.bool,l.default.bool,l.default.func,l.default.func;const y={className:void 0,children:void 0,position:"default",parentId:void 0,show:void 0,showComment:!0,showShare:!0,showReact:!0,showJump:!1,showStar:!0,showMoreActions:!0,jumpOrigin:void 0,messageContainerType:void 0,viewContext:void 0,hover:!1,setHover:s.a,isEditing:!1,maybeStartEditingMessage:s.a,isPinned:!1,renderOffscreen:!1,clogLinkClick:s.a,clogThreadEvent:s.a};class MessageActions extends r.PureComponent{constructor(e){super(e),this.onMenuOpen=this.onMenuOpen.bind(this),this.onMenuClose=this.onMenuClose.bind(this),this.startEditing=this.startEditing.bind(this),this.renderActions=this.renderActions.bind(this)}onMenuOpen(){this.props.setHover(!0)}onMenuClose(){this.props.setHover(!1)}startEditing(){var e=this.props;const t=e.msg,a=e.viewContext;this.props.maybeStartEditingMessage({channelId:Object(m.F)(t),ts:Object(m.Q)(t),viewContext:a,scroll:!0})}renderActions(){var e=this.props;const t=e.msg,a=e.hover,n=e.show,s=e.showComment,r=e.showShare,o=e.showReact,l=e.showJump,c=e.showStar,d=e.showMoreActions,u=e.jumpOrigin,p=e.messageContainerType,b=e.isEditing,f=e.renderOffscreen,g=e.clogLinkClick,y=e.clogThreadEvent,O=e.parentId,C=e.isPinned;if(!1===n)return null;if(void 0===n&&!a&&!f)return null;if(b)return null;if(Object(m.ab)(t)||Object(m.Y)(t))return null;if(Object(m.jb)(t))return null;if(t.isEKMError)return null;const v=t.ts,E=t.thread_ts,k=t.channel,S=t.file,j=t.comment,I=t.subtype;return i.a.createElement(_.a,{ts:v,threadTs:E,channelId:k,reactionKey:Object(h.b)(t),isStarred:Object(m.rb)(t,S,j),isReply:Object(m.lb)(t),isEphemeral:Object(m.bb)(t),isPinned:C,subtype:I,replyCount:Object(m.S)(t),comment:t.comment&&t.comment.id,fileIds:t.files,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,onEmojiPickerOpen:this.onMenuOpen,onEmojiPickerClose:this.onMenuClose,showComment:s,showShare:r,showReact:o,showJump:l,showStar:c,showMoreActions:d,jumpOrigin:u,editHandler:this.startEditing,messageContainerType:p,renderOffscreen:f&&!a&&!n,clogLinkClick:g,clogThreadEvent:y,parentId:O})}render(){var e=this.props;const t=e.children,a=e.position,n=d()("c-message_kit__actions",`c-message_kit__actions--${a}`,this.props.className);return i.a.createElement("div",{className:n,style:{position:"relative"}},t,this.renderActions())}}MessageActions.displayName="MessageActions",MessageActions.defaultProps=y;const O={maybeStartEditingMessage:(...e)=>Object(u.g)(...e)};t.a=Object(f.b)(Object(g.b)(Object(o.b)((e,{msg:t,viewContext:a})=>{const n=Object(m.F)(t),s=Object(m.Q)(t);return{isEditing:!!Object(u.e)(e,{channelId:n,ts:s,viewContext:a}),isPinned:Object(p.j)(e,{channelId:n,ts:s})}},O)(MessageActions)))},WVKS:function(e,t,a){"use strict";var n=a("pguY"),s=a("zmn3"),r=a("HiDb"),i=a("XI8A"),o=a("Qv4Q");let l;t.a=(()=>{if(l)return l;const e=function(){const e=Object(r.a)(i,e=>{const t=Object(s.a)(e.skinVariations,"unicode");return[e.unicode,...t]});return Object(s.a)(e,o.b)}().sort((e,t)=>t.length-e.length),t=Object(s.a)(e,n.a);return l=new RegExp(`(${t.join("|")})(\ud83c[\udffb-\udfff])?`,"g")})},We3W:function(e,t,a){},X28p:function(e,t,a){"use strict";var n=a("aK/h"),s=a("q1tI"),r=a.n(s),i=a("MnCE"),o=a("TSYQ"),l=a.n(o);a("h2AX");n.default.node,n.default.string,n.default.string;const c=({className:e,children:t,ariaLabel:a})=>r.a.createElement("div",{className:l()("c-message_actions__container",e),role:"group","aria-label":a},t);c.displayName="MessageActionContainer",c.defaultProps={children:null,className:null,ariaLabel:null},t.a=Object(i.a)(c)},XKj7:function(e,t,a){"use strict";a.d(t,"c",function(){return r}),a.d(t,"e",function(){return i}),a.d(t,"d",function(){return o}),a.d(t,"f",function(){return l}),a.d(t,"a",function(){return c}),a.d(t,"g",function(){return d}),a.d(t,"b",function(){return u});var n=a("ifKl"),s=a("ROZo");Object(s.b)("TS.prefs.setMultiPrefsByAPI",n.a),Object(s.b)("TS.prefs.setPrefByAPI",n.a);const r=Object(s.b)("TS.prefs.legacyOnPrefChanged",n.a),i=Object(s.b)("TS.prefs.onPrefChanged",n.a),o=Object(s.b)("TS.prefs.legacyOnTeamPrefChanged",n.a),l=Object(s.b)("TS.prefs.onTeamPrefChanged",n.a),c=Object(s.b)("TS.prefs.sidebar_theme_changed_sig.dispatch",n.a),d=Object(s.b)("TS.prefs.removeTeamFromEnterpriseExcludeTeamPref",n.a),u=Object(s.b)("TS.prefs.legacyOnMutedChannelsPrefChanged",n.a)},XThT:function(e,t,a){},XcDb:function(e,t,a){},XoBp:function(e,t,a){"use strict";var n=a("aK/h"),s=a("XHGt"),r=a("5v1V");const i={children:n.default.node,isDegradedMode:n.default.bool},o=({isDegradedMode:e,children:t})=>e?t:null;o.propTypes=i,o.defaultProps={children:null,isDegradedMode:null};t.a=Object(s.b)(e=>({isDegradedMode:Object(r.m)(e)}))(o)},XoJV:function(e,t,a){"use strict";a.d(t,"b",function(){return f}),a.d(t,"a",function(){return _}),a.d(t,"g",function(){return C}),a.d(t,"f",function(){return v}),a.d(t,"e",function(){return E}),a.d(t,"d",function(){return k}),a.d(t,"c",function(){return S}),a.d(t,"h",function(){return j}),a.d(t,"i",function(){return I});var n=a("sk9p"),s=a.n(n),r=a("fujP"),i=a("gSGL"),o=a("OZf9"),l=a("aK/h"),c=a("Qv4Q"),d=a("nNoG"),u=a("P1FA"),p=a("Z7Ay");const h=new d.b("emoji");let m={},b={},f=({locale:e,canonicalToLocalized:t}={})=>{if(!e||Object(r.a)(t))return;const a={};Object(o.a)(t,(e,t)=>{a[e]=t;const n=Object(u.a)(e);n!==e&&(a[n]=t)}),m[e]={canonicalToLocalized:t,localizedToCanonical:a}};f.propTypes={locale:l.default.string.isRequired,canonicalToLocalized:l.default.object.isRequired};let _=({locale:e,localizedKeywordMap:t}={})=>{e&&!Object(r.a)(t)&&(b[e]=t)};_.propTypes={locale:l.default.string.isRequired,keywordMap:l.default.object.isRequired};const g=Object(c.c)(),y=/(^:)\S+(:$)/;function O(e,t){if(!Object(i.a)(e))return null;if(!t)return e;const a=y.test(e);var n=e.replace(/^:|:$/g,"").toLowerCase().split("::"),r=s()(n,2);const o=r[0],l=r[1];let c=t[o];if(!c)return e;if(l){const a=t[l];if(!a)return e;c=`${c}::${a}`}return a?`:${c}:`:c}const C=({locale:e,name:t}={})=>{if(!e||!t)return null;if(!m[e])return t;return O(t,m[e].canonicalToLocalized)},v=e=>{if(!e||!e.name)return null;let t;switch(e.name){case"Smileys & People":t=h.t("Smileys & People",{fallbackHash:"b37554f695b15005fd23907b9488e0a8ad4bca5f",fallbackHashNs:"emoji"});break;case"Animals & Nature":t=h.t("Animals & Nature",{fallbackHash:"bddc7adb1204fed1e94206edb0213ced81f348d4",fallbackHashNs:"emoji"});break;case"Food & Drink":t=h.t("Food & Drink",{fallbackHash:"a9704a2ad9afea5f9d4d1504458f91e253557264",fallbackHashNs:"client"});break;case"Activities":t=h.t("Activities",{fallbackHash:"81c0d915fa6d82fd30661c5e66e204cea52bb2b5",fallbackHashNs:"emoji"});break;case"Travel & Places":t=h.t("Travel & Places",{fallbackHash:"4cea7e0a28a73fafbe052e8132f1c86cd07a68ed",fallbackHashNs:"emoji"});break;case"Objects":t=h.t("Objects",{fallbackHash:"72a83add2c5ede877c10d23f302d3e17accbadab",fallbackHashNs:"emoji"});break;case"Symbols":t=h.t("Symbols",{fallbackHash:"22ad664e9eb98b75a73333b2b2395fc4b52e6fc9",fallbackHashNs:"emoji"});break;case"Flags":t=h.t("Flags",{fallbackHash:"5d728758adcdd5154d3be55552c1c061ef1489b2",fallbackHashNs:"emoji"});break;default:t=""}return t},E=({locale:e,name:t}={})=>{if(!e||!t)return null;if(!m[e])return t;return O(t,m[e].localizedToCanonical)},k=({locale:e,text:t}={})=>e&&t?t.replace(g,t=>C({locale:e,name:t})):null,S=({locale:e,text:t}={})=>e&&t?t.replace(g,t=>E({locale:e,name:t})):null,j=e=>b[e],I=e=>e&&!Object(r.a)(m)&&!Object(r.a)(m[e])&&!Object(r.a)(b)&&!Object(r.a)(b[e]);Object(p.a)("emojiTranslation",{getLocalizedEmojiName:C,getCanonicalEmojiName:E,convertEmojiInStringToLocalized:k,convertEmojiInStringToCanonical:S,translationMaps:m,keywordMaps:b})},XwvF:function(e,t,a){},Y6eO:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("fujP"),i=a("yIs4"),o=a("+Xah"),l=a("ifKl"),c=a("aK/h"),d=a("q1tI"),u=a.n(d),p=a("XHGt"),h=a("mM05"),m=a.n(h),b=a("t85p"),f=a("brL+"),_=a("dhvi"),g=a("quKg"),y=a("fYfO"),O=a("4M+g"),C=a("h9PG"),v=a("rZal"),E=a("XL7r"),k=a("G4ux"),S=a("IxGy"),j=a("QOH6"),I=a("J19L"),w=a("1yga"),T=a("qk+D"),N=a("aLpA"),A=a("mLe0"),R=a("XfeM"),M=a("XRnC");const P=Object(R.b)("Count the number of characters over the message length limit",(e,t,{channelId:a,text:n,delta:s,featureWysiwygComposer:r}={})=>{var i=Object(M.b)(t(),{channelId:a,text:n,delta:s,featureWysiwygComposer:r});const o=i.rawText,l=i.processedDelta;return r?Math.max(0,Object(A.a)(l)-N.C):Math.max(0,o.length-N.B)});P.meta={name:"countCharsOverLimit",key:"actionsCountCharsOverMessageLimitCountCharsOverLimit",description:"Count the number of characters over the message length limit"},P.propTypes={channelId:c.default.string,text:c.default.string};var x=P,L=a("6kok"),F=a("Fdc0"),D=a("hOQf"),B=a("XLFM"),U=a("lwWk"),q=a("od5y"),H=a("eglI"),W=a("oxKW"),G=a("nNoG"),K=a("NAkb"),V=a("A/mR"),z=a("OF9j"),$=a("X/Nq");function Y(e,t){return Object($.a)(new m.a(e),new m.a(t))}var Q=a("u8wn"),X=a("a+Oh"),J=a("icQl"),Z=a("PM8X"),ee=a("oT5T"),te=a("tbBR"),ae=a("Pe1S");const ne=60,se=1e3,re=new G.b("message"),ie=(c.default.string.isRequired,c.default.string.isRequired,c.default.object.isRequired,c.default.bool.isRequired,c.default.func,c.default.string,c.default.string,c.default.string,c.default.bool,c.default.func,c.default.func,c.default.func,c.default.func,c.default.bool,c.default.bool,c.default.arrayOf(c.default.object),c.default.object,c.default.bool,c.default.number,c.default.bool,c.default.bool,c.default.string,c.default.func,c.default.func,c.default.bool,c.default.bool,c.default.bool,c.default.func,c.default.bool,c.default.bool,{saveMessageEdit:l.a,channelId:null,teamId:void 0,viewContext:N.I.MESSAGE_PANE,isSelfIm:!1,setDidRequestToStopEditing:l.a,updateEditState:l.a,stopEditingMessage:l.a,updateHasUnsavedChanges:l.a,canDelete:!0,canUnbroadcast:!1,initialEditOps:void 0,initialContents:void 0,didRequestToStopEditing:!1,editWindowMin:-1,isAdminUser:!1,useJumbomoji:!1,messageContainerType:void 0,openModal:l.a,countCharsOverMessageLimit:o.a,featureSonicInputs:!1,clientToolBar:!1,featureWysiwygComposer:!1,completedMessageAction:l.a,featureContextualMessageShortcuts:!1,featureWysiwygAnchorText:!1}),oe="message_pane_edit_input";function le(e){Object(Z.a)({e:e,input_to_fill:`#${oe}`,offset_y:-8})}class edit_message_BaseEditMessage extends d.PureComponent{constructor(e){super(e),this.setTextyRef=this.setTextyRef.bind(this),this.maybeSave=this.maybeSave.bind(this),this.onTimerInterval=this.onTimerInterval.bind(this),this.renderTimeoutErrorDialog=this.renderTimeoutErrorDialog.bind(this),this.renderLengthErrorDialog=this.renderLengthErrorDialog.bind(this),this.renderUnknownErrorDialog=this.renderUnknownErrorDialog.bind(this),this.stopEditingMessage=this.stopEditingMessage.bind(this),this.handleSaveEditError=this.handleSaveEditError.bind(this),this.onEnter=this.onEnter.bind(this),this.onTextChange=this.onTextChange.bind(this),this.renderInput=this.renderInput.bind(this),this.texty=null,this.syncEditStateOnUnmount=!0,this.editWindowTimeout=null,this.componentDidUnmount=!1,this.enableBroadcastKeywords=!(this.props.messageContainerType===N.I.THREADS_FLEXPANE||this.props.messageContainerType===N.I.THREADS_VIEW),this.textyModules={tabcomplete:{searchOptions:{},positionMenu:e=>{e.style.width=`${this.texty.container.offsetWidth}px`,Object(K.a)(e,this.texty.container)},completers:["channels","emoji","members"]}},this.state={editSecondsRemaining:this.countRemainingSeconds(),numCharsOverLimit:this.props.countCharsOverMessageLimit({channelId:this.props.channelId,text:this.getEditContentsAsString(),delta:this.props.featureWysiwygComposer?new m.a(this.props.originalMessageContents.contents):null,featureWysiwygComposer:this.props.featureWysiwygComposer})},this.getComputedModules=Object(J.a)((e,t,a,n,r,i)=>{if(!a&&!n)return e;const o=Object(ae.a)({featureWysiwygComposer:n,featureWysiwygAnchorText:i});return s()({},e,{composer:s()({},o,{teamId:t,zIndexOverride:r?null:200}),slacklink:n&&{convertImages:!1,disableLinksWithLabels:!i},slackmarkdown:n&&{convertHeaders:!1,convertHorizontalRule:!1}})})}componentDidMount(){var e=this.props;const t=e.isSelfIm;e.editWindowMin>=0&&!t&&(this.editWindowTimeout=setInterval(this.onTimerInterval,se))}componentWillUnmount(){if(this.syncEditStateOnUnmount){const e=this.texty.getContents(),t=this.hasUnsavedChanges();this.props.updateEditState({editOps:e.contents,hasUnsavedChanges:t})}this.editWindowTimeout&&clearInterval(this.editWindowTimeout),this.componentDidUnmount=!0}onEnter(){return this.maybeSave(),!1}onTextChange(){var e=this.props;const t=e.didRequestToStopEditing,a=e.channelId,n=this.state.numCharsOverLimit,s=this.props.countCharsOverMessageLimit({channelId:a,text:this.getEditContentsAsString(),delta:this.props.featureWysiwygComposer?new m.a(this.getEditContents().contents):null,featureWysiwygComposer:this.props.featureWysiwygComposer});(s>0||n>0)&&this.setState(()=>({numCharsOverLimit:s})),this.props.updateHasUnsavedChanges(this.hasUnsavedChanges()),t&&!this.hasUnsavedChanges()&&this.props.setDidRequestToStopEditing(!1)}onTimerInterval(){this.setState(()=>({editSecondsRemaining:this.countRemainingSeconds()}))}getEditContents(){const e=this.props.initialEditOps;return this.texty?this.texty.getContents():e?{contents:e}:{contents:[]}}getEditContentsAsString(){return this.props.featureWysiwygComposer?"":Object(z.a)(this.getEditContents())}setTextyRef(e){this.texty=e&&e.getWrappedInstance?e.getWrappedInstance():e}UNSAFE_componentWillReceiveProps(e){e.didRequestToStopEditing&&!this.hasUnsavedChanges()&&this.stopEditingMessage()}UNSAFE_componentWillUpdate(e,{editSecondsRemaining:t}){t<=0&&clearInterval(this.editWindowTimeout)}countRemainingSeconds(){var e=this.props;const t=e.isSelfIm,a=e.editWindowMin,n=e.ts;if(a<0||t)return null;const s=60*a*1e3,r=Object(V.n)(n).getTime()+s;return Math.round((r-Date.now())/1e3)}handleSaveEditError({message:e}){switch(e){case"edit_window_closed":this.renderTimeoutErrorDialog();break;case"msg_too_long":this.renderLengthErrorDialog();break;default:this.renderUnknownErrorDialog()}}hasUnsavedChanges(){var e=this.props;const t=e.initialEditOps,a=e.originalMessageContents;return this.texty?!Y(this.texty.getContents.contents,a.contents):!t||!(t&&Y(t,a.contents))}isSavingDisabled(){const e=this.state.editSecondsRemaining;return Object(i.a)(e)&&e<=0||this.shouldShowLengthWarning()}maybeSave(){var e=this.props;const t=e.channelId,a=e.ts,n=e.viewContext,s=e.featureWysiwygComposer;var r=this.state;const o=r.editSecondsRemaining;return!(r.numCharsOverLimit>0)&&(!(Object(i.a)(o)&&o<=0)&&(this.texty.isEmpty({doIgnoreWhitespace:!0})?(this.startDelete(),!1):(this.props.saveMessageEdit({channelId:t,text:this.getEditContentsAsString(),delta:s?new m.a(this.getEditContents().contents):null,viewContext:n,ts:a}).catch(this.handleSaveEditError),!0)))}shouldShowLengthWarning(){return this.state.numCharsOverLimit>0}shouldShowTimeoutWarning(){const e=this.state.editSecondsRemaining;return Object(i.a)(e)&&e<ne}shouldShowUnsavedWarning(){return this.props.didRequestToStopEditing&&this.hasUnsavedChanges()}startDelete(){var e=this.props;const t=e.channelId,a=e.originalMessageTextUsedForDeletionOnly,n=e.originalMessageContents,s=e.canDelete,r=e.canUnbroadcast,i=e.ts,o=e.viewContext,l=e.featureWysiwygComposer;if(s)this.props.openModal({element:u.a.createElement(w.a,{channelId:t,ts:i})});else if(r)this.props.openModal({element:u.a.createElement(I.a,{channelId:t,ts:i})});else if(l){const e=new m.a(n.contents),a=e.compose((new m.a).retain(e.length(),{strike:!0}));this.props.saveMessageEdit({channelId:t,delta:a,viewContext:o,ts:i}).catch(this.handleSaveEditError)}else{const e=`~${a.replace(/~/g,"")}~`;this.props.saveMessageEdit({channelId:t,text:e,viewContext:o,ts:i}).catch(this.handleSaveEditError)}}stopEditingMessage(){var e=this.props;const t=e.channelId,a=e.ts,n=e.viewContext,s=e.featureContextualMessageShortcuts,r=e.completedMessageAction;this.syncEditStateOnUnmount=!1,this.props.stopEditingMessage({viewContext:n,channelId:t,ts:a}),s&&r({viewContext:n,channelId:t,ts:a,focusOnInput:!0})}renderInput(){var e=this.props;const t=e.initialContents,a=e.messageHasText,n=e.useJumbomoji,s=e.channelId,r=e.featureSonicInputs,i=e.clientToolBar,o=e.featureWysiwygComposer,l=e.featureWysiwygAnchorText,c=e.teamId,d=a?re.t("Edit message"):re.t("Add message"),p=i&&!r?"c-message__editor__input--legacy c-message__editor__input--client_toolbar":"c-message__editor__input--legacy";if(!r){const e=this.getComputedModules(this.textyModules,c,i,o,r,l);return u.a.createElement(u.a.Fragment,null,u.a.createElement(H.default,{id:oe,ref:this.setTextyRef,className:p,modules:e,ariaLabel:d,placeholder:d,initialText:t,onEnter:this.onEnter,onEscape:this.stopEditingMessage,onTextChange:this.onTextChange,enableJumbomoji:n,focusOnMount:!0,useLegacyCreate:!0,channelId:s,enableBroadcastKeywords:this.enableBroadcastKeywords,useFocusRing:!1}),u.a.createElement(B.c,{onClick:le,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},u.a.createElement(q.a,{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),u.a.createElement(q.a,{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),u.a.createElement(q.a,{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"})))}return u.a.createElement(W.a,{completeOnChannels:!0,completeOnEmoji:!0,completeOnMembers:!0,shouldCompleteOnTab:!0,channelId:this.props.channelId,renderInput:({isOpen:e,modules:a})=>{const l=this.getComputedModules(a,c,i,o,r);return u.a.createElement(H.default,{ref:this.setTextyRef,className:"c-message__editor__input",modules:l,ariaLabel:d,placeholder:d,initialText:t,onEnter:this.onEnter,onEscape:this.stopEditingMessage,onTextChange:this.onTextChange,enableJumbomoji:n,isAutocompleteOpen:e,focusOnMount:!0,channelId:s,enableBroadcastKeywords:this.enableBroadcastKeywords,enableEmojiButton:!0,enableComposerButton:o,enableSendButton:!1,useFocusRing:!1})}})}renderLengthErrorDialog(){const e=re.t("Message editing failed"),t=re.t("Sorry, your message is too long. Please shorten it and try again.");this.props.openModal({element:u.a.createElement(ee.a,{title:e},t)})}renderLengthWarning(){const e=re.t("text is too long!");return u.a.createElement("span",{className:"c-message__editor__warning","data-js":"length_warning"},e)}renderTimeoutErrorDialog(){var e=this.props;const t=e.editWindowMin,a=e.isAdminUser,n=Object(V.r)(t,{units:"minutes"}),s=re.t("Message editing failed"),r=re.rt("Sorry, but messages can only be edited for {duration} after posting.",{duration:u.a.createElement("b",null,n)});let i;a&&(i=re.rt("(To adjust the message editing window, visit <a>Workspace Settings</a>)",null,({text:e})=>u.a.createElement(U.a,{href:"/admin/settings#message_editing",target:"_new"},e))),this.props.openModal({element:u.a.createElement(ee.a,{title:s},u.a.createElement("p",null,r),i)})}renderTimeoutWarning(){const e=this.state.editSecondsRemaining;let t;return e<=0?t=re.t("(your time to edit ran out)"):e<=ne&&(t=re.rt("(you have <b>{seconds, number}</b> {seconds, plural, =1{second}other{seconds}})",{seconds:e})),u.a.createElement("span",{className:"c-message__editor__warning","data-js":"timeout_warning"},t)}renderUnknownErrorDialog(){const e=re.t("Message editing failed"),t=re.t("Sorry, something went wrong with editing your message. Try again in a moment.");this.props.openModal({element:u.a.createElement(ee.a,{title:e},t)})}renderUnsavedWarning(){const e=re.rt("Finish editing this message first! Or press <b>escape</b> if you\u2019ve changed your mind.",{fallbackHash:"3480a7bdfba580c87d36cd0fc11d286cecbdbe27"});return u.a.createElement("span",{className:"c-message__editor__info","data-js":"unsaved_warning"},e)}renderWarningMessages(){const e=this.shouldShowUnsavedWarning()&&this.renderUnsavedWarning(),t=this.shouldShowTimeoutWarning()&&this.renderTimeoutWarning(),a=this.shouldShowLengthWarning()&&this.renderLengthWarning();return e||t||a?u.a.createElement("div",{className:"c-message__editor__messages"},e,t,a):null}render(){return u.a.createElement("div",{className:"c-message__editor","data-qa":"message_editor"},u.a.createElement("div",{className:"c-message__editor__input_container"},this.renderInput()),u.a.createElement("div",{className:"c-message__editor__footer"},u.a.createElement(B.d,{type:"outline",size:"small",onClick:this.stopEditingMessage},re.t("Cancel")),u.a.createElement(B.d,{size:"small",className:"c-message__editor__save",onClick:this.maybeSave,disabled:this.isSavingDisabled()},u.a.createElement(q.a,{type:"enter",className:"margin_right_50"}),re.t("Save Changes")),this.renderWarningMessages()))}}edit_message_BaseEditMessage.displayName="BaseEditMessage",edit_message_BaseEditMessage.defaultProps=ie;const ce={saveMessageEdit:T.a,setDidRequestToStopEditing:S.h,updateEditState:S.k,stopEditingMessage:S.b,updateHasUnsavedChanges:S.l,openModal:_.e,countCharsOverMessageLimit:x,completedMessageAction:j.a},de=Object(te.b)(Object(p.b)(function(e,{ts:t,channelId:a,viewContext:n,messageContainerType:s}){const i=Object(y.a)(e,a,t);if(!i)return{};const o=Object(X.a)(e),l=Object(O.e)(e,a),c=Object(C.a)(e,"msg_edit_window_mins"),d=Object(k.b)(e),u=Object(v.a)(e),p=Object(D.k)(e,{message:i,channel:l,messageContainerType:s}),h=Object(D.p)(e,{message:i,channel:l,messageContainerType:s});var m=Object(S.e)(e,{viewContext:n,channelId:a,ts:t})||{};const _=m.editOps,j=m.didRequestToStopEditing,I=Object(b.m)(e,"feature_plain_text_mode")&&Object(E.k)(e,"plain_text_mode"),w={contents:Object(Q.a)(e,i,{featureWysiwygComposer:o,usePlainTextMode:I}).ops};let T;return T=_?{contents:_}:w,{channelId:l.id,teamId:Object(f.b)(e),isSelfIm:Object(L.Ub)(d.id,l),canDelete:p,canUnbroadcast:h,originalMessageContents:w,initialEditOps:_,initialContents:T,ts:t,originalMessageTextUsedForDeletionOnly:i.text||"",messageHasText:o?!(!i.text&&Object(r.a)(i.blocks)):!!i.text,editWindowMin:c,isAdminUser:Object(F.eb)(e,d),didRequestToStopEditing:j,useJumbomoji:u,featureSonicInputs:Object(b.m)(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(g.c)(e,"composer_toolbar"),featureWysiwygComposer:o,featureContextualMessageShortcuts:Object(b.m)(e,"feature_contextual_message_shortcuts"),featureWysiwygAnchorText:Object(b.m)(e,"feature_wysiwyg_anchor_text")}},ce)(edit_message_BaseEditMessage));de.propTypes={ts:c.default.string.isRequired,channelId:c.default.string.isRequired};t.a=de},YDA8:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("UXvI"),i=a("lCmp"),o=a("ifKl"),l=a("qAkX"),c=a("Z0Cl"),d=a("aK/h"),u=a("q1tI"),p=a.n(u),h=a("tn36"),m=a("XHGt"),b=a("3zPy"),f=a("nNoG"),_=a("Go8C"),g=a("YYb+"),y=a("Rjjz"),O=a("yU6Y"),C=a.n(O),v=a("rWF5"),E=a("t85p"),k=a("HXD8"),S=a("uwE/"),j=a("uxhc"),I=a("brL+"),w=a("jeHR"),T=a("Zr7G"),N=a("Smdl"),A=a("dxEi"),R=a("RX/a"),M=a("bmfP"),P=a("od5y"),x=a("wljo");const L=new f.b("search"),F=(d.default.bool,d.default.bool,d.default.func.isRequired,({shouldShowOfflineNotice:e,shouldShowFeedbackLink:t,onFeedbackClick:a})=>(e||t)&&p.a.createElement("footer",null,p.a.createElement(M.a,null,p.a.createElement("span",{className:"c-search_autocomplete__footer_offline_notice",id:"footer-instructions"},L.rt("{iconOffline} <strong>No connection.</strong> Search is not available while offline, and navigating to conversations may be limited.",{iconOffline:p.a.createElement(P.b,{type:"cloud-offline",size:"inherit",className:"c-icon--inline"})}))),p.a.createElement(x.a,{className:"c-search_autocomplete__footer_feedback",onClick:a})));F.defaultProps={shouldShowOfflineNotice:!1,shouldShowFeedbackLink:!1};var D=F;a("L0DF");const B=new f.b("search"),U=new f.b("view"),q=(d.default.string,d.default.string,d.default.array.isRequired,d.default.number,d.default.func,d.default.func,d.default.func,d.default.func.isRequired,d.default.func.isRequired,d.default.func.isRequired,d.default.func.isRequired,d.default.bool,d.default.string.isRequired,d.default.object,d.default.bool.isRequired,d.default.bool.isRequired,{selectedIndex:null,onAccept:o.a,onDelete:o.a,onSelectedIndexChange:o.a,displayQuery:null,userQuery:null,shouldUseSwitchyEmptyState:!1,telemeter:T.d}),H=(e,t)=>(e%t+t)%t;class autocomplete_SearchAutocomplete extends u.Component{constructor(e){super(e),Object(h.a)(this,["onKeydown","onUserQueryChange","onSuggestionAccept","onSuggestionDelete","onSuggestionSelected","onMouseLeaveList","onFeedbackClick"]),this.searchAutocompleteSuggestionsPromise=void 0,this.markAutocompleteRenderStart=Object(r.a)(k.b.bind(null,e.telemeter),2e3,{leading:!0}),this.populateChannelNameCounts(),this.listRef=p.a.createRef(),this.listItemRefs={}}componentDidMount(){document.body.addEventListener("keydown",this.onKeydown),this.onUserQueryChange(),Object(j.e)(this.props.teamId);const e=Object(N.a)()?"omniswitcher-open-sonic":"omniswitcher-open-legacy";this.props.telemeter.measureAndClear("omniswitcher-open-mark",e)}shouldComponentUpdate(e){return e.selectedIndex!==this.props.selectedIndex||e.suggestions!==this.props.suggestions||e.shouldShowOfflineNotice!==this.props.shouldShowOfflineNotice}componentDidUpdate(e){e.userQuery!==this.props.userQuery&&this.onUserQueryChange(),this.populateChannelNameCounts()}componentWillUnmount(){document.body.removeEventListener("keydown",this.onKeydown)}onFeedbackClick(){this.props.openSearchFeedbackDialog({query:this.props.userQuery})}onKeydown(e){const t=()=>(e.preventDefault(),e.stopPropagation(),!1),a=e.shiftKey,n=e.which,s=b.codes.up,r=b.codes.tab,i=b.codes.down;return!a&&n===s||a&&n===r?(this.decrementSelectedIndex(),t()):!(!a&&n===i||n===r)||(this.incrementSelectedIndex(),t())}onUserQueryChange(){Object(k.a)(this.props.telemeter)}onSuggestionDelete(e){this.props.setSearchAutocompleteSuggestions({suggestions:Object(c.a)(this.props.suggestions,t=>e.key!==t.key)}),this.props.onDelete()}onSuggestionSelected(e,t){this.props.setSearchAutocompleteSelection({selectedIndex:e,setText:!t})}onMouseLeaveList(){this.props.setSearchAutocompleteSelection({selectedIndex:null,setText:!1})}onSuggestionAccept(){this.props.onAccept()}getListItemRef(e){return this.listItemRefs[e]||(this.listItemRefs[e]=p.a.createRef()),this.listItemRefs[e]}scrollToListItemIndex(e){if(!(this.listRef&&this.listRef.current&&this.listItemRefs[e]&&this.listItemRefs[e].current))return;const t=this.listRef.current;if(0===e)return void(t.scrollTop=0);const a=this.listItemRefs[e].current.getWrappedInstance?this.listItemRefs[e].current.getWrappedInstance():this.listItemRefs[e].current,n=a.offsetTop-t.offsetTop,s=n+a.offsetHeight;n<t.scrollTop&&(t.scrollTop=n),s>t.scrollTop+t.clientHeight&&(t.scrollTop=s-t.clientHeight)}populateChannelNameCounts(){this.channelNameCounts={},this.props.suggestions.forEach(e=>{e.is_type_channel&&(this.channelNameCounts[e.channel.name]=(this.channelNameCounts[e.channel.name]||0)+1)})}incrementSelectedIndex(){const e=this.props.suggestions&&this.props.suggestions[this.props.selectedIndex||0];if(e&&e.type===S.b.QUERY&&e.suggestion_replacement!==this.props.displayQuery)return void this.props.setSearchAutocompleteSelection({selectedIndex:this.props.selectedIndex,setText:!0});const t=H((null===this.props.selectedIndex?-1:this.props.selectedIndex)+1,this.props.suggestions.length);this.props.setSearchAutocompleteSelection({selectedIndex:t,setText:!0}),this.scrollToListItemIndex(t)}decrementSelectedIndex(){const e=H(this.props.selectedIndex-1,this.props.suggestions.length);this.props.setSearchAutocompleteSelection({selectedIndex:e,setText:!0}),this.scrollToListItemIndex(e)}propsForSuggestion(e,t){const a=t.is_type_channel&&this.channelNameCounts[t.channel.name]>1;return{index:e,suggestion:t,key:t.key,isSelected:e===this.props.selectedIndex,onSelected:this.onSuggestionSelected,onAccept:this.onSuggestionAccept,onDelete:this.onSuggestionDelete,hasChannelNameCollision:a}}renderScreenReaderWorkaround(){if(!(C.a.chrome&&C.a.version<67&&Object(v.v)()))return null;const e=this.props.selectedIndex,t=Object(l.a)(this.props.suggestions.map((t,a)=>(t.is_type_navigational||t.is_type_action)&&a===e?p.a.createElement(R.a,this.propsForSuggestion(a,t)):null).filter(e=>e));return p.a.createElement("div",{"aria-live":"polite",className:"offscreen"},t)}renderBlankSlate(){var e=this.props;const t=e.shouldShowOfflineNotice,a=e.featureTinyspeck,n=Object(i.a)(this.props.suggestions,e=>e.is_type_query_history),r=p.a.createElement("header",null,p.a.createElement("span",{className:"c-search_autocomplete__header_label"},p.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},B.t("Recent searches")))),o=this.props.suggestions.map((e,t)=>e.is_type_query_history&&p.a.createElement(R.a,s()({listItemRef:this.getListItemRef(t)},this.propsForSuggestion(t,e)))),l=Object(i.a)(this.props.suggestions,e=>e.is_type_navigational),c=p.a.createElement("header",null,p.a.createElement("span",{className:"c-search_autocomplete__header_label"},p.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},U.t("Unreads & drafts",{fallbackHash:"95ed8c1c63175388741df85c038e3dc99d8ac375"})))),d=this.props.suggestions.map((e,t)=>e.is_type_navigational&&p.a.createElement(R.a,s()({listItemRef:this.getListItemRef(t)},this.propsForSuggestion(t,e)))),h=this.renderScreenReaderWorkaround(),m=p.a.createElement(u.Fragment,null,l&&p.a.createElement("li",{role:"presentation"},c),d),b=p.a.createElement(u.Fragment,null,n&&p.a.createElement("li",{role:"presentation"},r),o);return p.a.createElement("div",{className:"c-search_autocomplete"},h,p.a.createElement("ol",{ref:this.listRef,className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list",onMouseLeave:this.onMouseLeaveList},this.props.shouldUseSwitchyEmptyState&&m,b,!this.props.shouldUseSwitchyEmptyState&&m),p.a.createElement(D,{shouldShowFeedbackLink:a,shouldShowOfflineNotice:t,onFeedbackClick:this.onFeedbackClick}))}render(){var e=this.props;const t=e.shouldShowOfflineNotice,a=e.featureTinyspeck;if(!this.props.userQuery)return this.renderBlankSlate();this.markAutocompleteRenderStart();const n=this.renderScreenReaderWorkaround();return p.a.createElement("div",{className:"c-search_autocomplete"},n,p.a.createElement("ol",{ref:this.listRef,className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list",onMouseLeave:this.onMouseLeaveList},this.props.suggestions.map((e,t)=>p.a.createElement(R.a,s()({listItemRef:this.getListItemRef(t)},this.propsForSuggestion(t,e))))),p.a.createElement(D,{shouldShowOfflineNotice:t,shouldShowFeedbackLink:a,onFeedbackClick:this.onFeedbackClick}))}}autocomplete_SearchAutocomplete.displayName="SearchAutocomplete",autocomplete_SearchAutocomplete.defaultProps=q;const W={setSearchAutocompleteSelection:(...e)=>Object(g.i)(...e),setSearchAutocompleteSuggestions:(...e)=>Object(g.j)(...e),fetchSearchAutocompleteSuggestions:(...e)=>Object(y.b)(...e),openSearchFeedbackDialog:(...e)=>Object(y.l)(...e)};t.a=Object(m.b)(e=>({suggestions:Object(g.d)(e),selectedIndex:Object(g.c)(e),userQuery:Object(_.d)(e),displayQuery:Object(_.b)(e),shouldUseSwitchyEmptyState:Object(w.e)(e),teamId:Object(I.b)(e),telemeter:Object(T.c)({state:e}),shouldShowOfflineNotice:Object(E.m)(e,"feature_offline_mode")&&!Object(A.c)(e),featureTinyspeck:Object(E.m)(e,"feature_tinyspeck")}),W)(autocomplete_SearchAutocomplete)},YL49:function(e,t,a){},YcId:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("nNoG"),o=a("5mKg");a("UCMe");const l=new i.b("unavailable_channel"),c=(r.default.object,{memberTeam:void 0});function d({memberTeam:e}){return s.a.createElement("div",{className:"p-member_profile_card__special_text"},l.rt("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:s.a.createElement("strong",null,Object(o.e)(e))}))}d.displayName="MemberProfileUnavailable",d.defaultProps=c,t.a=d},YjF7:function(e,t,a){},YlHk:function(e,t,a){},YmYS:function(e,t,a){"use strict";function n({isPinned:e,isStarred:t,isEphemeral:a,isBroadcast:n,isCustomResponse:s,isSliHighlight:r}={}){return n?"broadcast":e?"pinned":t?"starred":a?"ephemeral":s?"custom_response":r?"sli_highlight":void 0}a.d(t,"a",function(){return n})},YyUD:function(e,t,a){},Z7NI:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a("QbLZ"),s=a.n(n),r=a("jo6Y"),i=a.n(r),o=a("q1tI"),l=a.n(o),c=a("TSYQ"),d=a.n(c),u=a("aK/h"),p=a("llxT");u.default.string.isRequired,u.default.bool,u.default.object;const h={disabled:!1,listEntityProps:{}};function m(e,t={}){class ListEntityButton extends o.PureComponent{constructor(e){super(e),this.state={isActive:!1},this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this)}handleMouseEnter(){this.setState(()=>({isActive:!0}))}handleMouseLeave(){this.setState(()=>({isActive:!1}))}render(){var a=this.props;const n=a.id,r=a.listEntityProps,o=i()(a,["id","listEntityProps"]),c=this.state.isActive,u=d()(r.className,t.className);return l.a.createElement(p.a,s()({onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},o),l.a.createElement(e,s()({id:n,isActive:c&&!this.props.disabled,isDisabled:this.props.disabled},t,r,{className:u})))}}return ListEntityButton.displayName="ListEntityButton",ListEntityButton.defaultProps=h,ListEntityButton}},ZSbO:function(e,t,a){"use strict";var n=a("aK/h"),s=a("q1tI"),r=a.n(s),i=a("XHGt"),o=a("XL7r"),l=a("VMwU"),c=a("W+QA"),d=a("yHhI"),u=a("t85p"),p=a("Dpde"),h=a("Lev8");n.default.oneOf(["custom_theme","default","default_theme","aubergine_classic_theme","hoth_theme","monument_theme","chocolate_theme","ocean_theme","workhard_theme","nocturne_theme","solanum_theme","brinjal_theme","cotton_theme","eco_theme"]),n.default.object,n.default.bool,n.default.bool,n.default.string,n.default.object.isRequired;const m={theme:"default_theme",custom:void 0,featureClassicNav:!1,historyNavigationEnabled:!1,clientTheme:"light"},b=e=>{const t=Object(c.e)(Object(c.c)(e.theme,e.custom,{clientTheme:e.clientTheme}));if(!t)return e.logger.error("SIDEBAR_THEME",`Theme: could not identify theme "${e.theme}" (${e.custom})`),null;const a=Object(l.d)(t,{featureClassicNav:e.featureClassicNav}),n=t.text_color,s=Object(l.c)(t.column_bg,25),i=Object(l.c)(t.column_bg,35),o=e.historyNavigationEnabled?Object(l.m)(n,.15):s,d=e.historyNavigationEnabled?Object(l.m)(n,.2):i,u=Object(l.b)(n,Object(l.m)(n,.3)),p=`\n\t\t.p-channel_sidebar {\n\t\t\tbackground: ${t.column_bg};\n\t\t\tcolor: ${a};\n\t\t}\n\n\t\t/* Cover up "p-channel_sidebar__icon" when the close button is focused */\n\t\t.p-channel_sidebar__close:focus {\n\t\t\tbackground: ${t.column_bg};\n\t\t}\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close:focus {\n\t\t\tbackground: ${t.active_item};\n\t\t}\n\n\t\t.p-channel_sidebar__channel,\n\t\t.p-channel_sidebar__link,\n\t\t.p-channel_sidebar__channel:link,\n\t\t.p-channel_sidebar__link:link,\n\t\t.p-channel_sidebar__channel:visited,\n\t\t.p-channel_sidebar__link:visited,\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover {\n\t\t\tcolor: ${a};\n\t\t}\n\t\t.p-channel_sidebar__section_heading--selected,\n\t\t.p-channel_sidebar__section_heading--selected:hover,\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__channel--selected:link,\n\t\t.p-channel_sidebar__link--selected:link,\n\t\t.p-channel_sidebar__channel--selected:visited,\n\t\t.p-channel_sidebar__link--selected:visited,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected:hover,\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close,\n\t\t.p-channel_sidebar__link--selected + .p-channel_sidebar__close {\n\t\t\tcolor: ${t.active_item_text};\n\t\t}\n\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover,\n\t\t.p-channel_sidebar__close_container:hover {\n\t\t\tbackground: ${t.hover_item};\n\t\t}\n\n\t\t.p-channel_sidebar__header {\n\t\t\tcolor: ${a};\n\t\t}\n\n\t\t/* Folders */\n\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename {\n\t\t\tbackground: ${s};\n\t\t\tcolor: ${a};\n\t\t}\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename:hover {\n\t\t\tbackground: ${i};\n\t\t\tcolor: ${a};\n\t\t}\n\n\t\t/* Override presence icons */\n\t\t.p-channel_sidebar__presence_icon.c-presence--active,\n\t\t.p-channel_sidebar__channel_icon_prefix--im-slackbot {\n\t\t\tcolor: ${t.active_presence};\n\t\t}\n\t\t.p-channel_sidebar__channel--selected .p-channel_sidebar__presence_icon.c-presence,\n\t\t.p-channel_sidebar__channel--selected .p-channel_sidebar__channel_icon_prefix--im-slackbot {\n\t\t\tcolor: ${t.active_item_text};\n\t\t}\n\t\t.p-channel_sidebar__presence_icon.c-presence--away {\n\t\t\tcolor: ${a};\n\t\t}\n\n\t\t.p-channel_sidebar__section_heading--selected,\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__link--selected:hover {\n\t\t\tbackground: ${t.active_item};\n\t\t}\n\n\t\t.p-channel_sidebar__section_heading--selected:hover .p-channel_sidebar__section_heading_label,\n\t\t.p-channel_sidebar__channel--selected .p-channel_sidebar__channel_icon_prefix,\n\t\t.p-channel_sidebar__channel--selected:hover .p-channel_sidebar__channel_icon_prefix,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__channel--selected:after,\n\t\t.p-channel_sidebar__channel--selected:hover:after,\n\t\t.p-channel_sidebar__link--selected:after,\n\t\t.p-channel_sidebar__link--selected:after {\n\t\t\tcolor: ${t.active_item_text};\n\t\t}\n\n\t\t.p-channel_sidebar__badge,\n\t\t.p-channel_sidebar__banner--mentions {\n\t\t\tbackground: ${t.badge};\n\t\t}\n\n\t\t.p-channel_sidebar .c-custom_scrollbar__thumb_vertical,\n\t\t.p-channel_sidebar .c-scrollbar__bar {\n\t\t\tbackground: ${Object(l.m)(n,.45)};\n\t\t}\n\n\t\t.client_channels_list_container.focusablesection:focus .sectionfocusindicator,\n\t\t.client_channels_list_container .focus-ring,\n\t\t.p-channel_sidebar.focusablesection:focus .sectionfocusindicator,\n\t\t#team_menu.focusablesection:focus .sectionfocusindicator {\n\t\t\tbox-shadow: ${u};\n\t\t}\n\n\t\t.client_channels_list_container a:not(.c-link--focus-visible).focus-ring,\n\t\t.client_channels_list_container button:not(.c-button--focus-visible).focus-ring,\n\t\t.p-channel_sidebar__jumper.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__history_button.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_label--clickable.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_plus.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__channel.c-link--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.c-button--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.c-link--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__close.c-button--focus-visible:focus {\n\t\t\tbox-shadow: ${u};\n\t\t}\n\n\t\t/** \`opacity: 1\` color overrides */\n\t\t.p-channel_sidebar__channel--unread:not(.p-channel_sidebar__channel--muted):not(.p-channel_sidebar__channel--suggested):not(.p-channel_sidebar__channel--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--unread:not(.p-channel_sidebar__link--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--invites:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--add-channel:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--add-apps:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__section_heading_label--clickable:hover,\n\t\t.p-channel_sidebar__section_heading_label--unreads,\n\t\t.p-channel_sidebar__quickswitcher:hover {\n\t\t\tcolor: ${n};\n\t\t}\n\n\t\t/** Navigation Bar **/\n\t\t.p-channel_sidebar__jumper {\n\t\t\tbackground: ${o};\n\t\t}\n\t\t.p-channel_sidebar__jumper:hover {\n\t\t\tbackground: ${d};\n\t\t}\n\t\t.p-channel_sidebar__history_button {\n\t\t\tbackground: ${o};\n\t\t}\n\t\t.p-channel_sidebar__history_button:hover {\n\t\t\tbackground: ${d};\n\t\t}\n\t\t.p-channel_sidebar__history_button--disabled:hover {\n\t\t\tbackground: ${o};\n\t\t}\n\n\t\t/** Compose Button **/\n\t\t.p-channel_sidebar__compose_button,\n\t\t.p-ia__big_search_compose {\n\t\t\tbackground: ${n};\n\t\t\tcolor: ${t.column_bg};\n\t\t}\n\t\t.p-channel_sidebar__compose_button--disabled {\n\t\t\tbackground: ${a};\n\t\t}\n\n\t\t/** Classic Nav **/\n\t\t.p-classic_nav__team_header {\n\t\t\tbackground: ${t.column_bg};\n\t\t\tcolor: ${n};\n\t\t}\n\t\t.p-classic_nav__team_header:hover {\n\t\t\tbackground: ${t.menu_bg};\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--active {\n\t\t\tcolor: ${t.active_presence};\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--away {\n\t\t\tcolor: ${a};\n\t\t}\n\t\t.p-classic_nav__team_header .c-link--focus-visible:focus,\n\t\t.p-classic_nav__team_header .c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__static_list__item.c-virtual_list__item--focus:focus:after,\n\t\tdiv[aria-selected=true].p-channel_sidebar__static_list__item:focus:after {\n\t\t\tbox-shadow: ${u};\n\t\t}\n\n\t\t/** IA experiment (feature_iap1) **/\n\t\t.p-ia__sidebar_header {\n\t\t\tbackground: ${t.column_bg};\n\t\t\tcolor: ${n};\n\t\t}\n\t\t.p-ia__omniswitcher_button {\n\t\t\tcolor: ${n};\n\t\t\tborder: 1px solid ${Object(l.j)(n,t.column_bg,.12)};\n\t\t}\n\t\t.p-ia__omniswitcher_button:hover {\n\t\t\tborder-color: ${Object(l.j)(n,t.column_bg,.2)};\n\t\t}\n\t\t.p-ia__sidebar_header__button,\n\t\t.p-ia__sidebar_header__mode {\n\t\t\tbackground-color: ${Object(l.j)(n,t.column_bg,.07)};\n\t\t}\n\t\t.p-ia__sidebar_header__button:hover,\n\t\t.p-ia__sidebar_header__button.active,\n\t\t.p-ia__sidebar_header__mode:hover {\n\t\t\tbackground-color: ${Object(l.j)(n,t.column_bg,.1)};\n\t\t}\n\t\t.p-ia__nav__user__presence.c-presence--active,\n\t\t.p-ia__sidebar_header__user__presence.c-presence--active {\n\t\t\tcolor: ${t.active_presence};\n\t\t}\n\t\t.p-channel_sidebar--iap1 .p-channel_sidebar__list:after {\n\t\t\tbackground: linear-gradient(to bottom, ${t.column_bg}, ${Object(l.m)(t.column_bg,0)});\n\t\t}\n\t\t.p-channel_sidebar--iap1.p-channel_sidebar--top_banner_showing .p-channel_sidebar__list:after {\n\t\t\tbackground: ${t.column_bg};\n\t\t}\n\t\t.p-channel_sidebar--iap1 .p-channel_sidebar__section_heading_plus:hover {\n\t\t\tbackground: ${Object(l.m)(n,.1)};\n\t\t}\n\t`;return r.a.createElement("style",{className:`p-channel_sidebar__theme--${e.theme}`},p)};b.displayName="Theme",b.defaultProps=m;t.a=Object(i.b)(e=>{return{theme:Object(o.k)(e,"sidebar_theme"),custom:Object(o.d)(e),featureClassicNav:Object(u.m)(e,"feature_classic_nav"),historyNavigationEnabled:Object(p.a)(e),clientTheme:Object(h.c)(e),logger:Object(d.a)({state:e})}})(b)},ZYU7:function(e,t,a){},a001:function(e,t,a){},"a6/V":function(e,t,a){"use strict";t.a=(e=>!!e&&(!e.metaKey&&!e.ctrlKey&&(e.key&&1===e.key.length)))},aQya:function(e,t,a){},ab6v:function(e,t,a){},ah8n:function(e,t,a){},al7r:function(e,t,a){},anFW:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("zmn3"),i=a("ifKl"),o=a("q1tI"),l=a.n(o),c=a("aK/h"),d=a("XHGt"),u=a("hqEo"),p=a("h9PG"),h=a("RB1+"),m=a("negh");a("BuFM");c.default.string,c.default.string,c.default.string,c.default.string,c.default.object,c.default.func,c.default.func,c.default.bool,c.default.string;const b={channelId:void 0,threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,forwardedRef:void 0,openFileUploadDialog:i.a,onFilesSelectedHandler:null,multiple:!0,accept:void 0};class HiddenFileInput extends o.Component{constructor(e){super(e),this.onFilesSelected=this.onFilesSelected.bind(this)}onFilesSelected(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.viewContext,s=e.forwardedRef,i=e.onFilesSelectedHandler,o={fileUploadAction:m.FileUploadAction.PLUS_MENU,fileUploadSrc:m.FileUploadSrc.LOCAL},l=s.current.files,c=Object(r.a)(l);if(i)i(c);else{const e=Object(h.a)({viewContext:n,channelId:t,threadTs:a});this.props.openFileUploadDialog({files:c,initialChannelId:t,threadTs:a,inputProxy:e,metadata:o})}s.current.value=""}render(){var e=this.props;const t=e.disableFileUploadsPref,a=e.forwardedRef,n=e.multiple,r={accept:e.accept};return"disable_all_except_images"===t&&(r.accept="image/*"),l.a.createElement("input",s()({type:"file",className:"p-hidden_file_input",multiple:n,"aria-hidden":"true","data-qa":"file_upload",tabIndex:"-1"},r,{ref:a,onClick:this.onClick,onChange:this.onFilesSelected}))}}HiddenFileInput.displayName="HiddenFileInput",HiddenFileInput.defaultProps=b;const f=Object(d.b)(function(e){return{disableFileUploadsPref:Object(p.a)(e,"disable_file_uploads")}},function(e){return{openFileUploadDialog:(...t)=>e(Object(u.a)(...t))}})(HiddenFileInput);t.a=l.a.forwardRef((e,t)=>l.a.createElement(f,s()({},e,{forwardedRef:t})))},anIG:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("TGBA"),i=a("zmn3"),o=a("q1tI"),l=a.n(o),c=a("aK/h"),d=a("XHGt"),u=a("TSYQ"),p=a.n(u),h=a("XL7r"),m=a("HHn2"),b=a("Jnln"),f=a("VwYs"),_=a("m36V"),g=a("cAy8"),y=a("t85p"),O=a("tbBR"),C=a("CaXY"),v=a("a+Oh"),E=a("nNoG"),k=a("lrhk");const S=new E.b("attachments"),j=20,I=10,w=(c.default.object.isRequired,c.default.string,c.default.oneOf(Object(r.a)(C.a)),c.default.bool,c.default.bool,c.default.bool,c.default.string,c.default.bool.isRequired,{className:void 0,expandInlineImgsPref:!1,expandNonMediaAttachmentsPref:!1,featureRichTextRendering:!1,viewContext:void 0,blocksContainerContext:C.a.message_attachment});class MessageKitAttachments extends o.PureComponent{renderAttachmentsOverLimitMaybe(e,t){if(!e.length)return null;var a=this.props;const n=a.viewContext,r=a.featureAllyBugbash,i={useAttachmentRules:!1,shouldBeExpandedByDefault:!1,expandableKey:Object(m.a)("attachmentsOverLimit",this.props.msg.ts,{limit:t,viewContext:n})},o=e.length-t,c=r?{"aria-label":S.t("{remainingAttachments, plural, =1 {Toggle attachment} other {Toggle additional {remainingAttachments} attachments}}",{remainingAttachments:o,note:"the label for the button that expands/collapses additional attachments, describes the button for customers using screen readers"})}:{};return l.a.createElement("div",null,l.a.createElement(f.a,s()({},c,i),e),l.a.createElement(_.a,s()({},i,{render:(t,a)=>l.a.createElement(g.a,{isExpanded:t.isExpanded,onClick:a,attachmentsOverLimitCount:e.length})})))}render(){var e=this.props;const t=e.msg,a=e.expandInlineImgsPref,n=e.expandNonMediaAttachmentsPref,s=e.blocksContainerContext,r=e.featureRichTextRendering,o=Object(b.c)(t,a,n,!1,r);if(!t||!o||!o.length)return null;let c=j;const d=Object(i.a)(o,(e,a)=>{const n=e.id||a+1;return e.blocks&&(c=I),l.a.createElement(k.a,{msg:t,attachment:e,key:n,blocksContainerContext:s})}),u=d.splice(c),h=p()("c-message_kit__attachments",this.props.className);return l.a.createElement("div",{className:h},d,this.renderAttachmentsOverLimitMaybe(u,c))}}MessageKitAttachments.displayName="MessageKitAttachments",MessageKitAttachments.defaultProps=w;t.a=Object(O.b)(Object(d.b)(e=>({expandInlineImgsPref:Object(h.k)(e,"expand_inline_imgs"),expandNonMediaAttachmentsPref:Object(h.k)(e,"expand_non_media_attachments"),featureRichTextRendering:Object(v.b)(e),featureAllyBugbash:Object(y.m)(e,"feature_ally_bugbash")}))(MessageKitAttachments))},avbl:function(e,t,a){},b7Ww:function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("aK/h"),o=a("TSYQ"),l=a.n(o),c=a("yPgC"),d=a("RfGh"),u=a("9gIX"),p=a("MAit");c.a.File().isRequired,i.default.func,i.default.string,i.default.bool,i.default.func,i.default.bool,i.default.bool,i.default.bool,i.default.bool,i.default.string;const h={clogLinkClick:n.a,className:null,fullWidth:!1,onClick:n.a,showActions:!0,useRowAction:!1,includeRootDownloadAction:!0,includeRootStarAction:!1,"data-qa":void 0};class ContextualFile extends s.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){e.preventDefault(),this.props.onClick(e,this.props.file)}render(){var e=this.props;const t=e.file,a=e.clogLinkClick,n=e.fullWidth,s=e.showActions,i=e.includeRootDownloadAction,o=e.includeRootStarAction,c=e.useRowAction,h=e["data-qa"],m=l()("p-contextual_file",this.props.className);return r.a.createElement(d.a,{file:t,className:m,fullWidth:n,clogLinkClick:a,showActions:s,useRowAction:c,includeRootDownloadAction:i,includeRootStarAction:o,"data-qa":h},r.a.createElement(u.a,{file:t,onClick:this.onClick},r.a.createElement(p.a,{file:t})))}}ContextualFile.displayName="ContextualFile",ContextualFile.defaultProps=h,t.a=ContextualFile},"bA/L":function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("kiPk"),i=a("1myf"),o=a("wBxZ"),l=a("zmn3"),c=a("ifKl"),d=a("tn36"),u=a("q1tI"),p=a.n(u),h=a("aK/h"),m=a("TSYQ"),b=a.n(m),f=a("XHGt"),_=a("jLdI"),g=a("GTwG"),y=a("yPgC"),O=a("t3QL"),C=a("FXaq"),v=a("yywf"),E=a("nNoG"),k=a("ICFZ"),S=a("G+bj"),j=a("hOQf"),I=a("lek6"),w=a("3dqR"),T=a("NvKv"),N=a("lV3N"),A=a("OkQS"),R=a("+mjO"),M=a("XC2b"),P=a("qkTT"),x=a("vP1t"),L=a("y7mK"),F=a("X28p"),D=a("UceB"),B=a("3fyd"),U=a("CaXY"),q=a("od5y"),H=a("RAhH"),W=a("llxT"),G=(a("hr+X"),a("kyuO"));const K=new E.b("search"),V="IMPROVED_SEARCH",z=(h.default.string.isRequired,h.default.number,h.default.string.isRequired,h.default.object.isRequired,h.default.bool.isRequired,h.default.string.isRequired,h.default.string.isRequired,h.default.string,h.default.string.isRequired,h.default.string,h.default.string,h.default.string.isRequired,h.default.bool.isRequired,h.default.shape({app_id:h.default.string.isRequired,deleted:h.default.bool,icons:h.default.obj,id:h.default.string,name:h.default.string,updated:h.default.number}),h.default.shape({id:h.default.string.isRequired,name:h.default.string.isRequired}).isRequired,h.default.string.isRequired,h.default.arrayOf(h.default.shape({text:h.default.string,truncated_head:h.default.bool,truncated_tail:h.default.bool})),h.default.arrayOf(y.a.File()),h.default.string,h.default.string,h.default.bool.isRequired,h.default.bool,h.default.func,h.default.func,h.default.func,h.default.func.isRequired,h.default.bool.isRequired,h.default.array,h.default.array,h.default.func,h.default.func,h.default.number,h.default.func,h.default.shape({image_36:h.default.string,image_48:h.default.string,image_64:h.default.string,image_72:h.default.string,emoji:h.default.string}),y.a.BlockKitBlocks,y.a.BlockKitBlocks,h.default.bool,h.default.func,h.default.func,h.default.func,{teamDomain:"",index:null,username:null,theme:"light",botId:null,botProfile:null,subtype:"",expanded:!1,onClick:c.a,onFileClick:c.a,onRepliesClick:c.a,files:[],attachments:[],reactions:[],extracts:[],onExpandHoverStart:c.a,onExpandHoverEnd:c.a,reply_count:0,onLinkClick:c.a,icons:null,blocks:null,blocks_extracts:null,wysiwygSearchHighlightingEnabled:!1,clogMessageClick:c.a,clogFileClick:c.a,clogSearchMessageClick:c.a});class SearchResult extends u.PureComponent{constructor(e){super(e),Object(d.a)(this,["expand","onClick","onFileClick","onRepliesClick","onCopyLink","onExpandHoverStart","onExpandHoverEnd","onMouseMove","onLinkClick","onAvatarLinkClick","onProfileMessageClick","onProfileCallClick","onMrkdwnLinkClick","onSenderLinkClick","onTimestampClick"]),this.dragging=!1,this.dragStartX=null,this.dragStartY=null}onClick(e){if(e.target.dataset.memberId)return;if("BUTTON"===e.target.tagName||"BUTTON"===e.target.parentNode.tagName)return;if(e.target.dataset.channelId||e.target.dataset.messageSender||("A"===e.target.tagName&&"_blank"===e.target.target||"A"===e.target.parentNode.tagName&&"_blank"===e.target.parentNode.target)&&!e.defaultPrevented)return void this.onLinkClick(e);let t=!1;if(this.dragging){t=(e.clientX-this.dragStartX)**2+(e.clientY-this.dragStartY)**2>16,this.dragging=!1}t||e.shiftKey||this.props.onClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}onFileClick(e,{file:t}){e.preventDefault(),this.props.onFileClick(e,{file:t,iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}onRepliesClick(e){e.preventDefault(),this.props.onRepliesClick({iid:this.props.iid,permalink:this.props.permalinkToMessageThread,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}onCopyLink(e){e.preventDefault(),e.stopPropagation();var t=this.props;const a=t.channel,n=t.ts,s=t.botId,r=t.user,i=t.teamDomain,o=t.isCrossWorkspace,l=t.iid;let c=this.props.permalink;c||(o?this.props.logger.error(V,`Missing permalink for cross workspace message result. channel: ${a} ts: ${n}`):c=Object(j.u)({teamDomain:i,channelId:a.id,ts:n})),c&&Object(k.c)(c),this.props.clogMessageClick({msg:{channel:a.id,bot_id:s,user:r,ts:n},payload:{subtype:"copy_link"}}),this.props.clogSearchMessageClick({iid:l,ts:n,channelId:a.id,botId:s,userId:r,type:G.b.copyLink,position:this.props.index})}onExpandHoverStart(){this.props.onExpandHoverStart()}onExpandHoverEnd(){this.props.onExpandHoverEnd()}onMouseMove(e){1!==e.button&&1!==e.buttons||this.dragging||(this.dragging=!0,this.dragStartX=e.clientX,this.dragStartY=e.clientY)}onAvatarLinkClick(){this.props.onLinkClick({iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user,type:G.b.avatar})}onProfileMessageClick(){this.props.onLinkClick({iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user,type:G.b.profileMessage})}onProfileCallClick(){this.props.onLinkClick({iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user,type:G.b.profileCall})}onMrkdwnLinkClick(e){const t={iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user};"user"===e.link_type?t.type=G.b.user:"channel"===e.link_type?t.type=G.b.channel:"external"===e.link_type&&(t.type=G.b.link),t.type&&this.props.onLinkClick(t)}onSenderLinkClick(){this.props.onLinkClick({iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user,type:G.b.sender})}onLinkClick(e){const t={iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user};e.target.dataset.channelId?t.type=G.b.channel:e.target.dataset.messageSender?t.type=G.b.sender:("A"===e.target.tagName&&"_blank"===e.target.target||"A"===e.target.parentNode.tagName&&"_blank"===e.target.parentNode.target)&&!e.defaultPrevented&&(t.type=G.b.link),t.type&&this.props.onLinkClick(t)}onTimestampClick(e){e.preventDefault()}expand(e){e.preventDefault(),e.stopPropagation(),this.props.onExpand({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}renderEllipsisButton(e){const t={leading:"expand-head",trailing:"expand-tail"}[e],a=K.t("Show more");return p.a.createElement(H.c,{tip:a},p.a.createElement(W.a,{"aria-label":a,"data-qa":t,onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand","aria-expanded":this.props.expanded},p.a.createElement("span",{className:"c-search__expand_ellipsis"},"...")))}renderExpandButton(){return p.a.createElement(W.a,{"data-qa":"expand-end",onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand","aria-expanded":this.props.expanded},p.a.createElement("span",{className:"c-search__expand_ellipsis"},"... ",K.t("Show more")))}renderText(){var e=this.props;const t=e.text,a=e.blocks,n=e.extracts,s=e.expanded,r=e.canBeTruncated;return t.length||n.length||a?s||!r?p.a.createElement("div",{className:"c-search_message__body","data-qa":"search_message_body"},p.a.createElement(I.a,{text:t,clogLinkClick:this.onMrkdwnLinkClick})):n.length?p.a.createElement("div",{className:"c-search_message__body"},p.a.createElement(u.Fragment,null,n.map((e,t)=>{const a=0===t&&e.truncated_head,s=e.truncated_tail,i=t===n.length-1;return p.a.createElement(u.Fragment,{key:t},a?this.renderEllipsisButton("leading"):null,p.a.createElement(I.a,{text:e.text,clogLinkClick:this.onMrkdwnLinkClick}),!s||r&&i?null:this.renderEllipsisButton("trailing"),r&&i?this.renderExpandButton():null)}))):p.a.createElement("div",{className:"c-search_message__body"},p.a.createElement(I.a,{text:t,clogLinkClick:this.onMrkdwnLinkClick})):null}renderBlocks(){var e=this.props;const t=e.ts,a=e.blocks,n=e.blocks_extracts,s=e.channel,r=e.botId,i=e.user,o=e.wysiwygSearchHighlightingEnabled;return Object(S.a)(a)?o&&n?p.a.createElement(B.a,{msg:{channel:s.id,bot_id:r,user:i,ts:t,blocks:n},blocksContainerContext:U.a.search}):this.renderText():p.a.createElement(B.a,{msg:{channel:s.id,bot_id:r,user:i,ts:t,blocks:a},blocksContainerContext:U.a.search})}renderAvatar(){var e=this.props;const t=e.user,a=e.hasAdHocSender,n=e.botId,r=e.botProfile,i=e.icons;let o={};n&&(o=s()({},o,{botId:n}));const l=i||r&&r.icons;if(l){const e=l.image_36||l.image_48,t=l.image_64||l.image_72,a=l.emoji;e&&(o=s()({},o,{imageUrl:e})),t&&(o=s()({},o,{imageUrl2x:t})),a&&(o=s()({},o,{emoji:a}))}return t&&(o=s()({},o,{userId:t})),p.a.createElement(w.c,s()({className:"c-search_message__avatar",ariaHidden:"true",isAdHocMember:a,size:36,isInteractive:!0,showCard:!0,showTooltip:!0,tabIndex:"-1",clogLinkClick:this.onAvatarLinkClick,clogProfileMessageClick:this.onProfileMessageClick,clogProfileCallClick:this.onProfileCallClick},o))}renderTimestamp(){var e=this.props;const t=e.ts,a=e.permalink;return p.a.createElement(T.b,{onClick:this.onTimestampClick,timestamp:t,relative:!1,full:!1,link:a})}renderGutter(){return"light"===this.props.theme?p.a.createElement("div",{className:"c-search_message__gutter"},this.renderAvatar()):p.a.createElement("div",{className:"c-search_message__gutter"},this.renderTimestamp())}renderContentHeader(){var e=this.props;const t=e.user,a=e.botId,n=e.botProfile,s=e.username,r=e.theme,i=e.channelName;return p.a.createElement("div",{className:"c-search_message__content_header","data-qa":"search_message_header"},p.a.createElement(L.a,{userId:t,botId:a,botProfile:n,username:s,channelName:i,clogLinkClick:this.onSenderLinkClick,clogProfileMessageClick:this.onProfileMessageClick,clogProfileCallClick:this.onProfileCallClick,isInteractive:!0})," ","light"===r&&this.renderTimestamp())}renderAttachments(){var e=this.props;const t=e.attachments,a=e.expanded,n=e.canBeTruncated;if(!t.length)return null;if(a||!n)return Object(l.a)(t,(e,t)=>this.renderFullAttachment(e,t));const s=Object(l.a)(t,(e,t)=>{const a=Object(O.b)(e);return a.blocks?this.renderFullAttachment(a,t):this.renderTruncatedLegacyAttachment(a,t)});return p.a.createElement("div",{className:"c-search_message__attachments"},s)}renderFullAttachment(e,t){var a=this.props;const n=a.ts,r=a.channel,i=a.hasText,o=a.blocks;return p.a.createElement(N.a,s()({key:e.id||t+1},Object(O.b)(e),{isOnlyMessageContent:!(!i&&!o),messageTs:n,activeChannelId:r.id,showDelete:!1,blocksContainerContext:U.a.search}))}renderTruncatedLegacyAttachment(e,t){const a=this.props.ts;let n=null;if(Object(C.e)(e)){const t=e.serviceIcon||e.authorIcon,a=e.serviceName||e.authorName,s=a===e.authorName?e.authorSubname:e.authorName;n=p.a.createElement("div",null,p.a.createElement(R.a,{icon:t,name:a,link:e.serviceUrl||e.authorLink,subname:s,subnameLink:e.authorLink}))}const s=e.extracts;let r=null;s&&s.title&&(r=p.a.createElement("div",{"data-qa":"search-attachment-title",className:"c-search_message__attachment_title"},Object(l.a)(s.title,(e,t)=>{const a=0===t&&e.truncated_head,n=e.truncated_tail;return p.a.createElement(u.Fragment,{key:t}," ",a?"\u2026":null,function(e){return Object(v.a)(e,(e,t)=>p.a.createElement("span",{className:"c-search__match",key:t},e))}(e.text),n?"\u2026":null)})));let i=null;s&&s.pretext&&(i=Object(l.a)(s.pretext,(e,t)=>{const a=0===t&&e.truncated_head,n=e.truncated_tail;return p.a.createElement("span",{className:"c-message_attachment__pretext",key:t}," ",p.a.createElement(u.Fragment,null,a?this.renderEllipsisButton("leading"):null,p.a.createElement(I.a,{text:e.text,clogLinkClick:this.onMrkdwnLinkClick}),n?this.renderEllipsisButton("trailing"):null))}));let o=null;s&&s.text&&(o=Object(l.a)(s.text,(e,t)=>{const a=0===t&&e.truncated_head,n=e.truncated_tail;return p.a.createElement(u.Fragment,{key:t}," ",a?this.renderEllipsisButton("leading"):null,p.a.createElement(I.a,{text:e.text,clogLinkClick:this.onMrkdwnLinkClick}),n?this.renderEllipsisButton("trailing"):null)}));let c=null;return Object(C.h)(e)&&(c=p.a.createElement("div",null,p.a.createElement(M.a,{botId:e.botId,icon:e.footerIcon,isAppUnfurl:e.isAppUnfurl,text:e.footer,ts:a}))),n||r||i||o||c?p.a.createElement("div",{"data-qa":"search-message-attachment",className:"c-search_message__attachment",key:`${this.props.iid}-attachment-${t}`},p.a.createElement(A.a,{color:e.color}),p.a.createElement("div",{className:"c-search_message__attachment_body"},n,r,i,o,c)):null}renderReactionsAndReplies(){const e=this.props.reactions,t=this.props.reply_count;if(!e.length&&!t)return null;const a=Object(o.a)(Object(i.a)(e,e=>-e.count),2),n=Object(r.a)(e,"count");let s=null,c=null;if(n>0&&(s=p.a.createElement("span",{"data-qa":"search-reaction-count",className:"c-search_message__reactions_count"},K.t("{totalReactionCount, plural, =1 {# reaction} other {# reactions}}",{totalReactionCount:n}))),t>0){const e=K.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:t});c=p.a.createElement(W.a,{"data-qa":"search-replies",className:"c-search_message__replies_count",onClick:this.onRepliesClick},p.a.createElement(q.a,{type:"comment-alt"}),e)}return p.a.createElement("div",{"data-qa":"search-reactions",className:"c-search_message__reactions"},Object(l.a)(a,e=>p.a.createElement(P.b,{text:`:${e.name}:`,key:e.name,emojiSize:P.a.SMALL})),s,c)}renderFiles(){const e=this.props.files;return e&&e.length?e.map(e=>e&&p.a.createElement(x.a,{key:e.id,file:e,onClick:this.onFileClick,clogLinkClick:t=>{this.props.clogFileClick({file:e,payload:t})}})):null}renderActions(){const e=b()("c-search_message__actions","c-message_actions__container--search",{"c-search_message__actions--dense":"dense"===this.props.theme});return p.a.createElement(F.a,{className:e,ariaLabel:K.t("Message actions")},p.a.createElement(D.a,{"data-qa":"copy-link",iconType:"link",ariaHasPopup:!1,label:K.t("Copy link"),onClick:this.onCopyLink}))}render(){var e=this.props;const t=e.theme,a=e.canBeTruncated,n=e.expanded,s=e.blocks,r=b()("c-search_message",`c-search_message--${t}`,{"c-search_message--collapsed":!n&&a});return p.a.createElement("div",{className:r,role:"presentation","data-qa":"search_result",onClick:this.onClick,onMouseMove:this.onMouseMove},this.renderGutter(),p.a.createElement("div",{className:"c-search_message__content"},this.renderContentHeader(),s?this.renderBlocks():this.renderText(),this.renderAttachments(),this.renderReactionsAndReplies(),this.renderFiles(),this.renderActions()))}}SearchResult.displayName="SearchResult",SearchResult.defaultProps=z;const $={clogSearchMessageClick:(...e)=>Object(G.i)(...e),clogMessageClick:(...e)=>Object(_.a)(...e),clogFileClick:(...e)=>Object(g.a)(...e)};t.a=Object(f.b)(null,$)(SearchResult)},bKze:function(e,t,a){},bYMc:function(e,t,a){"use strict";a.d(t,"a",function(){return _});var n=a("QbLZ"),s=a.n(n),r=a("jo6Y"),i=a.n(r),o=a("g5qt"),l=a("zaOK"),c=a("zoXk"),d=a("XfeM"),u=a("brL+"),p=a("lhZz"),h=a("kOzZ"),m=a("PR8O"),b=a("Smdl"),f=a("VjCB");window.hasSetDesktopFocusedTeamDelegate=!1;const _=Object(d.b)("Create a delegate object for interop with the desktop app",(e,t)=>{if(Object(m.a)())if(o.V){if(function(e,t){const a=Object(u.b)(t()),n=g(e,t);Object(o.U)()?window.desktop.exposeWorkspaceDelegate(a,n):(window.desktop.delegates||(window.desktop.delegates={}),window.desktop.delegates[a]=n);window.desktopDelegates=window.desktopDelegates||{},window.desktopDelegates[a]=n}(e,t),!window.hasSetDesktopFocusedTeamDelegate){const a=g(e,t,{useFocusedTeam:!0});Object(o.U)()?window.desktop.setGlobalDelegate(a):window.desktop.delegate=a,window.desktopDelegate=a,window.hasSetDesktopFocusedTeamDelegate=!0}}else{Object(h.a)({state:t()}).track("DESKTOP_SCRIPTS_MISSING")}});function g(e,t,{useFocusedTeam:a}={}){const n=l.a.accessibilitySupportChanged,r=l.a.canOpenURLInWindow,o=l.a.focusNextWorkspace,d=l.a.focusPreviousWorkspace,u=l.a.getCurrentUserId,h=l.a.getCurrentUserName,m=l.a.getEnterpriseId,_=l.a.getThemeValues,g=l.a.getTokenFromBootData,y=l.a.getUserPref,O=l.a.getWebappVersionUid,C=l.a.handleDeepLinkWithArgs,v=l.a.handleDeepLinkFromDesktop,E=l.a.maybeTickleMS,k=l.a.notificationActivated,S=l.a.notificationClicked,j=l.a.openDialog,I=l.a.openFromCmdF,w=l.a.recentMessagesFromCurrentChannel,T=l.a.replyToNotification,N=l.a.setCurrentMemberPresence,A=l.a.setFocusedWorkspace,R=l.a.teamSelectionChanged,M=l.a.updateState,P=i()(l.a,["accessibilitySupportChanged","canOpenURLInWindow","focusNextWorkspace","focusPreviousWorkspace","getCurrentUserId","getCurrentUserName","getEnterpriseId","getThemeValues","getTokenFromBootData","getUserPref","getWebappVersionUid","handleDeepLinkWithArgs","handleDeepLinkFromDesktop","maybeTickleMS","notificationActivated","notificationClicked","openDialog","openFromCmdF","recentMessagesFromCurrentChannel","replyToNotification","setCurrentMemberPresence","setFocusedWorkspace","teamSelectionChanged","updateState"]),x=()=>{const n=a&&Object(c.g)(t());return n?e=>Object(p.dispatchForTeamId)(n,e):e},L=()=>{const e=a&&Object(c.g)(t());return e?()=>Object(p.getStateByTeamId)(e):t},F=e=>(...t)=>x()(e(...t)),D=e=>(...t)=>Object(p.dispatchForClientStore)(e(...t)),B=t=>(...a)=>Object(b.a)()?Object(p.dispatchForClientStore)(Object(f.a)(t(...a))):e(t(...a)),U=e=>(...t)=>e(x(),...t),q=e=>(...t)=>e(L()(),...t);return s()({accessibilitySupportChanged:F(n),canOpenURLInWindow:q(r),focusNextWorkspace:D(o),focusPreviousWorkspace:D(d),getCurrentUserId:q(u),getCurrentUserName:q(h),getEnterpriseId:q(m),getThemeValues:q(_),getTokenFromBootData:q(g),getUserPref:q(y),getWebappVersionUid:q(O),handleDeepLinkWithArgs:Object(b.a)()?F(v):C,maybeTickleMS:(e={})=>B(E)(s()({},e,{reason:"polling"})),notificationActivated:U(k),notificationActivationHandler:({channelId:e,messageTs:t,threadTs:a,teamId:n})=>Object(b.a)()?D(A)({teamId:n}).then(()=>F(S)({channelId:e,messageTs:t,threadTs:a})):F(S)({channelId:e,messageTs:t,threadTs:a}),openDialog:(e=>(...t)=>e(x(),L()(),...t))(j),openFromCmdF:F(I),recentMessagesFromCurrentChannel:q(w),replyToNotification:F(T),setCurrentMemberPresence:F(N),setFocusedWorkspace:e=>D(A)({teamId:e}),startSearch:F(I),teamSelectionChanged:U(R),updateState:(...e)=>(Object(b.a)()&&D(M)(...e),B(M)(...e))},P)}_.meta={name:"createDesktopDelegate",key:"desktopCreateDelegateCreateDesktopDelegate",description:"Create a delegate object for interop with the desktop app"},_.propTypes=null},"bj+V":function(e,t,a){},bkaq:function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("XHGt"),o=a("aK/h"),l=a("nNoG"),c=a("Fdc0"),d=a("ZYn4"),u=a("0f2Y"),p=a("zo7m"),h=a("yZEV"),m=a("negh"),b=a("5OMq"),f=a("kcos"),_=a("guIn");a("8LWd");const g=new l.b("member_profile"),y=(o.default.string,o.default.object,o.default.bool,o.default.func,o.default.func,o.default.func,o.default.string,o.default.object,o.default.bool,{className:void 0,member:void 0,canInteract:!0,onClick:n.a,onOpenEditProfileModal:n.a,onShowMemberProfile:n.a,presence:!1,clogger:{track:n.a},isIAP1Enabled:!1});function O({className:e,member:t,canInteract:a,onClick:n,onOpenEditProfileModal:s,onShowMemberProfile:i,presence:o,clogger:l,isIAP1Enabled:p}){const h=a&&!Object(c.mb)(t),f=Object(c.K)(t),y=r.a.createElement(r.a.Fragment,null,f,h&&r.a.createElement(d.a,{className:"p-member_profile_name__presence",memberId:t.id})),O=()=>{s(),n(),setTimeout(()=>{const e=document.getElementById("title-input");e&&e.focus()},150),l.track(m.EventId.USER_PROFILE_ADD_TITLE_CLICK)},C=Object(c.Ib)(t)?g.t("Friendly bot, part-time programmer, and Help Center assistant-in-training."):Object(c.S)(t),v=()=>Object(_.a)(C)?r.a.createElement("span",{className:"p-member_profile_name__subtitle"},C):Object(c.Hb)(t)?r.a.createElement(u.a,{className:"p-member_profile_field__interactable",onClick:O,"data-qa":"member_title_edit_btn"},g.t("Add a title")):null,E=r.a.createElement("div",{className:"p-member_profile_name__title"},i?r.a.createElement(u.a,{"aria-label":(()=>o?g.t("{name}, {presence}",{name:f,presence:o}):f)(),className:"p-member_profile_name__link",onClick:()=>{i(),n()}},y):y);return p?r.a.createElement("div",{className:e},r.a.createElement(b.a,{id:t.id},E),v()):r.a.createElement("div",{className:e},E,v())}O.displayName="MemberProfileName",O.defaultProps=y;const C={onOpenEditProfileModal:(...e)=>Object(p.a)(...e)};t.a=Object(i.b)((e,t)=>{return{presence:Object(h.f)(e,t.member.id),isIAP1Enabled:Object(f.c)(e)}},C)(O)},bmfP:function(e,t,a){"use strict";var n=a("aK/h"),s=a("XHGt"),r=a("dxEi");const i={children:n.default.node,isOnline:n.default.bool},o=({isOnline:e,children:t})=>e?t:null;o.propTypes=i,o.defaultProps={children:null,isOnline:null};var l=Object(s.b)(e=>({isOnline:Object(r.c)(e)}))(o);const c={children:n.default.node,isOnline:n.default.bool},d=({isOnline:e,children:t})=>e?null:t;d.propTypes=c,d.defaultProps={children:null,isOnline:null};var u=Object(s.b)(e=>({isOnline:Object(r.c)(e)}))(d);a("XoBp");a.d(t,"b",function(){return l}),a.d(t,"a",function(){return u})},"c+rX":function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("aK/h"),o=a("XHGt"),l=a("peh1"),c=a("yHhI"),d=a("dhvi");i.default.arrayOf(i.default.element),i.default.func;const u={elements:null,logError:n.a};class modal_container_BaseModalContainer extends s.Component{componentDidCatch(e){const t=e?e.message:"";this.props.logError("MODAL-CONTAINER",`componentDidCatch: ${t}`)}render(){const e=this.props.elements;return r.a.createElement(s.Fragment,null,e)}}modal_container_BaseModalContainer.displayName="BaseModalContainer",modal_container_BaseModalContainer.defaultProps=u;const p=Object(l.createSelector)([e=>Object(d.c)(e)],e=>e.map(e=>e.element));var h=Object(o.b)(e=>({error:Object(c.a)({state:e}).error,elements:p(e)}),{})(modal_container_BaseModalContainer);t.a=h},"c+ts":function(e,t,a){"use strict";var n=a("q1tI"),s=a("XHGt"),r=a("aK/h"),i=a("Tc5z"),o=a("aLpA");a("/PGu");const l={isFrameless:r.default.bool.isRequired,isCustomTitlebarShown:r.default.bool.isRequired},c=({isFrameless:e,isCustomTitlebarShown:t}={})=>(Object(n.useEffect)(()=>(e?document.body.classList.add(o.n):document.body.classList.remove(o.n),t?document.body.classList.add(o.j):document.body.classList.remove(o.j),()=>{document.body.classList.remove(o.n),document.body.classList.remove(o.j)}),[e,t]),null);c.propTypes=l;t.a=Object(s.b)(e=>({isCustomTitlebarShown:Object(i.k)(e),isFrameless:Object(i.l)(e)}))(c)},c48M:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s});const n=[],s={}},c7HH:function(e,t,a){},cAy8:function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("aK/h"),o=a("MnCE"),l=a("nNoG"),c=a("9/ob"),d=a("XLFM"),u=a("OkQS");const p=new l.b("attachments"),h=(i.default.bool,i.default.func,i.default.number,{isExpanded:!1,onClick:n.a,attachmentsOverLimitCount:0}),m=({isExpanded:e,onClick:t,attachmentsOverLimitCount:a})=>{return r.a.createElement(c.a,{enabled:["feature_react_messages"]},r.a.createElement("div",{className:"c-message_attachment"},r.a.createElement(u.a,null),r.a.createElement("div",{className:"c-message_attachment__body"},r.a.createElement(d.c,{className:"c-message_attachment__over_limit_button",onClick:t},r.a.createElement("p",{className:"c-message_attachment__over_limit"},(()=>r.a.createElement("b",null,e?p.t("Show fewer attachments",{fallbackHash:"82ec3619e636876bba549869a1e98fc21e6bee00"}):p.t("{count, plural, =1 {+ # more attachment} other {+ # more attachments}}",{count:a,fallbackHash:"61f00263e27b3ffe8a86b728c78ef71614ebe535"})))())))))};m.displayName="MessageAttachmentOverLimitButton",m.defaultProps=h,t.a=Object(o.a)(m)},cLBS:function(e,t,a){},cYut:function(e,t,a){},dBrN:function(e,t,a){},dEjE:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("TSYQ"),o=a.n(i),l=a("RhZ7"),c=a("TOh8"),d=a("0dpy"),u=a("8CL7"),p=a("VrmM"),h=a("fFZG"),m=a("rUi3"),b=a("Aeia"),f=a("Gq2+"),_=a("KmK8"),g=a("lU/5"),y=a("gl+W");a("dX4D");r.default.number,r.default.string,r.default.string,r.default.object.isRequired,r.default.bool,r.default.bool,r.default.bool,r.default.string,r.default.bool;const O={avatarSize:24,className:void 0,flexOrigin:void 0,timestampClickable:!1,timestampFull:!0,timestampRelative:!1,blocksContainerContext:void 0,footer:!0};class ContextualMessage extends n.PureComponent{render(){var e=this.props;const t=e.avatarSize,a=e.className,n=e.flexOrigin,r=e.msg,i=e.timestampClickable,O=e.timestampFull,C=e.timestampRelative,v=e.blocksContainerContext,E=e.footer;return s.a.createElement(y.a,{className:o()("c-message_kit__message","c-message_kit__contextual_message",a)},s.a.createElement(g.a,{msg:r},s.a.createElement(_.a,{light:s.a.createElement(l.a,{msg:r,size:t})},s.a.createElement(c.a,{msg:r}),"\xa0\xa0",s.a.createElement(d.a,{msg:r,clickable:i,full:O,relative:C}),s.a.createElement("br",null),s.a.createElement(u.a,{msg:r}),s.a.createElement(p.a,{msg:r,blocksContainerContext:v}),s.a.createElement(f.a,{msg:r}),s.a.createElement(b.b,{msg:r}),s.a.createElement(h.a,{msg:r}),E?s.a.createElement(m.a,{flexOrigin:n,msg:r}):null)))}}ContextualMessage.displayName="ContextualMessage",ContextualMessage.defaultProps=O,t.a=ContextualMessage},dVmK:function(e,t,a){},dX4D:function(e,t,a){},dohy:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("XfeM"),i=a("dhvi"),o=a("ifKl"),l=a("XHGt"),c=a("aK/h"),d=a("wd/R"),u=a.n(d),p=a("nNoG"),h=a("HOkk"),m=a("hFPh"),b=a("cTBa"),f=a("llxT"),_=a("O0RF"),g=a("kOzZ"),y=a("negh"),O=a("EMMD"),C=a("mqzt"),v=a("A/mR"),E=a("XL7r"),k=a("/LVU"),S=a("4vzu");a("1iAE");const j=new p.b("do_not_disturb"),I=(c.default.func.isRequired,c.default.bool,c.default.bool,c.default.object,{do24hrTime:!1,inDnd:!1,clogger:{track:o.a}});class dnd_dialog_DndDialog extends n.PureComponent{constructor(e){super(e);const t=u()().add(1,"hour").startOf("hour"),a=t.format("YYYY-MM-DD"),n=t.format("HH:mm"),s=u()(`${a} ${n}`).unix();this.state={snoozeEndDate:a,snoozeEndTime:n,snoozeEndTs:s},this.onDateChange=this.onDateChange.bind(this),this.onTimeChange=this.onTimeChange.bind(this),this.onGo=this.onGo.bind(this)}onDateChange(e){const t=this.state.snoozeEndTime;this.setState(()=>({snoozeEndDate:e,snoozeEndTs:u()(`${e} ${t}`).unix()}))}onTimeChange(e){const t=this.state.snoozeEndDate;this.setState(()=>({snoozeEndTime:e,snoozeEndTs:u()(`${t} ${e}`).unix()}))}onGo(){var e=this.props;const t=e.clogger,a=e.inDnd,n=this.state.snoozeEndTs,s=Object(C.a)(n);s<=0||(this.props.snoozeNotifications({duration:s,reason:"DndDialog:onGo"}),t.track(y.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:s,dnd_preset:y.DndPreset.DURATION_CUSTOM,dnd_snooze_type:a?y.DndSnoozeType.SNOOZE_ADJUST:y.DndSnoozeType.SNOOZE_INITIAL}))}getTimeSelectOptions(){const e=this.props.do24hrTime,t=this.state.snoozeEndDate===u()().format("YYYY-MM-DD"),a=u()().format("HH:mm");return Object.keys(O.a).filter(e=>!(t&&e<a)).map(t=>({value:t,label:e?t:O.a[t]}))}render(){var e=this.state;const t=e.snoozeEndDate,a=e.snoozeEndTime,n=e.snoozeEndTs,r=Object(C.a)(n)<=0,i=Object(v.k)(n),o=j.t("Pause notifications until\u2026"),l=u()().format("YYYY-MM-DD"),c=u()().add(1,"year").format("YYYY-MM-DD");return s.a.createElement(h.a,{title:o,goButtonText:j.t("Pause Notifications"),goButtonType:"primary",goButtonIsDisabled:r,onGo:this.onGo,showCancelButton:!1},s.a.createElement(_.a,{htmlFor:"dnd_dialog_date_button",text:j.t("Date")},s.a.createElement(m.d,{position:"bottom",offsetX:67,dateFormat:"YYYY-MM-DD",selectedDate:t,onDateChange:this.onDateChange,disableDatesBefore:l,disableDatesAfter:c},s.a.createElement(f.a,{id:"dnd_dialog_date_button",className:"p-dnd_dialog__date_picker_trigger","aria-label":j.t("Date to snooze notifications until")},i))),s.a.createElement(_.a,{htmlFor:"dnd_dialog_time_select",text:j.t("Time")},s.a.createElement(b.b,{id:"dnd_dialog_time_select",options:this.getTimeSelectOptions(),onChange:this.onTimeChange,value:a,useFilteredInput:!1,usePlaceholderOption:!1})))}}dnd_dialog_DndDialog.displayName="DndDialog",dnd_dialog_DndDialog.defaultProps=I;const w={snoozeNotifications:k.e};var T=Object(l.b)(e=>({do24hrTime:Object(E.k)(e,"time24"),inDnd:!!Object(S.c)(e),clogger:Object(g.a)({state:e})}),w)(dnd_dialog_DndDialog);const N=Object(r.b)("Opens the DND dialog",(e,t,a)=>{e(Object(i.e)({element:s.a.createElement(T,a)}))});N.meta={name:"openDndDialog",key:"actionsOpenDndDialogOpenDndDialog",description:"Opens the DND dialog"},N.propTypes=null;t.a=N},dutO:function(e,t,a){},"e+d/":function(e,t,a){"use strict";const n=new(a("nNoG").b)("files_types");t.a={applescript:{mimeType:"text/applescript",label:({featureSonicSnippets:e}={})=>e?n.t("AppleScript"):""},c:{mimeType:"text/x-csrc",label:({featureSonicSnippets:e}={})=>e?n.t("C"):"",loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},cfm:{mimeType:"text/plain",label:({featureSonicSnippets:e}={})=>e?n.t("ColdFusion"):""},clojure:{mimeType:"text/x-clojure",label:({featureSonicSnippets:e}={})=>e?n.t("Clojure"):"",loader:()=>Promise.all([a.e(0),a.e(47)]).then(a.t.bind(null,"LA1u",7))},coffeescript:{mimeType:"text/x-coffeescript",label:({featureSonicSnippets:e}={})=>e?n.t("CoffeeScript"):"",loader:()=>Promise.all([a.e(0),a.e(48)]).then(a.t.bind(null,"oL3q",7))},cpp:{mimeType:"text/x-c++src",label:({featureSonicSnippets:e}={})=>e?n.t("C++"):"",loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},crystal:{mimeType:"text/x-crystal",label:({featureSonicSnippets:e}={})=>e?n.t("Crystal"):"",loader:()=>Promise.all([a.e(0),a.e(50)]).then(a.t.bind(null,"JRJP",7))},csharp:{mimeType:"text/x-csharp",label:({featureSonicSnippets:e}={})=>e?n.t("C#"):"",loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},css:{mimeType:"text/css",label:({featureSonicSnippets:e}={})=>e?n.t("CSS"):"",loader:()=>Promise.all([a.e(0),a.e(44)]).then(a.t.bind(null,"ewDg",7))},cypher:{mimeType:"application/x-cypher-query",label:({featureSonicSnippets:e}={})=>e?n.t("Cypher"):"",loader:()=>Promise.all([a.e(0),a.e(51)]).then(a.t.bind(null,"vW+e",7))},csv:{mimeType:"text/csv",label:({featureSonicSnippets:e}={})=>e?n.t("CSV"):""},d:{mimeType:"text/x-d",label:({featureSonicSnippets:e}={})=>e?n.t("D"):"",loader:()=>Promise.all([a.e(0),a.e(52)]).then(a.t.bind(null,"zRyg",7))},dart:{mimeType:"text/x-dart",label:({featureSonicSnippets:e}={})=>e?n.t("Dart"):"",loader:()=>Promise.all([a.e(0),a.e(45),a.e(53)]).then(a.t.bind(null,"6q/U",7))},diff:{mimeType:"text/x-diff",label:({featureSonicSnippets:e}={})=>e?n.t("Diff"):"",loader:()=>Promise.all([a.e(0),a.e(54)]).then(a.t.bind(null,"3fnu",7))},dockerfile:{mimeType:"text/x-dockerfile",label:({featureSonicSnippets:e}={})=>e?n.t("Docker"):"",loader:()=>Promise.all([a.e(0),a.e(55)]).then(a.t.bind(null,"R6x9",7))},erlang:{mimeType:"text/x-erlang",label:({featureSonicSnippets:e}={})=>e?n.t("Erlang"):"",loader:()=>Promise.all([a.e(0),a.e(56)]).then(a.t.bind(null,"9RTS",7))},fortran:{mimeType:"text/x-fortran",label:({featureSonicSnippets:e}={})=>e?n.t("Fortran"):"",loader:()=>Promise.all([a.e(0),a.e(57)]).then(a.t.bind(null,"UYub",7))},fsharp:{mimeType:"text/x-fsharp",label:({featureSonicSnippets:e}={})=>e?n.t("F#"):"",loader:()=>Promise.all([a.e(0),a.e(68)]).then(a.t.bind(null,"NU+Z",7))},gherkin:{mimeType:"text/x-feature",label:({featureSonicSnippets:e}={})=>e?n.t("Gherkin"):"",loader:()=>Promise.all([a.e(0),a.e(58)]).then(a.t.bind(null,"tkAH",7))},go:{mimeType:"text/x-go",label:({featureSonicSnippets:e}={})=>e?n.t("Go"):"",loader:()=>Promise.all([a.e(0),a.e(59)]).then(a.t.bind(null,"T/QY",7))},groovy:{mimeType:"text/x-groovy",label:({featureSonicSnippets:e}={})=>e?n.t("Groovy"):"",loader:()=>Promise.all([a.e(0),a.e(60)]).then(a.t.bind(null,"X7TR",7))},handlebars:{mimeType:"text/x-handlebars-template",label:({featureSonicSnippets:e}={})=>e?n.t("Handlebars"):"",loader:()=>Promise.all([a.e(0),a.e(61)]).then(a.t.bind(null,"4d6s",7))},haskell:{mimeType:"text/x-haskell",label:({featureSonicSnippets:e}={})=>e?n.t("Haskell"):"",loader:()=>Promise.all([a.e(0),a.e(62)]).then(a.t.bind(null,"0+DK",7))},haxe:{mimeType:"text/x-haxe",label:({featureSonicSnippets:e}={})=>e?n.t("Haxe"):"",loader:()=>Promise.all([a.e(0),a.e(63)]).then(a.t.bind(null,"We/1",7))},html:{mimeType:"text/html",label:({featureSonicSnippets:e}={})=>e?n.t("HTML"):"",loader:()=>Promise.all([a.e(0),a.e(44),a.e(46),a.e(64)]).then(a.t.bind(null,"1p+/",7))},java:{mimeType:"text/x-java",label:({featureSonicSnippets:e}={})=>e?n.t("Java"):"",loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},javascript:{mimeType:"text/javascript",label:({featureSonicSnippets:e}={})=>e?n.t("JavaScript/JSON"):"",loader:()=>Promise.all([a.e(0),a.e(46),a.e(102)]).then(a.t.bind(null,"+dQi",7))},jsx:{mimeType:"text/jsx",label:({featureSonicSnippets:e}={})=>e?n.t("JSX"):"",loader:()=>Promise.all([a.e(0),a.e(46),a.e(102)]).then(a.t.bind(null,"onn/",7))},julia:{mimeType:"text/x-julia",label:({featureSonicSnippets:e}={})=>e?n.t("Julia"):"",loader:()=>Promise.all([a.e(0),a.e(65)]).then(a.t.bind(null,"NGrM",7))},kotlin:{mimeType:"text/x-kotlin",label:({featureSonicSnippets:e}={})=>e?n.t("Kotlin"):"",loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},latex:{mimeType:"text/x-stex",label:({featureSonicSnippets:e}={})=>e?n.t("LaTeX/sTeX"):"",loader:()=>Promise.all([a.e(0),a.e(83)]).then(a.t.bind(null,"+NIl",7))},lisp:{mimeType:"text/x-lisp",label:({featureSonicSnippets:e}={})=>e?n.t("Lisp"):"",loader:()=>Promise.all([a.e(0),a.e(49)]).then(a.t.bind(null,"kmAK",7))},lua:{mimeType:"text/x-lua",label:({featureSonicSnippets:e}={})=>e?n.t("Lua"):"",loader:()=>Promise.all([a.e(0),a.e(66)]).then(a.t.bind(null,"jrMQ",7))},markdown:{mimeType:"text/x-markdown",label:({featureSonicSnippets:e}={})=>e?n.t("Markdown (raw)"):"",loader:()=>Promise.all([a.e(0),a.e(91)]).then(a.t.bind(null,"lZu9",7))},mathematica:{mimeType:"text/x-mathematica",label:({featureSonicSnippets:e}={})=>e?n.t("Mathematica"):"",loader:()=>Promise.all([a.e(0),a.e(67)]).then(a.t.bind(null,"ztbM",7))},matlab:{mimeType:"text/x-octave",label:({featureSonicSnippets:e}={})=>e?n.t("MATLAB"):"",loader:()=>Promise.all([a.e(0),a.e(70)]).then(a.t.bind(null,"mybg",7))},mumps:{mimeType:"text/x-mumps",label:({featureSonicSnippets:e}={})=>e?n.t("MUMPS"):"",loader:()=>Promise.all([a.e(0),a.e(69)]).then(a.t.bind(null,"Q7su",7))},objc:{mimeType:"text/x-objectivec",label:({featureSonicSnippets:e}={})=>e?n.t("Objective-C"):"",loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},ocaml:{mimeType:"text/x-ocaml",label:({featureSonicSnippets:e}={})=>e?n.t("OCaml"):"",loader:()=>Promise.all([a.e(0),a.e(68)]).then(a.t.bind(null,"NU+Z",7))},pascal:{mimeType:"text/x-pascal",label:({featureSonicSnippets:e}={})=>e?n.t("Pascal"):"",loader:()=>Promise.all([a.e(0),a.e(71)]).then(a.t.bind(null,"lB9V",7))},perl:{mimeType:"text/x-perl",label:({featureSonicSnippets:e}={})=>e?n.t("Perl"):"",loader:()=>Promise.all([a.e(0),a.e(92)]).then(a.t.bind(null,"kG+r",7))},php:{mimeType:"application/x-httpd-php",label:({featureSonicSnippets:e}={})=>e?n.t("PHP"):"",loader:()=>Promise.all([a.e(0),a.e(44),a.e(46),a.e(45),a.e(95)]).then(a.t.bind(null,"RNWO",7))},pig:{mimeType:"text/x-pig",label:({featureSonicSnippets:e}={})=>e?n.t("Pig"):"",loader:()=>Promise.all([a.e(0),a.e(72)]).then(a.t.bind(null,"860+",7))},powershell:{mimeType:"text/x-powershell",label:({featureSonicSnippets:e}={})=>e?n.t("PowerShell"):"",loader:()=>Promise.all([a.e(0),a.e(73)]).then(a.t.bind(null,"naPG",7))},puppet:{mimeType:"text/x-puppet",label:({featureSonicSnippets:e}={})=>e?n.t("Puppet"):"",loader:()=>Promise.all([a.e(0),a.e(74)]).then(a.t.bind(null,"cwoo",7))},python:{mimeType:"text/x-python",label:({featureSonicSnippets:e}={})=>e?n.t("Python"):"",loader:()=>Promise.all([a.e(0),a.e(75)]).then(a.t.bind(null,"25Eh",7))},r:{mimeType:"text/x-rsrc",label:({featureSonicSnippets:e}={})=>e?n.t("R"):"",loader:()=>Promise.all([a.e(0),a.e(76)]).then(a.t.bind(null,"kD6b",7))},ruby:{mimeType:"text/x-ruby",label:({featureSonicSnippets:e}={})=>e?n.t("Ruby"):"",loader:()=>Promise.all([a.e(0),a.e(77)]).then(a.t.bind(null,"hTYL",7))},rust:{mimeType:"text/x-rustsrc",label:({featureSonicSnippets:e}={})=>e?n.t("Rust"):"",loader:()=>Promise.all([a.e(0),a.e(78)]).then(a.t.bind(null,"sY4N",7))},sass:{mimeType:"text/x-sass",label:({featureSonicSnippets:e}={})=>e?n.t("Sass"):"",loader:()=>Promise.all([a.e(0),a.e(44),a.e(79)]).then(a.t.bind(null,"G2Pi",7))},scala:{mimeType:"text/x-scala",label:({featureSonicSnippets:e}={})=>e?n.t("Scala"):"",loader:()=>Promise.all([a.e(0),a.e(45)]).then(a.t.bind(null,"S6bl",7))},scheme:{mimeType:"text/x-scheme",label:({featureSonicSnippets:e}={})=>e?n.t("Scheme"):"",loader:()=>Promise.all([a.e(0),a.e(80)]).then(a.t.bind(null,"8wdy",7))},shell:{mimeType:"text/x-sh",label:({featureSonicSnippets:e}={})=>e?n.t("Shell"):"",loader:()=>Promise.all([a.e(0),a.e(81)]).then(a.t.bind(null,"AvDn",7))},smalltalk:{mimeType:"text/x-stsrc",label:({featureSonicSnippets:e}={})=>e?n.t("Smalltalk"):"",loader:()=>Promise.all([a.e(0),a.e(82)]).then(a.t.bind(null,"n4Nj",7))},sql:{mimeType:"text/x-sql",label:({featureSonicSnippets:e}={})=>e?n.t("SQL"):"",loader:()=>Promise.all([a.e(0),a.e(94)]).then(a.t.bind(null,"/9rB",7))},swift:{mimeType:"text/x-swift",label:({featureSonicSnippets:e}={})=>e?n.t("Swift"):"",loader:()=>Promise.all([a.e(0),a.e(84)]).then(a.t.bind(null,"wOIU",7))},tsv:{mimeType:"text/tab-separated-values",label:({featureSonicSnippets:e}={})=>e?n.t("TSV"):""},typescript:{mimeType:"text/typescript",label:({featureSonicSnippets:e}={})=>e?n.t("TypeScript"):"",loader:()=>Promise.all([a.e(0),a.e(46),a.e(102)]).then(a.t.bind(null,"+dQi",7))},tsx:{mimeType:"text/typescript-jsx",label:({featureSonicSnippets:e}={})=>e?n.t("TSX"):"",loader:()=>Promise.all([a.e(0),a.e(46),a.e(102)]).then(a.t.bind(null,"onn/",7))},vb:{mimeType:"text/x-vb",label:({featureSonicSnippets:e}={})=>e?n.t("VB.NET"):"",loader:()=>Promise.all([a.e(0),a.e(85)]).then(a.t.bind(null,"Kr55",7))},vbscript:{mimeType:"text/vbscript",label:({featureSonicSnippets:e}={})=>e?n.t("VBScript"):"",loader:()=>Promise.all([a.e(0),a.e(86)]).then(a.t.bind(null,"axah",7))},velocity:{mimeType:"text/x-velocity",label:({featureSonicSnippets:e}={})=>e?n.t("Velocity"):"",loader:()=>Promise.all([a.e(0),a.e(87)]).then(a.t.bind(null,"/kYp",7))},verilog:{mimeType:"text/x-verilog",label:({featureSonicSnippets:e}={})=>e?n.t("Verilog"):"",loader:()=>Promise.all([a.e(0),a.e(88)]).then(a.t.bind(null,"m2bc",7))},xml:{mimeType:"text/xml",label:({featureSonicSnippets:e}={})=>e?n.t("XML"):"",loader:()=>Promise.all([a.e(0),a.e(89)]).then(a.t.bind(null,"1eCo",7))},yaml:{mimeType:"text/x-yaml",label:({featureSonicSnippets:e}={})=>e?n.t("YAML"):"",loader:()=>Promise.all([a.e(0),a.e(90)]).then(a.t.bind(null,"ztCB",7))}}},e31y:function(e,t,a){},e3Uf:function(e,t,a){},eK75:function(e,t,a){"use strict";var n=a("fCVm");t.a=(()=>Object(n.a)().r)},eZdM:function(e,t,a){},ejm9:function(e,t,a){},erm0:function(e,t,a){},fCVm:function(e,t,a){"use strict";a.d(t,"d",function(){return s}),a.d(t,"e",function(){return r}),a.d(t,"b",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"a",function(){return l});var n=a("Sb2x");const s=n.TSF.replaceFormatContents,r=n.TSF.swapOutPlaceholders,i=n.TSF.getTokensArray,o=n.TSF.getTokensString,l=n.TSF.getEmojiRx},fFZG:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("XHGt"),o=a("TSYQ"),l=a.n(o),c=a("oqAd"),d=a("Q+UV");a("2Dlx");r.default.object.isRequired,r.default.string,r.default.string,r.default.string;const u={className:void 0,reactionKey:null,latestMessageTsWithReactions:void 0};class MessageReactionBar extends n.PureComponent{render(){var e=this.props;const t=e.msg,a=e.className,n=e.reactionKey,r=e.latestMessageTsWithReactions,i=l()("c-message_kit__reaction_bar",a),o=r&&r===t.ts;return s.a.createElement(c.a,{className:i,reactionKey:n,isLatestReactionInChannel:o})}}MessageReactionBar.displayName="MessageReactionBar",MessageReactionBar.defaultProps=u;t.a=Object(i.b)((e,t)=>{const a=t.msg;return a?{reactionKey:Object(d.b)(a)}:null})(MessageReactionBar)},fHJC:function(e,t,a){},fX3E:function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("aK/h"),o=a("XHGt"),l=a("1hAG"),c=a("t85p"),d=a("h9PG"),u=a("e4Fz"),p=a("nNoG"),h=a("zlNY"),m=a("od5y");a("1lYC");const b=new p.b("files"),f=new p.b("search"),_=(i.default.string,i.default.func,i.default.bool,i.default.bool,i.default.bool,{filetype:"",onChange:n.a,featureRemoteFilesApi:!1,featureDocs:!1,showEmail:!1});class FileTypeSelect extends s.PureComponent{constructor(e){super(e),this.onChange=this.onChange.bind(this),this.labelId=`file_type_select_${Object(u.d)()}`,this.state={label:null}}onChange(e,t,a){this.setState(()=>({label:t})),this.props.onChange(e,t,a)}render(){const e=r.a.createElement(s.Fragment,null,b.rt("Show <strong>all file types</strong>",{fallbackHash:"30266588dc5ca2b69979f4afa079509cd409568e"}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"offscreen",id:this.labelId},f.t("File type")," ",r.a.createElement("span",null,"- ",this.state.label?this.state.label:e)),r.a.createElement(h.d,{className:"p-file_list__select p-file_list__file_type_select",optionClassName:"p-file_list__option",placeholder:e,onChange:this.onChange,value:this.props.filetype,maxOptionsListHeight:1/0,useFilteredInput:!1,useFullWidthOptions:!0,wrapperClassName:"p-file_list__select_wrapper",labelId:this.labelId,options:[{label:r.a.createElement(s.Fragment,null,r.a.createElement(m.b,{type:"create-post"}),b.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"})),labelText:b.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"}),value:this.props.featureDocs?"docs":"posts"},{label:r.a.createElement(s.Fragment,null,r.a.createElement(m.b,{type:"create-snippet"}),b.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"})),labelText:b.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"}),value:"snippets"},...this.props.showEmail?[{label:r.a.createElement(s.Fragment,null,r.a.createElement(m.b,{type:"envelope-o"}),b.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"})),labelText:b.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"}),value:"emails"}]:[],{label:r.a.createElement(s.Fragment,null,r.a.createElement(m.b,{type:"image"}),b.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"})),labelText:b.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"}),value:"images"},{label:r.a.createElement(s.Fragment,null,r.a.createElement(m.b,{type:"play"}),b.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"})),labelText:b.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"}),value:"videos"},{label:r.a.createElement(s.Fragment,null,r.a.createElement(m.b,{type:"book"}),b.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"})),labelText:b.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"}),value:"pdfs"},{label:r.a.createElement(s.Fragment,null,r.a.createElement(m.b,{type:"file"}),b.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"})),labelText:b.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"}),value:"spreadsheets"},...this.props.featureRemoteFilesApi?[{label:r.a.createElement(s.Fragment,null,r.a.createElement(m.b,{type:"file"}),b.t("Presentations")),labelText:b.t("Presentations"),value:"presentations"},{label:r.a.createElement(s.Fragment,null,r.a.createElement(m.b,{type:"file"}),b.t("Documents")),labelText:b.t("Documents"),value:"documents"}]:[],{label:r.a.createElement(s.Fragment,null,r.a.createElement(m.b,{type:"google-drive"}),b.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"})),labelText:b.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"}),value:"gdocs"}]}))}}FileTypeSelect.displayName="FileTypeSelect",FileTypeSelect.defaultProps=_,t.a=Object(o.b)(e=>({featureDocs:Object(c.m)(e,"feature_docs"),featureRemoteFilesApi:Object(c.m)(e,"feature_remote_files_api"),showEmail:!!Object(l.d)(e).plan&&!Object(d.a)(e,"disable_email_ingestion")}))(FileTypeSelect)},fYpC:function(e,t,a){},fj0Z:function(e,t,a){"use strict";a.d(t,"a",function(){return WorkspaceBootFailure});var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("od5y"),o=a("XLFM"),l=a("LrgL"),c=a("nNoG"),d=a("YB7p");a("tEVE");const u=new c.b("sonic_workspace_boot_failure");r.default.bool,r.default.bool;class WorkspaceBootFailure extends n.PureComponent{renderAccessLimitedView(){const e=this.props.shouldRetry&&s.a.createElement("div",{className:"p-fallback_view__reload"},s.a.createElement(o.d,{type:"outline",size:"medium",onClick:d.a},u.t("Try Again")));return s.a.createElement("div",{className:"p-workspace__boot_failure"},s.a.createElement(i.b,{type:"warning",className:"p-workspace__boot_failure_icon"}),s.a.createElement("h1",{className:"p-workspace__boot_failure_title"},u.t("Your current network has blocked this workspace.")),s.a.createElement("p",{className:"p-workspace__boot_failure_description"},u.t("Your current network will only allow you to access certain Slack workspaces (usually, just the ones you use for work)."),s.a.createElement("br",null),s.a.createElement("br",null),u.t("To get connected, change networks and try again.")),e)}renderGenericView(){const e=this.props.shouldRetry,t=u.t("contact us"),a=e&&s.a.createElement("div",{className:"p-fallback_view__reload"},s.a.createElement(o.d,{type:"outline",size:"medium",onClick:d.a},u.t("Reload")));return s.a.createElement("div",{className:"p-workspace__boot_failure"},s.a.createElement(i.b,{type:"exclamation-circle",className:"p-workspace__boot_failure_icon"}),s.a.createElement("h1",{className:"p-workspace__boot_failure_title"},u.t("Something\u2019s gone awry, and we\u2019re having trouble loading your workspace.")),s.a.createElement("p",{className:"p-workspace__boot_failure_description"},u.rt("Sorry we can\u2019t be more specific \u2014 this is one of those cases where we don\u2019t know what\u2019s gone wrong either. A restart of Slack may help, and you can always {contactLink}.",{contactLink:s.a.createElement(l.a,{href:"https://slack.com/help/contact"},t)})),a)}render(){return this.props.isAccessLimited?this.renderAccessLimitedView():this.renderGenericView()}}WorkspaceBootFailure.displayName="WorkspaceBootFailure",WorkspaceBootFailure.defaultProps={shouldRetry:!1,isAccessLimited:!1}},ftfc:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("ifKl"),i=a("q1tI"),o=a.n(i),l=a("XHGt"),c=a("aK/h"),d=a("nNoG"),u=a("Idin"),p=a("M1FR"),h=a("pguY");const m=(e,t)=>{const a=Math.min(t||5e5,5e5);return e.length>a?Object(h.a)(e.slice(0,a)):Object(h.a)(e)};var b=a("1hAG"),f=a("81nI"),_=a("7nxQ"),g=a("kOzZ"),y=a("zmn3"),O=a("TSYQ"),C=a.n(O),v=a("uPpK"),E=a("tn36"),k=a("qPro"),S=a("tQ8E"),j=a("cD5Y"),I=a("od5y"),w=a("ynxK"),T=a("lek6");const N=e=>o.a.createElement("div",null,o.a.createElement(w.a,{"data-qa":`article-${e.article.id}`,className:`p-help_search__list__item ${e.isFocus?"p-help_search__list__item__focus":""}`,key:`${e.article.id}-list-item`,onClick:()=>{e.onClickArticle(e.article.url)},onKeyDown:t=>{13===t.keyCode&&e.onClickArticle(e.article.url)}},o.a.createElement("div",{className:"p-help_search__list__item__title"},"string"==typeof e.article.title?o.a.createElement(T.a,{className:"c-channel_search_result__justification",text:e.article.title,showTooltips:!1}):e.article.title),o.a.createElement(I.b,{type:"enter",className:"p-help_search__list__icon"})));N.displayName="Article",N.defaultProps={article:{},isFocus:!1,onClickArticle:r.a};var A=N;a("nTMe");const R=new d.b("help"),M=(c.default.string,c.default.string,c.default.arrayOf(c.default.shape({id:c.default.oneOfType([c.default.number,c.default.string]),images:c.default.array,label_names:c.default.array,title:c.default.node,url:c.default.string})),c.default.shape({open:c.default.number,closed:c.default.number,unread:c.default.number}),c.default.func,c.default.bool,c.default.func,c.default.bool,c.default.bool,c.default.bool,{query:"",helpCenterToken:"",articles:[],tickets:{closed:0,read:0,unread:0},onQueryChange:r.a,isLoading:!1,onOpenLink:r.a,autoFocus:!1,noTopMargin:!1,noBottomMargin:!1});class help_search_HelpSearch extends i.Component{constructor(e){super(e),this.state={query:this.props.query,articles:this.props.articles,focusFirstResult:!0,isLoading:this.props.isLoading},this.zdLocale=Object(_.a)(),Object(E.a)(this,["onListMouseEnter","onSearchInputChange","onSearchInputSubmit","onClickArticle","onSearchInputBlur","renderArticles"])}onClickArticle({url:e,index:t,articleId:a}){this.openLinkInNewWindow({url:Object(f.a)(e,this.props.helpCenterToken),index:t,articleId:a})}onListMouseEnter(){this.setState(()=>({focusFirstResult:!1}))}onSearchInputBlur(){this.setState(()=>({focusFirstResult:!1}))}onSearchInputChange(e){const t=e.target.value;this.setState(()=>({query:t,focusFirstResult:!0})),this.props.onQueryChange(t)}onSearchInputSubmit(){this.state.articles.length&&this.openLinkInNewWindow({url:Object(f.a)(this.state.articles[0].url,this.props.helpCenterToken),isFromSubmit:!0,index:0,articleId:this.state.articles[0].id})}UNSAFE_componentWillReceiveProps(e){e.articles!==this.state.articles&&this.setState(()=>({articles:e.articles,isLoading:e.isLoading}))}openLinkInNewWindow({url:e,index:t,isFromSubmit:a,articleId:n}){(0,this.props.onOpenLink)({url:e,query:this.state.query,index:t,isFromSubmit:a,articleId:n}),window.open(Object(f.a)(e,this.props.helpCenterToken))}renderArticles(e){const t=this.state.articles[e];return o.a.createElement(A,{article:t,isFocus:this.state.focusFirstResult&&0===e,onClickArticle:a=>this.onClickArticle({url:a,index:e,articleId:t.id})})}render(){var e=this.props;const t=e.autoFocus,a=e.noTopMargin,n=e.noBottomMargin;var s=this.state;const r=s.query,l=s.articles;this.keys=Object(y.a)(l,"id").map(e=>e.toString());const c=C()({margin_top_200:!a,margin_bottom_100:!n});return o.a.createElement(i.Fragment,null,o.a.createElement(k.a,{placeholder:R.t("Search the Help Center"),value:r,icon:"search",autoFocus:t,hasResetButton:!0,onChange:this.onSearchInputChange,onSubmit:this.onSearchInputSubmit,blurOnSubmit:!0,className:c,size:"large",onBlur:this.onSearchInputBlur}),r?null:o.a.createElement("div",{className:"p-help_search__popular_topics padding_bottom_100 bold"},R.t("Popular help topics")),o.a.createElement("div",{role:"list",className:"p-help_search__list display_flex flex_direction_column justify_content_between",onMouseEnter:this.onListMouseEnter},this.state.isLoading?o.a.createElement(j.a,{size:"large",color:"blue",noMargin:!0}):o.a.createElement("div",{className:"p-help_search__list__inner full_height"},o.a.createElement(v.a,null,({width:e,height:t})=>o.a.createElement(S.a,{width:e,height:t,keys:this.keys,rowRenderer:this.renderArticles})))))}}help_search_HelpSearch.displayName="HelpSearch",help_search_HelpSearch.defaultProps=M;var P=help_search_HelpSearch;const x=new d.b("help"),L=(c.default.string,c.default.string,c.default.func,c.default.object.isRequired,c.default.bool,c.default.func,c.default.arrayOf(c.default.oneOfType([c.default.number,c.default.shape({type:c.default.string.isRequired,id:c.default.number.isRequired,text:c.default.string}),c.default.shape({type:c.default.string.isRequired,url:c.default.string.isRequired,text:c.default.string.isRequired})])),c.default.func,c.default.bool,c.default.bool,{query:"",helpCenterTrackingToken:"",fetchHelpArticles:r.a,autoFocus:!1,onQueryChange:r.a,defaultArticlesData:null,onOpenLink:r.a,noTopMargin:!1,noBottomMargin:!1});function F(e){return"number"==typeof e||"helplink"===e.type?e.id||e:null}class help_search_container_HelpSearchContainer extends i.Component{constructor(e){super(e),this.state={query:this.props.query,articles:[],isLoading:!0},this.allArticles=[],this.onQueryChange=this.onQueryChange.bind(this),this.zdLocale=Object(_.a)()}componentDidMount(){this.fetchHelpArticles({reason:"help-search-container/componentDidMount"})}componentDidUpdate(e){e.defaultArticlesData!==this.props.defaultArticlesData&&this.fetchHelpArticles({reason:"help-search-container/componentDidUpdate"})}onQueryChange(e){const t=e?this.filterArticlesByQuery(e):this.defaultArticles;if(e&&t.length<7){const a=Object(f.b)({query:e,zdLocale:this.zdLocale,sidTrackingToken:this.props.helpCenterTrackingToken});t.push({id:-99999,images:[],label_names:[],title:x.rt('Search for "{query}" on the Help Center',{query:e}),url:a})}this.setState(()=>({query:e,articles:t})),this.props.onQueryChange(e)}filterPopularArticles(e){const t=[];return e.forEach(e=>{e.popular&&t.push(e)}),t.sort((e,t)=>void 0===e.order?1:void 0===t.order?-1:e.order-t.order),t}filterDefaultArticles(e){const t=this.props.defaultArticlesData;if(!t)return[];const a={};return t.forEach(t=>{const n=F(t);n&&(a[n]=e.find(e=>e.id===n))}),t.map((e,t)=>{const n=F(e);return n&&a[n]?"number"==typeof e?a[n]:s()({},a[n],{title:e.text||a[n].title}):{id:`customArticle-${t}`,title:e.text,url:e.url}}).filter(e=>!!e.url)}filterArticlesByQuery(e){const t=m(e),a=new RegExp(t,"i");let n=-1;const s=this.allArticles.filter((e,s)=>e.title.toLowerCase()===t.toLowerCase()?(n=s,!1):e.title.match(a));return-1!==n&&s.unshift(this.allArticles[n]),s}processArticles(e){try{this.allArticles=JSON.parse(e.articles).articles}catch(t){this.allArticles=[]}this.defaultArticles=this.props.defaultArticlesData?this.filterDefaultArticles(this.allArticles):this.filterPopularArticles(this.allArticles),this.state.query?this.setState(()=>({articles:this.filterArticlesByQuery(this.props.query),isLoading:!1})):this.setState(()=>({articles:this.defaultArticles,isLoading:!1}))}fetchHelpArticles(){this.props.fetchHelpArticles({locale:this.zdLocale,reason:"help-search-container/fetchHelpArticles"}).then(e=>{this.processArticles(e)})}render(){var e=this.state;const t=e.articles,a=e.query,n=e.isLoading;var s=this.props;const r=s.clogger,i=s.autoFocus,l=s.onOpenLink,c=s.noTopMargin,d=s.noBottomMargin;return o.a.createElement(P,{articles:t,query:a,autoFocus:i,helpCenterToken:this.props.helpCenterTrackingToken,onQueryChange:this.onQueryChange,isLoading:n,clogger:r,onOpenLink:l,noTopMargin:c,noBottomMargin:d})}}help_search_container_HelpSearchContainer.displayName="HelpSearchContainer",help_search_container_HelpSearchContainer.defaultProps=L;const D={fetchHelpArticles:u.a};var B=Object(l.b)(e=>({clogger:Object(g.a)({state:e}),helpCenterTrackingToken:Object(p.b)(e),team:Object(b.d)(e)}),D)(help_search_container_HelpSearchContainer);t.a=B},fxy3:function(e,t,a){},gBrz:function(e,t,a){},ge2f:function(e,t,a){e.exports=a.p+"apps-abefb2a.png"},"gl+W":function(e,t,a){"use strict";a.d(t,"a",function(){return MessagePillow});var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("TSYQ"),o=a.n(i),l=a("Q3oM");a("aQya");r.default.string,r.default.node;const c={className:void 0,children:void 0};class MessagePillow extends n.PureComponent{render(){const e=o()("c-message_kit__pillow",this.props.className);return s.a.createElement(l.a,{className:e},this.props.children)}}MessagePillow.displayName="MessagePillow",MessagePillow.defaultProps=c},gtcZ:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("fp5s"),s=a("f8fv"),r=a("Zr7G"),i=a("eK5+");function o(e,t){return class extends e{constructor(a){super(a),this.uniqueId=Object(n.a)(),this.name=Object(s.a)(e.name),this.telemeter=Object(r.a)(),this.logMetrics=this.telemeter&&Object(i.a)(1),this.label=t||`react_${this.name}`}UNSAFE_componentWillMount(...e){this.logMetrics&&this.telemeter.mark(`${this.label}_mount_mark_${this.uniqueId}`),super.UNSAFE_componentWillMount&&super.UNSAFE_componentWillMount(...e)}componentDidMount(...e){super.componentDidMount&&super.componentDidMount(...e),this.logMetrics&&this.telemeter.measureAndClear(`${this.label}_mount_mark_${this.uniqueId}`,`${this.label}_mount`)}UNSAFE_componentWillUpdate(...e){this.logMetrics&&this.telemeter.mark(`${this.label}_update_mark_${this.uniqueId}`),super.UNSAFE_componentWillUpdate&&super.UNSAFE_componentWillUpdate(...e)}componentDidUpdate(...e){super.componentDidUpdate&&super.componentDidUpdate(...e),this.logMetrics&&this.telemeter.measureAndClear(`${this.label}_update_mark_${this.uniqueId}`,`${this.label}_update`)}}}},guIn:function(e,t,a){"use strict";function n(e){return!(!e||"-"===e)}a.d(t,"a",function(){return n})},guKx:function(e,t,a){},guNz:function(e,t,a){},h0LD:function(e,t,a){"use strict";var n=a("XfeM"),s=a("fYfO"),r=a("4M+g"),i=a("aK/h"),o=a("yHhI"),l=a("r31G");const c=Object(n.b)("log message to console (for debugging)",(e,t,{channelId:a,ts:n}={})=>{const i=t(),c=Object(s.a)(i,a,n),d=Object(r.e)(i,a);c&&(Object(o.a)({getState:t}).warn(c),e(Object(l.e)({message:c,modelObject:d})))});c.meta={name:"logMessage",key:"actionsLogMessageLogMessage",description:"log message to console (for debugging)"},c.propTypes={channelId:i.default.string.isRequired,ts:i.default.string.isRequired},t.a=c},h2AX:function(e,t,a){},hCXE:function(e,t,a){},hOGb:function(e,t,a){"use strict";a.d(t,"b",function(){return p}),a.d(t,"a",function(){return h});var n=a("q1tI"),s=a.n(n),r=a("TSYQ"),i=a.n(r),o=(a("aK/h"),a("od5y")),l=a("nNoG");a("VmKF");const c=new l.b("keyboard_key"),d={"\u2191":!0,"\u2193":!0,"\u2190":!0,"\u2192":!0},u={"\u2191":"caret-up","\u2193":"caret-down","\u2190":"caret-left","\u2192":"caret-right",Cmd:"cmd-small"},p=e=>{return{"\u2191":c.t("up arrow"),"\u2193":c.t("down arrow"),"\u2190":c.t("left arrow"),"\u2192":c.t("right arrow"),Ctrl:c.t("Control"),Cmd:c.t("Command"),".":c.t("period"),"[":c.t("left bracket"),"]":c.t("right bracket"),"+":c.t("plus"),"-":c.t("minus"),Esc:c.t("Escape"),Strg:"Steuerung"}[e]||e},h=({label:e,className:t,slim:a})=>{if(!e)return;const n=d[e],r=i()(t,{"c-keyboard_key":!0,"c-keyboard_key__arrow_key":n,"c-keyboard_key--slim":a}),l=p(e),h=c.t("{keyName} key",{keyName:l});return s.a.createElement("div",{role:"img","aria-label":h,className:r},u[e]?s.a.createElement(o.b,{type:u[e],size:a?"inherit":20,inline:a}):e)};h.displayName="KeyboardKey",h.defaultProps={className:void 0,slim:!1}},hQtm:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("XHGt"),o=a("tn36"),l=a("HvGc"),c=a("BUzq"),d=a("b7Ww"),u=a("OISv"),p=a("CaXY"),h=a("uvIC"),m=a("dEjE");r.default.string.isRequired,r.default.string.isRequired,r.default.string,r.default.object;const b={className:void 0,comment:void 0};class pinned_item_file_comment_PinnedItemFileComment extends n.PureComponent{render(){var e=this.props;const t=e.comment,a=e.fileId,n=e.className;if(!t)return null;const r={user:t.user,ts:t.timestamp.toString(),subtype:"file_comment",comment:t,files:[a]};return s.a.createElement(m.a,{msg:r,className:n})}}pinned_item_file_comment_PinnedItemFileComment.displayName="PinnedItemFileComment",pinned_item_file_comment_PinnedItemFileComment.defaultProps=b;var f=Object(i.b)((e,{fileId:t,commentId:a})=>({comment:Object(h.d)(e,t,a)}))(pinned_item_file_comment_PinnedItemFileComment);r.default.object.isRequired,r.default.func.isRequired;class pinned_item_PinnedItem extends n.PureComponent{constructor(e){super(e),Object(o.a)(this,["onFileClick","renderMessage","renderFile","renderFileComment"])}onFileClick(e,t){t&&this.props.previewFile({fileId:t.id,flexOrigin:"details",flexOriginId:"pins"})}renderMessage(e){return e&&e.ts?s.a.createElement(u.a,{msg:e,timestampClickable:!0,onFileClick:this.onFileClick,className:"p-pinned_items__message",flexOrigin:"details",flexOriginId:"pins",blocksContainerContext:p.a.pinned_items}):null}renderFile(e){return e&&e.id?s.a.createElement(d.a,{file:e,onClick:this.onFileClick,showActions:!1}):null}renderFileComment(e){return e&&e.id?s.a.createElement(f,{commentId:e.id,fileId:e.fileId}):null}render(){const e=this.props.pin;return e.type===c.a.FILE?this.renderFile(e):e.type===c.a.FILE_COMMENT?this.renderFileComment(e):this.renderMessage(e)}}pinned_item_PinnedItem.displayName="PinnedItem";t.a=Object(i.b)(null,e=>({previewFile:(...t)=>e(Object(l.c)(...t))}))(pinned_item_PinnedItem)},hZjP:function(e,t,a){},hnus:function(e,t,a){e.exports=a.p+"user_groups-81786af.png"},hqEo:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("q1tI"),i=a.n(r),o=a("aK/h"),l=a("XfeM"),c=a("yHhI"),d=a("dhvi"),u=a("8Duq"),p=a("O6kw"),h=a("vmJv"),m=a("Muja"),b=a("lCmp"),f=a("NFsq"),_=a("ifKl"),g=a("X6iR"),y=a("tn36"),O=a("XHGt"),C=a("TSYQ"),v=a.n(C),E=a("yPgC"),k=a("t85p"),S=a("dxEi"),j=a("quKg"),I=a("nNoG"),w=a("nN8z"),T=a("kOzZ"),N=a("negh"),A=a("qgNY"),R=a("h9dl"),M=a("AzV5"),P=a("aLpA"),x=a("+yap"),L=a("5lF5"),F=a("h9PG"),D=a("CnQG"),B=a("b0Xh");var U=a("1hAG"),q=a("AjwY"),H=a("5mKg"),W=a("oLrU"),G=a("RB1+"),K=a("mLe0"),V=a("H2PH"),z=a("sJy+"),$=a("HOkk"),Y=a("XLFM"),Q=a("plEq"),X=a("O0RF"),J=a("lwWk"),Z=a("Rszm"),ee=a("0f2Y"),te=a("mZe+").b,ae=a("IyaR"),ne=a("Y6FH"),se=a("Hvpu"),re=a("Zwlx"),ie=a("iJ4v"),oe=a("r6UO");a("yWse");const le=new I.b("file-upload"),ce="file-upload-name",de="file-upload-share-with",ue=(o.default.array.isRequired,o.default.string,o.default.func,o.default.bool,o.default.bool,o.default.func,o.default.func,o.default.func,o.default.string,o.default.func,o.default.array,o.default.func,o.default.object,o.default.func,o.default.string,o.default.string,o.default.bool,o.default.number,o.default.string,o.default.bool.isRequired,o.default.bool,o.default.bool,o.default.bool,o.default.string,o.default.string,o.default.bool,o.default.string,o.default.object,o.default.bool,o.default.bool,o.default.bool,o.default.bool,o.default.bool,o.default.string,o.default.object,o.default.object.isRequired,o.default.func,o.default.func,o.default.arrayOf(E.a.File()),o.default.func,o.default.bool,{selectedChannelId:null,setSelectedChannel:_.a,canPostInSelectedChannel:!1,canThread:!1,closeModal:_.a,switchToChannel:_.a,getShareableChannelId:_.a,msgText:"",setMsgText:_.a,msgOps:void 0,setMsgOps:_.a,initialContents:void 0,converMsgOpsToRichTextMessage:_.a,disallowedKeywordInMsgText:null,initialText:"",initialBroadcast:!1,retentionDuration:null,threadTs:null,isStdPlan:!1,isPlusPlan:!1,isEnterprisePlan:!1,channelType:"channel",selectedChannelName:"",fromPaste:!1,teamId:void 0,inputProxy:void 0,isOffline:!1,featureOfflineMode:!1,featureSonicInputs:!1,featureWysiwygComposer:!1,clientToolBar:!1,currentChannelId:void 0,pendingFiles:null,clearPendingFilesForDialog:_.a,metadata:void 0,isLegacyDropboxPicker:!1,processAndAddPendingFiles:_.a,filterFilesForUpload:_.a});class file_upload_dialog_FileUploadDialog extends r.PureComponent{constructor(e){super(e),Object(y.a)(this,["onGo","onCancel","onCancelAll","onCancelDiscard","closeDialog","onTextChange","onFileNameChange","onFilesSelected","onShareWithChange","onBroadcastChange","onEditCollapsedFileNameClick","setFileNameInputRef","clogPricingLinkClick"]),this.fileNameInput=null,this.initialText=this.props.initialText,this.initialContents=this.props.initialContents,this.logger=Object(c.b)(),this.msgInputRef=i.a.createRef(),this.state=s()({confirmClose:!1,confirmCancelAll:!1,submitting:!1},this.getStateForFileAtIndex(0),{broadcast:e.initialBroadcast})}componentDidMount(){var e=this.props;const t=e.files,a=e.clogger;const n=(this.state||0).fileIndex;this.shouldShowStorageWarning()&&a.track(N.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:N.UiAction.IMPRESSION,step:N.UiStep.FILE_UPLOAD,ui_component:N.UiComponent.FILE_STORAGE_LIMIT_BANNER}}}),this.isMultiFileUpload()||t&&this.maybeLoadImagePreview(t[n])}onCancel(e=!1){var t=this.props;const a=t.initialText,n=t.msgText,s=t.msgOps,r=t.initialContents,i=t.featureWysiwygComposer;var o=this.state;const l=o.confirmClose,c=o.confirmCancelAll;let d=0,u=!1;if(n)d=n.length,u=n!==a;else if(i&&s){d=Object(K.b)(s);const e=r?r.contents:[];u=!Object(m.a)(e,s)}return!l&&d>P.i&&u?(this.setState(()=>({confirmClose:!0,confirmCancelAll:e})),!1):(e||!this.hasMoreFiles()||c?this.closeDialog():this.goToNextFile(),!1)}onCancelAll(){return this.onCancel(!0)}onCancelDiscard(){return this.setState(()=>({confirmClose:!1,confirmCancelAll:!1})),!1}onGo(){var e=this.state;const t=e.shareWith,a=e.fileName,n=e.fileIndex,s=e.confirmClose,r=e.broadcast;var i=this.props;const o=i.selectedChannelId,l=i.msgText,c=i.threadTs,d=i.teamId,u=i.pendingFiles,p=i.featureWysiwygComposer;if(this.isGoDisabled())return!1;if(s)return this.onCancel();this.initialText=null,this.initialContents=null;var h=this.props;const m=h.switchToChannel,b=h.files,f=h.getShareableChannelId,_=h.metadata,g=t?Object(W.a)():void 0,y=t?f({channelOrMemberId:o}):Promise.resolve(null);let O;if(p){const e=this.msgInputRef&&this.msgInputRef.current&&this.msgInputRef.current.getWrappedInstance();O=e?e.getTextContents():this.props.msgOps}return y.then(e=>{let s;if(p&&(s=this.props.converMsgOpsToRichTextMessage({msgOps:O,channelId:e,inThread:!!c})),this.isMultiFileUpload()){this.closeDialog(),Object(V.a)(d).uploadFiles({files:u,shareData:{channelId:e,clientMsgId:g,introMessage:t?l:null,blocks:p&&t?s:null,threadTs:e?c:null,broadcast:e&&c?r:null,metadata:_}}).then(()=>{this.logger.info("UPLOAD-DIALOG",`Multi-file upload complete for: ${g}`)}).catch(e=>{this.logger.warn(`Multi-file upload failed for: ${g}; with error ${e}`)}),this.logger.info("UPLOAD-DIALOG",`Beginning multi-file upload for: ${g}`)}else{this.hasMoreFiles()||this.closeDialog();const i=b[n];Object(V.a)(d).uploadFiles({files:[i],shareData:{channelId:e,clientMsgId:g,title:a||this.initialFileName(i),link:i.link,introMessage:t?l:null,blocks:p&&t?s:null,threadTs:e?c:null,broadcast:e&&c?r:null,isBox:i.is_box,isDropbox:i.is_dropbox,metadata:_}})}this.hasMoreFiles()?this.goToNextFile():e&&!c&&m({id:e}),this.setState(()=>({submitting:!1}))}),this.setState(()=>({submitting:!0})),!1}onTextChange({text:e,msgOps:t,overLimit:a}){this.props.featureWysiwygComposer?this.props.setMsgOps(t):this.props.setMsgText(e),this.setState(()=>({overMsgLengthLimit:a}))}onFileNameChange(e){this.setState(()=>({fileName:e,overFileNameLimit:e.length>P.y}))}onFilesSelected(e){const t=u.a;this.props.filterFilesForUpload({selectedFiles:e,channelId:t}).then(e=>{e&&e.length&&this.props.processAndAddPendingFiles({channelId:t,files:e})})}onShareWithChange(e){const t=e.target.checked;this.setState(()=>({shareWith:!!t}))}onBroadcastChange(e){this.setState(()=>({broadcast:e}))}onEditCollapsedFileNameClick(){this.setState(()=>({collapseFileNameInput:!1})),this.fileNameInput.focus()}setFileNameInputRef(e){this.fileNameInput=e}getStateForFileAtIndex(e){const t=this.props.files[e],a=t&&Object(f.a)(t.type,"image");return{fileIndex:e,defaultFileName:this.initialFileName(t),fileName:"",shareWith:!0,previewDataUrl:null,overMsgLengthLimit:!1,overFileNameLimit:!1,exifOrientation:null,previewImageDimensionsRatio:null,collapseFileNameInput:a,broadcast:!1}}getStorageWarning(){var e=this.props;const t=e.isStdPlan,a=e.isPlusPlan,n=e.isEnterprisePlan;if(!this.shouldShowStorageWarning())return null;const s=({text:e})=>i.a.createElement(ee.a,{href:Object(q.k)({entryPoint:"file_upload_dialog"}),target:"_blank",rel:"noopener noreferrer",onClick:this.clogPricingLinkClick,"data-qa":"file-upload-dialog_pricing-link"},e);return t?le.rt("Your workspace has reached the Standard plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,s):a?le.rt("Your workspace has reached the Plus plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,s):n?le.rt("It looks like your organization\u2019s reached the file storage limit. If that sounds wrong, you may want to <a>contact Slack</a>.",null,({text:e})=>i.a.createElement(J.a,{href:"/help/requests/new",target:"_blank"},e)):le.rt("Your free workspace is limited to 5 GB of files. If you upload more files, you\u2019ll lose access to some older ones. To view them again and get more space, <a>upgrade to a paid plan</a>.",null,s)}shouldShowStorageWarning(){var e=this.props;const t=e.overStorageLimit,a=e.files[this.state.fileIndex];return t&&!a.is_dropbox&&!a.is_box&&!a.is_external}clogPricingLinkClick(){this.props.clogger.track(N.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:N.UiAction.CLICK,step:N.UiStep.FILE_UPLOAD,ui_element:N.UiElement.PRICING_LINK,ui_component:N.UiComponent.FILE_STORAGE_LIMIT_BANNER}}})}isMultiFileUpload(){const e=this.props.files;return!Object(b.a)(e,e=>e.is_box||e.is_dropbox)}isMultipleFiles(){return!this.isMultiFileUpload()&&this.props.files.length>1}hasMoreFiles(){if(!this.isMultipleFiles())return!1;const e=this.props.files,t=this.state.fileIndex;return e.length>t+1}goToNextFile(){var e=this.props;const t=e.files,a=e.setMsgText,n=this.state.fileIndex;this.setState(()=>s()({confirmClose:!1},this.getStateForFileAtIndex(n+1)),()=>{this.maybeLoadImagePreview(t[n+1])}),a("")}closeDialog(){var e=this.props;const t=e.initialBroadcast,a=e.threadTs,n=e.featureSonicInputs,s=e.currentChannelId,r=e.featureWysiwygComposer;let i=this.props.inputProxy;if(this.props.closeModal(),this.isMultiFileUpload()&&this.props.clearPendingFilesForDialog(),r&&this.initialContents){if(i||(i=Object(G.a)({viewContext:P.I.MESSAGE_PANE,channelId:s})),!i)return;return i.setContents(this.initialContents),void i.focus()}if(this.initialText){const e=this.initialText;setTimeout(()=>{if(i)i.setText(e),i.setBroadcast(t),i.focus();else if(a)Object(L.f)(e,t);else if(n){const t=Object(G.a)({viewContext:P.I.MESSAGE_PANE,channelId:s});t&&t.setText(e)}else Object(x.e)(e)},10)}}initialFileName(e){return!e.name||this.props.fromPaste?le.t("Pasted image at {date}",{date:Object(w.a)(Date.now()/1e3)}):e.name}isUsingNewDropboxApp(){var e=this.props;const t=e.isLegacyDropboxPicker,a=e.files;return Object(b.a)(a,e=>e.is_dropbox)&&t}isGoDisabled(){var e=this.state;const t=e.submitting,a=e.shareWith,n=e.overMsgLengthLimit,s=e.overFileNameLimit;var r=this.props;const i=r.canPostInSelectedChannel,o=r.threadTs,l=r.canThread,c=r.disallowedKeywordInMsgText,d=r.isOffline,u=r.featureOfflineMode;return t||a&&!i&&!o||a&&o&&!l||a&&!!c||n||s||u&&d}maybeLoadImagePreview(e){if(window.FileReader&&!e.is_box&&!e.is_dropbox)if("string"!=typeof e)try{const a=new FileReader;a.onload=(t=>{const a=t.target.result;Object(g.a)(a,"data:image/")&&this.loadImagePreviewWithOrientation(e,a)}),a.onloadstart=(e=>{e.total>33554432&&(this.logger.info("UPLOAD-DIALOG",`Skipping image preview for large file: ${e.total}`),a.abort())}),a.readAsDataURL(e)}catch(t){this.logger.warn("Error loading upload preview"),this.logger.warn(t)}else this.setState(()=>({previewDataUrl:`data:image/png;base64,${e}`,collapseFileNameInput:!0}))}loadImagePreviewWithOrientation(e,t){(function(e){return new Promise((t,a)=>{const n=Object(c.b)();try{const r=new FileReader;r.onload=(e=>{const a=Object(B.readFromBinaryFile)(e.target.result);a&&"number"==typeof a.Orientation?t(a.Orientation):t(null)}),r.readAsArrayBuffer(e)}catch(s){n.warn("Error reading exif data"),n.warn(s),a(s)}})})(e).then(e=>{if(!e||1===e)return void this.setState(()=>({previewDataUrl:t,collapseFileNameInput:!0}));const a=new Image;a.onload=(()=>{const n=a.width,s=a.height/n;this.setState(()=>({previewDataUrl:t,previewImageDimensionsRatio:s,exifOrientation:e,collapseFileNameInput:!0}))}),a.src=t})}renderBroadcastCheckbox(){var e=this.props;const t=e.threadTs,a=e.canPostInSelectedChannel,n=e.channelType,s=e.selectedChannelName,r=this.state.broadcast;return t&&a?i.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--broadcast"},i.a.createElement(oe.a,{channelType:n,selectedChannelName:s,value:r,onChange:this.onBroadcastChange})):null}renderImagePreview(){var e=this.state;const t=e.previewDataUrl,a=e.previewImageDimensionsRatio,n=e.exifOrientation,s=e.fileName;if(!this.state.previewDataUrl)return null;const r=le.t("Preview of {fileName}",{fileName:s});let o;2===n?o="scaleX(-1)":3===n?o="rotate(180deg)":4===n?o="rotate(180deg) scaleX(-1)":5===n?o=`rotate(90deg) scale(${a}, -${a})`:6===n?o=`rotate(90deg) scale(${a})`:7===n?o=`rotate(90deg) scale(-${a}, ${a})`:8===n&&(o=`rotate(-90deg) scale(${a}, ${a})`);const l={};return o&&(l.transform=o),i.a.createElement("div",{className:"p-file_upload_dialog__section"},i.a.createElement("div",{className:"p-file_upload_dialog__preview"},i.a.createElement("div",{style:l},i.a.createElement("img",{className:"p-file_upload_dialog__preview_image",src:t,alt:r}))))}renderShareWith(){var e=this.props;const t=e.threadTs,a=e.selectedChannelId,n=this.state.shareWith;return t?i.a.createElement(ie.a,{channelId:a,threadTs:t}):i.a.createElement(X.a,{text:le.t("Share with:"),htmlFor:de,type:"inline"},i.a.createElement(Z.a,{id:de,defaultChecked:n,onChange:this.onShareWithChange}))}renderChannelPicker(){var e=this.props;const t=e.selectedChannelId,a=e.setSelectedChannel,n=e.threadTs,s=this.state.shareWith;return n?null:i.a.createElement(ne.a,{initialChannelId:t,onChange:a,isDisabled:!s,dialogType:"file_upload_dialog"})}renderCancelAllButton(){return i.a.createElement(Y.d,{type:"outline",className:"p-file_upload_dialog__footer_cancel_all",onClick:this.onCancelAll,tabIndex:"-1","data-qa":"dialog-cancel-all"},le.t("Cancel All"))}renderMultiFileShareInputs(){return this.isMultipleFiles()?i.a.createElement("div",{className:"p-file_upload_dialog__section"},this.renderShareWith(),this.renderChannelPicker()):null}renderFooterExtra(){return this.isMultipleFiles()?this.renderCancelAllButton():i.a.createElement("div",{className:"p-file_upload_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}renderWarning(){const e=this.getStorageWarning(),t=Object(re.a)(this.props);if(!t&&!e)return null;const a=this.props.overStorageLimit?"info":"warning";return i.a.createElement("div",{className:"p-file_upload_dialog__section","data-qa":"share-dialog_warning"},i.a.createElement(z.d,{type:"inline",level:a},e?i.a.createElement("span",{className:"p-share_dialog__warning_message"},e):null,t))}renderCollapsedFileName(){var e=this.state;const t=e.defaultFileName,a=e.collapseFileNameInput,n=v()("p-file-upload_dialog__preview_file_name",{"p-file-upload_dialog__preview_file_name--hide":!a}),s=le.rt("edit"),r=le.rt("Edit file name: {fileName}",{fileName:t});return i.a.createElement("div",{className:n},i.a.createElement("span",{className:"p-file-upload_dialog__preview_file_name_text"},t),i.a.createElement(ee.a,{className:"p-file-upload_dialog__preview_file_name_edit",onClick:this.onEditCollapsedFileNameClick,tabIndex:a?null:"-1","aria-label":r},s))}renderExpandedFileNameInput(){if(this.isUsingNewDropboxApp())return null;var e=this.state;const t=e.fileName,a=e.defaultFileName,n=e.collapseFileNameInput,s=v()("p-file_upload_dialog__file_name_input",{"p-file_upload_dialog__file_name_input--hide":n});return i.a.createElement(X.a,{text:le.t("File name"),htmlFor:ce,className:s},i.a.createElement(Q.a,{id:ce,name:ce,value:t,maxCharacterLimit:P.y,counterMinimumCharacters:P.K,onChange:this.onFileNameChange,placeholder:a,tabIndex:n?"-1":null,ref:this.setFileNameInputRef}))}renderFileNameInput(){return i.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section_file_name"},this.renderCollapsedFileName(),this.renderExpandedFileNameInput())}renderMultiFileUpload(){return i.a.createElement("div",{className:"p-file_upload_dialog__section"},i.a.createElement(te,{channelId:u.a,onFilesSelected:this.onFilesSelected}))}renderRetentionWarning(){const e=this.props.retentionDuration;return e?i.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--retention_duration"},i.a.createElement("span",null,le.t("Due to your custom file retention policy, this file will be deleted after {duration}",{duration:Object(D.a)(e)}))):null}render(){var e=this.props;const t=e.files,a=e.msgText,n=e.selectedChannelId,s=e.threadTs,r=e.featureOfflineMode,o=e.isOffline,l=e.clientToolBar,c=e.featureWysiwygComposer;var d=this.state;const u=d.fileIndex,p=d.shareWith,h=d.confirmClose,m=le.t("Add a message about the file",{fallbackHash:"76426947fe26fc3fa06b6bf272f55b1b45248641"});let b=le.t("Upload a file",{fallbackHash:"1ed2e7b50fa1dbbf1693d1c38adf270c04db10c6"});this.isMultipleFiles()&&(b=le.t("Upload a file ({number} of {total})",{number:u+1,total:t.length,fallbackHash:"98feccd29dda6dfff23692d85c563aada4877d37"}));const f=v()("p-file_upload_dialog",{"p-file_upload_dialog--multiple":this.isMultipleFiles()&&!h,"p-file_upload_dialog--client_toolbar":l||c}),_=r&&o?i.a.createElement("div",{className:"p-file_upload_dialog__section"},i.a.createElement(z.d,{icon:"cloud-offline",level:"info"},le.rt("<strong>No connection.</strong> You'll be able to upload files as soon as you're back online."))):null;return i.a.createElement($.a,{className:f,title:b,onClose:this.onCancel,onCancel:h?this.onCancelDiscard:this.onCancel,onGo:h?this.onCancel:this.onGo,useSlackScrollbarWithPadding:!0,shouldCloseOnOverlayClick:!h,cancelText:h?le.t("No, keep it"):null,goButtonIsDisabled:this.isGoDisabled(),goButtonText:h?le.t("Yes, discard the message"):le.t("Upload"),footerText:h?le.t("Closing the window will discard your message"):this.renderFooterExtra(),goButtonType:h?"danger":"primary",showCancelButton:h},this.renderWarning(),_,i.a.createElement("div",{className:"p-file_upload_dialog__section"},i.a.createElement(ae.a,{channelId:n,threadTs:s,text:a,initialContents:this.initialContents,onTextChange:this.onTextChange,ariaLabel:m,placeholder:m,enabled:p,focusOnMount:!0,onEnter:this.onGo,enableBroadcastKeywords:!s,maxLines:6,ref:this.msgInputRef})),this.renderBroadcastCheckbox(),this.isMultiFileUpload()?this.renderMultiFileUpload():i.a.createElement(i.a.Fragment,null,this.renderImagePreview(),this.renderFileNameInput(),this.renderMultiFileShareInputs()),this.renderRetentionWarning())}}file_upload_dialog_FileUploadDialog.displayName="FileUploadDialog",file_upload_dialog_FileUploadDialog.defaultProps=ue;const pe=Object(O.b)(function(e,t){const a=Object(U.d)(e),n={overStorageLimit:Object(H.C)(a),isStdPlan:Object(H.z)(a),isPlusPlan:Object(H.x)(a),isEnterprisePlan:Object(H.s)(a)};return s()({},Object(se.b)(e,t),n,{retentionDuration:parseInt(Object(F.a)(e,"file_retention_type"),10)?Object(F.a)(e,"file_retention_duration"):null,teamId:a.id,isOffline:!Object(S.c)(e),featureOfflineMode:Object(k.m)(e,"feature_offline_mode"),featureSonicInputs:Object(k.m)(e,"feature_sonic_inputs"),currentChannelId:Object(h.a)(e),pendingFiles:Object(u.e)(e),clogger:Object(T.a)({state:e}),clientToolBar:"composer_toolbar"===Object(j.c)(e,"composer_toolbar"),isLegacyDropboxPicker:Object(F.a)(e,"dropbox_legacy_picker")})},function(e){return{closeModal:(...t)=>e(Object(d.a)(...t)),switchToChannel:(...t)=>e(Object(A.a)(...t)),getShareableChannelId:(...t)=>e(Object(R.a)(...t)),clearPendingFilesForDialog:(...t)=>e(Object(u.b)(...t)),converMsgOpsToRichTextMessage:(...t)=>e(Object(M.a)(...t)),processAndAddPendingFiles:(...t)=>e(Object(u.g)(...t)),filterFilesForUpload:(...t)=>e(Object(p.a)(...t))}})(file_upload_dialog_FileUploadDialog);var he=Object(se.a)(pe),me=a("a+Oh");const be=Object(l.b)("Takes N files and opens the file upload dialog",(e,t,a)=>{const n=a.files,r=a.threadTs,o=a.inputProxy;if(!n||!n.length)return Object(c.a)({getState:t}).warn("No files passed to openFileUploadDialog"),null;const l=t(),m=t=>{if(!t||!t.length)return null;const c=Object(k.m)(l,"feature_sonic_inputs"),p=Object(me.a)(l),m=Object(h.a)(l),b=function(e,t){if(t){const e=t.getBroadcast();return e&&t.setBroadcast(!1),e}return!(!e||Object(L.a)()!==e)&&Object(L.d)()}(r,o),f=p?null:function(e,{inputProxy:t,featureSonicInputs:a,currentChannelId:n}={}){if(t){const e=t.getText();return e&&t.clear(),e}if(e&&Object(L.a)()===e){const e=Object(L.g)();return e&&Object(L.b)(),e}if(a){const e=Object(G.a)({viewContext:P.I.MESSAGE_PANE,channelId:n}),t=e.getText();return t&&e.clear(),t}const s=Object(x.d)();s&&Object(x.e)("");return s}(r,{inputProxy:o,featureSonicInputs:c,currentChannelId:m}),_=p?function({featureWysiwygComposer:e,currentChannelId:t,inputProxyProp:a}={}){if(!e)return null;const n=a||Object(G.a)({viewContext:P.I.MESSAGE_PANE,channelId:t});if(!n)return null;const s=n.getContents();s&&n.clear();return s}({featureWysiwygComposer:p,currentChannelId:m,inputProxyProp:o}):null;return e(Object(u.h)({files:t})),e(Object(d.e)({element:i.a.createElement(he,s()({},a,{files:t,initialText:f,initialContents:_,initialBroadcast:b,fileSizeExceeded:t.length<n.length}))}))};return e(Object(p.a)({selectedFiles:n})).then(e=>m(e))});be.meta={name:"openFileUploadDialog",key:"actionsOpenFileUploadDialogOpenFileUploadDialog",description:"Takes N files and opens the file upload dialog"};t.a=be},"hr+X":function(e,t,a){},iJ13:function(e,t,a){},iJ4v:function(e,t,a){"use strict";var n=a("BeL+"),s=a("zmn3"),r=a("q1tI"),i=a.n(r),o=(a("aK/h"),a("XHGt")),l=a("nNoG"),c=a("4M+g"),d=a("fYfO"),u=a("hOQf"),p=a("4RH7"),h=a("5lF5"),m=a("hpgS");const b=new l.b("file-upload");function f({label:e,replyCount:t,replyUsers:a,replyUsersCount:n}){return a?i.a.createElement("div",{className:"p-file_upload_dialog__thread_label"},e||b.t("Sharing file in a thread"),i.a.createElement("br",null),i.a.createElement(p.a,{replyCount:t,replyUsers:a,replyUsersCount:n})):null}f.displayName="FileUploadThreadLabel",f.defaultProps={label:void 0,replyCount:void 0,replyUsers:void 0,replyUsersCount:void 0},t.a=Object(o.b)(function(e,{channelId:t,threadTs:a}){let r=Object(d.a)(e,t,a);if(!r){const n=Object(c.e)(e,t);(r=Object(h.c)(n,a))||(r=Object(m.a)(n,a))}if(!r)return{};let i=Object(u.T)(r),o=Object(u.U)(r);return r.replies?(i=Object(s.a)(r.replies,"user"),r.user&&i.push(r.user),o=Object(n.a)(i).length):r.user&&i.push(r.user),{replyCount:Object(u.S)(r),replyUsers:i,replyUsersCount:o}})(f)},ixEi:function(e,t,a){},j4JU:function(e,t,a){},jJ2u:function(e,t,a){e.exports=a.p+"calls-d4bcb6d.png"},jfx7:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("ZSbO");function i(){return s.a.createElement("div",null,s.a.createElement(r.a,null),s.a.createElement("div",{className:"p-channel_sidebar"}),s.a.createElement("div",null))}i.displayName="WorkspaceEmptyState",t.a=i},k0uR:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a("tn36");const s=new class LogBuffer{constructor(){this.buffer=[],Object(n.a)(this,["store","flush","replace"])}store(...e){this.buffer.push(e)}flush(){const e=this.buffer;return this.buffer=[],e}replace(e){this.buffer=e}}},k55U:function(e,t,a){"use strict";a.d(t,"a",function(){return d}),a.d(t,"g",function(){return u}),a.d(t,"d",function(){return p}),a.d(t,"j",function(){return h}),a.d(t,"c",function(){return m}),a.d(t,"b",function(){return b}),a.d(t,"f",function(){return f}),a.d(t,"m",function(){return _}),a.d(t,"l",function(){return g}),a.d(t,"k",function(){return y}),a.d(t,"h",function(){return O}),a.d(t,"i",function(){return C}),a.d(t,"e",function(){return v});var n=a("mrSG"),s=a("rWF5"),r=a("jzln"),i=a("zA5J"),o=a("TM4O"),l=a("yHhI"),c=a("g5qt");const d=e=>{throw new Error("Inconceivable!")};function u({direction:e,type:t,payload:a}){const n=Object(o.a)()?"slack":"call",s="INTER-WINDOW-MESSAGE";(Object(o.a)()?Object(i.a)(s):Object(l.b)({label:s})).info(`${"send"===e?"Sending":"Received"} ${t} ${"send"===e?"to":"from"} the ${n} window${a?`, with payload: ${JSON.stringify(a)}`:""}`)}function p(e){return function(t,a,n){e(a,n),t.sendData({type:a,payload:n})}}function h(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let a="";for(let n=0;n<e;n++){const e=Math.floor(Math.random()*t.length);a+=t.substring(e,e+1)}return a}function m(){let e,t;const a=new Promise((a,n)=>{e=a,t=n});return a.resolve=e,a.reject=t,a}function b(e,t){return f(!!e,t)}function f(e,t){let a;if("boolean"==typeof e){if(e)return!0;a=t}else a=e;if(a||(a="Generic error."),s.l||s.t||r.a)throw Error(`Failed debugCheck in dev: ${a}`);return Object(i.a)("CHECK").error(`Silently continuing after failed debugCheck in prod: ${a}`),!1}function _(e){return JSON.stringify(e,void 0,2)}function g(e,t){Object(c.cc)({window_token:e,bounds:t}),Object(s.F)()&&Object(c.cc)({window_token:e,bounds:t})}function y(e,t,{skipIntermediatePendingRuns:a=!0}={}){let s=!1,r=[];const i=(...o)=>Object(n.b)(this,void 0,void 0,function*(){if(s){a&&(r=[]);const e=m();return r.push({args:o,deferred:e}),e}s=!0;const n=yield t.call(e,...o);s=!1;const l=r.shift();return l&&i(...l.args).then(l.deferred.resolve).catch(l.deferred.reject),n});return i}function O(e,t){return C(e,t.ref)}function C(...e){return t=>{e.forEach(e=>{!function(e){return t=>{"function"==typeof e?e(t):e&&(e.current=t)}}(e)(t)})}}function v({width:e,height:t,top:a,left:n}){return{position:"absolute",width:`${e}px`,height:`${t}px`,top:`${a}px`,left:`${n}px`}}},kFZb:function(e,t,a){"use strict";function n(e,t){return(...a)=>(t(...a),e(...a))}a.d(t,"a",function(){return n})},kFoU:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("q1tI"),i=a.n(r),o=a("XHGt"),l=a("aK/h"),c=a("1hAG"),d=a("A+cF"),u=a("kd6D"),p=a("T00V"),h=a("hUMe");a("HAG/");l.default.string,l.default.string.isRequired,l.default.bool,l.default.object.isRequired;const m={className:void 0,invert:!1};function b({className:e,id:t,invert:a,team:n}){const r=a?u.c.highlightDark:null;return i.a.createElement(d.d,{avatar:e=>i.a.createElement(p.a,s()({},e,{team:n,size:u.a.small,invert:a})),className:e,size:"small",style:r,text:i.a.createElement(h.a,{team:n,invert:a}),"data-team-id":t})}b.displayName="SmallTeamEntity",b.defaultProps=m;t.a=Object(o.b)((e,t)=>{const a=t.team||Object(c.i)(e,t.id);return{team:a,id:a.id}})(b)},kNze:function(e,t,a){},kVk7:function(e,t,a){},kyN7:function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("XHGt"),o=a("TSYQ"),l=a.n(o),c=a("aK/h"),d=a("nNoG"),u=a("Fdc0"),p=a("9E9B"),h=a("zo7m"),m=a("zwKj"),b=a("HvGc"),f=a("od5y"),_=a("XLFM"),g=a("RAhH"),y=a("auxT"),O=a("/m+M"),C=a("dxEi"),v=a("HMjZ"),E=a("2olY"),k=a("negh"),S=a("rGr5"),j=a("ENxx"),I=a("2xgR");a("kVk7");const w=new d.b("member_profile"),T=(c.default.func,c.default.node,c.default.string,c.default.object,c.default.func,c.default.func,c.default.bool,c.default.func,c.default.func,c.default.func,c.default.func,c.default.bool.isRequired,c.default.bool.isRequired,c.default.object,c.default.object,c.default.bool,c.default.func,c.default.func,{autoFillSlashCommand:n.a,children:void 0,className:void 0,member:void 0,onClick:n.a,openEditProfileModal:n.a,showCallButton:!1,showFileList:n.a,showMemberProfile:n.a,startCallByMemberId:n.a,startImByMemberId:n.a,clogger:{track:n.a},callsApp:{video:[],phone:[]},featurePhoneIntegration:!1,onCallClick:n.a,onMessageClick:n.a});function N({autoFillSlashCommand:e,children:t,className:a,member:n,onClick:i,onCallClick:o,onMessageClick:c,openEditProfileModal:d,showCallButton:p,showFileList:h,showMemberProfile:m,startCallByMemberId:b,startImByMemberId:C,isOffline:v,isCallsAllowedByAdmin:E,clogger:I,callsApp:T,featurePhoneIntegration:N}){var A=Object(O.a)();const R=A.featureModernProfileFlexpane,M=A.featureOfflineMode,P=Object(u.D)(n),x=Object(s.useCallback)(({appId:e})=>{b({memberId:n.id,appId:e}),o(),i()},[n.id,i,o,b]),L=Object(u.K)(n),F=Object(u.Ab)(n);if(!R)return null;const D=()=>{I.track(k.EventId.USER_PROFILE_EDIT_PROFILE_CLICK,{edit_profile_button_type:F?"complete":"incomplete"}),d(),i()};let B;if(Object(u.Hb)(n))B=r.a.createElement(_.d,{className:"p-member_profile_buttons__button",onClick:D,type:F?"outline":"primary","data-qa":"member_profile_edit_btn"},w.t("Edit Profile"));else if(Object(u.Ib)(n))B=r.a.createElement(_.d,{className:"p-member_profile_buttons__button",onClick:()=>{const t=w.t("remind",{ns:"chat_commands"});e({commandName:`/${t}`}),i()},type:"outline","data-qa":"member_profile_remind_btn"},w.t("Remind Me"));else if(!Object(u.xb)(n))if(p)if(Object(u.db)(n)&&E){const e=Object(j.e)(N,T,P)?r.a.createElement("div",{className:"display_flex p-member_profile_buttons__button_body"},r.a.createElement("div",{className:"p-member_profile_buttons__button_body_label"},w.t("Call")),r.a.createElement("div",{className:"p-member_profile_buttons__button_body_icon"},r.a.createElement(f.b,{"data-qa":"call_icon_chevron_down",className:"p-classic_nav__model__button--chevron",type:"chevron_down",inline:!0}))):w.t("Call"),t=r.a.createElement(_.d,{className:"p-member_profile_buttons__button",onClick:Object(j.e)(N,T,P)?null:x,type:"outline","data-qa":"member_profile_call_btn",disabled:M&&v,"aria-label":M&&v?w.t("Go online to start a call"):w.t("Call {name}",{name:L})},e),a=M?r.a.createElement(y.a,{tooltipLabel:w.t("Go online to start a call")}):null;B=M&&v?r.a.createElement(g.c,{tip:a},r.a.createElement("span",{className:"p-member_profile_buttons__button_disabled_container"},t)):t,B=Object(j.e)(N,T,P)?r.a.createElement(S.a,{memberPhoneNumber:P,onMenuItemSelected:x},B):B}else B=r.a.createElement(_.d,{className:"p-member_profile_buttons__button",onClick:()=>{h({user:n.id}),i()},type:"outline","data-qa":"member_profile_files_btn"},w.t("View Files"));else B=r.a.createElement(_.d,{className:"p-member_profile_buttons__button",onClick:()=>{m({memberId:n.id}),i()},type:"outline","data-qa":"member_profile_profile_btn"},w.t("View Profile"));return r.a.createElement("div",{className:l()(a,"p-member_profile_buttons")},r.a.createElement(_.d,{"aria-label":w.t("Message {name}",{name:Object(u.K)(n)}),className:"p-member_profile_buttons__button",onClick:()=>{C({memberId:n.id}),c(),i()},type:"outline","data-qa":"member_profile_message_btn"},w.t("Message")),B,t)}N.displayName="MemberProfileButtons",N.defaultProps=T;const A={autoFillSlashCommand:(...e)=>Object(m.a)(...e),openEditProfileModal:(...e)=>Object(h.a)(...e),showFileList:(...e)=>Object(b.g)(...e),showMemberProfile:(...e)=>Object(b.j)(...e),startCallByMemberId:(...e)=>Object(I.a)(...e),startImByMemberId:(...e)=>Object(p.startImByMemberId)(...e)};t.a=Object(i.b)(e=>({isOffline:!Object(C.c)(e),isCallsAllowedByAdmin:Object(v.g)(e),callsApp:Object(j.d)(e),featurePhoneIntegration:Object(E.b)(e)}),A)(N)},l31K:function(e,t,a){},lKeU:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("cZF4"),s=a("Muja"),r=a("0VPD"),i=a("Gogr");function o(){const e=Object.keys(Object(i.c)("teams")||{}),t=Object.keys(Object(i.c)("prevTeams")||{}),a=Object(n.a)(e,t),o=Object(i.c)("orderedTeamIds"),l=Object(n.a)(Object(r.a)(o,a),e);return Object(s.a)(l,o)||Object(i.h)("orderedTeamIds",l),l}},lV17:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("ifKl"),i=a("q1tI"),o=a.n(i),l=a("aK/h"),c=a("TSYQ"),d=a.n(c),u=a("XHGt"),p=a("lhZz"),h=a("brL+"),m=a("t85p"),b=a("s/0T"),f=a("/gpl"),_=a("vmJv"),g=a("YSKj"),y=a("iTOt");var O=e=>{const t=Object(y.c)(e),a=t.entityId,n=t.tabId;if(t&&a&&n&&Object(g.a)(n,a,e))return t&&t.tabId},C=a("g+Y+"),v=a("zoXk"),E=a("ajyX"),k=a("hgYl"),S=a("Tc5z"),j=a("6Jf9"),I=a("UYUI"),w=a("dz01"),T=a("oRCd"),N=a("V18M"),A=a("qgOg"),R=a("Fwh9"),M=a("Lev8"),P=a("bPB8"),x=a("nNoG"),L=a("RYr5"),F=a("kme9"),D=a("NYva"),B=a("4M+g"),U=a("fOe4"),q=a("6kok"),H=a("2jER"),W=a("WeBd"),G=a("BA81");const K=new x.b("app_space"),V=(l.default.string.isRequired,l.default.string,l.default.number,l.default.func.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,{tab:void 0,badgeCount:0,isEnabled:!1,isAppHomeStateLoading:!1,isHomeEnabled:!1,isMessagesEnabled:!0,callAppHomeOpenEventByChannelId:r.a,clogDMOpen:r.a});class model_info_app_im_tabs_ModelInfoAppImTabs extends i.PureComponent{constructor(e){super(e),this.handleTabChange=this.handleTabChange.bind(this),this.focus=this.focus.bind(this),this.tabsRef=o.a.createRef()}componentDidMount(){this.maybeRedirectToNewTab()}componentDidUpdate(e){(!this.props.isAppHomeStateLoading&&e.isAppHomeStateLoading||this.props.channelId!==e.channelId)&&this.maybeRedirectToNewTab()}setTabId(e,{shouldReplaceState:t}={}){var a=this.props;const n=a.tab,s=a.channelId;n!==e&&("messages"!==e?this.props.setTab({tabId:e,channelId:s,shouldReplaceState:t}):this.props.setTab({channelId:s,shouldReplaceState:t}))}getValidTabs(){const e=this.props.badgeCount;return Object(P.a)([this.props.isHomeEnabled?{id:k.b.APP,title:K.t("Home"),content:o.a.createElement(i.Fragment,null),"data-qa":"home"}:null,this.props.isMessagesEnabled?{id:k.b.MESSAGES,title:o.a.createElement("span",null,K.t("Messages"),e?o.a.createElement(W.b,{className:"p-classic_nav__model__title__name__tabs__badge",count:e,style:W.a.red}):null),content:o.a.createElement(i.Fragment,null),"data-qa":"messages"}:null,{id:k.b.ABOUT,title:K.t("About"),content:o.a.createElement(i.Fragment,null),"data-qa":"about"}])}dispatchAppHomeOpenEvent(e){const t=this.props.channelId;let a=e||"messages";return"app"===a&&(a="home"),this.props.callAppHomeOpenEventByChannelId({channelId:t,appHomeSection:a})}handleTabChange(e){this.setTabId(e),this.dispatchAppHomeOpenEvent(e)}currentTabIsValid(){const e=this.props.tab;return!!this.getValidTabs().find(t=>t.id===e)}maybeRedirectToNewTab(){var e=this.props;const t=e.channelId,a=e.isEnabled,n=e.isAppHomeStateLoading;if(!a)return;if(n)return;let s=this.props.tab;this.currentTabIsValid()||(s=this.getValidTabs()[0].id,this.setTabId(s,{shouldReplaceState:!0})),this.props.clogDMOpen({channelId:t,tabId:s}),this.dispatchAppHomeOpenEvent(s)}focus(){this.tabsRef&&this.tabsRef.current.focus()}render(){var e=this.props;const t=e.tab,a=e.isEnabled,n=e.isAppHomeStateLoading;if(!a||n)return null;const s=this.getValidTabs(),r=this.currentTabIsValid()?t:void 0,i=s.map(e=>e.id).join(","),l=d()("p-classic_nav__model__title__name__tabs__workspace",{"p-classic_nav__model__title__name__tabs__workspace--messages":"messages"===r});return o.a.createElement("div",{className:l},o.a.createElement(G.a,{key:i,currentTabId:r,defaultTabId:s[0].id,tabs:s,onTabChange:this.handleTabChange,ref:this.tabsRef}))}}model_info_app_im_tabs_ModelInfoAppImTabs.displayName="ModelInfoAppImTabs",model_info_app_im_tabs_ModelInfoAppImTabs.defaultProps=V;const z=Object(H.a)(model_info_app_im_tabs_ModelInfoAppImTabs,"ModelInfoAppImTabs",{index:1});var $=Object(u.b)(e=>{const t=Object(_.a)(e),a=O(e)||"messages",n=Object(q.lb)(e,t);var s=Object(U.a)(e);const r=s.isLoading,i=s.isHomeEnabled,o=s.isMessagesEnabled,l=Object(B.e)(e,t),c=o||Object(w.j)(e)&&"messages"===a||l&&Object(q.V)(l)||Object(q.y)(e,t);return{channelId:t,tab:a,badgeCount:l?Object(B.d)(e,l):0,isEnabled:n,isAppHomeStateLoading:r,isHomeEnabled:i,isMessagesEnabled:c}},e=>({setTab:(...t)=>e(Object(D.a)(...t)),callAppHomeOpenEventByChannelId:(...t)=>e(Object(L.b)(...t)),clogDMOpen:(...t)=>e(Object(F.a)(...t))}))(z),Y=a("Wy5O"),Q=a("m4nM"),X=a("G3Sk"),J=a("+uGN"),Z=a("TGBA"),ee=a("1zbP"),te=a("Qrgz"),ae=a("fYfO");function ne(e,{includeAllTeams:t}={}){const a=Object(Z.a)(Object(C.e)(e)),n=[];return a.forEach(a=>{if(Object(J.p)(a))n.push(a);else{var s=Object(J.b)(a)||{};const r=s.channelId,i=s.threadTs,o=Object(B.e)(e,r);if(!t&&Object(q.db)(o))return;if(Object(q.Ob)(o))return;if(Object(q.Y)(o))return;if(!Object(q.ob)(o))return;if(i&&!Object(te.q)(e,r))return;if(!i&&!Object(te.p)(e,r))return;if(i&&Object(m.m)(e,"feature_unknown_messages")){const t=Object(ae.a)(e,r,i);if(Object(ee.e)(t))return}n.push(a)}}),n}var se=a("7EGn"),re=a("Smdl"),ie=a("kOzZ"),oe=a("ayyL"),le=a("bDqM"),ce=a("PXln"),de=a("negh"),ue=a("rWF5"),pe=a("c8iJ"),he=a("Yd+W"),me=a("1zgd");function be(e,t){return"completed"===e.state?"completed"===t.state?0:1:"completed"===t.state?-1:0}a("+9CW");class welcome_row_WelcomeRow extends i.Component{render(){var e=this.props;const t=e.title,a=e.subtitle,n=d()("welcome-row__title",{margin_bottom_50:!!a,margin_bottom_75:!a});return o.a.createElement("div",{className:"welcome-row margin_left_125 margin_right_125 margin_top_150 margin_bottom_200"},t?o.a.createElement("div",{className:n},o.a.createElement("h3",{className:"normal"},t)):null,a?o.a.createElement("div",{className:"margin_bottom_75"},o.a.createElement("p",null,a)):null,o.a.createElement("div",null,this.props.children))}}welcome_row_WelcomeRow.displayName="WelcomeRow";var fe=a("QOdn"),_e=a("XLFM");a("vv9w");const ge=o.a.createContext({});function ye(){return e=>{class WithVisibilityLogger extends i.Component{constructor(){super(...arguments),this.renderWithConsumer=(({addElementToVisibilityLogging:t,removeElementFromVisibilityLogging:a})=>o.a.createElement(e,s()({addElementToVisibilityLogging:t,removeElementFromVisibilityLogging:a},this.props)))}render(){return o.a.createElement(ge.Consumer,null,this.renderWithConsumer)}}return WithVisibilityLogger.displayName="WithVisibilityLogger",WithVisibilityLogger.displayName=`WithVisibilityLogger(${e.displayName||"Component"})`,WithVisibilityLogger}}var Oe=Object(u.b)(function(e){return{items:Object(oe.g)(e),isFlexpaneOpen:Object(v.j)(e),clogger:Object(ie.a)({state:e}),pageViewingSessionId:Object(oe.i)(e),iteration:Object(oe.d)(e)}})(ye()(e=>{const t=e.isFlexpaneOpen,a=e.clogger,n=e.pageViewingSessionId,s=e.iteration,r=e.addElementToVisibilityLogging,l=e.removeElementFromVisibilityLogging;var c=e.workflowTask;const u=c.subtype,p=c.state,h=e.onButtonClicked,m=e.bodyCopy,b=e.buttonCopy,f=e.clogElementName,_=e.buttonQa,g=e.items,y=e.children,O=function(e,t){return e.content.workflow.tasks.filter(me.a).sort(be).findIndex(e=>e.subtype===t)+1}(g.find(e=>"workflow"===e.type),u),C=Object(i.useRef)(null);Object(i.useEffect)(()=>(r({element:C.current,uiContext:{ui_element:de.UiElement[`WELCOME_PLACE_ACTION_${u.toUpperCase()}`],ui_properties:{element_value:p,element_type:de.ElementType.BUTTON,element_name:f},step_variant:s}}),()=>{l(C.current)}));const v="completed"===p,E=d()("c-workflow-item-card__number bold",{complete:v}),k=v?null:o.a.createElement(_e.d,{disabled:v,type:"outline",size:"medium",onClick:()=>{p!==he.c.Completed&&(h(),a.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.CLICK,ui_element:de.UiElement[`WELCOME_PLACE_ACTION_${u.toUpperCase()}`],ui_properties:{element_value:p,element_type:de.ElementType.BUTTON,element_name:f}},welcome_place:{welcome_session_id:n}}}))},"data-qa":_},b),S=!!y,j=S?o.a.createElement("div",{className:"c-workflow-item-card__children"},y):o.a.createElement("div",{className:"c-workflow-item-card__section"},o.a.createElement("div",{className:"full_width"},k)),I=d()("c-workflow-item-card",{complete:v,flexpaneOpen:t,hasChildren:S});return o.a.createElement("div",{className:I,ref:C},o.a.createElement("div",{className:"c-workflow-item-card__section"},o.a.createElement("div",{className:E},v?o.a.createElement("i",{"aria-hidden":"true",className:"c-icon c-icon--check-small c-icon--inline"}):O),o.a.createElement("div",null,o.a.createElement("p",null,m))),j)}));const Ce=(e,t,a)=>e[t][a],ve=new x.b("welcome_place"),Ee={updateActionStateAndReload:le.h,openChannelBrowser:fe.a};var ke=Object(u.b)(function(e){return{userHasAvailableChannels:Object(B.q)(e).length>Object(B.r)(e).length}},Ee)(e=>{const t=e.userHasAvailableChannels,a=e.workflowTask;var n=e.workflowTask;const s=n.state,r=n.user_task_id,i={body:ve.rt("<b>See what people are talking about</b> in your team\u2019s channels.",{note:"Incomplete state copy for fourth action step. Most important info should be bolded."}),button:ve.rt("Join Channels",{note:"Button label for incomplete state of fourth step."}),tip:null},l={body:o.a.createElement("b",null,ve.rt("Joined a channel",{note:"Completed state copy, bolded, no punctuation"})),button:ve.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:ve.rt("Tip: To find more channels later \u2014 or create new ones \u2014 click on <b>Channels</b> in the sidebar. ",{note:"Completed state body copy conveying a tip about how to return to the channel browser in the future; use bolding on the word \u201cChannels\u201d."})},c={[he.c.Pending]:i,[he.c.InProgress]:i,[he.c.Completed]:l},d=s===he.c.Completed||t?Ce(c,s,"button"):ve.t("Browse Channels",{ns:"channel_browser",fallbackHash:"f3783ed57f3ec287bdc59897500c8d674a2f1ec8"}),u=Ce(c,s,"body");return o.a.createElement(Oe,{workflowTask:a,onButtonClicked:()=>{t?e.updateActionStateAndReload({userTaskId:r,state:he.c.InProgress}):e.updateActionStateAndReload({userTaskId:r,state:he.c.Completed}),e.openChannelBrowser()},buttonCopy:d,bodyCopy:u,buttonQa:"wp_join_channel_button"})}),Se=a("1hAG");const je=new x.b("welcome_place"),Ie={updateActionStateAndReload:le.h};var we=Object(u.b)(function(e){return{currentTeam:Object(Se.d)(e)||{name:""}}},Ie)(e=>{const t=e.currentTeam.name,a=e.workflowTask;var n=e.workflowTask;const s=n.state,l=n.user_task_id;Object(i.useEffect)(()=>{s!==he.c.Completed&&e.updateActionStateAndReload({userTaskId:l,state:he.c.Completed})});const c={body:je.rt("<b>Joined {workspaceName},</b> your team\u2019s Slack workspace",{workspaceName:t,note:"Completed state copy for first action step. Should be personalized with their workspace name but also expose them to the term \u201cworkspace.\u201d Use bolding for the most important information. Note: No punctuation at the end."}),button:je.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null},d={body:je.rt("<b>Joined {workspaceName},</b> your team\u2019s Slack workspace",{workspaceName:t,note:"Completed state copy for first action step. Should be personalized with their workspace name but also expose them to the term \u201cworkspace.\u201d Use bolding for the most important information. Note: No punctuation at the end."}),button:je.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null},u={[he.c.Pending]:c,[he.c.InProgress]:c,[he.c.Completed]:d},p=Ce(u,s,"button"),h=Ce(u,s,"body");return o.a.createElement(Oe,{workflowTask:a,onButtonClicked:r.a,buttonCopy:p,bodyCopy:h,buttonQa:"wp_see_welcome_place_button"})}),Te=a("r31G"),Ne=a("GaFD"),Ae=a("Evpj");const Re=new x.b("welcome_place"),Me={updateActionStateAndReload:le.h,promptForPermissionAndSetPref:Te.c};var Pe=Object(u.b)(function(e){return{currentTeam:Object(Se.d)(e)||{name:""}}},Me)(e=>{const t=e.workflowTask;var a=e.workflowTask;const n=a.state,r=a.user_task_id,l=Object(Ae.a)();Object(i.useEffect)(()=>{n!==he.c.Completed&&Object(Ne.e)()&&e.updateActionStateAndReload({userTaskId:r,state:he.c.Completed})});const c={body:Re.rt("<b>Get notified</b> when a teammate sends you a message or mentions your name.",{note:"Incomplete state copy for third action step. Most important info should be bolded."}),button:Re.rt("Turn On Notifications",{note:"Button label for incomplete state of third step. This should not convey customization, just enablement."}),tip:null},d={body:"denied"===l?Re.rt("You've disallowed notifications in your browser. You'll need to open your browser preferences to change that.",{note:"Completed state copy, bolded, no punctuation",fallbackHash:"1a4db9df0870ea9d3249727659a462c79ca89790",fallbackHashNs:"prefs"}):o.a.createElement("b",null,Re.rt("Turned on notifications",{note:"Completed state copy, bolded, no punctuation"})),button:Re.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null},u={[he.c.Pending]:c,[he.c.InProgress]:c,[he.c.Completed]:d},p="default"===l,h=p?he.c.InProgress:n,m=Ce(u,h,"button"),b=Ce(u,h,"body");return"na"!==l?o.a.createElement(Oe,{workflowTask:s()(s()({},t),{state:p?he.c.InProgress:t.state}),onButtonClicked:()=>{e.updateActionStateAndReload({userTaskId:r,state:he.c.InProgress}),e.promptForPermissionAndSetPref().then(()=>{e.updateActionStateAndReload({userTaskId:r,state:he.c.Completed})})},buttonCopy:m,bodyCopy:b,buttonQa:"wp_enable_notif_button"}):null}),xe=a("5mKg");const Le=new x.b("welcome_place"),Fe={[he.a.Gdrive]:{name:"Google Drive",appId:ue.l?"A061CBSHF":"A6NL8MJ6Q"}},De=ue.l?"/apps/category/At06175UHW-file-management":"/apps/category/At0EFRCDPW-file-management",Be="utm_medium=in-prod&utm_source=in-prod&utm_campaign=d_in-prod_in-prod_all__welcome",Ue={updateActionStateAndReload:le.h,openAuthenticatedUrlInBrowser:xe.P};var qe=Object(u.b)(function(e){var t=Object(oe.b)(e);const a=t.auth_url,n=t.type,s=t.is_installed_on_team;return{team:Object(Se.d)(e),fileManagementAuthUrl:a,fileManagementType:n,isFileManagementAppInstalledOnTeam:s}},Ue)(e=>{const t=e.workflowTask;var a=e.workflowTask;const n=a.state,s=a.user_task_id,r=e.team,i=e.fileManagementType,l=e.fileManagementAuthUrl,c=e.isFileManagementAppInstalledOnTeam;let d,u;const p=Fe[i];if(p){const e=p.name;d={body:Le.rt("<b>Connect to {fileManagementAppName}</b> to easily share and collaborate on files with your team.",{fileManagementAppName:e,note:"Incomplete state copy for file management step. Most important info should be bolded. fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive"}),button:Le.rt("Connect to {fileManagementAppName}",{fileManagementAppName:e,note:"Button label for incomplete state of file management step. fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive."}),tip:null},u={body:o.a.createElement("b",null,Le.rt("Connected to {fileManagementAppName}",{fileManagementAppName:e,note:"Completed state copy, bolded, no punctuation"})),button:Le.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:Le.rt("Tip: To share or collaborate on {fileManagementAppName} files without leaving Slack, click on the <b>paperclip icon</b> next to the message field.",{fileManagementAppName:e,note:'Completed state body copy conveying a tip about how to use the file management integration in Slack; use bolding on the words "paperclip icon". fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive.'})}}else d={body:Le.rt("<b>Connect your file management tools</b> to easily share and collaborate on files with your team.",{note:"Incomplete state copy for file management step when user is not associated with a GSuite/Office 365 enterprise suite. Most important info should be bolded."}),button:Le.rt("Browse Apps",{note:"Button label for incomplete state of file management step. Links to file management section of the App Directory."}),tip:null},u={body:o.a.createElement("b",null,Le.rt("Browsed the App Directory",{note:"Completed state copy, bolded, no punctuation"})),button:Le.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null};const h={[he.c.Pending]:d,[he.c.InProgress]:d,[he.c.Completed]:u},m=Ce(h,n,"button"),b=Ce(h,n,"body");return o.a.createElement(Oe,{workflowTask:t,onButtonClicked:()=>{p?(l&&c?window.open(l):e.openAuthenticatedUrlInBrowser(r,`apps/${p.appId}?${Be}`),e.updateActionStateAndReload({userTaskId:s,state:he.c.InProgress})):(e.openAuthenticatedUrlInBrowser(r,`${De}?${Be}`),e.updateActionStateAndReload({userTaskId:s,state:he.c.Completed}))},buttonCopy:m,bodyCopy:b,clogElementName:i,buttonQa:"wp_file_management_button"})});function He(e,t=!0){if("string"!=typeof e)throw new Error(`String required for capitalization; type ${typeof e} given`);let a=e.slice(1);return t&&(a=a.toLowerCase()),`${e.charAt(0).toUpperCase()}${a}`}const We=new x.b("welcome_place"),Ge={updateActionStateAndReload:le.h};var Ke=Object(u.b)(function(){return{}},Ge)(e=>{const t=e.workflowTask;var a=e.workflowTask;const n=a.state,s=a.user_task_id;Object(i.useEffect)(()=>{Object(ue.v)()&&n!==he.c.Completed&&e.updateActionStateAndReload({userTaskId:s,state:he.c.Completed})});const r=Object(ue.j)(),l={body:We.rt("<b>Download the desktop app</b> to get back to Slack swiftly",{note:"Completed state copy for first action step. Use bolding for the most important information. Note: No punctuation at the end."}),button:We.rt("Get Slack for {operatingSystem}",{note:"Button label for pending state of the desktop app download card. operatingSystem refers to the current operating system that the user is on (Mac, Windows, or Linux).",operatingSystem:He(r)}),tip:null},c={body:We.rt("<b>Downloaded the desktop app</b>",{note:"Completed state copy for first action step. Use bolding for the most important information. Note: No punctuation at the end."}),button:We.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null},d={[he.c.Pending]:l,[he.c.InProgress]:l,[he.c.Completed]:c},u=Ce(d,n,"button"),p=Ce(d,n,"body");return o.a.createElement(Oe,{workflowTask:t,onButtonClicked:()=>{n===he.c.Pending&&e.updateActionStateAndReload({userTaskId:s,state:he.c.InProgress}),window.open("https://slack.com/get?utm_medium=in-prod&utm_source=in-prod&utm_campaign=d_in-prod_in-prod_all__welcome")},buttonCopy:u,bodyCopy:p,buttonQa:"wp_desktop_app_button"})}),Ve=a("U/ze"),ze=a("DTfP"),$e=a("hOQf"),Ye=a("8dKT");const Qe=Object(Ve.b)((e,t,a=3)=>{const n=Object(ze.f)(e,t);return{slice:n,messages:(n?n.timestamps:[]).map(a=>Object(ae.a)(e,t,a)).filter(t=>!(Object(Ye.a)(t.subtype)||Object($e.bb)(t)||Object($e.fb)(t)||Object($e.X)(e,t)||Object($e.wb)(t)||Object($e.sb)(t)||Object($e.qb)(t))).slice(-1*Math.abs(a))}});Qe.meta={name:"getLastHumanMessages",key:"channelHistoryStoreGetLastChannelMessagesGetLastHumanMessages"};const Xe=Object(Ve.b)((e,t)=>Qe(e,t,1).messages.length>0);Xe.meta={name:"doesChannelHaveMessages",key:"channelHistoryStoreGetLastChannelMessagesDoesChannelHaveMessages"};var Je=a("Fdc0"),Ze=a("0f2Y"),et=a("O/xh"),tt=a("sk9p"),at=a.n(tt),nt=a("bcDH"),st=a("aXcD"),rt=a("a+Oh"),it=a("OF9j"),ot=a("GxtX"),lt=a("BeL+"),ct=a("lE2N"),dt=a("yIs4"),ut=a("uKXT"),pt=a("ZP0B"),ht=a("zmn3"),mt=a("XfeM"),bt=a("JHHQ"),ft=a("7tsZ"),_t=a("fAc/"),gt=a("BUzq"),yt=a("PbVc"),Ot=a("yHhI"),Ct=a("ZAxE"),vt=a("n74X"),Et=a("ZS+m"),kt=a("oTSI"),St=a("btvA"),jt=a("vhAc");const It=(e,t)=>((e,t)=>(Object(Ot.a)({teamId:e}).info("PLATFORM-CHANNEL-ACTIONS",`fetching channel actions for channel ${t}`),Object(p.dispatchForTeamId)(e,Object(jt.b)({resourceType:"channel",resourceId:t})).then(e=>e.map(e=>({appId:Object(se.a)(e,"app.app_id"),id:Object(se.a)(e,"action_id"),name:Object(se.a)(e,"name"),description:Object(se.a)(e,"description"),type:Object(se.a)(e,"type"),app:Object(se.a)(e,"app"),channelId:t})))))(e,t).then(a=>{wt().markObjectsAsFresh(e,[t]),Object(p.dispatchForTeamId)(e,Object(ft.a)({channelId:t,actions:a}))}),wt=Object(kt.a)(()=>new St.b({fetch:(e,t)=>Promise.map(t,t=>It(e,t)),isEnabled:()=>!0})),Tt=Object(mt.b)("Mark actions for channelIds as stale",(e,t,a)=>{const n=wt(),s=t(),r=Object(h.b)(s);n.markObjectsAsStale(r,a)});Tt.meta={name:"markChannelActionsAsStaleForChannels",key:"channelActionsStoreConditionalFetchingMarkChannelActionsAsStaleForChannels",description:"Mark actions for channelIds as stale"},Tt.propTypes=l.default.arrayOf(l.default.string).isRequired;const Nt=(e,t)=>{wt().maybeRefetch(e,t)},At=Object(Ve.b)(e=>e&&e.channelActions||{});At.meta={name:"selectChannelActionsState",key:"channelActionsStoreSelectorsSelectChannelActionsState"};const Rt=Object(Et.a)(At,(e,t)=>t,(e,t)=>{return e.actions[t]||null}),Mt=Object(Et.a)(At,(e,t)=>t,(e,t)=>{const a=e.actionIdsByChannelId[t];return Array.isArray(a)?a:[]}),Pt=Object(Et.a)(Mt,At,(e,t)=>{const a=t.actions;return e?e.map(e=>a[e]).filter(e=>void 0!==e):[]}),xt=Object(Et.a)(At,(e,t)=>t,(e,t)=>{const a=e.actionCountByChannelId;return a&&a[t]||0}),Lt=Object(Ve.b)((e,t)=>{const a=At(e).actionCountByChannelId;return!!a&&Object(dt.a)(a[t])});Lt.meta={name:"selectChannelActionCountIsKnownForChannelId",key:"channelActionsStoreSelectorsSelectChannelActionCountIsKnownForChannelId"};const Ft=Object(Et.a)(h.b,xt,Pt,(e,t)=>t,(e,t,a,n)=>(t>0&&Nt(e,n),a)),Dt=Object(mt.b)("Helper for handling history",(e,t,{oldest:a,latest:n,channelId:s,msgs:r,hasMore:i,pinCount:o,channelActionsCount:l,isLimited:c,deleted:d}={})=>{const u=Object(ht.a)(r,"ts");if(e(a||n?Object(bt.a)({msgs:r,channelId:s,oldest:a,latest:n,hasMore:i,isLimited:c,loading:!1,deleted:d}):Object(bt.a)({msgs:r,channelId:s,isLimited:c,latest:Object(pt.a)(u),oldest:Object(ut.a)(u),hasMore:{hasMoreStart:i,hasMoreEnd:!1},loading:!1,deleted:d})),Object(dt.a)(o)&&e(Object(gt.r)({channelId:s,count:o})),Object(dt.a)(l)){const a=t(),n=xt(a,s);Lt(a,s)&&n===l||(e(Tt([s])),e(Object(ft.d)({channelId:s,count:l})))}});Dt.meta={name:"historyHandler",key:"messagePaneStoreFetchHistoryHistoryHandler",description:"Helper for handling history"},Dt.propTypes={oldest:l.default.string,latest:l.default.string,channelId:l.default.string,msgs:l.default.array,hasMore:l.default.oneOfType([l.default.object,l.default.bool]),pinCount:l.default.number,channelActionsCount:l.default.number,isLimited:l.default.bool,deleted:l.default.array};const Bt=Object(mt.b)("Fetch conversation history",(e,t,{channelId:a,oldest:n=null,latest:r=null,reason:i="message-pane-store/fetchHistory"}={})=>{if(!a)return!1;const o=t();if(Object(_t.d)(o,a))return!1;if(Object(Ot.a)({getState:t}).info("HISTORY-FETCH",`Fetching history for message pane: ${a} oldest: ${n} latest: ${r}`),r&&n){const t=e(Object(Ct.b)({channelId:a,oldest:null,latest:r,reason:i})),s=e(Object(Ct.b)({channelId:a,oldest:n,latest:null,reason:i})),o=Promise.all([t,s]).then(t=>{var s=t[0];const i=s.msgs,o=s.hasMore,l=s.isLimited,c=s.pinCount,d=s.channelActionsCount,u=s.deleted;var p=t[1];const h=p.msgs,m=p.hasMore,b=p.deleted,f=Object(ct.a)(i.concat(h),"ts"),_=Object(lt.a)(Object(ot.a)(u,b)),g=Object(ht.a)(f,"ts");e(Dt({channelId:a,msgs:f,isLimited:l,pinCount:c,channelActionsCount:d,hasMore:{hasMoreStart:o,hasMoreEnd:m},oldest:Object(ut.a)([n,Object(ut.a)(g)]),latest:Object(pt.a)([r,Object(pt.a)(g)]),deleted:_}))}).catch(t=>{Object(vt.c)(t,`Failed to fetch history for ${a}`,"message_pane_history_fetch_fail"),e(Object(_t.c)({channelId:a}))});return e(Object(_t.f)({channelId:a,loadingOlder:!0,request:o})),o}r&&e(Object(yt.d)());const l=e(Object(Ct.b)({channelId:a,oldest:n,latest:r,reason:i})).then(t=>{e(Dt(s()({},t,{oldest:n,latest:r,channelId:a})))}).catch(t=>{Object(vt.c)(t,`Failed to fetch history for ${a}`,"message_pane_history_fetch_fail"),e(Object(_t.c)({channelId:a}))});return e(Object(_t.f)({channelId:a,loadingOlder:!!r,request:l})),l});Bt.meta={name:"fetchHistory",key:"messagePaneStoreFetchHistoryFetchHistory",description:"Fetch conversation history"},Bt.propTypes={channelId:l.default.string.isRequired,oldest:l.default.string,latest:l.default.string,reason:l.default.string};var Ut=Bt,qt=a("eglI");a("F5ou");const Ht=new x.b("welcome_place"),Wt=({inviterUsername:e,hasMessagesInChannel:t,isDm:a})=>{return[{id:"JUST_ARRIVED",buttonText:Ht.t("\ud83d\udc83 Just arrived!"),isVisible:!!t||!!a},{id:"ROLL_CALL",buttonText:Ht.t("\ud83d\ude4b Roll call! Who else is here?"),isVisible:!t&&!a},{id:"IM_HERE",buttonText:Ht.t("\ud83d\udc4b I\u2019m here! What\u2019d I miss?"),isVisible:!e&&!a},{id:"THANKS_FOR_THE_INVITE",buttonText:Ht.rt("\ud83d\udc4b Thanks for the invite, <a>{username}</a>!",{username:e}),prefillText:Ht.t("\ud83d\udc4b Thanks for the invite, {username}!",{username:e}),isVisible:!!e&&!a},{id:"THANKS_FOR_THE_INVITE_DM",buttonText:Ht.t("\ud83d\udc4b Thanks for the invite!"),isVisible:!!a}].filter(e=>e.isVisible)};class message_suggestions_MessageSuggestions extends i.Component{constructor(){super(...arguments),this.onMessageSuggestionClicked=(e=>{var t=this.props;const a=t.clogger,n=t.pageViewingSessionId;(0,t.prefillMessageInput)(e.prefillText||e.buttonText),a.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.CLICK,ui_element:de.UiElement.WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:de.ElementType.BUTTON,element_name:e.id}},welcome_place:{welcome_session_id:n}}})})}render(){var e=this.props;const t=e.hasMessagesToRender,a=e.inviterUsername,n=e.isDm;return Wt({hasMessagesInChannel:t,inviterUsername:a,isDm:n}).map(e=>o.a.createElement(_e.d,{className:"message-suggestion-button margin_right_50 margin_top_50",size:"small",key:e.id,onClick:()=>this.onMessageSuggestionClicked(e)},e.buttonText))}}message_suggestions_MessageSuggestions.displayName="MessageSuggestions";var Gt=Object(u.b)(e=>{const t=Object(oe.c)(e);return{inviterUsername:t?Object(Je.W)(e,t,!1,!0):void 0,clogger:Object(ie.a)({state:e}),pageViewingSessionId:Object(oe.i)(e)}})(message_suggestions_MessageSuggestions),Kt=a("cD5Y"),Vt=(a("XwvF"),a("gl+W")),zt=a("lU/5"),$t=a("KmK8"),Yt=a("RhZ7"),Qt=a("TOh8"),Xt=a("8CL7"),Jt=a("VrmM"),Zt=a("Gq2+"),ea=a("Aeia"),ta=a("0dpy");var aa=({msg:e})=>o.a.createElement(Vt.a,{className:"welcome-message"},o.a.createElement(zt.a,{msg:e},o.a.createElement($t.a,{light:o.a.createElement(Yt.a,{msg:e})},o.a.createElement(Qt.a,{msg:e}),"\xa0\xa0",o.a.createElement(ta.a,{msg:e,clickable:!0}),o.a.createElement("br",null),o.a.createElement(Xt.a,{msg:e}),o.a.createElement(Jt.a,{msg:e}),o.a.createElement(Zt.a,{msg:e}),o.a.createElement(ea.b,{msg:e}))));a("08gB");const na=new x.b("welcome_place");class message_suggestions_header_MessageSuggestionsHeader extends i.Component{render(){var e=this.props;const t=e.channelName,a=e.isLoading,n=e.lastMessages,s=e.onChannelLinkClicked,r=0!==n.length,i=d()("padding_left_150 padding_right_150 padding_top_100 padding_bottom_100",{border_bottom:!a&&!r}),l=na.t("Say hi, post a GIF, go wild. The world (or at least this channel) is your oyster."),c=o.a.createElement("div",{className:"welcome-place-channel-preview padding_100 border_top border_bottom"},n.map(e=>o.a.createElement(aa,{msg:e,key:e.ts})));return o.a.createElement("div",{className:"sk_primary_background welcome-place-send-message-header"},o.a.createElement("div",{className:i},o.a.createElement("div",{className:"display_flex justify_content_between"},o.a.createElement("span",null,o.a.createElement("strong",null,t)),o.a.createElement(Ze.a,{onClick:()=>s("view_channel")},na.t("View channel"))),o.a.createElement("p",{className:"welcome-place-channel-description"},l)),a?o.a.createElement("div",{className:"display_flex align_items_center justify_content_center full_height padding_100 border_top border_bottom"},o.a.createElement(Kt.a,null)):r&&c)}}message_suggestions_header_MessageSuggestionsHeader.displayName="MessageSuggestionsHeader";const sa={joinAndSwitchToChannel:nt.a};var ra=Object(u.b)(e=>{const t=Object(oe.k)(e)||Object(_.a)(e),a=Object(B.e)(e,t);return{channelId:t,channelName:Object(q.x)(e,a),clogger:Object(ie.a)({state:e}),pageViewingSessionId:Object(oe.i)(e)}},sa)(message_suggestions_header_MessageSuggestionsHeader),ia=a("Vfgr"),oa=a("hbEN"),la=a("tn36"),ca=a("mM05"),da=a.n(ca),ua=a("oKz6"),pa=a("dxEi"),ha=a("quKg"),ma=a("rZal"),ba=a("XL7r"),fa=a("7ob2"),_a=a("ns4K"),ga=a("dhvi"),ya=a("HOkk"),Oa=a("YPPF"),Ca=a("/Q0P"),va=a("Ggy7");const Ea=o.a.lazy(()=>Promise.resolve().then(a.bind(null,"6EwF"))),ka=Object(mt.b)("Opens the snippet dialog",(e,t,a)=>{const n=a.initialText.replace(/\u2018|\u2019/g,"'").replace(/\u201c|\u201d/g,'"');Object(re.a)()?e(Object(Ca.a)({element:o.a.createElement(Ea,s()({},a,{initialSnippetText:n,initialText:"",resetSnippetText:n,resetChannelId:a.initialChannelId}))})):Object(va.a)(n,a.fromPrompt)});ka.meta={name:"openSnippetDialog",key:"actionsOpenSnippetDialogOpenSnippetDialog",description:"Opens the snippet dialog"},ka.propTypes={initialText:l.default.string,initialChannelId:l.default.string.isRequired,threadTs:l.default.string,viewContext:l.default.string};var Sa=ka,ja=a("Dpde"),Ia=a("Z7Ay");let wa=0,Ta=0,Na=!0;const Aa=Object(Ot.b)({label:"HISTORY-NAVIGATION"}),Ra=()=>{Na?(Aa.info("Adding route to the history stack"),Ta===wa?(Ta+=1,wa+=1):wa=Ta+=1):Na=!0},Ma=()=>1===Ta,Pa=()=>Ta===wa;Object(Ia.a)("history",{getHistoryLength:()=>wa,getHistoryIndex:()=>Ta});const xa=(e,{fromKeyboardShortcut:t,elementName:a}={})=>{Object(ie.a)({state:e}).track(de.EventId.HISTORY_NAVIGATION,{contexts:{ui_context:{action:t?de.UiAction.KEYDOWN:de.UiAction.CLICK,ui_properties:{element_type:de.ElementType.BUTTON,element_name:a}}}})},La=Object(mt.b)("Go back in history",(e,t,{event:a,fromKeyboardShortcut:n=!1}={})=>{a&&a.preventDefault();const s=t(),r=Object(Ot.a)({state:s,label:"HISTORY-NAVIGATION"});if(Object(ja.b)(s)){if(Ma())return void r.debug("This is the beginning of the history stack \u2b05\ufe0f");r.debug("Moving back in history"),window.history.back(),1!==Ta&&(Aa.info("Decrementing the users current position in the history stack"),Ta-=1,Na=!1),xa(s,{fromKeyboardShortcut:n,elementName:"back"})}else r.debug("Moving back in history"),window.history.back(),xa(s,{fromKeyboardShortcut:n,elementName:"back"})});La.meta={name:"triggerNavigateBack",key:"actionsKeyCommandsTriggerHistoryNavigationTriggerNavigateBack",description:"Go back in history"},La.propTypes={event:l.default.object,fromKeyboardShortcut:l.default.bool};const Fa=Object(mt.b)("Go forward in history",(e,t,{event:a,fromKeyboardShortcut:n=!1}={})=>{a&&a.preventDefault();const s=t(),r=Object(Ot.a)({state:s,label:"HISTORY-NAVIGATION"});if(Object(ja.b)(s)){if(Pa())return void r.debug("This is the end of the history stack \u27a1\ufe0f");r.debug("Moving forward in history"),window.history.forward(),Ta!==wa&&(Aa.info("Incrementing the users current position in the history stack"),Ta+=1,Na=!1),xa(s,{fromKeyboardShortcut:n,elementName:"forward"})}else r.debug("Moving forward in history"),window.history.forward(),xa(s,{fromKeyboardShortcut:n,elementName:"forward"})});Fa.meta={name:"triggerNavigateForward",key:"actionsKeyCommandsTriggerHistoryNavigationTriggerNavigateForward",description:"Go forward in history"},Fa.propTypes={event:l.default.object,fromKeyboardShortcut:l.default.bool};var Da=a("hOGb"),Ba=a("qafc"),Ua=a("ynxK"),qa=a("HvGc");const Ha=new x.b("message_navigation_shortcuts"),Wa=(l.default.func,l.default.bool,l.default.object.isRequired,{showKeyboardShortcuts:r.a,featureMessageNavigationShortcuts:!1});class message_navigation_educational_toast_MessageNavigationEducationalToast extends i.PureComponent{constructor(){super(),this.openShortcutsFlexpane=this.openShortcutsFlexpane.bind(this)}componentDidMount(){this.props.clogger.track(de.EventId.CLIENT_KEYBOARD_SHORTCUTS,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.KEYDOWN,[de.UiContextKeys.step]:de.UiStep.NAVIGATION_SHORTCUTS_EDUCATION,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.element_type]:de.ElementType.TOAST,[de.UiPropertiesKeys.key]:"up"}}}})}openShortcutsFlexpane(e){this.props.showKeyboardShortcuts({focusKey:e&&"keydown"===e.type?"keyboard_shortcuts":null})}render(){if(!this.props.featureMessageNavigationShortcuts)return null;const e=Ha.rt("Press {cmd_key} {up_key} to edit your last message, and use {up_key} to browse all messages and quickly act on them using <shortcuts>one of the many shortcuts</shortcuts>",{cmd_key:o.a.createElement(Da.a,{label:Object(ue.q)()?"Cmd":"Ctrl",slim:!0}),up_key:o.a.createElement(Da.a,{label:"\u2191",slim:!0})},({text:e,key:t})=>o.a.createElement(Ua.a,{key:t,onClick:this.openShortcutsFlexpane},e));return o.a.createElement(Ba.b,{fadeDelay:1e4},o.a.createElement("span",null,e))}}message_navigation_educational_toast_MessageNavigationEducationalToast.displayName="MessageNavigationEducationalToast",message_navigation_educational_toast_MessageNavigationEducationalToast.defaultProps=Wa;var Ga=Object(u.b)(e=>({featureMessageNavigationShortcuts:Object(m.m)(e,"feature_message_navigation_shortcuts"),clogger:Object(ie.a)({state:e})}),e=>({showKeyboardShortcuts:(...t)=>e(Object(qa.h)(...t))}))(message_navigation_educational_toast_MessageNavigationEducationalToast),Ka=a("7dYf");const Va=Object(mt.b)("Show contextual shortcuts navigation toast",(e,t)=>{const a=t(),n=Object(m.m)(a,"feature_message_navigation_shortcuts"),s=Object(ba.k)(a,"message_navigation_toast_was_seen");n&&!s&&(e(Object(_a.c)({element:o.a.createElement(Ga)})),e(Object(Ka.f)({pref:"message_navigation_toast_was_seen",value:!0})))});Va.meta={name:"maybeShowMessageNavigationEducationalToast",key:"actionsMaybeShowMessageNavigationEducationalToastMaybeShowMessageNavigationEducationalToast",description:"Show contextual shortcuts navigation toast"};var za=Va,$a=a("2HDu"),Ya=a("FghR");const Qa=new x.b("coachmarks"),Xa={anchorElement:l.default.instanceOf(Element),setTractorFilesCoachmarkVisibility:l.default.func},Ja={anchorElement:null,setTractorFilesCoachmarkVisibility:r.a};class tractor_share_files_coachmark_TractorShareFilesCoachmark extends Ya.a{render(){var e=this.props;const t=e.setTractorFilesCoachmarkVisibility,a=e.anchorElement;return o.a.createElement("div",{className:"position_relative"},o.a.createElement(Ya.a,{anchorElement:a,"data-qa":"coachmark",isOpen:!0,arrowPosition:80,orientation:"right",offsetY:-40,closeCoachmark:()=>t(!1),coachmarkClassNames:"c-message-pane__c-coachmark"},o.a.createElement("h3",null,Qa.t("Share a file in the channel")),o.a.createElement("p",null,Qa.rt('Click the <i class="c-icon c-icon--paperclip"></i> paperclip icon next to the message input box to <strong>add a file from your computer</strong>.'))))}}tractor_share_files_coachmark_TractorShareFilesCoachmark.displayName="TractorShareFilesCoachmark",tractor_share_files_coachmark_TractorShareFilesCoachmark.propTypes=Xa,tractor_share_files_coachmark_TractorShareFilesCoachmark.defaultProps=Ja;var Za=a("9PC1"),en=a("oxKW"),tn=a("pWPO"),an=a("icQl"),nn=a("NAkb"),sn=a("cnLP"),rn=a("NcDR"),on=a("Pe1S");const ln=new x.b("offline_mode"),cn=new x.b("msg_input"),dn=e=>{if(!e)return"";const t=document.createElement("span");return t.innerHTML=e,t.textContent.trim()},un=(l.default.string,l.default.string,l.default.object,l.default.string,l.default.string,l.default.string,l.default.func,l.default.string,l.default.object,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.object,l.default.number,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.object.isRequired,l.default.object.isRequired,l.default.number,l.default.bool,l.default.object,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.func,l.default.oneOf(["light","dark"]),l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.func,l.default.bool,l.default.object,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.string,l.default.bool,{channelId:void 0,teamId:void 0,legacyChannel:void 0,threadTs:void 0,viewContext:void 0,placeholder:void 0,sendMessage:()=>Promise.resolve(),className:void 0,autocompleteProps:void 0,enableEmojiButton:!1,enableFileButton:!0,enableSnippetCreation:!0,enableMentionButton:!1,enableComposerButton:!1,enableSendButton:!1,enableBroadcastKeywords:!0,enableJumbomoji:!1,enableExpandButton:!1,arrowHistory:!1,useSendButton:!1,isDisabled:!1,isSendingDisabled:!1,isExpanded:!1,maxLines:void 0,useLegacyCreate:!1,useLegacyDrafts:!1,focusOnMount:!1,focusOnPaste:!1,draft:void 0,draftDelay:1e3,setChannelDraft:r.a,clearChannelDraft:r.a,editLastMessage:r.a,openSnippetDialog:r.a,featureOfflineMode:!1,featureSonicInputs:!1,clientToolBar:!1,featureWysiwygComposer:!1,wasRecentlyOnline:!1,isClientOnline:!1,onTextChange:r.a,onSelectionChange:r.a,onExpand:r.a,onDraftUpdate:r.a,onFocus:r.a,onBlur:r.a,enqueueToast:r.a,openModal:r.a,maxLength:void 0,showFocusOutline:!1,additionalDraftContent:void 0,onDraftRestore:r.a,onSendError:r.a,triggerNavigateBack:r.a,triggerNavigateForward:r.a,shouldShowTractorFilesCoachmark:!1,setTractorFilesCoachmarkVisibility:r.a,ariaDescribedBy:void 0,clientTheme:"light",isComposerPage:!1,composerDraft:void 0,onUpArrow:r.a,onDownArrowWhenEmpty:r.a,featureMessageNavigationShortcuts:!1,featureWysiwygAnchorText:!1,maybeShowMessageNavigationEducationalToast:r.a,hasKeyboardFocus:!1});class message_input_MessageInput extends i.Component{constructor(e){super(e),Object(la.a)(this,["onEnter","onFileMenuClose","onFileMenuOpen","onLeftWhenEmpty","onPlusMenuShortcut","onCmdLeftWhenEmpty","onCmdRightWhenEmpty","onPasteLimit","onTextChange","onSelectionChange","onUpArrow","openSnippetDialog","renderInput","renderModernAutocomplete"]),this.isFlushingDraftFromChannelSwitch=!1,this.state={isPlusMenuOpen:!1,forcePlusMenuOpen:!1},this.getComputedModules=Object(an.a)((e,t,a,n,r)=>{if(!a&&!n)return e;const i=Object(on.a)({featureWysiwygComposer:n,featureWysiwygAnchorText:r});return s()({},e,{composer:s()({},i,{teamId:t}),slacklink:n&&{convertImages:!1,disableLinksWithLabels:!r},slackmarkdown:n&&{convertHeaders:!1,convertHorizontalRule:!1}})})}componentDidMount(){this.handlePropChanges({isMount:!0}),this.maybeFocusInput()}componentDidUpdate(e){this.handlePropChanges({prevProps:e}),this.maybeFocusInput(e)}componentWillUnmount(){this.updateDraftThrottled&&this.updateDraftThrottled.flush()}onEnter({metaKey:e,ctrlKey:t,shiftKey:a}){var n=this.props;const s=n.sendMessage,r=n.useLegacyDrafts,i=n.featureOfflineMode,l=n.featureSonicInputs,c=n.wasRecentlyOnline,d=n.enableSnippetCreation,u=n.isSendingDisabled,p=n.onSendError,h=this.getInputRef();if(!h)return!1;if(h.isEmpty()&&!a)return!1;if(r||this.updateDraftThrottled.cancel(),i&&!c){const e=ln;return this.props.enqueueToast({element:o.a.createElement(Ba.b,{ariaAssertive:!0,position:"top-right",icon:"cloud-offline-small"},o.a.createElement("span",null,o.a.createElement("strong",null,e.rt("No connection."))," ",e.rt("You\u2019ll be able to send messages as soon as you\u2019re back online.")))}),!1}return l&&d&&(Object(ue.q)()&&e&&a||!Object(ue.q)()&&t&&a)?(this.openSnippetDialog(),!1):u?(p({reason:"send_disabled"}),!1):(s({fromKeyboardShortcut:!0}),!1)}onUpArrow(e=!1){var t=this.props;const a=t.arrowHistory,n=t.featureOfflineMode,s=t.isClientOnline,r=t.featureMessageNavigationShortcuts,i=t.hasKeyboardFocus;if(!Object(re.a)()&&a&&!e)return;const o=this.getInputRef();if(!o)return;if(!o.isEmpty())return;e?this.trackNavigationShortcut("cmd+up"):this.trackNavigationShortcut("up");const l=e?"cmd+up":"up";if(!r||r&&e){if(n&&!s)return;this.props.editLastMessage({keyboardShortcut:l,hasKeyboardFocus:i})}else r&&this.props.maybeShowMessageNavigationEducationalToast(),this.props.onUpArrow(e)}onLeftWhenEmpty(){this.setState(()=>({isPlusMenuOpen:!0,forcePlusMenuOpen:!0}))}onPlusMenuShortcut(){this.setState(()=>({isPlusMenuOpen:!0,forcePlusMenuOpen:!0}))}onCmdLeftWhenEmpty(){this.props.logger.info("MESSAGE-INPUT","onCmdLeftWhenEmpty"),this.props.triggerNavigateBack({fromKeyboardShortcut:!0})}onCmdRightWhenEmpty(){this.props.logger.info("MESSAGE-INPUT","onCmdRightWhenEmpty"),this.props.triggerNavigateForward({fromKeyboardShortcut:!0})}onTextChange(){var e=this.props;const t=e.onTextChange,a=e.useLegacyDrafts,n=e.featureWysiwygComposer,s=this.getInputRef();a||this.updateOrClearDraft({inputRef:s}),t(s.value(),n?s.getContents().contents:[])}onSelectionChange(e){(0,this.props.onSelectionChange)(e)}onDraftUpdate(){const e=this.props.onDraftUpdate,t=this.getInputRef();e({ops:t.getContents().contents,range:t.getSelection()})}onFileMenuOpen(){this.setState(()=>({isPlusMenuOpen:!0}));this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_button"}}})}onFileMenuClose(){this.setState(()=>({isPlusMenuOpen:!1,forcePlusMenuOpen:!1}))}onPasteLimit(e,t){this.props.openModal({element:this.renderPasteLimitDialog(t),isStackable:!0})}getInputRef(){const e=this.props.forwardedRef;return e.current.getWrappedInstance?e.current.getWrappedInstance():e.current}setCursor(...e){this.getInputRef().setCursor(...e)}setCursorAtEnd(...e){this.getInputRef().setCursorAtEnd(...e)}trackNavigationShortcut(e){var t=this.props;const a=t.clogger,n=t.viewContext;a.track(de.EventId.CLIENT_KEYBOARD_SHORTCUTS,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.KEYDOWN,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.key]:e,[de.UiPropertiesKeys.view_context]:n}}}})}handlePropChanges({prevProps:e={},isMount:t}){var a=this.props;const n=a.channelId,s=a.threadTs,r=a.composerDraft,i=a.draft,o=a.draftDelay,l=a.logger,c=a.useLegacyDrafts,d=a.onDraftRestore,u=a.additionalDraftContent;if(!c){if(e.draftDelay!==o&&(this.updateDraftThrottled=Object(oa.a)(this.updateDraft,o)),!t&&!c&&e.additionalDraftContent!==u){const e=this.getInputRef();this.updateOrClearDraft({inputRef:e})}if(r&&r.id&&(!e.composerDraft||e.composerDraft.id!==r.id)){this.updateDraftThrottled.flush();const e=this.getInputRef();e.value({contents:r.ops}),e.clearHistory()}if(!r&&(e.channelId!==n||e.threadTs!==s)){this.isFlushingDraftFromChannelSwitch=!0,this.updateDraftThrottled.flush(),this.isFlushingDraftFromChannelSwitch=!1;const e=this.getInputRef();n&&(i?(l.debug("DRAFT",`Restoring draft to ${n}`),i.ops&&e.value({contents:i.ops}),i.range&&e.setCursor(i.range.index,i.range.length),d(i)):(l.debug("DRAFT",`No draft, clearing input for ${n}`),e.clear())),e.clearHistory()}}}focus(){const e=this.props.logger,t=this.getInputRef();try{t.focus()}catch(a){e.error("MESSAGE-INPUT",`maybeFocusInput caught error: ${a&&a.message}`),a.stack&&e.error("MESSAGE-INPUT",a.stack)}}maybeFocusInput(e={}){var t=this.props;const a=t.channelId,n=t.threadTs,s=t.focusOnMount;s&&(s!==e.focusOnMount||a&&!n&&e.channelId!==a||n&&e.threadTs!==n)&&this.focus()}openSnippetDialog(e){var t=this.props;const a=t.channelId,n=t.threadTs,s=t.viewContext,r=t.featureWysiwygComposer,i=this.getInputRef();let o,l;return e&&e.ops?(l={contents:e.ops},o=Object(tn.a)(l)):(o=i?i.displayValue():"",l=r&&i?i.getContents():void 0),this.props.openSnippetDialog({initialText:o,initialContents:l,initialChannelId:a,threadTs:n,viewContext:s}),e||i.value(""),!1}updateOrClearDraft({inputRef:e}){var t=this.props;const a=t.channelId,n=t.threadTs,s=t.logger,r=t.useLegacyDrafts;if(t.isComposerPage)return void this.updateDraftThrottled();if(!a||!e)return;if(r)return;const i=e.getContents();if(e.getLength()&&Object(ia.a)(Object(Za.p)(i.contents,{embedReplacement:"a"})).length){const e=new da.a(i.contents);s.debug("DRAFT",`Updating draft in ${a}`),this.updateDraftThrottled({channelId:a,threadTs:n,delta:e})}else s.debug("DRAFT",`Clearing draft for ${a}`),this.updateDraftThrottled({channelId:a,threadTs:n})}updateDraft({channelId:e,threadTs:t,delta:a}={}){var n=this.props;const r=n.additionalDraftContent;if(n.isComposerPage)this.onDraftUpdate();else if(a){const n=this.getInputRef();this.props.setChannelDraft(s()({channelId:e,threadTs:t,delta:a,range:n.getSelection(),shouldWithold:!this.isFlushingDraftFromChannelSwitch},r))}else this.props.clearChannelDraft({channelId:e,threadTs:t})}renderPasteLimitDialog(e){const t=cn;return o.a.createElement(ya.a,{title:t.t("That\u2019s a bit too long to paste"),cancelText:t.t("Create a snippet"),goButtonText:t.t("OK"),onCancel:()=>this.openSnippetDialog(e),showCancelButton:!0},t.rt("To keep things running smoothly, there\u2019s a limit on the number of characters you can paste into Slack. If you\u2019d like you could <b>create a snippet</b> instead."))}renderInput({modules:e,isOpen:t,legacyTextyClassName:a}){var n=this.props;const s=n.placeholder,r=n.channelId,i=n.enableEmojiButton,l=n.enableMentionButton,c=n.enableComposerButton,d=n.enableSendButton,u=n.enableBroadcastKeywords,p=n.enableExpandButton,h=n.useLegacyCreate,m=n.onFocus,b=n.onBlur,f=n.onExpand,_=n.forwardedRef,g=n.enableJumbomoji,y=n.isDisabled,O=n.isSendingDisabled,C=n.isExpanded,v=n.maxLines,E=n.threadTs,k=n.viewContext,S=n.maxLength,j=n.clientToolBar,I=n.featureWysiwygComposer,w=n.featureWysiwygAnchorText,T=n.teamId,N=n.focusOnPaste,A=n.ariaDescribedBy,R=n.useSendButton,M=n.sendMessage,P=dn(s),x=this.getComputedModules(e,T,j,I,w);return o.a.createElement(qt.default,{legacyTextyClassName:a,channelId:r,className:"p-message_input_field",ariaLabel:P,ariaDescribedBy:A,focusOnPaste:N,placeholder:s,onEnter:this.onEnter,onUpArrow:this.onUpArrow,onDownArrowWhenEmpty:this.props.onDownArrowWhenEmpty,onLeftWhenEmpty:this.onLeftWhenEmpty,onPlusMenuShortcut:this.onPlusMenuShortcut,onCmdLeftWhenEmpty:Object(re.a)()?this.onCmdLeftWhenEmpty:null,onCmdRightWhenEmpty:Object(re.a)()?this.onCmdRightWhenEmpty:null,onExpand:f,"data-qa":"message_input","data-message-input":!0,"data-channel-id":r,"data-thread-ts":E,"data-thread-key":E?Object($a.c)(r,E):null,"data-view-context":k,ref:_,useLegacyCreate:h,maxLines:v,modules:x,isAutocompleteOpen:t,isDisabled:y,isSendingDisabled:O,isExpanded:C,enableEmojiButton:i,enableMentionButton:l,enableComposerButton:c,enableSendButton:d,enableBroadcastKeywords:u,enableJumbomoji:g,enableExpandButton:p,onTextChange:this.onTextChange,onSelectionChange:this.onSelectionChange,onFocus:m,onBlur:b,onPasteLimit:this.onPasteLimit,sendMessage:M,maxLength:S,useFocusRing:!1,useSendButton:R})}renderLegacyAutocomplete(){var e=this.props;const t=e.legacyChannel,a=e.threadTs,n=e.forwardedRef,s={tabcomplete:{searchOptions:{model_ob:t,in_thread:!!a},positionMenu:e=>{const t=n.current.getWrappedInstance?n.current.getWrappedInstance():n.current;e.style.width=`${t.container.offsetWidth}px`,Object(nn.a)(e,t.container)}}};return this.renderInput({modules:s,legacyTextyClassName:"c-texty_input"})}renderModernAutocomplete(){const e=this.props.autocompleteProps;return o.a.createElement(en.a,s()({completeOnMembers:!0,completeOnChannels:!0,completeOnCommands:!0,completeOnEmoji:!0,channelId:this.props.channelId,threadTs:this.props.threadTs,renderInput:(...e)=>this.renderInput(...e),shouldCompleteOnTab:!this.props.useSendButton},e))}render(){var e=this.props;const t=e.className,a=e.useLegacyCreate,n=e.channelId,s=e.threadTs,r=e.viewContext,i=e.showFocusOutline,l=e.shouldShowTractorFilesCoachmark,c=e.setTractorFilesCoachmarkVisibility,u=e.clientTheme,p=e.enableFileButton,h=e.isComposerPage,m=d()(t,"p-message_input",{"p-message_input--focus-visible":i,[`p-message_input--${u}`]:"light"!==u}),b=p&&o.a.createElement(ai,{channelId:n,threadTs:s,viewContext:r,isComposerPage:h,isOpen:this.state.isPlusMenuOpen,forceOpen:this.state.forcePlusMenuOpen,onFileMenuOpen:this.onFileMenuOpen,onFileMenuClose:this.onFileMenuClose,useLegacyCreate:a});return o.a.createElement("div",{className:m},a?this.renderLegacyAutocomplete():this.renderModernAutocomplete(),l?o.a.createElement(sn.b,{orientation:"right",coachmarkElement:o.a.createElement(tractor_share_files_coachmark_TractorShareFilesCoachmark,{setTractorFilesCoachmarkVisibility:c}),style:{position:"absolute",bottom:4,height:34,width:34}},b):b)}}message_input_MessageInput.displayName="MessageInput",message_input_MessageInput.defaultProps=un;const pn={setChannelDraft:(...e)=>Object(Oa.e)(...e),clearChannelDraft:(...e)=>Object(Oa.b)(...e),enqueueToast:(...e)=>Object(_a.c)(...e),openModal:(...e)=>Object(ga.e)(...e),openSnippetDialog:(...e)=>Sa(...e),triggerNavigateBack:e=>La(e),triggerNavigateForward:e=>Fa(e),setTractorFilesCoachmarkVisibility:(...e)=>Object(fa.f)(...e),maybeShowMessageNavigationEducationalToast:(...e)=>za(...e)},hn=Object(u.b)(function(e,{channelId:t,threadTs:a}){return{legacyChannel:Object(re.a)()?null:Object(B.e)(e,t),enableJumbomoji:Object(ma.a)(e),arrowHistory:Object(ba.k)(e,"arrow_history"),draft:Object(C.b)(e,{channelId:t,threadTs:a}),featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),featureSonicInputs:Object(m.m)(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(ha.c)(e,"composer_toolbar"),featureWysiwygComposer:Object(rt.a)(e),wasRecentlyOnline:Object(pa.h)(e),isClientOnline:Object(pa.c)(e),logger:Object(Ot.a)({state:e}),clogger:Object(ie.a)({state:e}),teamId:Object(h.b)(e),shouldShowTractorFilesCoachmark:Object(ua.b)(e),clientTheme:Object(M.c)(e),featureMessageNavigationShortcuts:Object(m.m)(e,"feature_message_navigation_shortcuts"),featureWysiwygAnchorText:Object(m.m)(e,"feature_wysiwyg_anchor_text")}},pn)(Object(rn.a)(message_input_MessageInput));var mn=o.a.forwardRef((e,t)=>o.a.createElement(hn,s()({},e,{forwardedRef:t||o.a.createRef()}))),bn=a("od5y"),fn=a("MREy"),_n=a("Z0Cl"),gn=a("h9PG"),yn=a("AE1P"),On=a("M4HD"),Cn=a("SZMM"),vn=a("iZHp"),En=a("YB81"),kn=a("PJXc");const Sn=new x.b("sonic_pilot");function jn(){return Object(re.a)()?"c-menu_item--sonic-placeholder":void 0}var In=Object(u.b)(e=>({featureSonicPlaceholderLabels:Object(m.m)(e,"feature_sonic_placeholder_labels")}))(function({featureSonicPlaceholderLabels:e}){return Object(re.a)()&&e?o.a.createElement("div",{className:"c-menu_item__placeholder"},Sn.t("Coming soon")):null}),wn=a("ROZo");Object(wn.b)("TS.client.ui.files.backButtonOnClick");const Tn=Object(wn.b)("TS.client.ui.files.chooseFile");var Nn=a("AFNo"),An=a("+1yX");const Rn=Object(Nn.f)("Opens the docs Gantry app in a new window",(e,t)=>{const a=t(),n=Object(_.a)(a),s=Object(Se.d)(a),r=Object(xe.i)(s),i=Object(h.a)(a);if(!Object(An.a)(n))return;const o={origin_team:i||r,origin_channel:n};e(Object(Cn.f)({pathname:`/docs/${r}`,queryStringParams:o,windowOptions:{frame:!0,center:!0,height:600,width:800,titleBarStyle:"default"}}))});Rn.meta={name:"createPost",key:"actionsDocsCreatePostCreatePost",description:"Opens the docs Gantry app in a new window"},Rn.propTypes=l.default.object;var Mn=a("n3t6"),Pn=a("h9dl"),xn=a("AzV5"),Ln=a("aLpA"),Fn=a("sJy+"),Dn=a("O0RF"),Bn=a("Rszm"),Un=a("plEq"),qn=a("S3eg"),Hn=a("E6HO"),Wn=a("N0/W"),Gn=a("KP4j");const Kn=new x.b("menu_file"),Vn={success:l.default.bool,response:l.default.object,wasShared:l.default.bool,channel:l.default.string,threadTs:l.default.string},zn=Object(mt.b)("On Gdrive Creation Complete",(e,t,{success:a,response:n,wasShared:s,channel:r,threadTs:i}={})=>{const o=t(),l=Object(Gn.b)(o);a&&n&&n.data&&n.data.url&&!s&&l&&e(Object(Hn.c)({ephemeralType:"created_google_drive_document",message:{channel:r,thread_ts:i,slackbot_feels:"sad_surprise",text:Kn.t("It looks like your browser is blocking popups so here\u2019s a link to your <{url}|document>",{url:n.data.url})}}))});zn.meta={name:"onGDriveCreateComplete",key:"actionsOnGdriveCompleteOnGDriveCreateComplete",description:"On Gdrive Creation Complete"},zn.propTypes=Vn;var $n=zn,Yn=a("OqoL");const Qn=new x.b("files"),Xn={type:l.default.string.isRequired,title:l.default.string,comment:l.default.string,blocks:l.default.array,broadcast:l.default.bool,shareFile:l.default.bool,channel:l.default.string,threadTs:l.default.string,reason:l.default.string},Jn=Object(mt.b)("Create a Gdrive File",(e,t,{type:a,title:n,comment:s,blocks:r,broadcast:i,shareFile:o,channel:l,threadTs:c,reason:d}={})=>{const u=t(),p=Object(Ot.a)({state:u});o&&l&&e(Object(qn.a)({id:l}));const h=Object(_.a)(u);return e(Object(Wn.b)({serviceStub:"gdrive",mimeType:`application/vnd.google-apps.${a}`,filename:n||"",reason:d||"create-gdrive-file"})).then(a=>{const u=Object(Cn.g)(a.url);u&&!u.closed||e(Object(Gn.c)(!0)),o?e(Object(Wn.t)({channels:l,threadTs:c,title:n||"",initialComment:Object(Yn.b)(t(),s),blocks:r,broadcast:i,link:a.url,reason:d||"create-gdrive-file"})).then(()=>e($n({success:!0,response:a,wasShared:o,channel:h,threadTs:c}))).catch(t=>{p.error("CREATE_GOOGLE_DRIVE_FILE",t),e(Object(Hn.c)({ephemeralType:Hn.a.gdriveShareFileError,message:{channel:h,thread_ts:c,slackbot_feels:"sad_surprise",text:Qn.t("Oh no! I couldn\u2019t import your newly created file")}}))}):e($n({success:!0,response:a,wasShared:o,channel:h,threadTs:c}))}).catch(t=>{e($n({success:!1}));let a=Qn.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.");t&&t.data&&"filename_too_long"===t.data.error&&(a=Qn.t("Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename.")),p.error("CREATE_GOOGLE_DRIVE_FILE",t),e(Object(Hn.c)({ephemeralType:Hn.a.unhandledGdriveCreate,message:{channel:h,thread_ts:c,slackbot_feels:"sad_surprise",text:a}}))})});Jn.meta={name:"createGdriveFile",key:"actionsCreateGdriveFileCreateGdriveFile",description:"Create a Gdrive File"},Jn.propTypes=Xn;var Zn=Jn,es=a("IyaR"),ts=a("Y6FH"),as=a("Hvpu"),ns=a("Zwlx"),ss=a("iJ4v"),rs=a("r6UO");a("T/b3");const is=new x.b("create-gdoc-dialog"),os=(l.default.string,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.string,l.default.string,l.default.func,l.default.array,l.default.func,l.default.bool,l.default.string,l.default.func,l.default.string,l.default.bool,l.default.bool,l.default.oneOf(["mpim","im","channel","private"]),l.default.node.isRequired,{type:void 0,closeModal:r.a,getShareableChannelId:r.a,createGdriveFile:r.a,onGDriveCreateComplete:r.a,threadTs:void 0,msgText:"",setMsgText:r.a,msgOps:void 0,setMsgOps:r.a,converMsgOpsToRichTextMessage:r.a,featureWysiwygComposer:!1,selectedChannelId:void 0,setSelectedChannel:r.a,disallowedKeywordInMsgText:void 0,canPostInSelectedChannel:!1,canThread:!1,channelType:null});class create_gdoc_dialog_CreateGDocDialog extends i.Component{constructor(e){super(e),Object(la.a)(this,["onTextChange","onShareChannelChange","onGo","onCancel","onBroadcastChange","onTitleInputChange","onShareWithChange","setTitleInputRef"]),this.titleInput=null,this._isMounted=!1,this.state={overMsgLengthLimit:!1,titleInputValue:"",submitting:!1,shareWith:!0,broadcast:!1}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}onTextChange({text:e,msgOps:t,overLimit:a}){this.props.featureWysiwygComposer?this.props.setMsgOps(t):this.props.setMsgText(e),this.setState(()=>({overMsgLengthLimit:a}))}onShareChannelChange(e){this.props.setSelectedChannel(e)}onGo(){this.isGoButtonDisabled()||this.createGDocOnGo()}onCancel(){this.props.onGDriveCreateComplete(!1)}onTitleInputChange(e){this.setState(()=>({titleInputValue:e}))}onShareWithChange(e){const t=e.target.checked;this.setState(()=>({shareWith:!!t}))}onBroadcastChange(e){this.setState(()=>({broadcast:e}))}getCleanMsgText(){if(this.props.featureWysiwygComposer)return null;const e=Object(Mn.a)(this.props.msgText);return Object(ia.a)(e)}getDialogTitle(){switch(this.props.type){case"document":return is.t("Create a Google Document");case"presentation":return is.t("Create a Google Presentation");case"spreadsheet":return is.t("Create a Google Spreadsheet");default:return is.t("Create a Google file")}}setTitleInputRef(e){e&&(this.titleInput=e,this.focusTitleInput())}focusTitleInput(){this.titleInput&&this.titleInput.focus()}isGoButtonDisabled(){var e=this.props;const t=e.disallowedKeywordInMsgText,a=e.canPostInSelectedChannel,n=e.threadTs,s=e.canThread;var r=this.state;const i=r.overMsgLengthLimit,o=r.shareWith,l=r.titleInputValue,c=r.submitting,d=l&&l.length>Ln.y;return o&&!a&&!n||o&&n&&!s||!!t||i||d||c}createGDocOnGo(){var e=this.props;const t=e.selectedChannelId,a=e.getShareableChannelId,n=e.type,s=e.threadTs,r=e.msgOps,i=e.featureWysiwygComposer;var o=this.state;const l=o.titleInputValue,c=o.shareWith,d=o.broadcast;t&&(a({channelOrMemberId:t}).then(e=>{const t=this.getCleanMsgText(),a=l||is.t("Untitled",{fallbackHash:"621521f9a8788695ec292cbec54d2792cfdf0a7d",fallbackHashNs:"space"});let o;i&&(o=this.props.converMsgOpsToRichTextMessage({msgOps:r,channelId:e,inThread:!!s})),this.props.createGdriveFile({type:n,title:a,comment:t,blocks:o,broadcast:d,shareFile:c,channel:e,threadTs:s,reason:"create-gdrive-file"}).then(()=>{this._isMounted&&this.setState(()=>({submitting:!1})),this.props.closeModal()})}),this.setState(()=>({submitting:!0})))}maybeRenderBroadcast(){var e=this.props;const t=e.threadTs,a=e.canPostInSelectedChannel,n=e.channelType,s=e.selectedChannelName,r=this.state.broadcast;return t&&a?o.a.createElement("div",{className:"p-create_gdoc_dialog__broadcast_section"},o.a.createElement(rs.a,{channelType:n,selectedChannelName:s,value:r,onChange:this.onBroadcastChange})):null}renderChannelPicker(){const e=this.props.selectedChannelId,t=this.state.shareWith;return o.a.createElement(ts.a,{onChange:this.onShareChannelChange,initialChannelId:e,isDisabled:!t,dialogType:"create_gdoc_dialog"})}renderShareAlert(){if(!this.state.shareWith)return null;const e=Object(ns.a)(s()({},this.props));return e?o.a.createElement("div",{className:"p-share_dialog__section"},o.a.createElement(Fn.d,{type:"inline",level:"warning",className:"margin_bottom_100"},e)):null}renderShareWith(){const e=this.state.shareWith;return o.a.createElement(Dn.a,{text:is.t("Share with:"),htmlFor:"create-gdoc-share-with",type:"inline"},o.a.createElement(Bn.a,{id:"create-gdoc-share-with",defaultChecked:e,onChange:this.onShareWithChange,"data-qa":"share_with"}))}renderTitleInput(){const e=this.state.titleInputValue,t="p-create_gdoc_dialog__title";return o.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__section_bottom_padding"},o.a.createElement(Dn.a,{htmlFor:t,text:is.t("Title"),optional:!0},o.a.createElement(Un.a,{id:t,name:t,maxCharacterLimit:Ln.y,counterMinimumCharacters:Ln.K,onChange:this.onTitleInputChange,value:e,ref:this.setTitleInputRef,"data-qa":"create_gdoc_title"})))}renderShareWithPicker(){var e=this.props;const t=e.selectedChannelId,a=e.threadTs;return a?o.a.createElement(ss.a,{channelId:t,threadTs:a}):o.a.createElement("div",{className:"p-create_gdoc_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}renderMessageInput(){const e=this.props.msgText;if(!this.state.shareWith)return null;const t=is.t("Add a message, if you\u2019d like."),a=d()("p-share_dialog__section","p-share_dialog__create_gdoc_message_input");return o.a.createElement("div",{className:a},o.a.createElement(es.a,{text:e,onTextChange:this.onTextChange,placeholder:t,ariaLabel:t,onEnter:this.onGo}),this.maybeRenderBroadcast())}render(){return o.a.createElement(ya.a,{className:"p-create_gdoc_dialog",title:this.getDialogTitle(),useSlackScrollbarWithPadding:!0,goButtonText:is.t("Create"),onGo:this.onGo,onClose:this.onCancel,showCancelButton:!1,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled()},this.renderTitleInput(),this.renderShareAlert(),this.renderMessageInput())}}create_gdoc_dialog_CreateGDocDialog.displayName="CreateGDocDialog",create_gdoc_dialog_CreateGDocDialog.defaultProps=os;const ls=Object(u.b)(function(e,t){const a=t.selectedChannelId,n=Object(as.b)(e,t),r=Object(B.e)(e,a)||Object(B.k)(e,a);return s()({},n,{selectedChannel:r})},e=>({closeModal:(...t)=>e(Object(ga.a)(...t)),getShareableChannelId:(...t)=>e(Object(Pn.a)(...t)),createGdriveFile:(...t)=>e(Zn(...t)),onGDriveCreateComplete:(...t)=>e($n(...t)),converMsgOpsToRichTextMessage:(...t)=>e(Object(xn.a)(...t))}))(create_gdoc_dialog_CreateGDocDialog);var cs=Object(as.a)(ls);const ds=Object(mt.b)("Opens the create gdoc file dialog",(e,t,a)=>{e(Object(ga.e)({element:o.a.createElement(cs,a)}))});ds.meta={name:"openCreateGDocDialog",key:"actionsOpenCreateGdocDialogOpenCreateGDocDialog",description:"Opens the create gdoc file dialog"},ds.propTypes={type:l.default.string,displayType:l.default.string,initialChannelId:l.default.string};var us=ds,ps=a("gSGL"),hs=a("6LIB"),ms=a("syB0"),bs=a("oT5T"),fs=a("vSXf");const _s=new x.b("file-upload"),gs={SINGLE_LINK_MISSING:"single",MULTIPLE_LINK_MISSING:"multiple",WEBLINK:"weblink"};function ys({type:e,featureBoxContentPicker:t,proceedToNextDialog:a}){const n=t?_s.t("Your file can\u2019t be added"):"";let s="";switch(e){case gs.SINGLE_LINK_MISSING:s=t?_s.t("Your Box file is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case gs.MULTIPLE_LINK_MISSING:s=t?_s.t("One or more of your Box files is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case gs.WEBLINK:s=t?_s.t("Apologies! Links from Box can\u2019t be added this way yet."):"";break;default:return null}const i=a!==r.a?()=>{Object(ms.a)(()=>{a()})}:r.a;return o.a.createElement(bs.a,{title:n,onGo:i},o.a.createElement("p",null,s))}ys.displayName="BoxLinkAlert",ys.defaultProps={type:gs.SINGLE,proceedToNextDialog:r.a,featureBoxContentPicker:!1};const Os=Object(fs.a)("feature_box_content_picker")(ys),Cs=Object(Nn.f)("Display Box Link Alert error",(e,t,a)=>e(Object(ga.e)({element:o.a.createElement(Os,a)})));Cs.meta={name:"openBoxLinkAlert",key:"componentsShareDialogsBoxLinkAlertOpenBoxLinkAlert",description:"Display Box Link Alert error"},Cs.propTypes={};var vs=Cs,Es=a("yJbr"),ks=a("hqEo"),Ss=a("TwEf"),js=a("fp5s"),Is=a("g5qt"),ws=a("zaOK");const Ts={url:l.default.string.isRequired,windowFeatures:l.default.object,hidden:l.default.bool,processEvent:l.default.func},Ns={width:590,height:520},As=Object(mt.b)("Open third-party file picker window and handle callback",(e,t,{hidden:a,url:n,windowFeatures:i,processEvent:o}={})=>{const l=Object(Ot.a)({getState:t,label:"REMOTE-FILE-PICKER"}),c=t(),d=Object(h.b)(c),u=s()({},Ns,i,{parentTeamId:d});Object(ue.v)()&&(ws.a.canOpenURLInWindow(c,n)||l.error("REMOTE-FILE-PICKER",`Trying to open remote file picker URL in SSB but URL is not whitelisted: ${n}`));const p=Object(js.a)("fp_"),m=`${n}${n.includes("?")?"&":"?"}source_id=${p}`;let b;const f=()=>b.cancel();let _,g;try{if(Object(ue.v)()&&!Object(Is.U)()?(_=a?Object(Cn.g)(m,{show:!1,skipTaskbar:!0,frame:!1,opacity:0,transparent:!0,focusable:!1,parentTeamId:d}):Object(Cn.g)(m,u)).addListener("close",f):a?((g=document.createElement("iframe")).setAttribute("data-qa","picker-frame"),g.src=m,g.style.cssText="display:none",document.body.appendChild(g),_=g.contentWindow):(_=Object(Cn.g)(m,u))&&!Object(Is.U)()&&_.addEventListener("beforeunload",f),!_)return Promise.reject(new Error("Unable to open window"))}catch(y){return Promise.reject(y)}return(b=(e=>new Promise((t,a,n)=>{let s;const r=n=>{const r=e=>{t(e),s()},i=e=>{a(e),s()};try{e(n,{resolve:r,reject:i})}catch(y){i(y)}};n(s=(()=>window.removeEventListener("message",r))),window.addEventListener("message",r)}))(o||((e,t)=>(a,{resolve:n,reject:s}={})=>{if(!Object(ue.v)()||Object(Is.U)()){if(a.source!==e)return;if(a.origin!==window.location.origin)return}if(!a.data||a.data._sourceId!==t)return;a.data.ok&&n(a.data);const r=new Error("Data not OK");r.data=a.data,s(r)})(_,p))).finally(()=>{g?g.remove():_&&_.close()}).catch(r.a),b});As.meta={name:"openRemoteFilePicker",key:"actionsCloudFilePickersOpenRemoteFilePickerOpenRemoteFilePicker",description:"Open third-party file picker window and handle callback"},As.propTypes=Ts;var Rs=As;const Ms=new x.b("files"),Ps={channelId:l.default.string.isRequired,threadTs:l.default.string,metadata:l.default.shape({fileUploadAction:l.default.oneOfType([l.default.number,l.default.string]),fileUploadSrc:l.default.oneOfType([l.default.number,l.default.string])})},xs=e=>{const t=ue.l?"A06147X5W":"A0F82E57C",a=Object(Se.d)(e);return Object(xe.n)(a,`/apps/${t}`)},Ls=Object(mt.b)("Open a window to pick a Box file",(e,t,{channelId:a,threadTs:n,metadata:s}={})=>{const i=t(),o=Object(h.b)(i),l=Object(m.m)(i,"feature_sonic_cloud_files_picker"),c=Object(m.m)(i,"feature_box_content_picker");if(!l||!c)return Object(Es.k)(a,n,s);const d=Object(gn.a)(i,"box_app_installed"),u=`${location.origin}/files/import/box?team=${o}${ue.o?"&js_path=1":""}`;return e(Rs({url:u,windowFeatures:{height:675,width:925}})).then(({chosen_files:t=[]}={})=>{const i=[],o=[],l=[];t.forEach(t=>{t&&((e=>!!(Object(hs.a)(e)&&"file"===e.type&&Object(ps.a)(e.name)&&Object(hs.a)(e.shared_link)&&Object(ps.a)(e.shared_link.url)))(t)?d?e(Object(Ss.a)({channel:a,thread_ts:n,text:t.shared_link.url})):i.push({name:t.name,link:t.shared_link.url,is_box:!0}):"web_link"===t.type?d?e(Object(Ss.a)({channel:a,thread_ts:n,text:t.url})):l.push({name:t.name,url:t.url}):o.push(t))});const c=i.length&&!d?()=>e(Object(ks.a)({files:i,initialChannelId:a,threadTs:n,metadata:s})):r.a,u=l.length?()=>e(vs({type:gs.WEBLINK,proceedToNextDialog:c})):c;return o.length>0?e(vs({type:t.length>1?gs.MULTIPLE_LINK_MISSING:gs.SINGLE_LINK_MISSING,proceedToNextDialog:u})):l.length?u():c()}).catch(s=>{if(s&&s.data&&s.data.error)switch(s.data.error){case"no_access_token":case"unauthorized":e(Object(Hn.c)({ephemeralType:Hn.a.boxFilePickerError,message:{channel:a,thread_ts:n,slackbot_feels:"sad_surprise",text:c?Ms.t("Apologies, but you\u2019ll need to <{url}|reconnect Box to Slack> to continue. It only takes a click or two!",{url:xs(t())}):""}}))}throw s})});Ls.meta={name:"openBoxFilePicker",key:"actionsCloudFilePickersOpenBoxFilePickerOpenBoxFilePicker",description:"Open a window to pick a Box file"},Ls.propTypes=Ps;var Fs=Ls,Ds=a("/1FC"),Bs=a("c8Bs");const Us={channelId:l.default.string.isRequired,threadTs:l.default.string,metadata:l.default.shape({fileUploadAction:l.default.oneOfType([l.default.number,l.default.string]),fileUploadSrc:l.default.oneOfType([l.default.number,l.default.string])})},qs=e=>!(!e||"object"!=typeof e)&&("string"==typeof e.name&&("number"==typeof e.bytes&&("string"==typeof e.link&&(!e.icon||"string"==typeof e.icon)))),Hs=(e,{resolve:t,reject:a}={})=>{if("https://www.dropbox.com"!==e.origin)return;let n;try{n="string"==typeof e.data?JSON.parse(e.data):e.data}catch(s){return}if(n&&"object"==typeof n)switch(n.method){case"files_selected":Object(Ds.a)(n.params)&&Object(Bs.a)(n.params,qs)&&t({chosen_files:n.params}),a(new Error("Invalid file(s) from Dropbox"));break;case"close_dialog":t({chosen_files:[]})}};let Ws;const Gs=Object(mt.b)("Open a window to pick a Box file",(e,t,{channelId:a,threadTs:n,metadata:s}={})=>{if(!Object(m.m)(t(),"feature_sonic_cloud_files_picker"))return Object(Es.l)(a,n,s);const r=t(),i=Object(h.b)(r);Ws&&Ws.isPending()&&Ws.cancel();const o=`${location.origin}/files/import/dropbox?team=${i}`;return(Ws=e(Rs({url:o,processEvent:Hs,windowFeatures:{height:552,width:640}}))).then(({chosen_files:t=[]}={})=>{const r=t.map(e=>({name:e.name,size:e.bytes,link:e.link,icon:e.icon,is_dropbox:!0}));return r.length?e(Object(ks.a)({files:r,initialChannelId:a,threadTs:n,metadata:s})):null})});Gs.meta={name:"openDropbox",key:"actionsCloudFilePickersOpenDropboxFilePickerOpenDropbox",description:"Open a window to pick a Box file"},Gs.propTypes=Us;var Ks=Gs;const Vs=new x.b("files"),zs={channelId:l.default.string.isRequired,threadTs:l.default.string,metadata:l.default.shape({fileUploadAction:l.default.oneOfType([l.default.number,l.default.string]),fileUploadSrc:l.default.oneOfType([l.default.number,l.default.string])}),reason:l.default.string},$s="auth_required",Ys="filename_too_long",Qs="unidentified_external_url",Xs="file_type_has_no_handler",Js=e=>{const t=Object(Se.d)(e);return Object(xe.n)(t,`apps/${ue.l?"A0BDLPR2L":"A6NL8MJ6Q"}`)},Zs=Object(mt.b)("Open a window to pick a GDrive file",(e,t,{channelId:a,threadTs:n,metadata:s,reason:r}={})=>{if(!Object(m.m)(t(),"feature_sonic_cloud_files_picker"))return Object(Es.i)(a,n,s);const i=t(),o=Object(h.b)(i),l=`${location.origin}/files/import/gdrive?team=${o}`;return fetch(l,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(({status:e}={})=>{if(403===e)throw new Error($s)}).then(()=>e(Rs({url:l,windowFeatures:{height:675}}))).then(({chosen_files:i}={})=>{const o=Date.now();return Promise.map(i,i=>e(Object(Wn.t)({channels:a,threadTs:n,link:i.url,reason:r||"open-gdrive-file-picker"})).then(()=>{Object(ie.a)({getState:t}).track(de.EventId.FILE_COMPLETE_UPLOAD_SUCCESS,{[de.CoreKeys.type]:de.FileUploadType.EXTERNAL,[de.CoreKeys.duration]:Date.now()-o,[de.CoreKeys.has_upload_message]:!1,[de.CoreKeys.file_count]:1,[de.CoreKeys.retry_count]:0,[de.CoreKeys.upload_size]:i.sizeBytes?i.sizeBytes:0,[de.CoreKeys.retry_reason]:"",[de.CoreKeys.did_disconnect_during_upload]:!1,[de.CoreKeys.file_upload_action]:s&&s.fileUploadAction,[de.CoreKeys.file_upload_src]:s&&s.fileUploadSrc})}))}).catch(s=>{const r=({text:t,ephemeralType:s}={})=>e(Object(Hn.c)({ephemeralType:s||Hn.a.gdriveShareFileError,message:{channel:a,thread_ts:n,slackbot_feels:"sad_surprise",text:t||Vs.t("Hmm, something went wrong. Try again?",{fallbackHash:"83743049d08a764e93ca79d5621ee1e19f02bc75",fallbackHashNs:"app_management_modal"})}})),i=s&&(s.data&&s.data.error||s.message);return i===Ys?r({text:"Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename."}):[Xs,Qs].includes(i)&&s.args&&s.args.link?e(Object(Ss.a)({channel:a,thread_ts:n,text:s.args.link,unfurl_links:!1,unfurl_media:!1})).then(()=>r({ephemeralType:Hn.a.fileTypeHasNoHandler,text:Vs.t("We don\u2019t currently support importing that type of Google Drive file, but we included the link so that others can access it.")})).catch(r):i===$s?r({text:Vs.t("Looks like you\u2019re trying to add a Google Drive file \u2014 first you\u2019ll need to connect <{url}|Google Drive to Slack>.\n\n Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <{url}|Learn more about using Google Drive in Slack>.",{url:Js(t())})}):(Object(Ot.a)({getState:t}).error("GDRIVE_FILE_PICKER",s),r())})});Zs.meta={name:"openGdriveFilePicker",key:"actionsCloudFilePickersOpenGdriveFilePickerOpenGdriveFilePicker",description:"Open a window to pick a GDrive file"},Zs.propTypes=zs;var er=Zs,tr=a("XRnC"),ar=a("lSe/");const nr=new x.b("files"),sr={channelId:l.default.string.isRequired,threadTs:l.default.string,metadata:l.default.shape({fileUploadAction:l.default.oneOfType([l.default.number,l.default.string]),fileUploadSrc:l.default.oneOfType([l.default.number,l.default.string])}),reason:l.default.string},rr="auth_required",ir="onenote_not_supported",or="popupOpen",lr="badResponse",cr=e=>{const t=Object(Se.d)(e);return Object(xe.n)(t,ue.l?"apps/A061CBSP3":"apps/A53TM6XA9")},dr=Object(mt.b)("Open a window to pick a OneDrive file",(e,t,{channelId:a,threadTs:n,metadata:s,reason:r}={})=>{if(!Object(m.m)(t(),"feature_sonic_cloud_files_picker"))return Object(Es.j)(a,n,s);const i=t(),o=Object(h.b)(i),l=`${location.origin}/files/import/onedrive?team=${o}${ue.o?"&js_path=1":""}`;if(ue.l&&Object(gn.a)(i,"onedrive_app_installed")){const e=Object(ue.i)().envSubdomain;"dev"!==e&&"dev6"!==e&&Object(ar.c)("The OneDrive picker for the OneDrive v2 app won't work in dev environments other than dev-main or dev6. If you are doing active development, please attach to dev6.")}return fetch(l,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(({status:e}={})=>{if(403===e)throw new Error(rr)}).then(()=>e(Rs({url:l,hidden:!0}))).then(({chosen_files:i}={})=>{const o=Date.now();return Promise.map(i,i=>e((({state:e,channelId:t,threadTs:a,reason:n,link:s}={})=>Object(gn.a)(e,"onedrive_app_installed")?Object(tr.a)({channelId:t,text:s,shouldBroadcast:!1}):Object(Wn.t)({channels:t,threadTs:a,link:s,reason:n||"open-onedrive-file-picker"}))({state:t(),channelId:a,threadTs:n,reason:r,link:i})).then(()=>{Object(ie.a)({getState:t}).track(de.EventId.FILE_COMPLETE_UPLOAD_SUCCESS,{[de.CoreKeys.type]:de.FileUploadType.EXTERNAL,[de.CoreKeys.duration]:Date.now()-o,[de.CoreKeys.has_upload_message]:!1,[de.CoreKeys.file_count]:1,[de.CoreKeys.retry_count]:0,[de.CoreKeys.upload_size]:0,[de.CoreKeys.retry_reason]:"",[de.CoreKeys.did_disconnect_during_upload]:!1,[de.CoreKeys.file_upload_action]:s&&s.fileUploadAction,[de.CoreKeys.file_upload_src]:s&&s.fileUploadSrc})}).catch(e=>{throw e.subtype="files.uploadExternal",e}))}).catch(s=>{const r=({text:t,ephemeralType:s}={})=>e(Object(Hn.c)({ephemeralType:s||Hn.a.onedriveSdkError,message:{channel:a,thread_ts:n,slackbot_feels:"sad_surprise",text:t||nr.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.")}})),i=((e={})=>e.data?e.method&&"files.uploadExternal"===e.method&&e.data.error?e.data.error:e.data.method&&"onedrive_picker"===e.data.method&&e.data.error_code?e.data.error_code:e.message||"Data not OK":e.message||"Data not OK")(s);if(i===rr)return r({text:nr.t("Looks like you\u2019re trying to add a OneDrive file \u2014 first you\u2019ll need to connect <{url}|OneDrive to Slack>.\n\n Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <{url}|Learn more about using OneDrive in Slack>.",{url:cr(t())})});if(i===ir)return r({text:nr.t("It seems like we\u2019re not able to import OneNote notebooks.")});if(i===or)return e(Object(Gn.c)(!0));if(i===lr){const e=s&&s.data&&s.data.error||i;return s.message=e,Object(Ot.a)({getState:t}).error("OneDrive_plus_button_import_failure",s),r({text:nr.t("Sorry, something went wrong. Please confirm that your OneDrive account has been fully set up and try again.\nIf the problem persists, please let us know by contacting <mailto:feedback@slack.com|feedback@slack.com>")})}return s.message=i,Object(Ot.a)({getState:t}).error("OneDrive_plus_button_import_failure",s,s.data&&s.data.error),r()})});dr.meta={name:"openOneDriveFilePicker",key:"actionsCloudFilePickersOpenOnedriveFilePickerOpenOneDriveFilePicker",description:"Open a window to pick a OneDrive file"},dr.propTypes=sr;var ur=dr,pr=a("uPpK"),hr=a("bo4X"),mr=a("pmOY"),br=a("FdTv"),fr=a("8W09"),_r=a("CGJF"),gr=a("AjwY"),yr=a("mIgp"),Or=a("eK0w"),Cr=a("YLnb"),vr=a("b7Ww"),Er=a("1Uzj"),kr=(a("GoIT"),a("fX3E"));const Sr=new x.b("menu_file"),jr=Object(Er.a)(vr.a),Ir=(l.default.array,l.default.string,l.default.bool,l.default.bool,l.default.shape({key:l.default.string,offset:l.default.number}),l.default.func,l.default.func,l.default.func,l.default.func,l.default.string.isRequired,l.default.string,l.default.string,l.default.func,l.default.func,l.default.func,l.default.object,l.default.string,l.default.object.isRequired,l.default.object.isRequired,l.default.bool,l.default.func,l.default.func,l.default.bool,{threadTs:void 0,viewContext:void 0,files:[],filetype:"",currentUser:"",user:!1,scrollmark:void 0,fetchFilesPre:r.a,fetchFilesPost:r.a,saveScrollmark:r.a,setFiletype:r.a,setUser:r.a,getRecentFilesForUser:r.a,closeModal:r.a,openShareDialog:r.a,isInEnforceFileLimitTreatment:!1,hiddenFileInputRef:void 0,showUpload:!1,isLoading:l.default.bool,setisLoading:l.default.func});class omnipicker_dialog_OmniPickerDialog extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onFileClick","onScroll","fetchPre","fetchPost","fetchAround","renderRow","renderFile","clogPricingLinkClick","renderBody","isEmpty","onModalCancel","renderList","renderDynamicList","handleFileTypeChange","handleYourFilesClick","handleYourWorkspaceClick","fetchAllFiles","selectFileFromComputer"]),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.keys=null,this.requestAll=null,this.layout=new Cr.a,this.list=o.a.createRef()}componentDidMount(){var e=this.props;const t=e.scrollmark,a=e.clogger,n=e.user;if(t){const e=t.key,a=t.offset;this.layout.setAnchor(e,a),this.props.saveScrollmark(null)}if(n){const e={types:this.props.filetype};this.fetchAllFiles(e)}this.shouldShowStorageWarningBanner()&&a.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:de.UiAction.IMPRESSION,step:de.UiStep.FILE_PANE,ui_component:de.UiComponent.FILE_STORAGE_LIMIT_BANNER}}})}componentWillUnmount(){this.props.setFiletype(""),this.requestAll&&this.requestAll.cancel()}onFileClick(e){const t=e.id,a=this.list.current;if(!a)return;if(!t)return;var n=this.props;const s=n.user,r=n.clogger,i=s?de.EventId.OMNIPICKER_DIALOG_SHARE_YOUR_RECENT_FILE:de.EventId.OMNIPICKER_DIALOG_SHARE_WORKSPACE_FILE;this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-a.getScrollTop()}),this.props.openShareDialog({fileId:t,showFileType:!0}),r.track(i,{contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.OMNIPICKER_DIALOG}}})}onModalCancel(){const e=this.props.clogger;this.props.closeModal(),e.track(de.EventId.OMNIPICKER_DIALOG_CLOSE_DIALOG,{contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.OMNIPICKER_DIALOG}}})}onScroll(){this.layout.anchor&&this.layout.setAnchor(!1)}UNSAFE_componentWillReceiveProps(e){var t=this.props;const a=t.filetype,n=t.user;e.filetype===a&&e.user===n||(this.requestPre&&this.requestPre.cancel(),this.requestPost&&this.requestPost.cancel(),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.layout&&this.layout.setAnchor(!1))}clogPricingLinkClick(){this.props.clogger.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.OMNIPICKER_DIALOG,ui_element:de.UiElement.PRICING_LINK,ui_component:de.UiComponent.FILE_STORAGE_LIMIT_BANNER}}})}fetchAllFiles(e){this.props.setisLoading(!0),this.requestAll=this.props.getRecentFilesForUser(s()({user:this.props.currentUser,reason:"get-recent-files",count:1e3},e))}fetchAround(){return(!this.requestPre||!this.requestPost)&&(this.reachedEnd?this.fetchPre():this.reachedStart?this.fetchPost():this.fetchPre())}fetchPost(){if(this.requestPost)return!1;if(this.reachedEnd)return!1;const e={types:this.props.filetype};return this.requestPost=this.props.fetchFilesPost(e),this.requestPost.then(({paging:e}={})=>{e.page>=e.pages&&(this.reachedEnd=!0)}).finally(()=>{this.requestPost=null})}fetchPre(){if(this.requestPre)return!1;if(this.reachedStart)return!1;const e={types:this.props.filetype};return this.requestPre=this.props.fetchFilesPre(e),this.reachedStart||this.props.setisLoading(!0),this.requestPre.then(({paging:e}={})=>{1===e.page&&(this.reachedStart=!0,this.props.setisLoading(!1))}).finally(()=>{this.requestPre=null})}handleFileTypeChange(e){if(this.props.setFiletype(e),this.props.user){const t={types:e};this.fetchAllFiles(t)}}handleYourFilesClick(){var e=this.props;const t=e.filetype,a=e.clogger;this.props.setUser(!0);const n={types:t};this.fetchAllFiles(n),a.track(de.EventId.OMNIPICKER_DIALOG_VIEW_YOUR_FILES,{contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.OMNIPICKER_DIALOG}}})}handleYourWorkspaceClick(){const e=this.props.clogger;this.props.setUser(!1),e.track(de.EventId.OMNIPICKER_DIALOG_VIEW_WORKSPACE_FILES,{contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.OMNIPICKER_DIALOG}}})}isEmpty(){return this.props.user?!this.props.files.length:!this.props.files.length&&this.reachedStart&&this.reachedEnd}selectFileFromComputer(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.viewContext,s=e.hiddenFileInputRef,r=e.clogger,i=e.logger;s&&s.current?(s.current.click(),this.props.closeModal()):Object(re.a)()?i.error("MSG_INPUT_FILE_BTN","Missing hidden input"):Tn(t,a,n),r.track(de.EventId.OMNIPICKER_DIALOG_UPLOAD_FILE,{contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.OMNIPICKER_DIALOG}}})}shouldShowStorageWarningBanner(){return this.props.isInEnforceFileLimitTreatment}renderBody(){var e=this.props;const t=e.user,a=e.files,n=e.isLoading,s=a.map(e=>e.id);return this.keys=[...s],t||this.reachedEnd||this.keys.push(`Loading${this.keys.length}`),this.isEmpty()&&this.keys.push("Placeholder"),n?o.a.createElement("div",{className:"p-omnipicker_dialog__loading_spinner"},o.a.createElement(Kt.a,{size:"jumbo"})):o.a.createElement("div",{className:"p-omnipicker_dialog__list_content","data-qa":"omnipicker_dialog_list"},o.a.createElement(o.a.Fragment,null,this.shouldShowStorageWarningBanner()&&this.renderStorageWarningBanner(),t?this.renderList():this.renderDynamicList()))}renderDynamicList(){return o.a.createElement(pr.a,null,({width:e,height:t})=>o.a.createElement(Or.a,{height:t,width:e,keys:this.keys,layout:this.layout,rowRenderer:this.renderRow,onScroll:this.onScroll,ref:this.list,loadAround:this.fetchAround,loadPre:this.fetchPre,loadPost:this.fetchPost,onItemTabWithin:this.onItemTabWithin,onItemClick:this.onFileClick}))}renderFile(e){const t=this.props.files[e]&&this.props.files[e].id;if(!t)return null;const a=e===this.props.files.length-1,n=d()("p-omnipicker_dialog__file",{"p-omnipicker_dialog__file--last":a});return o.a.createElement(jr,{fileId:t,className:n,showActions:!1,"data-qa":"test-file",fullWidth:!0})}renderList(){return o.a.createElement(pr.a,null,({width:e,height:t})=>o.a.createElement(yr.b,{height:t,width:e,keys:this.keys,ref:this.list,layout:this.layout,onScroll:this.onScroll,rowRenderer:this.renderRow,onItemClick:this.onFileClick}))}renderRow(e){const t=this.keys[e];if(!t)return null;switch(t[0]){case"L":return o.a.createElement("div",{className:"p-omnipicker_dialog__list--loading"},Sr.t("Loading\u2026"));case"P":return o.a.createElement("div",{className:"p-omnipicker_dialog__list--empty"},Sr.t("No matching files were found."));default:return this.renderFile(e)}}renderStorageWarningBanner(){const e=new x.b("files");return o.a.createElement("div",{className:"p-omnipicker_dialog__storage-warning-container"},o.a.createElement("div",{className:"display_flex"},o.a.createElement(bn.b,{className:"p-message_limit_banner__graphic",type:"eye-closed"}),o.a.createElement("div",null,o.a.createElement("span",null,e.rt("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,({text:e})=>o.a.createElement(Ze.a,{href:Object(gr.k)({entryPoint:"omnipicker_dialog"}),onClick:this.clogPricingLinkClick,target:"new","data-qa":"file-flexpane__pricing-link"},e))))))}render(){var e=this.props;const t=e.filetype,a=e.user,n=e.showUpload,s=Sr.t("Your recent files"),r=Sr.t("Workspace files"),i=a?s:r;return o.a.createElement(hr.a,{className:"p-omnipicker_dialog",fullscreen:!0,maxWidth:"950px",showCloseButton:!1,closeModal:this.props.closeModal},o.a.createElement(mr.a,{className:"p-omnipicker_dialog__header"},o.a.createElement(br.a,{id:"unshareConfirmPost__title-bar",title:"Browse","data-qa":"dialog_header"}),o.a.createElement("div",{className:"p-omnipicker_dialog__header--selector"},o.a.createElement("h3",null,i),o.a.createElement(kr.a,{filetype:t,onChange:this.handleFileTypeChange}))),o.a.createElement("div",{className:"p-omnipicker_dialog__content"},o.a.createElement("div",{className:"p-omnipicker_dialog__menu"},o.a.createElement(fn.f,null,o.a.createElement(fn.b,{"data-qa":"view_your_files_menu_item",label:Sr.t("Your files"),disabled:a,className:a?"c-menu_item__button__selected":"",icon:o.a.createElement(bn.b,{type:"user"}),onSelected:this.handleYourFilesClick}),o.a.createElement(fn.b,{"data-qa":"view_your_workspace_files_menu_item",label:Sr.t("Your workspace"),disabled:!a,className:a?"":"c-menu_item__button__selected",icon:o.a.createElement(bn.b,{type:"slack"}),onSelected:this.handleYourWorkspaceClick}),n&&o.a.createElement(fn.b,{"data-qa":"add_file_from_computer_menu_item",label:Sr.t("Your computer"),icon:o.a.createElement(bn.b,{type:"laptop"}),onSelected:this.selectFileFromComputer}))),o.a.createElement("div",{className:"p-omnipicker_dialog__list"},this.renderBody())),o.a.createElement(fr.a,{"data-qa":"dialog_footer"},o.a.createElement(_r.a,null,o.a.createElement(_e.d,{type:"outline",onClick:this.onModalCancel,"data-qa":"dialog_cancel"},"Cancel"))))}}omnipicker_dialog_OmniPickerDialog.displayName="OmniPickerDialog",omnipicker_dialog_OmniPickerDialog.defaultProps=Ir;const wr={fetchFilesPre:(...e)=>Object(En.c)(...e),fetchFilesPost:(...e)=>Object(En.b)(...e),saveScrollmark:(...e)=>Object(En.l)(...e),setFiletype:(...e)=>Object(En.m)(...e),closeModal:(...e)=>Object(ga.a)(...e),getRecentFilesForUser:(...e)=>Object(En.k)(...e),openShareDialog:(...e)=>Object(vn.a)(...e),setUser:(...e)=>Object(En.n)(...e),setisLoading:(...e)=>Object(En.p)(...e)};var Tr=Object(u.b)(e=>({files:Object(En.d)(e),scrollmark:Object(En.h)(e),filetype:Object(En.e)(e),clogger:Object(ie.a)({state:e}),logger:Object(Ot.a)({state:e}),currentUser:Object(m.d)(e),user:Object(En.i)(e),isLoading:Object(En.j)(e)}),wr)(omnipicker_dialog_OmniPickerDialog);const Nr=Object(mt.b)("Opens the omni-picker file dialog",(e,t,a)=>{e(Object(ga.e)({element:o.a.createElement(Tr,a)}))});Nr.meta={name:"openOmniPickerDialog",key:"actionsOpenOmnipickerDialogOpenOmniPickerDialog",description:"Opens the omni-picker file dialog"},Nr.propTypes={type:l.default.string,displayType:l.default.string,initialChannelId:l.default.string};var Ar=Nr,Rr=a("RB1+"),Mr=a("EHyS"),Pr=a("hjTk"),xr=a("x4bP"),Lr=a("cErB");const Fr=Object(mt.b)("Creates and opens a legacy Post",(e,t,{openInBrowser:a}={})=>{if(!Object(xr.a)())return void Object(Es.b)(null,a);const n=t(),s=Object(Se.d)(n);let r=Object(xe.n)(s,`/files/create/post${location.search}`);const i=Object(h.a)(n);r=Object(Lr.p)(r,"origin_team",i||s.id);const o=Object(_.a)(n);r=Object(Lr.p)(r,"origin_channel",Object(An.a)(o)?o:""),Object(Pr.a)(r)});Fr.meta={name:"createAndOpenLegacyPost",key:"actionsCreateAndOpenLegacyPostCreateAndOpenLegacyPost",description:"Creates and opens a legacy Post"},Fr.defaultProps={openInBrowser:!0},Fr.propTypes={openInBrowser:l.default.bool};a("GdkL");const Dr=new x.b("menu_file"),Br=(l.default.string.isRequired,l.default.string,l.default.string,l.default.string,l.default.object,l.default.bool,l.default.bool,l.default.bool,l.default.object,l.default.object.isRequired,l.default.object.isRequired,l.default.func,l.default.func.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool.isRequired,l.default.bool.isRequired,l.default.string,l.default.bool,l.default.array,l.default.func,l.default.func,l.default.bool,l.default.func,l.default.bool,l.default.func,l.default.object,{threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,menuProps:{},featureDocs:!1,featureSonicInputs:!1,featureSonicSnippets:!1,featureRecentFilesOmnipicker:!1,featurePlusMenuAddAppsLink:!1,hiddenFileInputRef:void 0,createDocPost:r.a,showBoxMenuItem:!1,showDropboxMenuItem:!1,boxAppInstalled:!1,showGdriveMenuItem:!1,showOneDriveMenuItem:!1,openSnippetDialog:r.a,openCreateGDocDialog:r.a,openBoxFilePicker:r.a,openOnedriveFilePicker:r.a,openDropboxFilePicker:r.a,openGdriveFilePicker:r.a,getRecentFilesForUser:r.a,openShareDialog:r.a,featureBoxContentPicker:!1,featureSonicCloudFilesPicker:!1,currentUser:void 0,featureModernGdriveCreate:!1,recentFiles:[],openOmniPickerDialog:r.a,setUser:r.a,setfirstLoad:r.a,setisLoading:r.a,firstLoad:!1,isLoading:!1,isBoxAuthed:!1,currentTeam:void 0}),Ur="At06175UHW",qr="At0EFRCDPW",Hr="A0F82E57C",Wr="A06147X5W";class new_file_menu_NewFileMenu extends i.Component{constructor(e){super(e),this.activeCloudServices=[],this.requestAll=null,Object(la.a)(this,["selectFileFromComputer","createDoc","createSnippet","createLegacyPost","createGDRiveDocument","createGDRiveSpreadsheet","createGDRivePresentation","renderCreateNewSubmenu","clogAddAppsClick","handleBoxFileProvider","handleDropboxFileProvider","handleGdriveFileProvider","handleOnedriveFileProvider","renderMultipleCloudServices","setRecentFiles","handleRecentFile","handleYourRecentFilesPicker","renderRecents","renderRecentsSection"])}componentDidMount(){this.props.featureRecentFilesOmnipicker&&this.setRecentFiles()}componentWillUnmount(){this.requestAll&&this.requestAll.cancel()}setRecentFiles(){var e=this.props;const t=e.currentUser,a=e.firstLoad;this.props.setUser(!0),a||this.props.setisLoading(!0),this.requestAll=this.props.getRecentFilesForUser({user:t,reason:"get-recent-files",forMenu:!0,count:1e3}).then(()=>{a||this.props.setfirstLoad(!0)})}selectFileFromComputer(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.viewContext,s=e.hiddenFileInputRef,r=e.clogger,i=e.logger;s&&s.current?(s.current.click(),r.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_upload"}}})):Object(re.a)()?i.error("MSG_INPUT_FILE_BTN","Missing hidden input"):Tn(t,a,n)}createDoc(){this.props.createDocPost()}createSnippet(){var e=this.props;const t=e.clogger,a=e.channelId,n=e.viewContext,s=e.threadTs;t.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_snippet"}}});const r=Object(Rr.a)({viewContext:n,channelId:a,threadTs:s});this.props.openSnippetDialog({initialText:r&&r.getDisplayValue?r.getDisplayValue():"",initialContents:r&&r.getContents?r.getContents():void 0,initialChannelId:a,threadTs:s,viewContext:n}),r&&r.clear()}createLegacyPost(e){const t=Object(Mr.a)(e);this.props.createAndOpenLegacyPost({openInBrowser:t}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_space"}}})}createGDRiveDocument(){this.props.openCreateGDocDialog({type:"document",displayType:this.props.featureSonicInputs?Dr.t("Document"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_document"}}})}createGDRiveSpreadsheet(){this.props.openCreateGDocDialog({type:"spreadsheet",displayType:this.props.featureSonicInputs?Dr.t("Spreadsheet"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_spreadsheet"}}})}createGDRivePresentation(){this.props.openCreateGDocDialog({type:"presentation",displayType:this.props.featureSonicInputs?Dr.t("Presentation"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_presentation"}}})}handleBoxFileProvider(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.isBoxAuthed,s=e.boxAppInstalled,r=e.currentTeam,i={fileUploadAction:de.FileUploadAction.PLUS_MENU,fileUploadSrc:de.FileUploadSrc.BOX},o=ue.l?Wr:Hr;return!n&&s?Object(Cn.g)(Object(xe.n)(r,`/apps/${o}`)):this.props.openBoxFilePicker({channelId:t,threadTs:a,metadata:i})}handleDropboxFileProvider(){var e=this.props;const t=e.channelId,a=e.threadTs,n={fileUploadAction:de.FileUploadAction.PLUS_MENU,fileUploadSrc:de.FileUploadSrc.DROPBOX};return this.props.openDropboxFilePicker({channelId:t,threadTs:a,metadata:n})}handleGdriveFileProvider(){var e=this.props;const t=e.channelId,a=e.threadTs,n={fileUploadAction:de.FileUploadAction.PLUS_MENU,fileUploadSrc:de.FileUploadSrc.GOOGLE_DRIVE};return this.props.openGdriveFilePicker({channelId:t,threadTs:a,metadata:n,reason:"cloud-files-menu/gdrive"})}handleOnedriveFileProvider(){var e=this.props;const t=e.channelId,a=e.threadTs,n={fileUploadAction:de.FileUploadAction.PLUS_MENU,fileUploadSrc:de.FileUploadSrc.ONEDRIVE};return this.props.openOnedriveFilePicker({channelId:t,threadTs:a,metadata:n,reason:"cloud-files-menu/onedrive"})}handleRecentFile(e){var t=this.props;const a=t.clogger,n=t.viewContext,s=t.channelId,r=t.threadTs,i=Object(Rr.a)({viewContext:n,channelId:s,threadTs:r});a.track(de.EventId.FILE_MENU_SHARE_YOUR_RECENT_FILE,{contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.FILE_MENU}}}),this.props.openShareDialog({fileId:e.id,showFileType:!0,initialText:i&&i.getDisplayValue?i.getDisplayValue():"",initialContents:i&&i.getContents?i.getContents():void 0})}handleYourRecentFilesPicker(e,t){var a=this.props;const n=a.channelId,s=a.threadTs,r=a.viewContext,i=a.hiddenFileInputRef,o=a.disableFileUploadsPref,l=a.clogger,c=t?de.EventId.FILE_MENU_BROWSE_YOUR_FILES:de.EventId.FILE_MENU_OPEN_WORKSPACE_FILES,d="disable_all"!==o;this.props.setUser(t),this.props.openOmniPickerDialog({channelId:n,threadTs:s,viewContext:r,hiddenFileInputRef:i,showUpload:d}),l.track(c,{contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.FILE_MENU}}})}clogAddAppsClick(){this.props.clogger.track(de.EventId.FILE_MENU_ADD_APPS,{contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.FILE_MENU}}})}renderMultipleCloudServices(){var e=this.props;const t=e.featureSonicCloudFilesPicker,a=e.featureOfflineMode,n=e.isOffline,s=e.disableFileUploadsPref,r=e.showBoxMenuItem,l=e.showDropboxMenuItem,c=e.showGdriveMenuItem,d=e.showOneDriveMenuItem,u=e.featurePlusMenuAddAppsLink,p="disable_all_except_images"===s,h=r||l||c||d?Dr.t("Add from\u2026"):Dr.t("Add an image from\u2026"),m=`/apps/category/${ue.l?Ur:qr}`,b=u&&!this.activeCloudServices.length?Dr.rt("Add a file from\u2026 <a>+ Add apps</a>",{},({text:e,key:t})=>o.a.createElement(Ze.a,{key:t,className:"c-menu_item__addrow",href:m,onClick:this.clogAddAppsClick},e)):Dr.t("Add a file from\u2026"),f={};var _=this.props;f.box=_.showBoxMenuItem,f.dropbox=_.showDropboxMenuItem,f.gdrive=_.showGdriveMenuItem,f.onedrive=_.showOneDriveMenuItem;const g=[{name:"box",props:{label:Dr.t("Box"),icon:o.a.createElement(bn.b,{type:"box"}),onSelected:this.handleBoxFileProvider,enableForSonic:this.props.featureBoxContentPicker,dataQa:"box_picker_menu_item"}},{name:"dropbox",props:{label:Dr.t("Dropbox"),icon:o.a.createElement(bn.b,{type:"dropbox"}),onSelected:this.handleDropboxFileProvider,enableForSonic:!0,dataQa:"dropbox_picker_menu_item"}},{name:"gdrive",props:{label:Dr.t("Google Drive"),icon:o.a.createElement(bn.b,{type:"google-drive"}),onSelected:this.handleGdriveFileProvider,enableForSonic:!0,dataQa:"gdrive_picker_menu_item"}},{name:"onedrive",props:{label:Dr.t("OneDrive"),icon:o.a.createElement(bn.b,{type:"onedrive"}),onSelected:this.handleOnedriveFileProvider,enableForSonic:!0,dataQa:"onedrive_picker_menu_item"}}];this.activeCloudServices=Object(_n.a)(g,e=>f[e.name]?f[e.name]:null);const y=Object(ht.a)(this.activeCloudServices,(e,s)=>o.a.createElement(fn.b,{key:s,label:e.props.label,icon:e.props.icon,onSelected:e.props.onSelected,className:t&&e.props.enableForSonic?"":jn(),disabled:a&&n,showOfflineIcon:a&&n,"data-qa":e.props.dataQa},t&&e.props.enableForSonic?null:o.a.createElement(In,null)));return o.a.createElement(i.Fragment,null,o.a.createElement(fn.c,{label:p?h:b}),y)}renderCreateNewMenuItems(){var e=this.props;const t=e.featureDocs,a=e.featureSonicSnippets,n=e.showGdriveMenuItem,s=e.threadTs,r=e.featureOfflineMode,i=e.isOffline,l=e.featureModernGdriveCreate,c=Dr.t("Post"),d=!s&&o.a.createElement(fn.b,{key:"create-new-post",label:c,icon:o.a.createElement(bn.b,{type:"create-post"}),onSelected:t?this.createDoc:this.createLegacyPost,disabled:r&&i,showOfflineIcon:r&&i,"data-qa":"create_new_doc"}),u=(a&&Object(re.a)()||!s)&&o.a.createElement(fn.b,{key:"create-new-snippet",label:Dr.t("Code or text snippet"),icon:o.a.createElement(bn.b,{type:"create-snippet"}),onSelected:this.createSnippet,className:a?void 0:jn(),disabled:r&&i,showOfflineIcon:r&&i,"data-qa":"create_new_snippet"},a?null:o.a.createElement(In,null)),p=!n||s&&!Object(re.a)()?[]:[(u||d)&&o.a.createElement(fn.d,{key:"gdrive-separator"}),o.a.createElement(fn.c,{key:"gdrive-header",label:Dr.t("Google Drive")}),o.a.createElement(fn.b,{key:"gdrive_doc",label:Dr.t("Document"),icon:o.a.createElement(bn.b,{type:"google-drive",className:"p-new_file_menu__gdoc_icon"}),onSelected:this.createGDRiveDocument,className:l?"undefined":jn(),disabled:r&&!jn()&&i,showOfflineIcon:r&&i,"data-qa":"google_doc_menu_item"},l?null:o.a.createElement(In,null)),o.a.createElement(fn.b,{key:"gdrive_sheet",label:Dr.t("Spreadsheet"),icon:o.a.createElement(bn.b,{type:"google-drive",className:"p-new_file_menu__gsheet_icon"}),onSelected:this.createGDRiveSpreadsheet,className:l?void 0:jn(),disabled:r&&!jn()&&i,showOfflineIcon:r&&i,"data-qa":"google_sheet_menu_item"},l?null:o.a.createElement(In,null)),o.a.createElement(fn.b,{key:"gdrive_presentation",label:Dr.t("Presentation"),icon:o.a.createElement(bn.b,{type:"google-drive",className:"p-new_file_menu__gpres_icon"}),onSelected:this.createGDRivePresentation,className:l?void 0:jn(),disabled:r&&!jn()&&i,showOfflineIcon:r&&i,"data-qa":"google_presentation_menu_item"},l?null:o.a.createElement(In,null))];return Object(_n.a)([d,u,...p])}renderCreateNewSubmenu(e){const t=this.props.menuProps,a=this.renderCreateNewMenuItems();return o.a.createElement(fn.f,s()({},t,e,{"data-qa":"create_new_submenu"}),a)}renderCreateNew(){var e=this.props;const t=e.threadTs,a=e.showGdriveMenuItem,n=this.renderCreateNewMenuItems();if(0===n.length)return null;const s=!t&&Object(re.a)()&&a?{top:-80}:void 0;return[1===n.length?n[0]:o.a.createElement(kn.a,{key:"create-new-submenu",label:Dr.t("Create new..."),icon:o.a.createElement(bn.b,{type:"plus-circle"}),renderSubmenu:this.renderCreateNewSubmenu,"data-qa":"create_new_submenu",forceLeft:!!t,submenuStyle:s}),o.a.createElement(fn.d,{key:"create-new-separator"})]}renderRecents(){var e=this.props;const t=e.recentFiles;return[e.isLoading?o.a.createElement(i.Fragment,{key:"recent-placeholders"},o.a.createElement(fn.b,{key:"0",disabled:!0},o.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),o.a.createElement(fn.b,{key:"1",disabled:!0},o.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),o.a.createElement(fn.b,{key:"2",disabled:!0},o.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),o.a.createElement(fn.b,{key:"3",disabled:!0},o.a.createElement("span",{className:"c-missing_menu_item__button--loading"}))):Object(ht.a)(t.slice(0,4),e=>o.a.createElement(fn.b,{key:e.id,label:e.title,icon:o.a.createElement(bn.b,{type:e.filetype,file:"tiny"}),onSelected:()=>this.handleRecentFile(e),"data-qa":"recent_file_menu_item"}))]}renderRecentsSection(){var e=this.props;const t=e.recentFiles,a=e.isLoading;return o.a.createElement(i.Fragment,null,this.renderRecents(),!a&&t.length?o.a.createElement(i.Fragment,null,o.a.createElement(fn.b,{className:"c-menu_item__browsefiles",key:"browse-files",onSelected:e=>{this.handleYourRecentFilesPicker(e,!0)}},o.a.createElement(Ze.a,{key:"browse-files-link",href:"/",onClick:e=>{e.preventDefault()}},Dr.t("Browse files"))),o.a.createElement(fn.d,{key:"create-new-separator"})):null)}render(){var e=this.props;const t=e.disableFileUploadsPref,a=e.menuProps,n=e.recentFiles,r=e.featureRecentFilesOmnipicker,i=e.isLoading,l="disable_all"!==t,c=Dr.t("Add file",{fallbackHash:"4881d0113be00c1d361cb809405df63a3d923445",fallbackHashNs:"multi_file_upload"});return o.a.createElement(fn.f,s()({},a,{"aria-label":c}),this.renderCreateNew(),r&&(i||n.length)?o.a.createElement(fn.c,{label:Dr.t("Your recent files")}):null,r&&this.renderRecentsSection(),this.renderMultipleCloudServices(this.props),r&&o.a.createElement(fn.b,{"data-qa":"open_omnipicker_for_workspace_from_menu_item",label:Dr.t("Your workspace"),icon:o.a.createElement(bn.b,{type:"slack"}),onSelected:e=>{this.handleYourRecentFilesPicker(e,!1)}}),l&&o.a.createElement(fn.b,{"data-qa":"add_file_from_computer_menu_item",label:Dr.t("Your computer"),icon:o.a.createElement(bn.b,{type:"laptop"}),onSelected:this.selectFileFromComputer}))}}new_file_menu_NewFileMenu.displayName="NewFileMenu",new_file_menu_NewFileMenu.defaultProps=Br;var Gr=Object(u.b)(function(e){const t=Object(gn.a)(e,"dropbox_legacy_picker"),a=Object(ba.k)(e,"dropbox_enabled"),n=Object(ba.k)(e,"box_enabled"),s=Object(gn.a)(e,"box_app_installed"),r=ue.l?Object(yn.e)(e,Wr):Object(yn.e)(e,Hr),i=Object(On.e)(r),o=a||t,l=Object(gn.a)(e,"onedrive_enabled_team"),c=Object(gn.a)(e,"onedrive_app_installed"),d=l||c;return{disableFileUploadsPref:Object(gn.a)(e,"disable_file_uploads"),featureSonicInputs:Object(m.m)(e,"feature_sonic_inputs"),featureSonicSnippets:Object(m.m)(e,"feature_sonic_snippets"),featurePlusMenuAddAppsLink:Object(m.m)(e,"feature_plus_menu_add_apps_link"),featureRecentFilesOmnipicker:Object(m.m)(e,"feature_recent_files_omnipicker"),featureDocs:Object(m.m)(e,"feature_docs"),featureBoxContentPicker:Object(m.m)(e,"feature_box_content_picker"),featureSonicCloudFilesPicker:Object(m.m)(e,"feature_sonic_cloud_files_picker"),featureModernGdriveCreate:Object(m.m)(e,"feature_modern_gdrive_create"),clogger:Object(ie.a)({state:e}),logger:Object(Ot.a)({state:e}),showBoxMenuItem:s||n&&i,showDropboxMenuItem:o,showGdriveMenuItem:Object(gn.a)(e,"gdrive_enabled_team"),isBoxAuthed:n,boxAppInstalled:s,showOneDriveMenuItem:d,featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),currentUser:Object(m.d)(e),isOffline:!Object(pa.c)(e),recentFiles:Object(En.g)(e),firstLoad:Object(En.f)(e),isLoading:Object(En.j)(e),currentTeam:Object(Se.d)(e)}},e=>({createDocPost:(...t)=>e(Rn(...t)),createAndOpenLegacyPost:(...t)=>e(Fr(...t)),openSnippetDialog:(...t)=>e(Sa(...t)),openCreateGDocDialog:(...t)=>e(us(...t)),openBoxFilePicker:(...t)=>e(Fs(...t)),openDropboxFilePicker:(...t)=>e(Ks(...t)),openGdriveFilePicker:(...t)=>e(er(...t)),openOnedriveFilePicker:(...t)=>e(ur(...t)),getRecentFilesForUser:(...t)=>e(Object(En.k)(...t)),openShareDialog:(...t)=>e(Object(vn.a)(...t)),openOmniPickerDialog:(...t)=>e(Ar(...t)),setUser:(...t)=>e(Object(En.n)(...t)),setFiletype:(...t)=>e(Object(En.m)(...t)),setfirstLoad:(...t)=>e(Object(En.o)(...t)),setisLoading:(...t)=>e(Object(En.p)(...t))}))(new_file_menu_NewFileMenu),Kr=a("anFW"),Vr=a("bmfP"),zr=a("auxT"),$r=a("DCka"),Yr=a("0Qg5"),Qr=a("LWrH"),Xr=a("RAhH");const Jr=new x.b("message_input_plus_button"),Zr=(l.default.string,l.default.string,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.object.isRequired,l.default.string,{channelId:void 0,threadTs:void 0,viewContext:void 0,featureOfflineMode:!1,isComposerPage:!1,isOpen:!1,onFileMenuOpen:r.a,onFileMenuClose:r.a,forceOpen:!1,useLegacyCreate:!1,keyboardLocale:void 0}),ei="MSG_INPUT_FILE_BTN";class message_input_file_button_MessageInputFileButton extends i.Component{constructor(){super(),Object(la.a)(this,["renderMenu","renderTip"]),this.hiddenFileInputRef=o.a.createRef()}renderMenu(e){var t=this.props;const a=t.channelId,n=t.threadTs,s=t.logger,r=t.viewContext;return a?o.a.createElement($r.a,{subtype:ei},o.a.createElement(Gr,{menuProps:e,channelId:a,threadTs:n,viewContext:r,hiddenFileInputRef:this.hiddenFileInputRef})):(s.error(ei,`Missing channelId in ${r}`),null)}renderTip({isOffline:e}={}){const t=Object(Yr.a)("Cmd",this.props.keyboardLocale),a=o.a.createElement("div",{className:"c-tooltip__tip_shortcut"},`${t}+U`),n=Jr.rt("Attach file {keyboardShortcut}",{keyboardShortcut:a,fallbackHash:"0c431f4969959dd3463afd487244f98660be5ae0"});return e?o.a.createElement(zr.a,{tooltipLabel:n}):n}render(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.viewContext,s=e.featureOfflineMode,r=e.isComposerPage,l=e.isOpen,c=e.onFileMenuOpen,u=e.onFileMenuClose,p=e.forceOpen,h=e.useLegacyCreate,m=d()("p-message_input_file_button",{"p-message_input_file_button--active":l}),b=o.a.createElement(_e.c,{className:m,"aria-label":Jr.t("File menu"),tabIndex:"-1","data-qa":"msg_input_file_btn"},o.a.createElement(bn.b,{className:"p-message_input_file_icon",type:h?"plus-thick":"paperclip"})),f=o.a.createElement(Xr.c,{tip:this.renderTip(),position:"top",offsetY:-7,delay:500,zIndex:"above_fs"},b);let _=o.a.createElement(fn.e,{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:c,onClose:u,forceOpen:p},f);s&&(_=o.a.createElement(i.Fragment,null,o.a.createElement(Vr.b,null,_),o.a.createElement(Vr.a,null,o.a.createElement(fn.e,{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:c,onClose:u},o.a.createElement(Xr.c,{tip:this.renderTip({isOffline:!0})},b)))));const g=o.a.createElement(Xr.c,{offsetY:-6,position:"top",tip:"Files support coming soon \u2728!"},b);return o.a.createElement(i.Fragment,null,r?g:_,o.a.createElement(Kr.a,{ref:this.hiddenFileInputRef,channelId:t,threadTs:a,viewContext:n}))}}message_input_file_button_MessageInputFileButton.displayName="MessageInputFileButton",message_input_file_button_MessageInputFileButton.defaultProps=Zr;const ti=Object(u.b)(function(e){return{featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),logger:Object(Ot.a)({state:e})}})(message_input_file_button_MessageInputFileButton);var ai=Object(Qr.a)(ti);const ni=new x.b("msg_input"),si=(l.default.func.isRequired,l.default.bool,l.default.bool,l.default.string,l.default.bool,l.default.string,l.default.bool,{isDisabled:!1,isOffline:!1,className:void 0,featureOfflineMode:!1,buttonSize:void 0,showTooltip:!1}),ri=({isDisabled:e,isOffline:t,className:a,sendMessage:n,featureOfflineMode:s,buttonSize:r,showTooltip:i})=>{const l=ni.t("Send");let c;i&&(c=Object(ue.q)()?ni.t("\u2318Enter"):ni.t("Ctrl+Enter"));let d="top",u=o.a.createElement(_e.d,{className:a,pillarClassName:"p-message_input__send",disabled:e||t,onClick:n,size:r},l);return s&&t&&(u=o.a.createElement("div",{style:{marginLeft:"auto"}},u),d="top-right",c=o.a.createElement(zr.a,{tooltipLabel:l})),e&&!s?u:c?o.a.createElement(Xr.c,{tip:c,position:d},u):u};ri.displayName="MessageInputSendButton",ri.defaultProps=si;var ii=Object(u.b)(e=>({isOffline:!Object(pa.c)(e),featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),showTooltip:Object(ba.k)(e,"msg_input_send_btn")}))(ri),oi=mn;const li=new x.b("msg_input");function ci({channelName:e,isSelfDm:t}){return t?li.t("Jot something down"):e?li.t("Message {msg}",{msg:Object(x.q)(e)}):li.t("Message channel")}a("HaAk");const di=new x.b("welcome_place");var ui=Object(u.b)(e=>{const t=Object(oe.k)(e);let a;if(Object(oe.o)(e)){const n=Object(B.k)(e,t);a=Object(q.x)(e,n,{imIncludeAtSign:!1})}else{const n=Object(B.e)(e,t);a=Object(q.x)(e,n)}return{channelName:a,featureWysiwygComposer:Object(rt.a)(e),clogger:Object(ie.a)({state:e}),pageViewingSessionId:Object(oe.i)(e)}})(({channelName:e,inputRef:t,sendMessage:a,onTextChange:n,featureWysiwygComposer:s})=>o.a.createElement("div",{className:"display_flex align_items_center margin_bottom_50"},o.a.createElement(oi,{className:"welcome-place-message-input margin_right_100",enableEmojiButton:!0,enableFileButton:!1,enableMentionButton:!0,enableSendButton:!1,enableSnippetCreation:!1,enableJumbomoji:!1,placeholder:ci({channelName:e,isSelfDm:!1}),ref:t,sendMessage:a,onTextChange:n,enableComposerButton:s}),o.a.createElement(_e.d,{type:"primary",onClick:a,className:"align_self_start nudge_top_2"},di.t("Send"))));const pi=new x.b("welcome_place"),hi={sendWelcomePlaceInputMessage:le.g,fetchHistory:Ut,joinAndSwitchToChannel:nt.a};var mi=Object(u.b)(e=>{const t=Object(oe.k)(e),a=Object(B.e)(e,t),n=Object(q.x)(e,a);var s=Qe(e,t,3);const r=s.messages,i=s.slice,o=r.length>0;return{channelId:t,channelName:n,featureWysiwygComposer:Object(rt.a)(e),isChannelNonEmpty:o,clogger:Object(ie.a)({state:e}),pageViewingSessionId:Object(oe.i)(e),lastMessages:r,needToRefetchMessages:!i||!i.reachedEnd}},hi)(({channelId:e,channelName:t,fetchHistory:a,sendWelcomePlaceInputMessage:n,featureWysiwygComposer:s,isChannelNonEmpty:r,joinAndSwitchToChannel:l,clogger:c,pageViewingSessionId:d,needToRefetchMessages:u,lastMessages:p})=>{var h=Object(i.useState)(!0),m=at()(h,2);const b=m[0],f=m[1];var _=Object(i.useState)(!1),g=at()(_,2);const y=g[0],O=g[1];var C=Object(i.useState)(u),v=at()(C,2);const E=v[0],k=v[1];Object(i.useEffect)(()=>{u&&!y&&(O(!0),a({channelId:e,type:"channel"}).then(()=>{O(!1),k(!1)}))},[u,y,a,e]);const S=Object(i.useRef)(null),j=()=>S.current.getWrappedInstance(),I=t=>{l({channelId:e}),c.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.CLICK,ui_element:de.UiElement.WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:de.ElementType.LINK,element_name:t}},welcome_place:{welcome_session_id:d}}})};return o.a.createElement("div",{className:"welcome-place-send-message-card"},o.a.createElement(ra,{isLoading:E,onChannelLinkClicked:I,lastMessages:p}),o.a.createElement("div",{className:"welcome-place-send-message-pane padding_left_150 padding_right_150 padding_top_100 padding_bottom_100"},o.a.createElement("p",{className:"welcome-place-send-message-card--header-subtitle"},pi.rt("Your message will be posted in {channelName}.",{channelName:o.a.createElement(Ze.a,{onClick:()=>I("channel_header")},t)})),o.a.createElement(ui,{inputRef:S,sendMessage:()=>{if(!b){const t=j().getContents(),a=s?new qt.Delta(t.contents):null;n({text:Object(it.a)(t),channelOrMemberId:e,delta:a}),c.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.CLICK,ui_element:de.UiElement.WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:de.ElementType.BUTTON,element_name:"send_channel_message"}},welcome_place:{welcome_session_id:d}}})}},onTextChange:e=>f(0===e.length)}),o.a.createElement(Gt,{hasMessagesToRender:r,prefillMessageInput:e=>{const t=j();t.value(Object(st.b)(e)),t.setCursorAtEnd()}})))}),bi=a("G4ux"),fi=a("3dqR");const _i=new x.b("welcome_place"),gi={sendWelcomePlaceInputMessage:le.g};var yi=Object(u.b)(e=>{const t=Object(xe.e)(Object(Se.d)(e)),a=Object(m.d)(e),n=Object(bi.d)(e,a),s=Object(Je.K)(n),r=Object(oe.k)(e),i=Object(bi.d)(e,r);return{userId:a,username:s,inviterId:r,inviterDisplayName:Object(Je.W)(e,r),inviterRealName:Object(Je.K)(i),teamName:t,featureWysiwygComposer:Object(rt.a)(e),clogger:Object(ie.a)({state:e}),pageViewingSessionId:Object(oe.i)(e)}},gi)(({userId:e,username:t,inviterId:a,inviterDisplayName:n,inviterRealName:s,teamName:r,sendWelcomePlaceInputMessage:l,featureWysiwygComposer:c,clogger:d,pageViewingSessionId:u})=>{var p=Object(i.useState)(!0),h=at()(p,2);const m=h[0],b=h[1],f=Object(i.useRef)(null),_=()=>f.current.getWrappedInstance();return o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"welcome-place-send-message-card welcome-place-send-message-card--caret_left margin_bottom_100 margin_right_600 sk_primary_background"},o.a.createElement("div",{className:"padding_top_75 padding_left_100 padding_bottom_100 padding_right_100 display_flex align_items_center"},o.a.createElement(fi.c,{userId:a,size:36,isInteractive:!1,className:"margin_right_75"}),o.a.createElement("span",null,o.a.createElement("b",null,s)),o.a.createElement("span",{className:"welcome-place-send-message-card--header-subtitle"},"\xa0",`| ${_i.t("Invited you to {workspaceName}",{workspaceName:r})}`))),o.a.createElement("div",{className:"welcome-place-send-message-card welcome-place-send-message-card--caret_right margin_left_600 sk_primary_background"},o.a.createElement("div",{className:"padding_top_75 padding_left_100 padding_bottom_100 padding_right_100 display_flex align_items_center"},o.a.createElement(fi.c,{userId:e,size:36,isInteractive:!1,className:"margin_right_75"}),o.a.createElement("span",null,_i.rt("<b>{username}</b> (you)",{username:t})),o.a.createElement("span",{className:"welcome-place-send-message-card--header-subtitle"},"\xa0",`| ${_i.t("Just joined")}`)),o.a.createElement("div",{className:"welcome-place-send-message-pane padding_left_150 padding_right_150 padding_top_100 padding_bottom_100"},o.a.createElement("p",{className:"welcome-place-send-message-card--header-subtitle"},_i.rt("Direct message with {inviterUsername}",{inviterUsername:o.a.createElement(et.a,{userId:a},o.a.createElement(Ze.a,null,`@${n}`))})),o.a.createElement(ui,{inputRef:f,sendMessage:()=>{if(!m){const e=_().getContents(),t=c?new qt.Delta(e.contents):null;l({text:Object(it.a)(e),channelOrMemberId:a,delta:t}),d.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.CLICK,ui_element:de.UiElement.WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:de.ElementType.BUTTON,element_name:"send_dm"}},welcome_place:{welcome_session_id:u}}})}},onTextChange:e=>b(0===e.length)}),o.a.createElement(Gt,{hasMessagesToRender:!1,prefillMessageInput:e=>{const t=_();t.value(Object(st.b)(e)),t.setCursorAtEnd()},isDm:!0}))))});const Oi=new x.b("welcome_place");var Ci=Object(u.b)(function(e){let t=!1,a="",n="";const s=Object(oe.k)(e),r=Object(oe.o)(e);return r?(a=Object(Je.W)(e,s,!1,!0),n=s):t=Xe(e,s),{isChannelNonEmpty:t,isInTenuredTreatmentB:r,inviterUsername:a,inviterId:n}})(({workflowTask:e,isChannelNonEmpty:t,isInTenuredTreatmentB:a,inviterUsername:n,inviterId:s})=>{let i;if(a)i={body:Oi.rt("<b>Send a message</b> to let {inviterUsername} know you\u2019ve arrived.",{inviterUsername:o.a.createElement("span",{className:"inline_block"},o.a.createElement(et.a,{userId:s},o.a.createElement(Ze.a,null,n)))}),button:null,tip:null};else{const e=Oi.rt("<b>Send a message</b> to get the conversation started."),a=Oi.rt("<b>Send a message</b> to let your team know you\u2019re here.");i={body:t?a:e,button:null,tip:null}}const l={body:Oi.rt("<b>Sent a message</b>"),button:null,tip:null},c={[he.c.Pending]:i,[he.c.InProgress]:i,[he.c.Completed]:l},d=Ce(c,e.state,"button"),u=Ce(c,e.state,"body");return e.state!==he.c.Completed?o.a.createElement(Oe,{workflowTask:e,onButtonClicked:r.a,buttonCopy:d,bodyCopy:u},a?o.a.createElement(yi,null):o.a.createElement(mi,null)):o.a.createElement(Oe,{workflowTask:e,onButtonClicked:r.a,buttonCopy:d,bodyCopy:u})});const vi=new x.b("welcome_place");class workflow_item_container_WorkflowItemContainer extends i.Component{render(){var e=this.props;const t=e.workflowItems,a=e.progress,n=vi.rt("<b>Let\u2019s get you set up.</b> Follow the steps below to find your people, say hello, and get up and running."),s=t.slice().filter(me.a).sort(be);return o.a.createElement(welcome_row_WelcomeRow,{subtitle:n},o.a.createElement("div",{className:"border_bottom padding_bottom_100 caption"},vi.rt("<span>{completedStepsCount} of {totalStepsCount}</span> complete",{completedStepsCount:a.completed,totalStepsCount:a.total},({text:e})=>o.a.createElement("span",{className:"bold"},e))),o.a.createElement("div",{className:"c-workflow-item-container"},s.map(e=>{const t=e.subtype;let a=null;return t===he.d.SeeWelcomePlace?a=o.a.createElement(we,{key:`workflow_item_card_${t}`,workflowTask:e}):t===he.d.JoinChannel?a=o.a.createElement(ke,{key:`workflow_item_card_${t}`,workflowTask:e}):t===he.d.SendMessage?a=o.a.createElement(Ci,{key:`workflow_item_card_${t}`,workflowTask:e}):t===he.d.EnableNotifications?a=o.a.createElement(Pe,{key:`workflow_item_card_${t}`,workflowTask:e}):t===he.d.AddAppFileManagement?a=o.a.createElement(qe,{key:`workflow_item_card_${t}`,workflowTask:e}):t===he.d.DownloadDesktopApp&&(a=o.a.createElement(Ke,{key:`workflow_item_card_${t}`,workflowTask:e})),a})))}}workflow_item_container_WorkflowItemContainer.displayName="WorkflowItemContainer";var Ei=Object(u.b)(function(e){return{progress:Object(oe.m)(e)}})(workflow_item_container_WorkflowItemContainer);a("plp+");class welcome_card_WelcomeCard extends i.Component{render(){var e=this.props;const t=e.className,a=e.hasNoPadding,n=e.hasNoBorder,s=e.hasNoBackground,r=d()("welcome-card extra-rounded overflow_hidden",t,{padding_125:!a,bordered:!n,sk_white_bg:!s});return o.a.createElement("div",{className:r},this.props.children)}}welcome_card_WelcomeCard.displayName="WelcomeCard";a("gBrz");const ki=new x.b("welcome_place");class video_card_VideoCard extends i.Component{constructor(e){super(e),this.showPlayer=(()=>{const e=this.state.showPlayer;var t=this.props;const a=t.clogger,n=t.pageViewingSessionId;this.setState(()=>({showPlayer:!e})),a.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.CLICK,ui_element:de.UiElement.WELCOME_PLACE_VIDEO,ui_properties:{element_value:"start",element_type:de.ElementType.VIDEO,element_name:"Team Chat & Channels | Slack Features"}},welcome_place:{welcome_session_id:n}}})}),this.containerRef=o.a.createRef(),this.state={showPlayer:!1}}componentDidMount(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:de.UiElement.WELCOME_PLACE_VIDEO}})}componentWillUnmount(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}render(){const e=this.state.showPlayer;var t=this.props;const a=t.youtubeEmbedUrl,n=t.className,s=t.isFlexpaneOpen,r=d()("video-player__title-card video-player__content",{"player-is-active":e}),l=d()("video-player__iframe__container video-player__content",{"player-is-active":e}),c=d()("video-player",{flexpaneOpen:s}),u=`${a}&modestbranding=1&rel=0`,p=o.a.createElement(i.Fragment,null,o.a.createElement("h1",{className:"sk_white_always margin_bottom_50"},ki.rt("Welcome to Slack!")),o.a.createElement("p",{className:"sk_white_always margin_bottom_75"},ki.t("Slack helps your team communicate, connect, and do your best work together.")),o.a.createElement(_e.d,{onClick:this.showPlayer},ki.t("Watch Video",{note:"Button copy for call-to-action on video module.",fallbackHash:"5ccd18c8a398d9f789a385b18ecb4678bd622f21"})));return o.a.createElement(welcome_card_WelcomeCard,{className:n,hasNoPadding:!0,hasNoBorder:!0,hasNoBackground:!0},o.a.createElement("link",{rel:"preload",href:`${u}&autoplay=1`,as:"document"}),o.a.createElement("div",{className:c,ref:this.containerRef},o.a.createElement("div",{className:"video-player__container"},o.a.createElement("div",{className:r,role:"region"},p),o.a.createElement("div",{className:l},o.a.createElement("iframe",{className:"full_height",style:{height:"100%",width:"100%"},src:`${u}${e?"&autoplay=1":""}`,frameBorder:"0",allowFullScreen:!0,title:ki.t("Team Chat & Channels | Slack Features",{note:"A video by Slack, on Youtube, that explains Slack features."})})))))}}video_card_VideoCard.displayName="VideoCard";var Si=Object(u.b)(function(e){return{clogger:Object(ie.a)({state:e}),pageViewingSessionId:Object(oe.i)(e),isFlexpaneOpen:Object(v.j)(e)}},{})(ye()(video_card_VideoCard)),ji=a("xWuZ"),Ii=a("ZBlo"),wi=a("9E9B"),Ti=a("kDop"),Ni=a("bkaq");const Ai=new x.b("welcome_place");class member_card_MemberCard extends i.Component{constructor(){super(...arguments),this.startIm=(()=>{var e=this.props;const t=e.member,a=e.clogger,n=e.idx,s=e.pageViewingSessionId;this.props.startImByMemberId({memberId:t.id}),a.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.CLICK,ui_element:de.UiElement.WELCOME_PLACE_PROFILE_CARD,ui_properties:{element_value:t.id,element_index:n,element_type:de.ElementType.BUTTON}},welcome_place:{welcome_session_id:s}}})})}render(){var e=this.props;const t=e.member,a=e.type,n=e.channels,s=e.teamDomain,r=t.profile,l=a?o.a.createElement("p",{className:"member-card__content"},Ai.t("Invited you to Slack",{fallbackHash:"9064cf8eb6c496f261172fb4d28eb5e38c796b7e"})):null,c=1===n.length?Ai.t("A channel they're in: ",{fallbackHash:"0b353ec7cd241b45e73b94a056984793bedee7a4"}):Ai.t("A few channels they're in: ",{fallbackHash:"0b353ec7cd241b45e73b94a056984793bedee7a4"}),d=n.map((e,t)=>{const a=Object(q.o)({channelId:e,teamDomain:s});return o.a.createElement(i.Fragment,{key:`fragment-${e}`},o.a.createElement(Ze.a,{key:`link-${e}`,href:a,className:"no_wrap"},o.a.createElement(Ti.a,{key:`entity-${e}`,channelId:e})),t+1===n.length?".":", ")});return o.a.createElement(welcome_card_WelcomeCard,{className:"member-card-container flex_one",hasNoPadding:!0},o.a.createElement("div",{className:"member-card"},o.a.createElement(Xr.c,{tip:Ai.rt("Message {name}",{name:r.real_name}),position:"top"},o.a.createElement(Ze.a,{onClick:this.startIm,className:"member-card__top-link"},o.a.createElement("div",{className:"member-card__top"},o.a.createElement(fi.b,{size:56,isInteractive:!1,imageUrl:r.image_72,imageUrl2x:r.image_192,className:"member-card__avatar"}),o.a.createElement("div",{className:"flex_one"},o.a.createElement(Ni.a,{member:t,className:"member-card__name"}),l)))),o.a.createElement("div",{className:"member-card__bottom"},o.a.createElement("p",{className:"member-card__content"},c,d))))}}member_card_MemberCard.displayName="MemberCard";const Ri={startImByMemberId:wi.startImByMemberId};var Mi=Object(u.b)(function(e,{id:t}){const a=Object(bi.d)(e,t);return{teamDomain:Object(xe.f)(Object(Se.i)(e,a.team_id)),member:a,clogger:Object(ie.a)({state:e}),pageViewingSessionId:Object(oe.i)(e)}},Ri)(member_card_MemberCard);a("iJ13");const Pi=new x.b("welcome_place");class member_row_MemberRow extends i.Component{constructor(e){super(e),this.showMoreUsers=(()=>{var e=this.props;const t=e.clogger,a=e.pageViewingSessionId;this.setState(()=>({showMore:!0})),t.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.CLICK,ui_element:de.UiElement.WELCOME_PLACE_MEMBERS_SHOW_ALL,ui_properties:{element_type:de.ElementType.LINK}},welcome_place:{welcome_session_id:a}}})}),this.showMemberDirectory=(()=>{var e=this.props;const t=e.clogger,a=e.pageViewingSessionId;t.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.CLICK,ui_element:de.UiElement.WELCOME_PLACE_MEMBERS_SHOW_MEMBER_DIRECTORY,ui_properties:{element_type:de.ElementType.LINK}},welcome_place:{welcome_session_id:a}}}),this.props.showMemberDirectory()}),this.containerRef=o.a.createRef(),this.state={showMore:!1,initialUsersCards:[],additionalUserCards:[],suggestOrgChart:!1}}static getDerivedStateFromProps(e){const t=Object(Ii.a)(e.userCards,6),a=t.shift()||[];let n=[];return t.length&&(n=Object(Ii.a)(Object(ji.a)(t),12)),{initialUsersCards:a,additionalUserCards:n.shift()||[],suggestOrgChart:!!n.length}}componentDidMount(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:de.UiElement.WELCOME_PLACE_MEMBERS_BLOCK},visibilityRatio:.33})}componentWillUnmount(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}render(){const e=this.props.className;var t=this.state;const a=t.initialUsersCards,n=t.additionalUserCards,s=t.suggestOrgChart,r=t.showMore;return o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:d()("member-card-grid",e,{"member-card-grid-1":1===a.length,"member-card-grid-2":2===a.length}),ref:this.containerRef},a.map((e,t)=>o.a.createElement(Mi,{id:e.id,idx:t,key:e.id,type:e.type,channels:e.channels})),r&&n.map((e,t)=>o.a.createElement(Mi,{id:e.id,idx:t+a.length,key:e.id,channels:e.channels}))),(()=>{const e=r&&s?Pi.t("View directory"):Pi.t("Show more");if(n.length){let t=this.showMoreUsers;return r&&!s?null:(r&&s&&(t=this.showMemberDirectory),o.a.createElement("div",{className:"align_center margin_top_100 member-card__show-more-link"},o.a.createElement(Ze.a,{onClick:t},e),o.a.createElement(bn.b,{type:"chevron-down"})))}return null})())}}member_row_MemberRow.displayName="MemberRow";var xi=Object(u.b)(function(e){return{clogger:Object(ie.a)({state:e}),pageViewingSessionId:Object(oe.i)(e)}},function(e){return{showMemberDirectory:()=>{e(Object(qa.i)())}}})(ye()(member_row_MemberRow)),Li=a("ftfc"),Fi=a("7nxQ");class help_search_card_HelpSearchCard extends i.Component{constructor(e){super(e),this.clogLinkClick=(({url:e,index:t,query:a,articleId:n})=>{this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.CLICK,ui_element:de.UiElement.WELCOME_PLACE_HELP_LINK,ui_properties:{element_type:de.ElementType.LINK,element_value:n.toString(),element_index:t},article_url:e,search_terms:a,locale:Object(Fi.a)()},welcome_place:{welcome_session_id:this.props.pageViewingSessionId}}})}),this.containerRef=o.a.createRef()}componentDidMount(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:de.UiElement.WELCOME_PLACE_HELP_BLOCK},visibilityRatio:.5})}componentWillUnmount(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}render(){const e=this.props.defaultArticlesData;return o.a.createElement("div",{ref:this.containerRef,className:"welcome-place__search_container"},o.a.createElement(Li.a,{defaultArticlesData:e,onOpenLink:this.clogLinkClick,noTopMargin:!0}))}}help_search_card_HelpSearchCard.displayName="HelpSearchCard";var Di=Object(u.b)(function(e){return{clogger:Object(ie.a)({state:e}),pageViewingSessionId:Object(oe.i)(e)}})(ye()(help_search_card_HelpSearchCard)),Bi=(a("3rHJ"),a("HI9p"));const Ui=.8;class visibility_logger_provider_VisibilityLoggerProviderBase extends i.Component{constructor(e){super(e),this.elementsForLogging=[],this.addElementForLogging=(e=>{this.elementsForLogging.push(e),requestAnimationFrame(()=>{this.props.scrollContainerEl&&this.checkElementsForClogging(this.props.scrollContainerEl)})}),this.removeElementFromLogging=(e=>{if(!e)return;const t=Object(Bi.a)(this.elementsForLogging,t=>t.element===e);-1!==t&&this.elementsForLogging.splice(t,1)}),this.onScrollListenerDebounced=Object(oa.a)(e=>{this.checkElementsForClogging(e.target)},1e3)}componentDidMount(){this.setupEventListeners()}componentDidUpdate(e){e.scrollContainerEl!==this.props.scrollContainerEl&&(e.scrollContainerEl&&e.scrollContainerEl.removeEventListener("scroll",this.onScrollListenerDebounced),this.setupEventListeners(),requestAnimationFrame(()=>{this.props.scrollContainerEl&&this.checkElementsForClogging(this.props.scrollContainerEl)}))}componentWillUnmount(){this.props.scrollContainerEl&&this.props.scrollContainerEl.removeEventListener("scroll",this.onScrollListenerDebounced)}checkElementsForClogging(e){const t=e.getClientRects()[0];t&&this.elementsForLogging.slice().forEach(({element:e,uiContext:a,visibilityRatio:n})=>{if(!e)return;const r=e.getClientRects()[0];if(!r)return;const i=n||Ui,o=r.top<t.top&&r.bottom>t.bottom,l=r.top>t.top&&r.bottom<t.bottom;let c=0;o||l?c=1:r.top<t.top&&r.bottom>t.top&&r.bottom<t.bottom?c=(r.bottom-t.top)/(r.bottom-r.top):r.bottom>t.bottom&&r.top>t.top&&r.top<t.bottom&&(c=(t.bottom-r.top)/(r.bottom-r.top)),c>=i&&(this.removeElementFromLogging(e),this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:s()(s()({},a),{action:de.UiAction.IMPRESSION}),welcome_place:{welcome_session_id:this.props.pageViewingSessionId}}}))})}setupEventListeners(){this.props.scrollContainerEl&&this.props.scrollContainerEl.addEventListener("scroll",this.onScrollListenerDebounced)}render(){return o.a.createElement(ge.Provider,{value:{scrollContainerEl:this.props.scrollContainerEl,addElementToVisibilityLogging:this.addElementForLogging,removeElementFromVisibilityLogging:this.removeElementFromLogging}},this.props.children)}}visibility_logger_provider_VisibilityLoggerProviderBase.displayName="VisibilityLoggerProviderBase";const qi=Object(u.b)(e=>({clogger:Object(ie.a)({state:e}),pageViewingSessionId:Object(oe.i)(e)}))(visibility_logger_provider_VisibilityLoggerProviderBase);var Hi,Wi=a("wd/R"),Gi=a.n(Wi);!function(e){e.Empty="empty-step",e.Email="email",e.ConfirmEmail="confirmemail",e.TeamName="teamname",e.ChannelName="channelname",e.Invites="invites",e.Role="role",e.Tada="tada",e.ClaimDomain="claim_domain",e.Error="error",e.TeamType="teamtype",e.Values="values",e.Plan="plan"}(Hi||(Hi={}));const Ki="NEWXP_TEAM_CREATE";var Vi,zi;!function(e){e.CustomerSupport="customer_support",e.Engineering="engineering",e.HumanResources="human_resources",e.IT="it",e.Marketing="marketing",e.ProjectManagement="project_management",e.Sales="sales",e.Other="other"}(Vi||(Vi={})),function(e){e.Asana="AA16LBCH2",e.DealbotByPipedriveCRM="A2VG0CJAE",e.Drift="A0K07JA1H",e.Dropbox="AES7B2V7D",e.Giphy="A0F827J2C",e.GitHub="A8GBNUWU8",e.GoogleCalendar="ADZ494LHY",e.GoogleDrive="A6NL8MJ6Q",e.Greenhouse="A0J6STP1A",e.HelloSign="A08Q84QDV",e.Hubspot="A9RRCCG73",e.Intercom="A40CLA0DP",e.JenkinsCI="A0F7VRFKN",e.JiraCloud="A2RPP3NFR",e.Lattice="A0HUMK35J",e.MicrosoftOneDrive="AJBCW09GU",e.Salesforce="A2DAS7NNR",e.Sentry="A99FD3DJ5",e.ServiceNow="AB9E0V3KL",e.SimplePoll="A0HFW7MR6",e.Smartsheet="A9AESRU12",e.TettraWiki="A0H4VM9FG",e.Translate="A0ZJS6Z7E",e.Trello="A074YH40Z",e.Twitter="A0F7XDW93",e.Typeform="AD6SC3RT6",e.Zendesk="A9WFQ3M0B"}(zi||(zi={}));zi.GoogleDrive,zi.MicrosoftOneDrive,zi.Twitter,zi.Salesforce,zi.Zendesk,zi.Hubspot,zi.Sentry,zi.JiraCloud,zi.GitHub,zi.JenkinsCI,zi.Typeform,zi.Greenhouse,zi.HelloSign,zi.Lattice,zi.ServiceNow,zi.Zendesk,zi.JiraCloud,zi.TettraWiki,zi.Hubspot,zi.Translate,zi.Typeform,zi.Drift,zi.SimplePoll,zi.Twitter,zi.GoogleCalendar,zi.Giphy,zi.Smartsheet,zi.Trello,zi.Asana,zi.JiraCloud,zi.Salesforce,zi.Hubspot,zi.DealbotByPipedriveCRM,zi.Intercom;var $i,Yi,Qi,Xi;!function(e){e.Business="business",e.Government="government",e.Education="education",e.Other="other"}($i||($i={})),function(e){e.TrackInfo="trackinfo",e.CommsWithinOrg="comms_in_org",e.Organizing="organizing",e.CommsWithCompanies="comms_with_companies",e.Apps="apps_tools",e.FocusedConvos="focused_convos"}(Yi||(Yi={})),function(e){e.Free="free",e.Standard="standard",e.Plus="plus"}(Qi||(Qi={})),function(e){e.BRAZIL="brazil",e.INDIA="india",e.EDUCATION="general",e.NONE="none"}(Xi||(Xi={}));Hi.TeamType,Hi.Values,Hi.Role,Hi.Plan,Hi.Tada,de.UiStep.SELECT_TEAM_DESCRIPTION,de.UiStep.SELECT_TEAM_GOALS,de.UiStep.SELECT_PLAN;var Ji=a("WhMD");const Zi=new x.b("team_creation");function eo(e,t=!0){return{[Qi.Free]:t?Zi.t("Slack Free"):"",[Qi.Standard]:t?Zi.t("Slack Standard"):"",[Qi.Plus]:t?Zi.t("Slack Plus"):""}[e]}a("Q3H4");const to=new x.b("welcome_place");class welcome_place_trial_info_WelcomePlaceTrialInfo extends i.Component{constructor(e){super(e),this.navigateToBenefitsPage=(e=>{e.preventDefault(),this.props.clogger.track(Ki,{contexts:{ui_context:{step:de.UiStep.TRACTOR_DIALOG_COMPLETED_STEP,step_variant:"std"===this.props.product?"standard_trial":"plus_trial",action:de.UiAction.CLICK,ui_properties:{element_type:de.ElementType.LINK,element_name:"learn_more_about_features"}}}}),this.props.setPrimaryView({id:"Ppaid-benefits"})}),this.containerRef=o.a.createRef()}componentDidMount(){"std"!==this.props.product&&"plus"!==this.props.product||this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:de.UiElement.WELCOME_PLACE_TRIAL_BLOCK},visibilityRatio:.33})}componentWillUnmount(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}render(){var e=this.props;const t=e.expiration,a=e.product,n=e.featureGgFromTheStart;let s;if("std"===a?s=Qi.Standard:"plus"===a&&(s=Qi.Plus),!s)return null;const r=Gi()(t,"YYYY-MM-DD");return o.a.createElement("div",{className:d()("welcome-trial-info"),ref:this.containerRef},o.a.createElement("div",{className:"welcome-trial-info__content",ref:this.containerRef},o.a.createElement(bn.b,{type:"slack",className:"margin_right_75 welcome-trial-info__icon",size:"inherit"}),o.a.createElement("div",null,o.a.createElement("div",{className:"bold"},n?to.rt("Your workspace is on a free trial of {selectedSlackPlan}",{selectedSlackPlan:eo(s)}):""),o.a.createElement("div",null,n?to.rt("You can try out <a>all the features of {selectedSlackPlan}</a> for free until {trialEndDate}.",{selectedSlackPlan:eo(s),trialEndDate:Object(Ji.a)(r.valueOf(),{excludeYear:r.year()===Gi()().year()})},({text:e})=>o.a.createElement(Ze.a,{onClick:this.navigateToBenefitsPage},e)):""))))}}welcome_place_trial_info_WelcomePlaceTrialInfo.displayName="WelcomePlaceTrialInfo";const ao={setPrimaryView:qn.a};var no=Object(u.b)(function(e){return{clogger:Object(ie.a)({state:e}),featureGgFromTheStart:Object(m.m)(e,"feature_gg_from_the_start"),pageViewingSessionId:Object(oe.i)(e)}},ao)(ye()(welcome_place_trial_info_WelcomePlaceTrialInfo));const so=new x.b("welcome_place");class welcome_place_WelcomePlace extends i.Component{constructor(e){super(e),this.onClickAnimationReloadIcon=(()=>{ue.l&&(this.props.setAnimationState(!1),setTimeout(()=>{this.props.setAnimationState(!0)},100))}),this.containerRef=o.a.createRef()}componentDidMount(){var e=this.props;const t=e.pageEntryPoint,a=e.pageViewingSessionId,n=e.setScrollContainerElement;this.props.maybeRefreshWelcomePlaceData(),this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.IMPRESSION,ui_element:de.UiElement.WELCOME_PLACE_PAGE},welcome_place:{welcome_session_id:a,entry_point:t}}}),this.props.setPageEntryPoint(he.b.Unknown),n(this.containerRef.current)}componentWillUnmount(){const e=this.props.pageViewingSessionId;this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.EXIT_VIEW,ui_element:de.UiElement.WELCOME_PLACE_PAGE},welcome_place:{welcome_session_id:e}}}),this.props.regeneratePageViewingSessionId()}render(){const e=this.props.items;return o.a.createElement("div",{ref:this.containerRef,className:d()("p-welcome-place overflow_x_scroll flex_one sk_off_white_bg",{"welcome-place-page-container--typography":!Object(re.a)(),"welcome-place-page-container--border-inset":!Object(re.a)(),"welcome-place-page-container--height-fix":Object(re.a)(),full_height:!Object(re.a)()}),"data-qa":"welcome-place-page-container"},o.a.createElement("div",{className:"welcome-place-header-gradient"},ue.l||ue.t?o.a.createElement(pe.a,{type:"reload-small",className:"position_absolute",onClick:this.onClickAnimationReloadIcon}):null,o.a.createElement("h1",{className:"padding_top_200 padding_left_125"},so.rt("Welcome to Slack"))),e.map((e,t)=>{switch(e.type){case"video":return o.a.createElement(welcome_row_WelcomeRow,{key:`${e.type}${t}`,title:so.t("Learn more about Slack",{note:"Title for the new section in the Get Started page that includes the intro to channels video and the Help Center search bar."})},o.a.createElement(Si,{youtubeEmbedUrl:e.content.video.url}));case"workflow":return o.a.createElement(Ei,{key:`${e.type}${t}`,workflowItems:e.content.workflow.tasks});case"user_cards":return o.a.createElement(welcome_row_WelcomeRow,{key:`${e.type}${t}`,title:so.t("See who else is here"),subtitle:so.t("You can message people directly, or check out the channels they\u2019re in.",{note:"Subtitle for the teammates module that shares the two main ways to connect."})},o.a.createElement(xi,{userCards:e.content.user_cards}));case"help_center_search":return o.a.createElement(welcome_row_WelcomeRow,{key:`${e.type}${t}`,title:so.t("Have a question? We\u2019re here to help.",{note:"Title for the Help Center search bar in the Get Started page."})},o.a.createElement(Di,{defaultArticlesData:Object(se.a)(e,"content.help_center_search.articles",null)}));case"trial":return o.a.createElement(no,{key:`${e.type}${t}`,product:e.content.trial.level,expiration:e.content.trial.expiration_date});default:return null}}))}}welcome_place_WelcomePlace.displayName="WelcomePlace";var ro=Object(u.b)(function(e){return{items:Object(oe.g)(e),clogger:Object(ie.a)({state:e}),pageEntryPoint:Object(oe.h)(e),pageViewingSessionId:Object(oe.i)(e),firstClientLaunch:Object(oe.p)(e)}},function(e){return{maybeRefreshWelcomePlaceData:()=>{e(Object(le.f)())},setPageEntryPoint:(...t)=>{e(Object(ce.f)(...t))},regeneratePageViewingSessionId:()=>{e(Object(ce.d)())},setAnimationState:t=>{e(Object(ce.g)(t))}}})((e=>{class WithVisibilityLoggerProvider extends i.Component{constructor(e){super(e),this.state={scrollContainer:null}}render(){return o.a.createElement(qi,{scrollContainerEl:this.state.scrollContainer},o.a.createElement(e,s()({},this.props,{setScrollContainerElement:e=>{this.setState(()=>({scrollContainer:e}))}})))}}return WithVisibilityLoggerProvider.displayName="WithVisibilityLoggerProvider",WithVisibilityLoggerProvider.displayName=`WithVisibilityLoggerProvider(${e.displayName||"Component"})`,WithVisibilityLoggerProvider})(welcome_place_WelcomePlace)),io=a("fujP"),oo=a("DKof"),lo=a("mkut");const co=Object(Ve.b)(e=>e&&e.unreadsView&&e.unreadsView.newUnreadMsgCount);co.meta={name:"getNewUnreadMsgCount",key:"unreadsViewStoreSelectorsGetNewUnreadMsgCount"};const uo=Object(Ve.b)(e=>e&&e.unreadsView&&e.unreadsView.refreshId);uo.meta={name:"getRefreshId",key:"unreadsViewStoreSelectorsGetRefreshId"};const po=Object(Ve.b)(e=>e&&e.unreadsView&&e.unreadsView.focusRequestedThreadKey);po.meta={name:"getFocusRequestedThreadKey",key:"unreadsViewStoreSelectorsGetFocusRequestedThreadKey"};var ho=a("zRJ2"),mo=a("q4bl"),bo=a("kcos"),fo=a("NFsq");function _o(e){const t=Object(ba.k)(e,"all_unreads_sort_order");return t&&Object(fo.a)(["alphabetical","priority","oldest","newest"],t)?t:Object(xe.D)(Object(Se.d)(e))?"priority":"alphabetical"}var go=a("4ry+"),yo=a("H2PH");a("9m5W");const Oo=new x.b("files"),Co=(l.default.oneOf([go.c,go.e,go.d,go.b,go.a]),l.default.string,l.default.number,l.default.number,l.default.bool,l.default.func,l.default.bool,l.default.string,{fileName:"",fileCount:0,percentComplete:0,status:go.e,cancelable:!1,cancelUpload:r.a,isRetry:!1,teamId:void 0});class file_upload_banner_FileUploadBanner extends i.PureComponent{static renderComplete(){const e=Oo.t("Processing uploaded file\u2026 complete!");return o.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},o.a.createElement("div",{className:"p-file_upload_banner__text"},e))}constructor(e){super(e),this.cancel=this.cancel.bind(this),this.clearOverrides=this.clearOverrides.bind(this),this.doneProlongingStatus=this.doneProlongingStatus.bind(this),this.state={statusOverride:null,fileNameOverride:null,timer:null,fading:!1}}componentWillUnmount(){this.state.timer&&clearTimeout(this.state.timer)}getFileName(){const e=this.props.fileName;return this.state.fileNameOverride||e}getStatus(){const e=this.props.status;return this.state.statusOverride||e}UNSAFE_componentWillReceiveProps(e){const t=[go.b,go.a];this.props.status!==e.status&&Object(fo.a)(t,e.status)&&this.setState(()=>({statusOverride:e.status,fileNameOverride:e.fileName,timer:setTimeout(this.doneProlongingStatus,1e3)}))}cancel(){const e=this.props.teamId;let t=this.props.cancelUpload;const a=Object(yo.a)(e);t=a.cancelCurrentUpload.bind(a),setTimeout(()=>{t()},1)}clearOverrides(){this.setState(()=>({statusOverride:null,fileNameOverride:null,timer:null,fading:!1}))}doneProlongingStatus(){this.props.status===go.c?this.setState(()=>({fading:!0,timer:setTimeout(this.clearOverrides,250)})):this.clearOverrides()}renderCanceled(){const e=this.props.fileCount,t=this.getFileName();let a=Oo.t("Canceling {fileName}\u2026",{fileName:Object(x.q)(t)});return e>1&&(a=Oo.t("Canceling upload\u2026")),o.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--canceled"},o.a.createElement("div",{className:"p-file_upload_banner__text"},a))}renderMultiFileUploadComplete(){const e=this.props.fileCount,t=Oo.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026 complete!",{fileCount:e});return o.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},o.a.createElement("div",{className:"p-file_upload_banner__text"},t))}renderUploading(){var e=this.props;const t=e.fileName,a=e.fileCount,n=e.percentComplete,s=e.cancelable,r=e.isRetry,i=this.getStatus()===go.d||n>=99;let l;i?l=Oo.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026",{fileCount:a}):(r?(l=Oo.t("Re-uploading {fileName}",{fileName:Object(x.q)(t)}),a>1&&(l=Oo.t("Re-uploading {fileCount} files",{fileCount:a}))):(l=Oo.t("Uploading {fileName}",{fileName:Object(x.q)(t)}),a>1&&(l=Oo.t("Uploading {fileCount} files",{fileCount:a}))),l+=`\u2026 ${n}%`);const c=d()("p-file_upload_banner__progress_inner",{"p-file_upload_banner__progress_inner--animated":i}),u={width:`${n}%`};let p=null;return s&&!i&&(p=o.a.createElement(_e.c,{key:"cancel",className:"p-file_upload_banner__cancel",onClick:this.cancel},Oo.t("cancel"))),[o.a.createElement("div",{key:"bar",className:"p-file_upload_banner__progress"},o.a.createElement("span",{className:c,style:u})),o.a.createElement("div",{key:"text",className:"p-file_upload_banner__text"},l),p]}render(){const e=this.getStatus(),t=this.state.fading;if(e===go.c)return null;let a;a=e===go.e||e===go.d?this.renderUploading():e===go.b?this.renderMultiFileUploadComplete():this.renderCanceled();const n=d()("p-file_upload_banner p-message_pane__banner",{"p-file_upload_banner--fading":t});return o.a.createElement("div",{className:n},a)}}file_upload_banner_FileUploadBanner.displayName="FileUploadBanner",file_upload_banner_FileUploadBanner.defaultProps=Co;var vo=Object(u.b)(function(e){const t=Object(go.g)(e),a=Object(Se.d)(e);return s()({},t,{teamId:a.id,cancelUpload:Es.a})})(file_upload_banner_FileUploadBanner),Eo=a("XoBp"),ko=a("UXvI"),So=a("BwAi"),jo=a("mmRP");const Io=Object(ko.a)(e=>{const t=Object(p.getStateByTeamId)(e);return Object(re.a)()&&!Object(v.k)(t)?Promise.resolve():Object(p.dispatchForTeamId)(e,Object(So.a)({reason:"requestOfflineCounts"})).tap(()=>Object(p.dispatchForTeamId)(e,Object(ze.k)())).tap((t={})=>Object(p.dispatchForTeamId)(e,Object(jo.a)(t))).then((t={})=>{const a=Object(P.a)(Object(ot.a)(t.channels,t.groups));Object(p.dispatchForTeamId)(e,Object(wi.reconcileChannelAccess)({channels:a}))}).catch(a=>{Object(Ot.a)({state:t}).error(`Failed to fetch offline users counts for ${e}: ${a}`)})},6e4,{trailing:!1}),wo=Object(mt.b)("Request offline users counts",(e,t)=>Io(Object(h.b)(t())));wo.meta={name:"requestOfflineCounts",key:"actionsRequestOfflineCountsRequestOfflineCounts",description:"Request offline users counts"},wo.propTypes={};var To=wo,No=a("Cbpi"),Ao=a("BeG2"),Ro=a("A/mR"),Mo=a("4v0o");a("yqYT");const Po=new x.b("ms"),xo=6e4,Lo=1e4,Fo=(l.default.string,l.default.string.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,{currentThreadKey:void 0});function Do(e={}){const t=e.currentThreadKey,a=e.primaryView,n=e.reconnectImmediately,s=e.requestOfflineCounts,r=e.requestOfflineHistory,l=Object(i.useRef)(),c=Object(i.useRef)();var d=Object(i.useState)(),u=at()(d,2);const p=u[0],h=u[1];var m=Object(i.useState)(!1),b=at()(m,2);const f=b[0],_=b[1];function g(){l.current=Date.now()}function y(){h(Object(Ro.q)(l.current/1e3))}function O(e){e&&e.preventDefault&&e.preventDefault(),_(!0),c.current=setTimeout(()=>{_(!1)},Lo),function(){const e=[];if((Object(An.a)(a)||a===Mo.a.allThreads)&&e.push(r({channelId:a})),t){var i=Object($a.a)(t);const a=i.channelId,n=i.threadTs;e.push(r({channelId:a,threadTs:n}))}return e.push(s()),n(),Promise.all(e)}().then(()=>{g(),h()})}function C({tag:e,text:t}){return"a"===e?o.a.createElement(Ze.a,{className:"p-message_pane__degraded_banner__reload_cta",onClick:O,"data-qa":"connecting_banner_cta"},t):o.a.createElement("div",{className:"p-message_pane__degraded_banner__banner_text"},t)}if(Object(i.useEffect)(()=>{g();const e=setInterval(y,xo);return()=>{clearInterval(e),clearTimeout(c.current)}},[]),!Object(re.a)()||f)return null;let v;return v=p?Po.rt("<div>Last updated {timeAgo}\u2026</div><a>Load new messages</a>",{timeAgo:p},C):Po.rt("<div>Last updated less than a minute ago\u2026</div><a>Load new messages</a>",null,C),o.a.createElement("div",{className:"p-message_pane__degraded_banner p-message_pane__banner"},v,o.a.createElement("div",{"aria-live":"assertive",className:"offscreen"},Is.V?p?Po.t("Last updated {timeAgo}\u2026 Press F6 to navigate to the status banner and click load new messages",{timeAgo:p}):Po.t("Last updated less than a minute ago\u2026 Press F6 to navigate to the status banner and click load new messages"):Object(ue.q)()?p?Po.t("Last updated {timeAgo}\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages",{timeAgo:p}):Po.t("Last updated less than a minute ago\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages"):p?Po.t("Last updated {timeAgo}\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages",{timeAgo:p}):Po.t("Last updated less than a minute ago\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages")))}Do.displayName="DegradedBanner",Do.defaultProps=Fo;var Bo=Object(u.b)(e=>({currentThreadKey:Object($a.b)(e),primaryView:Object(_.a)(e)}),e=>({reconnectImmediately:(...t)=>e(Object(Ao.h)(...t)),requestOfflineCounts:(...t)=>e(To(...t)),requestOfflineHistory:(...t)=>e(Object(No.a)(...t))}))(Do);a("Usoh");const Uo=new x.b("unread");l.default.oneOf(["light","dark"]);class message_container_loading_MessageContainerLoading extends o.a.Component{constructor(e){super(e),this.state={slow:!1},this.timer=null}componentDidMount(){this.timer=setTimeout(()=>{this.setState(()=>({slow:!0}))},5e3)}componentWillUnmount(){clearTimeout(this.timer)}render(){const e=this.props.clientTheme,t=Uo.t("Loading messages..."),a=Uo.t("Still loading... sorry for the long wait!"),n=d()("p-message_container_loading",{[`p-message_container_loading--${e}`]:"light"!==e});return o.a.createElement("div",{className:n,"data-qa":"message_container_loading"},o.a.createElement("div",{className:"p-message_container_loading__msg"},this.state.slow?a:t))}}message_container_loading_MessageContainerLoading.displayName="MessageContainerLoading",message_container_loading_MessageContainerLoading.defaultProps={clientTheme:"light"};var qo=message_container_loading_MessageContainerLoading,Ho=a("qkTT");a("Qwh8");const Wo=new x.b("threads"),Go=(l.default.func,l.default.string,l.default.node,{tryAgain:r.a,"data-qa":"message_container_error",children:null});function Ko({tryAgain:e,"data-qa":t,children:a}){return o.a.createElement("div",{className:"p-message_container_error","data-qa":t},o.a.createElement("div",{className:"p-message_container_error__contents"},o.a.createElement("div",{className:"p-message_container_error__emoji"},o.a.createElement(Ho.b,{text:":tropical_fish:",emojiSize:Ho.a.LARGE})),o.a.createElement("p",{className:"p-message_container_error__msg"},a),o.a.createElement(_e.d,{type:"primary",onClick:e,"data-qa":`${t}_try_again`},Wo.t("Try Again"))))}Ko.displayName="MessageContainerError",Ko.defaultProps=Go;var Vo=Ko,zo=a("tbBR");const $o=Object(wn.b)("TS.generic_notification_banner.banner_to_show_sig.dispatch"),Yo=Object(wn.b)("TS.ui.banner.isDunningBanner",()=>!1),Qo=Object(wn.b)("TS.ui.banner.show");a("+ZNJ");const Xo=new x.b("notification_banner"),Jo=(l.default.string,l.default.string,l.default.string,l.default.node,l.default.bool,l.default.node,l.default.string,l.default.string,l.default.string,l.default.string,l.default.string,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.string,l.default.func,l.default.string,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func.isRequired,l.default.func,l.default.shape({countPref:l.default.string.isRequired,tsPref:l.default.string.isRequired,hidePref:l.default.string}),{imgSrc:"",imgAlt:"",bannerAriaLabel:"",headerText:"",bodyText:"",focusOnHeader:!1,bodyClass:"",bodyIcon:"",bannerContainerClass:"",goButtonText:"",goButtonClass:"",onGo:r.a,showGoButton:!0,isLearnMoreButton:!1,shouldCloseOnGo:!0,cancelButtonText:void 0,cancelButtonClass:"",onCancel:r.a,cancelHref:void 0,cancelTarget:void 0,showCancelButton:!0,shouldCloseOnCancel:!0,showCloseIcon:!1,onCloseIcon:r.a,onCloseBanner:r.a,bannerPrefs:{}});class message_pane_banner_MessagePaneBanner extends i.PureComponent{constructor(e){super(e),this.headerRef=o.a.createRef(),Object(la.a)(this,["handleGoButton","handleCancelButton","handleCloseIcon"])}componentDidMount(){this.props.focusOnHeader&&this.headerRef.current&&this.headerRef.current.focus()}closeBanner(){var e=this.props;const t=e.onCloseBanner,a=e.bannerPrefs;this.props.closeBanner({bannerPrefs:a}),t()}handleGoButton(){var e=this.props;const t=e.onGo;e.shouldCloseOnGo&&this.closeBanner(),t()}handleCancelButton(){var e=this.props;const t=e.onCancel;e.shouldCloseOnCancel&&this.closeBanner(),t()}handleCloseIcon(){const e=this.props.onCloseIcon;this.closeBanner(),e()}renderHeader(){var e=this.props;const t=e.headerText,a=e.imgSrc,n=e.imgAlt;return t?o.a.createElement("div",{className:"p-message_pane_banner__header"},a&&o.a.createElement("div",{className:"p-message_pane_banner__header_img_container"},o.a.createElement("img",{src:a,alt:n,className:"p-message_pane_banner__header_img","data-qa":"message_pane_banner_header_img"})),o.a.createElement("div",{className:"display_flex justify_content_center"},o.a.createElement("h1",{className:"p-message_pane_banner__header_text",ref:this.headerRef,tabIndex:-1},t))):null}renderBody(){var e=this.props;const t=e.bodyText,a=e.bodyClass,n=e.bodyIcon;if(!t)return null;const s=d()("p-message_pane_banner__body",a);return o.a.createElement("div",{className:s},n&&o.a.createElement(pe.a,{type:n,size:"inherit",className:"p-message_pane_banner__body_icon"}),t)}renderGoButton(){var e=this.props;const t=e.goButtonText,a=e.goButtonClass,n=e.isLearnMoreButton?Xo.t("Learn More"):Xo.t("Show Me"),s=d()("p-message_pane_banner__button ","p-message_pane_banner__button--go",a);return o.a.createElement(_e.b,{className:s,onClick:this.handleGoButton,size:"small","data-qa":"message_pane_banner_go_button"},t||n)}renderCancelButton(){var e=this.props;const t=e.cancelButtonClass,a=e.cancelHref,n=e.cancelTarget,s=d()("p-message_pane_banner__button","p-message_pane_banner__button--cancel",t),r=this.props.cancelButtonText||Xo.t("Skip for Now");return o.a.createElement(_e.b,{className:s,onClick:this.handleCancelButton,href:a,target:n,size:"small",type:"outline","data-qa":"message_pane_banner_cancel_button"},r)}renderCloseIcon(){return o.a.createElement(_e.c,{"aria-label":Xo.t("Close"),className:"p-message_pane_banner__close_icon",onClick:this.handleCloseIcon,"data-qa":"message_pane_banner_close_icon"},o.a.createElement(pe.a,{type:"times"}))}render(){var e=this.props;const t=e.showGoButton,a=e.showCancelButton,n=e.showCloseIcon,s=e.bannerAriaLabel,r=e.bannerContainerClass,i=d()("p-message_pane_banner",r);return o.a.createElement("div",{className:i,role:"banner","aria-label":s},this.renderHeader(),this.renderBody(),o.a.createElement("div",{className:"p-message_pane_banner__button_container"},a&&this.renderCancelButton(),t&&this.renderGoButton()),n&&this.renderCloseIcon())}}message_pane_banner_MessagePaneBanner.displayName="MessagePaneBanner",message_pane_banner_MessagePaneBanner.defaultProps=Jo;const Zo={closeBanner:T.a};var el=Object(u.b)(null,Zo)(message_pane_banner_MessagePaneBanner);const tl=new x.b("client"),al="btn_show_me",nl="btn_close",sl={countPref:"activation_msg_limit_banner_cta_count",tsPref:"activation_msg_limit_banner_cta_last_ts"},rl=["keydown","mousedown","touchstart"];l.default.object.isRequired,l.default.object.isRequired,l.default.number.isRequired,l.default.number.isRequired,l.default.number.isRequired,l.default.string.isRequired;class activation_msg_limit_banner_ActivationMsgLimitBanner extends i.PureComponent{constructor(e){super(e),this.teamMenuEl=null,this.menuItemEls=null,this.limitMeterMenuItemEl=null,this.limitMeterInitialStyles=null,this.teamMenuInitialStyles=null,Object(la.a)(this,["onGo","onClose","removeLimitMeterHighlight"])}componentDidMount(){this.clog({action:de.UiAction.IMPRESSION})}onGo(){this.clog({action:de.UiAction.CLICK,ui_properties:{element_type:de.ElementType.BUTTON,element_name:al}});const e=document.querySelector("#team-menu-trigger");e?(e.click(),setTimeout(()=>{this.addLimitMeterHighlight()},100)):Object(xe.P)(this.props.team,"/admin/stats")}onClose(){this.clog({action:de.UiAction.CLICK,ui_properties:{element_type:de.ElementType.BUTTON,element_name:nl}})}addLimitMeterHighlight(){this.teamMenuEl=document.querySelector(".p-classic_nav__team_menu"),this.menuItemEls=document.getElementsByClassName("c-menu_item__li");const e=document.querySelector(".p-classic_nav__team_messages_limit_meter");if(this.limitMeterMenuItemEl=e&&e.closest(".c-menu_item__li"),this.teamMenuEl&&this.menuItemEls.length&&this.limitMeterMenuItemEl){this.limitMeterInitialStyles=this.limitMeterMenuItemEl.getAttribute("style"),this.teamMenuInitialStyles=this.teamMenuEl.getAttribute("style"),this.limitMeterMenuItemEl.style.boxShadow="0 0 0 99999px rgba(0, 0, 0, .4)",this.limitMeterMenuItemEl.style.position="relative",this.limitMeterMenuItemEl.style.zIndex=99999,this.teamMenuEl.style.overflow="visible";for(let e=0;e<this.menuItemEls.length;e++)this.menuItemEls.item(e).style.pointerEvents="none";this.limitMeterMenuItemEl.style.pointerEvents="auto",rl.forEach(e=>{document.addEventListener(e,this.removeLimitMeterHighlight)})}}removeLimitMeterHighlight(){this.teamMenuEl.setAttribute("style",this.teamMenuInitialStyles),this.limitMeterMenuItemEl.setAttribute("style",this.limitMeterInitialStyles);for(let e=0;e<this.menuItemEls.length;e++)this.menuItemEls.item(e).style.pointerEvents="auto";rl.forEach(e=>{document.removeEventListener(e,this.removeLimitMeterHighlight)})}clog(e){var t=this.props;const a=t.clogger,n=t.messagesCount,r=t.totalUsers,i=t.totalChannels,o=s()({step:de.UiStep.BANNER_ACTIVATION_MSG_LIMIT},e);a.track(de.EventId.UPGRDEXP_MSG_LIM_ACTIVATION_BANNER,{limit_meter_messages_count:n,num_members_minus_bots:r,num_of_channels:i,contexts:{ui_context:o}})}render(){var e=this.props;const t=e.totalUsers,a=e.totalChannels,n=e.messagesCount,s=e.teamName,r=tl.t("{name_of_workspace} is on a roll",{name_of_workspace:Object(x.q)(s)}),i=tl.rt("Your team\u2019s now <b>{num_of_members} members</b> strong, with <b>{num_of_messages} messages</b> sent across <b>{num_of_channels} channels</b>. You can track your team\u2019s progress via the main menu.",{num_of_members:t,num_of_messages:n,num_of_channels:a}),l=tl.t("Show Me");return o.a.createElement(el,{headerText:r,bodyText:i,goButtonText:l,onGo:this.onGo,showCancelButton:!1,showCloseIcon:!0,onCloseIcon:this.onClose,bannerPrefs:sl})}}activation_msg_limit_banner_ActivationMsgLimitBanner.displayName="ActivationMsgLimitBanner";var il=Object(u.b)(e=>({team:Object(Se.d)(e),clogger:Object(ie.a)({state:e})}))(activation_msg_limit_banner_ActivationMsgLimitBanner),ol=a("qN/r");const ll=new x.b("send_btn"),cl=(l.default.func.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.object.isRequired,l.default.func.isRequired,{countPref:"i18n_japan_beta_send_btn_banner_cta_count",tsPref:"i18n_japan_beta_send_btn_banner_cta_last_ts"}),dl=de.UiStep.BANNER_JAPAN_BETA_SEND_BTN,ul=de.EventId.UPGRDEXP_I18N_BANNER;class i18n_japan_beta_send_btn_banner_I18nJapanBetaSendBtnBanner extends i.PureComponent{constructor(e){super(e),this.onPrefLinkClick=this.onPrefLinkClick.bind(this)}componentDidMount(){this.props.clogger.track(ul,{contexts:{ui_context:{step:dl,action:de.UiAction.IMPRESSION}}})}onPrefLinkClick(){this.props.clogger.track(ul,{contexts:{ui_context:{step:dl,action:de.UiAction.CLICK,ui_element:de.UiElement.PREFS_BUTTON}}}),this.props.openPrefsModal({activeSection:"advanced",activeSubsection:"msg_input_send_btn_label"}),this.props.closeBanner()}UNSAFE_componentWillUpdate(e){var t=this.props;const a=t.hasSendButton;t.sendButtonAutoSet===e.sendButtonAutoSet&&a===e.hasSendButton||this.props.closeBanner()}renderBodyText(){return o.a.createElement("div",null,ll.rt("Send a message with a quick click, or by pressing <Keys>keys</Keys>",{},()=>o.a.createElement("div",{className:"inline_block"},o.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(ue.q)()?"\u2318":"Ctrl"),o.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"Enter"))),o.a.createElement("br",null),ll.rt("Don\u2018t like the change? You can always switch back in <Link>your preferences</Link>.",{},({text:e})=>o.a.createElement(Ze.a,{onClick:this.onPrefLinkClick},e)))}render(){const e=ll.t("Just for Japan: a button for sending"),t=ll.t("Got It");return o.a.createElement(el,{headerText:e,bodyText:this.renderBodyText(),bodyClass:"p-message_pane_banner__body--taller-line-height",goButtonText:t,showCancelButton:!1,showCloseIcon:!0,bannerPrefs:cl})}}i18n_japan_beta_send_btn_banner_I18nJapanBetaSendBtnBanner.displayName="I18nJapanBetaSendBtnBanner";var pl=Object(u.b)(e=>({hasSendButton:Object(ba.k)(e,"msg_input_send_btn"),sendButtonAutoSet:Object(ba.k)(e,"msg_input_send_btn_auto_set"),clogger:Object(ie.a)({state:e})}),function(e){return{closeBanner:T.a,openPrefsModal:(...t)=>e(Object(ol.a)(...t))}})(i18n_japan_beta_send_btn_banner_I18nJapanBetaSendBtnBanner),hl=a("4kdM"),ml=a("vMmh");const bl=new x.b("notification_banner"),fl={countPref:"local_discount_awareness_banner_cta_count",tsPref:"local_discount_awareness_banner_cta_last_ts",hidePref:"local_discount_awareness_banner_cta_hide"},_l=de.UiStep.BANNER_LOCAL_DISCOUNT_AWARENESS_BANNER;l.default.number.isRequired,l.default.func.isRequired,l.default.string.isRequired,l.default.object.isRequired,l.default.string.isRequired;class local_discount_awareness_banner_LocalDiscountAwarenessBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onGo","onCloseIcon","onCancel"])}componentDidMount(){this.clog({action:de.UiAction.IMPRESSION,ui_properties:{element_type:de.ElementType.BANNER,element_name:"local_discount_awareness_banner"}})}onGo(){this.clog({action:de.UiAction.CLICK,ui_element:de.UiElement.PRICING_BUTTON,is_primary_cta:!0,ui_properties:{element_type:de.ElementType.BUTTON,element_name:"pricing_button"}},!0);const e="local_discount_awareness_banner";this.props.showPricingPlans({pricingPlansPageUrl:Object(gr.k)({entryPoint:e}),source:e})}onCancel(){this.clog({action:de.UiAction.CLOSE,ui_element:de.UiElement.SKIP_FOR_NOW_BUTTON,ui_properties:{element_type:de.ElementType.BUTTON,element_name:"skip_for_now_button"}})}onCloseIcon(){this.clog({action:de.UiAction.CLOSE,ui_element:de.UiElement.BTN_CLOSE,ui_properties:{element_type:de.ElementType.X,element_name:"btn_close"}})}getContent(){var e=this.props;const t=e.discountPercent,a=e.country,n=e.localDiscountAwarenessExperiment,s=d()("p-message_pane_banner__header_icon",`p-message_pane_banner__header_icon--${a.toLowerCase()}`);return{headerText:o.a.createElement("div",null,o.a.createElement("div",{className:s}),"treatment1"===n?bl.rt("Get a {discountPercent}% discount on a paid plan",{discountPercent:t}):bl.rt("Upgrade to access paid features \u2014 at {discountPercent}% off",{discountPercent:t})),bodyText:bl.rt("For a limited time, teams in {country} can get {discountPercent}% off when upgrading to a paid plan. Once you upgrade, your team will be able to see and search all past messages and files, add guests to your workspace, and more.",{country:ml.a[a].name,discountPercent:t}),cancelButtonText:bl.t("Not Now"),goButtonText:bl.t("See Upgrade Options")}}clog(e,t){const a=this.props.clogger,n=Object(hl.a)(e,{step:_l});a.track(de.EventId.GROWTH_LOCAL_DISCOUNT,{contexts:{ui_context:n}}),t&&a.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:n}})}render(){const e=this.getContent();return e?o.a.createElement(el,{headerText:e.headerText,bodyClass:"p-message_pane_banner__body--widest-text",bodyText:e.bodyText,cancelButtonText:e.cancelButtonText,goButtonText:e.goButtonText,showCloseIcon:!0,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:fl}):null}}local_discount_awareness_banner_LocalDiscountAwarenessBanner.displayName="LocalDiscountAwarenessBanner";const gl={showPricingPlans:T.h};var yl=Object(u.b)(e=>({clogger:Object(ie.a)({state:e}),localDiscountAwarenessExperiment:Object(ha.c)(e,"local_discount_awareness")}),gl)(local_discount_awareness_banner_LocalDiscountAwarenessBanner),Ol=a("JoAr");l.default.func.isRequired,l.default.node.isRequired,l.default.node.isRequired,l.default.shape({step:l.default.number.isRequired,eventId:l.default.number.isRequired,elementName:l.default.string.isRequired}).isRequired,l.default.object.isRequired,l.default.shape({countPref:l.default.string,tsPref:l.default.string,hidePref:l.default.string}).isRequired,l.default.string.isRequired,l.default.string.isRequired;class discount_banner_DiscountBanner extends i.Component{constructor(e){super(e),Object(la.a)(this,["onGo","onCloseIcon","onCancel"])}componentDidMount(){this.clog({action:de.UiAction.IMPRESSION,ui_properties:{element_type:de.ElementType.BANNER,element_name:this.props.clogData.elementName}})}onGo(){const e=this.props.clogData;this.clog({action:de.UiAction.CLICK,is_primary_cta:!0,ui_properties:{element_type:de.ElementType.BUTTON,element_name:"pricing_button"}},!0);const t=e.elementName;this.props.showPricingPlans({pricingPlansPageUrl:Object(gr.k)({entryPoint:t}),source:t})}onCancel(){this.clog({action:de.UiAction.CLOSE,ui_properties:{element_type:de.ElementType.BUTTON,element_name:"skip_for_now_button"}})}onCloseIcon(){this.clog({action:de.UiAction.CLOSE,ui_properties:{element_type:de.ElementType.X,element_name:"btn_close"}})}clog(e,t){var a=this.props;const n=a.clogData,r=a.clogger,i=s()({step:n.step},e);r.track(n.eventId,{contexts:{ui_context:i}}),t&&r.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:i}})}render(){var e=this.props;const t=e.cancelButtonText,a=e.goButtonText,n=e.headerText,s=e.bodyText,r=e.bannerPrefs;return o.a.createElement(el,{bodyClass:"p-message_pane_banner__body--widest-text",bodyText:s,headerText:n,cancelButtonText:t,goButtonText:a,showCloseIcon:!0,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:r})}}discount_banner_DiscountBanner.displayName="DiscountBanner";const Cl={showPricingPlans:T.h};var vl=Object(u.b)(e=>({clogger:Object(ie.a)({state:e})}),Cl)(discount_banner_DiscountBanner);const El=new x.b("notification_banner"),kl=(l.default.number.isRequired,l.default.number.isRequired,l.default.bool.isRequired,{step:de.UiStep.TENURED_TEAMS_DISCOUNT_AWARENESS_BANNER,eventId:de.EventId.GROWTH_PRICING,elementName:"tenured_discount_awareness_banner"}),Sl={countPref:"tenured_discount_awareness_banner_cta_count",tsPref:"tenured_discount_awareness_banner_cta_last_ts",hidePref:"tenured_discount_awareness_banner_cta_hide"};class tenured_discount_awareness_banner_TenuredDiscountAwarenessBanner extends i.PureComponent{getContent(){const e=d()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--tenured-team");var t=this.props;const a=t.discountPercent,n=t.expirationTs;return t.featureTargetedPromotionalDiscounts?{headerText:o.a.createElement("div",null,o.a.createElement("div",{className:e}),El.rt("Get {discountPercent}% off our Standard and Plus plans",{discountPercent:a})),bodyText:El.rt("As a thank you for the time your team\u2019s been on Slack, here\u2019s {discountPercent}% off your upgrade, available through {expirationDate}. Your team will have access to features like group video calls, shared channels, and an unlimited, searchable message history.",{discountPercent:a,expirationDate:Object(Ol.a)(n,"{date_long}")})}:null}render(){if(!this.props.featureTargetedPromotionalDiscounts)return null;const e=this.getContent();return o.a.createElement(vl,{goButtonText:El.t("See Upgrade Options"),cancelButtonText:El.t("Not Now"),headerText:e.headerText,bodyText:e.bodyText,bannerPrefs:Sl,clogData:kl})}}tenured_discount_awareness_banner_TenuredDiscountAwarenessBanner.displayName="TenuredDiscountAwarenessBanner";var jl=Object(u.b)(e=>({featureTargetedPromotionalDiscounts:Object(m.m)(e,"feature_targeted_promotional_discounts")}))(tenured_discount_awareness_banner_TenuredDiscountAwarenessBanner);const Il=new x.b("notification_banner"),wl=(l.default.number.isRequired,l.default.number.isRequired,l.default.bool.isRequired,{step:de.UiStep.TENURED_TEAMS_DISCOUNT_ONE_WEEK_LEFT_BANNER,eventId:de.EventId.GROWTH_PRICING,elementName:"tenured_discount_one_week_left_banner"}),Tl={countPref:"one_week_left_tenured_discount_banner_cta_count",tsPref:"one_week_left_tenured_discount_banner_cta_last_ts",hidePref:"one_week_left_tenured_discount_banner_cta_hide"};class one_week_left_tenured_discount_banner_OneWeekLeftTenuredDiscountBanner extends i.PureComponent{getContent(){var e=this.props;const t=e.discountPercent,a=e.expirationTs,n=e.featureTargetedPromotionalDiscounts,s=d()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--tenured-team");return n?{headerText:o.a.createElement("div",null,o.a.createElement("div",{className:s}),Il.rt("Just for you: {discountPercent}% off Standard and Plus plans",{discountPercent:t})),bodyText:Il.rt("As a thank you for the time your team\u2019s been on Slack, here\u2019s {discountPercent}% off your upgrade, available through {expirationDate}. Your team will have access to features like group video calls, shared channels, and an unlimited, searchable message history.",{discountPercent:t,expirationDate:Object(Ol.a)(a,"{date_long}")})}:null}render(){if(!this.props.featureTargetedPromotionalDiscounts)return null;const e=this.getContent();return o.a.createElement(vl,{goButtonText:Il.t("See Upgrade Options"),cancelButtonText:Il.t("Not Now"),headerText:e.headerText,bodyText:e.bodyText,bannerPrefs:Tl,clogData:wl})}}one_week_left_tenured_discount_banner_OneWeekLeftTenuredDiscountBanner.displayName="OneWeekLeftTenuredDiscountBanner";var Nl=Object(u.b)(e=>({featureTargetedPromotionalDiscounts:Object(m.m)(e,"feature_targeted_promotional_discounts")}))(one_week_left_tenured_discount_banner_OneWeekLeftTenuredDiscountBanner);const Al=new x.b("notification_banner"),Rl=(l.default.number.isRequired,l.default.number.isRequired,l.default.bool.isRequired,{step:de.UiStep.TENURED_TEAMS_DISCOUNT_ONE_DAY_LEFT_BANNER,eventId:de.EventId.GROWTH_PRICING,elementName:"tenured_discount_one_day_left_banner"}),Ml={countPref:"one_day_left_tenured_discount_banner_cta_count",tsPref:"one_day_left_tenured_discount_banner_cta_last_ts",hidePref:"one_day_left_tenured_discount_banner_cta_hide"};class one_day_left_tenured_discount_banner_OneDayLeftTenuredDiscountBanner extends i.PureComponent{getContent(){var e=this.props;const t=e.discountPercent,a=e.expirationTs,n=e.featureTargetedPromotionalDiscounts,s=d()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--tenured-team");return n?{headerText:o.a.createElement("div",null,o.a.createElement("div",{className:s}),Al.rt("Last day to get {discountPercent}% off Standard and Plus plans",{discountPercent:t})),bodyText:Al.rt("As a thank you for the time your team\u2019s been on Slack, here\u2019s {discountPercent}% off your upgrade, available through {expirationDate}. Your team will have access to features like group video calls, shared channels, and an unlimited, searchable message history.",{discountPercent:t,expirationDate:Object(Ol.a)(a,"{date_long}")})}:null}render(){if(!this.props.featureTargetedPromotionalDiscounts)return null;const e=this.getContent();return o.a.createElement(vl,{goButtonText:Al.t("See Upgrade Options"),cancelButtonText:Al.t("Not Now"),headerText:e.headerText,bodyText:e.bodyText,bannerPrefs:Ml,clogData:Rl})}}one_day_left_tenured_discount_banner_OneDayLeftTenuredDiscountBanner.displayName="OneDayLeftTenuredDiscountBanner";var Pl=Object(u.b)(e=>({featureTargetedPromotionalDiscounts:Object(m.m)(e,"feature_targeted_promotional_discounts")}))(one_day_left_tenured_discount_banner_OneDayLeftTenuredDiscountBanner),xl=a("46+D");l.default.bool,l.default.arrayOf(l.default.node),l.default.shape({countPref:l.default.string,tsPref:l.default.string}).isRequired,l.default.number.isRequired,l.default.number.isRequired,l.default.string,l.default.string,l.default.bool,l.default.bool,l.default.node,l.default.func,l.default.func,l.default.object.isRequired,l.default.object.isRequired,l.default.string,l.default.string,l.default.string;const Ll={isSharedChannel:!1,sharedTeamNames:[],bodyClass:"",bodyIcon:"",bannerContainerClass:"",onGoUrl:"",goButtonText:"",headerText:"",showCloseIcon:!0,showGoButton:!0,renderBodyText:r.a,onCloseBanner:r.a};class esc_trial_banner_EscTrialBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onGo","onCloseIcon","renderBodyText"])}componentDidMount(){this.clog({action:de.UiAction.IMPRESSION})}onGo(){var e=this.props;const t=e.onGoUrl,a=e.team;this.clog({action:de.UiAction.CLICK,ui_properties:{element_type:de.ElementType.BUTTON,element_name:"upgrade"}}),Object(xe.P)(a,t)}onCloseIcon(){this.clog({action:de.UiAction.CLICK,ui_properties:{element_type:de.ElementType.BUTTON,element_name:"close"}})}clog(e){var t=this.props;const a=t.clogStep,n=t.clogEvent,r=t.clogger,i=[de.EventId.GROWTH_PRICING,n],o=s()({step:a},e);i.forEach(e=>{r.track(e,{contexts:{ui_context:o}})})}renderBodyText(){var e=this.props;return(0,e.renderBodyText)(e.sharedTeamNames)}render(){var e=this.props;const t=e.isSharedChannel,a=e.headerText,n=e.goButtonText,s=e.bannerPrefs,r=e.bodyClass,i=e.bodyIcon,l=e.bannerContainerClass,c=e.showCloseIcon,d=e.showGoButton,u=e.onCloseBanner;return t?o.a.createElement(el,{headerText:a,bodyText:this.renderBodyText(),goButtonText:n,showCancelButton:!1,showCloseIcon:c,onGo:this.onGo,onCloseIcon:this.onCloseIcon,onCloseBanner:u,bannerPrefs:s,bodyClass:r,bannerContainerClass:l,bodyIcon:i,showGoButton:d}):null}}esc_trial_banner_EscTrialBanner.displayName="EscTrialBanner",esc_trial_banner_EscTrialBanner.defaultProps=Ll;var Fl=Object(u.b)(e=>{const t=Object(_.a)(e),a=Object(B.e)(e,t),n=Object(q.bb)(a);let s=[];if(n){const t=Object(q.O)(e,a);Object(io.a)(t)||(s=Object(ht.a)(t,t=>{const a=Object(Se.i)(e,t);return Object(xe.M)(a)?o.a.createElement(xl.a,{type:"unknown"}):Object(xe.e)(a)}))}return{isSharedChannel:n,sharedTeamNames:s,clogger:Object(ie.a)({state:e}),team:Object(Se.d)(e)}})(esc_trial_banner_EscTrialBanner);const Dl=new x.b("trial_expiration_banners"),Bl=(l.default.string.isRequired,l.default.number.isRequired,l.default.string.isRequired,{countPref:"two_weeks_left_esc_trial_cta_count",tsPref:"two_weeks_left_esc_trial_cta_last_ts"});class two_weeks_left_esc_trial_banner_TwoWeeksLeftEscTrialBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["renderBodyText","renderHeaderText"])}renderBodyText(e){const t=this.props.expirationDate,a=Object(x.k)(e,{noEscape:!0,react:!0});return Dl.rt("When the trial ends, this channel will <b>no longer be shared</b> with {shared_team_name}. Upgrade by {expiration_date} to keep all the features of the Standard plan.",{expiration_date:t,shared_team_name:a})}renderHeaderText(){const e=this.props.numDaysLeft;return Dl.t("Heads up: you have {num_of_days} more days on your free trial",{num_of_days:e})}render(){const e=this.props.productId,t=Dl.t("Upgrade Now");return o.a.createElement(Fl,{bannerPrefs:Bl,clogStep:de.UiStep.BANNER_SHARED_CHANNELS_TRIAL_TWO_WEEK_REMINDER,clogEvent:de.EventId.UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:`${gr.a}?s=1&p=${e}&entry_point=two_weeks_left_esc_banner`,goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}two_weeks_left_esc_trial_banner_TwoWeeksLeftEscTrialBanner.displayName="TwoWeeksLeftEscTrialBanner";var Ul=two_weeks_left_esc_trial_banner_TwoWeeksLeftEscTrialBanner;const ql=new x.b("trial_expiration_banners"),Hl=(l.default.number.isRequired,l.default.string.isRequired,l.default.string.isRequired,{countPref:"one_week_left_esc_trial_cta_count",tsPref:"one_week_left_esc_trial_cta_last_ts"});class one_week_left_esc_trial_banner_OneWeekLeftEscTrialBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["renderBodyText","renderHeaderText"])}renderBodyText(e){const t=this.props.expirationDate,a=Object(x.k)(e,{noEscape:!0,react:!0});return ql.rt("<b>You won\u2019t be able to use this channel with {shared_team_name}</b> afterward, even if you upgrade later. To keep sharing this channel, upgrade before <span>{expiration_date}.</span>",{expiration_date:t,shared_team_name:a,fallbackHash:"decd823ab360b2e8c20d6fbcd615ae1c1c450d9e"},({text:e,tag:t})=>"b"===t?o.a.createElement("strong",{className:"sk_raspberry_red"},e):o.a.createElement("span",{className:"nowrap"},e))}renderHeaderText(){const e=this.props.numDaysLeft;return ql.t("Only {num_of_days} days left on your free trial",{num_of_days:e})}render(){const e=this.props.productId,t=ql.t("Upgrade Now");return o.a.createElement(Fl,{bannerPrefs:Hl,clogStep:de.UiStep.BANNER_SHARED_CHANNELS_TRIAL_ONE_WEEK_REMINDER,clogEvent:de.EventId.UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:`${gr.a}?s=1&p=${e}&entry_point=one_week_left_esc_trial_banner`,goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}one_week_left_esc_trial_banner_OneWeekLeftEscTrialBanner.displayName="OneWeekLeftEscTrialBanner";var Wl=one_week_left_esc_trial_banner_OneWeekLeftEscTrialBanner;const Gl=new x.b("trial_expiration_banners"),Kl="add_payments_details",Vl="close",zl="get_quote",$l={countPref:"seven_days_left_trial_cta_count",tsPref:"seven_days_left_trial_cta_last_ts"};l.default.object.isRequired,l.default.object.isRequired,l.default.string.isRequired,l.default.number.isRequired,l.default.bool.isRequired;class seven_days_left_trial_banner_SevenDaysLeftTrialBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onGo","onClose","onCancel"])}componentDidMount(){this.clog({action:de.UiAction.IMPRESSION})}onGo(){var e=this.props;const t=e.team,a=e.productId;this.clog({action:de.UiAction.CLICK,is_primary_cta:!0,ui_properties:{element_type:de.ElementType.BUTTON,element_name:Kl}}),Object(xe.P)(t,`${gr.a}?s=1&p=${a}&entry_point=seven_days_left_trial_banner`)}onCancel(){this.clog({action:de.UiAction.CLICK,is_primary_cta:!1,ui_properties:{element_type:de.ElementType.BUTTON,element_name:zl}})}onClose(){this.clog({action:de.UiAction.CLICK,is_primary_cta:!1,ui_properties:{element_type:de.ElementType.BUTTON,element_name:Vl}})}getHeaderText(){var e=this.props;const t=e.featureGGFromTheStart,a=e.numDaysLeft,n=e.team;if(!t)return null;const s=Object(xe.z)(n)?Gl.t("Slack Standard"):Gl.t("Slack Plus");return a<7?Gl.rt("Your trial of {plan_level} ends in less than a week",{plan_level:s}):Gl.rt("Your trial of {plan_level} ends in 1 week",{plan_level:s})}clog(e){var t=this.props;const a=t.featureGGFromTheStart,n=t.clogger,r=t.team;if(!a)return;const i=Object(xe.z)(r)?"standard_trial":"plus_trial",o=s()({step:de.UiStep.BANNER_TRIAL_ONE_WEEK_REMINDER,step_variant:i,entry_point:"client_boot"},e);n.track(de.EventId.UPGRDEXP_TRIAL,{contexts:{ui_context:o}})}render(){var e=this.props;const t=e.featureGGFromTheStart,a=e.team;if(!t)return null;const n=Object(xe.z)(a),s=this.getHeaderText(),r=n?"p-message_pane_banner--bg_standard":"p-message_pane_banner--bg_plus",i=Gl.rt("Get a quote to see how much Slack will cost for your team.{break}Ready to buy? Just add your payment details.",{break:o.a.createElement("br",null)}),l=Gl.t("Add Payment Details"),c=Gl.t("Get Quote"),d=`plans/estimate?level=${n?"std":"plus"}`;return o.a.createElement(el,{headerText:s,bodyText:i,goButtonText:l,onGo:this.onGo,shouldCloseOnGo:!1,cancelHref:d,cancelTarget:"_self",shouldCloseOnCancel:!1,bannerContainerClass:r,showCancelButton:!0,onCancel:this.onCancel,cancelButtonText:c,showCloseIcon:!0,onCloseIcon:this.onClose,bannerPrefs:$l})}}seven_days_left_trial_banner_SevenDaysLeftTrialBanner.displayName="SevenDaysLeftTrialBanner";var Yl=Object(u.b)(e=>({team:Object(Se.d)(e),clogger:Object(ie.a)({state:e}),featureGGFromTheStart:Object(m.m)(e,"feature_gg_from_the_start")}))(seven_days_left_trial_banner_SevenDaysLeftTrialBanner);const Ql=new x.b("trial_expiration_banners"),Xl={countPref:"three_days_left_esc_trial_cta_count",tsPref:"three_days_left_esc_trial_cta_last_ts"};l.default.string.isRequired,l.default.string.isRequired;class three_days_left_esc_trial_banner_ThreeDaysLeftEscTrialBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["renderBodyText"])}renderBodyText(e){return Ql.rt("Upgrade before your free trial ends on {expiration_date} to keep sharing this channel with {shared_team_name}. Otherwise, this channel will be permanently disconnected. (You can start a new shared channel if you decide to upgrade later.)",{expiration_date:this.props.expirationDate,shared_team_name:Object(x.k)(e,{noEscape:!0,react:!0})})}render(){const e=this.props.productId;return o.a.createElement(Fl,{bannerPrefs:Xl,clogStep:de.UiStep.BANNER_SHARED_CHANNELS_TRIAL_THREE_DAY_REMINDER,onGoUrl:`${gr.a}?s=1&p=${e}&entry_point=three_days_left_esc_trial_banner`,clogEvent:de.EventId.GROWTH_PLANS_PAGE_TRIALS,goButtonText:Ql.t("Upgrade Now"),headerText:Ql.t("Upgrade your workspace to keep sharing this channel"),renderBodyText:this.renderBodyText,bodyClass:"p-message_pane_banner__body--widest-text"})}}three_days_left_esc_trial_banner_ThreeDaysLeftEscTrialBanner.displayName="ThreeDaysLeftEscTrialBanner";var Jl=three_days_left_esc_trial_banner_ThreeDaysLeftEscTrialBanner;const Zl=new x.b("trial_expiration_banners"),ec="add_payments_details",tc="close",ac="get_quote",nc={countPref:"three_days_left_trial_cta_count",tsPref:"three_days_left_trial_cta_last_ts"};l.default.object.isRequired,l.default.object.isRequired,l.default.string.isRequired,l.default.number.isRequired,l.default.string.isRequired,l.default.bool.isRequired;class three_days_left_trial_banner_ThreeDaysLeftTrialBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onGo","onClose","onCancel"])}componentDidMount(){this.clog({action:de.UiAction.IMPRESSION})}onGo(){var e=this.props;const t=e.team,a=e.productId;this.clog({action:de.UiAction.CLICK,is_primary_cta:!0,ui_properties:{element_type:de.ElementType.BUTTON,element_name:ec}}),Object(xe.P)(t,`${gr.a}?s=1&p=${a}&entry_point=three_days_left_trial_banner`)}onClose(){this.clog({action:de.UiAction.CLICK,is_primary_cta:!1,ui_properties:{element_type:de.ElementType.BUTTON,element_name:tc}})}onCancel(){this.clog({action:de.UiAction.CLICK,is_primary_cta:!1,ui_properties:{element_type:de.ElementType.BUTTON,element_name:ac}})}getPropsForPlan(){var e=this.props;const t=e.team,a=e.expirationDate,n=e.numDaysLeft;if(e.featureGGFromTheStart)return Object(xe.z)(t)?{headerText:Zl.t("Your trial of Slack Standard ends in {number_days_left} days",{number_days_left:n}),bodyText:Zl.t("Add your payment details to keep features like group video calls, shared channels, and an unlimited, searchable message history"),bannerContainerClass:"p-message_pane_banner--bg_standard",cancelHref:"plans/estimate?level=std"}:{headerText:Zl.t("Your trial of Slack Plus ends in {number_days_left} days",{number_days_left:n}),bodyText:Zl.t("Add your payment details to keep features like group video calls, shared channels, and SAML-based SSO."),bannerContainerClass:"p-message_pane_banner--bg_plus",cancelHref:"plans/estimate?level=plus"};const s=Object(xe.z)(t)?Zl.t("Standard"):Zl.t("Plus"),r=Zl.rt("Your workspace\u2019s trial of our <b>{plan_level} plan</b> only lasts through <b>{expiration_date}</b>. Upgrade to a paid plan to keep your access to features like unlimited messages and files, guest accounts, and more when your trial ends.",{plan_level:s,expiration_date:a});return{headerText:Zl.t("Your free trial ends soon"),bodyText:r,bannerContainerClass:""}}clog(e){var t=this.props;const a=t.clogger,n=t.team,r=Object(xe.z)(n)?"standard_trial":"plus_trial",i=s()({step:de.UiStep.BANNER_TRIAL_THREE_DAY_REMINDER,step_variant:r,entry_point:"client_boot"},e);a.track(de.EventId.UPGRDEXP_TRIAL,{contexts:{ui_context:i}})}render(){const e=this.props.featureGGFromTheStart;var t=this.getPropsForPlan();const a=t.headerText,n=t.bodyText,s=t.bannerContainerClass,r=t.cancelHref;let i,l,c=Zl.t("Upgrade Now"),d=!1;return e&&(c=Zl.t("Add Payment Details"),i=Zl.t("Get Quote"),d=!0,l="_self"),o.a.createElement(el,{headerText:a,bodyText:n,goButtonText:c,onGo:this.onGo,shouldCloseOnGo:!1,bannerContainerClass:s,showCancelButton:d,cancelButtonText:i,cancelHref:r,cancelTarget:l,onCancel:this.onCancel,shouldCloseOnCancel:!1,showCloseIcon:!0,onCloseIcon:this.onClose,bannerPrefs:nc})}}three_days_left_trial_banner_ThreeDaysLeftTrialBanner.displayName="ThreeDaysLeftTrialBanner";var sc=Object(u.b)(e=>({team:Object(Se.d)(e),clogger:Object(ie.a)({state:e}),featureGGFromTheStart:Object(m.m)(e,"feature_gg_from_the_start")}))(three_days_left_trial_banner_ThreeDaysLeftTrialBanner);const rc=new x.b("free_trial_banners"),ic=(l.default.object.isRequired,l.default.object.isRequired,{countPref:"in_prod_trial_banner_cta_count",tsPref:"in_prod_trial_banner_cta_last_ts"}),oc=205,lc="UPGRDEXP_FREE_TRIAL_IN_PROD",cc="trial";class in_prod_trial_message_pane_banner_InProdTrialMessagePaneBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onGo","onCloseIcon"])}componentDidMount(){this.props.clogger.track(lc,{contexts:{ui_context:{step:oc,action:"impression"}}})}onGo(){var e=this.props;const t=e.clogger,a=e.team;t.track(lc,{contexts:{ui_context:{step:oc,action:"click",ui_element:"learn_more_btn"}}}),Object(xe.P)(a,cc)}onCloseIcon(){this.props.clogger.track(lc,{contexts:{ui_context:{step:oc,action:"close",ui_element:"btn_close"}}})}getContent(){return{headerText:rc.t("Start your free trial of the Standard plan"),bodyText:rc.t("With unlimited searchable messages, you\u2019ll never lose access to your conversations \u2014 or to things like project details, important docs, and key decisions made along the way.")}}render(){const e=this.getContent();return Object(io.a)(e)?null:o.a.createElement(el,{headerText:e.headerText,bodyText:e.bodyText,showCancelButton:!1,showCloseIcon:!0,isLearnMoreButton:!0,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:ic})}}in_prod_trial_message_pane_banner_InProdTrialMessagePaneBanner.displayName="InProdTrialMessagePaneBanner";var dc=Object(u.b)(e=>({clogger:Object(ie.a)({state:e}),team:Object(Se.d)(e)}))(in_prod_trial_message_pane_banner_InProdTrialMessagePaneBanner);const uc=new x.b("free_trial_banners"),pc=(l.default.string.isRequired,l.default.object.isRequired,l.default.object.isRequired,{countPref:"in_prod_trial_reminder_banner_cta_count",tsPref:"in_prod_trial_reminder_banner_cta_last_ts"}),hc=207,mc="UPGRDEXP_FREE_TRIAL_IN_PROD",bc="trial";class in_prod_trial_reminder_banner_InProdTrialReminderBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onGo","onCloseIcon"])}componentDidMount(){this.props.clogger.track(mc,{contexts:{ui_context:{step:hc,action:"impression"}}})}onGo(){var e=this.props;const t=e.clogger,a=e.team;t.track(mc,{contexts:{ui_context:{step:hc,action:"click",ui_element:"learn_more_btn"}}}),Object(xe.P)(a,bc)}onCloseIcon(){this.props.clogger.track(mc,{contexts:{ui_context:{step:hc,action:"close",ui_element:"btn_close"}}})}getContent(){const e=this.props.expirationDate;return{headerText:uc.t("Your free trial offer is about to expire"),bodyText:uc.rt("You still have time to try out the <b>Standard plan</b>. Start your trial by <b>{expiration_date}</b> to explore features like unlimited searchable messages, guest accounts, screen sharing, and more \u2014 free for 30 days. ",{expiration_date:e})}}render(){const e=this.getContent();return o.a.createElement(el,{headerText:e.headerText,bodyText:e.bodyText,showCancelButton:!1,showCloseIcon:!0,isLearnMoreButton:!0,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:pc})}}in_prod_trial_reminder_banner_InProdTrialReminderBanner.displayName="InProdTrialReminderBanner";var fc=Object(u.b)(e=>({clogger:Object(ie.a)({state:e}),team:Object(Se.d)(e)}))(in_prod_trial_reminder_banner_InProdTrialReminderBanner);const _c=new x.b("notification_banner"),gc={countPref:"approaching_file_limit_banner_cta_count",tsPref:"approaching_file_limit_banner_cta_last_ts"},yc=200,Oc="UPGRDEXP_ENFORCE_FILE_LIMITS";l.default.object.isRequired,l.default.string.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.object.isRequired;class approaching_file_limit_banner_ApproachingFileLimitBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onGo","onCloseIcon","onDeleteFilesLinkClicked"])}componentDidMount(){this.props.clogger.track(Oc,{contexts:{ui_context:{step:yc,action:"impression"}}})}onGo(){const e=this.props.clogger;e.track(Oc,{contexts:{ui_context:{step:yc,action:"click",ui_element:"pricing_button"}}}),e.track("GROWTH_PRICING",{contexts:{ui_context:{step:yc,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:Object(gr.k)({entryPoint:"approaching_file_limit_banner"}),source:"approaching_file_limit_banner"})}onCloseIcon(){this.props.clogger.track(Oc,{contexts:{ui_context:{step:yc,action:"close",ui_element:"btn_close"}}})}onDeleteFilesLinkClicked(){var e=this.props;const t=e.userId,a=e.clogger;this.props.closeBanner({bannerPrefs:gc}),this.props.showFileList({user:t}),a.track(Oc,{contexts:{ui_context:{step:yc,action:"click",ui_element:"file_storage_link"}}})}getHeaderText(){const e=this.props.team;return _c.rt("{name_of_workspace} is almost out of space",{name_of_workspace:e.name})}getBodyText(){return _c.rt('If your workspace goes over the free plan\u2019s <span class="bold">5 GB storage limit,</span> older files will no longer be viewable. To access all your files, you can upgrade to a paid plan.')}render(){const e=_c.t("See Plans");return o.a.createElement(el,{headerText:this.getHeaderText(),bodyText:this.getBodyText(),goButtonText:e,showCancelButton:!1,showCloseIcon:!0,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:gc})}}approaching_file_limit_banner_ApproachingFileLimitBanner.displayName="ApproachingFileLimitBanner";const Cc={closeBanner:T.a,showFileList:qa.g,showPricingPlans:T.h};var vc=Object(u.b)(e=>({team:Object(Se.d)(e),userId:Object(m.d)(e),clogger:Object(ie.a)({state:e})}),Cc)(approaching_file_limit_banner_ApproachingFileLimitBanner);const Ec=new x.b("client"),kc={countPref:"approaching_msg_limit_banner_cta_count",tsPref:"approaching_msg_limit_banner_cta_last_ts"},Sc=63,jc="GROWTH_PRICING";l.default.number.isRequired,l.default.object.isRequired,l.default.func.isRequired;class approaching_msg_limit_banner_ApproachingMsgLimitBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onGo","onCloseBanner"])}componentDidMount(){var e=this.props;const t=e.messagesCount;e.clogger.track(jc,{limit_meter_messages_count:t,contexts:{ui_context:{step:Sc,action:"impression"}}})}onGo(){var e=this.props;const t=e.messagesCount;e.clogger.track(jc,{limit_meter_messages_count:t,contexts:{ui_context:{step:Sc,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:Object(gr.k)({entryPoint:"approaching_msg_limit_banner"}),source:"approaching_msg_limit_banner"})}onCloseBanner(){var e=this.props;const t=e.messagesCount;e.clogger.track(jc,{limit_meter_messages_count:t,contexts:{ui_context:{step:Sc,action:"close",ui_element:"skip_for_now_button"}}})}getContent(){return{headerText:Ec.t("Unlock unlimited messages for your team"),bodyText:Ec.t("Your workspace is getting close to the 10,000 message limit for free teams. On Slack\u2019s paid plans, you can see and search unlimited messages.")}}render(){const e=this.getContent();return o.a.createElement(el,{headerText:e.headerText,bodyText:e.bodyText,isLearnMoreButton:!0,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:kc})}}approaching_msg_limit_banner_ApproachingMsgLimitBanner.displayName="ApproachingMsgLimitBanner";const Ic={showPricingPlans:T.h};var wc=Object(u.b)(e=>({clogger:Object(ie.a)({state:e})}),Ic)(approaching_msg_limit_banner_ApproachingMsgLimitBanner);const Tc=new x.b("client"),Nc={countPref:"just_reached_msg_limit_banner_cta_count",tsPref:"just_reached_msg_limit_banner_cta_last_ts"},Ac=64,Rc="GROWTH_PRICING";l.default.number.isRequired,l.default.object.isRequired,l.default.func.isRequired;class just_reached_msg_limit_banner_JustReachedMsgLimitBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onGo","onCloseBanner"])}componentDidMount(){var e=this.props;const t=e.messagesCount;e.clogger.track(Rc,{limit_meter_messages_count:t,contexts:{ui_context:{step:Ac,action:"impression"}}})}onGo(){var e=this.props;const t=e.messagesCount;e.clogger.track(Rc,{limit_meter_messages_count:t,contexts:{ui_context:{step:Ac,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:Object(gr.k)({entryPoint:"just_reached_msg_limit_banner"}),source:"just_reached_msg_limit_banner"})}onCloseBanner(){var e=this.props;const t=e.messagesCount;e.clogger.track(Rc,{limit_meter_messages_count:t,contexts:{ui_context:{step:Ac,action:"close",ui_element:"skip_for_now_button"}}})}getCancelButtonText(){return Tc.t("Not Now")}getContent(){return{headerText:Tc.t("You\u2019ve just reached the 10k message limit"),bodyText:Tc.t("Your workspace has over 10,000 messages in it! That\u2019s a lot of conversation and history. Upgrade to a paid plan to make sure you can access all of it whenever you need it.")}}render(){const e=this.getContent();return o.a.createElement(el,{headerText:e.headerText,bodyText:e.bodyText,isLearnMoreButton:!0,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:Nc,cancelButtonText:this.getCancelButtonText()})}}just_reached_msg_limit_banner_JustReachedMsgLimitBanner.displayName="JustReachedMsgLimitBanner";const Mc={showPricingPlans:T.h};var Pc=Object(u.b)(e=>({clogger:Object(ie.a)({state:e})}),Mc)(just_reached_msg_limit_banner_JustReachedMsgLimitBanner),xc=a("U28S");const Lc=new x.b("client"),Fc={countPref:"thirty_days_after_msg_limit_banner_cta_count",tsPref:"thirty_days_after_msg_limit_banner_cta_last_ts"},Dc=65,Bc="GROWTH_PRICING";l.default.number.isRequired,l.default.object.isRequired,l.default.func.isRequired;class thirty_days_after_msg_limit_banner_ThirtyDaysAfterMsgLimitBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onGo","onCloseBanner"])}componentDidMount(){var e=this.props;const t=e.messagesCount;e.clogger.track(Bc,{limit_meter_messages_count:t,contexts:{ui_context:{step:Dc,action:"impression"}}})}onGo(){var e=this.props;const t=e.messagesCount;e.clogger.track(Bc,{limit_meter_messages_count:t,contexts:{ui_context:{step:Dc,action:"click",ui_element:"pricing_button"}}});const a="thirty_days_after_msg_limit_banner";this.props.showPricingPlans({pricingPlansPageUrl:Object(gr.k)({entryPoint:a}),source:a})}onCloseBanner(){var e=this.props;const t=e.messagesCount;e.clogger.track(Bc,{limit_meter_messages_count:t,contexts:{ui_context:{step:Dc,action:"close",ui_element:"skip_for_now_button"}}})}getContent(){const e=this.props.messagesCount-1e4,t=this.roundNumOfMsgsBeyondLimit(e);return!t||t<0?null:{headerText:Lc.t("Your workspace has {num_msgs_beyond_limit} messages more than the 10k limit",{num_msgs_beyond_limit:t}),bodyText:Lc.t("That\u2019s more than {num_msgs_beyond_limit} messages you can\u2019t see or search. On a paid plan, you can easily find and view all past messages \u2014 plus features like guest accounts for contractors, group video calls, and unlimited apps.",{num_msgs_beyond_limit:t,fallbackHash:"db9e0ff0ad65ce2f75e98390bcfaec1c1fa6fd45"})}}roundNumOfMsgsBeyondLimit(e){if(e>9&&e<100)return 10*Math.floor(e/10);if(e>=100&&e<=999999){const t=100*Math.floor(e/100);return Object(x.o)(t)}return e>999999?Object(xc.a)(e):e}render(){const e=this.getContent();return e?o.a.createElement(el,{headerText:e.headerText,bodyText:e.bodyText,isLearnMoreButton:!0,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:Fc}):null}}thirty_days_after_msg_limit_banner_ThirtyDaysAfterMsgLimitBanner.displayName="ThirtyDaysAfterMsgLimitBanner";const Uc={showPricingPlans:T.h};var qc=Object(u.b)(e=>({clogger:Object(ie.a)({state:e})}),Uc)(thirty_days_after_msg_limit_banner_ThirtyDaysAfterMsgLimitBanner),Hc=a("Fsnq"),Wc=a("kKpd"),Gc=a("wSSu"),Kc=a.n(Gc),Vc=a("wvq5"),zc=a("U45i"),$c=a("iRvo");l.default.string,l.default.node.isRequired,l.default.number.isRequired,l.default.number.isRequired,l.default.func.isRequired;class step_Step extends i.Component{UNSAFE_componentWillReceiveProps(){var e=this.props;const t=e.title;e.currentStep===e.step&&this.props.setModalTitle(t)}render(){var e=this.props;const t=e.currentStep===e.step,a=d()({"p-onboarding__step":!0,"p-onboarding__step--active":t,"p-onboarding__step--inactive":!t}),n=o.a.createElement("div",{className:a},t&&this.props.children);return t?n:null}}step_Step.displayName="Step",step_Step.defaultProps={title:""};const Yc={setModalTitle:Wc.C};var Qc=Object(u.b)(null,Yc)(step_Step),Xc=a("F7O2");const Jc=new x.b("password");var Zc=e=>{return{no_values:Jc.t("Please enter a password!"),matches_username:Jc.t("That password is too similar to your username. Try something different?"),matches_email:Jc.t("That password is too similar to your email address. Try something different?"),too_short:Jc.t("Your password must be at least 6 characters long."),too_long:Jc.t("Your password can be at most 500 characters long."),numeric_sequence:Jc.t("Your password cannot solely contain sequences of letters or numbers."),alpha_sequence:Jc.t("Your password cannot solely contain sequences of letters or numbers."),adjacent:Jc.t("Your password cannot solely contain adjacent keys on a keyboard."),repeated:Jc.t("Your password cannot solely contain a repeated character."),common:Jc.t("That password is pretty common. Try something different?")}[e]||""};const ed=3,td={light:{profile:cdn_url+"/80588/img/tractor/steps/step_01.png",workspace:cdn_url+"/80588/img/tractor/steps/step_02.png",invites:cdn_url+"/80588/img/tractor/steps/step_03.png",completion:cdn_url+"/80588/img/tractor/steps/step_04.png"},dark:{profile:cdn_url+"/484c25/img/tractor/steps/step_01_dark.png",workspace:cdn_url+"/484c25/img/tractor/steps/step_02_dark.png",invites:cdn_url+"/484c25/img/tractor/steps/step_03_dark.png",completion:cdn_url+"/484c25/img/tractor/steps/step_04_dark.png"}},ad={profile:0,workspace:1,invites:2,completion:3},nd={0:"TRACTOR_DIALOG_PROFILE_STEP",1:"TRACTOR_DIALOG_WORKSPACE_STEP",2:"TRACTOR_DIALOG_INVITE_STEP",3:"TRACTOR_DIALOG_COMPLETED_STEP"},sd={start_team_creator_account_setup:"BANNER_TRACTOR_WELCOME",complete_team_creator_account_setup:"BANNER_TRACTOR_REMINDER",invite_team_creator_account_setup:"BANNER_TRACTOR_INVITES"};var rd=a("nWao"),id=a("KEK+"),od=a("t4nz");l.default.string.isRequired;const ld=({src:e})=>o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"p-onboarding__step__header"},o.a.createElement("img",{src:e,srcSet:`${e} 1x, ${e.replace(".png","@2x.png")} 2x`,alt:""})));ld.displayName="StepHeader";var cd=ld;l.default.string.isRequired,l.default.string,l.default.bool,l.default.func,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func;const dd={realName:"",gdprPref:!1,onPasswordSet:r.a,needsPasswordSet:!0,updateRealName:r.a,updateGdprPref:r.a,updateStep:r.a,setStepCallback:r.a,submitCheckPasswordComplexity:r.a},ud=new x.b("team_creation"),pd=Object(Ot.b)(),hd="TEAM_CREATOR_ONBOARDING";class profile_step_ProfileStep extends i.Component{constructor(e){super(e);const t=this.props.realName;Object(la.a)(this,["onRealNameChange","onPasswordChange","onGdprPrefChange","onGo","setRealNameInputRef","updateRealName","validateAndSaveStep"]),this.nameInput=null,this.updateRealNameDebounced=Object(oa.a)(this.updateRealNameApi,500),this.checkPasswordComplexityDebounced=Object(oa.a)(this.checkPasswordComplexityApi,500),this.state={realName:t,realNameError:null,password:"",passwordError:null,gdpr:null}}componentDidMount(){this.nameInput.focus(),this.props.setStepCallback(this.onGo),this.validateAndSaveStep()}onRealNameChange(){this.updateRealNameDebounced(this.state.realName)}onPasswordChange(e){this.setState(()=>({password:e}),()=>{this.checkPasswordComplexityDebounced(e)})}onGdprPrefChange(e){const t=!!e.target.classList.contains("gdpr_pref_radio")||e.target.checked,a=e.target.value;this.setState(()=>({gdpr:t,gdprRadioValue:a}),()=>{this.props.updateGdprPref({gdprPref:t})})}onGo(){const e=this.props.needsPasswordSet;this.validateAndSaveStep().then(t=>{t.isValid&&(e&&this.props.onPasswordSet(this.state.password),this.props.updateStep({number:ad.workspace}))}).catch(e=>{pd.info(hd,e)})}setRealNameInputRef(e){this.nameInput=e}updateRealName(e){this.setState(()=>({realName:e}))}updateRealNameApi(e){this.props.updateRealName({realName:e}).then(()=>{this.setState(()=>({realNameError:null}))}).catch(e=>{this.setState(()=>({realNameError:e}))}).finally(()=>{this.validateAndSaveStep()})}checkPasswordComplexityApi(e){this.props.submitCheckPasswordComplexity({password:e}).then(()=>{this.setState(()=>({passwordError:null}))}).catch(({data:e})=>{this.setState(()=>({passwordError:e.error}))}).finally(()=>{this.validateAndSaveStep()})}validateAndSaveStep(){var e=this.state;const t=e.realName,a=e.realNameError,n=e.password,s=e.passwordError,r=!this.props.needsPasswordSet||n;return this.props.updateStep({validated:!(!t||!r||a||s),forceValidation:!0})}renderRealNameField(){var e=this.state;const t=e.realName,a=e.realNameError,n=a?a.message:null,r=a?a.name:null,i=d()("realName_input",{"c-input_text--with_error":n,"p-onboarding__step__real_name_input--success":!n,[r]:n}),l=n?{errorText:n,errorLevel:"error",errorType:"nested_box"}:null,c={name:"real_name",hintText:ud.t("Your name will be displayed with messages you send."),id:"real_name",className:i,"data-qa":"tractor-real-name-input",value:t,onChange:this.updateRealName,onBlur:this.onRealNameChange,ref:this.setRealNameInputRef,isRequired:!0},u={text:ud.t("Your full name"),className:"margin_bottom_150",htmlFor:"real_name",id:"real_name_label"};return o.a.createElement(Dn.a,u,o.a.createElement(Un.a,s()({},c,l)))}renderPasswordField(){var e=this.state;const t=e.password,a=e.passwordError,n=d()("password_input",{"c-input_text--with_error":!!a,"p-onboarding__step__password_input--success":!a,[a]:!!a}),r={text:ud.t("Your password"),className:"margin_bottom_150",htmlFor:"password_field",id:"passwordLabel"},i={name:"password_field",hintText:ud.t("Passwords must be at least 6 characters long, and can\u2019t be things like password, 123456, or abcdef."),id:"password_field","data-qa":"tractor-password-input",className:n,onChange:this.onPasswordChange,value:t,type:"password",isRequired:!0};let l="";a&&(l=Zc(a));const c=a?{errorText:l,errorLevel:"error",errorType:"nested_box"}:null;return o.a.createElement(Dn.a,r,o.a.createElement(Un.a,s()({},i,c)))}renderGdprPref(){const e=this.props.inEU,t=this.props.gdpr,a=this.state.gdpr,n=o.a.createElement(Dn.a,{type:"inline",cursor:"pointer",htmlFor:"gdpr_field",text:ud.t("It\u2019s okay to send me email with Slack tips, news, and offers."),className:"margin_bottom_150 normal tractor_checkbox_label",id:"gdpr_checkbox_label"},o.a.createElement(Bn.a,{id:"gdpr_field",checked:null===a?t:a,"data-qa":"tractor-gdpr-checkbox",onChange:this.onGdprPrefChange})),s=o.a.createElement(rd.a,{className:"margin_bottom_150 normal tractor_checkbox_label","data-qa":"tractor-gdpr-radiogroup"},o.a.createElement(od.a,null,ud.rt("<strong>Can we send you email with Slack tips, news, and offers?</strong>")),o.a.createElement(Dn.a,{htmlFor:"gdpr_field_yes",text:ud.t("Sure!"),cursor:"pointer",type:"inline"},o.a.createElement(id.a,{id:"gdpr_field_yes",className:"gdpr_pref_radio",value:"opt_in","data-qa":"tractor-gdpr-radio-yes",checked:"opt_in"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})),o.a.createElement(Dn.a,{htmlFor:"gdpr_field_no",text:ud.t("No thanks"),cursor:"pointer",type:"inline"},o.a.createElement(id.a,{id:"gdpr_field_no",className:"gdpr_pref_radio",value:"opt_out","data-qa":"tractor-gdpr-radio-no",checked:"opt_out"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})));return e?s:n}render(){return o.a.createElement(i.Fragment,null,o.a.createElement(cd,{src:this.props.imgUrl}),o.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-profile-step"},this.renderRealNameField(),this.props.needsPasswordSet&&this.renderPasswordField(),this.renderGdprPref()))}}profile_step_ProfileStep.displayName="ProfileStep",profile_step_ProfileStep.defaultProps=dd;const md={updateRealName:Wc.K,updateGdprPref:Wc.I,updateStep:Wc.L,setStepCallback:Wc.D,submitCheckPasswordComplexity:Xc.d};var bd=Object(u.b)(e=>({realName:Object(Wc.r)(e),gdpr:Object(Wc.m)(e),inEU:Object(Wc.n)(e),needsPasswordSet:Object(ba.k)(e,"needs_initial_password_set")}),md)(profile_step_ProfileStep),fd=a("P3Po");l.default.string.isRequired,l.default.array,l.default.bool,l.default.string,l.default.string.isRequired,l.default.string,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.func;const _d={invites:[],workspaceName:"",domainWhitelistingPref:!1,signupDomain:"",onDialogFinish:r.a,validateInvites:r.a,sendInvites:r.a,setDomainWhitelistingPref:r.a,updateStep:r.a,setStepCallback:r.a,canWhitelistDomain:!1,featureTractorSharedInviteLink:!0,featureTractorBackupChannelnameCopy:!1,sharedInviteLink:"",fetchAndSetSharedInviteLink:r.a},gd=new x.b("team_creation"),yd=Object(Ot.b)(),Od="TEAM_CREATOR_ONBOARDING";class invites_step_InvitesStep extends i.Component{constructor(e){super(e);const t=this.props.invites,a=t instanceof Array?t.join(", "):t;Object(la.a)(this,["onInvitesChange","onDomainWhitelistingCheckboxChange","onGo","setInvitesInputRef","renderSharedInviteLink","toggleSharedInviteLinkView"]),this.invitesInput=null,this.validateInvitesDebounced=Object(oa.a)(this.validateInvites,250),this.state={invites:a,invitesError:null,domainWhitelistingPref:!1,toggleSharedInviteLink:!1}}componentDidMount(){this.invitesInput.focus();var e=this.props;const t=e.sharedInviteLink,a=e.featureTractorSharedInviteLink;this.props.setStepCallback(this.onGo),a&&!t&&this.props.fetchAndSetSharedInviteLink(),this.props.updateStep({validated:!0})}onInvitesChange(e){this.setState(()=>({invites:e}),()=>{this.validateInvitesDebounced(e)})}onDomainWhitelistingCheckboxChange(e){const t=e.target.checked;this.setState(()=>({domainWhitelistingPref:t}),()=>{this.props.setDomainWhitelistingPref(t)})}onGo(){this.props.sendInvites().then(()=>{this.props.onDialogFinish().then(()=>{this.props.updateStep({number:ad.completion})})}).catch(e=>{yd.info(Od,e),this.setState(()=>({invitesError:e}))})}setInvitesInputRef(e){this.invitesInput=e}validateInvites(e){this.props.validateInvites({invites:e}).then(()=>{this.setState(()=>({invitesError:null}))}).catch(e=>{this.setState(()=>({invitesError:e}))})}toggleSharedInviteLinkView(){const e=this.state.toggleSharedInviteLink;this.setState(()=>({toggleSharedInviteLink:!e}))}renderInvitesInput(){var e=this.state;const t=e.invites,a=e.invitesError;var n=this.props;const r=n.workspaceName,i=n.channelName,l=n.featureTractorBackupChannelnameCopy,c=a?a.message:null,u=a?a.name:null,p=d()("invites_input",{"c-input_textarea--with_error":c,"p-onboarding__step__invites_input--success":!c,[u]:c});let h;h=l?i&&void 0!==i&&""!==i?gd.rt("We\u2019ll send invitations to join <strong>{workspaceName}</strong> on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:i,workspaceName:r}):gd.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{workspaceName:r}):gd.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:i,workspaceName:r});const m={name:"invites_field",id:"invites_field",className:p,onChange:this.onInvitesChange,value:t,"data-qa":"tractor-invites-input",hintText:a?null:h,ref:this.setInvitesInputRef},b={className:"margin_bottom_150",text:gd.t("Email addresses"),htmlFor:"invites_field",id:"invites_label"},f=c?{errorText:c,errorLevel:"error",errorType:"nested_box"}:null;return o.a.createElement(Dn.a,b,o.a.createElement(fd.a,s()({},m,f)))}renderDomainWhitelistingCheckbox(){const e=this.props.signupDomain,t=this.state.domainWhitelistingPref,a=this.props.domainWhitelistingPref;return o.a.createElement(Dn.a,{className:"margin_bottom_150 normal tractor_checkbox_label",text:gd.rt("Let other people sign up with their verified <strong>@{signupDomain}</strong> email address.",{signupDomain:e}),id:"domain_whitelisting_checkbox_label",htmlFor:"domain_whitelisting_field",type:"inline",cursor:"pointer"},o.a.createElement(Bn.a,{id:"domain_whitelisting_field","data-qa":"tractor-domain-whitelisting-checkbox",checked:null===t?a:t,onChange:this.onDomainWhitelistingCheckboxChange}))}renderSharedInviteLink(){if(!this.props.featureTractorSharedInviteLink)return null;const e=this.props.sharedInviteLink,t=this.state.toggleSharedInviteLink,a=gd.t("invite link"),n=gd.rt("<b>Or, you could get an <u>{link}</u> to share with other people.</b>",{link:o.a.createElement(Ua.a,{"data-qa":"tractor_shared_invite_link_toggle",onClick:this.toggleSharedInviteLinkView},a)}),s={text:n,htmlFor:"shared_invite_link",id:"shared_invite_link_label","data-qa":"tractor_shared_invite_link_label"},r={name:"shared_invite_link",id:"shared_invite_link","data-qa":"tractor-invites-shared-invite-input",hintText:gd.t("Anyone can use this link to join your workspace. It will expire in 4 weeks and can be used for up to 2000 members."),value:e,onFocus:this.select};return o.a.createElement("div",{className:"margin_bottom_100"},!t&&o.a.createElement("span",null,n),t&&o.a.createElement(Dn.a,s,o.a.createElement(Un.a,r)))}render(){return o.a.createElement(i.Fragment,null,o.a.createElement(cd,{src:this.props.imgUrl}),o.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-invites-step"},this.renderInvitesInput(),this.renderSharedInviteLink(),this.props.canWhitelistDomain&&this.renderDomainWhitelistingCheckbox()))}}invites_step_InvitesStep.displayName="InvitesStep",invites_step_InvitesStep.defaultProps=_d;const Cd={validateInvites:Wc.O,sendInvites:Wc.z,setDomainWhitelistingPref:Wc.A,fetchAndSetSharedInviteLink:Wc.d,updateStep:Wc.L,setStepCallback:Wc.D};var vd=Object(u.b)(e=>({invites:Object(Wc.o)(e),workspaceName:Object(Wc.y)(e),domainWhitelistingPref:Object(Wc.l)(e),channelName:Object(Wc.j)(e),signupDomain:Object(Wc.t)(e),canWhitelistDomain:Object(Wc.i)(e),featureTractorSharedInviteLink:Object(m.m)(e,"feature_tractor_shared_invite_link"),featureTractorBackupChannelnameCopy:Object(m.m)(e,"feature_tractor_backup_channelname_copy"),sharedInviteLink:Object(Wc.s)(e)}),Cd)(invites_step_InvitesStep);l.default.string.isRequired,l.default.string,l.default.string,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool;const Ed={workspaceName:"",workspaceDomain:"",hasInvited:!1,onDialogFinish:r.a,updateWorkspaceName:r.a,updateWorkspaceDomain:r.a,updateStep:r.a,setStepCallback:r.a,fetchAndSetSharedInviteLink:r.a,featureTractorSharedInviteLink:!1},kd=new x.b("team_creation"),Sd=Object(Ot.b)(),jd="TEAM_CREATOR_ONBOARDING";class workspace_step_WorkspaceStep extends i.Component{constructor(e){super(e);var t=this.props;const a=t.workspaceName,n=t.workspaceDomain;Object(la.a)(this,["onWorkspaceNameChange","onWorkspaceNameBlur","onWorkspaceDomainChange","onGo","setWorkspaceNameInputRef","validateAndSaveStep"]),this.nameInput=null,this.updateWorkspaceNameDebounced=Object(oa.a)(this.updateWorkspaceNameApi,500),this.updateWorkspaceDomainDebounced=Object(oa.a)(this.updateWorkspaceDomainApi,500),this.state={workspaceName:a,workspaceNameError:null,workspaceDomain:n,workspaceDomainError:null}}componentDidMount(){this.nameInput.focus(),this.props.setStepCallback(this.onGo),this.props.updateStep({validated:!0})}onWorkspaceNameChange(e){this.setState(()=>({workspaceName:e}),()=>{this.updateWorkspaceNameDebounced(e)})}onWorkspaceNameBlur(){const e=this.props.workspaceName;this.state.workspaceName||this.onWorkspaceNameChange(e)}onWorkspaceDomainChange(e){this.setState(()=>({workspaceDomain:e}),()=>{this.updateWorkspaceDomainDebounced(e)})}onGo(){this.validateAndSaveStep().then(e=>{e.isValid&&(this.props.hasInvited?this.props.onDialogFinish().then(()=>{this.props.updateStep({number:ad.completion})}):this.props.updateStep({number:ad.invites}))}).catch(e=>{Sd.info(jd,e)})}setWorkspaceNameInputRef(e){this.nameInput=e}updateWorkspaceNameApi(e){this.props.updateWorkspaceName({workspaceName:e}).then(()=>{this.setState(()=>({workspaceNameError:null}))}).catch(e=>{this.setState(()=>({workspaceNameError:e}))}).finally(()=>{this.validateAndSaveStep()})}updateWorkspaceDomainApi(e){const t=this.props.featureTractorSharedInviteLink;this.props.updateWorkspaceDomain({workspaceDomain:e}).then(()=>{this.setState(()=>({workspaceDomainError:null})),t&&this.props.fetchAndSetSharedInviteLink()}).catch(e=>{this.setState(()=>({workspaceDomainError:e}))}).finally(()=>{this.validateAndSaveStep()})}validateAndSaveStep(){var e=this.state;const t=e.workspaceDomain,a=e.workspaceNameError,n=e.workspaceDomainError;return this.props.updateStep({validated:!(!t||a||n),forceValidation:!0})}renderWorkspaceName(){var e=this.state;const t=e.workspaceName,a=e.workspaceNameError,n=a?a.message:null,r=a?a.name:null,i=d()("workspaceName_input",{"c-input_text--with_error":n,"p-onboarding__step__workspace_name_input--success":!n,[r]:n}),l={className:"margin_bottom_150",text:kd.t("Slack workspace name"),htmlFor:"workspace_name_field",id:"workspace_name_label"},c={name:"workspace_name_field",id:"workspace_name_field",className:i,onChange:this.onWorkspaceNameChange,onBlur:this.onWorkspaceNameBlur,value:t,"data-qa":"tractor-workspace-name-input",hintText:kd.t("Most teams use the name of their company or organization."),ref:this.setWorkspaceNameInputRef,isRequired:!0},u=n?{errorText:n,errorLevel:"error",errorType:"nested_box"}:null;return o.a.createElement(Dn.a,l,o.a.createElement(Un.a,s()({},c,u)))}renderWorkspaceDomain(){var e=this.state;const t=e.workspaceDomain,a=e.workspaceDomainError,n=a?a.message:null,r=a?a.name:null,i=d()("workspaceDomain_input",{"c-input_text--with_error":n,"p-onboarding__step__workspace_domain_input--success":!n,[r]:n}),l={text:kd.t("Slack URL"),className:"margin_bottom_150",htmlFor:"workspace_domain_field",id:"workspace_domain_label"},c={name:"workspace_domain_field",id:"workspace_domain_field",className:i,hintText:kd.t("You\u2019ll use this URL to sign in to Slack. Letters, numbers, and hyphens only."),"data-qa":"tractor-workspace-domain-input",onChange:this.onWorkspaceDomainChange,value:t,suffix:".slack.com",isRequired:!0},u=n?{errorText:n,errorLevel:"error",errorType:"nested_box"}:null;return o.a.createElement(Dn.a,l,o.a.createElement(Un.a,s()({},c,u)))}render(){return o.a.createElement(i.Fragment,null,o.a.createElement(cd,{src:this.props.imgUrl}),o.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-workspace-step"},this.renderWorkspaceName(),this.renderWorkspaceDomain()))}}workspace_step_WorkspaceStep.displayName="WorkspaceStep",workspace_step_WorkspaceStep.defaultProps=Ed;const Id={updateWorkspaceName:Wc.N,updateWorkspaceDomain:Wc.M,fetchAndSetSharedInviteLink:Wc.d,updateStep:Wc.L,setStepCallback:Wc.D};var wd=Object(u.b)(e=>({workspaceName:Object(Wc.y)(e),workspaceDomain:Object(Wc.x)(e),hasInvited:Object(ba.k)(e,"has_invited"),featureTractorSharedInviteLink:Object(m.m)(e,"feature_tractor_shared_invite_link")}),Id)(workspace_step_WorkspaceStep);l.default.string.isRequired,l.default.array,l.default.string.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.object;const Td={invites:[],featureGgFromTheStart:!1,ggEnabled:!1,isTeamOnStandardPlan:!1,isTeamOnFreePlan:!1,isTeamOnPlusPlan:!1,updateStep:r.a,setPrimaryView:r.a,closeModal:r.a,clogger:{}},Nd=new x.b("team_creation");class completion_step_CompletionStep extends i.Component{constructor(e){super(e),this.navigateToBenefitsPage=this.navigateToBenefitsPage.bind(this)}componentDidMount(){this.props.updateStep({validated:!0})}navigateToBenefitsPage(e){e.preventDefault();var t=this.props;const a=t.clogger,n=t.isTeamOnStandardPlan;a.track(Ki,{contexts:{ui_context:{step:de.UiStep.TRACTOR_DIALOG_COMPLETED_STEP,step_variant:n?"standard_trial":"plus_trial",action:de.UiAction.CLICK,ui_properties:{element_type:de.ElementType.LINK,element_name:"learn_more_about_features"}}}}),this.props.setPrimaryView({id:"Ppaid-benefits"}),this.props.closeModal()}render(){var e=this.props;const t=e.imgUrl,a=e.invites,n=e.channelName,s=e.featureGgFromTheStart,r=e.ggEnabled,l=e.isTeamOnFreePlan,c=e.isTeamOnPlusPlan,d=e.isTeamOnStandardPlan;let u="";s&&r&&(l?u=eo(Qi.Free):d?u=eo(Qi.Standard):c&&(u=eo(Qi.Plus)));const p=r&&!l&&u,h=n&&void 0!==n&&""!==n?a.length:0;let m,b;switch(h){case 0:m=s&&p?Nd.t("Your workspace is all set"):Nd.t("Your Slack workspace is all set"),b=s&&p?Nd.rt("We\u2019ve added a few basic channels for your team\xa0\u2014 go ahead and poke around, or <a>learn about {selectedSlackPlan}</a>. When you\u2019re ready, add your payment details to avoid any disruption when your trial ends. ",{selectedSlackPlan:u},({text:e})=>o.a.createElement(Ze.a,{onClick:this.navigateToBenefitsPage},e)):Nd.rt("We\u2019ve added a few basic channels for your team \u2014 go ahead and poke around! Or <strong>try sending yourself a direct message</strong> to test things out.");break;case 1:m=Nd.t("Your invitation has been sent!"),b=s&&p?Nd.rt("Your teammate will be here as soon as they accept the invitation. Until then, try posting a welcome message in #{channelName}, or <a>learn about {selectedSlackPlan}</a>. When you\u2019re ready, add your payment details to avoid any disruption when your trial ends.",{selectedSlackPlan:u,channelName:n},({text:e})=>o.a.createElement(Ze.a,{onClick:this.navigateToBenefitsPage},e)):Nd.rt("Your teammate will be here as soon as they accept the invitation. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:n});break;default:m=Nd.t("Your {numInvites} invitations have been sent!",{numInvites:h}),b=s&&p?Nd.rt("Your teammates will be here as soon as they accept the invitation. Until then, try posting a welcome message in #{channelName}, or <a>learn about {selectedSlackPlan}</a>. When you\u2019re ready, add your payment details to avoid any disruption when your trial ends.",{selectedSlackPlan:u,channelName:n},({text:e})=>o.a.createElement(Ze.a,{onClick:this.navigateToBenefitsPage},e)):Nd.rt("Your teammates will be here as soon as they accept their invitations. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:n})}return o.a.createElement(i.Fragment,null,o.a.createElement(cd,{src:t}),o.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-completion-step"},o.a.createElement("h2",null,m),b))}}completion_step_CompletionStep.displayName="CompletionStep",completion_step_CompletionStep.defaultProps=Td;const Ad={updateStep:Wc.L,setPrimaryView:qn.a,closeModal:ga.a};var Rd=Object(u.b)(e=>{const t=Object(Se.d)(e);return{invites:Object(Wc.o)(e),channelName:Object(Wc.j)(e),featureGgFromTheStart:Object(m.m)(e,"feature_gg_from_the_start"),ggEnabled:Object(gn.a)(e,"gg_enabled"),isTeamOnStandardPlan:Object(xe.z)(t),isTeamOnFreePlan:Object(xe.w)(t),isTeamOnPlusPlan:Object(xe.x)(t),clogger:Object(ie.a)({state:e})}},Ad)(completion_step_CompletionStep);a("Drpm");l.default.array,l.default.string,l.default.func,l.default.func,l.default.number,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.object,l.default.string,l.default.string,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.oneOf(["light","dark"]);const Md={invites:[],modalTitle:"",onClose:r.a,stepCallback:r.a,stepNumber:0,isCurrentStepValid:!1,isPromiseRunning:!1,hasInvited:!1,needsPasswordSet:!0,featureGgFromTheStart:!1,ggEnabled:!1,isTeamOnStandardPlan:!1,isTeamOnFreePlan:!1,isTeamOnPlusPlan:!1,team:null,standardPlanProductId:"",plusPlanProductId:"",fetchAndSetChannelInfo:r.a,fetchAndSetWorkspace:r.a,fetchAndSetSignupDetails:r.a,setInitialMarketingPref:r.a,setStepNumber:r.a,updatePassword:r.a,submitDomainWhitelistingPref:r.a,completeWorkflowTask:r.a,closeModal:r.a,fetchPlansData:r.a,clientTheme:"light"},Pd=new x.b("team_creation"),xd=Object(Ot.b)(),Ld="TEAM_CREATOR_ONBOARDING";class team_creator_onboarding_dialog_TeamCreatorOnboardingDialog extends o.a.Component{constructor(e){super(e),Object(la.a)(this,["getGoButtonText","getFooterText","onBack","onGo","onPasswordSet","onDialogFinish","onClose"]),this.state={password:null}}componentDidMount(){this.props.fetchAndSetChannelInfo(),this.props.fetchAndSetWorkspace(),this.props.fetchAndSetSignupDetails(),this.props.setInitialMarketingPref(),this.preloadRemainingImages(),xd.info(Ld,"Onboarding dialog mounted."),this.props.needsPasswordSet&&this.props.setStepNumber(0),!this.hasGGTrialBehavior()||this.props.standardPlanProductId&&this.props.plusPlanProductId||this.props.fetchPlansData()}componentDidUpdate(e){e.stepNumber!==this.props.stepNumber&&3===this.props.stepNumber&&this.props.clogger.track(Ki,{contexts:{ui_context:{step:de.UiStep.TRACTOR_DIALOG_COMPLETED_STEP,step_variant:this.getGGClogStepVariant(),action:de.UiAction.IMPRESSION}}})}onBack(){var e=this.props;const t=e.stepNumber,a=e.clogger;if(this.hasGGTrialBehavior()&&t===ad.completion)return a.track(Ki,{contexts:{ui_context:{step:de.UiStep.TRACTOR_DIALOG_COMPLETED_STEP,step_variant:this.getGGClogStepVariant(),action:de.UiAction.CLICK,ui_properties:{element_type:de.ElementType.BUTTON,element_name:"add_payment_details"}}}}),void this.openCheckoutUrl();let n;n=t>0?t-1:ed-1,a.track(de.EventId.GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:nd[t],action:"BACK"}}}),a.track(Ki,{contexts:{ui_context:{step:nd[t],action:"BACK"}}}),this.props.setStepNumber(n)}onGo(){var e=this.props;const t=e.stepCallback,a=e.isCurrentStepValid,n=e.clogger,s=e.stepNumber;a&&t(),n.track(de.EventId.GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:nd[s],action:"CLICK"}}}),n.track(Ki,{contexts:{ui_context:{step:nd[s],step_variant:this.getGGClogStepVariant(),action:"CLICK",is_primary_cta:!0,ui_properties:{element_type:de.ElementType.BUTTON,element_name:"explore_slack"}}}})}onClose(){var e=this.props;const t=e.clogger,a=e.stepNumber;t.track(de.EventId.GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:nd[a],action:"CLOSE"}}}),t.track(Ki,{contexts:{ui_context:{step:nd[a],action:"CLOSE"}}}),Object(re.a)()?this.props.closeModal():this.props.onClose()}onPasswordSet(e){this.setState(()=>({password:e}))}onDialogFinish(){const e=this.state.password;let t;t=this.props.needsPasswordSet?this.props.updatePassword({password:e}):Promise.resolve();const a=this.props.submitDomainWhitelistingPref();return Promise.all([t,a]).then(()=>this.props.completeWorkflowTask({taskSubtype:"complete_team_creator_account_setup"})).catch(e=>{xd.info(Ld,e)})}getGoButtonText(){var e=this.props;const t=e.stepNumber,a=e.invites,n=e.hasInvited,s=a?a.length:0;switch(t){case 1:return n?Pd.t("Finish"):Pd.t("Next");case 2:return s>=1?Pd.t("Add {numEmails, plural, =1 {# Person} other {# People}}",{numEmails:s,fallbackHash:"afa51f5e80065586875a7cd693abcad1a66bdb3b"}):Pd.t("Finish");case 3:return 0===s?Pd.t("Explore Slack"):Pd.t("Start the Conversation");default:return Pd.t("Next")}}getFooterText(){var e=this.props;const t=e.stepNumber,a=e.hasInvited;if(t>=ed)return null;const n=t+1,s=a?2:3;return Pd.t("Step {stepNumber} of {totalSteps}",{stepNumber:n,totalSteps:s})}getGGClogStepVariant(){return this.props.isTeamOnStandardPlan?"standard_trial":"plus_trial"}hasGGTrialBehavior(){var e=this.props;const t=e.featureGgFromTheStart,a=e.ggEnabled,n=e.isTeamOnFreePlan;return t&&a&&!n}openCheckoutUrl(){var e=this.props;const t=e.isTeamOnStandardPlan,a=e.isTeamOnPlusPlan,n=e.isTeamOnFreePlan,s=e.standardPlanProductId,r=e.plusPlanProductId,i=e.team;let o;t?o=s:a?o=r:n&&(o=s),Object(xe.P)(i,`${gr.a}?s=1&p=${o}&entry_point=pricing_plans_modal`)}preloadRemainingImages(){Object(ht.a)(td[this.props.clientTheme],(e,t)=>{if("profile"===t)return null;const a=new Image,n=new Image;return a.src=e,n.src=e.replace(".png","@2x.png"),null})}shouldShowBackButton(e){return!(e===ad.profile||e===ad.completion&&!this.hasGGTrialBehavior())}render(){var e=this.props;const t=e.modalTitle,a=e.stepNumber,n=e.isCurrentStepValid,s=e.isPromiseRunning,r=e.clientTheme,l=e.featureGgFromTheStart&&this.hasGGTrialBehavior()&&a===ad.completion?Pd.t("Add Payment Details"):Pd.t("Back"),c=d()("p-team_creator_onboarding_dialog",{"p-team_creator_onboarding_dialog--complete":3===a});return o.a.createElement(i.Fragment,null,o.a.createElement(ya.a,{showGoButton:!0,showCloseButton:!0,showHeader:!0,shouldCloseOnCancel:!1,shouldCloseOnGo:a===ad.completion,truncateTitle:!1,onClose:this.onClose,showCancelButton:this.shouldShowBackButton(a),goButtonIsDisabled:!n,goButtonIsPending:s,goButtonText:this.getGoButtonText(),title:t,footerText:this.getFooterText(),onGo:this.onGo,onCancel:this.onBack,cancelText:l,id:"team-creator-onboarding-dialog","data-qa":"team-creator-onboarding-dialog",className:c,bodyClassName:"p-team_creator_onboarding_dialog__body"},o.a.createElement(Qc,{step:0,currentStep:a,title:Pd.t("Set your name and password")},o.a.createElement(bd,{imgUrl:td[r].profile,onPasswordSet:this.onPasswordSet})),o.a.createElement(Qc,{step:1,currentStep:a,title:Pd.t("Review your team\u2019s details")},o.a.createElement(wd,{imgUrl:td[r].workspace,onDialogFinish:this.onDialogFinish})),o.a.createElement(Qc,{step:2,currentStep:a,title:Pd.t("Add people to your Slack workspace")},o.a.createElement("div",null),o.a.createElement(vd,{imgUrl:td[r].invites,onDialogFinish:this.onDialogFinish})),o.a.createElement(Qc,{step:3,currentStep:a},o.a.createElement("div",null),o.a.createElement(Rd,{imgUrl:td[r].completion}))))}}team_creator_onboarding_dialog_TeamCreatorOnboardingDialog.displayName="TeamCreatorOnboardingDialog",team_creator_onboarding_dialog_TeamCreatorOnboardingDialog.defaultProps=Md;const Fd={fetchAndSetChannelInfo:Wc.c,fetchAndSetWorkspace:Wc.f,fetchAndSetSignupDetails:Wc.e,setInitialMarketingPref:Wc.B,setStepNumber:Wc.E,updatePassword:Wc.J,submitDomainWhitelistingPref:Wc.H,completeWorkflowTask:Wc.a,closeModal:ga.a,fetchPlansData:$c.e};var Dd=Object(u.b)(e=>{const t=Object(zc.p)(e);const a=at()(t,1)[0],n=Object(Se.d)(e);return{hasInvited:Object(ba.k)(e,"has_invited"),needsPasswordSet:Object(ba.k)(e,"needs_initial_password_set"),stepNumber:Object(Wc.v)(e),modalTitle:Object(Wc.q)(e),stepCallback:Object(Wc.u)(e),isCurrentStepValid:Object(Wc.k)(e),isPromiseRunning:Object(Wc.p)(e),invites:Object(Wc.o)(e),clogger:Object(ie.a)({state:e}),clientTheme:Object(M.c)(e),featureGgFromTheStart:Object(m.m)(e,"feature_gg_from_the_start"),ggEnabled:Object(gn.a)(e,"gg_enabled"),isTeamOnStandardPlan:Object(xe.z)(n),isTeamOnFreePlan:Object(xe.w)(n),isTeamOnPlusPlan:Object(xe.x)(n),team:n,standardPlanProductId:Object(zc.d)(e,a,gr.h.monthly,gr.g.standard.id,gr.f.CREDIT_CARD)||"",plusPlanProductId:Object(zc.d)(e,a,gr.h.monthly,gr.g.plus.id,gr.f.CREDIT_CARD)||""}},Fd)(team_creator_onboarding_dialog_TeamCreatorOnboardingDialog),Bd=a("yg0S");const Ud=(e,t,a)=>{const n=Object(p.getStoreInstanceByTeamId)(e);Object(Vc.a)(o.a.createElement(u.a,{store:n},o.a.createElement(Bd.a,null,o.a.createElement(Dd,s()({onClose:()=>{Object(ms.a)(()=>{Kc.a.unmountComponentAtNode(t)})}},a)))),t)},qd=new x.b("team_creation"),Hd={countPref:"team_creation_account_setup_banner_cta_count",tsPref:"team_creation_account_setup_banner_cta_last_ts"},Wd="team_creation_dialog_mount_point",Gd=(l.default.object.isRequired,l.default.object.isRequired,l.default.string.isRequired,l.default.bool,l.default.object,l.default.string,l.default.func,l.default.number.isRequired,l.default.func,l.default.string,l.default.func,l.default.func,l.default.oneOf(["light","dark"]),l.default.func,{hasInvited:!1,workflow:null,activeWorkflowTask:"",completeWorkflowTask:r.a,openTeamCreatorOnboardingDialog:r.a,currentChannelId:"",showSecondBanner:r.a,openInviteDialog:r.a,clientTheme:"light",fetchWorkflow:r.a});class team_creation_account_setup_banner_TeamCreationAccountSetupBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["openInviteDialog","openTeamCreatorDialog"])}componentDidMount(){var e=this.props;const t=e.activeWorkflowTask,a=e.workflow,n=e.fetchWorkflow;this.loadFirstImageForDialog(),"start_team_creator_account_setup"===t&&this.props.completeWorkflowTask({taskSubtype:"start_team_creator_account_setup"}),this.clogBannerChanges({action:"impression"}),a||n()}componentDidUpdate(e){var t=this.props;const a=t.activeWorkflowTask,n=t.currentChannelId,s=t.showSecondBanner;a!==e.activeWorkflowTask&&this.clogBannerChanges({action:"impression"}),n!==e.currentChannelId&&s()}openInviteDialog(){const e=this.props.openInviteDialog;return this.clogBannerChanges({action:"click",ui_element:de.UiElement.BANNER_TRACTOR_PRIMARY_CTA}),e({source:"team_creation_account_setup_banner"})}openTeamCreatorDialog(){var e=this.props;const t=e.teamId,a=e.openTeamCreatorOnboardingDialog;return this.clogBannerChanges({action:"click",ui_element:de.UiElement.BANNER_TRACTOR_PRIMARY_CTA}),Object(re.a)()?a():Ud(t,document.getElementById(Wd))}clogBannerChanges(e={}){var t=this.props;const a=t.activeWorkflowTask;let n=a;"start_team_creator_account_setup"!==a&&"complete_team_creator_account_setup"!==a&&(n="invite_team_creator_account_setup"),t.clogger.track(de.EventId.GROWTH_BANNER_TRACTOR,{contexts:{ui_context:s()({},e,{step:sd[n]})}})}loadFirstImageForDialog(){const e=new Image,t=new Image,a=td[this.props.clientTheme].profile;e.src=a,t.src=a.replace(".png","@2x.png")}render(){var e=this.props;const t=e.hasInvited,a=e.workflow,n=e.activeWorkflowTask;if(null===a||"completed"===a.state&&(t||this.props.nonBotMembersCount>1))return null;const r={bodyClass:"p-message_pane_banner__body--wider-text",showCancelButton:!1,bannerPrefs:Hd,shouldCloseOnGo:!1};if("start_team_creator_account_setup"===n){const e=t?qd.t("You can send messages here right away \u2014 but to get the most out of Slack, the next steps are to save your account and then get the conversation started."):qd.t("You can send messages here right away \u2013 but to get the most out of Slack, the next step is to save your account and invite a few people to join the conversation.");return o.a.createElement(el,s()({},r,{bannerAriaLabel:qd.t("Account setup banner"),headerText:qd.t("Here it is! The first channel in your team\u2019s Slack workspace"),focusOnHeader:!0,bodyText:e,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/first_setup@2x.png",goButtonText:qd.t("Finish Signing Up")}))}if("complete_team_creator_account_setup"===n){const e=t?qd.t("To see what teamwork is like in Slack, take a moment to save your account."):qd.t("To see what teamwork is like in Slack, take a moment to save your account and invite some teammates to join your workspace.");return o.a.createElement(el,s()({},r,{bannerAriaLabel:qd.t("Account setup banner"),headerText:qd.t("Save your account and start collaborating"),focusOnHeader:!0,bodyText:e,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/second_setup@2x.png",goButtonText:qd.t("Finish Signing Up")}))}return t?null:o.a.createElement(el,s()({},r,{bannerAriaLabel:qd.t("Invite teammates banner"),headerText:qd.t("Bring your team into Slack"),bodyText:qd.t("Slack is better with teammates \u2013 invite them to start collaborating."),onGo:this.openInviteDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/invite_others@2x.png",goButtonText:qd.t("Add People")}))}}team_creation_account_setup_banner_TeamCreationAccountSetupBanner.displayName="TeamCreationAccountSetupBanner",team_creation_account_setup_banner_TeamCreationAccountSetupBanner.defaultProps=Gd;var Kd=Object(u.b)(e=>{const t=Object(_.a)(e),a=t&&Object(B.e)(e,t,!1),n=Object(q.Z)(a)?t:"";return{clogger:Object(ie.a)({state:e}),logger:Object(Ot.a)({state:e}),teamId:Object(h.b)(e),hasInvited:Object(ba.k)(e,"has_invited"),workflow:Object(Wc.w)(e),activeWorkflowTask:Object(Wc.h)(e),nonBotMembersCount:Object(Hc.a)(Object(_n.a)(Object(bi.a)(e),e=>!e.is_bot&&!e.is_slackbot&&!Object(Je.tb)(e))),currentChannelId:n,clientTheme:Object(M.c)(e)}},e=>({completeWorkflowTask:(...t)=>e(Object(Wc.a)(...t)),fetchWorkflow:()=>e(Object(Wc.g)({onlyActive:!1})),showSecondBanner:(...t)=>e(Object(Wc.G)(...t)),openTeamCreatorOnboardingDialog:()=>{e(Object(ga.e)({element:o.a.createElement(Dd),name:"team-creator-onboarding-dialog"}))},openInviteDialog:(...t)=>e(Object(j.a)(...t))}))(team_creation_account_setup_banner_TeamCreationAccountSetupBanner);const Vd=new x.b("paid_benefits_banners"),zd=(l.default.object.isRequired,l.default.object.isRequired,{countPref:"paid_benefits_banner_cta_count",tsPref:"paid_benefits_banner_cta_last_ts"});class paid_benefits_awareness_banner_PaidBenefitsAwarenessBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onGo","onCancel","onCloseIcon"])}componentDidMount(){this.props.clogger.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:de.UiStep.BANNER_PAID_BENEFITS_AWARENESS,action:de.UiAction.IMPRESSION}}})}onGo(){this.clogClick("learn_more"),Object(xe.P)(this.props.team,"benefits/standard?entry_point=paid_benefits_awareness_banner")}onCancel(){this.clogClick("not_now")}onCloseIcon(){this.clogClick("close")}getContent(){return{headerText:Vd.t("See all that Slack has to offer"),bodyText:Vd.t("Discover what more your Slack team can do with a paid plan \u2014 including searching unlimited messages, installing unlimited apps, making group calls, and more."),cancelButtonText:Vd.t("Not Now")}}clogClick(e){this.props.clogger.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:de.UiStep.BANNER_PAID_BENEFITS_AWARENESS,action:de.UiAction.CLICK,ui_properties:{element_type:de.ElementType.BUTTON,element_name:e}}}})}render(){const e=this.getContent();return e?o.a.createElement(el,{bodyClass:"p-message_pane_banner__body--wider-text",headerText:e.headerText,bodyText:e.bodyText,cancelButtonText:e.cancelButtonText,showCloseIcon:!0,isLearnMoreButton:!0,shouldCloseOnGo:!1,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:zd}):null}}paid_benefits_awareness_banner_PaidBenefitsAwarenessBanner.displayName="PaidBenefitsAwarenessBanner",paid_benefits_awareness_banner_PaidBenefitsAwarenessBanner.defaultProps={};var $d=Object(u.b)(e=>({clogger:Object(ie.a)({state:e}),team:Object(Se.d)(e)}))(paid_benefits_awareness_banner_PaidBenefitsAwarenessBanner),Yd=a("MXQz");const Qd=new x.b("trial_expiration_banners"),Xd={countPref:"shared_channel_trial_banner_cta_count",tsPref:"shared_channel_trial_banner_cta_last_ts"};l.default.bool.isRequired,l.default.number.isRequired,l.default.string.isRequired,l.default.func.isRequired,l.default.number.isRequired,l.default.object.isRequired,l.default.object.isRequired,l.default.object.isRequired;class shared_channel_trial_banner_SharedChannelTrialBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["renderBodyText","renderPersistentBodyText","onCloseBanner","onUpgradeLinkClick"]),this.logImpression=Object(Yd.a)((e,t)=>{e.track(de.EventId.CHANNEL_CREATE_FLOW,{contexts:{ui_context:{step:t,action:de.UiAction.IMPRESSION}}})})}componentDidUpdate(){const e=this.props.clogger;let t;t=this.showDismissibleBanner()?this.getDismissibleBannerUiStep():de.UiStep.SHARED_CHANNEL_TRIAL_PERSISTENT_BANNER,this.logImpression(e,t)}onCloseBanner(){const e=this.props.bannerData;this.props.updateBanner({name:"shared_channel_trial_banner",data:e})}onUpgradeLinkClick(){var e=this.props;const t=e.productId,a=e.team,n=`${gr.a}?s=1&p=${t}&entry_point=shared_channel_trial_banner`;Object(xe.P)(a,n),this.clogLink()}getNumDaysLeft(){const e=this.props.expirationTs,t=Gi.a.unix(e),a=Gi()();return t.diff(a,"days")}getDismissibleBannerUiStep(){return this.getNumDaysLeft()<=3?de.UiStep.SHARED_CHANNEL_TRIAL_THREE_DAYS_LEFT_BANNER:de.UiStep.SHARED_CHANNEL_TRIAL_WELCOME_BANNER}showDismissibleBanner(){var e=this.props;const t=e.lastDismissTs,a=e.expirationTs;if(0===t)return!0;const n=Gi.a.unix(a).subtract(3,"d"),s=Gi.a.unix(t),r=Gi()();return!(!s.isBefore(n)||!r.isAfter(n))}clogLink(){const e=this.props.clogger,t={step:de.UiStep.SHARED_CHANNEL_TRIAL_PERSISTENT_BANNER,action:de.UiAction.CLICK,is_primary_cta:!0,ui_properties:{element_type:de.ElementType.LINK,element_name:"upgrade"}};e.track(de.EventId.CHANNEL_CREATE_FLOW,{contexts:{ui_context:t}})}renderHeaderText(){return this.props.featureSharedChannelsFreeTrial?this.getNumDaysLeft()<=3?Qd.t("Your shared channel is ending soon"):Qd.t("Welcome to your shared channel"):null}renderBodyText(e){var t=this.props;const a=t.expirationTs;if(!t.featureSharedChannelsFreeTrial)return null;const n=Object(x.k)(e,{noEscape:!0,react:!0});if(this.getNumDaysLeft()<=3){const e=Gi.a.unix(a).subtract(1,"d").format("MMM DD, YYYY");return Qd.rt("Once your trial ends, you won\u2019t be able to use this channel with <strong>{sharedTeamNameString}</strong>. Upgrade by {upgradeByDate} to stay connected. <a><strong>Learn More</strong></a>",{sharedTeamNameString:n,upgradeByDate:e,fallbackHash:"a6081dce017fd9204682548170dbb922ed911eaf"},({text:e,key:t,tag:a})=>{if("a"===a){const a="https://slack.com/help/articles/115004151203";return o.a.createElement(Ze.a,{target:"_blank",href:a,key:t},e)}return""})}return Qd.rt("After your 14-day trial ends, this channel will <strong>no longer be shared</strong> with <strong>{sharedTeamNameString}</strong>. Upgrade to keep this channel and all the features in the Standard plan. <a><strong>Learn More</strong></a>",{sharedTeamNameString:n,fallbackHash:"3e3e4795a66286a28a5d1361c35783235c2bc3fb"},({text:e,key:t,tag:a})=>{if("a"===a){const a="https://slack.com/help/articles/115004151203";return o.a.createElement(Ze.a,{target:"_blank",href:a,key:t},e)}return""})}renderPersistentBodyText(){return this.props.featureSharedChannelsFreeTrial?Qd.rt("<strong>Trial ends in {numDaysLeft, plural, =1 {1 day} other {# days}} - </strong> Upgrade to keep this shared channel. <a><strong>Upgrade</strong></a>",{numDaysLeft:this.getNumDaysLeft()},({text:e,key:t,tag:a})=>"a"===a?o.a.createElement(Ze.a,{key:t,onClick:this.onUpgradeLinkClick,"data-qa":"shared_channel_persistent_banner_upgrade_link"},e):""):null}render(){var e=this.props;const t=e.productId;if(!e.featureSharedChannelsFreeTrial)return null;let a={bannerPrefs:Xd,clogEvent:de.EventId.CHANNEL_CREATE_FLOW};if(this.showDismissibleBanner()){const e=Qd.t("Upgrade Now");a=s()({},a,{clogStep:this.getDismissibleBannerUiStep(),onGoUrl:`${gr.a}?s=1&p=${t}&entry_point=shared_channel_trial_banner`,goButtonText:e,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText,onCloseBanner:this.onCloseBanner,showCloseIcon:!0})}else a=s()({},a,{clogStep:de.UiStep.SHARED_CHANNEL_TRIAL_PERSISTENT_BANNER,renderBodyText:this.renderPersistentBodyText,bannerContainerClass:"p-message_pane_banner--persistent",bodyClass:"p-message_pane_banner__body--persistent",bodyIcon:"clock-o",showCloseIcon:!1,showGoButton:!1});return o.a.createElement(Fl,a)}}shared_channel_trial_banner_SharedChannelTrialBanner.displayName="SharedChannelTrialBanner";var Jd=Object(u.b)(e=>({featureSharedChannelsFreeTrial:Object(m.m)(e,"feature_shared_channels_free_trial"),lastDismissTs:Object(T.e)(e),bannerData:Object(T.c)(e),team:Object(Se.d)(e),clogger:Object(ie.a)({state:e})}),e=>({updateBanner:(...t)=>{e(Object(T.g)(...t))}}))(shared_channel_trial_banner_SharedChannelTrialBanner);l.default.string,l.default.object,l.default.func.isRequired;const Zd=({bannerData:e})=>o.a.createElement(il,{totalUsers:e.total_users,totalChannels:e.total_channels,messagesCount:e.messages_count,teamName:e.team_name});Zd.displayName="renderActivationMsgLimitBanner";const eu=()=>o.a.createElement(pl,null);eu.displayName="renderI18nJapanBetaSendBtnBanner";const tu=({bannerData:e})=>o.a.createElement(yl,{discountPercent:e.discount_pct,country:e.country});tu.displayName="renderLocalDiscountAwarenessBanner";const au=({bannerData:e})=>o.a.createElement(jl,{discountPercent:e.discount_pct,expirationTs:e.expiration_ts});au.displayName="renderTenuredDiscountAwarenessBanner";const nu=({bannerData:e})=>o.a.createElement(Nl,{discountPercent:e.discount_pct,expirationTs:e.expiration_ts});nu.displayName="renderOneWeekLeftTenuredDiscountBanner";const su=({bannerData:e})=>o.a.createElement(Pl,{discountPercent:e.discount_pct,expirationTs:e.expiration_ts});su.displayName="renderOneDayLeftTenuredDiscountBanner";const ru=({bannerData:e})=>o.a.createElement(Ul,{numDaysLeft:e.no_of_days_left,expirationDate:e.pay_date_next,productId:e.product_id});ru.displayName="renderTwoWeeksLeftEscTrialBanner";const iu=({bannerData:e})=>o.a.createElement(Wl,{numDaysLeft:e.no_of_days_left,expirationDate:e.pay_date_next,productId:e.product_id});iu.displayName="renderOneWeekLeftEscTrialBanner";const ou=({bannerData:e})=>o.a.createElement(Yl,{numDaysLeft:e.no_of_days_left,productId:e.product_id});ou.displayName="renderSevenDaysLeftTrialBanner";const lu=({bannerData:e})=>o.a.createElement(Jl,{expirationDate:e.pay_date_next,productId:e.product_id});lu.displayName="renderThreeDaysLeftEscTrialBanner";const cu=({bannerData:e})=>o.a.createElement(sc,{expirationDate:e.pay_date_next,numDaysLeft:e.no_of_days_left,productId:e.product_id});cu.displayName="renderThreeDaysLeftTrialBanner";const du=({bannerData:e})=>o.a.createElement(Jd,{expirationTs:e.plan_expiration_ts,productId:e.product_id});du.displayName="renderSharedChannelTrialBanner";const uu=()=>o.a.createElement(vc,null);uu.displayName="renderApproachingFileLimitBanner";const pu=({bannerData:e})=>o.a.createElement(dc,{numMsgs:e.messages_count_abbrev});pu.displayName="renderInProdTrialBanner";const hu=({bannerData:e})=>o.a.createElement(fc,{expirationDate:e.expiration_date});hu.displayName="renderInProdTrialReminderBanner";const mu=({bannerData:e})=>o.a.createElement(wc,{messagesCount:e.messages_count});mu.displayName="renderApproachingMsgLimitBanner";const bu=({bannerData:e})=>o.a.createElement(Pc,{messagesCount:e.messages_count});bu.displayName="renderJustReachedMsgLimitBanner";const fu=({bannerData:e})=>o.a.createElement(qc,{messagesCount:e.messages_count});fu.displayName="renderThirtyDaysAfterMsgLimitBanner";const _u=()=>o.a.createElement(Kd,null);_u.displayName="renderTeamCreationAccountSetupBanner";const gu=()=>o.a.createElement($d,null);gu.displayName="renderPaidBenefitsAwarenessBanner";const yu={activation_msg_limit_banner:Zd,i18n_japan_beta_send_btn_banner:eu,one_week_left_tenured_discount_banner:nu,one_day_left_tenured_discount_banner:su,tenured_discount_awareness_banner:au,local_discount_awareness_banner:tu,two_weeks_left_esc_trial_banner:ru,one_week_left_esc_trial_banner:iu,seven_days_left_trial_banner:ou,three_days_left_esc_trial_banner:lu,three_days_left_trial_banner:cu,shared_channel_trial_banner:du,in_prod_trial_banner:pu,in_prod_trial_reminder_banner:hu,approaching_file_limit_banner:uu,approaching_msg_limit_banner:mu,just_reached_msg_limit_banner:bu,thirty_days_after_msg_limit_banner:fu,team_creation_account_setup_banner:_u,paid_benefits_awareness_banner:gu};class message_pane_banner_container_MessagePaneBannerContainer extends i.PureComponent{componentDidMount(){this.props.throttledLoadBanner()}render(){var e=this.props;const t=e.bannerName,a=e.bannerData;if(!t)return null;if(Yo(t))return Qo(t,a),null;const n=yu[t];return n?n({bannerData:a}):($o({name:t,data:a}),null)}}message_pane_banner_container_MessagePaneBannerContainer.displayName="MessagePaneBannerContainer",message_pane_banner_container_MessagePaneBannerContainer.defaultProps={bannerName:"",bannerData:{}};const Ou={throttledLoadBanner:T.i};var Cu=Object(u.b)(e=>({bannerName:Object(T.d)(e),bannerData:Object(T.c)(e)}),Ou)(message_pane_banner_container_MessagePaneBannerContainer);a("ixEi");const vu=new x.b("offline_mode");function Eu({featureOfflineMode:e,caption:t}){return e?o.a.createElement("div",{className:"p-large_offline_indicator"},o.a.createElement("p",{className:"p-large_offline_indicator__headline"},o.a.createElement(bn.b,{type:"cloud-offline-small",size:"inherit"})," ",vu.t("No connection")),o.a.createElement("p",{className:"p-large_offline_indicator__caption"},t||vu.t("Go online to get the latest messages."))):null}Eu.displayName="LargeOfflineIndicator",Eu.defaultProps={caption:void 0};var ku=Object(fs.a)("feature_offline_mode")(Eu),Su=a("b89k"),ju=a("JvzI"),Iu=a("K7CU"),wu=a("/Rx2"),Tu=a("s19S"),Nu=a("tRvn"),Au=a("RMmo"),Ru={default:{tada:cdn_url+"/80588/img/unread/empty/default/1f389.png",victory:{1:cdn_url+"/80588/img/unread/empty/default/270c-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/270c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/270c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/270c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/270c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/270c-1f3ff.png"},racecar:cdn_url+"/80588/img/unread/empty/default/1f3ce-fe0f.png",rocket:cdn_url+"/80588/img/unread/empty/default/1f680.png",octopus:cdn_url+"/80588/img/unread/empty/default/1f419.png",high5:{1:cdn_url+"/80588/img/unread/empty/default/1f64c.png",2:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3ff.png"},apple:cdn_url+"/80588/img/unread/empty/default/1f34f.png",sunglasses:cdn_url+"/80588/img/unread/empty/default/1f60e.png",thumbup:{1:cdn_url+"/80588/img/unread/empty/default/1f44d.png",2:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3ff.png"},boom:cdn_url+"/80588/img/unread/empty/default/1f4a5.png",bee:cdn_url+"/80588/img/unread/empty/default/1f41d.png",clap:{1:cdn_url+"/80588/img/unread/empty/default/1f44f.png",2:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3ff.png"},crystalball:cdn_url+"/80588/img/unread/empty/default/1f52e.png",tractor:cdn_url+"/80588/img/unread/empty/default/1f69c.png",pony:cdn_url+"/80588/img/unread/empty/default/1f434.png",chick:cdn_url+"/80588/img/unread/empty/default/1f423.png",growth:cdn_url+"/80588/img/unread/empty/default/1f331.png",sun:cdn_url+"/80588/img/unread/empty/default/2600-fe0f.png",balloon:cdn_url+"/80588/img/unread/empty/default/1f388.png",sweetpotato:cdn_url+"/80588/img/unread/empty/default/1f360.png",leafs:cdn_url+"/80588/img/unread/empty/default/1f343.png",owl:cdn_url+"/80588/img/unread/empty/default/1f989.png",books:cdn_url+"/80588/img/unread/empty/default/1f4da.png",island:cdn_url+"/80588/img/unread/empty/default/1f3dd-fe0f.png",coffee:cdn_url+"/80588/img/unread/empty/default/2615.png",footprints:cdn_url+"/80588/img/unread/empty/default/1f463.png",tea:cdn_url+"/80588/img/unread/empty/default/1f375.png",croissant:cdn_url+"/80588/img/unread/empty/default/1f950.png",art:cdn_url+"/80588/img/unread/empty/default/1f3a8.png",person_ball:{1:cdn_url+"/80588/img/unread/empty/default/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/80588/img/unread/empty/default/2708-fe0f.png",sailboat:cdn_url+"/80588/img/unread/empty/default/26f5.png",ship:cdn_url+"/80588/img/unread/empty/default/1f6a2.png",bulb:cdn_url+"/80588/img/unread/empty/default/1f4a1.png",hammer:cdn_url+"/80588/img/unread/empty/default/1f528.png",checkered_flag:cdn_url+"/80588/img/unread/empty/default/1f3c1.png",wrench:cdn_url+"/80588/img/unread/empty/default/1f527.png",metro:cdn_url+"/80588/img/unread/empty/default/1f687.png",soccer:cdn_url+"/80588/img/unread/empty/default/26bd.png",trophy:cdn_url+"/80588/img/unread/empty/default/1f3c6.png",cityscape:cdn_url+"/80588/img/unread/empty/default/1f3d9-fe0f.png",dog:cdn_url+"/80588/img/unread/empty/default/1f436.png",crossed_swords:cdn_url+"/80588/img/unread/empty/default/2694-fe0f.png",blush:cdn_url+"/80588/img/unread/empty/default/1f60a.png",candy:cdn_url+"/80588/img/unread/empty/default/1f36c.png",herb:cdn_url+"/80588/img/unread/empty/default/1f33f.png",sparkles:cdn_url+"/80588/img/unread/empty/default/2728.png",check_mark:cdn_url+"/80588/img/unread/empty/default/2705.png",confetti_ball:cdn_url+"/80588/img/unread/empty/default/1f38a.png",doughnut:cdn_url+"/80588/img/unread/empty/default/1f369.png",bookmark_tabs:cdn_url+"/80588/img/unread/empty/default/1f4d1.png",sleuth:{1:cdn_url+"/80588/img/unread/empty/default/1f575-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/80588/img/unread/empty/default/23f3.png",newspaper:cdn_url+"/80588/img/unread/empty/default/1f5de-fe0f.png",flex:{1:cdn_url+"/80588/img/unread/empty/default/1f4aa.png",2:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/80588/img/unread/empty/default/1f30e.png",chocolate_bar:cdn_url+"/80588/img/unread/empty/default/1f36b.png",wave:{1:cdn_url+"/80588/img/unread/empty/default/1f44b.png",2:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3ff.png"},relieved:cdn_url+"/80588/img/unread/empty/default/1f60c.png",walking:{1:cdn_url+"/80588/img/unread/empty/default/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/80588/img/unread/empty/default/1f6cb.png",unicorn_face:cdn_url+"/80588/img/unread/empty/default/1f984.png",zap:cdn_url+"/80588/img/unread/empty/default/26a1.png",star:cdn_url+"/80588/img/unread/empty/default/2b50.png"},google:{tada:cdn_url+"/80588/img/unread/empty/google/1f389.png",victory:{1:cdn_url+"/80588/img/unread/empty/google/270c-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/270c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/270c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/270c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/270c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/270c-1f3ff.png"},racecar:cdn_url+"/80588/img/unread/empty/google/1f3ce-fe0f.png",rocket:cdn_url+"/80588/img/unread/empty/google/1f680.png",octopus:cdn_url+"/80588/img/unread/empty/google/1f419.png",high5:{1:cdn_url+"/80588/img/unread/empty/google/1f64c.png",2:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3ff.png"},apple:cdn_url+"/80588/img/unread/empty/google/1f34f.png",sunglasses:cdn_url+"/80588/img/unread/empty/google/1f60e.png",thumbup:{1:cdn_url+"/80588/img/unread/empty/google/1f44d.png",2:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3ff.png"},boom:cdn_url+"/80588/img/unread/empty/google/1f4a5.png",bee:cdn_url+"/80588/img/unread/empty/google/1f41d.png",clap:{1:cdn_url+"/80588/img/unread/empty/google/1f44f.png",2:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3ff.png"},crystalball:cdn_url+"/80588/img/unread/empty/google/1f52e.png",tractor:cdn_url+"/80588/img/unread/empty/google/1f69c.png",pony:cdn_url+"/80588/img/unread/empty/google/1f434.png",chick:cdn_url+"/80588/img/unread/empty/google/1f423.png",growth:cdn_url+"/80588/img/unread/empty/google/1f331.png",sun:cdn_url+"/80588/img/unread/empty/google/2600-fe0f.png",balloon:cdn_url+"/80588/img/unread/empty/google/1f388.png",sweetpotato:cdn_url+"/80588/img/unread/empty/google/1f360.png",leafs:cdn_url+"/80588/img/unread/empty/google/1f343.png",owl:cdn_url+"/80588/img/unread/empty/google/1f989.png",books:cdn_url+"/80588/img/unread/empty/google/1f4da.png",island:cdn_url+"/80588/img/unread/empty/google/1f3dd-fe0f.png",coffee:cdn_url+"/80588/img/unread/empty/google/2615.png",footprints:cdn_url+"/80588/img/unread/empty/google/1f463.png",tea:cdn_url+"/80588/img/unread/empty/google/1f375.png",croissant:cdn_url+"/80588/img/unread/empty/google/1f950.png",art:cdn_url+"/80588/img/unread/empty/google/1f3a8.png",person_ball:{1:cdn_url+"/80588/img/unread/empty/google/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/80588/img/unread/empty/google/2708-fe0f.png",sailboat:cdn_url+"/80588/img/unread/empty/google/26f5.png",ship:cdn_url+"/80588/img/unread/empty/google/1f6a2.png",bulb:cdn_url+"/80588/img/unread/empty/google/1f4a1.png",hammer:cdn_url+"/80588/img/unread/empty/google/1f528.png",checkered_flag:cdn_url+"/80588/img/unread/empty/google/1f3c1.png",wrench:cdn_url+"/80588/img/unread/empty/google/1f527.png",metro:cdn_url+"/80588/img/unread/empty/google/1f687.png",soccer:cdn_url+"/80588/img/unread/empty/google/26bd.png",trophy:cdn_url+"/80588/img/unread/empty/google/1f3c6.png",cityscape:cdn_url+"/80588/img/unread/empty/google/1f3d9-fe0f.png",dog:cdn_url+"/80588/img/unread/empty/google/1f436.png",crossed_swords:cdn_url+"/80588/img/unread/empty/google/2694-fe0f.png",blush:cdn_url+"/80588/img/unread/empty/google/1f60a.png",candy:cdn_url+"/80588/img/unread/empty/google/1f36c.png",herb:cdn_url+"/80588/img/unread/empty/google/1f33f.png",sparkles:cdn_url+"/80588/img/unread/empty/google/2728.png",check_mark:cdn_url+"/80588/img/unread/empty/google/2705.png",confetti_ball:cdn_url+"/80588/img/unread/empty/google/1f38a.png",doughnut:cdn_url+"/80588/img/unread/empty/google/1f369.png",bookmark_tabs:cdn_url+"/80588/img/unread/empty/google/1f4d1.png",sleuth:{1:cdn_url+"/80588/img/unread/empty/google/1f575-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/80588/img/unread/empty/google/23f3.png",newspaper:cdn_url+"/80588/img/unread/empty/google/1f5de-fe0f.png",flex:{1:cdn_url+"/80588/img/unread/empty/google/1f4aa.png",2:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/80588/img/unread/empty/google/1f30e.png",chocolate_bar:cdn_url+"/80588/img/unread/empty/google/1f36b.png",wave:{1:cdn_url+"/80588/img/unread/empty/google/1f44b.png",2:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3ff.png"},relieved:cdn_url+"/80588/img/unread/empty/google/1f60c.png",walking:{1:cdn_url+"/80588/img/unread/empty/google/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/80588/img/unread/empty/google/1f6cb.png",unicorn_face:cdn_url+"/80588/img/unread/empty/google/1f984.png",zap:cdn_url+"/80588/img/unread/empty/google/26a1.png",star:cdn_url+"/80588/img/unread/empty/google/2b50.png"}};const Mu={"de-DE":[{emoji:"airplane",skintone:!1,lineOne:"Jetzt bist du startklar.",lineTwo:""},{emoji:"art",skintone:!1,lineOne:"Alles paletti!",lineTwo:""},{emoji:"bee",skintone:!1,lineOne:"Geschafft!",lineTwo:"Ganz sch\xf6n flei\xdfig."},{emoji:"books",skintone:!1,lineOne:"Alles gelesen.",lineTwo:"Wie es im Buche steht."},{emoji:"boom",skintone:!1,lineOne:"Du bist der Knaller!",lineTwo:""},{emoji:"bulb",skintone:!1,lineOne:"Heureka!",lineTwo:"Du hast ALLES gelesen!"},{emoji:"checkered_flag",skintone:!1,lineOne:"Du bist am Ziel angelangt!",lineTwo:"Du hast alles gelesen!"},{emoji:"clap",skintone:!0,lineOne:"Das war das T\xfcpfelchen auf dem i.",lineTwo:""},{emoji:"croissant",skintone:!1,lineOne:"Voil\xe0!",lineTwo:"Das war es auch schon."},{emoji:"crystalball",skintone:!1,lineOne:"Alles klar.",lineTwo:"Die Zukunft geh\xf6rt dir!"},{emoji:"footprints",skintone:!1,lineOne:"Gut gemacht.",lineTwo:"Jetzt liegt dir die Welt zu F\xfc\xdfen!"},{emoji:"hammer",skintone:!1,lineOne:"Du bist der Hammer!",lineTwo:"Alles gelesen!"},{emoji:"high5",skintone:!0,lineOne:"Geschafft!",lineTwo:"Das war alles."},{emoji:"metro",skintone:!1,lineOne:"Hier ist das Licht am Ende des Tunnels!",lineTwo:""},{emoji:"island",skintone:!1,lineOne:"Land in Sicht!",lineTwo:"Du hast alles gelesen!"},{emoji:"person_ball",skintone:!0,lineOne:"Immer am Ball bleiben!",lineTwo:""},{emoji:"rocket",skintone:!1,lineOne:"Du hast ein ganz sch\xf6nes Lesetempo drauf!",lineTwo:""},{emoji:"sailboat",skintone:!1,lineOne:"Alles im Lot auf dem Boot.",lineTwo:""},{emoji:"sailboat",skintone:!1,lineOne:"Alles in Butter auf dem Kutter!",lineTwo:""},{emoji:"ship",skintone:!1,lineOne:"Klar Schiff!",lineTwo:""},{emoji:"soccer",skintone:!1,lineOne:"Volltreffer! ",lineTwo:"Du hast alles gelesen!"},{emoji:"sun",skintone:!1,lineOne:"Alles heiter und klar!",lineTwo:""},{emoji:"sunglasses",skintone:!1,lineOne:"Alles klar!",lineTwo:""},{emoji:"tada",skintone:!1,lineOne:"Ta-da !",lineTwo:"Du bist jetzt ganz sch\xf6n belesen."},{emoji:"tea",skintone:!1,lineOne:"Du hast alles aufgeholt.",lineTwo:"Zeit f\xfcr eine kleine Pause."},{emoji:"thumbup",skintone:!0,lineOne:"Du bist ganz sch\xf6n auf Zack!",lineTwo:""},{emoji:"victory",skintone:!0,lineOne:"Alles erledigt!",lineTwo:"Das ist das A und O."},{emoji:"wrench",skintone:!1,lineOne:"Ganz sch\xf6n fix!",lineTwo:""}],"en-GB":[{emoji:"chocolate_bar",skintone:!1,lineOne:"You\u2019ve read everything you need to.",lineTwo:"Take a little break."},{emoji:"balloon",skintone:!1,lineOne:"There, all caught up.",lineTwo:"Turn your mind to something new."},{emoji:"bee",skintone:!1,lineOne:"You\u2019re up to date.",lineTwo:"Go on and do great things."},{emoji:"zap",skintone:!1,lineOne:"Boom!",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:!0,lineOne:"Everything unread has now been read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:!1,lineOne:"Everything\u2019s sorted.",lineTwo:"Let\u2019s do something else."},{emoji:"crystalball",skintone:!1,lineOne:"All that was unread has now been read.",lineTwo:"But what\u2019s next?"},{emoji:"high5",skintone:!0,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"check_mark",skintone:!1,lineOne:"Done and dusted.",lineTwo:""},{emoji:"octopus",skintone:!1,lineOne:"All sorted.",lineTwo:"The world is your oyster."},{emoji:"unicorn_face",skintone:!1,lineOne:"You\u2019ve read it all.",lineTwo:"Here\u2019s a unicorn."},{emoji:"racecar",skintone:!1,lineOne:"Right!",lineTwo:"All caught up."},{emoji:"rocket",skintone:!1,lineOne:"That\u2019s it.",lineTwo:"The future is yours."},{emoji:"sailboat",skintone:!1,lineOne:"You\u2019ve caught up on everything.",lineTwo:"Plain sailing from now on."},{emoji:"sunglasses",skintone:!1,lineOne:"All clear.",lineTwo:""},{emoji:"coffee",skintone:!1,lineOne:"You\u2019ve got through the lot!",lineTwo:"Pop the kettle on?"},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019re all up to date."},{emoji:"couch_and_lamp",skintone:!1,lineOne:"That\u2019s you sorted.",lineTwo:"Put your feet up."},{emoji:"tractor",skintone:!1,lineOne:"You\u2019ve read everything.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:!0,lineOne:"Caught up on everything.",lineTwo:"What\u2019s next?"}],[x.b.DEFAULT_LOCALE]:[{emoji:"apple",skintone:!1,lineOne:"You\u2019ve read all you needed.",lineTwo:"Take a moment."},{emoji:"balloon",skintone:!1,lineOne:"There! Caught up.",lineTwo:"Set your mind to something new."},{emoji:"bee",skintone:!1,lineOne:"You\u2019re up to date.",lineTwo:"Go forth and do great things."},{emoji:"boom",skintone:!1,lineOne:"Boom.",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:!0,lineOne:"Everything unread is now read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:!1,lineOne:"Everything\u2019s sorted!",lineTwo:"Let\u2019s start something new."},{emoji:"crystalball",skintone:!1,lineOne:"All that was unread is now read.",lineTwo:"What\u2019s next?"},{emoji:"high5",skintone:!0,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"leafs",skintone:!1,lineOne:"Done and done.",lineTwo:""},{emoji:"octopus",skintone:!1,lineOne:"All done.",lineTwo:"The world is your oyster."},{emoji:"pony",skintone:!1,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a pony."},{emoji:"racecar",skintone:!1,lineOne:"There.",lineTwo:"All caught up."},{emoji:"rocket",skintone:!1,lineOne:"All done.",lineTwo:"The future is yours."},{emoji:"sun",skintone:!1,lineOne:"You\u2019re all caught up!",lineTwo:"Clear screens ahead."},{emoji:"sunglasses",skintone:!1,lineOne:"All clear.",lineTwo:""},{emoji:"sweetpotato",skintone:!1,lineOne:"Sweet potato!",lineTwo:"You\u2019re all done."},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019re up to date."},{emoji:"thumbup",skintone:!0,lineOne:"That\u2019s that.",lineTwo:"You\u2019re good to go."},{emoji:"tractor",skintone:!1,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:!0,lineOne:"All caught up.",lineTwo:"What\u2019s next?"}],"es-ES":[{emoji:"boom",skintone:!1,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"chick",skintone:!1,lineOne:"Est\xe1s al d\xeda.",lineTwo:"Es hora de salir a hacer algo estupendo."},{emoji:"candy",skintone:!1,lineOne:"Has le\xeddo todo.",lineTwo:"Aqu\xed tienes un caramelo de regalo."},{emoji:"cityscape",skintone:!1,lineOne:"Has terminado de leer.",lineTwo:"Tienes el mundo a tus pies."},{emoji:"checkered_flag",skintone:!1,lineOne:"Has terminado de leer.",lineTwo:"\xbfY ahora qu\xe9 sigue?"},{emoji:"flex",skintone:!0,lineOne:"Has terminado de leer.",lineTwo:"\xa1Lo lograste!"},{emoji:"high5",skintone:!0,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"hourglass",skintone:!1,lineOne:"Has terminado de leer.",lineTwo:"El futuro es tuyo."},{emoji:"leafs",skintone:!1,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"newspaper",skintone:!1,lineOne:"Ya est\xe1s al d\xeda con tu lectura.",lineTwo:"Ahora puedes tomarte un descanso."},{emoji:"rocket",skintone:!1,lineOne:"\xa1Listo! Est\xe1s al tanto de todo.",lineTwo:"Ahora puedes proponerte algo nuevo."},{emoji:"sunglasses",skintone:!1,lineOne:"El pron\xf3stico se ve despejado.",lineTwo:""},{emoji:"sleuth",skintone:!0,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"sleuth",skintone:!0,lineOne:"Listo.",lineTwo:"Ya est\xe1s al tanto de todo."},{emoji:"tada",skintone:!1,lineOne:"\xa1Enhorabuena!",lineTwo:"Has le\xeddo todo lo que hab\xeda que leer."},{emoji:"trophy",skintone:!1,lineOne:"\xa1Al fin!",lineTwo:"Ya has terminado."}],"es-LA":[{emoji:"apple",skintone:!1,lineOne:"Est\xe1s al d\xeda con la lectura.",lineTwo:"T\xf3mate un descanso."},{emoji:"balloon",skintone:!1,lineOne:"\xa1Listo! Est\xe1s al d\xeda.",lineTwo:"Centra tu mente en algo nuevo."},{emoji:"bee",skintone:!1,lineOne:"Est\xe1s al d\xeda.",lineTwo:"\xa1Ve a conquistar el mundo!"},{emoji:"boom",skintone:!1,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"clap",skintone:!0,lineOne:"Terminaste de leer todo.",lineTwo:"\xa1Lo lograste!"},{emoji:"growth",skintone:!1,lineOne:"\xa1Todo resuelto!",lineTwo:"Empecemos algo nuevo."},{emoji:"crystalball",skintone:!1,lineOne:"Le\xedste todo lo que hab\xeda que leer.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"high5",skintone:!0,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"leafs",skintone:!1,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"octopus",skintone:!1,lineOne:"Todo listo.",lineTwo:"El mundo est\xe1 a tus pies."},{emoji:"pony",skintone:!1,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un poni."},{emoji:"racecar",skintone:!1,lineOne:"!Bien hecho!",lineTwo:"Est\xe1s al tanto de todo."},{emoji:"rocket",skintone:!1,lineOne:"Todo listo.",lineTwo:"El futuro es tuyo."},{emoji:"sun",skintone:!1,lineOne:"Ya est\xe1s al tanto de todo.",lineTwo:"\xa1Pantalla despejada!"},{emoji:"sunglasses",skintone:!1,lineOne:"\xa1Todo despejado!",lineTwo:""},{emoji:"sweetpotato",skintone:!1,lineOne:"\xa1Qu\xe9 belleza!",lineTwo:"Ya terminaste."},{emoji:"tada",skintone:!1,lineOne:"\xa1Felicidades!",lineTwo:"Le\xedste todo lo que hab\xeda que leer."},{emoji:"tada",skintone:!1,lineOne:"\xa1Felicidades!",lineTwo:"Est\xe1s al d\xeda."},{emoji:"thumbup",skintone:!0,lineOne:"Eso es todo.",lineTwo:"Puedes seguir con tus otras tareas."},{emoji:"tractor",skintone:!1,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un tractor."},{emoji:"victory",skintone:!0,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"}],"fr-FR":[{emoji:"balloon",skintone:!1,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On se sent d\xe9j\xe0 plus l\xe9ger."},{emoji:"bee",skintone:!1,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On d\xe9colle mieux face au vent, courage !"},{emoji:"books",skintone:!1,lineOne:"Lu et relu !",lineTwo:""},{emoji:"boom",skintone:!1,lineOne:"Boum !",lineTwo:"Vous \xeates \xe0 jour."},{emoji:"clap",skintone:!0,lineOne:"Bravo !",lineTwo:"Vous avez tout lu."},{emoji:"coffee",skintone:!1,lineOne:"Vous avez tout lu !",lineTwo:"Une pause s\u2019impose !"},{emoji:"crystalball",skintone:!1,lineOne:"Vous avez tout lu !",lineTwo:"Que vous r\xe9serve l\u2019avenir ?"},{emoji:"high5",skintone:!0,lineOne:"C\u2019est tout !",lineTwo:""},{emoji:"island",skintone:!1,lineOne:"Termin\xe9 !",lineTwo:"Vous pouvez vous la couler douce !"},{emoji:"owl",skintone:!1,lineOne:"Chouette !",lineTwo:"Vous avez termin\xe9."},{emoji:"racecar",skintone:!1,lineOne:"Voil\xe0 !",lineTwo:"Vous \xeates sur la bonne voie."},{emoji:"rocket",skintone:!1,lineOne:"Termin\xe9 !",lineTwo:"L\u2019avenir vous appartient."},{emoji:"sun",skintone:!1,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"L\u2019horizon est d\xe9gag\xe9."},{emoji:"sunglasses",skintone:!1,lineOne:"Tout est \xe0 jour.",lineTwo:""},{emoji:"tada",skintone:!1,lineOne:"Tadam !",lineTwo:"Vous avez tout lu."},{emoji:"thumbup",skintone:!0,lineOne:"\xc7a y est !",lineTwo:"Vous avez fini."},{emoji:"victory",skintone:!0,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"Quelle est la suite du programme ?"}],"ja-JP":[{emoji:"blush",skintone:!1,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u4ee5\u4e0a\u3067\u3059\u3002",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"bookmark_tabs",skintone:!1,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01\u6e96\u5099\u4e07\u7aef\uff01",lineTwo:"\u3055\u3042\u3001\u4f55\u304b\u3089\u3084\u308a\u307e\u3059\u304b\uff1f"},{emoji:"candy",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u306f\u3044\u3001\u30a2\u30e1\u3061\u3083\u3093\uff01"},{emoji:"check_mark",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3084\u308b\u3053\u3068\u30ea\u30b9\u30c8\u304b\u30891\u3064\u6d88\u3048\u307e\u3057\u305f\uff01"},{emoji:"cityscape",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u9060\u304f\u3092\u898b\u308b\u3068\u75b2\u308c\u76ee\u306b\u3044\u3044\u3089\u3057\u3044\u3067\u3059\u3088\uff1f"},{emoji:"coffee",skintone:!1,lineOne:"\u3059\u3079\u3066\u306e\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002",lineTwo:"\u3061\u3087\u3063\u3068\u4e00\u606f\u5165\u308c\u307e\u305b\u3093\u304b\uff1f"},{emoji:"confetti_ball",skintone:!1,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u8aad\u4e86\u3092\u9054\u6210\u3057\u307e\u3057\u305f\uff01",lineTwo:""},{emoji:"crossed_swords",skintone:!1,lineOne:"\u307f\u3069\u304f\u3000\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3000\u3084\u3063\u3064\u3051\u305f\u3002",lineTwo:"\u304b\u3057\u3053\u3055\u304c\u3000\uff11\u30dd\u30a4\u30f3\u30c8\u3000\u3042\u304c\u3063\u305f\uff01"},{emoji:"dog",skintone:!1,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u30ef\u30f3\u3060\u3075\u308b\uff01"},{emoji:"doughnut",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3061\u3087\u3063\u3068\u4f11\u61a9\u3057\u3066\u3001\u75b2\u308c\u305f\u8133\u306b\u7cd6\u5206\u88dc\u7d66"},{emoji:"herb",skintone:!1,lineOne:"\u672a\u8aad\u30b9\u30c3\u30ad\u30ea\uff01\u6c17\u5206\u3082\u30b9\u30c3\u30ad\u30ea\uff01",lineTwo:""},{emoji:"leafs",skintone:!1,lineOne:"\u5168\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u65e2\u8aad\u306b\u306a\u308a\u307e\u3057\u305f\u3002",lineTwo:"\u305d\u308c\u306f\u305d\u308c\u3067\u3001\u3061\u3087\u3063\u3068\u5bc2\u3057\u3044\u2026\uff1f"},{emoji:"rocket",skintone:!1,lineOne:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01",lineTwo:"\u3053\u306e\u8abf\u5b50\u3067\u3069\u3093\u3069\u3093\u884c\u3063\u3061\u3083\u3044\u307e\u3057\u3087\u3046\uff01"},{emoji:"sparkles",skintone:!1,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3001\u305c\u3093\u3076\u30ad\u30ec\u30a4\u306b\u7247\u4ed8\u304d\u307e\u3057\u305f\u3002",lineTwo:""},{emoji:"tada",skintone:!1,lineOne:"\u3059\u3054\u3044\uff01",lineTwo:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01"},{emoji:"tea",skintone:!1,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"trophy",skintone:!1,lineOne:"\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01",lineTwo:"\u5168\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\u3067\u3059\uff01"},{emoji:"victory",skintone:!0,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:""},{emoji:"sleuth",skintone:!0,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092",lineTwo:"\u6f0f\u308c\u306a\u304f\u3059\u3079\u3066\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002"}],"pt-BR":[{emoji:"apple",skintone:!1,lineOne:"Voc\xea j\xe1 leu tudo.",lineTwo:"Agora fa\xe7a uma pausa."},{emoji:"balloon",skintone:!1,lineOne:"Pronto!",lineTwo:"Agora voc\xea j\xe1 pode partir para outra."},{emoji:"bee",skintone:!1,lineOne:"Tudo em dia.",lineTwo:"Voc\xea est\xe1 pronto para outra."},{emoji:"flex",skintone:!0,lineOne:"Feito!",lineTwo:"Voc\xea leu todas as suas mensagens."},{emoji:"clap",skintone:!0,lineOne:"Todas as n\xe3o lidas foram lidas.",lineTwo:"Parab\xe9ns!"},{emoji:"relieved",skintone:!1,lineOne:"Miss\xe3o cumprida!",lineTwo:"Pronto para algo novo."},{emoji:"crystalball",skintone:!1,lineOne:"Agora voc\xea est\xe1 por dentro de tudo.",lineTwo:"Pronto para o futuro?"},{emoji:"high5",skintone:!0,lineOne:"Isso \xe9 tudo!",lineTwo:""},{emoji:"high5",skintone:!0,lineOne:"Deu.",lineTwo:""},{emoji:"earth_americas",skintone:!1,lineOne:"Tudo pronto.",lineTwo:"Agora o mundo est\xe1 nas suas m\xe3os."},{emoji:"walking",skintone:!0,lineOne:"\xc9 isso.",lineTwo:"J\xe1 pode sair por a\xed."},{emoji:"check_mark",skintone:!1,lineOne:"Tudo em dia.",lineTwo:"O que vai fazer agora?"},{emoji:"rocket",skintone:!1,lineOne:"Dever cumprido.",lineTwo:"O futuro \xe9 seu."},{emoji:"sunglasses",skintone:!1,lineOne:"Tudo lido.",lineTwo:"Agora j\xe1 pode relaxar."},{emoji:"sunglasses",skintone:!1,lineOne:"Tudo pronto!",lineTwo:""},{emoji:"star",skintone:!1,lineOne:"Bom trabalho!",lineTwo:"Leitura conclu\xedda."},{emoji:"tada",skintone:!1,lineOne:"Surpresa!",lineTwo:"Voc\xea terminou."},{emoji:"tada",skintone:!1,lineOne:"Surpresa!",lineTwo:"Agora voc\xea est\xe1 atualizado."},{emoji:"thumbup",skintone:!0,lineOne:"Acabou!",lineTwo:"Miss\xe3o dada \xe9 miss\xe3o cumprida."},{emoji:"wave",skintone:!0,lineOne:"Era isso.",lineTwo:"Por hoje \xe9 s\xf3!"},{emoji:"victory",skintone:!0,lineOne:"Atualizado!",lineTwo:"E agora?"}]};var Pu=a("2Zgd"),xu=a("+8mH");var Lu=function(e){let t,a,n;return Object(m.m)(e,"feature_incremental_unread_counts")?(t=Object(X.c)(e),a=Object(lo.a)(t),n=Object(X.h)(e)):(a=(a=Object(Pu.g)()).filter(t=>!Object(xu.c)(e,t)),n=Object(Pu.h)(),t={},a.forEach(a=>{const n=Object(B.e)(e,a);t[n.id]={unreadCnt:Object(q.V)(n),unreadHighlightCnt:Object(q.W)(n)}})),{countsPerChannel:t,unreadChannelIds:a,unreadChannelsAreKnown:n}};const Fu=new x.b("all_unreads");l.default.bool.isRequired,l.default.bool.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.func.isRequired,l.default.number.isRequired,l.default.func.isRequired,l.default.bool.isRequired;class empty_state_EmptyState extends i.Component{constructor(e){super(e),this.onUndo=this.onUndo.bind(this),this.onRefresh=this.onRefresh.bind(this),this.onEnter=this.onEnter.bind(this),this.generateMessage(),this.state={allowRefreshButton:e.visible},this.containerRef=o.a.createRef()}componentDidMount(){this.keyCommands=new Au.a,this.keyCommands.bindAll([{keys:"enter",handler:this.onEnter}])}componentDidUpdate(e){e.visible&&!this.props.visible?this.generateMessage():!e.visible&&this.props.visible&&(this.buttonDelayTimer=setTimeout(()=>{this.setState(()=>({allowRefreshButton:!0}))},1e3))}componentWillUnmount(){clearTimeout(this.buttonDelayTimer),this.keyCommands&&this.keyCommands.reset()}onEnter(e){const t=this.props.visible,a=Object(re.a)()?this.props.userAttentionIsOnChat:Object(Tu.f)();if(!t||!a)return;if(!this.shouldShowNewButton())return;const n=e.target;if(Object(Nu.a)(n))return;const s="BODY"===n.nodeName,r=this.containerRef.current&&this.containerRef.current.contains(n);(s||r)&&this.onRefresh()}onRefresh(){this.props.refreshAllUnreads(),this.setState(()=>({allowRefreshButton:!1}))}onUndo(){this.props.undoMarkAllRead(),this.setState(()=>({allowRefreshButton:!1}))}generateMessage(){var e=this.props;const t=e.teamId,a=e.preferredSkinTone,n=e.emojiMode;this.message=function({locale:e=x.b.DEFAULT_LOCALE,preferredSkintone:t=1,emojiMode:a="default"}){const n="apple"===a?"default":a,s=Mu[e]||Mu[x.b.DEFAULT_LOCALE],r=s[Math.floor(Math.random()*s.length)],i=r.skintone?Ru[n][r.emoji][t]:Ru[n][r.emoji];return r.emojiUrl=i,r}({locale:Object(ju.a)({teamId:t}),preferredSkinTone:a,emojiMode:n}),(new Image).src=this.message.emojiUrl}shouldShowNewButton(){const e=this.state.allowRefreshButton,t=this.props.totalUnreads;return e&&t>0}render(){var e=this.props;const t=e.visible,a=e.showUndo,n=e.totalUnreads;if(!t)return null;const s=this.shouldShowNewButton(),r=d()("p-unreads_view__empty",{"p-unreads_view__empty--show_new":s}),i=({tag:e,text:t})=>"enter-icon"===e?o.a.createElement(bn.b,{type:"enter",size:"inherit"}):o.a.createElement("b",null,t);return o.a.createElement("div",{className:r,ref:this.containerRef},o.a.createElement("div",{className:"p-unreads_view__empty__message",role:"alert"},o.a.createElement("img",{className:"p-unreads_view__empty__image",src:this.message.emojiUrl,alt:""}),o.a.createElement("div",null,this.message.lineOne,o.a.createElement("br",null),this.message.lineTwo)),s&&o.a.createElement(o.a.Fragment,null,o.a.createElement(_e.d,{onClick:this.onRefresh},Fu.t("{totalUnreads, plural, =1 {# New Message} other {# New Messages} }",{totalUnreads:n})),o.a.createElement("div",{className:"p-unreads_view__empty__button_caption"},Object(ue.q)()?Fu.rt("<b>Return</b> <enter-icon></enter-icon> to show",null,i):Fu.rt("<b>Enter</b> <enter-icon></enter-icon> to show",null,i))),a&&o.a.createElement("div",{className:"p-unreads_view__empty__undo"},o.a.createElement("div",{className:"p-unreads_view__empty__undo_inner"},Fu.t("You marked all your channels read."),o.a.createElement(Ua.a,{onClick:this.onUndo,className:"p-unreads_view__empty__undo_button"},Fu.t("Undo")))))}}empty_state_EmptyState.displayName="EmptyState";var Du=Object(u.b)(function(e){const t=Lu(e).countsPerChannel,a=Object(oo.a)(Object(ht.a)(t,"unreadCnt"));return{teamId:Object(h.b)(e),preferredSkinTone:Object(ba.k)(e,"preferred_skin_tone")||"1",emojiMode:Object(Iu.h)(e,{forceDisplay:!0}),totalUnreads:a,userAttentionIsOnChat:Object(wu.e)(e)}})(empty_state_EmptyState),Bu=a("lCmp"),Uu=a("X6iR"),qu=a("CpTu"),Hu=a("qAkX"),Wu=a("Uk1S"),Gu=a("miRO"),Ku=a("yPgC"),Vu=a("qrk6"),zu=a("2TYC"),$u=a("IxGy"),Yu=a("gLeh"),Qu=a("HBMi");function Xu(e){if(!e)return;const t=Object(Qu.a)(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime().toString()}const Ju=Object(mt.b)("build message summary for aria labels",(e,t,{channelId:a,ts:n,isFirstUnreadMsg:r,isFirstMsgForDay:i,isLastMsgForDay:o,previousMessageTs:l,day:c,rollup:d,hasFocus:u,viewContext:p}={})=>{const h=t(),b=Object(Yu.b)(h);if(!!Object($u.e)(h,{channelId:a,ts:n}))return;if(!b&&!u)return;const f=Object(zu.a)(h,{channelId:a,ts:n,previousMessageTs:l,rollup:d,hasFocus:u}),_=c||{ts:parseInt(Xu(n),10),isFirstDay:!1,isLastDay:!1};return Object(Vu.a)(s()({},f,{featureA11yMessageSummary:Object(m.m)(h,"feature_a11y_message_summary"),viewContext:p,isFirstUnreadMsg:r,isFirstMsgForDay:i,isLastMsgForDay:o,day:_}))});Ju.meta={name:"makeMessageSummary",key:"actionsMakeMessageSummaryMakeMessageSummary",description:"build message summary for aria labels"},Ju.propTypes={channelId:l.default.string.isRequired,ts:l.default.string.isRequired,isFirstUnreadMsg:l.default.bool,isFirstMsgForDay:l.default.bool,isLastMsgForDay:l.default.bool,previousMessageTs:l.default.string,day:l.default.object,rollup:Ku.a.Rollup(),hasFocus:l.default.bool,viewContext:l.default.string};var Zu=Ju,ep=a("OtLZ"),tp=a("om+M"),ap=a("s0HP"),np=a("4zXV");const sp=Object(tp.a)("Expand a channel in All Unreads",(e,t,a)=>{const n=Object(ba.j)(t());if(!n.includes(a))return;const s=Object(ep.a)(n,a);e(Object(ap.b)({pref:"unread_collapsed_channels",value:s.join(",")})),e(Object(np.b)({method:"unread.expand",args:{channel:a},reason:"all_unreads_expand"}))});sp.meta={name:"expandChannel",key:"fetchersUnreadsApiExpandChannel",description:"Expand a channel in All Unreads"},sp.propTypes=l.default.string.isRequired;const rp=Object(tp.a)("Collapse a channel in All Unreads",(e,t,a)=>{const n=Object(ba.j)(t());if(n.includes(a))return;const s=[...n,a];e(Object(ap.b)({pref:"unread_collapsed_channels",value:s.join(",")})),e(Object(np.b)({method:"unread.collapse",args:{channel:a},reason:"all_unreads_collapse"}))});rp.meta={name:"collapseChannel",key:"fetchersUnreadsApiCollapseChannel",description:"Collapse a channel in All Unreads"},rp.propTypes=l.default.string.isRequired;var ip=a("LxWA");const op=({channel:e,ts:t})=>e&&t?`${e}-${t}`:t;class message_impression_logger_MessageImpressionLogger{constructor({teamId:e,experimentGroup:t,clogger:a,messageViewLocation:n}){this.teamId=e,this.visibleMessageIds={},this.messagesById={},this.experimentGroup=t,this.clogger=a,this.messageViewLocation=n}setCurrentlyVisibleMessages(e){const t=(new Date).getTime(),a=s()({},this.visibleMessageIds);e.forEach(e=>{const n=op(e);this.messagesById[n]=e,this.visibleMessageIds[n]=this.visibleMessageIds[n]||t,delete a[n]}),Object.keys(a).forEach(e=>{var a=this.messagesById[e];const n=a.ts,s=a.channel,r=Object(ae.a)(Object(p.getStateByTeamId)(this.teamId),s,n,!1),i=t-this.visibleMessageIds[e];delete this.visibleMessageIds[e],delete this.messagesById[e],this.shouldLog()&&(i<500||r&&this.clogger.track(de.EventId.MSG_IMPRESSION,{contexts:{ui_context:{action:de.UiAction.IMPRESSION},message_impression:{channel_id:r.channel,msg_timestamp:r.ts,msg_thread_ts:r.thread_ts,msg_author_user_id:r.user,duration_milliseconds:i,message_view_location:this.messageViewLocation}}}))})}flushAllVisibleMessages(){this.setCurrentlyVisibleMessages([])}isDisabled(){return!this.experimentGroup||"control"===this.experimentGroup}shouldLog(){if(this.isDisabled())return!1;switch(this.experimentGroup){case"enabled":return!0;case"sample_001":return Math.random()<.01;default:return!1}}}const lp={CHANNEL:0,DM:1,MPDM:2,THREAD:3,ALL_UNREAD:4,ALL_THREADS:5,SEARCH:6};var cp=a("3/My"),dp=a("nUcG");function up(e){const t={};for(let a=0;a<e.length;a++)t[e[a].key]={index:e[a].index,next:Object(se.a)(e[a+1],"key")};return t}const pp=s()({},Or.a.propTypes,{stickyItems:l.default.arrayOf(l.default.shape({key:l.default.string,index:l.default.number})),stickyOffsetTop:l.default.number,stickyZIndex:l.default.number}),hp=s()({},Or.a.defaultProps,{stickyItems:[],stickyOffsetTop:0,stickyZIndex:null});class sticky_list_StickyList extends Or.a{constructor(e){super(e),this.stickyItems=up(e.stickyItems)}UNSAFE_componentWillReceiveProps(e){super.UNSAFE_componentWillReceiveProps(e),this.stickyItems=up(e.stickyItems)}renderItem(e,t){if(!(e in this.stickyItems))return super.renderItem(e,t);const a=0===t?-100:this.getTop(e),n=this.layout.getHeight(e),r=this.layout.getHeightValidity(e),i=this.getContentHeight(),l=this.stickyItems[e].next,c=l?this.getTop(l):i,u=Math.max(0,i-c),p=this.state.activeItem===e,h=null===this.state.activeItem&&this.state.hasKeyboardFocus&&this.state.initialActiveItem===e,m=this.state.mouseDownTargetItem===e,b=this.state.hoveredItem===e;var f=this.props;const _=f.rowRenderer,g=f.getPropsForItem,y=f.onItemClick,O=f.onItemKeyDown,C=f.shouldHorizontallyScroll,v=f.useStaticHeightForListItems,E=f.width,k=this.getUniqueItemId(e),S=g({key:e,index:t})||{},j=d()(S.className,"c-virtual_list__item--sticky");return o.a.createElement("div",{key:`${e}${a}${u}${this.props.width}${this.props.height}`,className:"c-virtual_list__sticky_container",role:"presentation",style:{top:a,bottom:u}},o.a.createElement(dp.a,s()({tabIndex:this.getListItemTabIndex(e)},S,{id:e,itemKey:e,key:e,height:n,validity:r,className:j,style:{top:this.props.stickyOffsetTop,zIndex:this.props.stickyZIndex},hasFocus:p,hasFocusWithin:h,isMouseDownOnItem:m,onFocusEnter:this.onItemFocusEnter,onFocusWithin:this.onItemFocusWithin,onFocusLeave:this.onItemFocusLeave,onTabWithin:this.onItemTabWithin,onHeightChange:this.setHeight,onMouseOver:this.onItemMouseOver,onMouseLeave:this.onItemMouseLeave,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseUp,onClick:y,onKeyDown:O,shouldHorizontallyScroll:C,useStaticHeight:v}),_(t,{key:e,hasFocus:p,hasFocusWithin:h,isHovered:b,isExpanded:S["aria-expanded"],itemId:k,listWidth:E})))}renderItems(){const e=super.renderItems(),t=this.state.start,a=Object(cp.a)(this.props.stickyItems,{index:t},e=>e.index)-1,n=this.props.stickyItems[a];return n&&e.unshift(this.renderItem(n.key,n.index)),e}}sticky_list_StickyList.propTypes=pp,sticky_list_StickyList.defaultProps=hp;var mp=a("0d94"),bp=a("jo6Y"),fp=a.n(bp),_p=a("MnCE");const gp=new x.b("messages");l.default.bool;function yp({ghost:e}){return o.a.createElement("div",{className:d()({"c-message_list__unread_divider":!0,"c-message_list__unread_divider--ghost":e})},o.a.createElement("hr",{className:"c-message_list__unread_divider__separator","aria-hidden":"true"}),o.a.createElement("span",{className:"c-message_list__unread_divider__label"},gp.t("new messages")))}yp.displayName="UnreadDivider",yp.defaultProps={ghost:!1};var Op=Object(_p.a)(yp);l.default.number.isRequired,l.default.bool,l.default.bool;function Cp(e){let t=e.isUnread,a=fp()(e,["isUnread"]);const n=t?o.a.createElement(Op,{ghost:a.ghost}):o.a.createElement("hr",{className:"c-message_list__day_divider__line"});return o.a.createElement("div",{className:"c-message_list__day_divider"},n)}function vp({date:e,sticky:t}){const a=e/1e3,n=Object(Ol.a)(a,"{day_divider_pretty}"),s=d()("c-message_list__day_divider__label",{"c-message_list__day_divider__label--non_sticky":!t});return o.a.createElement("div",{className:s},o.a.createElement("div",{className:"c-message_list__day_divider__label__pill"},n))}Cp.displayName="DayDivider",Cp.defaultProps={isUnread:!1,ghost:!1},vp.displayName="DayDividerLabel",vp.defaultProps={sticky:!0};const Ep=Object(_p.a)(Cp),kp=Object(_p.a)(vp);var Sp=a("4EIq");const jp=new x.b("offline_mode");function Ip({featureOfflineMode:e,caption:t}){return e?o.a.createElement("div",{className:"p-inline_offline_indicator"},o.a.createElement("span",null,o.a.createElement(bn.b,{type:"cloud-offline-small",size:"inherit"})," ",o.a.createElement("strong",null,jp.t("No connection."))," ",t||jp.t("Go online to load more messages."))):null}Ip.displayName="InlineOfflineIndicator",Ip.defaultProps={caption:void 0};var wp=Object(fs.a)("feature_offline_mode")(Ip),Tp=a("Srcy"),Np=a("peKf"),Ap=a("SNtu"),Rp=a("OZf9"),Mp=a("rEgV"),Pp=a("y8dB");const xp=new x.b("all_unreads"),Lp=Object(mt.b)("Build an aria-label for an All Unreads header row",(e,t,{channelId:a,messageCount:n,messageCountAfterLatest:s,markedMsgCount:r,messageCountIsExact:i,collapsed:o}={})=>{const l=t(),c=n>0,d=s>0;let u;return`${Object(q.x)(l,Object(B.e)(l,a))} (${u=c||!(r>0)||d?!c&&d||o?i?xp.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:s+n}):xp.t("New messages"):i?xp.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:n}):xp.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:n}):xp.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:r})})`});Lp.meta={name:"makeHeaderLabel",key:"componentsUnreadsViewUtilityMakeHeaderLabelMakeHeaderLabel",description:"Build an aria-label for an All Unreads header row"},Lp.propTypes={channelId:l.default.string.isRequired,messageCount:l.default.number,messageCountAfterLatest:l.default.number,markedMsgCount:l.default.number,messageCountIsExact:l.default.bool,collapsed:l.default.bool};var Fp=Lp,Dp=a("Bw5p"),Bp=a("4Twu"),Up=a("18Pa");const qp=new x.b("all_unreads");l.default.number,l.default.bool,l.default.bool.isRequired,l.default.func.isRequired;class header_default_HeaderDefault extends i.PureComponent{getMessageCountText(){var e=this.props;const t=e.messageCountIsExact,a=e.messageCount;return a?t?qp.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:a}):qp.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:a}):""}renderButton(e){return o.a.createElement(_e.d,{onClick:this.props.markRead,type:"outline",size:"small",className:"p-unreads_view__header__mark_read_button","data-qa":"all_unreads_header_mark_read",key:"MARK-READ"},e)}renderContent(){if(this.props.selected)return qp.rt('<span className="p-unreads_view__header__kb_instructions">Press <key>Esc</key> to </span><button>Mark as Read</button>',null,({text:e,tag:t})=>"button"===t?this.renderButton(e):"key"===t?o.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},e):null);const e=qp.t("Mark as Read");return this.renderButton(e)}render(){const e=d()("p-unreads_view__header__kb_instructions_container");return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"p-unreads_view__header__message_count"},this.getMessageCountText()),o.a.createElement("span",{className:e},this.renderContent()))}}header_default_HeaderDefault.displayName="HeaderDefault",header_default_HeaderDefault.defaultProps={messageCount:0,messageCountIsExact:!0};var Hp=header_default_HeaderDefault;const Wp=new x.b("all_unreads");l.default.string.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.bool.isRequired,l.default.number,l.default.bool,l.default.number,l.default.number,l.default.number,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.bool.isRequired,l.default.func.isRequired;class header_Header extends i.Component{constructor(e){super(e),Object(la.a)(this,["markRead","undoMarkRead","showNew","openChannel","toggleCollapse"])}markRead(){const e={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_READ",metadata:e}),this.props.markChannelLastRead(this.props.channelId,this.props.latest,this.props.messageCount)}undoMarkRead(){const e={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_UNREAD",metadata:e}),this.props.markChannelLastRead(this.props.channelId,this.props.initialLastRead)}showNew(){this.props.showNewerMessages(this.props.channelId,!0)}openChannel(){this.props.setPrimaryView({id:this.props.channelId})}toggleCollapse(){this.props.toggleCollapse(this.props.channelId)}renderUndo(){const e=this.props.markedMsgCount;let t;return e&&(t=Wp.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:e})),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"p-unreads_view__header__message_count"},t),o.a.createElement(Ua.a,{className:"p-unreads_view__header__undo_button",onClick:this.undoMarkRead,"data-qa":"all_unreads_header_undo"},Wp.t("Undo")))}renderNewMsgs(e){var t=this.props;const a=t.messageCountAfterLatest,n=t.messageCountIsExact,s=t.messageCount;let r;return r=n?Wp.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:a+s}):Wp.t("New messages"),o.a.createElement(Ua.a,{onClick:e,className:"p-unreads_view__header__new_msgs_button","data-qa":"all_unreads_header_new_msgs"},r," ",o.a.createElement(bn.b,{inline:!0,size:"inherit",type:"circle-fill"}))}renderDefault(){const e=Object(Dp.a)(this.props,["messageCount","messageCountIsExact","selected"]);return o.a.createElement(Hp,s()({},e,{markRead:this.markRead}))}render(){var e=this.props;const t=e.channelId,a=e.markedMsgCount,n=e.messageCount,s=e.messageCountAfterLatest,r=e.collapsed,i=n>0,l=s>0,c=0,u=1,p=2,h=3;let m=c;i||!(a>0)||l?!i&&l?m=h:r&&(m=u):m=p;const b=d()("p-unreads_view__header",{"p-unreads_view__header--was_marked":m===p||m===h,"p-unreads_view__header--collapsed":m===u}),f=r?"caret-right":"caret-down",_=m===c||m===u,g=m===c;return o.a.createElement("div",{className:b},o.a.createElement(Ua.a,{onClick:this.openChannel,className:"p-unreads_view__header__channel_name_link","data-qa":"all_unreads_header_channel_name"},o.a.createElement(Bp.a,{channelId:t,className:"p-unreads_view__header__channel_name"})),_&&o.a.createElement(Up.a,{icon:f,className:"p-unreads_view__header__collapse","data-qa":"all_unreads_header_toggle",onClick:this.toggleCollapse,"aria-expanded":g}),m===p&&this.renderUndo(),m===h&&this.renderNewMsgs(this.showNew),m===u&&this.renderNewMsgs(this.toggleCollapse),m===c&&this.renderDefault())}}header_Header.displayName="Header",header_Header.defaultProps={messageCount:0,messageCountIsExact:!0,messageCountAfterLatest:0,markedMsgCount:0,totalUnreadCount:0};const Gp={setPrimaryView:(...e)=>Object(qn.a)(...e)};var Kp=Object(u.b)(null,Gp)(header_Header),Vp=a("CaXY"),zp=a("anIG");l.default.object.isRequired;function $p(e){let t=e.msg,a=fp()(e,["msg"]);return o.a.createElement(Jt.a,s()({msg:t},a,{inline:Object($e.mb)(t)}))}$p.displayName="CompactBlocks";var Yp=$p,Qp=a("fFZG"),Xp=a("ALaB");a("Ho8D");function Jp({msg:e}){return Object($e.ub)(e)?o.a.createElement(Xp.a,{className:"c-message_kit__broadcast_footer",ts:e.ts,threadTs:e.thread_ts,channelId:e.channel}):null}Jp.displayName="BroadcastFooter";var Zp=a("qYtJ");a("dBrN");l.default.object.isRequired,l.default.string,l.default.func,l.default.string;const eh={dispatchShowThreadIfThreadable:r.a,className:void 0,currentThreadKey:void 0};class thread_replies_ThreadReplies extends i.PureComponent{render(){var e=this.props;const t=e.msg,a=e.dispatchShowThreadIfThreadable,n=e.currentThreadKey,s=d()("c-message_kit__thread_replies",this.props.className),r=t.channel,i=t.thread_ts,l=t.replies,c=t.reply_count,u=t.reply_users,p=t.reply_users_count,h=t.latest_reply;if(!r||!c)return null;const m=Object($a.c)(r,i),b=n&&m===n,f=b?Object($a.e)(n):void 0;return o.a.createElement(Zp.a,{channelId:r,threadTs:i,replies:l,replyCount:c,replyUsers:u,replyUsersCount:p,latestReply:h,showThreadIfThreadable:a,className:s,isThreadExpanded:b,threadListId:f})}}thread_replies_ThreadReplies.displayName="ThreadReplies",thread_replies_ThreadReplies.defaultProps=eh;var th=Object(u.b)(e=>({currentThreadKey:Object($a.b)(e)}),e=>({dispatchShowThreadIfThreadable:(...t)=>e(Object(Gu.m)(...t))}))(thread_replies_ThreadReplies),ah=a("IqgZ"),nh=a("Q/6m"),sh=a("Q3oM"),rh=a("WOap"),ih=a("RjVJ");a("vKzi");l.default.object,l.default.node,l.default.oneOf(["light","dense"]);const oh={msg:l.default.object,children:null,theme:"light"};class broadcast_preamble_BroadcastPreamble extends i.PureComponent{render(){var e=this.props;const t=e.msg,a=e.children,n=e.theme;if(!Object($e.ub)(t))return a;const s=d()("c-message_kit__broadcast_preamble",{"c-message_kit__broadcast_preamble--dense":"dense"===n});return o.a.createElement("div",{className:s},a,o.a.createElement(ih.a,{ts:t.ts,threadTs:t.thread_ts,channelId:t.channel,className:"c-message_kit__broadcast_preamble__inner"}))}}broadcast_preamble_BroadcastPreamble.displayName="BroadcastPreamble",broadcast_preamble_BroadcastPreamble.defaultProps=oh;var lh=Object(u.b)(e=>({theme:Object(Wu.a)(e)}))(broadcast_preamble_BroadcastPreamble),ch=a("gK0X"),dh=a("CsEc"),uh=a("Y6eO");a("rqkC");l.default.object.isRequired,l.default.string,l.default.node,l.default.bool,l.default.func,l.default.string;const ph={className:void 0,children:void 0,isEditing:!1,setBackground:r.a,viewContext:void 0};class edit_MessageEdit extends i.PureComponent{componentDidMount(){this.setBackground()}componentDidUpdate(){this.setBackground()}setBackground(){var e=this.props;const t=e.isEditing;(0,e.setBackground)({editing:t})}render(){var e=this.props;const t=e.msg,a=e.isEditing,n=e.children,s=e.viewContext;if(!a)return n;const r=t.channel,i=t.ts,l=d()(this.props.className,"c-message_kit__edit");return o.a.createElement("div",{className:l},o.a.createElement(uh.a,{channelId:r,ts:i,messageContainerType:s}))}}edit_MessageEdit.displayName="MessageEdit",edit_MessageEdit.defaultProps=ph;var hh=Object(nh.b)(Object(zo.b)(Object(u.b)((e,{msg:t,viewContext:a})=>{const n=Object($e.F)(t),s=Object($e.Q)(t);return{isEditing:!!Object($u.e)(e,{channelId:n,ts:s,viewContext:a})}})(edit_MessageEdit))),mh=a("/FWe");const bh=new x.b("message_kit"),fh=(l.default.string,l.default.object.isRequired,l.default.oneOf(["light","dense"]),l.default.bool,l.default.bool,l.default.bool,l.default.oneOf(["above","inside","default"]),l.default.func,Ku.a.Rollup(),l.default.string,{className:void 0,theme:"light",adjacent:!1,focused:!1,renderActionsOffscreen:!1,actionsPosition:void 0,onBackgroundClick:r.a,rollup:null,parentId:void 0});class message_Message extends i.PureComponent{constructor(e){super(e),this.handleBackgroundClick=this.handleBackgroundClick.bind(this)}getMessageBody(e){var t=this.props;const a=t.adjacent,n=t.rollup;return o.a.createElement(o.a.Fragment,null,!a&&o.a.createElement(lh,{msg:e},o.a.createElement(Qt.a,{msg:e}),"\xa0\xa0",o.a.createElement(ta.a,{msg:e,clickable:!0},bh.t("Open in channel")),o.a.createElement("br",null)),o.a.createElement(Xt.a,{msg:e,rollup:n}),o.a.createElement(Jt.a,{msg:e,blocksContainerContext:Vp.a.all_unreads}),o.a.createElement(ea.b,{msg:e}),o.a.createElement(zp.a,{msg:e}),o.a.createElement(Qp.a,{msg:e}),o.a.createElement(th,{msg:e}),o.a.createElement(Jp,{msg:e}))}getCompactMessageBody(e){var t=this.props;const a=t.adjacent,n=t.rollup;return o.a.createElement(mh.a,null,!a&&o.a.createElement(lh,{msg:e},o.a.createElement(Qt.a,{msg:e,className:"p-unreads_view_sender--compact"}),"\xa0"),o.a.createElement(Xt.a,{msg:e,rollup:n}),o.a.createElement(Yp,{msg:e,blocksContainerContext:Vp.a.all_unreads}),o.a.createElement(ea.b,{msg:e}),o.a.createElement(zp.a,{msg:e}),o.a.createElement(Qp.a,{msg:e}),o.a.createElement(th,{msg:e}),o.a.createElement(Jp,{msg:e}))}getCompactGutter(){var e=this.props;const t=e.msg,a=e.theme,n=e.adjacent,s="light"===a,r=d()("p-unreads_view_compact_timestamp",{"p-unreads_view_compact_timestamp--light":s,"p-unreads_view_compact_timestamp--adjacent":n});return o.a.createElement("div",{className:r},o.a.createElement(ta.a,{msg:t,meridiem:!(n&&s),clickable:!0},bh.t("Open in channel")))}handleBackgroundClick(e){e.altKey&&(e.preventDefault(),this.props.onBackgroundClick(this.props.msg))}render(){var e=this.props;const t=e.msg,a=e.theme,n=e.adjacent,s=e.focused,r=e.renderActionsOffscreen,i=e.actionsPosition,l=e.parentId,c=e.className,u="dense"===a,p=u?this.getCompactGutter():null,h=n?this.getCompactGutter():o.a.createElement(Yt.a,{msg:t}),m=u?this.getCompactMessageBody(t):this.getMessageBody(t);return o.a.createElement(ah.a,{msg:t},o.a.createElement(nh.a,{msg:t,className:d()(c,"p-unreads-view__message","c-message_kit__message"),onClick:this.handleBackgroundClick},o.a.createElement(sh.a,{"data-qa":"unreads_view_message_hover",hovered:s},o.a.createElement(rh.a,{msg:t,showComment:!0,showShare:!0,messageContainerType:Ln.I.UNREAD_VIEW,position:i||(u||n?"above":"default"),renderOffscreen:r,parentId:l},o.a.createElement(dh.a,{msg:t,className:"p-unreads-view__message_label"},o.a.createElement($t.a,{light:h,compact:p},o.a.createElement(ch.a,{msg:t,replyBar:o.a.createElement(th,{msg:t})},o.a.createElement(hh,{msg:t},m))))))))}}message_Message.displayName="Message",message_Message.defaultProps=fh;const _h=new x.b("all_unreads");class show_newer_button_ShowNewerButton extends i.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var e=this.props;const t=e.channelId;(0,e.showNewerMessages)(t)}render(){const e=this.props.count,t=_h.t("{count, plural, =1 {# new message} other {# new messages}}",{count:e});return o.a.createElement(Ua.a,{className:"p-unreads_view__show_newer",onClick:this.onClick},t)}}show_newer_button_ShowNewerButton.displayName="ShowNewerButton";l.default.func.isRequired;const gh=new x.b("all_unreads");function yh({markAllRead:e}){return o.a.createElement("div",{className:"p-unreads_view__footer"},o.a.createElement(_e.d,{onClick:e,type:"outline"},gh.t("Mark All Messages Read")))}yh.displayName="Footer";var Oh=yh;const Ch=new x.b("all_unreads");function vh(){return o.a.createElement("div",{className:"p-unreads_view__loading_more"},Ch.t("Loading more messages..."))}vh.displayName="LoadingMore";var Eh=vh;const kh=new x.b("all_unreads"),Sh="UNREADS-VIEW",jh=Object(mp.a)(message_Message),Ih={showNewerMessages:l.default.func.isRequired,markChannelLastRead:l.default.func.isRequired,markAllRead:l.default.func.isRequired,removeFrames:l.default.func.isRequired,totalUnreadCount:l.default.number.isRequired,frames:l.default.arrayOf(l.default.shape({channelId:l.default.string.isRequired,start:l.default.string.isRequired,end:l.default.string.isRequired,initialLastRead:l.default.string.isRequired,markedMsgCount:l.default.number.isRequired,channelType:l.default.string.isRequired,collapsed:l.default.bool.isRequired,lastRead:l.default.string.isRequired,latest:l.default.string.isRequired,timestamps:l.default.arrayOf(l.default.string).isRequired,reachedEnd:l.default.bool.isRequired,messages:l.default.object,isMember:l.default.bool})).isRequired,logger:l.default.object.isRequired,clogLinkClick:l.default.func.isRequired,theme:l.default.oneOf(["dense","light"]).isRequired,featureAriaApplicationMode:l.default.bool.isRequired,allUnreadsSortOrder:l.default.string.isRequired,focusRequestedThreadKey:l.default.string,userAttentionIsOnChat:l.default.bool.isRequired,featureOfflineMode:l.default.bool.isRequired,isOffline:l.default.bool.isRequired,teamId:l.default.string.isRequired,impressionLoggingWebGroup:l.default.string,fetchHistory:l.default.func.isRequired,addMessagesFromHistory:l.default.func.isRequired,setUnreadPoint:l.default.func.isRequired,expandChannel:l.default.func.isRequired,collapseChannel:l.default.func.isRequired,makeMessageSummary:l.default.func.isRequired,makeHeaderLabel:l.default.func.isRequired,showThreadIfThreadable:l.default.func.isRequired,setFocusRequestedThreadKey:l.default.func.isRequired,removeFromSectionNavigation:l.default.func,addToSectionNavigation:l.default.func,setInitialActiveSection:l.default.func},wh={focusRequestedThreadKey:void 0,removeFromSectionNavigation:r.a,addToSectionNavigation:r.a,setInitialActiveSection:r.a,teamId:void 0,impressionLoggingWebGroup:"control"};class unreads_list_UnreadsList extends Su.a{constructor(e){super(e),Object(la.a)(this,["renderRow","fetchPost","showNewerMessages","markAllRead","markChannelLastRead","toggleCollapse","handleMessageBackgroundClick","isFocusableItem","onListScroll","onMarkReadKeyCommand","onMarkReadKeyCommandWithR","onLeftKeyCommand","onRightKeyCommand","onPreviousChannelKeyCommand","onNextChannelKeyCommand","onItemTabWithin","shouldIgnoreKeyEvent","shouldIgnoreFocusedKeyEvent","clogClick","isItemAriaExpanded","onFocusEnter","onFocusLeave","getAriaLabelForRow","getPropsForItem","focus"]),this.layout=new Cr.a({ANCHOR_OFFSET:72}),this.list=o.a.createRef(),this.rows=[],this.loading=!1,this.state={keyToFocus:null,hasKeyboardFocus:!1},this.onListScrolledDebounce=Object(ip.a)(this.onListScroll,150),this.attachMessageImpressionLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger)}componentWillUnmount(){this.messageImpressionLogger.flushAllVisibleMessages()}componentDidUpdate(e){const t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Np.a)(t)&&this.props.addToSectionNavigation(),Object(Ap.a)(t)&&this.props.removeFromSectionNavigation(),this.layout.anchor&&0===this.layout.anchorOffset&&this.layout.setAnchor(!1);const a=Object(ht.a)(this.props.frames.filter(e=>!e.isMember),"channelId"),n=Object(ht.a)(this.props.frames.filter(e=>e.reachedEnd&&(Object(io.a)(e.timestamps)||Object(Hu.a)(e.timestamps)<=e.initialLastRead)),"channelId"),s=[...a,...n];s.length&&(this.props.logger.info("removing frames (non-member, empty):",a,n),this.props.removeFrames(s)),e.teamId!==this.props.teamId&&this.attachMessageImpressionLogger(this.props.teamId,this.props.impressionLoggingWebGroup,this.props.clogger),this.maybeClearKeyToFocus()}attachMessageImpressionLogger(e,t,a){if(this.messageImpressionLogger)try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(n){this.props.logger.error("unreads_list_unable_log_message_impressions","Unreads List View unable to log message impressions",n)}this.messageImpressionLogger=new message_impression_logger_MessageImpressionLogger({teamId:e,experimentGroup:t,clogger:a,messageViewLocation:lp.ALL_UNREAD})}maybeClearKeyToFocus(){const e=this.list.current;if(e){const t=e.getActiveItem();t&&this.state.keyToFocus===t&&this.setState(()=>({keyToFocus:null}))}}determineKeyToFocus(e,t){const a=this.state.keyToFocus,n=this.props.focusRequestedThreadKey;if(n){var s=Object($a.a)(n);return`message-${s.channelId}-${s.threadTs}`}if(a)return a;const r=this.list.current&&this.list.current.getInitialActiveItem();if(Object(Uu.a)(r,"show-newer-")&&!Object(fo.a)(t,r)){const a=e.indexOf(r);if(-1===a)return null;const n=e[a-1],s=t.indexOf(n),i=t[s+1];if(i)return i}return null}showNewerMessages(e,t){const a=Object(qu.a)(this.props.frames,{channelId:e}),n=t&&a.lastRead;t&&this.maybeAnchorToHeader(e),this.props.showNewerMessages(e,a.latest,n)}markAllRead(){const e={};this.rows.filter(e=>"header"===e.type).forEach(t=>{t.messageCountIsExact&&!t.messageCount||(e[t.channelId]=t.end)}),this.props.markAllRead(e)}getRowAndFrame(e){var t=this.props;const a=t.logger,n=t.frames,s=this.keys.indexOf(e),r=this.rows[s];if(!r||!r.channelId)return a.warn("No valid row"),null;const i=r.channelId,o=Object(qu.a)(n,{channelId:i});return o?{row:r,frame:o}:(a.warn(`No frame for ${i}`),null)}getActiveRow(){const e=this.list.current&&this.list.current.getInitialActiveItem();return e?this.getRowAndFrame(e):null}getActiveRowForKeyboardMarking(){const e=this.getActiveRow();if(e)return e;const t=this.defaultActiveItemForKeyboardMarking||this.keys[0];return t?this.getRowAndFrame(t):null}onMarkReadKeyCommand(){var e=this.props;const t=e.logger,a=e.frames;t.info("onMarkReadKeyCommand");var n=this.getActiveRowForKeyboardMarking()||{};const s=n.row,r=n.frame;if(!s||!r)return;const i=Object(_n.a)(this.rows,{channelId:r.channelId,type:"message"}).length;if(!i)return s.markedMsgCount?void this.markChannelLastRead(r.channelId,r.initialLastRead):void t.warn("No messages to mark or to undo");if(this.markChannelLastRead(r.channelId,r.end,i),1===a.filter(e=>e.start<e.end).length)return;const o=a[1+a.indexOf(r)],l=o?`header-${o.channelId}`:`header-${r.channelId}`;this.setState(()=>({keyToFocus:l})),this.defaultActiveItemForKeyboardMarking=l}onMarkReadKeyCommandWithR(){const e=this.props.logger;e.info("onMarkReadKeyCommandWithR");var t=this.getActiveRowForKeyboardMarking()||{};const a=t.row,n=t.frame;a&&n&&("header"===a.type?this.onMarkReadKeyCommand():e.info(`Header not selected: ${a.type}`))}onLeftKeyCommand(){this.props.logger.info("onLeftKeyCommand");var e=this.getActiveRow();const t=e.row,a=e.frame;t&&a&&("header"!==t.type||a.collapsed||(this.toggleCollapse(a.channelId),this.setState(()=>({keyToFocus:`header-${a.channelId}`}))))}onRightKeyCommand(){this.props.logger.info("onRightKeyCommand");var e=this.getActiveRow();const t=e.row,a=e.frame;if(t&&a){if("header"===t.type&&a.collapsed)return this.toggleCollapse(a.channelId),void this.setState(()=>({keyToFocus:`header-${a.channelId}`}));if("message"===t.type){const e=t.ts,a=t.channelId;this.props.showThreadIfThreadable({channelId:a,threadTs:e,requestFocus:!0}),this.blur()}}}onPreviousChannelKeyCommand(){var e=this.props;const t=e.logger,a=e.frames;t.info("onPreviousChannelKeyCommand");var n=this.getActiveRow()||{};const s=n.row,r=n.frame;if(!s||!r)return;let i=r;"header"!==s.type||(i=a[a.indexOf(r)-1])?this.setState(()=>({keyToFocus:`header-${i.channelId}`})):t.info("No previous frame")}onNextChannelKeyCommand(){var e=this.props;const t=e.logger,a=e.frames;t.info("onNextChannelKeyCommand");var n=this.getActiveRow()||{};const s=n.row,r=n.frame;if(!s||!r)return;const i=a[a.indexOf(r)+1];i?this.setState(()=>({keyToFocus:`header-${i.channelId}`})):t.info("No next frame")}onItemTabWithin(){this.props.setInitialActiveSection()}shouldIgnoreKeyEvent(e){return!!Object(Nu.a)(e.target)||(!this.checkUserAttentionIsOnChat()||e.target!==document.body&&((!e.target||"Punreads"!==e.target.getAttribute("data-sidebar-link-id"))&&!this.state.hasKeyboardFocus))}shouldIgnoreFocusedKeyEvent(e){return!!Object(Nu.a)(e.target)||(!this.checkUserAttentionIsOnChat()||!this.state.hasKeyboardFocus)}checkUserAttentionIsOnChat(){return Object(re.a)()?this.props.userAttentionIsOnChat:Object(Tu.f)()}maybeAnchorToHeader(e){if(!this.list.current)return;const t=`header-${e}`;this.list.current.getTop(t)-this.list.current.getScrollTop()>0||this.layout.setAnchor(t,0)}markChannelLastRead(e,t,a){this.maybeAnchorToHeader(e),this.props.markChannelLastRead(e,t,a)}clogClick(e,t){this.props.clogLinkClick({event:e,metadata:t})}toggleCollapse(e){const t=Object(qu.a)(this.props.frames,{channelId:e});if(!t)return;const a={channel_id:e,channel_type:t.channelType};this.maybeAnchorToHeader(e),t.collapsed?(this.props.expandChannel(e),this.props.showNewerMessages(e,t.latest),this.clogClick("UNREADS_EXPAND_GROUP",a)):(this.props.collapseChannel(e),this.clogClick("UNREADS_COLLAPSE_GROUP",a))}handleMessageBackgroundClick(e){const t=e.channel,a=e.ts;this.props.setUnreadPoint({channelId:t,unreadTs:a})}isFocusableItem({index:e}){const t=this.rows[e];return["header","message","show-newer","footer"].includes(t.type)}isItemAriaExpanded(e,t){const a=this.rows[t];if(a&&"header"===a.type)return!a.collapsed}getPropsForItem({key:e,index:t}){const a=this.rows[t];return a&&a.type?{"aria-label":this.getAriaLabelForRow(t),"aria-expanded":this.isItemAriaExpanded(e,t)}:void 0}scrollToTop(){this.list.current&&this.list.current.scrollToOffset(0)}focus(){const e=this.list.current;e&&e.focus()}blur(){const e=this.list.current;e&&e.blur()}onFocusEnter(){this.setState(()=>({hasKeyboardFocus:!0}),()=>{const e=this.props.focusRequestedThreadKey,t=this.list.current;t&&e&&`message-${e}`===t.getActiveItem()&&this.props.setFocusRequestedThreadKey(null)})}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}onListScroll(){if(!this.list||!this.list.current)return;var e=this.list.current.getVisibleRange(void 0,!0);const t=e.start,a=e.end,n=this.rows.slice(t,a).filter(e=>"message"===e.type).map(e=>({ts:e.ts,channel:e.channelId}));try{this.messageImpressionLogger.setCurrentlyVisibleMessages(n)}catch(s){this.props.logger.error("unreads_list_unable_log_message_impressions","Unreads List View unable to log message impressions",s)}}getAriaLabelForRow(e){if(!this.props.makeMessageSummary)return null;const t=this.rows[e];if(!t||!t.type)return null;switch(t.type){case"message":{const e=t.ts;return this.props.makeMessageSummary({channelId:t.channelId,ts:e,hasFocus:this.state.hasKeyboardFocus,day:{ts:e,isFirstDay:!1,isLastDay:!1},viewContext:Ln.I.UNREAD_VIEW})}case"header":return this.props.makeHeaderLabel({channelId:t.channelId,messageCount:t.messageCount,messageCountAfterLatest:t.messageCountAfterLatest,markedMsgCount:t.markedMsgCount,messageCountIsExact:t.messageCountIsExact,collapsed:t.collapsed});case"show-newer":return kh.t("{count, plural, =1 {# new message} other {# new messages}}",{count:t.count});case"footer":return kh.t("Mark All Messages Read");default:return null}}renderRow(e,{hasFocus:t,itemId:a}){const n=this.rows[e],s=this.list.current&&this.list.current.getInitialActiveItem();switch(n.type){case"header":return o.a.createElement(Kp,{channelId:n.channelId,channelType:n.channelType,messageCount:n.messageCount,messageCountAfterLatest:n.messageCountAfterLatest,messageCountIsExact:n.messageCountIsExact,markedMsgCount:n.markedMsgCount,collapsed:n.collapsed,latest:n.end,initialLastRead:n.initialLastRead,totalUnreadCount:this.props.totalUnreadCount,markChannelLastRead:this.markChannelLastRead,showNewerMessages:this.showNewerMessages,toggleCollapse:this.toggleCollapse,selected:Object(fo.a)(s,n.channelId),clogLinkClick:this.props.clogLinkClick});case"message":return o.a.createElement(jh,{channelId:n.channelId,ts:n.ts,prevTs:n.prevTs,actionsPosition:n.isFirstMessage?"default":void 0,onBackgroundClick:this.handleMessageBackgroundClick,focused:t,renderActionsOffscreen:this.state.hasKeyboardFocus,theme:this.props.theme,rollup:n.rollup,parentId:a});case"loading":return this.props.featureOfflineMode&&this.props.isOffline?o.a.createElement(wp,null):o.a.createElement(Eh,null);case"day-divider":{const e=+n.dayTs;return o.a.createElement(o.a.Fragment,null,o.a.createElement(kp,{date:e}),o.a.createElement(Ep,{date:e,isUnread:n.unread}))}case"unread-divider":return o.a.createElement(Op,null);case"show-newer":return o.a.createElement(show_newer_button_ShowNewerButton,{count:n.count,channelId:n.channelId,showNewerMessages:this.showNewerMessages});case"spacer":return o.a.createElement("div",{className:d()("p-unreads_view__spacer",{"p-unreads_view__spacer--bottom":!!n.isBottom})});case"footer":return o.a.createElement(Oh,{markAllRead:this.markAllRead});default:return this.props.logger.error("Unhandled row type:",n.type),n.type}}fetchPost(){const e=Object(Hu.a)(this.rows);if(!e)return;if("loading"!==e.type)return;if(this.loading)return;this.loading=!0;const t=e.channelId,a=e.oldest;this.props.logger.info("fetchPost",t,a),this.props.fetchHistory({channelId:t,oldest:a,reason:"unreads-view/fetchPost"}).then(({msgs:e,hasMore:n,deleted:s})=>{this.props.addMessagesFromHistory({channelId:t,oldest:a,msgs:e,hasMore:n,deleted:s})}).finally(()=>{this.loading=!1})}render(){var e=this.props;const t=e.allUnreadsSortOrder,a=e.frames,n=e.currentUserId,s=e.featureOfflineMode,r=e.isOffline;var i=function(e,t){const a=[],n=[],s=[];let r=!0;return Object(Rp.a)(e,e=>{const i=e.channelId,o=e.channelType,l=e.start,c=e.end,d=e.timestamps,u=e.sliceEnd,p=e.reachedEnd,h=e.messages,m=e.lastRead,b=e.initialLastRead,f=e.markedMsgCount,_=e.collapsed,g=d.filter(e=>{const a=h[e];return!(Object($e.fb)(a)||Object($e.ib)(a)&&!Object($e.hb)(a,t)||Object($e.sb)(a))}),y=g.filter(e=>e>l&&e<=c),O=g.filter(e=>e>c),C=y.length&&!_,v=y&&y[0]&&!Object(Mp.a)(y[0]),E=m>l&&Object(qu.a)(y,e=>{const a=h[e];return Object($e.kb)(a,m,t)});if(a.push(`header-${i}`),s.push({key:`header-${i}`,index:n.length}),n.push({type:"header",channelId:i,channelType:o,end:c,initialLastRead:b,markedMsgCount:f,messageCount:y.length,messageCountAfterLatest:O.length,messageCountIsExact:p,collapsed:_}),C&&!v&&(a.push(`spacer-top-${i}`),n.push({type:"spacer"})),C){const e=y.map(e=>h[e]),t=Object(Pp.a)(e).rollups;y.forEach((e,s)=>{const r=y[s-1],o=e===E,l=r&&Xu(r),c=Xu(e);v&&l!==c?(a.push(`day-divider-${i}-${c}`),n.push({type:"day-divider",dayTs:c,unread:o})):o&&(a.push(`unread-divider-${i}`),n.push({type:"unread-divider"})),a.push(`message-${i}-${e}`),n.push({type:"message",channelId:i,ts:e,prevTs:r,isFirstMessage:0===s,rollup:t[e]})})}if(!p&&!_){const e=u||l;return a.push(`loading-${i}-${e}`),n.push({type:"loading",channelId:i,oldest:e}),r=!1,!1}return C&&(O.length?(a.push(`show-newer-${i}`),n.push({type:"show-newer",channelId:i,count:O.length})):(a.push(`spacer-bottom-${i}`),n.push({type:"spacer",isBottom:!0}))),!0}),r&&(a.push("footer"),n.push({type:"footer"})),{keys:a,rows:n,stickyItems:s}}(a,n);const l=i.keys,c=i.rows,d=i.stickyItems,u=!Object(Bu.a)(c,e=>"message"===e.type);if(s&&r&&u)return o.a.createElement(ku,null);const p=this.keys;this.rows=c,this.keys=l;const h=[{keys:["r"],handler:this.onMarkReadKeyCommandWithR,filter:this.shouldIgnoreKeyEvent},{keys:["esc"],handler:this.onMarkReadKeyCommand,filter:this.shouldIgnoreKeyEvent},{keys:["left"],handler:this.onLeftKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["right"],handler:this.onRightKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pageup"],handler:this.onPreviousChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pagedown"],handler:this.onNextChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent}];let m;m="alphabetical"===t?kh.t("All Unreads, sorted alphabetically"):"priority"===t?kh.t("All Unreads, sorted scientifically"):"newest"===t?kh.t("All Unreads, sorted by newest channel"):kh.t("All Unreads, sorted by oldest channel");const b=this.determineKeyToFocus(p,this.keys),f=o.a.createElement(pr.a,null,({width:e,height:t})=>o.a.createElement(sticky_list_StickyList,{id:"unreads_view",ref:this.list,layout:this.layout,width:e,height:t,keys:l,rowRenderer:this.renderRow,isFocusableItem:this.isFocusableItem,loadAround:this.fetchPost,loadPost:this.fetchPost,stickyItems:d,stickyZIndex:202,keyCommands:h,activeItem:b,getPropsForItem:this.getPropsForItem,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,useAriaApplicationMode:this.props.featureAriaApplicationMode,"aria-label":m,onItemTabWithin:this.onItemTabWithin,onScroll:this.onListScrolledDebounce}));return Object(re.a)()?f:o.a.createElement(Sp.a,{component:this,order:.2},f)}}unreads_list_UnreadsList.displayName="UnreadsList",unreads_list_UnreadsList.propTypes=Ih,unreads_list_UnreadsList.defaultProps=wh;const Th={fetchHistory:(...e)=>Object(Ct.b)(...e),addMessagesFromHistory:(...e)=>Object(bt.a)(...e),setUnreadPoint:(...e)=>Object(wi.setUnreadPoint)(...e),expandChannel:(...e)=>sp(...e),collapseChannel:(...e)=>rp(...e),makeMessageSummary:(...e)=>Zu(...e),makeHeaderLabel:(...e)=>Fp(...e),showThreadIfThreadable:(...e)=>Object(Gu.m)(...e),setFocusRequestedThreadKey:(...e)=>Object(ho.c)(...e)},Nh=Object(re.a)()?Object(H.a)(unreads_list_UnreadsList,"UnreadsList",{index:0}):unreads_list_UnreadsList;var Ah=Object(u.b)(function(e,t){const a=Object(Ot.a)({label:Sh,state:e}),n=Object(ie.a)({state:e}),r=Object(Wu.a)(e),i=Object(ba.j)(e),o=t.frames.map(t=>{const a=Object(B.e)(e,t.channelId),n=Object(q.D)(a),r=Object(ze.h)(e,a.id),o=Object(q.F)(a,r.timestamps),l=Object(ze.h)(e,a.id,t.start),c=l.timestamps,d=l.end,u=!!l.reachedEnd,p=Object(ae.b)(e,a.id),h=i.includes(t.channelId),m=Object(q.ob)(a);return s()({},t,{lastRead:n,latest:o,timestamps:c,sliceEnd:d,reachedEnd:u,messages:p,collapsed:h,isMember:m})});return{logger:a,clogger:n,teamId:Object(h.b)(e),theme:r,frames:o,currentUserId:Object(m.d)(e),featureAriaApplicationMode:Object(m.m)(e,"feature_aria_application_mode"),allUnreadsSortOrder:_o(e),focusRequestedThreadKey:po(e),userAttentionIsOnChat:Object(wu.e)(e),featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),isOffline:!Object(pa.c)(e),composerVisible:(Object(rt.a)(e)||"composer_toolbar"===Object(ha.c)(e,"composer_toolbar"))&&Object(Tp.b)(e),impressionLoggingWebGroup:Object(ha.c)(e,"impression_logging_web")}},Th,null,{withRef:!0})(Nh),Rh=a("Yk7g"),Mh=a("1myf"),Ph=a("pHS2"),xh=a("dYt1");function Lh(e){var t=qh(e);const a=t.publicChannels,n=t.privateChannels,s=t.ims,r=t.mpims;return function(e){var t=function(e){const t=Object(Ph.a)(e,e=>e.unreadHighlightCnt>0),a=t.true||[],n=t.false||[];return{hasMentions:a,noMentions:n}}(e);const a=t.hasMentions,n=t.noMentions;return Bh(a).concat(Bh(n))}(a.concat(n)).concat(Bh(s)).concat(Bh(r))}function Fh(e){var t=qh(e);const a=t.publicChannels,n=t.privateChannels,s=t.ims,r=t.mpims,i=Dh(a.concat(n)),o=Dh(s),l=Dh(r);return i.concat(o).concat(l)}function Dh(e){return Object(xh.a)(e).sort((e,t)=>Object(x.r)(e.displayName,t.displayName))}function Bh(e){return Object(xh.a)(e).sort((e,t)=>e.priority===t.priority?Object(x.r)(e.displayName,t.displayName):t.priority-e.priority)}function Uh(e){const t=Object(Ph.a)(e,"isStarred");return{starred:t.true||[],notStarred:t.false||[]}}function qh(e){const t=Object(Ph.a)(e,"channelType");return{publicChannels:t.channel||[],privateChannels:t.private||[],ims:t.im||[],mpims:t.mpim||[]}}var Hh=function({channels:e,allUnreadsSortOrder:t,currentUserId:a}){return"oldest"===t?function(e,t){const a=Object(kt.a)(e=>{const a=e.lastRead,n=e.messages,s=e.oldestSliceTimestamps,r=e.createdTime;let i=!1;const o=Object(qu.a)(s,e=>{if(e<=a)return!1;const s=n[e];return s?Object($e.kb)(s,a,t):(i=!0,!1)});return o&&!i?o:"0000000000.000000"===a?`${r}.000000`:a});return Object(Mh.a)(e,a)}(e,a):"priority"===t?function(e){var t=Uh(e);const a=t.starred,n=t.notStarred;return Lh(a).concat(Lh(n))}(e):"newest"===t?function(e){return Object(Rh.a)(Object(Mh.a)(e,"latest"))}(e):function(e){var t=Uh(e);const a=t.starred,n=t.notStarred;return Fh(a).concat(Fh(n))}(e)};l.default.number.isRequired,l.default.func.isRequired,l.default.func.isRequired;class new_messages_updater_NewMessagesUpdater extends i.Component{constructor(e){super(e),Object(la.a)(this,["refreshFromKeyPress"])}componentDidMount(){this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}componentDidUpdate(e){e.newUnreadMsgCount!==this.props.newUnreadMsgCount&&this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}componentWillUnmount(){this.props.setNewUnreadMsgCount(0)}refreshFromKeyPress(){this.props.newUnreadMsgCount>0&&this.props.refreshAllUnreads()}render(){return null}}new_messages_updater_NewMessagesUpdater.displayName="NewMessagesUpdater";var Wh=Object(u.b)(function(e,t){const a=t.frames.map(e=>e.channelId),n=Lu(e).countsPerChannel,s=Object(_n.a)(n,(e,t)=>!a.includes(t));return{newUnreadMsgCount:Object(oo.a)(Object(ht.a)(s,"unreadCnt"))}})(new_messages_updater_NewMessagesUpdater);a("oq3d");const Gh=new x.b("all_unreads"),Kh="UNREADS-VIEW",Vh={channels:l.default.arrayOf(l.default.shape({id:l.default.string.isRequired,lastRead:l.default.string.isRequired,latest:l.default.string.isRequired,displayName:l.default.string.isRequired,channelType:l.default.string.isRequired,isStarred:l.default.bool.isRequired,priority:l.default.number.isRequired,unreadHighlightCnt:l.default.number.isRequired,messages:l.default.object.isRequired,oldestSliceTimestamps:l.default.arrayOf(l.default.string).isRequired,createdTime:l.default.number.isRequired})).isRequired,logger:l.default.object.isRequired,clogger:l.default.object,allUnreadsSortOrder:l.default.string.isRequired,currentUserId:l.default.string.isRequired,refreshId:l.default.number.isRequired,totalUnreadCount:l.default.number.isRequired,unreadChannelsAreKnown:l.default.bool.isRequired,featureOfflineMode:l.default.bool.isRequired,isOffline:l.default.bool.isRequired,isIAPhase1Enabled:l.default.bool.isRequired,clientTheme:l.default.oneOf(["light","dark"]),markLastRead:l.default.func.isRequired,setNewUnreadMsgCount:l.default.func.isRequired},zh={clogger:{track:r.a,error:r.a},clientTheme:"light"};class unreads_view_UnreadsView extends Su.a{constructor(e){super(e),Object(la.a)(this,["showNewerMessages","markChannelLastRead","markAllRead","undoMarkAllRead","refreshAllUnreads","removeFrames","clogUnreadsEvent"]),this.state=this.computeInitialState(),this.unreadsEventSeqId=0,this.initializedTime=Date.now(),this.listRef=o.a.createRef()}componentDidMount(){this.clogUnreadsEvent({event:"UNREADS_OPEN",metadata:{is_iap1:this.props.isIAPhase1Enabled}}),this.incrementTrackingSeqId()}componentDidUpdate(e){(e.allUnreadsSortOrder!==this.props.allUnreadsSortOrder||e.refreshId<this.props.refreshId||!e.unreadChannelsAreKnown&&this.props.unreadChannelsAreKnown)&&this.refreshAllUnreads()}componentDidCatch(e){this.setState(()=>({errored:!0})),this.props.logger.error("Unreads view componentDidCatch","unreads_view_did_catch",e)}componentWillUnmount(){const e={unreads_event_seq_id:this.unreadsEventSeqId,unreads_elapsed_time:Date.now()-this.initializedTime};this.clogUnreadsEvent({event:"UNREADS_CLOSE",metadata:e})}incrementTrackingSeqId(){this.unreadsEventSeqId+=1}clogUnreadsEvent({event:e,metadata:t}){this.props.clogger.track(e,s()({is_unreads_view:1},t))}computeInitialState(){var e=this.props;const t=e.channels,a=e.allUnreadsSortOrder,n=e.currentUserId;return{frames:Hh({channels:t,allUnreadsSortOrder:a,currentUserId:n}).map(({id:e,lastRead:t,latest:a,channelType:n})=>({channelId:e,start:t,end:a,initialLastRead:t,markedMsgCount:0,channelType:n||""})),markedChannels:[],errored:!1}}showNewerMessages(e,t,a=!1){this.setState(n=>{return{frames:n.frames.map(n=>n.channelId!==e?n:s()({},n,{initialLastRead:a||n.initialLastRead,start:a||n.start,end:t}))}})}markChannelLastRead(e,t,a=0){this.props.logger.info(`Marking ${e} to ${t}`),this.props.markLastRead({id:e,ts:t,immediate:!0,reason:"unreads-view/markChannelLastRead"}),this.setState(n=>{return{frames:n.frames.map(n=>n.channelId!==e?n:s()({},n,{start:t,markedMsgCount:a})),markedChannels:[e]}})}markAllRead(e){this.props.logger.info(`Marking all: ${JSON.stringify(e)}`),this.props.markManyLastRead({markers:e,reason:"unreads-view/markAllRead"});const t={unread_count:this.props.totalUnreadCount};this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_READ",metadata:t}),this.setState(t=>{const a=t.frames.map(e=>s()({},e,{start:e.end}));return s()({},t,{frames:a,markedChannels:Object(lo.a)(e)})})}undoMarkAllRead(){this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_UNREAD",metadata:{}}),this.setState((e,t)=>{const a=e.frames.map(t=>e.markedChannels.includes(t.channelId)?s()({},t,{start:t.initialLastRead}):t),n={};return a.forEach(t=>{e.markedChannels.includes(t.channelId)&&(t.initialLastRead>=t.end||(n[t.channelId]=t.initialLastRead))}),t.logger.info(`Undoing mark all: ${JSON.stringify(n)}`),t.markManyLastRead({markers:n,reason:"unreads-view/undoMarkAllRead"}),s()({},e,{frames:a,markedChannels:[]})})}refreshAllUnreads(){this.props.logger.info("Refreshing"),this.setState(()=>this.computeInitialState(),()=>{this.listRef&&this.listRef.current&&this.listRef.current.getWrappedInstance()&&this.listRef.current.getWrappedInstance().scrollToTop()}),this.props.setNewUnreadMsgCount(0)}removeFrames(e){this.setState(t=>s()({},t,{frames:t.frames.filter(t=>!e.includes(t.channelId))}))}renderTopBanners(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"p-unreads_view__top_banners"},o.a.createElement(vo,null),o.a.createElement(Eo.a,null,o.a.createElement(Bo,null))),o.a.createElement(Cu,null))}render(){if(!this.props.unreadChannelsAreKnown){var e=this.props;const t=e.featureOfflineMode,a=e.isOffline;return o.a.createElement(o.a.Fragment,null,this.renderTopBanners(),t&&a?o.a.createElement(ku,null):o.a.createElement(qo,{clientTheme:this.props.clientTheme}))}var t=this.state;const a=t.markedChannels;if(t.errored)return o.a.createElement("div",{className:"p-unreads_view"},this.renderTopBanners(),o.a.createElement(Vo,{tryAgain:this.refreshAllUnreads,"data-qa":"unreads_view_error"},Gh.t("Something\u2019s fishy! Slack can\u2019t seem to load your unread messages.")," ",o.a.createElement("br",null),Gh.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,({text:e})=>o.a.createElement(Ze.a,{href:"https://slack.com/help/contact"},e))));const n=o.a.createElement(Wh,{frames:this.state.frames,setNewUnreadMsgCount:this.props.setNewUnreadMsgCount,refreshAllUnreads:this.refreshAllUnreads}),s=!this.state.frames.some(e=>e.start<e.end),r=o.a.createElement(Du,{visible:s,showUndo:!Object(io.a)(a),undoMarkAllRead:this.undoMarkAllRead,refreshAllUnreads:this.refreshAllUnreads}),l=o.a.createElement(zo.a,{id:Ln.I.UNREAD_VIEW},o.a.createElement("div",{className:"p-unreads_view"},o.a.createElement(Ah,{ref:this.listRef,frames:this.state.frames,showNewerMessages:this.showNewerMessages,markChannelLastRead:this.markChannelLastRead,markAllRead:this.markAllRead,removeFrames:this.removeFrames,totalUnreadCount:this.props.totalUnreadCount,clogLinkClick:this.clogUnreadsEvent})));return o.a.createElement(i.Fragment,null,this.renderTopBanners(),r,!s&&l,!s&&n)}}unreads_view_UnreadsView.displayName="UnreadsView",unreads_view_UnreadsView.propTypes=Vh,unreads_view_UnreadsView.defaultProps=zh;const $h={markLastRead:(...e)=>Object(mo.a)(...e),markManyLastRead:(...e)=>Object(mo.b)(...e),setNewUnreadMsgCount:(...e)=>Object(ho.d)(...e)};var Yh=Object(u.b)(function(e){const t=Object(Ot.a)({label:Kh,state:e}),a=Object(ie.a)({state:e});var n=Lu(e);const s=n.countsPerChannel,r=n.unreadChannelIds,i=n.unreadChannelsAreKnown,o=Object(oo.a)(Object(ht.a)(s,"unreadCnt")),l=Object(M.c)(e);return{logger:t,clogger:a,channels:r.map(t=>Object(B.e)(e,t)).map(t=>{const a=Object(q.D)(t),n=Object(ze.h)(e,t.id);let r=Object(q.F)(t,n.timestamps);r&&"0000000000.000000"!==r||(r=`${Math.floor(Date.now()/1e3)}.000000`);const i=Object(ze.h)(e,t.id,a),o=Object(ae.b)(e,t.id)||{};return{id:t.id,lastRead:a,latest:r,displayName:Object(q.x)(e,t,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),channelType:Object(q.v)(t),isStarred:Object(q.Jb)(t)||!1,priority:Object(q.Q)(t)||0,unreadHighlightCnt:s[t.id].unreadHighlightCnt||0,messages:o,oldestSliceTimestamps:i&&i.timestamps||[],createdTime:Object(q.q)(t)}}),clientTheme:l,allUnreadsSortOrder:_o(e),currentUserId:Object(m.d)(e),refreshId:uo(e),totalUnreadCount:o,unreadChannelsAreKnown:i,featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),isOffline:!Object(pa.c)(e),isIAPhase1Enabled:Object(bo.c)(e)}},$h)(unreads_view_UnreadsView),Qh=a("llxT");const Xh=new x.b("all_unreads"),Jh=(l.default.number,l.default.func,{newUnreadMsgCount:0,incrementRefreshId:r.a});class refresh_unread_messages_button_RefreshUnreadMessagesButton extends i.Component{constructor(e){super(e),this.refreshMessages=this.refreshMessages.bind(this)}refreshMessages(){this.props.incrementRefreshId()}render(){const e=this.props.newUnreadMsgCount;if(e<1)return null;const t=Xh.t("{newUnreadMsgCount, plural, =1 {# new message} other {# new messages}}",{newUnreadMsgCount:e});return o.a.createElement("div",{className:"p-classic_nav__channel_header__refresh_button"},o.a.createElement(_e.d,{type:"outline",onClick:this.refreshMessages},o.a.createElement(bn.b,{inline:!0,size:"inherit",type:"sync",className:"p-classic_nav__channel_header__refresh_button_icon"}),t))}}refresh_unread_messages_button_RefreshUnreadMessagesButton.displayName="RefreshUnreadMessagesButton",refresh_unread_messages_button_RefreshUnreadMessagesButton.defaultProps=Jh;const Zh={incrementRefreshId:(...e)=>Object(ho.a)(...e)};var em=Object(u.b)(e=>({newUnreadMsgCount:co(e)}),Zh)(refresh_unread_messages_button_RefreshUnreadMessagesButton);l.default.oneOf(["main","name","info"]).isRequired,l.default.string,l.default.bool;const tm={className:void 0,flex:!1};function am(e){let t=e.regionId,a=e.className,n=e.flex,r=fp()(e,["regionId","className","flex"]);if(Object(re.a)())return null;const i=d()(a,{"p-classic_nav__page_header__legacy_drag_region":!0,flex_one:n,channel_header_drag_region:!0});return o.a.createElement("div",s()({},r,{className:i,"data-region":t}))}am.displayName="LegacyPageHeaderDragRegion",am.defaultProps=tm;var nm=am;a("tFl5");const sm=new x.b("all_unreads"),rm=(l.default.string,l.default.string.isRequired,l.default.bool.isRequired,l.default.func.isRequired,{className:void 0});class all_unreads_header_AllUnreadsHeader extends i.Component{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this)}onSortSelected(e){this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:e})}renderMenu(e){const t=this.props.teamIsPaid,a=(e,a)=>t||"priority"!==e?o.a.createElement(fn.b,{key:e,label:a,onSelected:()=>this.onSortSelected(e)}):null,n=[{value:"alphabetical",label:sm.t("Alphabetically")},{value:"priority",label:sm.t("Scientifically")},{value:"newest",label:sm.t("Newest")},{value:"oldest",label:sm.t("Oldest")}],s=sm.t("Sort...");return o.a.createElement(fn.f,e,o.a.createElement(fn.c,{label:s}),n.map(({value:e,label:t})=>a(e,t)))}renderSortingMenuTrigger(){const e=this.props.allUnreadsSortOrder;let t="";return t="alphabetical"===e?sm.t("Sorted alphabetically"):"priority"===e?sm.t("Sorted scientifically"):"newest"===e?sm.t("Sorted by newest channel"):sm.t("Sorted by oldest channel"),o.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},o.a.createElement(fn.e,{renderMenu:this.renderMenu,position:"bottom-left"},o.a.createElement(Qh.a,null,o.a.createElement("span",null,t),o.a.createElement(bn.b,{type:"chevron-down",className:"align_top"}))))}render(){const e=this.props.className,t=d()("p-classic_nav__channel_header__title","p-classic_nav__no_drag"),a=d()(e,{"p-classic_nav__channel_header__all_unreads_wrapper":!Object(re.a)()}),n=sm.t("All Unreads options",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c",note:"Label for the Channel Header as a section. Not visible on screen as it is only for customers using screen readers."});return o.a.createElement("div",{className:a,role:"group","aria-label":n},o.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},o.a.createElement("div",{"aria-hidden":"true",className:t},sm.t("All Unreads")),this.renderSortingMenuTrigger()),o.a.createElement(nm,{flex:!0,regionId:"main"}),o.a.createElement(em,null))}}all_unreads_header_AllUnreadsHeader.displayName="AllUnreadsHeader",all_unreads_header_AllUnreadsHeader.defaultProps=rm;const im={setUserPrefByApi:(...e)=>Object(Ka.f)(...e)};var om=Object(u.b)(e=>({allUnreadsSortOrder:_o(e),teamIsPaid:Object(xe.D)(Object(Se.d)(e))}),im)(all_unreads_header_AllUnreadsHeader),lm=a("9oTK"),cm=a("kLJo"),dm=a("sDWr"),um=a("wCpp"),pm=a("oLrU");function hm(e){return ne(e,{canPostInChannel:te.p,canPostInThread:te.q}).filter(e=>Object(J.p)(e)).length>=Ln.D}const mm=new x.b("drafts");l.default.bool;function bm({featureComposeFlow:e}){return e?o.a.createElement(Ba.b,null,mm.t("You have reached the maximum number of drafts (Copy TBD)")):null}bm.displayName="DraftLimitToast",bm.defaultProps={featureComposeFlow:!1};var fm=Object(u.b)(function(e){return{featureComposeFlow:Object(C.g)(e)}})(bm);const _m=Object(mt.b)("Create a new composer draft",(e,t)=>{const a=t();if(hm(a))return e(Object(_a.c)({element:o.a.createElement(fm)})),Object(Ot.a)({state:a}).info("Failed to create composer draft (max_num_drafts)"),Promise.reject(new Error("max_num_drafts"));const n=Object(pm.a)();return e(Object(Oa.f)({id:n,is_from_composer:!0})),Promise.resolve(n)});_m.meta={name:"createComposerDraft",key:"draftsStoreThunksCreateComposerDraftCreateComposerDraft",description:"Create a new composer draft"},_m.propTypes=null;var gm=_m;const ym=Object(mt.b)("Opens the composer page",(Om=Object(lm.coroutine)(function*(e,t,{draftId:a}={}){const n=Object(Ot.a)({getState:t,label:"COMPOSER"});let s;if(a)s=a;else try{s=yield Object(lm.resolve)(e(gm())),n.info(`Creating a new composer draft ${s}`)}catch(r){return}n.info(`Opening the composer page to the following draft ${s}`),Object(cm.g)(dm.a,{entityId:"composer",draftId:Object(um.b)(s)})}),function(e,t,a){return Om.apply(this,arguments)}));var Om;ym.meta={name:"openComposerPage",key:"actionsOpenComposerPageOpenComposerPage",description:"Opens the composer page"},ym.propTypes={draftId:l.default.string};var Cm=a("+6YQ");const vm=new x.b("drafts"),Em=(l.default.string,l.default.bool,l.default.number,l.default.func.isRequired,l.default.bool,{className:void 0,featureComposeFlow:!1,numDrafts:0,isIAP1Enabled:!1});class drafts_header_DraftsHeader extends i.Component{render(){var e=this.props;const t=e.className,a=e.featureComposeFlow,n=e.numDrafts,s=e.isIAP1Enabled;return a?s?o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"p-ia__view_header__title"},vm.t("Drafts"),o.a.createElement("div",{className:"p-ia__view_header__subtitle"},vm.t("{count, plural, =0 {No drafts} =1 {# draft} other {# drafts}}",{count:n}))),o.a.createElement("div",{className:"p-ia__view_header__spacer"}),o.a.createElement(Cm.b,{onClick:()=>this.props.openComposerPage()},"New message")):o.a.createElement("div",{className:t},o.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},o.a.createElement("div",{className:"p-classic_nav__channel_header__title p-classic_nav__no_drag"},vm.t("Drafts"))),o.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},vm.t("{count, plural, =0 {No drafts} =1 {# draft} other {# drafts}}",{count:n}))):null}}drafts_header_DraftsHeader.displayName="DraftsHeader",drafts_header_DraftsHeader.defaultProps=Em;const km={openComposerPage:(...e)=>ym(...e)};var Sm=Object(u.b)(function(e){const t=ne(e,{includeAllTeams:!0});return{featureComposeFlow:Object(C.g)(e),numDrafts:Object(Hc.a)(t),isIAP1Enabled:Object(bo.c)(e)}},km)(drafts_header_DraftsHeader);const jm=new x.b("drafts"),Im=(l.default.string,l.default.bool,{className:void 0,featureComposeFlow:!1});function wm({className:e,featureComposeFlow:t}){return t?o.a.createElement("div",{className:e},o.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},o.a.createElement("div",{className:"p-classic_nav__channel_header__title p-classic_nav__no_drag"},jm.t("New message"))),o.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle p-composer_page__header_subtitle",id:"p-composer_page__header_subtitle"})):null}wm.displayName="ComposerHeader",wm.defaultProps=Im;var Tm=Object(u.b)(function(e){return{featureComposeFlow:Object(C.g)(e)}})(wm),Nm=a("1VmY"),Am=a("GlmH");a("CSrb");const Rm=new x.b("welcome_place");class dismiss_welcome_place_dialog_DismissWelcomePlaceDialog extends i.Component{constructor(){super(...arguments),this.isDismissClicked=!1,this.clickDismiss=(()=>{this.isDismissClicked=!0,this.props.dismissWelcomePlace(),this.props.closeModal(),this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.CLICK,ui_element:de.UiElement.WELCOME_PLACE_DISMISS_MODAL_SUBMIT,ui_properties:{element_type:de.ElementType.BUTTON}},welcome_place:{welcome_session_id:this.getWelcomeSessionId()}}})}),this.hideModal=(()=>{this.props.closeModal(),this.isDismissClicked||this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.CLICK,ui_element:de.UiElement.WELCOME_PLACE_DISMISS_MODAL_HIDE},welcome_place:{welcome_session_id:this.getWelcomeSessionId()}}})})}getWelcomeSessionId(){return this.props.isOnWelcomePlacePage?this.props.pageViewingSessionId:null}render(){return o.a.createElement(Nm.a,{title:Rm.t("Remove the Get Started page?"),submitButtonText:Rm.t("Remove",{note:"Primary call-to-action (button copy) on the \u201cRemove the Get Started page\u201d dialog. Implied direct object is the \u201cGet Started page.\u201d"}),cancelButtonText:Rm.t("Cancel",{note:"Secondary call-to-action (button copy) that allows the user to close the modal."}),submitButtonType:"primary",onSubmit:this.clickDismiss,onCancel:this.hideModal,onClose:this.props.closeModal},o.a.createElement("div",{className:"welcome-place-dismiss-dialog__body"},Rm.rt("If you're all set, you can remove this page permanently. If you need help later, head to our <a1>Help Center</a1>, or reach out to us at <a2>feedback@slack.com</a2>.",{note:"Body copy of the \u201cRemove the Get Started page\u201d dialog. Explains permanence of the primary action and provides alternate paths for help (Help Center link and clickable email address to support team)."},({tag:e,text:t})=>"a1"===e?o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:`https://get.slack.help/hc/${Object(x.s)()}`},t):"a2"===e?o.a.createElement("a",{href:"mailto:feedback@slack.com"},t):null)))}}dismiss_welcome_place_dialog_DismissWelcomePlaceDialog.displayName="DismissWelcomePlaceDialog";const Mm={closeModal:ga.a,dismissWelcomePlace:le.c};var Pm=Object(u.b)(function(e){return{clogger:Object(ie.a)({state:e}),pageViewingSessionId:Object(oe.i)(e),isOnWelcomePlacePage:Object(Am.a)(e)}},Mm)(dismiss_welcome_place_dialog_DismissWelcomePlaceDialog);a("9pzU");const xm=new x.b("welcome_place");class welcome_place_page_header_WelcomePlacePageHeader extends i.Component{render(){const e=this.props.className,t=xm.t("Get Started",{note:"The label for the Welcome place, both for the title of the page in the header and for the sidebar affordance. Conveys the purpose of the page (a place with learning/action modules to help you start using Slack)."}),a=xm.t("A few essential steps to help you get going with Slack",{note:"The subtitle for the page that lets the reader know the purpose and what to expect from the page contents. Note: there should be no punctuation at the end."});return o.a.createElement("div",{className:d()(e,"welcome-place-page-header")},o.a.createElement("div",{className:"p-classic_nav__channel_header__title"},t),o.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle overflow_ellipsis"},a))}}welcome_place_page_header_WelcomePlacePageHeader.displayName="WelcomePlacePageHeader";var Lm=Object(u.b)(function(){return{}})(welcome_place_page_header_WelcomePlacePageHeader);const Fm=Object(mt.b)("Completes joiner onboarding",(()=>{var e=Object(lm.method)(function(e){e(Object(fa.b)(!1)),e(Object(fa.c)(!1)),e(Object(Ka.e)({onboarding_complete:!0,seen_welcome_2:!0}))});return function(t){return e.apply(this,arguments)}})());Fm.meta={name:"completeJoinerOnboarding",key:"onboardingStoreThunksCompleteJoinerOnboardingCompleteJoinerOnboarding",description:"Completes joiner onboarding"};a("9Oym");const Dm=new x.b("welcome_place"),Bm=e=>{const t={[he.d.SendMessage]:Dm.t("Send a message"),[he.d.JoinChannel]:Dm.t("Join a few channels"),[he.d.EnableNotifications]:Dm.t("Turn on notifications"),[he.d.DownloadDesktopApp]:Dm.t("Get the Slack app"),[he.d.AddAppFileManagement]:Dm.t("Connect your tools")};return e?t[e]:""};class sidebar_link_content_SidebarLinkContent extends i.Component{componentDidMount(){var e=this.props;const t=e.startWorkflow,a=e.isOnboarding,n=e.completeOnboarding;t(),a&&n()}render(){var e=this.props;const t=e.name;var a=e.progress;const n=a.total,s=a.completed,r=a.nextTaskType,i=e.isAnimating,l=Math.round(s/n*100);let c;c=0===s?Dm.t("First:"):s===n-1?Dm.t("Finally:"):Dm.t("Next:");const u=Dm.t("All done."),p=s===n?u:`${c} ${Bm(r)}`.trim();return o.a.createElement("div",{className:"display_flex flex_direction_column full_width p-welcome-place__sidebar_content"},o.a.createElement("div",{className:"margin_bottom_25 p-welcome-place__sidebar_content__title"},t),o.a.createElement("div",{className:"p-welcome-place__sidebar_content__link_progress"},o.a.createElement("div",{className:"p-welcome-place__sidebar_content__link_progress_inner",style:{width:`${l}%`}})),o.a.createElement("div",{title:p,className:"p-welcome-place__sidebar_content__link_caption overflow_ellipsis"},p||" "),o.a.createElement("div",{className:d()("p-welcome-place__sidebar_content__gradient",{"p-welcome-place__sidebar_content__gradient--animating":i})}))}}sidebar_link_content_SidebarLinkContent.displayName="SidebarLinkContent";var Um=Object(u.b)(function(e){return{progress:Object(oe.m)(e),isAnimating:Object(oe.a)(e),isOnboarding:!!Object(ua.e)(e)}},function(e){return{startWorkflow:()=>e(Object(le.e)()),completeOnboarding:()=>{e(Fm())}}})(sidebar_link_content_SidebarLinkContent),qm=a("za+y"),Hm=a("D6w7"),Wm=a("KdfD"),Gm=a("2cus");const Km=Object(mt.b)("Clogs paid-benefits page and corresponding sidebar link",(e,t,{action:a,step:n,elementType:s,elementName:r,isPrimaryCTA:i=!1}={})=>{const o=t(),l=Object(ie.a)({state:o}),c=Object(Gm.r)(o),d=Object(Gm.l)(o)===gr.g.standard.id;let u="";switch(c){case Gm.b.FREE_NO_TRIAL:u="free_no_trial";break;case Gm.b.IN_TRIAL:u=d?"standard_trial":"plus_trial";break;case Gm.b.FREE_EXPIRED_TRIAL:u=d?"standard_downgrade":"plus_downgrade";break;case Gm.b.PAID:u=d?"standard_upgraded":"plus_upgraded"}l.track(de.EventId.UPGRDEXP_BENEFITS,{contexts:{ui_context:{step:n,step_variant:u,action:a,ui_properties:{element_type:s,element_name:r},is_primary_cta:i}}})});Km.meta={name:"clogPaidBenefits",key:"actionsClogPaidBenefitsClogPaidBenefits",description:"Clogs paid-benefits page and corresponding sidebar link"},Km.propTypes={action:l.default.number.isRequired,step:l.default.number.isRequired,elementType:l.default.number.isRequired,elementName:l.default.string.isRequired,isPrimaryCTA:l.default.bool};var Vm=Km,zm=a("tqVr"),$m=a("hwN2"),Ym=a("HZFI");const Qm=Object(Ve.b)((e,{draftId:t}={})=>!!(e&&e.draftsExpansion&&e.draftsExpansion[t]));Qm.meta={name:"isDraftExpanded",key:"draftsExpansionStoreSelectorsIsDraftExpanded"},Qm.propTypes={draftId:l.default.string.isRequired};var Xm=function(e){if(!Object(C.g)(e))return;const t=Object(y.c)(e),a=t.entityId,n=t.draftId;return a&&Object(um.a)(n)},Jm=a("jHww");const Zm=Object(mt.b)("Navigate to the last known channel",(e,t,{reason:a,shouldReplaceState:n=!0}={})=>{const s=t(),r=Object(Jm.a)(s);Object(cm.g)(dm.a,{entityId:r},{reason:a,shouldReplaceState:n})});Zm.meta={name:"navigateToPrevChannel",key:"actionsNavigateToPrevChannelNavigateToPrevChannel",description:"Navigate to the last known channel"},Zm.propTypes={reason:l.default.string.isRequired,shouldReplaceState:l.default.bool};var eb=Zm,tb=a("VBRD"),ab=a("0rID"),nb=a("lCOO"),sb=a("1Oqo");var rb=a("VJ6R");function ib(e,t){if(!Object(J.l)(t))return null;const a=Object(J.c)(t);if(a&&1===a.length)return a[0];const n=Object(J.j)(t);if(!Object(io.a)(n)){if(1===n.length)return Object(B.l)(e,n[0]);const t=Object(m.d)(e),a=Object(ep.a)(n,t);if(1===a.length)return Object(B.l)(e,a[0]);const s=[...a,t],r=Object(B.n)(e,s);if(r)return r.id}return null}var ob=a("UHk2");const lb=2,cb=1e4;class HistoryRateLimiter{constructor({limit:e=lb,duration:t=cb}={}){this.historyRequests={},this.promise=null,this.requestLimit=e,this.initialDuration=t}reset(){this.historyRequests={},this.promise=null}logHistoryRequest({oldest:e,latest:t,now:a=Date.now(),promise:n}){const s=`${e}_${t}`;let r=this.historyRequests[s];r||(r={count:0,time:0,duration:this.initialDuration},this.historyRequests[s]=r),n&&(r.promise=n,n.finally(()=>{r.promise=null})),a-r.duration>r.time?(r.count>=this.requestLimit?r.duration=Math.min(2*r.duration,16e4):r.duration=this.initialDuration,r.count=1,r.time=a):r.count+=1}shouldPreventHistoryRequest({oldest:e,latest:t,now:a=Date.now()}){const n=this.historyRequests[`${e}_${t}`];return!!n&&(!(n.count<this.requestLimit)&&!(n.time<a-n.duration))}isRequestPending({oldest:e,latest:t}){const a=this.historyRequests[`${e}_${t}`];return!!a&&(a.promise&&a.promise.isPending())}}var db=a("F294");const ub=250,pb=(l.default.string,l.default.string,l.default.arrayOf(l.default.string).isRequired,l.default.func.isRequired,l.default.oneOfType([l.default.string,l.default.bool]),l.default.number,l.default.string,l.default.func,l.default.bool,l.default.bool,l.default.object,l.default.bool,l.default.func,{oldest:void 0,latest:void 0,startTs:!1,startTsOffset:0,highlightKey:void 0,requestHistory:r.a,reachedStart:!0,reachedEnd:!0,layout:void 0,isFileExpanding:!1,onVisibleRowsChanged:r.a});class generic_message_list_MessageList extends i.PureComponent{constructor(e){super(e),this.onScroll=this.onScroll.bind(this),this.setListRef=this.setListRef.bind(this),this.loadAround=this.loadAround.bind(this),this.loadPre=this.loadPre.bind(this),this.loadPost=this.loadPost.bind(this),this.focus=this.focus.bind(this),this.onListScrolled=this.onListScrolled.bind(this),this.debouncedOnListScrolled=Object(ip.a)(this.onListScrolled,150),this.list=null,this.layout=e.layout||new Cr.a,this.layout.setAnchor(e.startTs),e.startTsOffset&&(this.layout.anchorOffset=e.startTsOffset),this.layout.setStickToBottom(e.reachedEnd),this.state={isLoading:!1}}componentDidUpdate(e){!e.reachedEnd&&this.props.reachedEnd&&this.layout.setAnchor(!1),!!e.isFileExpanding&&!this.props.isFileExpanding?this.layout.setStickToBottom(!1):this.layout.setStickToBottom(this.props.reachedEnd),this.updateVisibleRows()}onListScrolled(){this.updateVisibleRows()}onScroll(){this.layout.setAnchor(!1),this.debouncedOnListScrolled()}getScrollmark(){if(!this.list)return null;const e=this.list.getScrollTop(),t=this.layout.shouldStickToBottom(e),a=this.props.timestamps,n=this.layout.findAnchor(a,a,e);return{mark:n,offset:this.layout.getTop(n)-e,stickToBottom:t}}setListRef(e){this.list=e}UNSAFE_componentWillReceiveProps(e){if(!this.list)throw new Error("MessageList needs a ref to List");(e.startTs!==this.props.startTs||e.highlightKey&&e.highlightKey!==this.props.highlightKey)&&(e.timestamps===this.props.timestamps?this.list.scrollToKey(e.startTs,{lazy:!0}):this.layout.setAnchor(e.startTs))}focus(){this.list&&this.list.focus()}loadAround(){if(this.state.isLoading)return!1;var e=this.props;const t=e.oldest,a=e.latest,n=e.reachedStart,s=e.reachedEnd,r=e.timestamps,i=e.startTs;if(s)return this.loadPre();if(n)return this.loadPost();const o=a||Object(db.a)(r)||i,l=t||Object(Hu.a)(r)||i,c=this.props.requestHistory({latest:o,oldest:l});return c&&(c.finally(()=>Promise.delay(ub)).then(()=>this.setState(()=>({isLoading:!1}))),this.setState(()=>({isLoading:"around"}))),c}loadPost(){if(this.state.isLoading)return!1;var e=this.props;const t=e.latest,a=e.reachedEnd,n=e.timestamps,s=e.startTs;if(a)return!1;this.isLoading=!0;const r=t||Object(Hu.a)(n)||s,i=this.props.requestHistory({oldest:r});return i&&(i.finally(()=>Promise.delay(ub)).then(()=>this.setState(()=>({isLoading:!1}))),this.setState(()=>({isLoading:"pre"}))),i}loadPre(){if(this.state.isLoading)return!1;var e=this.props;const t=e.oldest,a=e.reachedStart,n=e.timestamps,s=e.startTs;if(a)return!1;const r=t||Object(db.a)(n)||s,i=this.props.requestHistory({latest:r});return i&&(i.finally(()=>Promise.delay(ub)).then(()=>this.setState(()=>({isLoading:!1}))),this.setState(()=>({isLoading:"pre"}))),i}updateVisibleRows(){if(!this.list)return;var e=this.list.getVisibleRange(void 0,!1);const t=e.start,a=e.end;var n=this.list.getVisibleRange(void 0,!0);const s=n.start,r=n.end;this.props.onVisibleRowsChanged(this.props.timestamps.slice(t,a),this.props.timestamps.slice(s,r))}render(){var e=this.props;const t=e.reachedStart,a=e.reachedEnd,n=e.timestamps;return this.props.listRenderer({reachedStart:t,reachedEnd:a,keys:n,layout:this.layout,onScroll:this.onScroll,loadAround:this.loadAround,loadPre:this.loadPre,loadPost:this.loadPost,ref:this.setListRef})}}generic_message_list_MessageList.displayName="MessageList",generic_message_list_MessageList.defaultProps=pb;l.default.string,l.default.bool,l.default.bool;const hb={className:void 0,featureOfflineMode:!1,isOffline:!1};function mb({className:e,featureOfflineMode:t,isOffline:a}){return t&&a?o.a.createElement(wp,null):o.a.createElement("div",{className:d()(e,"c-message_list__spinner")},o.a.createElement(Kt.a,{size:"jumbo"}))}mb.displayName="MessageListEmptyLoader",mb.defaultProps=hb;var bb=Object(u.b)(function(e){return{featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),isOffline:!Object(pa.c)(e)}})(mb);l.default.string,l.default.oneOf(["light","dark"]),l.default.bool,l.default.bool,l.default.oneOf(["dense","light"]);const fb={className:void 0,clientTheme:"light",featureOfflineMode:!1,isOffline:!1,theme:"light"};function _b({className:e,clientTheme:t,featureOfflineMode:a,isOffline:n,theme:s}){return a&&n?o.a.createElement(wp,null):o.a.createElement("div",{className:d()(e,"c-message_list__placeholders",`c-message_list__placeholders--${s}`,`c-message_list__placeholders--client-theme-${t}`,{"c-message_list__placeholders--legacy":!Object(re.a)()})})}_b.displayName="MessageListInlineLoader",_b.defaultProps=fb;var gb=Object(u.b)(function(e){return{clientTheme:Object(M.c)(e),featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),isOffline:!Object(pa.c)(e),theme:Object(Wu.a)(e)}})(_b);a("2XjY");const yb=new x.b("messages"),Ob=20,Cb=s()({},sticky_list_StickyList.propTypes,{reachedStart:l.default.bool,reachedEnd:l.default.bool}),vb=s()({},sticky_list_StickyList.defaultProps,{reachedStart:!1,reachedEnd:!1});class degraded_list_DegradedList extends sticky_list_StickyList{constructor(e){super(e),this.pendingUpdate=null,this.recomputeOffsets(e),this.overscan=Math.max(200,e.height/2)}componentDidUpdate(...e){super.componentDidUpdate(...e),0===this.props.keys.length&&this.loadMore(),this.layout.setBottomMargin(this.getLoadingOffsetBottom()),this.pendingUpdate=!1}onKeyDownPageDown(e){this.state.hasKeyboardFocus&&this.isScrolledToBottom()&&this.props.reachedEnd?this.focusLastItemInView():super.onKeyDownPageDown(e)}onKeyUpPageDown(e){this.state.hasKeyboardFocus&&this.isScrolledToTop()&&this.props.reachedStart?this.focusFirstItemInView():super.onKeyUpPageDown(e)}getOffset(){const e=this.getLoadingOffsetTop();return this.startTop-e}getLoadingOffsetTop(){return this.props.keys.length?this.props.reachedStart&&0===this.state.start?0:this.layout.getTotalHeight()<=this.props.height?0:0!==this.state.start?96:56:0}getLoadingOffsetBottom(){return this.props.keys.length?this.props.reachedEnd&&this.state.end===this.props.keys.length?0:96:0}getScrollTop(){return"number"==typeof this.scrollTop?this.scrollTop:"number"==typeof this.pendingScrollTop?this.pendingScrollTop:super.getScrollTop()+this.getOffset()}getContentHeight(){return this.endBottom-this.getOffset()+this.getLoadingOffsetBottom()}getTop(e){return this.layout.getTop(e)-this.getOffset()}getBottom(e){return this.layout.getBottom(e)-this.getOffset()}setScrollTop(e){const t=e<this.getOffset(),a=e+this.props.height>this.endBottom+this.getLoadingOffsetBottom();if(t&&0!==this.state.start||a&&this.state.end!==this.props.keys.length)return this.scrollTop=e,void this.relayout();super.setScrollTop(e-this.getOffset())}scrollToOffset(e,{animate:t,absolute:a}={}){if(!this.node)return;if(this.pendingUpdate)return;let n=a?e:e-this.getOffset();!a&&n>0&&n<this.getLoadingOffsetTop()&&(n=0);const s=this.bracketScrollTop(n);a||s===n?t?this.scrollAnimation=this.node.scrollWithAnimation(s):super.setScrollTop(s):this.setScrollTop(e)}bracketScrollTop(e){return Math.max(0,Math.min(this.getContentHeight()-this.props.height,e))}resetRendered(){this.overscan=this.props.height/2}loadMore(e=this.state.start,t=this.state.end,a=this.props,n=this.getScrollTop()){const s=this.layout.getTotalHeight(),r=0===e&&n<1,i=t===a.keys.length&&n+a.height>s-1,o=!a.keys.length||s<=a.height||r,l=!a.keys.length||s<=a.height||i;return o&&l?a.loadAround():o?a.loadPre():!!l&&a.loadPost()}relayout(){this.setState((e,t)=>{if(t.isLoading)return null;const a=e.start,n=e.end,r=this.startKey,i=this.endKey;this.recomputeOffsets(t,a,n);const o=this.node?this.node.scrollTop():0,l=this.getScrollTop();let c=o-1<=0||l-1<=this.getOffset(),d=o+1>=this.getContentHeight()-t.height||l+1>=this.endBottom-t.height,u={start:a,end:n};if(this.startKey!==r||this.endKey!==i||c&&0!==a||d&&n!==t.keys.length){e.scrolling&&(this.overscan=8e3);var p=u=this.computeBounds(t,l);const a=p.start,n=p.end;this.recomputeOffsets(t,a,n),c=l-1<=this.getOffset(),d=l+t.height+1>=this.endBottom+this.getLoadingOffsetBottom()}(c&&0===u.start||d&&u.end===t.keys.length||this.layout.getTotalHeight()<t.height&&0===u.start)&&this.loadMore(a,n,t);const h=this.layout.getTops();return u.start===a&&u.end===n&&h===e.tops?null:(this.scrollAnimation&&this.scrollAnimation.cancel(),this.pendingUpdate=!0,this.scrollTop=l,s()({},u,{tops:h}))})}recomputeOffsets(e=this.props,t=this.state.start,a=this.state.end){const n=this.layout.getTotalHeight()<=e.height;this.startKey=e.keys[t],this.endKey=e.keys[a-1],this.startTop=n?0:this.layout.getTop(this.startKey)||0,this.endBottom=this.layout.getBottom(this.endKey)||0}computeBounds(e=this.props,t){const a=t-this.overscan,n=t+e.height+this.overscan,s=super.getBounds(a,n);return this.snapBounds(e,s)}snapBounds(e=this.props,{start:t,end:a}){return{start:t<Ob?0:t,end:e.keys.length-a<Ob?e.keys.length:a}}renderLoading(e,t){const a=e?{top:0,paddingTop:40}:{bottom:0,paddingBottom:15},n=e?"degradedLoadingTop":"degradedLoadingBottom",s=this.props.featureOfflineMode&&this.props.isOffline&&!t;let r=yb.t("Loading history...");this.props.featureOfflineMode&&s&&(r=o.a.createElement("span",null,o.a.createElement(bn.b,{type:"cloud-offline-small",size:"inherit"})," ",o.a.createElement("strong",null,yb.t("No connection."))," ",yb.t("Go online to load more messages.")));const i=d()("p-degraded_list__loading",{"p-degraded_list__loading--offline":s});return o.a.createElement("div",{key:n,className:i,style:a},r)}renderItems(){const e=super.renderItems(),t=this.state.start>0,a=this.state.end<this.props.keys.length,n=this.props.keys.length>1&&(!this.props.reachedStart||t),s=this.props.keys.length>1&&(!this.props.reachedEnd||a);return[n&&this.renderLoading(!0,t),...e,s&&this.renderLoading(!1,a)]}}degraded_list_DegradedList.propTypes=Cb,degraded_list_DegradedList.defaultProps=vb;var Eb=a("TSHB"),kb=a("vJtL");class gravity_anchor_layout_GravityAnchorLayout extends Cr.a{constructor(e){super(e),Object(kb.a)(e.shouldExcludeFirstItemFromGravity)&&(this.shouldExcludeFirstItemFromGravity=e.shouldExcludeFirstItemFromGravity)}layout(){if(super.layout(),this.totalHeight<this.containerHeight){const e=this.containerHeight-this.totalHeight;this.tops=Object(Eb.a)(this.tops,t=>t+e),this.totalHeight=this.containerHeight}this.shouldExcludeFirstItemFromGravity&&this.shouldExcludeFirstItemFromGravity()&&this.keys.length>0&&(this.tops[Object(db.a)(this.keys)]=0)}}function Sb(){const e=window.location.search||"";if(e.indexOf("force_degraded_list=1")>0)return!0;if(e.indexOf("force_infinite_list=1")>0)return!1;const t=window.navigator.userAgent;return-1!==t.indexOf("Firefox")||(-1!==t.indexOf("Windows")||-1!==t.indexOf("Linux"))}const jb=Object(mt.b)("Request channel history for a given timespan",(e,t,{channelId:a,historyRateLimiter:n,oldestTs:s,latestTs:r}={})=>{if(n.isRequestPending({oldest:s,latest:r}))return Promise.resolve();if(n.shouldPreventHistoryRequest({oldest:s,latest:r})){return Object(Ot.a)({getState:t}).error({channelId:a,latestTs:r,oldestTs:s},"composer_request_rate_limited"),Promise.resolve()}const i=e(Ut({oldest:s,latest:r,channelId:a,reason:"composer-context"}));return i?(n.logHistoryRequest({oldest:s,latest:r,promise:i}),i):Promise.resolve()});jb.meta={name:"fetchChannelHistory",key:"componentsComposerPageUtilityFetchChannelHistoryFetchChannelHistory",description:"Request channel history for a given timespan"},jb.propTypes={channelId:l.default.string.isRequired,historyRateLimiter:l.default.shape({isRequestPending:l.default.func.isRequired,logHistoryRequest:l.default.func.isRequired,shouldPreventHistoryRequest:l.default.func.isRequired}).isRequired,latestTs:l.default.string,oldestTs:l.default.string};var Ib=jb;const wb=Object(mp.a)(message_Message),Tb={channel:l.default.object,channelId:l.default.string,dispatch:l.default.func,isLoading:l.default.bool,messages:l.default.array,reachedEnd:l.default.bool,reachedStart:l.default.bool,renderFooter:l.default.func,theme:l.default.oneOf(["dense","light"]).isRequired,viewId:l.default.string.isRequired},Nb={channel:void 0,channelId:void 0,dispatch:r.a,isLoading:!1,messages:[],reachedStart:!1,reachedEnd:!1,renderFooter:void 0};class composer_context_ComposerContext extends ob.a{constructor(e){super(e),this.isFocusableItem=this.isFocusableItem.bind(this),this.requestHistory=this.requestHistory.bind(this),this.renderList=this.renderList.bind(this),this.renderRow=this.renderRow.bind(this),this.isDegradedList=Sb(),this.historyRateLimiter=new HistoryRateLimiter,this.layout=new gravity_anchor_layout_GravityAnchorLayout({shouldExcludeFirstItemFromGravity:!1,stickToBottom:!0})}componentDidUpdate(e){this.props.channelId!==e.channelId&&(this.historyRateLimiter.reset(),this.layout.heightCache&&this.layout.heightCache.invalidate&&this.layout.heightCache.invalidate())}isFocusableItem({index:e}){const t=this.rows[e];return t&&"message"===t.type}requestHistory({oldest:e,latest:t}){var a=this.props;const n=a.channel,s=a.channelId,r=a.dispatch;Object(ee.e)(n)||Object(q.db)(n)||r(Ib({channelId:s,historyRateLimiter:this.historyRateLimiter,latestTs:t,oldestTs:e}))}renderRow(e){var t=this.props;const a=t.channelId,n=t.renderFooter,s=t.theme,r=this.rows[e];if(!r)return null;const i=d()({"p-composer_page__context_item--top":0===e,"p-composer_page__context_item--bottom":e===this.rows.length-2});switch(r.type){case"message":return o.a.createElement(wb,{channelId:a,className:i,ts:r.ts,prevTs:r.prevTs,theme:s,rollup:r.rollup});case"day_divider":return o.a.createElement("div",{className:d()(i,"p-composer_page__context_list_divider")},o.a.createElement(kp,{date:r.dayTs,sticky:!1}),o.a.createElement(Ep,{date:r.dayTs}));case"loading_empty":return o.a.createElement(bb,null);case"loading_inline":return o.a.createElement(gb,{className:i});case"footer":return n();default:return null}}renderList(e){var t=this.props;const a=t.isLoading,n=t.messages,r=t.reachedEnd,i=t.reachedStart,l=t.renderFooter,c=t.viewId;var d=function({isLoading:e,messages:t}={}){const a=[],n=[],s=Object(_n.a)(t,e=>!Object($e.fb)(e)&&!Object($e.sb)(e));if(Object(io.a)(s))e&&(a.push("loading_empty"),n.push({type:"loading_empty"}));else{if(e){const e=Object($e.Q)(s[0]);a.push(`loading_inline-${e}`),n.push({type:"loading_inline"})}var r=Object(Pp.a)(s);const t=r.rollups,i=r.messages;i.forEach((e,s)=>{const r=Object($e.Q)(i[s-1]),o=Object($e.Q)(e),l=Xu(r),c=Xu(o);l!==c&&(a.push(`day_divider-${c}-${o}`),n.push({type:"day_divider",dayTs:Number(c)})),a.push(o),n.push({type:"message",ts:o,prevTs:r,rollup:t[o]})})}return{rows:n,keys:a}}({isLoading:a,messages:n});const u=d.rows,p=d.keys;this.rows=u,this.keys=p,l&&(this.keys.push("footer"),this.rows.push({type:"footer"}));const h=this.isDegradedList?degraded_list_DegradedList:Or.a;return o.a.createElement(tb.a,null,({measureRef:t,width:a,height:n})=>o.a.createElement("div",{className:"p-composer_page__context_list_wrapper",ref:t},o.a.createElement(h,s()({},e,{height:n,id:`${c}-list`,isFocusableItem:this.isFocusableItem,keys:p,reachedEnd:r,reachedStart:i,rowRenderer:this.renderRow,width:a}))))}render(){var e=this.props;const t=e.latest,a=e.messages,n=e.oldest,s=e.reachedEnd,r=e.reachedStart,i=e.renderFooter,l=e.viewId;if(r&&s&&Object(io.a)(a)&&!i)return null;const c=Object(ht.a)(a,$e.Q);return o.a.createElement(zo.a,{id:l},o.a.createElement("div",{className:"p-composer_page__context"},o.a.createElement(generic_message_list_MessageList,{latest:t,layout:this.layout,listRenderer:this.renderList,oldest:n,reachedEnd:s,reachedStart:r,requestHistory:this.requestHistory,startTs:null,timestamps:c})))}}composer_context_ComposerContext.displayName="ComposerContext",composer_context_ComposerContext.propTypes=Tb,composer_context_ComposerContext.defaultProps=Nb;var Ab=Object(u.b)(function(e,{channelId:t}){var a=Object(ze.f)(e,t)||{};const n=a.end,s=a.prevReachedEnd,r=a.reachedEnd,i=a.reachedStart,o=a.start,l=a.timestamps,c=Object(ae.c)(e,t,l);return{channel:Object(B.e)(e,t),isLoading:Object(_t.d)(e,t),latest:n,messages:Object(Z.a)(c),oldest:o,prevReachedEnd:s,reachedEnd:r,reachedStart:i,theme:Object(Wu.a)(e)}})(composer_context_ComposerContext),Rb=a("WD4z"),Mb=a("hUMe"),Pb=a("HiDb"),xb=a("mLe0"),Lb=function(e,{featureWysiwygComposer:t}){if(!e)return!1;if(!Object(Za.p)(e.contents,{embedReplacement:"a"}).trim())return!1;if(t){if(Object(xb.a)(new da.a(e.contents))>Ln.C)return!1}else if(Object(tn.a)(e).length>Ln.B)return!1;return!0};function Fb(e,t){const a={};if(Object(io.a)(t)&&!Object(J.m)(e,t))a.missingDraft=!0;else{const n=Object(J.c)(t),s=Object(J.j)(t);if(Object(io.a)(n))if(Object(io.a)(s))a.missingDestination=!0;else{const t=Object(m.d)(e),n=Object(ep.a)(s,t);n.length>Ln.E&&(a.invalidMemberCount=!0);const r=n.filter(t=>{const a=Object(bi.d)(e,t);return Object(Je.mb)(a)});r.length&&r.length===s.length&&(1===r.length?a.deactivatedMember=!0:a.deactivatedMembers=!0)}else if(n.length>1)a.invalidChannelCount=!0;else{const t=Object(B.e)(e,n[0]);(Object(q.Ob)(t)||Object(q.Y)(t)||!Object(te.p)(e,n[0]))&&(a.invalidChannel=!0)}const r=Object(rt.a)(e);Lb({contents:t.ops},{featureWysiwygComposer:r})||Object(J.m)(e,t)||(a.invalidText=!0),Object(J.m)(e,t)&&(Object(J.s)(e,t)||(a.filesUnsendable=!0))}return{ok:Object(io.a)(a),reasons:a}}function Db(e,t){return Fb(e,t).ok}const Bb=new x.b("drafts"),Ub=(l.default.object,l.default.string,l.default.bool,{alertData:void 0,alertType:void 0,featureComposeFlow:!1});function qb({alertData:e,alertType:t,featureComposeFlow:a}){if(!a)return null;if(!t)return null;let n,s;if("too_many_channels"===t)n="error",s=Bb.t("Too many channels");else if("invalid_channel"===t)n="error",s=Bb.t("Cannot send message to this channel");else if("too_many_members"===t)n="error",s=Bb.t("Direct messages can\u2019t have more than {maxMembers} people.",{maxMembers:Ln.E});else if("deactivated_member"===t)n="error",s=Bb.t("This account has been deactivated.");else if("deactivated_members"===t)n="error",s=Bb.t("These accounts have been deactivated.");else if("max_members"===t)n="warning",s=Bb.t("Direct messages can\u2019t have more than {maxMembers} people.",{maxMembers:Ln.E});else if("pending_shared_channels"===t){n="warning";const t=e.pendingSharedTeamIds.map(e=>o.a.createElement(Mb.a,{id:e}));s=Bb.rt("<strong>This channel will soon be shared with {teams}.</strong> Messages and files sent here will be seen by members of both organizations.",{teams:Object(x.k)(t,{react:!0})})}else if("shared_channels"===t){n="warning";const t=e.sharedTeamIds.map(e=>o.a.createElement(Mb.a,{id:e}));s=Bb.rt("<strong>This is a shared channel.</strong> Messages and files sent here will also be seen by members of {teams}.",{teams:Object(x.k)(t,{react:!0})})}else"unjoined_channels"===t&&(n="warning",s=Bb.t("You\u2019ll join this channel when you send this message."));return o.a.createElement(Rb.a,{className:"p-composer_page__destination_alert",level:n,type:"inline"},s)}qb.displayName="ComposerDestinationAlert",qb.defaultProps=Ub;const Hb=Object(u.b)(function(e,{draft:t}){const a=function(e,t){const a=Fb(e,t);if(!a.ok){if(a.reasons.invalidChannelCount)return{type:"too_many_channels"};if(a.reasons.invalidChannel)return{type:"invalid_channel"};if(a.reasons.invalidMemberCount)return{type:"too_many_members"};if(a.reasons.deactivatedMember)return{type:"deactivated_member"};if(a.reasons.deactivatedMembers)return{type:"deactivated_members"}}const n=Object(J.j)(t),s=Object(m.d)(e),r=Object(ep.a)(n,s);if(!Object(io.a)(r)&&r.length===Ln.E)return{type:"max_members"};const i=[],o=[],l=[],c=Object(J.c)(t);if(Object(Rp.a)(c,t=>{const a=Object(B.e)(e,t);Object(ee.b)(a)&&(Object(q.zb)(a)?i.push(a):Object(q.bb)(a)&&o.push(a),Object(q.ob)(a)||l.push(a))}),i.length||o.length){const t=[].concat(i,o),a=Object(Pb.a)(t,t=>Object(q.O)(e,t));return i.length?{type:"pending_shared_channels",data:{pendingSharedTeamIds:a}}:{type:"shared_channels",data:{sharedTeamIds:a}}}return l.length?{type:"unjoined_channels"}:{}}(e,t);return{alertData:a.data,alertType:a.type}})(qb);Hb.propTypes={draft:l.default.object.isRequired};var Wb=Hb,Gb=a("20gP"),Kb=a("FHcd");const Vb=Object(mt.b)("Split destination ids into channels and members",(e,t,{ids:a})=>{const n=t(),s=Object(m.d)(n),r=[],i=[];return Object(Rp.a)(a,e=>{if(Object(An.a)(e)){const t=Object(B.e)(n,e);if(Object(q.qb)(t)){const e=Object(q.I)(t),a=Object(ep.a)(e,s);i.push(...a)}else r.push(e)}else if(Object(Kb.a)(e))i.push(e);else{Object(Ot.a)({state:n}).warn("COMPOSER",`Unhandled selected id "${e}"`)}}),Promise.resolve({channelIds:r,memberIds:i})});Vb.meta={name:"categorizeDestinationIds",key:"componentsComposerPageUtilityCategorizeDestinationIdsCategorizeDestinationIds",description:"Split destination ids into channels and members"},Vb.propTypes={ids:l.default.arrayOf(l.default.string.isRequired)};var zb=Vb;function $b(e,t){const a=Fb(e,t).reasons;return!!(a.invalidChannelCount||a.invalidChannel||a.invalidMembers)}function Yb(e,{selectedExternalTeamId:t}={}){if(t&&Object(Je.yb)(e.entity)){if(Object(Je.P)(e.entity)!==t)return!0}return!1}var Qb=a("TegG"),Xb=a("oiAH"),Jb=a("Zhly");const Zb=new x.b("drafts");l.default.object.isRequired,l.default.bool,l.default.bool,l.default.bool;function ef({entity:e,featureComposeFlow:t,isActive:a,isDisabled:n}){if(Object(q.qb)(e))return o.a.createElement(Xb.a,{id:e.id,isActive:a});if(Object(q.Db)(e)||Object(q.Cb)(e))return o.a.createElement(Jb.a,{channelId:e.id,isActive:a});if(Object(Je.yb)(e)){let s;return t&&n&&(s=Zb.t("From another organization")),o.a.createElement(Qb.a,{id:e.id,isActive:a,isDisabled:n,secondaryContent:s})}return null}ef.defaultProps={featureComposeFlow:!1,isActive:!1,isDisabled:!1};var tf=ef;const af=new x.b("drafts"),nf=(l.default.func,l.default.object.isRequired,l.default.bool,l.default.object,l.default.bool,l.default.func,l.default.func,l.default.string,{dispatch:r.a,featureComposeFlow:!1,forwardedRef:void 0,isInvalid:!1,onChange:r.a,onSelect:r.a,selectedExternalTeamId:void 0});function sf({dispatch:e,draft:t,featureComposeFlow:a,forwardedRef:n,isInvalid:r,onChange:i,onSelect:l,selectedExternalTeamId:c}){if(!t||!a)return null;const d=Object(J.c)(t),u=Object(J.j)(t);let p;Object(io.a)(u)?Object(io.a)(d)||(p=d):p=u;const h=Object(io.a)(u),m=Object(io.a)(d);return o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"p-composer_page__destination_select_icon"},af.t("To:")),o.a.createElement(Gb.c,{className:"p-composer_page__destination_select",classPrefix:"p-composer_page__destination",focusOnMount:!0,inputRef:n,isInvalid:r,maxHeight:130,onKeyDown:(e,{hasActiveRowIndex:t})=>{"Enter"!==e.key||t||Object(io.a)(p)||(e.preventDefault(),l())},onSelectedItemsChange:t=>{const a=Object(ht.a)(t,"value");e(zb({ids:a})).then(e=>{const t=Object(J.a)(e);i(t)})},optionsRowHeight:32,placeholderText:af.t("Type the name of a person or channel"),processOptions:e=>e.map(e=>s()({},e,{isDisabled:Yb(e,{selectedExternalTeamId:c})})),renderOption:(e,t)=>o.a.createElement(tf,{entity:e.entity,featureComposeFlow:a,id:e.value,isActive:t.isActive,isDisabled:e.isDisabled}),searcherOptions:{allowEmptyQuery:!0,entities:{channels:h&&{includeExternallyShared:!0,includeFromAnotherTeam:!0,includePublic:!0,includePrivate:!0,includeMpims:m,includeArchived:!1,onlyVisibleMpims:!0},members:m&&{includeSelf:Object(io.a)(u),includeSlackbot:!0,includeBots:!0,includeWorkflows:!1,includeExternal:!0,onlyLocalTeam:!1,onlyAdmins:!1,includeGuests:!0},userGroups:!1}},selectId:"composer_page__destination",selectedOptions:Object(ht.a)(p,e=>({label:e,value:e})),width:"100%"}))}sf.displayName="ComposerDestinationSelect",sf.defaultProps=nf;const rf=Object(u.b)(function(e,{draft:t}){const a=Object(J.j)(t).map(t=>Object(bi.d)(e,t)),n=Object(qu.a)(a,e=>Object(Je.tb)(e));return{featureComposeFlow:Object(C.g)(e),isInvalid:$b(e,t),selectedExternalTeamId:Object(Je.P)(n)}})(sf);var of=o.a.forwardRef((e,t)=>o.a.createElement(rf,s()({},e,{forwardedRef:t}))),lf=a("hCvz");l.default.bool,l.default.arrayOf(l.default.string.isRequired);const cf={featureComposeFlow:!1,destinationNames:void 0};function df({destinationNames:e,featureComposeFlow:t}){if(!t)return null;const a=Object(ht.a)(e,e=>e||o.a.createElement(lf.b,{size:lf.a.SMALL}));return o.a.createElement("span",{className:"p-composer_page__destination_recipients"},Object(x.k)(a,{noConj:!0,react:!0}))}df.displayName="ComposerDestinationRecipients",df.defaultProps=cf;const uf=Object(u.b)(function(e,{draft:t}){return{featureComposeFlow:Object(C.g)(e),destinationNames:Object(J.g)(e,t)}})(df);uf.propTypes={draft:l.default.object.isRequired};var pf=uf;const hf=new x.b("drafts");l.default.object.isRequired,l.default.bool,l.default.bool;function mf({draft:e,featureComposeFlow:t,isInvalid:a}){return t?o.a.createElement("div",{className:d()("p-composer_page__destination_text",{"p-composer_page__destination_text--invalid":a})},hf.rt("To: {names}",{names:o.a.createElement(pf,{draft:e})})):null}mf.displayName="ComposerDestinationText",mf.defaultProps={featureComposeFlow:!1,isInvalid:!1};var bf=Object(u.b)(function(e,{draft:t}){return{featureComposeFlow:Object(C.g)(e),isInvalid:$b(e,t)}})(mf);l.default.object.isRequired,l.default.bool,l.default.object,l.default.bool,l.default.func,l.default.func,l.default.func;const ff={featureComposeFlow:!1,forwardedRef:void 0,isFocused:!1,onChange:r.a,onFocus:r.a,onSelect:r.a};function _f({draft:e,featureComposeFlow:t,forwardedRef:a,isFocused:n,onChange:s,onFocus:r,onSelect:i}){return o.a.createElement("div",{className:"p-composer_page__subheader"},n?o.a.createElement("div",{className:"p-composer_page__destination_input"},o.a.createElement(of,{draft:e,onChange:s,onSelect:i,ref:a})):o.a.createElement(Qh.a,{className:"p-composer_page__destination_recipients_wrapper",onClick:r},o.a.createElement(bf,{draft:e})),o.a.createElement(Wb,{draft:e,featureComposeFlow:t}))}_f.displayName="ComposerSubheader",_f.defaultProps=ff;const gf=Object(u.b)(function(e){return{featureComposeFlow:Object(C.g)(e)}})(_f);var yf=o.a.forwardRef((e,t)=>o.a.createElement(gf,s()({},e,{forwardedRef:t}))),Of=a("RoYr"),Cf=a("RW8i"),vf=a("K2Qr"),Ef=a("eCgt");const kf=Object(mt.b)("Sends a composer message",(()=>{var e=Object(lm.coroutine)(function*(e,t,{draft:a,fromKeyboardShortcut:n}={}){let s=(r=Object(lm.coroutine)(function*(){if(yield Object(lm.resolve)(e(Object(nt.a)({channelId:h}))),Object(J.m)(t(),a)){let t;return i&&(t=e(Object(xn.a)({msgOps:p,channelId:h}))),e(Object(Wn.p)({fileIds:Object(J.h)(a),channelId:h,msgText:b,blocks:t,reason:"send_composer_message"})).then(f)}return e(Object(Ef.a)({channelId:h,text:b,delta:i?new da.a(p):null})).then(f)}),function(){return r.apply(this,arguments)});var r;if(!Db(t(),a))return Promise.reject(new Error("Composer message is not sendable. This may be due to a missing destination, missing text, or posting restrictions"));const i=Object(rt.a)(t()),o=Object(Ot.a)({getState:t,label:"COMPOSER"}),l=Object(ie.a)({getState:t}),c=Object(J.c)(a),d=Object(J.j)(a),u=Object(J.d)(a),p=Object(J.k)(a);let h;if(Object(io.a)(d)){h=c[0];const t=yield Object(lm.resolve)(e(Object(vf.g)({channelId:h})));t&&t.promise&&(yield Object(lm.resolve)(t.promise))}else{let a;if(1===d.length)a=d;else{const e=Object(m.d)(t());a=Object(ep.a)(d,e)}h=yield Object(lm.resolve)(e(Object(wi.startMpimByMemberIds)({memberIds:a,shouldNavigateToChannel:!1})).then(e=>e.id))}o.info(`Preparing to send a composer message to ${h}`),l.track(de.EventId.COMPOSE_FLOW,{draft_id:u,contexts:{ui_context:{action:n?de.UiAction.KEYDOWN:de.UiAction.CLICK,step:de.UiStep.COMPOSE_FLOW_SEND}}});const b=Object(it.a)({contents:p});function f(){o.info(`Composer message successfuly sent. Removing the draft (${u})`),e(Object(Oa.a)({ids:[u]}))}const _=Object(Of.a)({contents:p});return Object(q.Yb)(t(),h,_)?(e(Object(Cf.a)({channelId:h,keywordsInUse:_,onSend:()=>s()})),Promise.reject(new Error("Shouty rooster in effect"))):s()});return function(t,a,n){return e.apply(this,arguments)}})());kf.meta={name:"sendComposerMessage",key:"actionsSendMessageSendComposerMessageSendComposerMessage",description:"Sends a composer message"},kf.propTypes={draft:l.default.object.isRequired};var Sf=a("NZ+B");a("HyiT");const jf=new x.b("notification_bar"),If=(l.default.bool,l.default.array,l.default.number,l.default.bool,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,{wasRecentlyOnline:!1,typingNames:null,textLength:0,isLegacy:!1,secondaryView:void 0,showTypingIndicator:!0,featureWysiwygComposer:!1,useSendButton:!1,usePreNewlines:!1,cursorInCodeBlock:!1});class notification_bar_NotificationBar extends i.PureComponent{renderLeft(){var e=this.props;const t=e.wasRecentlyOnline,a=e.typingNames,n=e.textLength,s=e.showTypingIndicator;if(!t){const e=n?jf.t("Slack is trying to connect, so messages can\u2019t be sent yet."):jf.t("Slack is trying to connect.");return o.a.createElement("span",{id:"msg_input_info",className:"p-notification_bar__offline","aria-live":"polite"},e," ",o.a.createElement(bn.a,{type:"cloud-offline-small-filled",className:"p-notification_bar__offline_icon"}))}if(s&&!Object(io.a)(a)){let e;return e=1===a.length?jf.rt("<b>{name}</b> is typing",{name:a[0]}):2===a.length?jf.rt("<b>{name}</b> and <b>{other_name}</b> are typing",{name:a[0],other_name:a[1]}):jf.t("several people are typing"),o.a.createElement("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"p-notification_bar__typing"},e)}return null}renderFormattingTips(){var e=this.props;const t=e.wasRecentlyOnline,a=e.featureWysiwygComposer,n=e.useSendButton,s=e.usePreNewlines,r=e.cursorInCodeBlock;if(!t)return null;if(a){const e=({tag:e,key:t,text:a})=>"span"===e?o.a.createElement("span",{key:t,className:"p-notification_bar__send"},a):o.a.createElement("b",{className:"p-notification_bar__return",key:t},a);return s&&r?jf.rt("<span><b>Shift + Return</b> to send</span><b>Return</b> to add a new line",null,e):n?Object(ue.q)()?jf.rt("<span><b>\u2318 + Return</b> to send</span><b>Return</b> to add a new line",null,e):jf.rt("<span><b>Ctrl + Return</b> to send</span><b>Return</b> to add a new line",null,e):jf.rt("<span><b>Return</b> to send</span><b>Shift + Return</b> to add a new line",null,e)}return Object(x.h)()?jf.rt("<b>\uff0abold\uff0a</b> <code>\uff40code\uff40</code> <code>\uff40\uff40\uff40preformatted\uff40\uff40\uff40</code> <span>\uff1equote</span>"):jf.rt("<b>*bold*</b> <i>_italics_</i> ~strike~ <code>`code`</code> <code>```preformatted```</code> <span>{quote}quote</span>",{quote:">",fallbackHash:"78fa2eabded9ec376bac82c1ade55d4f646aca2c"})}render(){var e=this.props;const t=e.wasRecentlyOnline,a=e.isLegacy,n=e.typingNames,s=e.secondaryView,r=e.showTypingIndicator,i=e.textLength,l=d()("p-notification_bar__section","p-notification_bar__section--right",{"p-notification_bar__section--is-visible":t&&i>2}),c=d()("p-notification_bar",{"p-notification_bar--legacy":a,"p-notification_bar--typers_showing":r&&!Object(io.a)(n),"p-notification_bar--flexpane_open":!!s});return o.a.createElement("div",{className:c},o.a.createElement("div",{className:"p-notification_bar__section p-notification_bar__section--left"},this.renderLeft()),o.a.createElement("div",{className:l},o.a.createElement("span",{className:"p-notification_bar__formatting","aria-hidden":"true"},this.renderFormattingTips())))}}notification_bar_NotificationBar.displayName="NotificationBar",notification_bar_NotificationBar.defaultProps=If;var wf=Object(u.b)(function(e,{wasRecentlyOnline:t}){return{wasRecentlyOnline:Object(Sf.a)(t)?t:Object(pa.h)(e),secondaryView:Object(v.j)(e),showTypingIndicator:Object(ba.k)(e,"show_typing"),useSendButton:Object(ba.k)(e,"msg_input_send_btn"),usePreNewlines:Object(ba.k)(e,"enter_is_special_in_tbt"),featureWysiwygComposer:Object(rt.a)(e)}})(notification_bar_NotificationBar);const Tf=new x.b("drafts"),Nf=(l.default.arrayOf(l.default.string.isRequired),l.default.func,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func,{destinationNames:void 0,dispatch:r.a,featureComposeFlow:!1,featureWysiwygComposer:!1,isDraftValid:!1,isExpanded:!1,isFocused:!1,isSendButtonEnabledPref:!1,onChange:r.a,onExpand:r.a,onFocus:r.a});function Af({destinationNames:e,dispatch:t,draft:a,featureComposeFlow:n,featureWysiwygComposer:r,isDraftValid:l,isExpanded:c,isFocused:d,isSendButtonEnabledPref:u,onChange:p,onExpand:h,onFocus:m}){var b=Object(i.useState)(""),f=at()(b,2);const _=f[0],g=f[1];var y=Object(i.useState)(!1),O=at()(y,2);const C=O[0],v=O[1];var E=Object(i.useState)(!1),k=at()(E,2);const S=k[0],j=k[1],I=Object(i.useRef)(),w=()=>I.current&&I.current.getWrappedInstance?I.current.getWrappedInstance():I.current;Object(i.useEffect)(()=>{const e=w();e&&d&&e.focus()},[d]);const T=Object(J.d)(a);if(Object(rb.a)(()=>{const e=w();if(!e)return;const t=Object(J.e)(a);Object(dt.a)(t)?e.setCursor(t):e.setCursorAtEnd()},[T]),!n)return null;const N=Object(J.c)(a)||[],A=Object(io.a)(e)?Tf.t("Start a new message"):Tf.t("Message {names}",{names:Object(x.k)(e,{noConj:!0}).join("")}),R=c||u;return o.a.createElement(o.a.Fragment,null,o.a.createElement(oi,{autocompleteProps:{completeOnCommands:!1,position:c?"bottom":"top"},channelId:N[0],className:"p-composer_page__message_input",composerDraft:a,enableComposerButton:r,enableEmojiButton:!0,enableFileButton:!0,enableMentionButton:!0,enableSendButton:R,enableExpandButton:!0,enableSnippetCreation:!1,focusOnPaste:!0,isComposerPage:!0,isExpanded:c,isSendingDisabled:!l||S,maxLength:r?Ln.C:Ln.B,onDraftUpdate:p,onExpand:h,onFocus:m,onSelectionChange:()=>{const e=w();if(!e)return;const t=e.getFormat(),a=!(!t||!t["code-block"]);v(a)},onSendError:({reason:e})=>{"send_disabled"===e&&(Object(J.l)(a)||t(Object(_a.c)({element:o.a.createElement(Ba.b,null,Tf.t("Select a channel or person to send message"))})))},onTextChange:e=>g(e),placeholder:A,ref:I,sendMessage:({fromKeyboardShortcut:e}={})=>{if(S)return;j(!0);const n=w().getContents().contents;t(kf({draft:s()({},a,{ops:n}),fromKeyboardShortcut:e})).catch(()=>{j(!1)})},useSendButton:R}),o.a.createElement(wf,{cursorInCodeBlock:C,textLength:_?_.length:0,useSendButton:R}))}Af.displayName="ComposerInput",Af.defaultProps=Nf;var Rf=Object(u.b)(function(e,{draft:t}){return{destinationNames:Object(J.g)(e,t),featureWysiwygComposer:Object(rt.a)(e),featureComposeFlow:Object(C.g)(e),isDraftValid:Db(e,t),isSendButtonEnabledPref:Object(ba.k)(e,"msg_input_send_btn")}})(Af),Mf=a("m+G5");const Pf=Object(mt.b)("Processes a file object, adds it to Redux, and uploads it",(e,t,{file:a}={})=>{if(!a)return Promise.resolve();const n=Object(pm.a)();a.id=n,e(Object(Mf.b)({files:[a]}));const s=t(),r=Object(h.b)(s),i=Object(yo.a)(r).uploadFiles({files:[a],shareData:{isEagerUpload:!0}});return Promise.resolve({pendingFileId:n,uploadPromise:i})});Pf.meta={name:"addAndUploadPendingFile",key:"pendingFileUploadsStoreThunksAddAndUploadPendingFileAddAndUploadPendingFile",description:"Processes a file object, adds it to Redux, and uploads it"},Pf.propTypes={file:l.default.object.isRequired};var xf=a("kRTx"),Lf=a("2XCg");const Ff=Object(mt.b)("Kicks off the file upload and updates the draft store with the file IDs",(e,t,{draftId:a,files:n}={})=>{a&&!Object(io.a)(n)&&n.forEach(n=>{e(Pf({file:n})).then(({pendingFileId:n,uploadPromise:r=Promise.resolve()}={})=>{n&&(e(Object(Lf.b)({draftId:a,pendingFileId:n})),r.then(({fileIds:r=[]}={})=>{if(Object(io.a)(r))return;const i=t(),o=Object(C.d)(i,a),l=r[0];e(Object(Oa.f)(s()({},o,{files:[...Object(J.h)(o),l]}))),e(Object(Mf.c)({pendingFileId:n})),e(Object(Lf.c)({draftId:a,pendingFileId:n}))}).catch(()=>e(Object(Mf.e)({pendingFileId:n,status:xf.a.ERROR}))))})})});Ff.meta={name:"uploadDraftFiles",key:"draftsStoreThunksUploadDraftFilesUploadDraftFiles",description:"Kicks off the file upload and updates the draft store with the file IDs"},Ff.propTypes={draftId:l.default.string.isRequired,files:l.default.arrayOf(l.default.object).isRequired};var Df=a("/SKd"),Bf=a("yACA"),Uf=a("B+Mk");const qf=Object(mt.b)("Deletes a draft file",(e,t,{persistedFileId:a}={})=>{if(!a)return;Object(Ot.a)({getState:t,label:"DRAFT-FILES"}).info(`Deleting a draft file ${a}`),e(Object(Wn.d)({fileId:a,reason:"delete_draft_file"}))});qf.meta={name:"deleteDraftFile",key:"draftsStoreThunksRemoveDraftFileDeleteDraftFile",description:"Deletes a draft file"},qf.propTypes={persistedFileId:l.default.string.isRequired};const Hf=Object(mt.b)("Cancels a draft file upload",(e,t,{pendingFileId:a}={})=>{if(!a)return;Object(Ot.a)({getState:t,label:"DRAFT-FILES"}).info(`Cancelling a draft file upload ${a}`);const n=Object(h.b)(t());Object(yo.a)(n).cancelEagerUpload({pendingFileId:a})});Hf.meta={name:"cancelDraftFileUpload",key:"draftsStoreThunksRemoveDraftFileCancelDraftFileUpload",description:"Cancels a draft file upload"},Hf.propTypes={pendingFileId:l.default.string.isRequired};const Wf=Object(mt.b)("Removes individual files from a draft",(e,t,{draftId:a,pendingFileId:n,persistedFileId:r,shouldUpdateDraft:i=!0}={})=>{if(!a||!n&&!r)return;const o=t();if(r){if(i){const t=Object(C.d)(o,a),n=Object(J.h)(t);e(Object(Oa.f)(s()({},t,{files:Object(ep.a)(n,r)})))}e(qf({persistedFileId:r}))}else e(Hf({pendingFileId:n}));n&&(e(Object(Mf.c)({pendingFileId:n})),e(Object(Lf.c)({draftId:a,pendingFileId:n})))});Wf.meta={name:"removeDraftFile",key:"draftsStoreThunksRemoveDraftFileRemoveDraftFile",description:"Removes individual files from a draft"},Wf.propTypes={draftId:l.default.string.isRequired,pendingFileId:l.default.string,persistedFileId:l.default.string};const Gf=Object(mt.b)("Removes individual files from a draft",(e,t,{draft:a}={})=>{if(!a)return;if(!Object(J.m)(t(),a))return;const n=Object(J.d)(a),s=Object(J.h)(a),r=[...Object(Bf.a)(t(),{draftId:n})||[]].reverse().map(a=>{const s=Object(Df.a)(t(),{pendingFileId:a}),r=Object(Uf.c)(s);return e(Wf({draftId:n,pendingFileId:a,persistedFileId:r,shouldUpdateDraft:!1})),r}).filter(e=>!!e);Object(Y.a)(s,r).forEach(t=>{e(qf({persistedFileId:t}))})});Gf.meta={name:"removeAllDraftFiles",key:"draftsStoreThunksRemoveDraftFileRemoveAllDraftFiles",description:"Removes individual files from a draft"},Gf.propTypes={draft:l.default.object.isRequired};var Kf=a("fQu5"),Vf=a("mZe+"),zf=a("UF3u");l.default.func,l.default.object.isRequired,l.default.bool,l.default.arrayOf(l.default.object),l.default.arrayOf(l.default.object);const $f={dispatch:r.a,featureComposeFlowFiles:!1,pendingFiles:[],draftFiles:[]};function Yf({dispatch:e,draft:t,featureComposeFlowFiles:a,pendingFiles:n,draftFiles:s}){const r=Object(nb.a)();if(!a)return null;const i=Object(J.d)(t),l=s.filter(e=>!n.find(t=>t.persistedFileId===e.persistedFileId)),c=[...n,...l];return o.a.createElement("div",null,o.a.createElement(Vf.a,{files:c,isEagerUpload:!0,onFilesSelected:t=>{r.info("COMPOSER",`Preparing to upload ${t.length} files`),e(Ff({draftId:i,files:t}))},onRemoveFile:({pendingFileId:t,persistedFileId:a}={})=>{e(Wf({draftId:i,pendingFileId:t,persistedFileId:a,shouldUpdateDraft:!0}))}}))}Yf.displayName="ComposerFiles",Yf.defaultProps=$f;var Qf=Object(u.b)((e,{draft:t})=>{const a=Object(J.d)(t),n=Object(Bf.a)(e,{draftId:a}),s=Object(P.a)(Object(ht.a)(n,t=>Object(Df.a)(e,{pendingFileId:t}))),r=t.files.map(t=>Object(Kf.a)(e,t));return{pendingFiles:s,featureComposeFlowFiles:Object(C.h)(e),draftFiles:r}},null,null,{areStatePropsEqual:(e,t)=>Object(zf.a)(e,t,3)})(Yf);a("oV5z");const Xf=new x.b("drafts"),Jf=(l.default.string,l.default.func,l.default.object,l.default.bool,l.default.bool,{contextChannelId:void 0,dispatch:r.a,draft:{},featureComposeFlow:!1,isExpanded:!1});function Zf({contextChannelId:e,dispatch:t,draft:a,featureComposeFlow:n,isExpanded:l}){var c=Object(i.useState)(),u=at()(c,2);const p=u[0],h=u[1],m=Object(i.useRef)(),b=Object(nb.a)(),f=Object(sb.a)(),_=Object(J.d)(a);Object(rb.a)(()=>{Object(J.l)(a)?h("body"):(h("dest"),m.current&&m.current.focus())},[_]);const g=Object(J.c)(a),y=Object(J.j)(a),O=Object(Hc.a)(g)+Object(Hc.a)(y);Object(i.useEffect)(()=>{f.track(de.EventId.COMPOSE_FLOW,{draft_id:_,draft_num_destinations:O,contexts:{ui_context:{step:de.UiStep.COMPOSE_FLOW_SET_DESTINATION}}})},[f,_,O]);var C=Object(ab.a)(!1,1500),v=at()(C,2);const E=v[0],k=v[1];var S=Object(ab.a)(!1,3e3),j=at()(S,2);const I=j[0],w=j[1];if(function(e,t=r.a,a=document){const n=Object(nb.a)();e||n.warn("USE_EVENT_LISTENER",'Missing required "eventName"');const s=Object(i.useRef)();Object(i.useEffect)(()=>{s.current=t},[t]),Object(i.useEffect)(()=>{const t=e=>s.current(e);return a.addEventListener(e,t),()=>{a.removeEventListener(e,t)}},[e,a])}("keydown",e=>{"Escape"===e.key&&(Object(J.r)(a)&&t(Object(Oa.a)({ids:[_]})),f.track(de.EventId.COMPOSE_FLOW,{draft_id:_,draft_is_empty:Object(J.r)(a),contexts:{ui_context:{action:de.UiAction.KEYDOWN,step:de.UiStep.COMPOSE_FLOW_CLOSE}}}))}),!n)return null;if(Object(io.a)(a))return t(eb({reason:"composer_page_empty"})),null;function T(e){b.info("COMPOSER",`Saving draft (id:${_})`),t(Object(Oa.f)(e)),k(!0),w(!0)}const N=e&&!l;return o.a.createElement("div",{className:d()("p-composer_page",{"p-composer_page--noncontextual":!N,"p-composer_page--expanded":l})},o.a.createElement(yf,{draft:a,isFocused:!Object(J.l)(a)||"dest"===p,onChange:e=>T(s()({},a,{destinations:e})),onFocus:()=>h("dest"),onSelect:()=>h("body"),ref:m}),!l&&o.a.createElement("div",{className:"p-composer_page__body"},o.a.createElement(Ab,{channelId:e,draft:a,key:e,renderFooter:()=>{let e;if(E)e=Xf.t("Saving message\u2026");else if(I)e=Xf.t("Draft saved");else{const t=Object(J.i)(a),n=Object(J.f)(a);if(t&&t!==n){const a=t/1e3,n=Object(Mp.a)(a)?Object($m.a)(a):Object(zm.a)(a);e=Xf.rt("Edited {lastEdited}",{lastEdited:n})}}return o.a.createElement("div",{className:"p-composer_page__context_list_meta"},e)},viewId:"composer_context"})),o.a.createElement(tb.a,null,({height:e,measureRef:n})=>o.a.createElement("div",{className:"p-composer_page__footer",ref:n},o.a.createElement("div",{className:"p-composer_page__message_input_wrapper",style:{height:l?e:void 0}},o.a.createElement(Rf,{draft:a,height:e,isExpanded:l,isFocused:"body"===p,onChange:({ops:e,range:t={}})=>T(s()({},a,{ops:e,cursor_index:t.index})),onExpand:e=>t(Object(Ym.b)({draftId:_,isExpanded:e})),onFocus:()=>h("body")}),o.a.createElement(Qf,{draft:a})))))}Zf.displayName="ComposerPage",Zf.defaultProps=Jf;var e_=Object(u.b)(e=>{const t=Xm(e),a=Object(C.d)(e,t);return{contextChannelId:ib(e,a),draft:a,featureComposeFlow:Object(C.g)(e),isExpanded:Qm(e,{draftId:t})}})(Zf),t_=a("ukTK"),a_=a("OYPW"),n_=a("rsVu"),s_=a("hhak");const r_=new x.b("drafts"),i_=(l.default.func,l.default.bool,l.default.func,{dispatch:r.a,featureComposeFlowSidebar:!1,undo:r.a});function o_({dispatch:e,featureComposeFlowSidebar:t,undo:a}){return t?o.a.createElement(Ba.b,null,r_.t("The draft has been deleted."),"\xa0",o.a.createElement(Ze.a,{onClick:()=>{a(),e(Object(_a.b)())}},r_.t("Undo"))):null}o_.displayName="DeleteDraftToast",o_.defaultProps=i_;var l_=Object(u.b)(function(e){return{featureComposeFlowSidebar:Object(C.j)(e)}})(o_),c_=a("KCFn");const d_=Object(mt.b)("Restore a deleted channel draft",(e,t,{channelId:a,threadTs:n,draft:s}={})=>{if(!a||Object(io.a)(s))return;const r=Object(c_.d)(a,n);r&&(r.setContents({contents:s.ops}),s.range&&r.setCursor(s.range.index,s.range.length)),Object(ie.a)({getState:t}).track(de.EventId.COMPOSE_FLOW,{draft_id:Object(J.d)(s),draft_type:n?"thread":"channel",contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.COMPOSE_FLOW_UNDO_DELETE}}}),e(Object(Oa.e)({channelId:a,threadTs:n,delta:new da.a(s.ops),broadcast:s.broadcast,range:s.range}))});d_.meta={name:"undoDeletedChannelDraft",key:"draftsStoreThunksUndoDeletedDraftUndoDeletedChannelDraft",description:"Restore a deleted channel draft"},d_.propTypes={channelId:l.default.string.isRequired,draft:l.default.object.isRequired,threadTs:l.default.string};const u_=Object(mt.b)("Restore a deleted composer draft",(e,t,{draft:a}={})=>{if(Object(io.a)(a))return;Object(ie.a)({getState:t}).track(de.EventId.COMPOSE_FLOW,{draft_id:Object(J.d)(a),draft_type:"composer",contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.COMPOSE_FLOW_UNDO_DELETE}}}),e(Object(Oa.f)(a))});u_.meta={name:"undoDeletedComposerDraft",key:"draftsStoreThunksUndoDeletedDraftUndoDeletedComposerDraft",description:"Restore a deleted composer draft"},u_.propTypes={draft:l.default.object.isRequired};const p_=Object(mt.b)("Open a toast with an option to restore a deleted draft",(e,t,{undo:a}={})=>{e(Object(_a.c)({element:o.a.createElement(l_,{undo:a})}))});p_.meta={name:"openDeleteToast",key:"draftsStoreThunksDeleteDraftWithUndoOpenDeleteToast",description:"Open a toast with an option to restore a deleted draft"},p_.propTypes={undo:l.default.func};const h_=Object(mt.b)("Clear a channel draft with the option to undo",(e,t,{channelId:a,threadTs:n}={})=>{const s=t(),r=Object(C.b)(s,{channelId:a,threadTs:n});if(!r)return;e(Object(Oa.b)({channelId:a,threadTs:n}));const i=Object(c_.c)({channelId:a,threadTs:n});e(Object(Ym.a)({draftId:i}));const o=Object(c_.d)(a,n);o&&o.clear(),e(p_({undo:()=>e(d_({channelId:a,threadTs:n,draft:r}))}))});h_.meta={name:"deleteChannelDraftWithUndo",key:"draftsStoreThunksDeleteDraftWithUndoDeleteChannelDraftWithUndo",description:"Clear a channel draft with the option to undo"},h_.propTypes={channelId:l.default.string.isRequired,threadTs:l.default.string};const m_=Object(mt.b)("Clear a composer draft with the option to undo",(e,t,{draftId:a}={})=>{const n=t(),s=Object(C.d)(n,a);s&&(e(Gf({draft:s})),e(Object(Oa.a)({ids:[a]})),e(Object(Ym.a)({draftId:a})),Object(J.r)(s)||e(p_({undo:()=>e(u_({draft:s}))})))});m_.meta={name:"deleteComposerDraftWithUndo",key:"draftsStoreThunksDeleteDraftWithUndoDeleteComposerDraftWithUndo",description:"Clear a composer draft with the option to undo"},m_.propTypes={draftId:l.default.string.isRequired};var b_=a("4RH7"),f_=a("A+cF");function __(e,t){return e?`${e}__${t}`:t}var g_=o.a.createContext({setIsMenuOpen:r.a});a("3Dhv");l.default.string,Ku.a.Ref,l.default.string.isRequired,l.default.oneOfType([l.default.node,l.default.func]);const y_={className:void 0,forwardedRef:void 0,tooltip:void 0};function O_(e){let t=e.className,a=e.forwardedRef,n=e.icon,r=e.tooltip,l=fp()(e,["className","forwardedRef","icon","tooltip"]);const c=Object(i.useContext)(g_).dataQaPrefix,u=o.a.createElement(Up.a,s()({className:d()(t,"c-card_container__action"),"data-qa":__(c,`card_action--${n}`),icon:n,ref:a,size:"small"},l));return r?o.a.createElement(Xr.c,{tip:r},u):u}O_.displayName="CardAction",O_.defaultProps=y_;var C_=o.a.forwardRef((e,t)=>o.a.createElement(O_,s()({forwardedRef:t},e)));const v_=new x.b("message"),E_=(l.default.func,l.default.func,l.default.string,{onClose:r.a,onOpen:r.a,position:"top-right"});function k_(e){let t=e.onClose,a=e.onOpen,n=e.position,r=fp()(e,["onClose","onOpen","position"]);var l=Object(i.useContext)(g_);const c=l.dataQaPrefix,d=l.onMenuClose,u=l.onMenuOpen;return o.a.createElement(fn.e,s()({"data-qa":__(c,"card_action_overflow"),onClose:(...e)=>{d(),t(...e)},onOpen:(...e)=>{u(),a(...e)},position:n},r),o.a.createElement(C_,{icon:"vertical-ellipsis",tooltip:v_.t("More actions")}))}k_.displayName="CardActionOverflow",k_.defaultProps=E_;l.default.node.isRequired,l.default.oneOf(["floating","inset"]).isRequired;function S_({children:e,position:t}){var a=Object(i.useContext)(g_);const n=a.dataQaPrefix,s=a.isFocused,r=a.isHovered,l=a.isMenuOpen,c=s||r||l;return o.a.createElement("div",{className:d()("c-card_container__actions",`c-card_container__actions--position_${t}`,{"c-card_container__actions--visible":c}),"data-qa":__(n,"card_actions"),"data-qa-position":t,"data-qa-visible":c},e)}S_.displayName="CardActions";var j_=S_;l.default.node.isRequired,l.default.string,l.default.string,l.default.oneOf([0,1,2,3]),l.default.bool,l.default.bool,l.default.oneOf(["small","medium","large"]).isRequired;const I_={className:void 0,dataQaPrefix:void 0,elevation:0,isFocused:!1,isHovered:!1};function w_(e){let t=e.children,a=e.className,n=e.dataQaPrefix,r=e.elevation,l=e.isFocused,c=e.isHovered,u=e.size,p=fp()(e,["children","className","dataQaPrefix","elevation","isFocused","isHovered","size"]);var h=Object(i.useState)(!1),m=at()(h,2);const b=m[0],f=m[1];var _=Object(i.useState)(!1),g=at()(_,2);const y=g[0],O=g[1];var C=Object(i.useState)(!1),v=at()(C,2);const E=v[0],k=v[1],S=Object(i.useMemo)(()=>({dataQaPrefix:n,isFocused:l||y,isHovered:c||E,isMenuOpen:b,onMenuClose:()=>{f(!1),O(!1),k(!1)},onMenuOpen:()=>{f(!0)}}),[n,l,y,c,E,b]);return o.a.createElement("div",s()({className:d()(a,"c-card_container",`c-card_container--elevation_${r}`,{[`c-card_container--size_${u}`]:u}),"data-qa":__(n,"card"),"data-qa-elevation":r,"data-qa-size":u,onBlur:()=>O(!1),onFocus:()=>O(!0),onMouseOut:()=>k(!1),onMouseOver:()=>k(!0)},p),o.a.createElement(g_.Provider,{value:S},t))}w_.displayName="CardContainer",w_.defaultProps=I_;var T_=w_,N_=a("YaVv"),A_=a("forh");l.default.object.isRequired,l.default.object;const R_={draftBlocks:void 0};function M_({draft:e,draftBlocks:t}){return Object(io.a)(t)?null:o.a.createElement(A_.a,{blocks:t.blocks,blocksContainerContext:Vp.a.draft,containerId:Object(J.d)(e),disableHighlights:!0})}M_.displayName="DraftPreview",M_.defaultProps=R_;var P_=Object(u.b)(function(e,{draft:t}){const a=new da.a(t.ops);return{draftBlocks:Object(N_.a)(e,a)}})(M_);const x_=new x.b("drafts"),L_=(l.default.func,l.default.bool,l.default.object.isRequired,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.arrayOf(l.default.string),l.default.number,{dispatch:r.a,draftTeamId:void 0,do24hrTime:!1,featureComposeFlow:!1,hasFocus:!1,hasFocusWithin:!1,replyUsers:void 0,replyUsersCount:void 0});function F_({dispatch:e,do24hrTime:t,draft:a,draftTeamId:n,featureComposeFlow:s,hasFocus:r,hasFocusWithin:i,replyUsers:l,replyUsersCount:c}){if(!s)return null;function u(t){if(t.preventDefault(),t.stopPropagation(),Object(J.p)(a)){const t=Object(J.d)(a);e(ym({draftId:t}))}else{var s=Object(J.b)(a)||{};const t=s.channelId,r=s.threadTs;e(r?Object(s_.a)({channelId:t,teamId:n,threadTs:r}):Object(qn.a)({id:t,teamId:n}))}}const p=Object(J.i)(a),h=p/1e3;return o.a.createElement(T_,{className:d()("p-drafts_page__draft",{"p-drafts_page__draft--focused":r||i}),isFocused:r,onClick:u,role:"button",size:"medium",tabIndex:"-1"},o.a.createElement(f_.d,{text:o.a.createElement("div",{className:"p-drafts_page__draft_header"},Object(J.l)(a)?o.a.createElement(bf,{draft:a}):x_.t("No destination"),o.a.createElement("div",{className:"p-drafts_page__draft_meta"},p&&o.a.createElement("span",{className:"p-drafts_page__draft_timestamp"},x_.t("{date} at {time}",{date:Object(zm.a)(h,{shortenMonth:!0}),time:Object(n_.a)(h,{do24hrTime:t})})),o.a.createElement("div",{className:"p-drafts_page__draft_badge p-drafts_page__draft_badge--text"},x_.t("Draft")),!Object(J.p)(a)&&o.a.createElement("div",{className:"p-drafts_page__draft_badge p-drafts_page__draft_badge--icon"},o.a.createElement(bn.b,{size:"inherit",type:"pencil"})))),subtext:o.a.createElement(o.a.Fragment,null,!Object(io.a)(l)&&o.a.createElement(b_.a,{className:"p-drafts_page__draft_thread_participants",replyUsers:l,replyUsersCount:c}),Object(J.n)(a)&&o.a.createElement("div",{className:"p-drafts_page__draft_body"},o.a.createElement(P_,{draft:a}))),size:"medium"}),o.a.createElement(j_,{position:"floating"},o.a.createElement(C_,{icon:"pencil",onClick:u,tooltip:x_.t("Edit draft")}),o.a.createElement(C_,{icon:"trash",onClick:function(t){if(t.preventDefault(),t.stopPropagation(),Object(J.p)(a)){const t=Object(J.d)(a);e(m_({draftId:t}))}else{var n=Object(J.b)(a)||{};const t=n.channelId,s=n.threadTs;e(h_({channelId:t,threadTs:s}))}},tooltip:x_.t("Delete draft")})))}F_.displayName="DraftItem",F_.defaultProps=L_;var D_=Object(u.b)(function(e,{draftId:t}){const a=Object(C.d)(e,t);var n=Object(J.b)(a)||{};const s=n.channelId,r=n.threadTs;let i;const o=Object(B.e)(e,s);let l,c;if(Object(q.db)(o)&&(i=Object(q.ac)(e,o)),!Object(J.p)(a)){const t=Object(ae.a)(e,s,r);l=Object($e.T)(t),c=Object($e.U)(t)}return{do24hrTime:Object(ba.k)(e,"time24"),draft:a,draftTeamId:i,featureComposeFlow:Object(C.g)(e),replyUsers:l,replyUsersCount:c}})(F_);const B_=new x.b("drafts"),U_=(l.default.arrayOf(l.default.object),l.default.bool,{drafts:void 0,featureComposeFlow:!1});function q_({drafts:e,featureComposeFlow:t}){const a=Object(a_.a)(()=>{const e=new t_.a({DEFAULT_HEIGHT:80});return new Cr.a({heightCache:e})});if(!t)return null;const n=e.map(e=>Object(J.d)(e));function s({key:e}){return Object(fo.a)(n,e)}function r(e,{hasFocus:t,hasFocusWithin:a,isHovered:s}){const r=n[e];return o.a.createElement(D_,{draftId:r,hasFocus:t,hasFocusWithin:a,isHovered:s})}return o.a.createElement(pr.a,null,({width:e,height:t})=>o.a.createElement(Or.a,{animateOnScroll:!1,height:t,isFocusableItem:s,"aria-label":B_.t("Drafts"),keys:n,layout:a,rowRenderer:r,width:e}))}q_.displayName="DraftList",q_.defaultProps=U_;var H_=Object(u.b)(function(e){return{featureComposeFlow:Object(C.g)(e)}})(q_);a("/UDf");l.default.func,l.default.arrayOf(l.default.object),l.default.bool.isRequired;const W_={dispatch:r.a,visibleUnifiedDrafts:void 0};function G_({visibleUnifiedDrafts:e,dispatch:t,showDraftsPageSidebar:a}){if(Object(io.a)(e)&&!a)return t(eb({reason:"drafts_page_empty"})),null;const n=Object(J.t)(e);return o.a.createElement("div",{className:"p-drafts_page"},o.a.createElement(H_,{drafts:n}))}G_.displayName="DraftsPage",G_.defaultProps=W_;var K_=Object(u.b)(function(e){return{visibleUnifiedDrafts:ne(e,{includeAllTeams:!0}),showDraftsPageSidebar:Object(C.k)(e)}})(G_),V_=a("Cvbp"),z_=a("zbZx"),$_=a("N1Yt"),Y_=a("2WV3"),Q_=a("kAFe"),X_=a("+Lv6"),J_=a("AgpX"),Z_=a("iB/r"),eg=a("lek6"),tg=a("hW7Y");l.default.object.isRequired,l.default.object,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired;const ag={message:void 0,isInMutedChannel:!1};class inbox_item_InboxItem extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onClickItem","onClickArchive","onClickMarkAsRead"]),this.state={focused:!1}}onClickItem(){var e=this.props;const t=e.item,a=e.isRead,n=e.message,s=this.state.focused;a||s||this.props.markItemAsRead(t),n&&this.setState(()=>({focused:!s}))}onClickArchive(e){var t=this.props;const a=t.item,n=t.isArchived;e.preventDefault(),e.stopPropagation(),n?this.props.unarchiveItem({id:"reminder"===a.type?a.reminderId:a.id,type:a.type}):this.props.archiveItem({id:"reminder"===a.type?a.reminderId:a.id,type:a.type,subtype:a.subtype||null,channelId:a.channelId||null})}onClickMarkAsRead(e){var t=this.props;const a=t.item,n=t.isRead;e.preventDefault(),e.stopPropagation(),n?this.props.markItemAsUnread(a):this.props.markItemAsRead(a)}renderSharedActions(){var e=this.props;const t=e.isArchived,a=e.isRead;return o.a.createElement(i.Fragment,null,o.a.createElement(tg.c,{tip:a?"Mark unread":"Mark as read",delay:0},o.a.createElement(Z_.a,{icon:"emoji-objects",className:"p-inbox__item_actions--mark-as-read",onClick:this.onClickMarkAsRead})),o.a.createElement(tg.c,{tip:t?"Unarchive":"Archive",delay:0},o.a.createElement(Z_.a,{icon:"circle-checkbox-checked-o",className:"p-inbox__item_actions--archive",onClick:this.onClickArchive})))}renderTruncatedMessage(){const e=this.props.message;return o.a.createElement(i.Fragment,null,o.a.createElement("span",{className:"p-inbox__item_sender"},o.a.createElement(Qt.a,{msg:e})),o.a.createElement("span",{className:"p-inbox__item_content"},o.a.createElement($_.a,{lines:1},Object($e.mb)(e)?o.a.createElement(Y_.a,{richTextBlock:e.blocks[0]}):o.a.createElement(Xt.a,{msg:e}))))}renderMessage(){var e=this.props;const t=e.item,a=e.message,n=e.includeActions,s=a,r=o.a.createElement(zt.a,{msg:s},o.a.createElement($t.a,{light:o.a.createElement(Yt.a,{msg:s})},o.a.createElement(Qt.a,{msg:s}),"\xa0\xa0",o.a.createElement(ta.a,{msg:s,clickable:!0,full:!0}),o.a.createElement("br",null),o.a.createElement(Xt.a,{msg:s}),o.a.createElement(Jt.a,{msg:s,blocksContainerContext:Vp.a.all_unreads}),o.a.createElement(ea.b,{msg:s}),o.a.createElement(zp.a,{msg:s}),o.a.createElement(Qp.a,{msg:s}),o.a.createElement(th,{msg:s,className:"p-unreads_view__thread_replies"}),o.a.createElement(Jp,{msg:s}))),i=o.a.createElement(sh.a,null,o.a.createElement(rh.a,{msg:s,showComment:!0,showShare:!0,messageContainerType:Ln.I.UNREAD_VIEW,position:"above"},r)),l=n?i:r;return o.a.createElement("div",{className:"p-inbox__item p-inbox__item--expanded"},o.a.createElement(_e.c,{className:"p-inbox__item_header",onClick:this.onClickItem},o.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),o.a.createElement("span",{className:"p-inbox__item_source"},o.a.createElement(Ua.a,{onClick:()=>this.props.setPrimaryView({id:t.channelId})},o.a.createElement(Bp.a,{channelId:t.channelId}))),o.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())),o.a.createElement("div",{className:"p-inbox__item_message"},l))}renderIconWithTooltip(){const e=this.props.item;let t,a;return"mention"===e.type?(t="comment-alt",a="You were mentioned",e.subtype&&"cursor_mark"===e.subtype?(t="mark_unread",a="You marked this channel unread"):e.subtype&&"dm"===e.subtype&&(t="user",a="You received this direct message")):"star"===e.type?(t="star-o",a="You starred this item"):"reminder"===e.type&&(t="check-list",a="You set this reminder"),o.a.createElement(tg.c,{tip:a},o.a.createElement(bn.b,{type:t}))}renderMention(){var e=this.props;const t=e.item,a=e.isArchived,n=e.isRead,s=e.isInMutedChannel;return!e.message||s?null:o.a.createElement(i.Fragment,null,this.state.focused?this.renderMessage():o.a.createElement(_e.c,{className:d()("p-inbox__item",{"p-inbox__item--archived":a,"p-inbox__item--read":n}),onClick:this.onClickItem},o.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),o.a.createElement(tg.c,{tip:o.a.createElement(Bp.a,{channelId:t.channelId,className:"normal_wrap"})},o.a.createElement("span",{className:"p-inbox__item_source"},o.a.createElement(Bp.a,{channelId:t.channelId}))),this.renderTruncatedMessage(),o.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())))}renderStarredItem(){var e=this.props;const t=e.item,a=e.isArchived,n=e.isRead;return e.message?o.a.createElement(i.Fragment,null,this.state.focused?this.renderMessage():o.a.createElement(_e.c,{className:d()("p-inbox__item",{"p-inbox__item--archived":a,"p-inbox__item--read":n}),onClick:this.onClickItem},o.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),o.a.createElement(tg.c,{tip:o.a.createElement(Bp.a,{channelId:t.channelId,className:"normal_wrap"})},o.a.createElement("span",{className:"p-inbox__item_source"},o.a.createElement(Bp.a,{channelId:t.channelId}))),this.renderTruncatedMessage(),o.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions()))):null}renderReminder(){var e=this.props;const t=e.item,a=e.isArchived,n=e.isRead,s=e.message;let r=null,l=null;return s?r=s:l=Object(Lr.q)(t.text)?o.a.createElement(J_.a,{href:t.text}):o.a.createElement(eg.a,{text:t.text}),o.a.createElement(i.Fragment,null,this.state.focused&&r?this.renderMessage():o.a.createElement(_e.c,{className:d()("p-inbox__item",{"p-inbox__item--archived":a,"p-inbox__item--read":n}),onClick:this.onClickItem},o.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),r?o.a.createElement(tg.c,{tip:o.a.createElement(Bp.a,{channelId:t.channelId,className:"normal_wrap"})},o.a.createElement("span",{className:"p-inbox__item_source"},o.a.createElement(Bp.a,{channelId:t.channelId}))):o.a.createElement(i.Fragment,null,o.a.createElement("span",{className:"p-inbox__item_source"},"Reminder"),o.a.createElement("span",{className:"p-inbox__item_sender"},"You")),r?this.renderTruncatedMessage():o.a.createElement("span",{className:"p-inbox__item_content"},o.a.createElement($_.a,{lines:1},l)),o.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())))}render(){var e=this.props;const t=e.item;return e.visible?o.a.createElement(X_.b,null,"mention"===t.type&&this.renderMention(),"star"===t.type&&this.renderStarredItem(),"reminder"===t.type&&this.renderReminder()):null}}inbox_item_InboxItem.displayName="InboxItem",inbox_item_InboxItem.defaultProps=ag;const ng={archiveItem:(...e)=>Object(Q_.b)(...e),unarchiveItem:(...e)=>Object(Q_.h)(...e),markItemAsRead:(...e)=>Object(Q_.f)(...e),markItemAsUnread:(...e)=>Object(Q_.g)(...e),setPrimaryView:(...e)=>Object(qn.a)(...e)};var sg=Object(u.b)((e,t)=>{const a=t.item,n=Object(ae.a)(e,a.channelId,a.messageTs),s=Object(B.e)(e,a.channelId),r=Object(Se.d)(e).id,i=Object(q.B)(e,s)||[];return{item:a,message:n,includeActions:!Object(z_.d)(e)||Object(q.kb)(s)||Object(q.yb)(s)||i.includes(r),isArchived:a.archived,isRead:a.read,isInMutedChannel:s&&Object(xu.c)(e,s.id)}},ng)(inbox_item_InboxItem);a("m2U7");l.default.array.isRequired,l.default.func.isRequired;class inbox_view_InboxView extends i.Component{constructor(e){super(e),Object(la.a)(this,["toggleArchives"]),this.state={includeArchives:!1}}componentDidMount(){this.props.refreshInbox()}toggleArchives(){const e=this.state.includeArchives;this.setState(()=>({includeArchives:!e}))}renderDay(e){const t=this.state.includeArchives;let a=!1;const n=Object.values(e).map(e=>(a=a||!!t||!e.archived,o.a.createElement(sg,{key:"reminder"===e.type?`${e.type}-${e.reminderId}`:`${e.type}-${e.id}`,item:e,visible:!!t||!e.archived})));return a?o.a.createElement(i.Fragment,null,o.a.createElement("h4",null,Object(zm.a)(e[0].id)),o.a.createElement("div",{className:"p-inbox__day",key:e[0].id},n)):null}renderItems(){const e=this.props.items,t=[],a=e;return Object(Rp.a)(a,e=>{t.push(this.renderDay(e))}),t}render(){return o.a.createElement("div",{className:"p-workspace__primary_view_body p-inbox"},o.a.createElement(_e.c,{className:"float_right micro",onClick:this.toggleArchives},o.a.createElement(bn.b,{type:"archive",size:"inherit",className:"margin_right_25"}),this.state.includeArchives?"Hide archived items":"Include archived items"),this.renderItems())}}inbox_view_InboxView.displayName="InboxView";const rg={refreshInbox:V_.a};var ig=Object(u.b)(e=>({items:Object(Hm.c)(e)}),rg)(inbox_view_InboxView);l.default.string.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired;class inbox_header_InboxHeader extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onClickRefresh","onClickMarkAllAsRead","onClickArchiveAll"])}onClickRefresh(){this.props.refreshInbox()}onClickMarkAllAsRead(){this.props.markAllAsRead()}onClickArchiveAll(){this.props.archiveAll()}render(){const e=this.props.className;return o.a.createElement("div",{className:e},o.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},o.a.createElement("div",{className:"p-classic_nav__channel_header__title p-classic_nav__no_drag"},"Home")),o.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},o.a.createElement(Ua.a,{onClick:this.onClickRefresh},"Refresh")," |"," ",o.a.createElement(Ua.a,{onClick:this.onClickMarkAllAsRead},"Mark all as read")," |"," ",o.a.createElement(Ua.a,{onClick:this.onClickArchiveAll},"Archive all")))}}inbox_header_InboxHeader.displayName="InboxHeader";const og={refreshInbox:V_.a,markAllAsRead:Q_.e,archiveAll:Q_.a};var lg=Object(u.b)(null,og)(inbox_header_InboxHeader),cg=a("ANjH"),dg=a("1tsX"),ug=a("QkOX"),pg=a("O5cs"),hg=a("Uibu");function mg({uiStep:e,uiElement:t,referringEventId:a,additionalPayload:n}={}){return s()({},n,{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.CLICK,[de.UiContextKeys.ui_component]:de.UiComponent.APP_LAUNCHER_BANNER,[de.UiContextKeys.step]:e,[de.UiContextKeys.ui_element]:t},[de.ClientEventKeys.referring_event_id]:a})}function bg(e){return e.replace(/-/g,"_")}const fg=Object(mt.b)("Clog App Launcher Banner Impression",(e,t,a)=>{const n=t(),s=Object(ie.a)({state:n}),r=Object(pg.q)(n),i=a?bg(a):"";s.track(de.EventId.APP_LAUNCHER,{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.IMPRESSION,[de.UiContextKeys.ui_component]:de.UiComponent.APP_LAUNCHER_BANNER,[de.UiContextKeys.step]:i},[de.ClientEventKeys.referring_event_id]:r})});fg.meta={name:"clogImpression",key:"actionsAppLauncherBannerActionsClogImpression",description:"Clog App Launcher Banner Impression"},fg.propTypes={bannerKey:l.default.string};const _g=Object(mt.b)("Handle a click to the App Directory and clog",(e,t,a)=>{const n=t(),s=Object(h.b)(n),r=Object(Se.i)(n,s),i=Object(ie.a)({state:n}),o=Object(pg.q)(n),l=mg({uiStep:a?bg(a):"",uiElement:de.UiElement.LINK_APP_DIRECTORY,referringEventId:o});i.track(de.EventId.APP_LAUNCHER,l),Object(xe.P)(r,"/apps")});_g.meta={name:"navigateToAppDirectory",key:"actionsAppLauncherBannerActionsNavigateToAppDirectory",description:"Handle a click to the App Directory and clog"},_g.propTypes={bannerKey:l.default.string};const gg=Object(mt.b)("Handle a click to the slack.com/apps/manage and clog",(e,t,a)=>{const n=t(),s=Object(h.b)(n),r=Object(Se.i)(n,s),i=Object(ie.a)({state:n}),o=Object(pg.q)(n),l=mg({uiStep:a?bg(a):"",uiElement:de.UiElement.LINK_MANAGE_APPS,referringEventId:o});i.track(de.EventId.APP_LAUNCHER,l),Object(xe.P)(r,"/apps/manage")});gg.meta={name:"navigateToManageApps",key:"actionsAppLauncherBannerActionsNavigateToManageApps",description:"Handle a click to the slack.com/apps/manage and clog"},gg.propTypes={bannerKey:l.default.string};const yg=Object(mt.b)("Handle a click to the slack.com/pricing and clog",(e,t,a)=>{const n=t(),s=Object(h.b)(n),r=Object(Se.i)(n,s),i=Object(ie.a)({state:n}),o=Object(pg.q)(n),l=mg({uiStep:a?bg(a):"",uiElement:de.UiElement.LINK_PRICING,referringEventId:o});i.track(de.EventId.APP_LAUNCHER,l),Object(xe.P)(r,Object(gr.k)({entryPoint:"app_launcher_banner"}))});yg.meta={name:"navigateToPricing",key:"actionsAppLauncherBannerActionsNavigateToPricing",description:"Handle a click to the slack.com/pricing and clog"},yg.propTypes={bannerKey:l.default.string};const Og=Object(mt.b)("Clog and set dismiss welcome banner pref",(e,t,a)=>{const n=t(),s=Object(ie.a)({state:n}),r=Object(pg.q)(n),i=mg({uiStep:a?bg(a):"",uiElement:de.UiElement.BTN_CLOSE,referringEventId:r});s.track(de.EventId.APP_LAUNCHER,i),e(Object(Ka.f)({pref:"dismissed_app_launcher_welcome",value:!0})),e(Object(qm.p)({isBannerDismissed:!0})),e(Object(qm.f)())});Og.meta={name:"setWelcomeDismissedPref",key:"actionsAppLauncherBannerActionsSetWelcomeDismissedPref",description:"Clog and set dismiss welcome banner pref"},Og.propTypes={bannerKey:l.default.string};const Cg=Object(mt.b)("Clog and set dismiss limit banner pref",(e,t,a)=>{const n=t(),s=Object(ie.a)({state:n}),r=Object(pg.q)(n),i=mg({uiStep:a?bg(a):"",uiElement:de.UiElement.BTN_CLOSE,referringEventId:r});s.track(de.EventId.APP_LAUNCHER,i),e(Object(Ka.f)({pref:"dismissed_app_launcher_limit",value:!0})),e(Object(qm.p)({isBannerDismissed:!0})),e(Object(qm.f)())});Cg.meta={name:"setLimitDismissedPref",key:"actionsAppLauncherBannerActionsSetLimitDismissedPref",description:"Clog and set dismiss limit banner pref"},Cg.propTypes={bannerKey:l.default.string};const vg=Object(mt.b)("Clog and set dismiss limit banner pref and welcome dismissed pref",(e,t,a)=>{const n=t(),s=Object(ie.a)({state:n}),r=Object(pg.q)(n),i=mg({uiStep:a?bg(a):"",uiElement:de.UiElement.BTN_CLOSE,referringEventId:r});s.track(de.EventId.APP_LAUNCHER,i),e(Object(Ka.e)({dismissed_app_launcher_limit:!0,dismissed_app_launcher_welcome:!0})),e(Object(qm.p)({isBannerDismissed:!0})),e(Object(qm.f)())});vg.meta={name:"setLimitAndWelcomeDismissedPref",key:"actionsAppLauncherBannerActionsSetLimitAndWelcomeDismissedPref",description:"Clog and set dismiss limit banner pref and welcome dismissed pref"},vg.propTypes={bannerKey:l.default.string};const Eg=Object(mt.b)("re-activate app limit banner",(e,t,a)=>{const n=t(),s=Object(ie.a)({state:n}),r=Object(pg.q)(n),i=mg({uiStep:a?bg(a):"",uiElement:de.UiElement.BTN_SHOW_ME,referringEventId:r});return s.track(de.EventId.APP_LAUNCHER,i),e(Object(qm.p)({isBannerDismissed:!1})),e(Object(Ka.f)({pref:"dismissed_app_launcher_limit",value:!1})).then(()=>{e(Object(qm.f)())})});Eg.meta={name:"restoreLimitBanner",key:"actionsAppLauncherBannerActionsRestoreLimitBanner",description:"re-activate app limit banner"},Eg.propTypes=null;const kg=Object(mt.b)("re-activate app limit and app welcome banner",(e,t,a)=>{const n=t(),s=Object(ie.a)({state:n}),r=Object(pg.q)(n),i=mg({uiStep:a?bg(a):"",uiElement:de.UiElement.BTN_SHOW_ME,referringEventId:r});return s.track(de.EventId.APP_LAUNCHER,i),e(Object(qm.p)({isBannerDismissed:!1})),e(Object(Ka.e)({dismissed_app_launcher_limit:!1,dismissed_app_launcher_welcome:!1})).then(()=>{e(Object(qm.f)())})});kg.meta={name:"restoreLimitAndWelcomeBanner",key:"actionsAppLauncherBannerActionsRestoreLimitAndWelcomeBanner",description:"re-activate app limit and app welcome banner"},kg.propTypes=null;const Sg=new x.b("app_launcher"),jg=(l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.func,{restoreLimitBanner:r.a,restoreLimitAndWelcomeBanner:r.a,hasDismissedWelcomeBanner:!1,hasDismissedLimitBanner:!1,scrollToKey:r.a});class app_launcher_persistent_banner_AppsLauncherPersistentBanner extends i.Component{constructor(e){super(e),this.restorePrimaryBanner=this.restorePrimaryBanner.bind(this)}restorePrimaryBanner(){var e=this.props;const t=e.hasDismissedWelcomeBanner,a=e.hasDismissedLimitBanner;let n="";t&&a?(n="free-limit-welcome",this.props.restoreLimitAndWelcomeBanner(n).then(()=>{this.props.scrollToKey(n)})):a&&(n="free-limit",this.props.restoreLimitBanner(n).then(()=>{this.props.scrollToKey(n)}))}render(){return o.a.createElement("div",{className:"padding_left_125 padding_right_125 padding_top_75 padding_bottom_75 align_center caption sk_off_white_bg"},Sg.rt("Upgrade for unlimited apps. <Link>Learn more</Link>",null,({key:e,text:t})=>o.a.createElement(Ze.a,{key:e,onClick:this.restorePrimaryBanner},t)))}}app_launcher_persistent_banner_AppsLauncherPersistentBanner.displayName="AppsLauncherPersistentBanner",app_launcher_persistent_banner_AppsLauncherPersistentBanner.defaultProps=jg;var Ig=Object(u.b)(e=>({hasDismissedWelcomeBanner:Object(hg.b)(e),hasDismissedLimitBanner:Object(hg.a)(e),isPrimaryBannerDismissed:Object(pg.k)(e)}),e=>Object(cg.b)({restoreLimitBanner:Eg,restoreLimitAndWelcomeBanner:kg},e))(app_launcher_persistent_banner_AppsLauncherPersistentBanner),wg=a("3zPy"),Tg=a.n(wg),Ng=a("IRvZ");l.default.object.isRequired,l.default.bool,l.default.string,l.default.string,l.default.string.isRequired,l.default.string;const Ag={featureAppLauncher:!1,categoryName:"",teamUrl:"",referringEventId:void 0},Rg=new x.b("app_launcher");function Mg({clogger:e,featureAppLauncher:t,categoryName:a,teamUrl:n,resultKey:s,referringEventId:r}){const l=Object(i.useCallback)(()=>e.track(de.EventId.APP_INDEX_VIEW_APP_DIRECTORY_CLICK,{[de.ClientEventKeys.referring_event_id]:r}),[e,r]);if(!t)return null;const c=s===Ng.c||s===Ng.e?o.a.createElement(J_.a,{className:"p-app_launcher__category_header__link",href:`${n}apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-index-click`,onClick:l,"data-qa":"app_launcher__category_header__app_directory_link"},Rg.t("See all apps in the App Directory")):null;return o.a.createElement("div",{className:"p-app_launcher__category_header","data-category_header":"true","data-qa":`app_launcher__category_header_${s}`,key:s},o.a.createElement("h3",{className:"p-app_launcher__category_header__title"},a),c)}Mg.displayName="AppLauncherCategoryHeader",Mg.defaultProps=Ag;var Pg=Object(u.b)((e,{result:t={}})=>{const a=Object(h.b)(e),n=Object(Se.i)(e,a);return{clogger:Object(ie.a)({state:e}),featureAppLauncher:Object(dg.a)(e),categoryName:t.display_name,resultKey:t.key,teamUrl:Object(xe.n)(n),referringEventId:Object(pg.q)(e)}})(Mg),xg=a("V/As"),Lg=a("yywf");const Fg=new x.b("app_launcher"),Dg=(l.default.string.isRequired,l.default.object,l.default.func,{app:void 0,handleClick:r.a});function Bg({app:e,handleClick:t,appKey:a}){var n=Object(i.useState)(!1),s=at()(n,2);const r=s[0],l=s[1],c=Object(i.useCallback)(()=>{l(!0)},[l]),d=Object(i.useCallback)(()=>{t({appKey:a})},[t,a]);if(!e)return null;const u=r?xg.a:Object(xg.b)(e,72),p=e.is_installed,h=p?null:o.a.createElement("div",{className:"p-app_launcher__app_card__pseudobutton c-button c-button--medium c-button--outline","data-qa":"app_launcher__app_card__add"},Fg.t("Add"));return o.a.createElement(Qh.a,{className:"p-app_launcher__app_card",onClick:d,"data-qa":`app_launcher__app_card--${p?"installed":"not_installed"}`,"data-app-id":e.app_id,role:p?null:"link"},o.a.createElement("div",{className:"p-app_launcher__app_card__container"},o.a.createElement("img",{className:"p-app_launcher__app_card__icon",src:u,alt:"",onError:c}),o.a.createElement("div",null,o.a.createElement("strong",{className:"p-app_launcher__app_card__title",style:{WebkitBoxOrient:"vertical"}},e.name),o.a.createElement("span",{className:"p-app_launcher__app_card__text",style:{WebkitBoxOrient:"vertical"},"aria-label":e.short_description||""},Object(Lg.a)(e.short_description||"",(e,t)=>o.a.createElement("strong",{key:t},e))))),h)}Bg.displayName="AppLauncherAppCard",Bg.defaultProps=Dg;var Ug=Object(u.b)((e,{appKey:t})=>{return{app:(Object(pg.c)(e)||{})[t]}},e=>Object(cg.b)({handleClick:qm.d},e))(Bg);l.default.object;function qg({chunk:e}){return o.a.createElement("div",{className:"p-app_launcher__grid",key:e.key,"data-qa":"app_launcher__result_row"},e.appKeys.map(e=>o.a.createElement(Ug,{appKey:e,key:e})))}qg.displayName="AppLauncherResultRow",qg.defaultProps={chunk:{appKeys:[]}};var Hg=Object(_p.a)(qg);a("cLBS");const Wg=new x.b("app_launcher"),Gg=(l.default.string.isRequired,l.default.func.isRequired,l.default.node,l.default.string,l.default.func,l.default.string,l.default.func,l.default.string,l.default.string,l.default.object,l.default.bool,{children:null,primaryButtonCTA:null,handlePrimaryButtonClick:r.a,secondaryButtonCTA:null,handleSecondaryButtonClick:r.a,imageUrl:null,imageUrl2x:null,postScriptText:null,isFocused:!1});function Kg({title:e,primaryButtonCTA:t,handlePrimaryButtonClick:a,secondaryButtonCTA:n,children:r,handleClose:i,handleSecondaryButtonClick:l,imageUrl:c,imageUrl2x:u,postScriptText:p,isFocused:h}){let m,b,f,_,g;t&&(m=o.a.createElement(_e.d,{className:"p-app_launcher_banner__primary_cta",type:"primary",size:"medium",onClick:a,"data-qa":"app_launcher_banner__primary_cta"},t)),n&&(b=o.a.createElement(_e.d,{type:"outline",size:"medium",onClick:l,"data-qa":"app_launcher_banner__secondary_cta"},n)),c&&u&&(g={srcSet:`${c}, ${u} 2x`}),c&&(f=o.a.createElement("img",s()({},g,{src:c,className:"p-app_launcher_banner__image",alt:"","data-qa":"app_launcher_banner__image"}))),p&&(_=o.a.createElement("div",{className:"p-app_launcher_banner__post_script"},p));const y=d()("p-app_launcher_banner",{"p-app_launcher_banner--focused":h});return o.a.createElement("section",{className:y,"data-qa":"app_launcher_banner"},o.a.createElement("div",{className:"p-app_launcher_banner__container"},o.a.createElement("div",{className:"p-app_launcher_banner__body"},o.a.createElement("h3",{className:"p-app_launcher_banner__title"},e),r,o.a.createElement("div",{className:"p-app_launcher_banner__ctas"},m,b)),f),_,o.a.createElement(Up.a,{icon:"times","aria-label":Wg.t("Close"),className:"p-app_launcher_banner__close",onClick:i,"data-qa":"app_launcher_banner_close"}))}Kg.displayName="AppLauncherBanner",Kg.defaultProps=Gg;var Vg=Kg;const zg=new x.b("app_launcher"),$g=(l.default.bool,l.default.string,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.bool,{featureAppLauncherBanners:!1,bannerKey:"",navigateToAppDirectory:r.a,navigateToManageApps:r.a,navigateToPricing:r.a,setWelcomeDismissedPref:r.a,setLimitDismissedPref:r.a,setLimitAndWelcomeDismissedPref:r.a,clogImpression:r.a,isFocused:!1,showPostScript:!1});class app_launcher_connected_banner_AppLauncherConnectedBanner extends i.Component{constructor(e){super(e),this.closeBannerWithWelcomeDismissedPref=this.closeBannerWithWelcomeDismissedPref.bind(this),this.closeBannerWithLimitDismissedPref=this.closeBannerWithLimitDismissedPref.bind(this),this.closeBannerWithLimitAndWelcomeDismissedPref=this.closeBannerWithLimitAndWelcomeDismissedPref.bind(this),this.handleAppDirectoryClick=this.handleAppDirectoryClick.bind(this),this.handleManageAppsClick=this.handleManageAppsClick.bind(this),this.handlePricingClick=this.handlePricingClick.bind(this)}componentDidMount(){this.props.clogImpression(this.props.bannerKey)}closeBannerWithWelcomeDismissedPref(){this.props.setWelcomeDismissedPref(this.props.bannerKey)}closeBannerWithLimitDismissedPref(){this.props.setLimitDismissedPref(this.props.bannerKey)}closeBannerWithLimitAndWelcomeDismissedPref(){this.props.setLimitAndWelcomeDismissedPref(this.props.bannerKey)}handleAppDirectoryClick(){this.props.navigateToAppDirectory(this.props.bannerKey)}handleManageAppsClick(){this.props.navigateToManageApps(this.props.bannerKey)}handlePricingClick(){this.props.navigateToPricing(this.props.bannerKey)}maybeRenderPostScript(){return this.props.featureAppLauncherBanners&&this.props.showPostScript?zg.rt("<p>Your team is using additional apps that don\u2019t show up on this page.<br></br>Curious about more apps on Slack? <Link>Browse the App Directory</Link></p>",null,({tag:e,key:t,text:a})=>{switch(e){case"Link":return o.a.createElement(Ze.a,{key:t,onClick:this.handleAppDirectoryClick},a);case"br":return o.a.createElement("br",null);default:return o.a.createElement("span",{key:t},a)}}):null}render(){switch(this.props.bannerKey){case Ng.d.FREE_WELCOME:return o.a.createElement(Vg,{title:zg.t("Bring all your tools into Slack"),primaryButtonCTA:zg.t("Browse App Directory"),handlePrimaryButtonClick:this.handleAppDirectoryClick,imageUrl:"/img/app-launcher/app_launcher_welcome.png",imageUrl2x:"/img/app-launcher/app_launcher_welcome@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},zg.rt("<p>On Slack, apps belong to you and your team. Install once and everyone can use them. Teams on the free version of Slack get a limited number of apps. <Link>Upgrade to a paid plan</Link> to get as many as you want.</p>",null,({tag:e,key:t,text:a})=>{switch(e){case"Link":return o.a.createElement(Ze.a,{key:t,onClick:this.handlePricingClick},a);default:return o.a.createElement("p",{key:t},a)}}));case Ng.d.FREE_LIMIT:return o.a.createElement(Vg,{title:zg.t("Upgrade for unlimited apps"),primaryButtonCTA:zg.t("See Upgrade Options"),handlePrimaryButtonClick:this.handlePricingClick,secondaryButtonCTA:zg.t("Later"),handleSecondaryButtonClick:this.closeBannerWithLimitDismissedPref,imageUrl:"/img/app-launcher/app_launcher_upgrade.png",imageUrl2x:"/img/app-launcher/app_launcher_upgrade@2x.png",handleClose:this.closeBannerWithLimitDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},zg.rt("<p>Your team\u2019s already using the max you can use with the free version of Slack. Upgrade to a paid plan to add as many apps as you\u2019d like. <Link>Manage apps</Link></p>",null,({tag:e,key:t,text:a})=>{switch(e){case"Link":return o.a.createElement(Ze.a,{key:t,onClick:this.handleManageAppsClick},a);default:return o.a.createElement("p",{key:t},a)}}));case Ng.d.FREE_LIMIT_WELCOME:return o.a.createElement(Vg,{title:zg.t("Bring all your tools into Slack"),primaryButtonCTA:zg.t("See Upgrade Options"),handlePrimaryButtonClick:this.handlePricingClick,secondaryButtonCTA:zg.t("Later"),handleSecondaryButtonClick:this.closeBannerWithLimitAndWelcomeDismissedPref,imageUrl:"/img/app-launcher/app_launcher_upgrade.png",imageUrl2x:"/img/app-launcher/app_launcher_upgrade@2x.png",handleClose:this.closeBannerWithLimitAndWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},zg.rt("<p>On Slack, apps belong to you and your team. Your team\u2019s already using the max you can use with the free version of Slack. <Link>Manage apps</Link></p>",null,({tag:e,key:t,text:a})=>{switch(e){case"Link":return o.a.createElement(Ze.a,{key:t,onClick:this.handleManageAppsClick},a);default:return o.a.createElement("p",{key:t},a)}}));case Ng.d.PAID_WELCOME:return o.a.createElement(Vg,{title:zg.t("Bring all your tools into Slack"),primaryButtonCTA:zg.t("Browse App Directory"),handlePrimaryButtonClick:this.handleAppDirectoryClick,imageUrl:"/img/app-launcher/app_launcher_welcome.png",imageUrl2x:"/img/app-launcher/app_launcher_welcome@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},zg.rt("<p>On Slack, apps belong to you and your team. Install once and everyone can use them. They can help you streamline common tasks, sync your status with your calendar, and more.</p>"));case Ng.d.PAID_WELCOME_SMALL_CTA:return o.a.createElement(Vg,{title:zg.t("Bring all your tools into Slack"),imageUrl:"/img/app-launcher/app_launcher_welcome.png",imageUrl2x:"/img/app-launcher/app_launcher_welcome@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},zg.rt("<p>On Slack, apps belong to you and your team. Install once and everyone can use them. They can help you streamline common tasks, sync your status with your calendar, and more.</p><p>Looking for more apps? <Link>Browse App Directory</Link></p>",null,({tag:e,key:t,text:a})=>{switch(e){case"Link":return o.a.createElement(Ze.a,{key:t,onClick:this.handleAppDirectoryClick},a);default:return o.a.createElement("p",{key:t},a)}}));case Ng.d.PAID_AAA_APP_REQUESTING_OFF:return o.a.createElement(Vg,{title:zg.t("Bring all your tools into Slack"),imageUrl:"/img/app-launcher/app_launcher_welcome.png",imageUrl2x:"/img/app-launcher/app_launcher_welcome@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},zg.rt("<p>On Slack, apps belong to you and your team. They can help you streamline common tasks, sync your status with your calendar, and more.</p><p>Your admin can install apps for your team to use. <Link>Learn more</Link></p>",{fallbackHash:"cce1379df5391b66f89dd00540bddd61da95d1f6"},({tag:e,key:t,text:a})=>{switch(e){case"Link":return o.a.createElement(Ze.a,{key:t,href:"https://slack.com/help/articles/222386767-manage-apps-for-your-workspace"},a);default:return o.a.createElement("p",{key:t},a)}}));default:return o.a.createElement(i.Fragment,null)}}}app_launcher_connected_banner_AppLauncherConnectedBanner.displayName="AppLauncherConnectedBanner",app_launcher_connected_banner_AppLauncherConnectedBanner.defaultProps=$g;var Yg=Object(u.b)(e=>({featureAppLauncherBanners:Object(m.m)(e,"feature_app_launcher_banners"),showPostScript:Object(hg.g)(e)}),e=>Object(cg.b)({setWelcomeDismissedPref:Og,setLimitDismissedPref:Cg,setLimitAndWelcomeDismissedPref:vg,navigateToAppDirectory:_g,navigateToManageApps:gg,navigateToPricing:yg,clogImpression:fg},e))(app_launcher_connected_banner_AppLauncherConnectedBanner);const Qg=new x.b("app_launcher"),Xg=Tg()("enter"),Jg=(l.default.object.isRequired,l.default.bool,l.default.string,l.default.func,l.default.func,l.default.string.isRequired,l.default.object.isRequired,l.default.object.isRequired,l.default.bool.isRequired,l.default.bool,l.default.string,l.default.string,l.default.bool.isRequired,l.default.number,l.default.number,l.default.bool,l.default.func.isRequired,{featureAppLauncher:!1,nextCursor:void 0,referringEventId:void 0,isBannerDismissed:!1,loadMoreApps:r.a,handleAppLauncherCardClick:r.a,clientTheme:"light",width:0,height:0,seeAAAWhiteListWarning:!1});class app_launcher_search_results_AppLauncherSearchResults extends i.Component{static getDerivedStateFromProps(e,t){const a=e.width;let n=1;for(let s=1;s<=Ng.g;s++)a>=Ng.b*s&&(n=s);return n!==t.numOfColumns?{numOfColumns:n}:null}constructor(e){super(e),this.isPaginating=!1,this.renderRow=this.renderRow.bind(this),this.paginate=this.paginate.bind(this),this.isFocusableItem=this.isFocusableItem.bind(this),this.getCurrentResults=this.getCurrentResults.bind(this),this.handleKeydownOnItem=this.handleKeydownOnItem.bind(this),this.state={numOfColumns:Ng.g},this.listRef=o.a.createRef()}componentDidMount(){this.props.clogger.track(de.EventId.APP_INDEX_OPEN,{[de.ClientEventKeys.referring_event_id]:this.props.referringEventId}),this.props.registerListRef(this.listRef)}getCurrentResults(){return this.props.resultsMap[this.state.numOfColumns]||[]}isFocusableItem({index:e}){const t=(this.getCurrentResults()[e]||{}).type;return t===Ng.h.APP_CHUNK||t===Ng.h.CATEGORY||t===Ng.h.EMPTY_STATE||t===Ng.h.APP_LAUNCHER_BANNER&&!this.props.isBannerDismissed}handleKeydownOnItem(e){e.keyCode===Xg&&1===this.state.numOfColumns&&this.props.handleAppLauncherCardClick({appKey:e.id})}paginate(){this.shouldPaginate()&&this.loadMoreApps()}shouldPaginate(){return!!this.props.nextCursor&&!!this.props.isShowingDefaultAppCategories}loadMoreApps(){this.isPaginating||(this.isPaginating=!0,this.props.loadMoreApps({isAppLauncher:!0}).then(()=>{this.isPaginating=!1}))}showAAAWhitelistWarning(){return this.props.seeAAAWhiteListWarning?o.a.createElement("span",null,Qg.rt("Also, your team admin must approve an app before it can be installed. <Link>Learn more</Link>",null,({key:e,text:t})=>o.a.createElement(Ze.a,{href:"https://slack.com/help/articles/222386767-manage-apps-for-your-workspace",key:e},t))):null}renderRow(e,{hasFocus:t,hasFocusWithin:a}){const n=this.getCurrentResults()[e];switch(n.type){case Ng.h.LOADING:return o.a.createElement("div",{style:{height:62},key:n.key},o.a.createElement(Kt.a,{size:"jumbo",loadingMessage:Qg.t("Loading apps...")}));case Ng.h.CATEGORY:return o.a.createElement(Pg,{result:n});case Ng.h.APP_CHUNK:return o.a.createElement(Hg,{chunk:n});case Ng.h.APP_LAUNCHER_BANNER:return o.a.createElement(Yg,{listRef:this.listRef,bannerKey:n.key,isFocused:t||a});default:return o.a.createElement(i.Fragment,null)}}render(){var e=this.props;const t=e.featureAppLauncher,a=e.announcerSearchInput,n=e.isLoading,s=e.clientTheme,r=e.keysMap,i=e.width,l=e.height;if(!t)return null;const c=this.state.numOfColumns,u=r[c]||[];if(!this.getCurrentResults().length&&a)return n?o.a.createElement(Kt.a,{size:"jumbo",loadingMessage:Qg.t("Loading apps...")}):o.a.createElement("section",{key:"no-results",className:"p-app_launcher__no_results","data-qa":"app_launcher__no_results",role:"alert"},o.a.createElement("p",null,Qg.rt("Slack couldn\u2019t find any apps matching your search. You may want to try\u2026")),o.a.createElement("ul",null,o.a.createElement("li",null,Qg.t("Using different keywords.")),o.a.createElement("li",null,Qg.t("Checking for typos."))),this.showAAAWhitelistWarning());const p=d()("p-app_launcher__list_container",`p-app_launcher__list_container--${c}_column`,{"p-app_launcher__list_container--loading":0===u.length,[`p-app_launcher__list_container--loading--${s}`]:0===u.length&&"light"!==s});return o.a.createElement("div",{className:p,"data-qa":"app_launcher__results_list"},o.a.createElement(Or.a,{ref:this.listRef,width:i,height:Math.floor(l),keys:u,rowRenderer:this.renderRow,loadPost:this.paginate,loadAround:this.paginate,isFocusableItem:this.isFocusableItem,onItemClick:this.handleKeydownOnItem,hideHiddenStopTabs:!0}))}}app_launcher_search_results_AppLauncherSearchResults.displayName="AppLauncherSearchResults",app_launcher_search_results_AppLauncherSearchResults.defaultProps=Jg;var Zg=Object(u.b)(e=>({clogger:Object(ie.a)({state:e}),announcerSearchInput:Object(pg.a)(e),resultsMap:Object(pg.f)(e),keysMap:Object(pg.e)(e),nextCursor:Object(pg.p)(e),isShowingDefaultAppCategories:Object(pg.n)(e),isBannerDismissed:Object(pg.k)(e),featureAppLauncher:Object(dg.a)(e),clientTheme:Object(M.c)(e),referringEventId:Object(pg.q)(e),isLoading:Object(pg.m)(e),seeAAAWhiteListWarning:!Object(bi.k)(e)&&Object(gn.a)(e,"app_whitelist_enabled")}),e=>Object(cg.b)({loadMoreApps:qm.e,handleAppLauncherCardClick:qm.d},e))(app_launcher_search_results_AppLauncherSearchResults);const ey=new x.b("app_launcher");l.default.bool.isRequired,l.default.string.isRequired,l.default.bool.isRequired,l.default.number.isRequired,l.default.func.isRequired;function ty({featureAppLauncher:e,announcerSearchInput:t,isLoading:a,keyLength:n,registerListRef:s}){if(!e)return null;const r=n>1&&t&&!a?ey.t('App search results for "{searchTerm}" ready. To review results, press the tab key.',{searchTerm:t,fallbackHash:"d63e90397a6b47185b2e0b47d11478fa0dc1a153"}):null;return o.a.createElement(i.Fragment,null,o.a.createElement("span",{"aria-live":"polite",className:"offscreen"},r),o.a.createElement(tb.a,null,({width:e,height:t,measureRef:a})=>o.a.createElement("div",{className:"p-app_launcher__measure_container","data-qa":"app_launcher__results_container",ref:a},o.a.createElement(Zg,{width:e,height:t,registerListRef:s}))))}ty.displayName="AppLauncherResultsContainer";var ay=Object(u.b)(e=>({clientTheme:Object(M.c)(e),announcerSearchInput:Object(pg.a)(e),isLoading:Object(pg.m)(e),featureAppLauncher:Object(dg.a)(e),keyLength:(Object(pg.e)(e)[1]||[]).length}))(ty);a("7SIE");const ny=new x.b("app_launcher"),sy={small:120,medium:160,large:200},ry=(l.default.bool,l.default.object,l.default.number,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.arrayOf(l.default.object),{featureAppLauncherFilters:!1,menuProps:void 0,selectedFilter:void 0,onMenuItemSelected:r.a,fetchAppLauncherFilters:r.a,isFetchingFilters:!1,hasCustomAppFilter:!1,categoryFilters:[]});function iy({featureAppLauncherFilters:e,menuProps:t,selectedFilter:a,onMenuItemSelected:n,isFetchingFilters:r,fetchAppLauncherFilters:l,hasCustomAppFilter:c,categoryFilters:d}){Object(i.useEffect)(()=>{const e=l();return()=>{e&&e.cancel&&e.cancel()}},[l]);const u=Object(i.useCallback)(({label:e,id:t}={})=>{const s=o.a.createElement(bn.b,{type:"check-small",className:"p-app_launcher_filter_menu--icon"});return o.a.createElement(fn.b,{"data-qa":`app_launcher_filter_menu_item--${t}`,key:t,onSelected:()=>n(t),icon:a===t?s:null,className:a===t?"p-app_launcher_filter_menu--selected-item":""},e)},[a,n]),p=Object(a_.a)(()=>new Array(5).fill(null).map((e,t)=>o.a.createElement(fn.b,{key:`placeholder-${t}`,"data-qa":"app_launcher_filter_menu__placeholder_item",disabled:!0},o.a.createElement(lf.b,{size:"random",sizes:sy}))),[]),h=Object(i.useMemo)(()=>r?p:[u({label:e?ny.t("All apps"):"",id:Ng.a}),c&&u({label:e?ny.t("Custom apps"):"",id:1,type:"custom"}),o.a.createElement(fn.d,{key:"separator"}),o.a.createElement(fn.c,{key:"category_header",label:e?ny.t("App Directory Categories"):""}),...d.map(u)],[u,d,e,p,c,r]);return e?o.a.createElement(fn.f,s()({},t,{"data-qa":"app_launcher_filter_menu"}),h):null}iy.displayName="AppLauncherFilterMenu",iy.defaultProps=ry;var oy=Object(u.b)(e=>({featureAppLauncherFilters:Object(m.m)(e,"feature_app_launcher_filters"),isFetchingFilters:Object(pg.l)(e),hasCustomAppFilter:Object(pg.i)(e),categoryFilters:Object(pg.d)(e)}),e=>Object(cg.b)({fetchAppLauncherFilters:qm.b},e))(iy);a("RZqJ");const ly=new x.b("app_launcher"),cy=(l.default.bool,l.default.number,l.default.func,{featureAppLauncherFilters:!1,selectedFilter:Ng.a,selectAppLauncherFilter:r.a});function dy({featureAppLauncherFilters:e,selectedFilter:t,selectAppLauncherFilter:a}){const n=Object(i.useCallback)(e=>o.a.createElement(oy,{onMenuItemSelected:a,selectedFilter:t,menuProps:e}),[t,a]);if(!e)return null;const s=t!==Ng.a,r=s?ly.t("Filter apps (filter active)"):ly.t("Filter apps");return o.a.createElement(fn.e,{renderMenu:n,position:"bottom-left",offsetY:8},o.a.createElement(Up.a,{icon:"filters","data-qa":"app_launcher_filter_menu_trigger",className:"p-app_launcher_filter_trigger",showBadge:s,"aria-label":r}))}dy.displayName="AppLauncherFilterTrigger",dy.defaultProps=cy;var uy=Object(u.b)(e=>({featureAppLauncherFilters:Object(m.m)(e,"feature_app_launcher_filters"),selectedFilter:Object(pg.g)(e)}),e=>Object(cg.b)({selectAppLauncherFilter:qm.j},e))(dy);a("oFS/");l.default.bool,l.default.string,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.bool;const py={featureAppLauncher:!1,teamId:null,fetchDefaultApps:r.a,resetSearch:r.a,userAttentionIsOnChat:!1,composerVisible:!1,removeFromSectionNavigation:r.a,addToSectionNavigation:r.a,shouldShowPersistentLimitBanner:!1};class app_launcher_AppLauncher extends i.Component{constructor(e){super(e),this.searchInputRef=o.a.createRef(),this.focus=this.focus.bind(this),this.registerListRef=this.registerListRef.bind(this),this.scrollAppLauncherResultsToKey=this.scrollAppLauncherResultsToKey.bind(this),this.listRef={}}componentDidMount(){this.props.fetchDefaultApps({isAppLauncher:!0})}componentDidUpdate(e){const t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Np.a)(t)&&this.props.addToSectionNavigation(),Object(Ap.a)(t)&&this.props.removeFromSectionNavigation()}componentWillUnmount(){this.props.resetSearch()}focus(){this.searchInputRef.current.focus()}registerListRef(e){this.listRef=e}scrollAppLauncherResultsToKey(e){this.listRef&&this.listRef.current&&setTimeout(()=>{this.listRef.current.scrollToIfNotVisible({itemToScroll:e})},100)}render(){var e=this.props;const t=e.featureAppLauncher,a=e.shouldShowPersistentLimitBanner;if(!t)return null;return o.a.createElement(X_.b,{subtype:"app_launcher"},a&&o.a.createElement(Ig,{scrollToKey:this.scrollAppLauncherResultsToKey}),o.a.createElement("div",{className:"p-app_launcher","data-qa":"app_launcher"},o.a.createElement("div",{className:"p-app_launcher__grid margin_bottom_0 margin_top_0"},o.a.createElement("div",{className:"p-app_launcher__search_filter_container"},o.a.createElement(ug.a,{isAppLauncher:!0,ref:this.searchInputRef,className:"p-app_launcher__search"}),o.a.createElement(uy,null))),o.a.createElement(ay,s()({},{addAppsVariant:!1,channelId:null},{registerListRef:this.registerListRef}))))}}app_launcher_AppLauncher.displayName="AppLauncher",app_launcher_AppLauncher.defaultProps=py;const hy=Object(H.a)(app_launcher_AppLauncher,"AppLauncher",{index:7});var my=Object(u.b)(e=>{const t=Object(hg.c)(e)&&Object(pg.n)(e)&&Object(pg.k)(e);return{featureAppLauncher:Object(dg.a)(e),userAttentionIsOnChat:Object(wu.e)(e),shouldShowPersistentLimitBanner:t,composerVisible:(Object(rt.a)(e)||"composer_toolbar"===Object(ha.c)(e,"composer_toolbar"))&&Object(Tp.b)(e),teamId:Object(h.b)(e)}},e=>Object(cg.b)({fetchDefaultApps:qm.c,resetSearch:qm.g},e))(hy);const by=new x.b("app_launcher");l.default.string,l.default.bool.isRequired;class app_launcher_page_header_AppLauncherPageHeader extends i.Component{render(){var e=this.props;const t=e.className,a=e.isIAP1Enabled,n=by.t("Apps"),s=by.t("Your tools, right in Slack.");return o.a.createElement("div",{className:d()(t,"app-launcher-page-header"),"data-qa":"app_launcher__page_header"},o.a.createElement("h2",{className:"p-classic_nav__channel_header__title"},n),!a&&o.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle overflow_ellipsis"},s))}}app_launcher_page_header_AppLauncherPageHeader.displayName="AppLauncherPageHeader",app_launcher_page_header_AppLauncherPageHeader.defaultProps={className:""};var fy=Object(u.b)(e=>({isIAP1Enabled:Object(bo.c)(e)}))(app_launcher_page_header_AppLauncherPageHeader),_y=a("2w8c"),gy=a("oUB8"),yy=a("peh1");a("5oz1");const Oy=()=>o.a.createElement("div",{className:"p-flexpane__loader_item"},o.a.createElement(Kt.a,{noMargin:!0,size:"medium"}));Oy.displayName="FlexpaneLoaderItem";var Cy=Oy,vy=a("Kdk+"),Ey=a("sIET"),ky=a("rUi3");const Sy=36,jy=(l.default.string,l.default.object.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.bool,{className:void 0,isIAP1Enabled:!1});function Iy({className:e,message:t,renderAvatar:a,renderBody:n,renderHeader:s,isIAP1Enabled:r}){const i=o.a.createElement(sh.a,{className:d()(e,"c-message_kit__message",!r&&"p-activity_flexpane__item")},o.a.createElement(zt.a,{msg:t},o.a.createElement(rh.a,{jumpOrigin:"activity",msg:t,position:"inside",showComment:!1,showJump:!0,showMoreActions:!1,showReact:!1,showShare:!1,showStar:!1},o.a.createElement($t.a,{className:"p-activity_flexpane__item_gutter",light:a({size:Sy})},s(),o.a.createElement("br",null),n(),o.a.createElement(Zt.a,{msg:t}),o.a.createElement(ea.b,{msg:t}),o.a.createElement(Qp.a,{className:"p-activity_flexpane__item_reactions",msg:t}),o.a.createElement(ky.a,{flexOrigin:"activity",msg:t})))));return r?o.a.createElement(Vt.a,{className:"p-activity_page__item"},i):i}Iy.defaultProps=jy;var wy=Object(u.b)(e=>({isIAP1Enabled:Object(bo.c)(e)}))(Iy);l.default.string,l.default.object;const Ty={className:void 0,message:void 0};function Ny({className:e,message:t}){return t?o.a.createElement(wy,{className:e,message:t,renderAvatar:({size:e})=>o.a.createElement(Yt.a,{msg:t,size:e}),renderBody:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement(Xt.a,{msg:t}),o.a.createElement(Jt.a,{msg:t,blockLimit:1,blocksContainerContext:Vp.a.activity})),renderHeader:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement(Qt.a,{msg:t}),"\xa0\xa0",o.a.createElement(ta.a,{msg:t,clickable:!0,full:!1,relative:!0}))}):null}Ny.displayName="ActivityMention",Ny.defaultProps=Ty;const Ay=Object(u.b)(function(e,{channelId:t,messageTs:a}){return{message:Object(ae.a)(e,t,a)}})(Ny);Ay.propTypes={channelId:l.default.string.isRequired,messageTs:l.default.string.isRequired};var Ry=Ay,My=a("QB+X"),Py=a("Q+UV"),xy=a("VlZM"),Ly=a("y7mK");const Fy=new x.b("mentions");function Dy(e,t){const a=Object(lt.a)(Object(Pb.a)(e,"users"));return Object(ep.a)(a,t)}l.default.string,l.default.string,l.default.bool,l.default.object,l.default.arrayOf(l.default.object);const By={className:void 0,currentUserId:void 0,featureSonicActivity:!1,message:void 0,reactions:void 0};function Uy({className:e,currentUserId:t,featureSonicActivity:a,message:n,reactions:s}){const r=Object(i.useCallback)(({size:e})=>{const a=Dy(s,t);return 1===a.length?o.a.createElement(fi.c,{userId:a[0],size:e,showCard:!0}):o.a.createElement(xy.a,{primaryMemberId:a[0],secondaryMemberId:a[1]})},[t,s]),l=Object(i.useCallback)(()=>o.a.createElement(o.a.Fragment,null,o.a.createElement(Xt.a,{msg:n,className:"sk_foreground_max",isSingleLine:!0}),o.a.createElement(Jt.a,{msg:n,blockLimit:1,blocksContainerContext:Vp.a.activity})),[n]),c=Object(i.useCallback)(()=>{if(!a)return!1;const e=Dy(s,t);if(e.length<=2){const t=e.map(e=>o.a.createElement(Ly.a,{className:"p-activity_flexpane__reaction_item_name",userId:e}));return Fy.rt("{names} reacted to your message",{names:Object(x.k)(t,{react:!0})})}return Fy.rt("<r1>Several people</r1> reacted to your message",null,({text:e})=>o.a.createElement("span",{className:"black"},e))},[t,a,s]);return!(!a||Object(io.a)(s))&&o.a.createElement(wy,{className:e,message:n,renderAvatar:r,renderBody:l,renderHeader:c})}Uy.displayName="ActivityReaction",Uy.defaultProps=By;const qy=Object(u.b)((e,{channelId:t,messageTs:a})=>{const n=Object(ae.a)(e,t,a),s=Object(Py.b)(n),r=Object(My.e)(e,s);return{currentUserId:Object(m.d)(e),featureSonicActivity:Object(m.m)(e,"feature_sonic_activity"),message:n,reactions:r}})(Uy);qy.propTypes={channelId:l.default.string.isRequired,messageTs:l.default.string.isRequired};var Hy=qy;const Wy=new x.b("mentions"),Gy=(l.default.func,l.default.bool,l.default.arrayOf(l.default.shape({channelId:l.default.string.isRequired,messageTs:l.default.string.isRequired,threadTs:l.default.string,ts:l.default.string.isRequired,type:l.default.string.isRequired})),l.default.func,l.default.func,l.default.func,l.default.string,l.default.func,{fetchActivity:r.a,isLoading:!1,items:[],onItemTabWithin:r.a,makeMessageSummary:r.a,makeReactionsSummary:r.a,focusKey:null,setFocusKey:r.a});class activity_list_ActivityList extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["getAriaLabelForRow","isFocusableItem","renderListItem","focus","onFocusEnter","onFocusLeave"]);const t=new t_.a({DEFAULT_HEIGHT:150});this.layout=new Cr.a({heightCache:t}),this.getItemKeys=Object(yy.createSelector)(({items:e})=>e,({isLoading:e})=>e,(e,t)=>{const a=["top-anchor-hack"],n=e.map(e=>`${e.type}-${e.ts}-${e.messageTs}`);return a.push(...n),t&&a.push("loader"),a}),this.state={hasKeyboardFocus:!1},this.list=o.a.createRef()}componentDidMount(){var e=this.props;const t=e.focusKey,a=e.items;"activity"===t&&a.length&&this.setFocusOnFirstItem()}onFocusEnter(e){this.setState(()=>({hasKeyboardFocus:e.isKeyboardFocus}))}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}setFocusOnFirstItem(){var e=this.props;const t=e.isLoading,a=e.items,n=this.getItemKeys({isLoading:t,items:a})[1],s=this.list.current;s&&s.focusOnKey(n),this.props.setFocusKey(null)}getAriaLabelForRow({index:e}){var t=this.props;const a=t.isLoading,n=t.items,s=this.state.hasKeyboardFocus,r=this.getItemKeys({isLoading:a,items:n})[e];if("top-anchor-hack"===r||"loader"===r)return;const i=n[e-1];return i?"reaction"===i.type?{"aria-label":this.props.makeReactionsSummary({channelId:i.channelId,messageTs:i.messageTs,hasFocus:s,viewContext:Ln.I.ACTIVITY_FLEXPANE})}:{"aria-label":this.props.makeMessageSummary({channelId:i.channelId,ts:i.messageTs,hasFocus:s,viewContext:Ln.I.ACTIVITY_FLEXPANE})}:void 0}focus(){const e=this.list.current;e&&e.focus()}isFocusableItem({index:e}){var t=this.props;const a=t.isLoading,n=t.items,s=this.getItemKeys({isLoading:a,items:n})[e];return s&&"top-anchor-hack"!==s&&"loader"!==s}renderListItem(e){var t=this.props;const a=t.isLoading,n=t.items,s=this.getItemKeys({isLoading:a,items:n});if("top-anchor-hack"===s[e])return o.a.createElement("div",{className:"p-activity_flexpane__top_anchor_hack_item"});if("loader"===s[e])return o.a.createElement(Cy,null);const r=n[e-1];if(!r)return null;const i=r===n[n.length-1],l=d()({margin_bottom_0:i&&a});return"reaction"===r.type?o.a.createElement(Hy,{key:r.ts,channelId:r.channelId,className:l,messageTs:r.messageTs}):o.a.createElement(Ry,{key:r.ts,channelId:r.channelId,className:l,messageTs:r.messageTs})}render(){var e=this.props;const t=e.fetchActivity,a=e.isLoading,n=e.items,s=e.onItemTabWithin;return o.a.createElement(pr.a,null,({width:e,height:r})=>o.a.createElement(Or.a,{ref:this.list,animateOnScroll:!1,height:r,isFocusableItem:this.isFocusableItem,"aria-label":Wy.t("Activity"),getPropsForItem:this.getAriaLabelForRow,keys:this.getItemKeys({isLoading:a,items:n}),layout:this.layout,loadPost:t,rowRenderer:this.renderListItem,width:e,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onItemTabWithin:s}))}}activity_list_ActivityList.displayName="ActivityList";var Ky=Object(u.b)(e=>({focusKey:Object(vy.a)(e)}),e=>({setFocusKey:t=>e(Object(Ey.a)(t))}),null,{withRef:!0})(activity_list_ActivityList);activity_list_ActivityList.defaultProps=Gy;a("ab6v");const Vy=20;l.default.arrayOf(l.default.shape({channelId:l.default.string.isRequired,messageTs:l.default.string.isRequired,threadTs:l.default.string,ts:l.default.string.isRequired,type:l.default.string.isRequired})),l.default.bool,l.default.bool,l.default.func.isRequired,l.default.object.isRequired;class activity_page_ActivityPage extends i.Component{constructor(e){super(e),this.fetchMentions=this.fetchMentions.bind(this),this.fetchMoreMentions=this.fetchMoreMentions.bind(this)}componentDidMount(){this.props.clogger.track("ACTIVITY_PAGE_OPEN")}Mount(){this.fetchMentions()}fetchMentions({afterTs:e}={}){this.props.dispatch(Object(gy.c)({afterTs:e,limit:Vy}))}fetchMoreMentions(){var e=this.props;const t=e.activityList,a=e.hasMore;if(e.isLoading||!a)return;const n=t[t.length-1].ts;this.fetchMentions({afterTs:n})}render(){var e=this.props;const t=e.activityList,a=e.isLoading;return o.a.createElement("div",{className:"p-activity_page"},o.a.createElement(Ky,{fetchActivity:this.fetchMoreMentions,isLoading:a,items:t}))}}activity_page_ActivityPage.displayName="ActivityPage",activity_page_ActivityPage.defaultProps={activityList:[],hasMore:!1,isLoading:!1};var zy=Object(u.b)(e=>({activityList:Object(gy.d)(e),hasMore:Object(gy.e)(e),isLoading:Object(gy.f)(e),clogger:Object(ie.a)({state:e})}))(activity_page_ActivityPage),$y=a("o18M"),Yy=a("uvIC"),Qy=a("P9LH"),Xy=a("bsix");const Jy=new x.b("files"),Zy=Object(mt.b)("build file summary for aria labels",(e,t,{fileId:a,hasFocus:n}={})=>{const s=t();if(!Object(Yu.b)(s)&&!n)return;const r=Object(Yy.c)(s,a);if(!r)return;const i=r.created,o=r.timestamp,l=r.user,c=i||o,d=Object(Qy.E)(r)?Object(Xy.a)(r):Object(Qy.p)(r),u=Object(Qy.k)(r),p=Object(Je.W)(s,l),h=Object(Ro.k)(c,{shortenMonth:!1,excludeYear:Object(Ro.i)(c)}),m=Object(ba.k)(s,"time24"),b=Object(Ro.p)(c,{do24hrTime:m});return Jy.t("{fileType} file {fileName} uploaded by {userName} on {dateStr} at {timeStr}",{fileType:d,fileName:u,userName:p,dateStr:h,timeStr:b})});Zy.meta={name:"makeFileSummary",key:"actionsMakeFileSummaryMakeFileSummary",description:"build file summary for aria labels"},Zy.propTypes={fileId:l.default.string.isRequired,hasFocus:l.default.bool};var eO=Zy,tO=a("BRQ/"),aO=a("0gqo");l.default.object.isRequired,l.default.bool;class saved_item_reaction_bar_SavedItemReactionBar extends o.a.PureComponent{render(){var e=this.props;const t=e.hasReactionOrReplies,a=e.msg;return t?o.a.createElement("div",{className:"p-saved_item_message__reactions_and_replies","data-qa":"saved_item-reaction-reply-bar"},o.a.createElement(tO.a,{msg:a}),o.a.createElement(aO.a,{msg:a,flexOrigin:"saved_items"})):null}}saved_item_reaction_bar_SavedItemReactionBar.displayName="SavedItemReactionBar",saved_item_reaction_bar_SavedItemReactionBar.defaultProps={hasReactionOrReplies:!1};var nO=Object(u.b)((e,{msg:t})=>{const a=Object(Py.b)(t),n=Object(My.e)(e,a);return{hasReactionOrReplies:!!(Object($e.S)(t)>0||n&&n.length)}})(saved_item_reaction_bar_SavedItemReactionBar);a("8tlt");l.default.object.isRequired,l.default.string,l.default.string;const sO={className:void 0,"data-qa":void 0};class saved_item_message_SavedItemMessage extends i.Component{render(){var e=this.props;const t=e.msg,a=e["data-qa"],n=d()("p-saved_item__message",this.props.className),s=o.a.createElement(sh.a,{className:n,"data-qa":a},o.a.createElement(rh.a,{msg:t,position:"inside",className:"p-saved_item__message_actions",showComment:!0,showShare:!0,showReact:!0,showJump:!1,showMoreActions:!0,jumpOrigin:"saved_items"},o.a.createElement(zt.a,{msg:t},o.a.createElement($t.a,{light:o.a.createElement(Yt.a,{msg:t,size:36})},o.a.createElement(Qt.a,{msg:t}),"\xa0\xa0",o.a.createElement(ta.a,{msg:t,full:!0}),o.a.createElement("br",null),o.a.createElement(Xt.a,{msg:t}),o.a.createElement(Jt.a,{msg:t,blocksContainerContext:Vp.a.starred_message}),o.a.createElement(Zt.a,{msg:t}),o.a.createElement(ea.b,{msg:t}),o.a.createElement(zp.a,{msg:t}),o.a.createElement(ky.a,{flexOrigin:"saved_items",msg:t}),o.a.createElement(nO,{msg:t})))));return o.a.createElement(Vt.a,{className:"p-saved_item__message__pillow"},s)}}saved_item_message_SavedItemMessage.displayName="SavedItemMessage",saved_item_message_SavedItemMessage.defaultProps=sO;var rO=saved_item_message_SavedItemMessage;a("2FVR");l.default.object.isRequired,l.default.string.isRequired,l.default.string,l.default.bool,l.default.func,l.default.string,l.default.bool;const iO={className:void 0,useRowAction:!0,previewFile:r.a,"data-qa":void 0,isIAP1Enabled:!1};class starred_item_file_StarredItemFile extends i.PureComponent{constructor(e){super(e),this.onFileClick=this.onFileClick.bind(this)}onFileClick(e,t){if(!t)return;this.props.previewFile({fileId:t.id,flexOrigin:"starred_items"})}render(){const e=d()("p-starred_item__message",this.props.className);var t=this.props;const a=t["data-qa"],n=t.isIAP1Enabled;return this.props.file?o.a.createElement(vr.a,{file:this.props.file,className:e,key:this.props.id,useRowAction:this.props.useRowAction,includeRootDownloadAction:!1,includeRootStarAction:!0,fullWidth:!n,onClick:this.onFileClick,"data-qa":a}):null}}starred_item_file_StarredItemFile.displayName="StarredItemFile",starred_item_file_StarredItemFile.defaultProps=iO;var oO=Object(u.b)((e,{id:t})=>({file:Object(Yy.c)(e,t),isIAP1Enabled:Object(bo.c)(e)}),{previewFile:qa.c})(starred_item_file_StarredItemFile);l.default.object.isRequired,l.default.bool;class starred_item_reaction_reply_bar_StarredItemReactionReplyBar extends o.a.PureComponent{render(){var e=this.props;const t=e.hasReactionOrReplies,a=e.msg;return t?o.a.createElement("div",{className:"p-starred_item_message__reactions_and_replies","data-qa":"starred-item-reaction-reply-bar"},o.a.createElement(tO.a,{msg:a}),o.a.createElement(aO.a,{msg:a,flexOrigin:"starred_items"})):null}}starred_item_reaction_reply_bar_StarredItemReactionReplyBar.displayName="StarredItemReactionReplyBar",starred_item_reaction_reply_bar_StarredItemReactionReplyBar.defaultProps={hasReactionOrReplies:!1};var lO=Object(u.b)((e,{msg:t})=>{const a=Object(Py.b)(t),n=Object(My.e)(e,a);return{hasReactionOrReplies:!!(Object($e.S)(t)>0||n&&n.length)}})(starred_item_reaction_reply_bar_StarredItemReactionReplyBar);l.default.object.isRequired,l.default.string,l.default.string,l.default.bool;const cO={className:void 0,"data-qa":void 0,isIAP1Enabled:!1};class starred_item_message_StarredItemMessage extends i.Component{render(){var e=this.props;const t=e.msg,a=e["data-qa"],n=d()("p-starred_item__message",this.props.className),s=o.a.createElement(sh.a,{className:n,"data-qa":a},o.a.createElement(rh.a,{msg:t,position:"inside",className:"p-starred_item__message_actions",showComment:!1,showShare:!1,showReact:!1,showJump:!0,showMoreActions:!1,jumpOrigin:"starred_items"},o.a.createElement(zt.a,{msg:t},o.a.createElement($t.a,{light:o.a.createElement(Yt.a,{msg:t,size:36})},o.a.createElement(Qt.a,{msg:t}),"\xa0\xa0",o.a.createElement(ta.a,{msg:t,full:!0}),o.a.createElement("br",null),o.a.createElement(Xt.a,{msg:t}),o.a.createElement(Jt.a,{msg:t,blocksContainerContext:Vp.a.starred_message}),o.a.createElement(Zt.a,{msg:t}),o.a.createElement(ea.b,{msg:t}),o.a.createElement(zp.a,{msg:t}),o.a.createElement(ky.a,{flexOrigin:"starred_items",msg:t}),o.a.createElement(lO,{msg:t})))));return this.props.isIAP1Enabled?o.a.createElement(Vt.a,{className:"p-starred_item__message__pillow"},s):s}}starred_item_message_StarredItemMessage.displayName="StarredItemMessage",starred_item_message_StarredItemMessage.defaultProps=cO;var dO=Object(u.b)(e=>({isIAP1Enabled:Object(bo.c)(e)}))(starred_item_message_StarredItemMessage);l.default.object,l.default.string,l.default.string,l.default.string;const uO={comment:void 0,fileId:void 0,className:void 0,"data-qa":void 0};class starred_item_file_comment_StarredItemFileComment extends i.PureComponent{render(){var e=this.props;const t=e.comment,a=e.fileId,n=e.className,s=e["data-qa"];if(!t)return null;const r={user:t.user,ts:t.timestamp.toString(),subtype:"file_comment",comment:t,files:[a]};return o.a.createElement(dO,{msg:r,className:n,"data-qa":s})}}starred_item_file_comment_StarredItemFileComment.displayName="StarredItemFileComment",starred_item_file_comment_StarredItemFileComment.defaultProps=uO;var pO=Object(u.b)((e,{fileId:t,commentId:a})=>({comment:Object(Yy.d)(e,t,a)}))(starred_item_file_comment_StarredItemFileComment);const hO=Object(mp.b)(rO),mO=(l.default.func,l.default.bool,l.default.arrayOf(l.default.object.isRequired),l.default.func.isRequired,l.default.func.isRequired,l.default.func,l.default.string,l.default.func,{fetchMoreItems:r.a,isLoading:!1,items:void 0,onItemTabWithin:r.a,focusKey:null,setFocusKey:r.a}),bO={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment"};class saved_items_list_SavedItemsList extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["renderItem","isFocusableItem","getAriaLabelForRow","onFocusEnter","onFocusLeave"]),this.getItemKeys=Object(yy.createSelector)(({items:e})=>e,({isLoading:e})=>e,(e,t)=>{const a=["top-anchor-hack"],n=e.map(e=>this.getSavedItemId(e));return a.push(...n),t&&a.push("loader"),a}),this.list=o.a.createRef(),this.state={hasKeyboardFocus:!1}}componentDidMount(){var e=this.props;const t=e.focusKey,a=e.items;"stars"===t&&a.length&&this.setFocusOnFirstItem()}onFocusEnter(e){this.setState(()=>({hasKeyboardFocus:e.isKeyboardFocus}))}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}setFocusOnFirstItem(){var e=this.props;const t=e.isLoading,a=e.items,n=this.getItemKeys({isLoading:t,items:a})[1],s=this.list.current;s&&s.focusOnKey(n),this.props.setFocusKey(null)}getSavedItemId(e){switch(e.type){case bO.MESSAGE:return e.channel+e.ts;case bO.FILE:case bO.FILE_COMMENT:return e.id;default:return null}}getAriaLabelForRow({index:e}){const t=this.props.items,a=this.state.hasKeyboardFocus,n=t[e-1];if(n&&n.type)return n.type===bO.MESSAGE?{"aria-label":this.props.makeMessageSummary({channelId:n.channel,ts:n.ts,hasFocus:a,viewContext:Ln.I.STARS_FLEXPANE})}:{"aria-label":this.props.makeFileSummary({fileId:n.id,hasFocus:a})}}focus(){const e=this.list.current;e&&e.focus()}isFocusableItem({index:e}){var t=this.props;const a=t.isLoading,n=t.items,s=this.getItemKeys({isLoading:a,items:n})[e];return!!s&&("top-anchor-hack"!==s&&"loader"!==s)}renderItem(e){var t=this.props;const a=t.isLoading,n=t.items,r=this.getItemKeys({isLoading:a,items:n});if("top-anchor-hack"===r[e])return o.a.createElement("div",{className:"p-saved_item__top_anchor_item_hack"});if("loader"===r[e])return o.a.createElement(Cy,null);const i=n[e-1],l={key:this.getSavedItemId(i),className:d()("c-message_kit__message","p-saved_item",{"p-saved_item--first":i===n[0]}),"data-qa":`saved_item_${i.type}`};switch(i.type){case bO.MESSAGE:return o.a.createElement(hO,s()({},l,{channelId:i.channel,ts:i.ts}));case bO.FILE:return o.a.createElement(oO,s()({},l,{id:i.id}));case bO.FILE_COMMENT:return o.a.createElement(pO,s()({},l,{fileId:i.fileId,commentId:i.id}));default:return null}}render(){var e=this.props;const t=e.isLoading,a=e.items,n=e.onItemTabWithin;return o.a.createElement(pr.a,null,({width:e,height:s})=>o.a.createElement(Or.a,{ref:this.list,width:e,height:s,keys:this.getItemKeys({isLoading:t,items:a}),rowRenderer:this.renderItem,loadPost:this.props.fetchMoreItems,animateOnScroll:!1,getPropsForItem:this.getAriaLabelForRow,isFocusableItem:this.isFocusableItem,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onItemTabWithin:n}))}}saved_items_list_SavedItemsList.displayName="SavedItemsList",saved_items_list_SavedItemsList.defaultProps=mO;const fO=Object(u.b)(e=>({focusKey:Object(vy.a)(e)}),function(e){return{makeMessageSummary:(...t)=>e(Zu(...t)),makeFileSummary:(...t)=>e(eO(...t)),setFocusKey:t=>e(Object(Ey.a)(t))}})(e=>{let t=e.forwardedRef,a=fp()(e,["forwardedRef"]);return o.a.createElement(saved_items_list_SavedItemsList,s()({ref:t},a))});var _O=o.a.forwardRef((e,t)=>o.a.createElement(fO,s()({forwardedRef:t},e)));const gO=new x.b("starred_items"),yO=Object(mp.b)(dO),OO=(l.default.func,l.default.bool,l.default.arrayOf(l.default.object.isRequired),l.default.func.isRequired,l.default.func.isRequired,l.default.func,l.default.string,l.default.func,{fetchMoreItems:r.a,isLoading:!1,items:void 0,onItemTabWithin:r.a,focusKey:null,setFocusKey:r.a}),CO={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment"};class starred_items_list_StarredItemsList extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["renderItem","isFocusableItem","getAriaLabelForRow","onFocusEnter","onFocusLeave"]),this.getItemKeys=Object(yy.createSelector)(({items:e})=>e,({isLoading:e})=>e,(e,t)=>{const a=["top-anchor-hack"],n=e.map(e=>this.getStarredItemId(e));return a.push(...n),t&&a.push("loader"),a}),this.list=o.a.createRef(),this.state={hasKeyboardFocus:!1}}componentDidMount(){var e=this.props;const t=e.focusKey,a=e.items;"stars"===t&&a.length&&this.setFocusOnFirstItem()}onFocusEnter(e){this.setState(()=>({hasKeyboardFocus:e.isKeyboardFocus}))}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}setFocusOnFirstItem(){var e=this.props;const t=e.isLoading,a=e.items,n=this.getItemKeys({isLoading:t,items:a})[1],s=this.list.current;s&&s.focusOnKey(n),this.props.setFocusKey(null)}getStarredItemId(e){switch(e.type){case CO.MESSAGE:return e.channel+e.ts;case CO.FILE:case CO.FILE_COMMENT:return e.id;default:return null}}getAriaLabelForRow({index:e}){const t=this.props.items,a=this.state.hasKeyboardFocus,n=t[e-1];if(n&&n.type)return n.type===CO.MESSAGE?{"aria-label":this.props.makeMessageSummary({channelId:n.channel,ts:n.ts,hasFocus:a,viewContext:Ln.I.STARS_FLEXPANE})}:{"aria-label":this.props.makeFileSummary({fileId:n.id,hasFocus:a})}}focus(){const e=this.list.current;e&&e.focus()}isFocusableItem({index:e}){var t=this.props;const a=t.isLoading,n=t.items,s=this.getItemKeys({isLoading:a,items:n})[e];return!!s&&("top-anchor-hack"!==s&&"loader"!==s)}renderItem(e){var t=this.props;const a=t.isLoading,n=t.items,r=this.getItemKeys({isLoading:a,items:n});if("top-anchor-hack"===r[e])return o.a.createElement("div",{className:"p-starred_item__top_anchor_item_hack"});if("loader"===r[e])return o.a.createElement(Cy,null);const i=n[e-1],l={key:this.getStarredItemId(i),className:d()("c-message_kit__message","p-starred_item",{"p-starred_item--first":i===n[0]}),"data-qa":`starred_item_${i.type}`};switch(i.type){case CO.MESSAGE:return o.a.createElement(yO,s()({},l,{channelId:i.channel,ts:i.ts}));case CO.FILE:return o.a.createElement(oO,s()({},l,{id:i.id}));case CO.FILE_COMMENT:return o.a.createElement(pO,s()({},l,{fileId:i.fileId,commentId:i.id}));default:return null}}render(){var e=this.props;const t=e.isLoading,a=e.items,n=e.onItemTabWithin;return o.a.createElement(pr.a,null,({width:e,height:s})=>o.a.createElement(Or.a,{ref:this.list,width:e,height:s,keys:this.getItemKeys({isLoading:t,items:a}),rowRenderer:this.renderItem,loadPost:this.props.fetchMoreItems,animateOnScroll:!1,"aria-label":gO.t("Starred Items"),getPropsForItem:this.getAriaLabelForRow,isFocusableItem:this.isFocusableItem,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onItemTabWithin:n}))}}starred_items_list_StarredItemsList.displayName="StarredItemsList",starred_items_list_StarredItemsList.defaultProps=OO;const vO=Object(u.b)(e=>({focusKey:Object(vy.a)(e)}),function(e){return{makeMessageSummary:(...t)=>e(Zu(...t)),makeFileSummary:(...t)=>e(eO(...t)),setFocusKey:t=>e(Object(Ey.a)(t))}})(e=>{let t=e.forwardedRef,a=fp()(e,["forwardedRef"]);return o.a.createElement(starred_items_list_StarredItemsList,s()({ref:t},a))});var EO=o.a.forwardRef((e,t)=>o.a.createElement(vO,s()({forwardedRef:t},e)));a("z1BW"),a("EtLH");l.default.bool,l.default.arrayOf(l.default.object.isRequired),l.default.string,l.default.func.isRequired,l.default.object.isRequired,l.default.bool.isRequired;const kO={isLoading:!1,starredItems:void 0,cursorMark:void 0};class stars_page_StarsPage extends i.Component{constructor(e){super(e),this.listRef=o.a.createRef(),this.fetchMoreStarredItems=this.fetchMoreStarredItems.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this)}componentDidMount(){this.props.clogger.track("STARS_PAGE_OPEN")}componentDidUpdate(e){var t=this.props;const a=t.starredItems,n=t.cursorMark;!Object(io.a)(e.starredItems)&&Object(io.a)(a)&&n&&this.fetchStarredItems(n)}focus(){const e=this.listRef.current;e&&e.setFocusOnFirstItem()}blur(){Object(r.a)()}fetchStarredItems(e){return!this.requestStars&&(this.requestStars=this.props.dispatch(Object($y.c)({exclude:"Ch,Gh,Dh",limit:20,cursor:e})),this.requestStars.finally(()=>{this.requestStars=null}))}fetchMoreStarredItems(){var e=this.props;const t=e.isLoading,a=e.cursorMark;t||a&&this.fetchStarredItems(a)}render(){return this.props.isIAMessagingEnabled?o.a.createElement("div",{className:"p-saved_page"},o.a.createElement(_O,{ref:this.listRef,fetchMoreItems:this.fetchMoreStarredItems,isLoading:this.props.isLoading,items:this.props.starredItems})):o.a.createElement("div",{className:"p-stars_page"},o.a.createElement(EO,{ref:this.listRef,fetchMoreItems:this.fetchMoreStarredItems,isLoading:this.props.isLoading,items:this.props.starredItems}))}}stars_page_StarsPage.displayName="StarsPage",stars_page_StarsPage.defaultProps=kO;var SO=Object(u.b)(e=>({isLoading:Object($y.f)(e),starredItems:Object($y.d)(e),totalPages:Object($y.g)(e),cursorMark:Object($y.e)(e),clogger:Object(ie.a)({state:e}),isIAMessagingEnabled:Object(bo.b)(e)}))(Object(H.a)(stars_page_StarsPage,"StarsPage",{index:3})),jO=a("glRj"),IO=a("RfGh"),wO=a("9gIX"),TO=a("MAit"),NO=a("GJq3"),AO=a("BSK+");l.default.object.isRequired,l.default.string,l.default.number,l.default.func;const RO={className:void 0,width:void 0,onClick:r.a},MO=({file:e,className:t,width:a,onClick:n})=>{const s=Object(i.useCallback)(t=>n(t,e),[e,n]),r="image"===Object(Qy.p)(e)&&o.a.createElement(AO.a,{file:e,maxSize:300});return o.a.createElement(IO.a,{file:e,className:t,showActions:!0,useRowAction:!0,style:{width:a}},o.a.createElement(wO.a,{file:e,onClick:s,showThumbnail:!1},o.a.createElement(TO.a,{file:e})),r,o.a.createElement(NO.a,{onClick:s,file:e}))};MO.displayName="FilesPageFile",MO.defaultProps=RO;var PO=MO,xO=a("nlS/"),LO=a("z+SX");l.default.string,l.default.string,l.default.func.isRequired;class files_page_controls_FilesPageControls extends i.Component{constructor(e){super(e),this.renderMemberOption=this.renderMemberOption.bind(this),this.renderSelectedMemberOption=this.renderSelectedMemberOption.bind(this),this.processMemberOptions=this.processMemberOptions.bind(this),this.onMemberSelected=this.onMemberSelected.bind(this),this.onFiletypeSelected=this.onFiletypeSelected.bind(this)}onMemberSelected(e){this.props.dispatch(Object(jO.k)(e.value))}onFiletypeSelected(e){this.props.dispatch(Object(jO.j)(e))}getFiletypeTemplate(){const e=this.props.filetype,t=t=>e===t?o.a.createElement(bn.b,{type:"check-small",className:"p-files_page__controls__check_icon"}):null,a=t=>t===e?"p-files_page__filetype_menu_item--selected":"";return[{label:"All File Types",value:"",icon:t(""),click:()=>this.onFiletypeSelected(""),className:a("")},{label:"Posts",value:"docs",icon:t("docs"),click:()=>this.onFiletypeSelected("docs"),className:a("docs")},{label:"Snippets",value:"snippets",icon:t("snippets"),click:()=>this.onFiletypeSelected("snippets"),className:a("snippets")},{label:"Emails",value:"emails",icon:t("emails"),click:()=>this.onFiletypeSelected("emails"),className:a("emails")},{label:"Images",value:"images",icon:t("images"),click:()=>this.onFiletypeSelected("images"),className:a("images")},{label:"Videos",value:"videos",icon:t("videos"),click:()=>this.onFiletypeSelected("videos"),className:a("videos")},{label:"PDF Files",value:"pdfs",icon:t("pdfs"),click:()=>this.onFiletypeSelected("pdfs"),className:a("pdfs")},{label:"Spreadsheets",value:"spreadsheets",icon:t("spreadsheets"),click:()=>this.onFiletypeSelected("spreadsheets"),className:a("spreadsheets")},{label:"Google Docs",value:"gdocs",icon:t("gdocs"),click:()=>this.onFiletypeSelected("gdocs"),className:a("gdocs")}]}processMemberOptions(e,t){return t&&t.length>0?Promise.resolve(e):Promise.resolve([{value:"",label:"Anyone"},...e])}renderSelectedMemberOption(e){const t=""===e.value?e.label:o.a.createElement(LO.a,{id:e.value});return o.a.createElement("span",null,"From: ",o.a.createElement("strong",null,t))}renderMemberOption(e){return""===e.value?o.a.createElement("strong",null,e.label):o.a.createElement(Qb.a,{id:e.value})}renderMemberSelect(){const e=this.props.user;return o.a.createElement(xO.d,{key:e,className:"p-files_page__controls__member",width:"auto",renderOption:this.renderMemberOption,renderSelectedOption:this.renderSelectedMemberOption,selectedOption:{value:e,label:e||"Anyone"},searcherOptions:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0}},sort:{selfFirst:!0},allowEmptyQuery:!0},processOptions:this.processMemberOptions,onOptionSelected:this.onMemberSelected})}renderFiletypeSelect(){const e=this.props.filetype,t=this.getFiletypeTemplate(),a=t.find(t=>t.value===e).label;return o.a.createElement(fn.e,{renderMenu:e=>o.a.createElement(fn.a,s()({menu:!0},e,{template:t})),position:"bottom-left",offsetX:-4,offsetY:4},o.a.createElement(Qh.a,{className:"p-files_page__filetype"},"Type: ",o.a.createElement("strong",null,a),o.a.createElement(bn.b,{type:"chevron-down",inline:!0})))}render(){return o.a.createElement("div",{className:"p-files_page__controls"},this.renderMemberSelect(),this.renderFiletypeSelect())}}files_page_controls_FilesPageControls.displayName="FilesPageControls",files_page_controls_FilesPageControls.defaultProps={user:"",filetype:""};var FO=Object(u.b)(e=>({user:Object(jO.g)(e),filetype:Object(jO.d)(e)}))(files_page_controls_FilesPageControls);a("CoJr");const DO=new x.b("files"),BO=Object(Er.a)(PO),UO=20;l.default.array,l.default.string,l.default.string,l.default.string.isRequired,l.default.func.isRequired;class files_page_FilesPage extends i.Component{constructor(e){super(e),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.keys=null,this.layout=new Cr.a,this.layout.heightCache.DEFAULT_HEIGHT=69,this.width=0,this.state={columns:3},this.onFileClick=this.onFileClick.bind(this),this.onScroll=this.onScroll.bind(this),this.fetchPre=this.fetchPre.bind(this),this.fetchPost=this.fetchPost.bind(this),this.fetchAround=this.fetchAround.bind(this),this.renderRow=this.renderRow.bind(this),this.debouncedResize=Object(oa.a)(this.onResize,20)}componentDidMount(){this.props.dispatch(Object(jO.k)(this.props.currentUserId))}onFileClick(e,t){e.preventDefault();const a=t.id;a&&this.props.dispatch(Object(qa.c)({fileId:a}))}onScroll(){this.layout.anchor&&this.layout.setAnchor(!1)}onResize(e){e!==this.width&&(this.width=e,this.setState(()=>({columns:this.getColumns()})))}getColumns(){return Math.floor(this.width/300)}UNSAFE_componentWillReceiveProps(e){var t=this.props;const a=t.filetype,n=t.user;e.filetype===a&&e.user===n||(this.requestPre&&this.requestPre.cancel(),this.requestPost&&this.requestPost.cancel(),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.layout&&this.layout.setAnchor(!1))}fetchAround(){return(!this.requestPre||!this.requestPost)&&(this.reachedEnd?this.fetchPre():this.reachedStart?this.fetchPost():this.fetchPre())}fetchPost(){return!this.requestPost&&(!this.reachedEnd&&(this.requestPost=this.props.dispatch(Object(jO.b)({types:this.props.filetype,user:this.props.user})),this.requestPost.then(({paging:e}={})=>{e.page>=e.pages&&(this.reachedEnd=!0)}).finally(()=>{this.requestPost=null})))}fetchPre(){return!this.requestPre&&(!this.reachedStart&&(this.requestPre=this.props.dispatch(Object(jO.c)({types:this.props.filetype,user:this.props.user})),this.requestPre.then(({paging:e}={})=>{1===e.page&&(this.reachedStart=!0)}).finally(()=>{this.requestPre=null})))}isEmpty(){return!this.props.files.length&&this.reachedStart&&this.reachedEnd}renderFile(e){return o.a.createElement(BO,{key:e,fileId:e,className:"p-files_page__file",clogLinkClick:this.clogFileClick,useRowAction:!0,onClick:this.onFileClick,width:Math.floor((this.width-UO)/this.state.columns-UO)})}renderFiles(e){const t=this.rows[e];return o.a.createElement("div",{className:"p-files_page__row"},t.map(e=>this.renderFile(e)))}renderRow(e){const t=this.keys[e];if(!t)return null;switch(t[0]){case"L":return o.a.createElement("div",{className:"p-file_list__loading"},DO.t("Loading\u2026"));case"P":return o.a.createElement("div",{className:"p-file_list__empty"},DO.t("No matching files were found."));default:return this.renderFiles(e)}}render(){const e=this.props.files.map(e=>e.id);return this.rows=Object(Ii.a)(e,this.state.columns),this.keys=this.rows.map(e=>e[0]),this.reachedEnd||this.keys.push(`Loading${this.keys.length}`),this.isEmpty()&&this.keys.push("Placeholder"),o.a.createElement("div",{className:"p-files_page"},o.a.createElement(FO,null),o.a.createElement(tb.a,null,({measureRef:e,width:t,height:a})=>(this.debouncedResize(t),o.a.createElement("div",{className:"p-files_page__container",ref:e},o.a.createElement(Or.a,{width:t,height:a,keys:this.keys,layout:this.layout,rowRenderer:this.renderRow,onScroll:this.onScroll,ref:this.list,loadAround:this.fetchAround,loadPre:this.fetchPre,loadPost:this.fetchPost,onItemClick:this.onFileClick,"aria-label":DO.t("Files")})))))}}files_page_FilesPage.displayName="FilesPage",files_page_FilesPage.defaultProps={files:[],user:"",filetype:""};var qO=Object(u.b)(e=>({files:Object(jO.e)(e),user:Object(jO.g)(e),filetype:Object(jO.d)(e),currentUserId:Object(m.d)(e)}))(files_page_FilesPage),HO=a("g9w/");l.default.string,l.default.string,l.default.string,l.default.func.isRequired;const WO={className:void 0,user:"",filetype:""};class files_header_FilesHeader extends i.Component{constructor(e){super(e),this.renderMemberOption=this.renderMemberOption.bind(this),this.renderSelectedMemberOption=this.renderSelectedMemberOption.bind(this),this.processMemberOptions=this.processMemberOptions.bind(this),this.onMemberSelected=this.onMemberSelected.bind(this),this.onFiletypeSelected=this.onFiletypeSelected.bind(this)}onMemberSelected(e){this.props.dispatch(Object(jO.k)(e.value))}onFiletypeSelected(e){this.props.dispatch(Object(jO.j)(e.value))}processMemberOptions(e,t){return t&&t.length>0?Promise.resolve(e):Promise.resolve([{value:"",label:"Anyone"},...e])}renderSelectedMemberOption(e){const t=""===e.value?e.label:o.a.createElement(LO.a,{id:e.value});return o.a.createElement("span",null,"From: ",o.a.createElement("strong",null,t))}renderMemberOption(e){return""===e.value?o.a.createElement("strong",null,e.label):o.a.createElement(Qb.a,{id:e.value})}renderMemberSelect(){const e=this.props.user;return o.a.createElement(xO.d,{key:e,renderOption:this.renderMemberOption,renderSelectedOption:this.renderSelectedMemberOption,selectedOption:{value:e,label:e||"Anyone"},searcherOptions:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0}},sort:{selfFirst:!0},allowEmptyQuery:!0},processOptions:this.processMemberOptions,onOptionSelected:this.onMemberSelected})}renderFiletypeSelect(){const e=[{label:"All File Types",value:""},{label:"Posts",value:"docs"},{label:"Snippets",value:"snippets"},{label:"Emails",value:"emails"},{label:"Images",value:"images"},{label:"Videos",value:"videos"},{label:"PDF Files",value:"pdfs"},{label:"Spreadsheets",value:"spreadsheets"},{label:"Google Docs",value:"gdocs"}];return o.a.createElement(HO.a,{className:"p-files_page__header__controls__filetype",options:e,selectedOption:e.find(e=>e.value===this.props.filetype),onOptionSelected:this.onFiletypeSelected})}renderDownloads(){const e=this.props.dispatch;return Is.V?o.a.createElement(Ua.a,{className:"p-files_page__header__tab",onClick:()=>e(Object(qa.f)())},"Downloads"):null}render(){const e=this.props.className;return o.a.createElement("div",{className:d()(e,"p-files_page__header")},o.a.createElement("div",{className:"p-files_page__header__title"},"Files"),o.a.createElement("div",{className:"p-files_page__header__controls"},this.renderDownloads()))}}files_header_FilesHeader.displayName="FilesHeader",files_header_FilesHeader.defaultProps=WO;var GO=Object(u.b)(e=>({user:Object(jO.g)(e),filetype:Object(jO.d)(e)}))(files_header_FilesHeader);const KO=Object(Ve.b)(e=>e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.memberIds);KO.meta={name:"getFlexpaneMemberIds",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFlexpaneMemberIds"};const VO=Object(Ve.b)(e=>e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.nonExactMatchMemberIds);VO.meta={name:"getFlexpaneNonExactMatchMemberIds",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFlexpaneNonExactMatchMemberIds"};const zO=Object(Ve.b)(e=>e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.scrollmark);zO.meta={name:"getScrollmark",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetScrollmark"};const $O=Object(Ve.b)(e=>e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.marker);$O.meta={name:"getMarker",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetMarker"};const YO=Object(Ve.b)(e=>e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.searchQuery);YO.meta={name:"getSearchQuery",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetSearchQuery"};const QO=Object(Ve.b)(e=>e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.filter);QO.meta={name:"getFilter",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFilter"};var XO=a("l4bA"),JO=a("YhFg"),ZO=a("k2C/"),eC=a("l+8s"),tC=a("qPro"),aC=a("CPJ1"),nC=a("eJ6O"),sC=a("Fuyg");const rC=Object(mt.b)("Fetch and upsert membersIds displayed in member directory flexpane",(e,t,a={})=>{var n=a.isNonExactMatchMembersSearch;let s=void 0!==n&&n,r=fp()(a,["isNonExactMatchMembersSearch"]);const i=t(),o=Object(nC.a)(i)&&Object(gn.a)(i,"display_email_addresses"),l=r.searchQuery||"",c=l.indexOf("@")>0||l.indexOf("\uff20")>0,d=(({searchQuery:e="",marker:t="",index:a="",filter:n=""}={})=>{const s=Object(ZO.a)(n)||Object(ZO.b)(n),r={count:e?100:10,index:a,locale:Object(Fi.f)(),external_team:s?n:void 0,filter:s?"people":n};return e?(r.query=e,r.search_profile_fields=!0):r.marker=t,r})(r);return e(Object(aC.d)({query:d})).then(t=>{var a=t.members;const n=void 0===a?[]:a,i=t.next_marker;let d=n;if("deactivated"===r.filter&&(d=n.filter(e=>e&&!e.is_bot)),o&&c){const e=Object(sC.a)(l);d=n.filter(t=>Object(sC.a)(Object(Je.v)(t)).startsWith(e))}const u=d.map(e=>e.id);return e(s?Object(XO.b)(u):Object(XO.a)(u)),i&&e(Object(XO.e)(i)),{members:n,nextMarker:i}})});rC.meta={name:"listAndUpsertMembers",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneThunksListAndUpsertMembers",description:"Fetch and upsert membersIds displayed in member directory flexpane"},rC.propTypes={searchQuery:l.default.string,marker:l.default.string,index:l.default.string,filter:l.default.string,isNonExactMatchMembersSearch:l.default.bool};const iC=Object(mt.b)("Fetch and upsert members",(e,t,{isNonExactMatchMembersSearch:a=!1}={})=>{const n=t(),s=YO(n),r=$O(n),i=a?"people":QO(n),o=Object(ba.l)(n)?"users_by_realname":"users_by_display_name";return e(rC({searchQuery:s,marker:r,index:o,filter:i,isNonExactMatchMembersSearch:a}))});iC.meta={name:"fetchMembersPost",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneThunksFetchMembersPost",description:"Fetch and upsert members"},iC.propTypes={isNonExactMatchMembersSearch:l.default.bool};var oC=a("iH/p"),lC=a("Xuqh"),cC=a("IF1j"),dC=a("/6yw");l.default.string.isRequired,l.default.object,l.default.number.isRequired,l.default.func.isRequired;const uC={member:void 0},pC=({memberId:e,member:t,width:a,dispatch:n})=>{const s=Object(i.useCallback)(()=>{n(Object(qa.j)({memberId:e}))},[n,e]);return o.a.createElement("div",{className:"p-directory_page__member",role:"presentation",onClick:s,style:{width:a}},o.a.createElement(cC.c,{userId:e,size:a,isInteractive:!1,showBadge:!1}),o.a.createElement("div",{className:"p-directory_page__member__info"},o.a.createElement(Qh.a,{className:"p-directory_page__member__name"},o.a.createElement(LO.a,{id:e}),o.a.createElement(dC.a,{memberId:e})),o.a.createElement("div",{className:"p-directory_page__member__title"},Object(Je.S)(t))))};pC.displayName="DirectoryPageMember",pC.defaultProps=uC;var hC=Object(u.b)((e,{memberId:t})=>({member:Object(bi.d)(e,t)}))(pC),mC=a("P+mv"),bC=a("FQfs");l.default.string.isRequired,l.default.func,l.default.shape({track:l.default.func.isRequired}).isRequired,l.default.number.isRequired,l.default.number.isRequired,l.default.string.isRequired,l.default.object.isRequired,l.default.bool,l.default.func;const fC={showMemberProfile:r.a,saveScrollmarkForKey:r.a,featureFantailNurture:!1};class searchable_member_list_member_SearchableMemberListMember extends i.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var e=this.props;const t=e.id,a=e.member,n=e.searchQuery,s=e.featureFantailNurture,r=e.clogger;this.props.showMemberProfile({memberId:t}),this.props.saveScrollmarkForKey(t);const i=new mC.a({query:n,options:{entities:{members:{matchEmailField:s}},sort:{preferExactMatch:!0}}});const o=i.scoreMember(a).scoreDetails,l=i.isMemberExactMatch(a),c=i.getMemberExactMatchDetails(a);r.track("ORGANIZATION_DIRECTORY_CLICK",{organization_directory_query_length:n.length,organization_directory_results_length:this.props.numResults,organization_directory_selected_position:this.props.index,organization_directory_selected_id:a.id,organization_directory_selected_match_details:{is_exact_match:l,exact_match_details:c,score_details:o}})}render(){const e=this.props.id;return o.a.createElement("div",{className:"p-member_directory__member_row","data-qa":"member_directory_show_profile","data-qa-member":e,role:"presentation",onClick:this.onClick},o.a.createElement(bC.a,{id:e}))}}searchable_member_list_member_SearchableMemberListMember.displayName="SearchableMemberListMember",searchable_member_list_member_SearchableMemberListMember.defaultProps=fC;const _C={showMemberProfile:(...e)=>Object(qa.j)(...e),saveScrollmark:(...e)=>Object(XO.c)(...e)};var gC=Object(u.b)((e,{id:t})=>({clogger:Object(ie.a)({state:e}),member:Object(bi.d)(e,t),searchQuery:YO(e),featureFantailNurture:Object(nC.a)(e)}),_C)(searchable_member_list_member_SearchableMemberListMember);a("GhVE");const yC=new x.b("member_directory"),OC=(l.default.arrayOf(l.default.string),l.default.shape({key:l.default.string,offset:l.default.number}),l.default.string,l.default.func,l.default.string,l.default.func,l.default.func,l.default.func,l.default.arrayOf(l.default.string),l.default.bool,l.default.bool,l.default.string,l.default.shape({track:l.default.func.isRequired}).isRequired,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.bool,{memberIds:[],scrollmark:void 0,searchQuery:void 0,setSearchQuery:r.a,filter:"people",setFilter:r.a,fetchMembersPost:r.a,saveScrollmark:r.a,nonExactMatchMemberIds:[],isEnterprise:!1,isFreeTeamAdmin:!1,"aria-label":void 0,openFromOrgDirectory:r.a,featureSonicMemberDirectory:!1,featureFantailNurture:!1,onItemTabWithin:r.a,displayEmailAddresses:!1,isIAP1Enabled:!1}),CC=100,vC="SearchInProductEducation";class searchable_member_list_SearchableMemberList extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onScroll","onClearSearch","onClickSearchInProductEducation","onViewMatchesClick","onPricingClick","saveScrollmarkForKey","fetchPost","fetchAround","fetchMembers","fetchNonExactMatchMembers","renderRow","getListKeys","shouldFetchNonExactMembers","isFocusableItem","focus"]),this.requestPost=null,this.requestNonExactMatchMembers=null,this.keys=null,this.list=o.a.createRef(),this.layout=new Cr.a,this.layout.heightCache.DEFAULT_HEIGHT=60,this.width=0,this.state={reachedEnd:!1,columns:3},this.debouncedFetchPost=Object(oa.a)(this.fetchPost,CC),this.debouncedResize=Object(oa.a)(this.onResize,20)}componentDidMount(){if(!this.props.scrollmark)return;var e=this.props.scrollmark;const t=e.key,a=e.offset;this.layout.setAnchor(t,a),this.props.saveScrollmark(null)}componentDidUpdate(e){var t=this.props;const a=t.searchQuery,n=t.filter,s=t.clogger;e.searchQuery===a&&e.filter===n||(this.requestPost&&this.requestPost.cancel(),this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel(),this.requestPost=null,this.requestNonExactMatchMembers=null,this.layout&&this.layout.setAnchor(!1),this.setReachedEnd(!1,this.fetchAround),e.searchQuery!==a&&s.track("ORGANIZATION_DIRECTORY_KEYPRESS",{}),e.filter!==n&&s.track("ORGANIZATION_DIRECTORY_FILTER",{organization_directory_filter:n}))}componentWillUnmount(){this.requestPost&&this.requestPost.cancel(),this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel()}onScroll(){this.layout.anchor&&this.layout.setAnchor(!1)}onClearSearch(){this.props.setSearchQuery(""),this.props.setFilter("people")}onClickSearchInProductEducation(){this.props.openFromOrgDirectory({query:this.props.searchQuery})}onViewMatchesClick(){this.props.setFilter("people")}onPricingClick(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{ui_element:"pricing_link",step:"team_directory",action:"click"}}})}onResize(e){this.props.isIAP1Enabled&&e!==this.width&&(this.width=e,this.setState(()=>({columns:this.getIAColumns()})))}setReachedEnd(e,t){this.setState(()=>({reachedEnd:e}),t)}getIAColumns(){return Math.floor(this.width/200)}getListKeys(){const e=this.props.memberIds.filter(e=>"L"!==e[0]);return this.rows=this.props.isIAP1Enabled&&Object(Ii.a)(e,this.state.columns),this.props.isIAP1Enabled?this.rows.map(e=>e[0]):e}getNonExactMatchEmptyStateLabel(){if(!this.props.featureSonicMemberDirectory)return null;var e=this.props;const t=e.filter,a=e.isEnterprise,n=e.searchQuery,s={query:o.a.createElement("strong",null,n)};switch(t){case"admins":return a?yC.rt("No workspace admins match {query}, but there are other members who do.",s):yC.rt("No admins match {query}, but there are other members who do.",s);case"bots":return yC.rt("No bots match {query}, but there are other members who do.",s);case"org_members":return yC.rt("No members match {query}, but there are other members who do.",s);case"org_admins":return yC.rt("No org admins match {query}, but there are other members who do.",s);case"guests":return yC.rt("No guests match {query}, but there are other members who do.",s);case"deactivated":return yC.rt("No deactivated members match {query}, but there are other members who do.",s);default:return yC.rt("No members match {query}, but there are other members who do.",s)}}focus(){const e=this.list.current;e&&e.focus()}saveScrollmarkForKey(e){const t=this.list.current;t&&e&&this.props.saveScrollmark({key:e,offset:this.layout.getOffsetForKey(e)-t.getScrollTop()})}fetchPost(){return!this.requestPost&&(!this.state.reachedEnd&&(this.requestPost=this.fetchMembers(),this.requestPost.finally(()=>{this.requestPost=null})))}shouldFetchNonExactMembers(e=[]){var t=this.props;const a=t.filter,n=t.searchQuery;return!Object(io.a)(n)&&"people"!==a&&0===e.length}fetchMembers(e=!1){return this.props.fetchMembersPost({isNonExactMatchMembersSearch:e}).then(({nextMarker:e,members:t}={})=>{!this.props.searchQuery&&e||this.setReachedEnd(!0),this.shouldFetchNonExactMembers(t)&&this.fetchNonExactMatchMembers()})}fetchAround(){return!this.requestPost&&!this.state.reachedEnd&&this.debouncedFetchPost()}fetchNonExactMatchMembers(){if(this.requestNonExactMatchMembers)return!1;return this.requestNonExactMatchMembers=this.fetchMembers(!0),this.requestNonExactMatchMembers.finally(()=>{this.requestNonExactMatchMembers=null})}isFocusableItem({key:e}){return e!==this.loadingIndicatorKey&&e!==vC}renderRow(e){if(!this.props.featureSonicMemberDirectory)return null;const t=this.keys[e];if(!t)return null;if(t===this.loadingIndicatorKey)return o.a.createElement("div",{className:"p-member-directory__loading"},yC.t("Loading\u2026"));if(t===vC)return this.renderSearchInProductEducation();if(this.props.isIAP1Enabled){const a=20,n=this.rows[e].map(e=>o.a.createElement(hC,{memberId:e,key:e,width:Math.floor((this.width-a)/this.state.columns-a)}));return o.a.createElement("div",{className:"p-directory_page__row",key:t},n)}return this.renderMember({id:t,index:e})}renderSearchInProductEducation(){const e=this.props.searchQuery.indexOf("@")>0;return this.props.featureFantailNurture&&!this.props.displayEmailAddresses&&e?o.a.createElement(lC.a,{"data-qa":"workspace-directory-search-email-hint",className:"p-member-directory__empty_list",description:yC.t("Searching for people by email has been disabled in this workspace. Questions? Contact a Workspace Admin.",{ns:"search"})}):o.a.createElement(lC.a,{"data-qa":"workspace-directory-search-in-product-education",className:"p-member-directory__empty_list",description:yC.t("No luck? You can also search for people based on the topics they talk about.",{ns:"search"}),primaryActionText:yC.t("Search by Topic",{ns:"search"}),onClickPrimaryAction:this.onClickSearchInProductEducation})}renderMember({id:e,index:t}){return o.a.createElement(gC,{key:e,id:e,index:t,numResults:this.keys.length,saveScrollmarkForKey:this.saveScrollmarkForKey})}renderEmptyListView(){if(!this.props.featureSonicMemberDirectory)return null;var e=this.props;const t=e.searchQuery,a=e.nonExactMatchMemberIds,n=e.filter,s=e.isFreeTeamAdmin,r=e.clogger,i=yC.t("Clear Search"),l=yC.t("View Matches");if(a.length)return o.a.createElement(lC.a,{className:"p-member-directory__empty_list",description:this.getNonExactMatchEmptyStateLabel(),primaryActionText:l,onClickPrimaryAction:this.onViewMatchesClick,secondaryActionText:i,onClickSecondaryAction:this.onClearSearch});if(!t&&"guests"===n&&s){const e=yC.rt("Workspaces on paid plans can invite guests, like contractors, vendors, or clients. <a>See pricing plans</a>",null,({key:e,text:t})=>o.a.createElement(J_.a,{key:e,href:Object(gr.k)({entryPoint:"flexpane_search_members"}),class:"no_underline",target:"_blank",onClick:this.onPricingClick},t));return r.track("GROWTH_PRICING",{contexts:{ui_context:{step:"team_directory",action:"impression"}}}),o.a.createElement(lC.a,{className:"p-member-directory__empty_list",description:e,primaryActionText:i,onClickPrimaryAction:this.onClearSearch})}return this.renderSearchInProductEducation()}render(){return this.keys=this.getListKeys(),!this.keys.length&&this.state.reachedEnd?this.renderEmptyListView():(this.state.reachedEnd?this.keys.push(vC):(this.loadingIndicatorKey=`Loading${this.keys.length}`,this.keys.push(this.loadingIndicatorKey)),o.a.createElement(tb.a,null,({measureRef:e,width:t,height:a})=>(this.debouncedResize(t),o.a.createElement("div",{className:"p-member_directory__member_list",ref:e},o.a.createElement(Or.a,{width:t,height:a,keys:this.keys,layout:this.layout,rowRenderer:this.renderRow,onScroll:this.onScroll,ref:this.list,loadAround:this.fetchAround,loadPost:this.debouncedFetchPost,isFocusableItem:this.isFocusableItem,onItemTabWithin:this.props.onItemTabWithin,"aria-label":this.props["aria-label"]})))))}}searchable_member_list_SearchableMemberList.displayName="SearchableMemberList",searchable_member_list_SearchableMemberList.defaultProps=OC;const EC={fetchMembersPost:iC,saveScrollmark:XO.c,setSearchQuery:XO.f,setFilter:XO.d,openFromOrgDirectory:oC.f},kC=Object(u.b)(e=>({scrollmark:zO(e),searchQuery:YO(e),filter:QO(e),memberIds:KO(e),nonExactMatchMemberIds:VO(e),isEnterprise:Object(z_.d)(e),isFreeTeamAdmin:!Object(xe.D)(Object(Se.d)(e))&&Object(Je.eb)(e,Object(bi.b)(e)),clogger:Object(ie.a)({state:e}),featureSonicMemberDirectory:Object(m.m)(e,"feature_sonic_member_directory"),featureFantailNurture:Object(nC.a)(e),displayEmailAddresses:Object(gn.a)(e,"display_email_addresses")}),EC)(e=>{let t=e.forwardedRef,a=fp()(e,["forwardedRef"]);return o.a.createElement(searchable_member_list_SearchableMemberList,s()({ref:t},a))});var SC=o.a.forwardRef((e,t)=>o.a.createElement(kC,s()({forwardedRef:t},e)));a("cYut");const jC=new x.b("member_directory"),IC=(l.default.bool,l.default.bool,l.default.string,l.default.func,l.default.string,l.default.string,l.default.array,l.default.object,{featureSonicMemberDirectory:!1,isEnterprise:!1,selectedFilter:void 0,onMenuItemSelected:r.a,workspaceName:void 0,enterpriseOrgName:void 0,externalWorkspaces:[],menuProps:void 0}),wC={people:"people",orgMembers:"org_members",orgAdmins:"org_admins",workspaceMembers:"members",workspaceAdmins:"admins",bots:"bots",guests:"guests",deactivatedMembers:"deactivated"};class member_directory_menu_MemberDirectoryMenu extends i.PureComponent{static menuSeparator(){return{type:"separator"}}constructor(e){super(e),this.memberDirectoryStrings=this.props.featureSonicMemberDirectory?{people:jC.t("Everyone"),org_members:jC.t("All Members"),org_admins:jC.t("Org Admins"),members:jC.t("All Members"),admins:this.props.isEnterprise?jC.t("Workspace Admins"):jC.t("Admins"),bots:jC.t("Bots"),guests:jC.t("Guests"),deactivated:jC.t("Deactivated accounts")}:null}getLabel(e){return this.memberDirectoryStrings[e]}getWorkspaceSectionLabel(){var e=this.props;const t=e.isEnterprise,a=e.externalWorkspaces,n=e.workspaceName;if(!e.featureSonicMemberDirectory)return null;const s=a.length>0;return t?jC.t("{workspaceName} (current workspace)",{workspaceName:n}):s?n:""}buildMenuItemTemplate(e){var t=this.props;const a=t.selectedFilter,n=t.onMenuItemSelected,s=o.a.createElement(bn.b,{type:"check-small",className:"p-member_directory_menu--icon"});return{label:this.getLabel(e),click:()=>n(e),icon:a===e?s:null,className:a===e?"p-member_directory_menu--selected-item":""}}maybeBuildOrgFilterSection(){var e=this.props;const t=e.isEnterprise,a=e.enterpriseOrgName;if(!t)return[];const n={type:"header",label:a};return[member_directory_menu_MemberDirectoryMenu.menuSeparator(),n,this.buildMenuItemTemplate(wC.orgMembers),this.buildMenuItemTemplate(wC.orgAdmins)]}buildWorkspaceFilterSection(){const e={type:"header",label:this.getWorkspaceSectionLabel()};return[member_directory_menu_MemberDirectoryMenu.menuSeparator(),e,this.buildMenuItemTemplate(wC.workspaceMembers),this.buildMenuItemTemplate(wC.workspaceAdmins),this.buildMenuItemTemplate(wC.guests),this.buildMenuItemTemplate(wC.bots)]}maybeBuildExternalWorkspaceSection(){var e=this.props;const t=e.externalWorkspaces,a=e.selectedFilter,n=e.onMenuItemSelected;if(!e.featureSonicMemberDirectory)return null;const s=t.length>0,r=o.a.createElement(bn.b,{type:"check-small",className:"p-member_directory_menu--icon"});if(!s)return[];const i={type:"header",label:jC.t("External Organizations")},l=t.map(e=>{const t=Object(xe.i)(e);return{label:Object(xe.e)(e),click:()=>n(t),icon:a===t?r:null,className:a===t?"p-member_directory_menu--selected-item":""}});return[member_directory_menu_MemberDirectoryMenu.menuSeparator(),i,...l]}render(){var e=this.props;const t=e.featureSonicMemberDirectory,a=e.menuProps;if(!t)return null;const n=[...this.buildWorkspaceFilterSection(),...this.maybeBuildOrgFilterSection()],r=[this.buildMenuItemTemplate(wC.people),...n,...this.maybeBuildExternalWorkspaceSection(),member_directory_menu_MemberDirectoryMenu.menuSeparator(),this.buildMenuItemTemplate(wC.deactivatedMembers)];return o.a.createElement(fn.a,s()({},a,{template:r}))}}member_directory_menu_MemberDirectoryMenu.displayName="MemberDirectoryMenu";member_directory_menu_MemberDirectoryMenu.defaultProps=IC;var TC=Object(u.b)((e,{externalTeams:t})=>{const a=Object(Se.d)(e),n=Object(m.q)(e),s={featureSonicMemberDirectory:Object(m.m)(e,"feature_sonic_member_directory"),workspaceName:Object(xe.e)(a),isEnterprise:n,externalWorkspaces:t.map(t=>Object(Se.i)(e,t))};return n&&(s.enterpriseOrgName=Object(Se.e)(e)),s})(member_directory_menu_MemberDirectoryMenu);a("VGdo");const NC=new x.b("member_directory");l.default.string,l.default.string,l.default.bool,l.default.func.isRequired;class directory_page_DirectoryPage extends i.Component{constructor(e){super(e),this.onMenuItemSelected=this.onMenuItemSelected.bind(this),this.onFilterInputChange=this.onFilterInputChange.bind(this),this.renderMenu=this.renderMenu.bind(this),this.state={externalTeams:[]}}componentDidMount(){this.fetchExternalTeams()}onMenuItemSelected(e){this.props.dispatch(Object(XO.d)(e))}onFilterInputChange(e){const t=e.target.value||"";this.props.dispatch(Object(XO.f)(t))}fetchExternalTeams(){this.props.dispatch(Object(JO.b)()).then(e=>{e&&e.external_teams&&this.setState(()=>({externalTeams:Object.keys(e.external_teams)}))})}renderMenu(e){return o.a.createElement(TC,{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter,menuProps:e,externalTeams:this.state.externalTeams})}render(){var e=this.props;const t=e.filter,a=e.searchQuery,n=o.a.createElement(tC.a,{value:a,onChange:this.onFilterInputChange,placeholder:NC.t("Search by name or title"),icon:"search",size:"medium",autoFocus:!0,inputAriaLabel:NC.t("Search members by name or title"),className:"p-directory_page__filter_input"}),s={people:NC.t("Everyone"),org_members:NC.t("All Members"),org_admins:NC.t("Org Admins"),members:NC.t("All Members"),admins:this.props.isEnterprise?NC.t("Workspace Admins"):NC.t("Admins"),bots:NC.t("Bots"),guests:NC.t("Guests"),deactivated:NC.t("Deactivated accounts")},r=Object(ZO.a)(t)?o.a.createElement(Mb.a,{id:t}):s[this.props.filter];return o.a.createElement("div",{className:"p-directory_page"},o.a.createElement("div",{className:"p-directory_page__actions"},n,o.a.createElement(eC.a,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:4},o.a.createElement(Qh.a,{className:"p-directory_page__filter_type"},"Account type: ",o.a.createElement("strong",null,r),o.a.createElement(pe.a,{type:"chevron-down",inline:!0})))),o.a.createElement(SC,{isIAP1Enabled:!0}))}}directory_page_DirectoryPage.displayName="DirectoryPage",directory_page_DirectoryPage.defaultProps={searchQuery:"",filter:"people",isEnterprise:!1};var AC=Object(u.b)(e=>({searchQuery:YO(e),filter:QO(e),isEnterprise:Object(m.q)(e)}))(directory_page_DirectoryPage),RC=a("UEyp");l.default.bool.isRequired,l.default.bool,l.default.func.isRequired,l.default.func.isRequired;class directory_header_DirectoryHeader extends i.Component{render(){var e=this.props;const t=e.showInviteButton,a=e.showUserGroupButton;return o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"p-ia__view_header__title"},"People"),o.a.createElement("div",{className:"p-ia__view_header__spacer"}),a&&o.a.createElement(Ua.a,{onClick:()=>this.props.showUserGroupList(),className:"bold right_margin"},"User Groups"),t&&o.a.createElement(Cm.b,{onClick:()=>this.props.openInviteModal()},"Invite people"))}}directory_header_DirectoryHeader.displayName="DirectoryHeader",directory_header_DirectoryHeader.defaultProps={showUserGroupButton:!0};const MC={openInviteModal:(...e)=>Object(j.a)(...e),showUserGroupList:(...e)=>Object(qa.o)(...e)};var PC=Object(u.b)(e=>({showInviteButton:Object(RC.d)(e),showUserGroupButton:!Object(Je.Gb)(Object(bi.b)(e))&&Object(xe.D)(Object(Se.d)(e))}),MC)(directory_header_DirectoryHeader),xC=a("4vzu"),LC=a("eqKo"),FC=a("85z6");a("23La");l.default.node,l.default.string.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.bool;const DC={children:void 0,startOpen:!1},BC=({children:e,label:t,description:a,emoji:n,startOpen:s})=>{var r=Object(i.useState)(s),l=at()(r,2);const c=l[0],d=l[1],u=Object(i.useCallback)(()=>d(!c),[c,d]);return o.a.createElement(i.Fragment,null,o.a.createElement(Qh.a,{onClick:u,className:"p-page_accordion__button"},o.a.createElement("div",{className:"p-page_accordion__emoji"},o.a.createElement(FC.b,{text:n})),o.a.createElement("div",null,o.a.createElement("div",{className:"p-page_accordion__label"},t),o.a.createElement("div",{className:"p-page_accordion__description"},a)),o.a.createElement(pe.a,{className:"p-page_accordion__caret",type:c?"chevron-medium-down":"chevron-medium-right"})),c&&e)};BC.displayName="PageAccordion",BC.defaultProps=DC;var UC=BC;a("eZdM");l.default.string.isRequired,l.default.object,l.default.string,l.default.string,l.default.func.isRequired;const qC={currentUser:void 0,customStatusText:void 0,customStatusEmoji:void 0};class profile_page_ProfilePage extends i.Component{constructor(e){super(e),this.onCustomStatusClick=this.onCustomStatusClick.bind(this)}onCustomStatusClick(){this.props.dispatch(Object(LC.a)())}renderHeader(){var e=this.props;const t=e.currentUserId,a=e.currentUser,n=e.customStatusEmoji,s=e.customStatusText,r=o.a.createElement(Qh.a,{className:"p-profile_page__header__info__status",onClick:this.onCustomStatusClick},n&&o.a.createElement(eg.a,{text:s?`${n} ${s}`:n,emojiSize:Ho.a.SMALL,showTooltips:!1,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noHighlights:!0,noEmojiText:!0,preventCopyPaste:!0,stopAnimations:!0}),!n&&"Set a status",o.a.createElement(pe.a,{type:"pencil",inline:!0,size:"inherit",className:"small_left_margin"}));return o.a.createElement("div",{className:"p-profile_page__header"},o.a.createElement(cC.c,{userId:t,size:100}),o.a.createElement("div",{className:"p-profile_page__header__info"},o.a.createElement(LO.a,{id:t,className:"p-profile_page__header__info__name"}),o.a.createElement("div",{className:"p-profile_page__header__info__title"},Object(Je.S)(a)),r))}render(){return o.a.createElement("div",{className:"p-profile_page"},this.renderHeader(),o.a.createElement(UC,{emoji:"slightly_smiling_face",label:"About",description:"Full name, display name, and basic things others should know"},o.a.createElement("div",{className:"p-profile_page__section"},"Test")),o.a.createElement(UC,{emoji:"telephone",label:"Contact",description:"Tell others how to get in touch with you"},o.a.createElement("div",{className:"p-profile_page__section"},"Test")),o.a.createElement(UC,{emoji:"earth_americas",label:"Location",description:"Country, city, and floor"},o.a.createElement("div",{className:"p-profile_page__section"},"Test")),o.a.createElement(UC,{emoji:"link",label:"Links",description:"Social accounts and more"},o.a.createElement("div",{className:"p-profile_page__section"},"Test")),o.a.createElement(UC,{emoji:"octopus",label:"Everything else",description:"More details provided by your company"},o.a.createElement("div",{className:"p-profile_page__section"},"Test")))}}profile_page_ProfilePage.displayName="ProfilePage",profile_page_ProfilePage.defaultProps=qC;var HC=Object(u.b)(e=>{const t=Object(m.d)(e),a=Object(bi.f)(e,t);return{currentUserId:t,currentUser:Object(bi.d)(e,t),customStatusText:a.text,customStatusEmoji:a.emoji,inDnd:!!Object(xC.c)(e)}})(profile_page_ProfilePage),WC=a("GZPf"),GC=a("V+97"),KC=a("VPVR"),VC=a("IfQk"),zC=a("JQlo"),$C=a("37yT"),YC=a("+Y/z"),QC=a("aPoH");a("bKze");l.default.bool.isRequired;const XC=({featureTinyspeck:e})=>o.a.createElement("div",{className:"p-settings_page"},o.a.createElement(UC,{emoji:"bell",label:"Set notifications",description:"Manage alerts, do-not-disturb, sounds and keywords"},o.a.createElement("div",{className:"p-settings_page__section"},o.a.createElement(WC.a,null))),o.a.createElement(UC,{emoji:"art",label:"Themes",description:"Change the appearance of Slack"},o.a.createElement("div",{className:"p-settings_page__section"},o.a.createElement(GC.a,null))),o.a.createElement(UC,{emoji:"desktop_computer",label:"Accessibility & display",description:"Choose how messages and other media and are displayed"},o.a.createElement("div",{className:"p-settings_page__section"},o.a.createElement(VC.a,null),o.a.createElement(KC.a,null))),o.a.createElement(UC,{emoji:"open_file_folder",label:"Sidebar",description:"Choose what conversations you see and how channels are organized"},o.a.createElement("div",{className:"p-settings_page__section"},o.a.createElement(zC.a,null))),o.a.createElement(UC,{emoji:"earth_africa",label:"Language & region",description:"Set your language and timezone settings"},o.a.createElement("div",{className:"p-settings_page__section"},o.a.createElement($C.a,null))),o.a.createElement(UC,{emoji:"whale2",label:"Advanced preferences",description:"Everything else"},o.a.createElement("div",{className:"p-settings_page__section"},o.a.createElement(YC.a,null))),e&&o.a.createElement(UC,{emoji:"telescope",label:"Labs",description:"TS only"},o.a.createElement("div",{className:"p-settings_page__section"},o.a.createElement(QC.a,null))));XC.displayName="SettingsPage";var JC=Object(u.b)(e=>({featureTinyspeck:Object(m.m)(e,"feature_tinyspeck")}))(XC),ZC=a("rzEj");a("+V7z");class browse_channels_page_BrowseChannelsPage extends i.Component{render(){return o.a.createElement("div",{className:"p-ia__browse_channels_page"},o.a.createElement(ZC.a,{withoutFullscreenModal:!0,withoutHeader:!0}))}}browse_channels_page_BrowseChannelsPage.displayName="BrowseChannelsPage";l.default.bool.isRequired,l.default.func.isRequired;class browse_channels_header_BrowseChannelsHeader extends i.Component{constructor(e){super(e),this.onCreateClick=this.onCreateClick.bind(this)}onCreateClick(){this.props.openChannelCreateModal({entryPoint:"channel_browser"})}render(){const e=this.props.canUserCreateChannels;return o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"p-ia__view_header__title"},"Channels"),o.a.createElement("div",{className:"p-ia__view_header__spacer"}),e&&o.a.createElement(Cm.b,{className:"p-channel_browser__header__create","data-qa":"channel_browser_channel_create_btn",onClick:this.onCreateClick},"Create channel"))}}browse_channels_header_BrowseChannelsHeader.displayName="BrowseChannelsHeader";const ev={openChannelCreateModal:(...e)=>Object(I.a)(...e)};var tv=Object(u.b)(e=>({canUserCreateChannels:Object(te.D)(e)||Object(te.C)(e)}),ev)(browse_channels_header_BrowseChannelsHeader),av=a("0jQN"),nv=a("rMl1");a("RJyz");l.default.func.isRequired;class browse_dms_page_BrowseDmsPage extends i.Component{componentDidMount(){this.props.setDMBrowserInitialMembers({initialMembers:[]})}render(){return o.a.createElement("div",{className:"p-ia__browse_dms_page"},o.a.createElement(nv.a,{withoutFullscreenModal:!0}))}}browse_dms_page_BrowseDmsPage.displayName="BrowseDmsPage";var sv=Object(u.b)(null,e=>({setDMBrowserInitialMembers:(...t)=>e(Object(av.c)(...t))}))(browse_dms_page_BrowseDmsPage),rv=a("q2IZ");a("7/T7");class help_page_HelpPage extends i.Component{render(){return o.a.createElement("div",{className:"p-ia__help_page"},o.a.createElement(rv.a,{withoutFullscreenModal:!0}))}}help_page_HelpPage.displayName="HelpPage";l.default.string,l.default.string,l.default.string,l.default.bool,l.default.bool;const iv={className:void 0,teamUrl:"/",teamEnterpriseDomain:"",isAdminOrOwner:!1,isEnterpriseAdminOrOwner:!1},ov=({className:e,teamUrl:t,teamEnterpriseDomain:a,isAdminOrOwner:n,isEnterpriseAdminOrOwner:s})=>o.a.createElement("div",{className:d()("p-ia__settings_header",e)},o.a.createElement("div",{className:"p-ia__view_header__title"},"Preferences"),s&&o.a.createElement(J_.a,{href:`https://${a}.enterprise.slack.com/manage`,className:"p-ia__settings_header__link"},"Organization settings",o.a.createElement(pe.a,{type:"external-link-square",inline:!0})),n&&o.a.createElement(J_.a,{href:`${t}admin/settings`,className:"p-ia__settings_header__link"},"Workspace settings ",o.a.createElement(pe.a,{type:"external-link-square",inline:!0})));ov.displayName="SettingsHeader",ov.defaultProps=iv;var lv=Object(u.b)(e=>{const t=Object(Se.d)(e),a=Object(bi.b)(e),n=Object(Se.g)(e),s=Object(Je.qb)(a)||Object(Je.rb)(a),r=Object(Je.eb)(e,a)||Object(Je.Eb)(e,a)||s;return{teamUrl:Object(xe.n)(t),teamEnterpriseDomain:n&&n.domain,isAdminOrOwner:r,isEnterpriseAdminOrOwner:s}})(ov),cv=a("k+gr"),dv=a("eY5N"),uv=a("eZcK"),pv=a("RYu0"),hv=a("3kjJ");var mv=e=>{const t=[],a=[];let n=null;return e.forEach(e=>{if("top-anchor"!==e.key){if(!n||!Object(hv.a)(n,e.ts)){const s=`date-divider-${e.ts}`;a.push({index:t.length,key:s}),t.push({type:"date-divider",ts:e.ts,key:s}),n=e.ts}t.push(e)}else t.push(e)}),[t,a]},bv=a("5j4a");l.default.number.isRequired,l.default.string.isRequired,l.default.object,l.default.oneOf([l.default.string,l.default.number]).isRequired,l.default.string,l.default.string,l.default.object,l.default.func.isRequired;const fv={channel:void 0,name:void 0,senderName:void 0,latestMessage:void 0},_v=({index:e,channelId:t,channel:a,ts:n,name:s,senderName:r,latestMessage:l,dispatch:c})=>{Object(i.useEffect)(()=>{l||c(Object(Ct.b)({channelId:t,limit:1,reason:"recent-conversations"})).then(({msgs:e,hasMore:a,isLimited:n,pinCount:s,deleted:r}={})=>{c(Object(bv.k)({channelId:t})),c(Object(bt.a)({msgs:e,channelId:t,isLimited:n,pinCount:s,hasMore:{hasMoreStart:a,hasMoreEnd:!1},oldest:null,latest:null,deleted:r}))})},[c,t,l]);const u=Object(i.useCallback)(()=>{c(Object(qn.a)({id:t}))},[c,t]),p=Object(n_.a)(n),h=l?o.a.createElement($_.a,{lines:1},o.a.createElement("span",{className:"p-recent_page__conversation__sender"},r),Object($e.mb)(l)?o.a.createElement(Y_.a,{richTextBlock:l.blocks[0]}):o.a.createElement(Xt.a,{msg:l,isSingleLine:!0})):o.a.createElement(lf.b,{size:"random"}),m=d()("p-recent_page__item","p-recent_page__conversation",{"p-recent_page__item--first":0===e});return o.a.createElement(Qh.a,{className:m,onClick:u},o.a.createElement("div",{className:"p-recent_page__conversation__avatar"},(()=>{switch(Object(q.v)(a)){case"im":return o.a.createElement(cC.c,{size:36,userId:Object(q.H)(a),isInteractive:!1});default:return o.a.createElement(cC.c,{size:36,userId:l&&l.user,isInteractive:!1})}})()),o.a.createElement("div",{className:"p-recent_page__conversation__content"},o.a.createElement("div",{className:"p-recent_page__conversation__header"},o.a.createElement("div",{className:"p-recent_page__conversation__name"},s||o.a.createElement(lf.b,{size:"random"})),o.a.createElement("div",{className:"p-recent_page__timestamp"},p)),o.a.createElement("div",{className:"p-recent_page__message"},h)))};_v.displayName="RecentConversationItem",_v.defaultProps=fv;var gv=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(Hu.a)(Object(bv.h)(e,t).timestamps),s=Object(ae.a)(e,t,n),r=s&&Object(bi.d)(e,s.user),i=Object(m.d)(e);return{channel:a,name:Object(q.x)(e,a,{imIncludeAtSign:!1}),senderName:r&&(r.id===i?"You":Object(Je.H)(r)||Object(Je.V)(e,r)),latestMessage:s}})(_v);a("2LTG");l.default.array,l.default.func.isRequired;const yv=({dispatch:e,recentConversationHistory:t})=>{var a=Object(i.useState)([]),n=at()(a,2);const s=n[0],r=n[1],l=Object(i.useRef)(new Cr.a);Object(i.useEffect)(()=>{Promise.all([e(Object(dv.a)({reason:"recent-conversations"})),e(Object(uv.a)({reason:"recent-conversations"}))]).then(()=>e(Object(pv.a)())).then(e=>{r(e.filter(e=>e.latestTs||e.channel.latest>="1").map(e=>({ts:Math.floor(Object(Qu.a)(e.latestTs||e.channel.latest).getTime()/1e3),viewId:e.channel.id,type:"message"})))})},[e]);const c={viewId:"Xtop_anchor",key:"top-anchor",ts:Date.now()+1};var d=mv(Object(ct.a)([c,...s,...t].sort((e,t)=>t.ts-e.ts),"viewId")),u=at()(d,2);const p=u[0],h=u[1],m=p.map(e=>e.viewId||e.key),b=e=>{if("top-anchor"===p[e].key)return o.a.createElement("div",{className:"p-recent_page__top_anchor"});if("date-divider"===p[e].type){const t=p[e].ts,a=Object(Ol.a)(t,"{day_divider_pretty}");return o.a.createElement("div",{className:"p-recent_page__date_divider"},a)}return o.a.createElement(gv,{index:e,channelId:p[e].viewId,ts:p[e].ts,type:p[e].type||"history"})};return o.a.createElement(tb.a,null,({width:e,height:t,measureRef:a})=>o.a.createElement("div",{className:"p-recent_page",ref:a},o.a.createElement(sticky_list_StickyList,{width:e,height:t,keys:m,rowRenderer:b,stickyItems:h,stickyZIndex:1,layout:l.current})))};yv.displayName="RecentPage",yv.defaultProps={recentConversationHistory:[]};var Ov=Object(u.b)(e=>({recentConversationHistory:Object(cv.c)(e)}))(yv);l.default.func.isRequired;class recent_header_RecentHeader extends i.Component{render(){return o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"p-ia__view_header__title"},"Recent conversations"),o.a.createElement("div",{className:"p-ia__view_header__spacer"}),o.a.createElement(Cm.b,{onClick:()=>this.props.openComposerPage()},"New message"))}}recent_header_RecentHeader.displayName="RecentHeader";const Cv={openComposerPage:(...e)=>ym(...e)};var vv=Object(u.b)(null,Cv)(recent_header_RecentHeader),Ev=a("JrUZ");a("EpXI");const kv=Object(i.createContext)({containerDimensions:{width:0,height:0},contentMaxWidth:0}),Sv=()=>Object(i.useContext)(kv);l.default.node,l.default.number,l.default.number,l.default.number,l.default.number;function jv({gutter:e,contentMinWidth:t,columnSize:a,columnGap:n,children:s}){var r=Object(i.useState)(0),l=at()(r,2);const c=l[0],d=l[1];var u=Object(i.useState)(0),p=at()(u,2);const h=p[0],m=p[1];var b=Object(i.useState)(0),f=at()(b,2);const _=f[0],g=f[1];return Object(i.useEffect)(()=>{const s=2*e,r=Math.floor((c-s)/a);let i=r*a+(r-1)*n+e;i=Math.max(i,t),g(i)},[n,a,c,t,e]),o.a.createElement(tb.a,null,({width:e,height:a,measureRef:n})=>(h!==a&&m(a),c!==e&&d(e),o.a.createElement("div",{className:"p-browse_page_layout",ref:n},o.a.createElement("div",{className:"p-browse_page_layout__content"},o.a.createElement(kv.Provider,{value:{maxWidth:_,minWidth:t}},s)))))}jv.displayName="BrowsePageLayout",jv.defaultProps={children:null,gutter:80,contentMinWidth:344,columnSize:256,columnGap:8};var Iv=jv;function wv(){var e=Sv();const t=e.maxWidth,a=e.minWidth;let n;return t&&(n={maxWidth:t,minWidth:a}),o.a.createElement("div",{className:"p-browse_files_page__controls",style:n},o.a.createElement(Un.a,{name:"browse-files",id:"browse-files",placeholder:"Search files",onChange:r.a,size:"large"}))}wv.displayName="BrowseFilesPageControls",wv.defaultProps={};var Tv=wv;const Nv=Object(Er.a)(PO);l.default.string.isRequired;function Av({id:e}){return o.a.createElement(Nv,{key:e,fileId:e,className:"p-browse_files_page__file",onClick:r.a})}Av.displayName="BrowseFilesPageFile";var Rv=Av,Mv=a("iGrU");a("97Bz");l.default.array.isRequired,l.default.func.isRequired,l.default.string,l.default.oneOf(["grid","layout"]);const Pv={className:void 0,layout:"grid"};function xv({itemIds:e,renderItem:t,className:a,layout:n}){var s=Sv();const r=s.maxWidth,i=s.minWidth;let l;return r&&(l={maxWidth:r,minWidth:i}),o.a.createElement(tb.a,null,({width:s,height:r,measureRef:i})=>o.a.createElement("div",{className:d()(a,"p-browse_page_results"),ref:i},e.length?o.a.createElement(Mv.b,{width:s,height:r},o.a.createElement("div",{className:d()({"p-browse_page_results__grid":"grid"===n,"p-browse_page_results__list":"list"===n}),style:l},e.map(t))):o.a.createElement("div",{className:"p-browse_page_results__empty",style:l},"No items yet! Perform a global search in omni for files to see results.")))}xv.displayName="BrowsePageResults",xv.defaultProps=Pv;var Lv=xv;a("Cmng");l.default.array;function Fv({files:e}){const t=e.map(({id:e})=>e);return o.a.createElement("div",{className:"p-browse_files_page"},o.a.createElement(Iv,null,o.a.createElement(Tv,null),o.a.createElement(Lv,{itemIds:t,renderItem:e=>o.a.createElement(Rv,{id:e})})))}Fv.displayName="BrowseFilesPage",Fv.defaultProps={files:[]};var Dv=Object(u.b)(e=>{const t=Object(Ev.q)(e,{module:"files"});return{files:t&&t.items[1]||[]}})(Fv);const Bv=new x.b("files"),Uv=(l.default.string,l.default.func,{className:void 0,showDownloads:r.a});function qv({className:e,showDownloads:t}){return o.a.createElement("div",{className:d()(e,"p-browse_files_page__header")},o.a.createElement("div",{className:"p-browse_files_page__header__title"},Bv.t("Files")),o.a.createElement("div",{className:"p-browse_files_page__header__tab"},Is.V&&o.a.createElement(Ua.a,{className:"p-browse_files_page__header__tab_link",onClick:t},"Downloads")))}qv.displayName="BrowseFilesPageHeader",qv.defaultProps=Uv;const Hv={showDownloads:(...e)=>Object(qa.f)(...e)};var Wv=Object(u.b)(null,Hv)(qv),Gv=a("81nI"),Kv=a("maFm"),Vv=a.n(Kv),zv=a("2Rjh"),$v=a.n(zv),Yv=a("wEz6"),Qv=a.n(Yv),Xv=a("Ta79"),Jv=a.n(Xv),Zv=a("Mhgg"),eE=a.n(Zv),tE=a("RwR8"),aE=a.n(tE),nE=a("2Mhf"),sE=a.n(nE),rE=a("4OD1"),iE=a.n(rE),oE=a("ge2f"),lE=a.n(oE),cE=a("VQnp"),dE=a.n(cE),uE=a("jJ2u"),pE=a.n(uE),hE=a("sYFF"),mE=a.n(hE),bE=a("K6R2"),fE=a.n(bE),_E=a("CSbb"),gE=a.n(_E),yE=a("hnus"),OE=a.n(yE),CE=a("qsRF"),vE=a.n(CE);const EE=new x.b("paid_onboarding"),kE="share_channel",SE="invite_guests",jE="search",IE="connect_app",wE="start_group_call",TE="retention_settings",NE="signin_settings",AE="create_user_group",RE={title:l.default.string.isRequired,description:l.default.string.isRequired,images:l.default.arrayOf(l.default.string).isRequired,ctaTitle:l.default.string.isRequired,ctaAction:l.default.string.isRequired,ctaURL:l.default.string.isRequired,name:l.default.string.isRequired},ME={guests:[Vv.a,$v.a],sharedChannels:[Qv.a,Jv.a],msgHistory:[eE.a,aE.a],storage:[sE.a,iE.a],apps:[lE.a,dE.a],calls:[pE.a,mE.a],gSuite:[fE.a,gE.a],userGroups:[OE.a,vE.a]},PE={standard:["guests","sharedChannels","msgHistory","storage","apps","calls","gSuite","userGroups"],plus:[]},xE=(e,t=[])=>{if(!Object(m.m)(e,"feature_gg_from_the_start"))return[];const a=(e=>{if(!Object(m.m)(e,"feature_gg_from_the_start"))return{};const t=Object(Fi.a)();return{guests:{title:EE.t("Bring contractors directly into your workspace"),description:EE.t("Guest accounts let you use Slack with people outside your company, in just the channels you choose."),images:ME.guests,ctaTitle:"",ctaAction:SE,ctaURL:Object(Gv.b)({articleId:"202518103",zdLocale:t}),name:"invite_guests"},sharedChannels:{title:EE.t("Collaborate securely with external organizations"),description:EE.t("Shared channels let you work with clients or partner teams."),images:ME.sharedChannels,ctaTitle:"",ctaAction:kE,ctaURL:Object(Gv.b)({articleId:"115004151203",zdLocale:t}),name:"shared_channels"},msgHistory:{title:EE.t("Find the information you need, when you need it"),description:EE.t("An unlimited message archive lets you view and search all of your team\u2019s public messages."),images:ME.msgHistory,ctaTitle:"",ctaAction:jE,ctaURL:Object(Gv.b)({articleId:"202528808-Search-in-Slack-",zdLocale:t}),name:"message_history"},storage:{title:EE.t("Choose how long your team\u2019s data is stored"),description:EE.t("Custom retention settings give you complete control over how long files and messages are stored in Slack."),images:ME.storage,ctaTitle:"",ctaAction:TE,ctaURL:Object(Gv.b)({articleId:"203457187",zdLocale:t}),name:"data_storage"},apps:{title:EE.t("Connect all your apps and tools to Slack"),description:EE.t("Schedule meetings, file tickets, and more, all without leaving Slack."),images:ME.apps,ctaTitle:"",ctaAction:IE,ctaURL:"/apps",name:"apps_tools"},calls:{title:EE.t("Keep everyone in sync with group video calls"),description:EE.t("Host daily stand-ups, share docs, and check in with team members all over the world."),images:ME.calls,ctaTitle:"",ctaAction:wE,ctaURL:Object(Gv.b)({articleId:"115003501303",zdLocale:t}),name:"group_calls"},gSuite:{title:EE.t("Let your team sign in with their G Suite account"),description:EE.t("If your team uses G Suite, members can sign in to Slack via their Google account \u2014 no need to remember another password."),images:ME.gSuite,ctaTitle:"",ctaAction:NE,ctaURL:Object(Gv.b)({articleId:"204078066",zdLocale:t}),name:"g_suite"},userGroups:{title:EE.t("Organize your team with user groups"),description:EE.t("User groups let you message entire departments at once, by bundling them together in a group \u2014 like @sales or @marketing."),images:ME.userGroups,ctaTitle:"",ctaAction:AE,ctaURL:Object(Gv.b)({articleId:"212906697",zdLocale:t}),name:"user_groups"}}})(e);return t.reduce((e,t)=>{const n=a[t];return n?e.push(n):Object(Ot.b)().warn(`Invalid key ${t} when fetching benefits data`),e},[])},LE=(e,t)=>xE(e,PE[t]);var FE=a("m1aP"),DE=a.n(FE),BE=a("uxXE"),UE=a.n(BE),qE=a("3AZy"),HE=a.n(qE),WE=a("nr7U"),GE=a.n(WE);a("W5K+");const KE=new x.b("paid_onboarding");l.default.bool.isRequired,l.default.string,l.default.string.isRequired,l.default.number,l.default.oneOf(Object.values(Gm.b)).isRequired,l.default.func.isRequired;class sidebar_link_SidebarLink extends i.PureComponent{componentDidMount(){this.props.clogPaidBenefits({action:de.UiAction.IMPRESSION,step:de.UiStep.BENEFITS_SIDEBAR,elementType:de.ElementType.LINK,elementName:"sidebar_benefits"}),this.preloadBenefitCardImages()}preloadBenefitCardImages(){Object.keys(ME).forEach(e=>{const t=ME[e];(new Image).src=t[0],(new Image).src=t[1]})}renderContent(){var e=this.props;const t=e.featureGgFromTheStart,a=e.planRenewalLevel,n=e.trialPlanLevel,s=e.trialDaysRemaining,r=e.teamTrialState;if(!t)return null;let i="",l="";switch(r){case Gm.b.PAID:i=a===gr.g.standard.id?KE.t("You\u2019re on Slack Standard"):KE.t("You\u2019re on Slack Plus"),l=KE.t("See your plan");break;case Gm.b.FREE_NO_TRIAL:i=n===gr.g.standard.id?KE.t("Explore Slack Standard"):KE.t("Explore Slack Plus"),l=KE.t("Try it free for 14-days");break;case Gm.b.FREE_EXPIRED_TRIAL:i=n===gr.g.standard.id?KE.t("Keep Slack Standard?"):KE.t("Keep Slack Plus?"),l=KE.t("Your trial has ended");break;case Gm.b.IN_TRIAL:i=n===gr.g.standard.id?KE.t("Slack Standard Trial"):KE.t("Slack Plus Trial"),l=KE.rt("{trial_days_remaining, plural, =1 {# day} other {# days}} remaining",{trial_days_remaining:s})}return o.a.createElement("span",{className:"p-channel_sidebar__name full_width"},o.a.createElement("span",{className:"overflow_ellipsis bold"},i),o.a.createElement("span",{className:"overflow_ellipsis caption"},l))}renderBackgroundImage(){const e=this.props.trialPlanLevel===gr.g.standard.id,t=e?`${DE.a} 1x, ${UE.a} 2x`:`${HE.a} 1x, ${GE.a} 2x`,a=d()("position_absolute",{"p-sidebar_link__img_standard":e,"p-sidebar_link__img_plus":!e});return o.a.createElement("img",{className:a,srcSet:t,alt:""})}render(){return this.props.featureGgFromTheStart?o.a.createElement(i.Fragment,null,this.renderBackgroundImage(),this.renderContent()):null}}sidebar_link_SidebarLink.displayName="SidebarLink",sidebar_link_SidebarLink.defaultProps={planRenewalLevel:null,trialDaysRemaining:null};var VE=Object(u.b)(e=>({featureGgFromTheStart:Object(m.m)(e,"feature_gg_from_the_start"),planRenewalLevel:Object(Gm.i)(e),trialPlanLevel:Object(Gm.l)(e),trialDaysRemaining:Object(Gm.s)(e),teamTrialState:Object(Gm.r)(e)}),e=>({clogPaidBenefits:(...t)=>e(Vm(...t))}))(sidebar_link_SidebarLink);a("thgq");const zE=new x.b("paid_onboarding");s()({},RE,{clogPaidBenefits:l.default.func.isRequired,featureGgFromTheStart:l.default.bool.isRequired});class benefit_card_BenefitCard extends i.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){const e=this.props.name;this.props.clogPaidBenefits({action:de.UiAction.CLICK,step:de.UiStep.BENEFITS_PAGE,elementType:de.ElementType.LINK,elementName:`${e}_learn_more`})}renderImage(){const e=this.props.images,t=e[0],a=e[1];return o.a.createElement("img",{className:"p-benefit_card__image",src:a,srcSet:`${t} 1x, ${a} 2x`,alt:""})}renderCTATitle(){return this.props.featureGgFromTheStart?o.a.createElement("span",{className:"p-benefit_card__text_link"},o.a.createElement("strong",null,zE.t("Learn More")),o.a.createElement(bn.b,{type:"arrow-right",inline:!0})):null}render(){var e=this.props;const t=e.title,a=e.description,n=e.ctaURL;return o.a.createElement("div",{className:"p-benefit_card__container"},o.a.createElement(Ze.a,{className:"p-benefit_card__card_link","data-qa":"benefit_card_learn_more_link",rel:"noopener noreferrer",href:n,onClick:this.onClick},this.renderImage(),o.a.createElement("div",{className:"p-benefit_card__text"},o.a.createElement("h3",{className:"p-benefit_card__title"},t),o.a.createElement("p",{className:"p-benefit_card__description sk_foreground_max"},a)),this.renderCTATitle()))}}benefit_card_BenefitCard.displayName="BenefitCard";var $E=Object(u.b)(e=>({featureGgFromTheStart:Object(m.m)(e,"feature_gg_from_the_start")}),e=>({clogPaidBenefits:(...t)=>e(Vm(...t))}))(benefit_card_BenefitCard);a("8zv/");const YE=new x.b("paid_onboarding");l.default.bool.isRequired,l.default.oneOf([gr.g.standard.id,gr.g.plus.id]).isRequired,l.default.object.isRequired,l.default.string.isRequired,l.default.func.isRequired;class upgrade_footer_UpgradeFooter extends i.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var e=this.props;const t=e.team,a=e.checkoutProductId;Object(xe.P)(t,`${gr.a}?s=1&p=${a}`),this.props.clogPaidBenefits({action:de.UiAction.CLICK,step:de.UiStep.BENEFITS_PAGE,elementType:de.ElementType.BUTTON,elementName:"footer_add_payment_details"})}render(){var e=this.props;const t=e.featureGgFromTheStart,a=e.planLevel;if(!t)return null;const n=a===gr.g.standard.id?YE.t("Upgrade to Standard"):YE.t("Upgrade to Plus");return o.a.createElement("div",{className:"p-upgrade_footer align_center"},o.a.createElement("h3",{className:"p-upgrade_footer__heading"},YE.t("Ready to upgrade?")),o.a.createElement("h4",{className:"p-upgrade_footer__subheading"},YE.t("Let\u2019s do it. Just add your payment details and you\u2019ll be set.")),o.a.createElement(_e.d,{type:"primary",onClick:this.onClick,"data-qa":"upgrade_footer_button"},n))}}upgrade_footer_UpgradeFooter.displayName="UpgradeFooter";var QE=Object(u.b)(e=>({featureGgFromTheStart:Object(m.m)(e,"feature_gg_from_the_start"),team:Object(Se.d)(e),checkoutProductId:Object(Gm.j)(e)}),e=>({clogPaidBenefits:(...t)=>e(Vm(...t))}))(upgrade_footer_UpgradeFooter);a("WI3T");l.default.node.isRequired,l.default.node,l.default.string,l.default.node,l.default.string,l.default.string,l.default.string,l.default.func,l.default.string,l.default.string,l.default.func,l.default.string,l.default.string;const XE={subtitleText:"",subtitleClass:"",bodyContent:null,headerContainerClass:"",primaryButtonText:"",primaryButtonClass:"",onPrimary:r.a,secondaryButtonText:void 0,secondaryButtonClass:"",onSecondary:r.a,secondaryHref:void 0,secondaryTarget:void 0};class paid_benefits_header_PaidBenefitsHeader extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["handlePrimaryButton","handleSecondaryButton"])}handlePrimaryButton(){(0,this.props.onPrimary)()}handleSecondaryButton(){(0,this.props.onSecondary)()}renderTitle(){const e=this.props.titleText;return e?o.a.createElement("h1",{className:"p-paid_benefits_header__title"},e):null}renderSubtitle(){var e=this.props;const t=e.subtitleText,a=e.subtitleClass;if(!t)return null;const n=d()("p-paid_benefits_header__subtitle",a);return o.a.createElement("div",{className:n},t)}renderPrimaryButton(){var e=this.props;const t=e.primaryButtonText,a=e.primaryButtonClass,n=d()("p-paid_benefits_header__button","p-paid_benefits_header__button--primary",a);return o.a.createElement(_e.d,{className:n,onClick:this.handlePrimaryButton,size:"medium","data-qa":"paid_benefits_header_primary_button"},t)}renderSecondaryButton(){var e=this.props;const t=e.secondaryButtonClass,a=e.secondaryButtonText,n=e.secondaryHref,s=e.secondaryTarget,r=d()("p-paid_benefits_header__button","p-paid_benefits_header__button--secondary",t);return o.a.createElement(_e.d,{className:r,onClick:this.handleSecondaryButton,href:n,target:s,size:"medium",type:"outline","data-qa":"paid_benefits_header_secondary_button"},a)}render(){var e=this.props;const t=e.primaryButtonText,a=e.secondaryButtonText,n=e.headerContainerClass,s=e.bodyContent,r=d()("p-paid_benefits_header",n);return o.a.createElement("div",{className:r},this.renderTitle(),this.renderSubtitle(),s,o.a.createElement("div",{className:"p-paid_benefits_header__button_container"},a&&this.renderSecondaryButton(),t&&this.renderPrimaryButton()))}}paid_benefits_header_PaidBenefitsHeader.displayName="PaidBenefitsHeader",paid_benefits_header_PaidBenefitsHeader.defaultProps=XE;var JE=paid_benefits_header_PaidBenefitsHeader;a("Qsz7");const ZE=new x.b("paid_onboarding");l.default.object.isRequired,l.default.bool.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.func.isRequired;class post_downgrade_header_PostDowngradeHeader extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onPrimaryCTAClick","onSecondaryCTAClick"])}onPrimaryCTAClick(){var e=this.props;const t=e.team,a=e.checkoutProductId;Object(xe.P)(t,`${gr.a}?s=1&p=${a}&entry_point=post_downgrade_header`),this.props.clogPaidBenefits({action:de.UiAction.CLICK,step:de.UiStep.BENEFITS_PAGE,elementType:de.ElementType.BUTTON,elementName:"header_add_payment_details",isPrimaryCTA:!0})}onSecondaryCTAClick(){this.props.clogPaidBenefits({action:de.UiAction.CLICK,step:de.UiStep.BENEFITS_PAGE,elementType:de.ElementType.BUTTON,elementName:"get_quote"})}getBody(){var e=this.props;const t=e.featureGGFromTheStart,a=e.trialPlanLevel;if(!t)return null;const n=[ZE.t("Shared channels have been disconnected"),ZE.t("Guest accounts have been deactivated"),ZE.t("Video calls are now limited to 1-1"),ZE.t("You have access to just your most recent 10,000 messages and your most recent 5GB of files"),ZE.t("Your workspace is now limited to just 10 apps")].map(e=>o.a.createElement("li",{key:e}," ",e," ")),s=[a===gr.g.standard.id?ZE.t("Want to keep Slack Standard?"):ZE.t("Want to keep Slack Plus?")," ",ZE.rt("Add your payment details today, or <a>learn more about Slack\u2019s paid plans.</a>",null,({text:e})=>o.a.createElement(Ze.a,{href:Object(gr.k)({entryPoint:"benefits_downgrade_header"})},e))];return o.a.createElement("div",{className:"p-post_downgrade_header__body"},o.a.createElement("ul",null,n),o.a.createElement("p",null,s))}render(){var e=this.props;const t=e.featureGGFromTheStart,a=e.trialPlanLevel;if(!t)return null;const n=a===gr.g.standard.id,s=n?ZE.t("Your trial of Slack Standard has ended"):ZE.t("Your trial of Slack Plus has ended"),r=ZE.t("Your workspace has been downgraded to the free plan. Here\u2019s what changed:"),i=n?"p-paid_benefits_header__bg_standard":"p-paid_benefits_header__bg_plus",l=`plans/estimate?level=${n?"std":"plus"}`;return o.a.createElement(JE,{titleText:s,subtitleText:r,primaryButtonText:ZE.t("Add Payment Details"),headerContainerClass:i,bodyContent:this.getBody(),onPrimary:this.onPrimaryCTAClick,secondaryButtonText:ZE.t("Get Quote"),secondaryHref:l,secondaryTarget:"_self",onSecondary:this.onSecondaryCTAClick})}}post_downgrade_header_PostDowngradeHeader.displayName="PostDowngradeHeader";var ek=Object(u.b)(e=>({team:Object(Se.d)(e),trialPlanLevel:Object(Gm.l)(e),checkoutProductId:Object(Gm.j)(e),featureGGFromTheStart:Object(m.m)(e,"feature_gg_from_the_start")}),e=>({clogPaidBenefits:(...t)=>e(Vm(...t))}))(post_downgrade_header_PostDowngradeHeader);const tk=new x.b("paid_onboarding");l.default.string.isRequired,l.default.string.isRequired,l.default.bool.isRequired;class post_upgrade_header_PostUpgradeHeader extends i.PureComponent{render(){var e=this.props;const t=e.featureGGFromTheStart,a=e.teamName,n=e.planRenewalLevel;if(!t)return null;const s=n===gr.g.standard.id,r=s?tk.rt("{teamName} is now on Slack Standard",{teamName:a}):tk.rt("{teamName} is now on Slack Plus",{teamName:a}),i=[tk.t("Your team is all set with group video calls, shared channels, an unlimited message archive, and more.")," ",s?tk.t("See what else you get with Standard below."):tk.t("See what else you get with Plus below.")],l=s?"p-paid_benefits_header__bg_standard":"p-paid_benefits_header__bg_plus";return o.a.createElement(JE,{titleText:r,subtitleText:i,headerContainerClass:l})}}post_upgrade_header_PostUpgradeHeader.displayName="PostUpgradeHeader";var ak=Object(u.b)(e=>({teamName:Object(xe.e)(Object(Se.d)(e)),planRenewalLevel:Object(Gm.i)(e),featureGGFromTheStart:Object(m.m)(e,"feature_gg_from_the_start")}))(post_upgrade_header_PostUpgradeHeader);const nk=new x.b("paid_onboarding");l.default.bool.isRequired,l.default.func.isRequired,l.default.func.isRequired;class free_no_trial_header_FreeNoTrialHeader extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onPrimaryCTAClick"])}onPrimaryCTAClick(){this.props.startTrial("standard"),this.props.clogPaidBenefits({action:de.UiAction.CLICK,step:de.UiStep.BENEFITS_PAGE,elementType:de.ElementType.BUTTON,elementName:"start_trial",isPrimaryCTA:!0})}render(){if(!this.props.featureGGFromTheStart)return null;const e=nk.t("Try Slack Standard for free."),t=nk.t("Start your 14-day trial and explore features like group video calls, shared channels, and an unlimited, searchable message history."),a=nk.t("Start Trial");return o.a.createElement(JE,{titleText:e,subtitleText:t,primaryButtonText:a,onPrimary:this.onPrimaryCTAClick})}}free_no_trial_header_FreeNoTrialHeader.displayName="FreeNoTrialHeader";var sk=Object(u.b)(e=>({featureGGFromTheStart:Object(m.m)(e,"feature_gg_from_the_start")}),e=>({startTrial:t=>e(Object(np.a)({method:"promo.campaigns.redeem",reason:"start_trial_from_paid_benefits_view",args:{campaign_type:"golden_gate_trial",campaign_sub_type:t}})),clogPaidBenefits:(...t)=>e(Vm(...t))}))(free_no_trial_header_FreeNoTrialHeader);const rk=new x.b("paid_onboarding");l.default.string.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.object.isRequired,l.default.func.isRequired,l.default.bool.isRequired;class in_trial_header_InTrialHeader extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onPrimaryCTAClick"])}onPrimaryCTAClick(){var e=this.props;const t=e.team,a=e.checkoutProductId;Object(xe.P)(t,`${gr.a}?s=1&p=${a}&entry_point=in_trial_header`),this.props.clogPaidBenefits({action:de.UiAction.CLICK,step:de.UiStep.BENEFITS_PAGE,elementType:de.ElementType.BUTTON,elementName:"header_add_payment_details",isPrimaryCTA:!0})}formatDate(e){const t=Gi()(e).subtract(1,"day");return Object(Ro.k)(t,{excludeYear:!0})}render(){var e=this.props;const t=e.featureGGFromTheStart,a=e.team,n=e.trialPlanLevel,s=e.trialExpirationDate;if(!t)return null;const r=Object(xe.e)(a),i=this.formatDate(s),l=n===gr.g.standard.id,c=l?rk.rt("{team_name} is trying Slack Standard",{team_name:r}):rk.rt("{team_name} is trying Slack Plus",{team_name:r}),d=l?rk.rt("Your workspace can use all the features of <b>Slack Standard</b> through <b>{trial_expiry_date}.</b>",{trial_expiry_date:i}):rk.rt("Your workspace can use all the features of <b>Slack Plus</b> through <b>{trial_expiry_date}.</b>",{trial_expiry_date:i}),u=rk.t("Add your payment details to stay on this plan and keep using these features."),p=[d,o.a.createElement("br",null),u],h=l?"p-paid_benefits_header__bg_standard":"p-paid_benefits_header__bg_plus";return o.a.createElement(JE,{titleText:c,subtitleText:p,headerContainerClass:h,primaryButtonText:rk.t("Add Payment Details"),onPrimary:this.onPrimaryCTAClick})}}in_trial_header_InTrialHeader.displayName="InTrialHeader";var ik=Object(u.b)(e=>({trialPlanLevel:Object(Gm.l)(e),trialExpirationDate:Object(Gm.k)(e),checkoutProductId:Object(Gm.j)(e),team:Object(Se.d)(e),featureGGFromTheStart:Object(m.m)(e,"feature_gg_from_the_start")}),e=>({clogPaidBenefits:(...t)=>e(Vm(...t))}))(in_trial_header_InTrialHeader);a("We3W");const ok=new x.b("paid_onboarding");l.default.oneOf([gr.g.standard.id,gr.g.plus.id]).isRequired,l.default.oneOf(Object.values(Gm.b)).isRequired,l.default.arrayOf(l.default.shape(s()({},RE))).isRequired,l.default.func.isRequired,l.default.bool.isRequired;class paid_benefits_view_PaidBenefitsView extends i.PureComponent{componentDidMount(){this.props.clogPaidBenefits({action:de.UiAction.IMPRESSION,step:de.UiStep.BENEFITS_PAGE,elementType:de.ElementType.CLIENT_PAGE,elementName:"paid_benefits_page"})}renderPageHeader(){var e=this.props;const t=e.featureGgFromTheStart,a=e.teamTrialState;if(!t)return null;let n=null;switch(a){case Gm.b.PAID:n=o.a.createElement(ak,null);break;case Gm.b.FREE_NO_TRIAL:n=o.a.createElement(sk,null);break;case Gm.b.FREE_EXPIRED_TRIAL:n=o.a.createElement(ek,null);break;case Gm.b.IN_TRIAL:n=o.a.createElement(ik,null)}return n}renderBenefitsHeader(){const e=this.props.trialPlanLevel===gr.g.standard.id?ok.t("What can you do with Slack Standard?"):ok.t("What can you do with Slack Plus?");return o.a.createElement("h4",{className:"p-paid_benefits_view__benefits_header"},o.a.createElement("strong",null,e))}renderBenefitCards(){return this.props.benefitsData.map(e=>o.a.createElement("div",{className:"p-paid_benefits_view__card",key:e.name},o.a.createElement($E,e)))}renderPaidBenefits(){return o.a.createElement(i.Fragment,null,this.renderPageHeader(),o.a.createElement("div",{className:"p-paid_benefits_view__page_body","data-qa":"paid_benefits_view_page-body"},this.renderBenefitsHeader(),o.a.createElement("div",{className:"p-paid_benefits_view__card_container","data-qa":"paid_benefits_view_card-container"},this.renderBenefitCards()),this.renderFooter()))}renderFooter(){var e=this.props;const t=e.teamTrialState,a=e.trialPlanLevel;return t!==Gm.b.IN_TRIAL&&t!==Gm.b.FREE_EXPIRED_TRIAL?null:o.a.createElement(QE,{planLevel:a})}render(){return o.a.createElement(pr.a,null,({width:e,height:t})=>o.a.createElement(Mv.b,{width:e,height:t,fade:!0},o.a.createElement("div",{className:"p-paid_benefits_view","data-qa":"paid_benefits_view_container"},this.renderPaidBenefits())))}}paid_benefits_view_PaidBenefitsView.displayName="PaidBenefitsView";var lk=Object(u.b)(e=>({trialPlanLevel:Object(Gm.l)(e),teamTrialState:Object(Gm.r)(e),benefitsData:LE(e,"standard"),featureGgFromTheStart:Object(m.m)(e,"feature_gg_from_the_start")}),e=>({clogPaidBenefits:(...t)=>e(Vm(...t))}))(paid_benefits_view_PaidBenefitsView);const ck=new x.b("channel_sidebar"),dk={Pcomposer:{label:Object(_y.a)("Pcomposer"),header:e=>o.a.createElement(Tm,e),headerProps:{forceNarrow:!0},view:()=>o.a.createElement("div",{className:"p-workspace__primary_view_body"},o.a.createElement(e_,null))},Pdrafts:{label:Object(_y.a)("Pdrafts"),header:e=>o.a.createElement(Sm,e),view:()=>o.a.createElement("div",{className:"p-workspace__primary_view_body"},o.a.createElement(K_,null)),sidebar:{icon:"all-files",isBold:e=>{const t=ne(e).map(e=>Object(J.d)(e)),a=Object(C.f)(e);return Object(Y.a)(t,a).length>0}}},Pexample:{label:Object(_y.a)("Pexample"),view:()=>o.a.createElement("div",{className:"margin_100"},"Hi! This is an example page."),sidebar:{icon:"small-quote",onClick:e=>{},onClickClose:e=>{},getCloseLinkLabel:()=>ck.t("Dismiss example page",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"})}},Punreads:{label:Object(_y.a)("Punreads"),header:e=>o.a.createElement(om,e),view:()=>o.a.createElement("div",{className:"p-workspace__primary_view_body"},o.a.createElement(Yh,null)),sidebar:{icon:"list",isBold:e=>Object(m.m)(e,"feature_incremental_unread_counts")?Object(X.i)(e):Object(Q.d)(e)}},Pwelcome:{isChannelHeaderHidden:()=>!0,sidebar:{icon:"map",onClick:e=>{e(Object(ce.f)("sidebar"))},onClickClose:e=>{e(Object(ga.e)({element:o.a.createElement(Pm,null)})),e(Object(le.a)())},getCloseLinkLabel:()=>ck.t("Dismiss",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"}),isBold:e=>Object(oe.t)(e),renderLinkContent:e=>o.a.createElement(Um,e),rowHeight:70},label:Object(_y.a)("Pwelcome"),header:e=>o.a.createElement(Lm,e),view:()=>o.a.createElement(ro,null)},Papps:{label:Object(_y.a)("Papps"),header:e=>o.a.createElement(fy,e),view:()=>o.a.createElement(my,null),sidebar:{icon:"gn-menu",onClick:e=>{e(Object(qm.a)({eventId:"APP_LAUNCHER_OPEN_FROM_SIDEBAR"}))}}},Phome:{label:Object(_y.a)("Phome"),header:e=>o.a.createElement(lg,e),view:()=>o.a.createElement(ig,null),sidebar:{icon:"home",isBold:e=>Object(Hm.d)(e)}},Pactivity:{label:Object(_y.a)("Pactivity"),view:()=>o.a.createElement(zy,null),sidebar:{icon:"mentions"}},Pstars:{label:Object(_y.a)("Pstars"),view:()=>o.a.createElement(SO,null),sidebar:{icon:"bookmark"}},Pfiles:{label:Object(_y.a)("Pfiles"),view:()=>o.a.createElement(qO,null),header:e=>o.a.createElement(GO,e),sidebar:{icon:"all-files-alt"}},Pdirectory:{label:Object(_y.a)("Pdirectory"),view:()=>o.a.createElement(AC,null),header:e=>o.a.createElement(PC,e),sidebar:{icon:"team-directory"}},Pprofile:{label:Object(_y.a)("Pprofile"),view:()=>o.a.createElement(HC,null),isChannelHeaderHidden:()=>!0,sidebar:{icon:"user-groups"}},Psettings:{label:Object(_y.a)("Papps"),view:()=>o.a.createElement(JC,null),header:e=>o.a.createElement(lv,e),sidebar:{icon:"cog-o"}},"Ppaid-benefits":{isChannelHeaderHidden:()=>!0,label:Object(_y.a)("Ppaid-benefits"),view:()=>o.a.createElement(lk,null),sidebar:{icon:"",renderLinkContent:()=>o.a.createElement(VE,null),onClickClose:e=>{e(Object(Wm.b)()),e(Vm({action:de.UiAction.CLICK,step:de.UiStep.BENEFITS_SIDEBAR,elementType:de.ElementType.X,elementName:"close_sidebar_benefits"}))},onClick:e=>{e(Vm({action:de.UiAction.CLICK,step:de.UiStep.BENEFITS_SIDEBAR,elementType:de.ElementType.LINK,elementName:"sidebar_benefits"}))},getCloseLinkLabel:()=>ck.t("Dismiss"),showCloseButton:e=>Object(Gm.r)(e)!==Gm.b.IN_TRIAL,rowHeight:54}},"Pbrowse-channels":{label:Object(_y.a)("Pbrowse-channels"),view:()=>o.a.createElement(browse_channels_page_BrowseChannelsPage,null),header:e=>o.a.createElement(tv,e),sidebar:{icon:"channel"}},"Pbrowse-dms":{label:Object(_y.a)("Pbrowse-dms"),view:()=>o.a.createElement(sv,null)},"Pbrowse-files":{label:Object(_y.a)("Pbrowse-files"),view:()=>o.a.createElement(Dv,null),header:e=>o.a.createElement(Wv,e),sidebar:{icon:"all-files-alt"}},Phelp:{label:Object(_y.a)("Phelp"),view:()=>o.a.createElement(help_page_HelpPage,null),sidebar:{icon:"question-circle"}},Precent:{label:Object(_y.a)("Precent"),view:()=>o.a.createElement(Ov,null),header:e=>o.a.createElement(vv,e),sidebar:{icon:"clock-o"}}};function uk(e){return dk[e]||{}}var pk=a("RAX8"),hk=a("uI5u"),mk=a("cW5R"),bk=a("ubOb");const fk=new x.b("notifications"),_k=3,gk=3650,yk=(l.default.oneOf(["granted","default","denied","na"]),l.default.func.isRequired,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.object,{notificationPermission:"default",shouldHideBanner:!1,hasKeyboardFocusWithin:!1,onFocus:r.a,onBlur:r.a,clogger:{}}),Ok=Object(H.a)(hk.a,"EnableNotificationsBanner",{index:0}),Ck=Object(H.a)(hk.a,"ConfirmationBanner",{index:0}),vk=(e,t)=>Object(Ne.q)()&&"denied"!==e&&"1"!==Object(mk.c)("no_growl_banner")&&"1"!==Object(mk.c)("defer_growl_banner")&&!t,Ek=de.UiStep.NOTIFICATOIN_BANNER_FIRST_PROMPT,kk=de.UiStep.NOTIFICATOIN_BANNER_SECOND_PROMPT;class banner_enable_notifications_BannerEnableNotifications extends i.Component{constructor(e){super(e),Object(la.a)(this,["onClickEnableNotificationsBanner","onCloseEnableNotificationsBanner","onClickDeferNotificationsBanner","onClickNeverNotificationsBanner"]),this.state={showConfirmationBanner:!1},this.focusEnableButton=!1,this.enableNotificationsButton=o.a.createRef()}componentDidMount(){vk(this.props.notificationPermission,this.props.shouldHideBanner)&&this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:de.UiAction.IMPRESSION,step:Ek}}})}componentDidUpdate(e,t){const a=t.showConfirmationBanner,n=this.state.showConfirmationBanner;this.focusEnableButton&&!a&&n&&(this.enableNotificationsButton.current.focus(),this.focusEnableButton=!1),!vk(e.notificationPermission,e.shouldHideBanner)&&vk(this.props.notificationPermission,this.props.shouldHideBanner)&&this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:de.UiAction.IMPRESSION,step:Ek}}}),!a&&n&&this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:de.UiAction.IMPRESSION,step:kk}}})}onClickEnableNotificationsBanner(){const e=this.state.showConfirmationBanner?kk:Ek;this.props.promptForPermissionAndSetPref().then(()=>{this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:de.UiAction.CLICK,step:e,ui_properties:{element_type:"link",element_name:"enable"}}}}),this.setState(()=>({showConfirmationBanner:!1}))})}onCloseEnableNotificationsBanner(){this.props.hasKeyboardFocusWithin&&(this.focusEnableButton=!0),this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:de.UiAction.CLICK,step:Ek,ui_properties:{element_name:"dismiss",element_type:"button"}}}}),this.setState(()=>({showConfirmationBanner:!0}))}onClickDeferNotificationsBanner(){Object(mk.a)("defer_growl_banner","1",_k),this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:de.UiAction.CLICK,step:kk,ui_properties:{element_name:"defer",element_type:"link"}}}}),this.setState(()=>({showConfirmationBanner:!1}))}onClickNeverNotificationsBanner(){Object(mk.a)("no_growl_banner","1",gk),this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:de.UiAction.CLICK,step:kk,ui_properties:{element_name:"never",element_type:"link"}}}}),this.setState(()=>({showConfirmationBanner:!1}))}render(){var e=this.props;const t=e.onFocus,a=e.onBlur,n=this.state.showConfirmationBanner,s=o.a.createElement(Ua.a,{onClick:this.onClickEnableNotificationsBanner},fk.t("enable desktop notifications"));return o.a.createElement(i.Fragment,null,n?o.a.createElement(i.Fragment,null,o.a.createElement(Ck,{onFocus:t,onBlur:a,showCloseButton:!1,isFixedPosition:!1},fk.t("We strongly recommend enabling desktop notifications if you'll be using Slack on this computer."),o.a.createElement("br",null),o.a.createElement(Ua.a,{ref:this.enableNotificationsButton,onClick:this.onClickEnableNotificationsBanner},fk.t("Enable notifications"))," \u2022 ",o.a.createElement(Ua.a,{onClick:this.onClickDeferNotificationsBanner},fk.t("Ask me later"))," \u2022 ",o.a.createElement(Ua.a,{onClick:this.onClickNeverNotificationsBanner},fk.t("Never ask again on this computer")))):vk(this.props.notificationPermission,this.props.shouldHideBanner)&&o.a.createElement(Ok,{type:"info",showCloseButton:!0,onClose:this.onCloseEnableNotificationsBanner,isFixedPosition:!1,onFocus:t,onBlur:a},fk.rt("Slack needs your permission to {enableNotificationsLink}.",{enableNotificationsLink:s})))}}banner_enable_notifications_BannerEnableNotifications.displayName="BannerEnableNotifications",banner_enable_notifications_BannerEnableNotifications.defaultProps=yk;const Sk={promptForPermissionAndSetPref:Te.c};var jk=Object(bk.a)(Object(u.b)(e=>({notificationPermission:Object(pk.b)(e),shouldHideBanner:Object(oe.v)(e),clogger:Object(ie.a)({state:e})}),Sk)(banner_enable_notifications_BannerEnableNotifications)),Ik=a("vRZS");const wk=new x.b("files"),Tk=(l.default.bool.isRequired,l.default.func,{toggleBanner:r.a}),Nk=Object(H.a)(hk.a,"EnablePopupsBanner",{index:0});class banner_enable_popups_BannerEnablePopups extends i.Component{constructor(e){super(e),Object(la.a)(this,["onCloseEnablePopupsBanner"])}onCloseEnablePopupsBanner(){this.props.toggleBanner(!1)}render(){return this.props.isBannerShowing&&!Object(Ik.a)()&&o.a.createElement(i.Fragment,null,o.a.createElement(Nk,{type:"info",showCloseButton:!0,onClose:this.onCloseEnablePopupsBanner,isFixedPosition:!1},wk.rt("Please allow pop-ups in your browser. You can <a>contact Slack</a> if you need help.",{},({text:e,key:t})=>o.a.createElement(Ze.a,{key:t,href:"http://my.slack.com/help/requests/new"},e))))}}banner_enable_popups_BannerEnablePopups.displayName="BannerEnablePopups",banner_enable_popups_BannerEnablePopups.defaultProps=Tk;var Ak=Object(u.b)(e=>({isBannerShowing:Object(Gn.b)(e)}),e=>({toggleBanner:(...t)=>e(Object(Gn.c)(...t))}))(Object(H.a)(banner_enable_popups_BannerEnablePopups,"BannerEnablePopups",{index:0}));const Rk=new x.b("dunning_banners"),Mk=(l.default.string,l.default.object,l.default.func.isRequired,l.default.func.isRequired,l.default.object.isRequired,l.default.object.isRequired,"admin/billing/failed"),Pk="help/requests/new",xk={dunning_day_1_banner:{bannerPrefs:{countPref:"dunning_day_1_banner_cta_count",tsPref:"dunning_day_1_banner_last_ts"},renderMethod:"renderDunningDay1"},dunning_day_3_banner:{bannerPrefs:{countPref:"dunning_day_3_banner_cta_count",tsPref:"dunning_day_3_banner_last_ts"},renderMethod:"renderDunningDay3"},dunning_day_7_owner_cardholder_banner:{bannerPrefs:{countPref:"dunning_day_7_owner_cardholder_banner_cta_count",tsPref:"dunning_day_7_owner_cardholder_banner_last_ts"},renderMethod:"renderDunningDay7OwnerCardHolder"},dunning_day_7_admin_billing_contacts_banner:{bannerPrefs:{countPref:"dunning_day_7_admin_billing_contacts_banner_cta_count",tsPref:"dunning_day_7_admin_billing_contacts_banner_last_ts"},renderMethod:"renderDunningDay7AdminBillingContacts"},dunning_day_14_owner_cardholder_banner:{bannerPrefs:{countPref:"dunning_day_14_owner_cardholder_banner_cta_count",tsPref:"dunning_day_14_owner_cardholder_banner_last_ts"},renderMethod:"renderDunningDay14OwnerCardHolder",warningLevel:"urgent"},dunning_day_14_admin_billing_contacts_banner:{bannerPrefs:{countPref:"dunning_day_14_admin_billing_contacts_banner_cta_count",tsPref:"dunning_day_14_admin_billing_contacts_banner_last_ts"},renderMethod:"renderDunningDay14AdminBillingContacts",warningLevel:"urgent"},dunning_day_21_billing_stakeholders_banner:{bannerPrefs:{countPref:"dunning_day_21_billing_stakeholders_banner_cta_count",tsPref:"dunning_day_21_billing_stakeholders_banner_last_ts"},renderMethod:"renderDunningDay21BillingStakeHolders",warningLevel:"urgent"},dunning_day_21_all_users_banner:{bannerPrefs:{countPref:"dunning_day_21_all_users_banner_cta_count",tsPref:"dunning_day_21_all_users_banner_last_ts"},renderMethod:"renderDunningDay21AllUsers"}};class banner_dunning_BannerDunning extends i.Component{constructor(e){super(e),Object(la.a)(this,["onClose"])}componentDidUpdate(e){const t=this.props.bannerName;t&&t!==e.bannerName&&xk[t]&&this.clog({action:de.UiAction.IMPRESSION,ui_component:de.UiComponent[t.toUpperCase()],ui_properties:{element_type:de.ElementType.BANNER}})}onClose(){const e=this.props.bannerName;if(!e)return;const t=xk[e].bannerPrefs;this.clog({action:de.UiAction.CLICK,is_primary_cta:!0,ui_component:de.UiComponent[e.toUpperCase()],ui_properties:{element_type:de.ElementType.BUTTON,element_name:"close"}}),this.props.closeBanner({bannerPrefs:t})}clog(e){const t=this.props.clogger,a=s()({step:de.UiStep.BANNER_DUNNING},e);t.track(de.EventId.UPGRDEXP_DUNNING_BANNER,{contexts:{ui_context:a}})}clogLink(e){const t=this.props.bannerName;this.clog({action:de.UiAction.CLICK,is_primary_cta:!0,ui_component:de.UiComponent[t.toUpperCase()],ui_properties:{element_type:de.ElementType.LINK,element_name:e}})}renderDunningDay1(){const e=this.props.team;return Rk.rt("There was an issue processing your recent payment. <a>Update your payment details</a>",null,({text:t,key:a})=>o.a.createElement(Ze.a,{key:a,onClick:()=>{Object(xe.P)(e,Mk),this.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},t))}renderDunningDay3(){const e=this.props.team;return Rk.rt("Keep your workspace from being downgraded to the Free plan by <a>updating your payment details</a>.",null,({text:t,key:a})=>o.a.createElement(Ze.a,{key:a,onClick:()=>{Object(xe.P)(e,Mk),this.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},t))}renderDunningDay7OwnerCardHolder(){const e=this.props.team;return Rk.rt("Keep your paid plan for access to your full message history. <a>Update your payment details</a>",null,({text:t,key:a})=>o.a.createElement(Ze.a,{key:a,onClick:()=>{Object(xe.P)(e,Mk),this.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},t))}renderDunningDay7AdminBillingContacts(){return Rk.rt("There was an issue processing payment for this workspace. Please <a>ask your Workspace Owner</a> to update their payment details.",null,({text:e,key:t})=>o.a.createElement(Ze.a,{key:t,onClick:()=>{this.props.showMemberDirectory({filter:"admins"}),this.clogLink("show_members_admins")},"data-qa":"banner-dunning_admin_members_link"},e))}renderDunningDay14OwnerCardHolder(){const e=this.props.team;return Rk.rt("Your payment is overdue, and your workspace will be downgraded soon. Keep your paid plan by <a>updating your payment details</a>.",null,({text:t,key:a})=>o.a.createElement(Ze.a,{key:a,onClick:()=>{Object(xe.P)(e,Mk),this.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},t))}renderDunningDay14AdminBillingContacts(){const e=this.props.team;return Rk.rt("Payment for this workspace is overdue, and it will be downgraded soon. Questions? <a>Contact your Workspace Owner</a>, or <contact>contact support</contact>.",null,({text:t,key:a,tag:n})=>"a"===n?o.a.createElement(Ze.a,{key:a,onClick:()=>{this.props.showMemberDirectory({filter:"admins"}),this.clogLink("show_members_admins")},"data-qa":"banner-dunning_admin_members_link"},t):o.a.createElement(Ze.a,{key:a,onClick:()=>{Object(xe.P)(e,Pk),this.clogLink("contact_support")},"data-qa":"banner-dunning_support_link"},t))}renderDunningDay21BillingStakeHolders(){var e=this.props;const t=e.team,a=e.bannerData.num_days_til_downgrade||7;return Rk.rt("Your workspace will be downgraded if payment is not received within {numDaysTilDowngrade} days. <a>Update your payment details</a> or <contact>contact support</contact>.",{numDaysTilDowngrade:a},({text:e,key:a,tag:n})=>"a"===n?o.a.createElement(Ze.a,{key:a,onClick:()=>{Object(xe.P)(t,Mk),this.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},e):o.a.createElement(Ze.a,{key:a,onClick:()=>{Object(xe.P)(t,Pk),this.clogLink("contact_support")},"data-qa":"banner-dunning_support_link"},e))}renderDunningDay21AllUsers(){return Rk.rt("Your workspace may be downgraded soon, which will limit how many past messages you can see. Questions? <a>Contact your admins</a>",null,({text:e,key:t})=>o.a.createElement(Ze.a,{key:t,onClick:()=>{this.props.showMemberDirectory({filter:"admins"}),this.clogLink("show_members_admins")},"data-qa":"banner-dunning_admin_members_link"},e))}render(){const e=this.props.bannerName;if(!e)return null;const t=xk[e];if(!t)return null;const a=t.warningLevel||"warning";return o.a.createElement(hk.a,{type:a,isFixedPosition:!1,onClose:this.onClose},this[t.renderMethod]())}}banner_dunning_BannerDunning.displayName="BannerDunning",banner_dunning_BannerDunning.defaultProps={bannerName:"",bannerData:{}};var Lk=Object(u.b)(e=>({bannerName:Object(T.d)(e),bannerData:Object(T.c)(e),team:Object(Se.d)(e),clogger:Object(ie.a)({state:e})}),e=>({closeBanner:(...t)=>e(Object(T.a)(...t)),showMemberDirectory:(...t)=>e(Object(qa.i)(...t))}))(banner_dunning_BannerDunning),Fk=a("/Qam"),Dk=a("0SzJ"),Bk=a("mqzt"),Uk=a("/LVU"),qk=a("dohy"),Hk=a("jcvV");a("1iAE");const Wk=new x.b("do_not_disturb"),Gk=(l.default.bool.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.number,l.default.number,l.default.bool,l.default.object,l.default.object,l.default.func,l.default.func,l.default.func,l.default.object,l.default.func,l.default.bool,l.default.bool,l.default.bool,{snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:!1,currentChannel:{},menuProps:{},openPrefsModal:r.a,openDndDialog:r.a,openChannelNotificationPrefsModal:r.a,clogger:{track:r.a},showNotificationScheduleNewBadge:!1,setUserPrefByApi:r.a,featureGranularDnd:!1,isIAP1Enabled:!1});class dnd_enabled_menu_DndEnabledMenu extends i.PureComponent{constructor(e){super(e),this.renderSubmenu=this.renderSubmenu.bind(this),this.onClickDoNotDisturbSchedule=this.onClickDoNotDisturbSchedule.bind(this),this.onClickNotificationPreferences=this.onClickNotificationPreferences.bind(this)}onClickDoNotDisturbSchedule(){var e=this.props;const t=e.featureGranularDnd,a=e.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"}),t&&a&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:!0})}onClickNotificationPreferences(){this.props.openPrefsModal({activeSection:"notifications"})}renderDndMenuHeader(){var e=this.props;const t=e.inDndBySnooze,a=e.snoozeEndTs,n=e.dndEndTs,s=e.do24hrTime,r=e.featureGranularDnd,i=t?a:n,l=Object(Bk.b)(i,{do24hrTime:s}),c=d()({"p-dnd_menu__snooze_header":t||r,"p-dnd_menu__schedule_header":!t&&!r});return o.a.createElement("div",{className:c},o.a.createElement("div",{className:"p-dnd_menu__header_status"},o.a.createElement("div",null,o.a.createElement("strong",null,r?Wk.t("Do Not Disturb"):Wk.t("Do Not Disturb: ON"))),o.a.createElement("div",null,l)))}renderSubmenu(e){const t=this.props.clogger;return o.a.createElement(fn.f,s()({},e,{width:200}),o.a.createElement(fn.b,{label:Wk.t("30 minutes"),onSelected:()=>{this.props.snoozeNotifications({duration:30,reason:"DndEnabledMenu:30m"}),t.track(de.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:30,dnd_preset:de.DndPreset.DURATION_30_MINUTES,dnd_snooze_type:de.DndSnoozeType.SNOOZE_ADJUST})}}),o.a.createElement(fn.b,{label:Wk.t("1 hour"),onSelected:()=>{this.props.snoozeNotifications({duration:60,reason:"DndEnabledMenu:1hr"}),t.track(de.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:60,dnd_preset:de.DndPreset.DURATION_1_HOUR,dnd_snooze_type:de.DndSnoozeType.SNOOZE_ADJUST})}}),o.a.createElement(fn.b,{label:Wk.t("2 hours"),onSelected:()=>{this.props.snoozeNotifications({duration:120,reason:"DndEnabledMenu:2hr"}),t.track(de.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:120,dnd_preset:de.DndPreset.DURATION_2_HOURS,dnd_snooze_type:de.DndSnoozeType.SNOOZE_ADJUST})}}),o.a.createElement(fn.b,{label:Wk.t("4 hours"),onSelected:()=>{this.props.snoozeNotifications({duration:240,reason:"DndEnabledMenu:4hr"}),t.track(de.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:240,dnd_preset:de.DndPreset.DURATION_4_HOURS,dnd_snooze_type:de.DndSnoozeType.SNOOZE_ADJUST})}}),o.a.createElement(fn.b,{label:Wk.t("Until tomorrow"),onSelected:()=>{const e=Object(Bk.d)();this.props.snoozeNotifications({duration:e,reason:"DndEnabledMenu:tomorrow"}),t.track(de.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:e,dnd_preset:de.DndPreset.DURATION_TOMORROW,dnd_snooze_type:de.DndSnoozeType.SNOOZE_ADJUST})}}),o.a.createElement(fn.b,{label:Wk.t("Until next week"),onSelected:()=>{const e=Object(Bk.c)();this.props.snoozeNotifications({duration:e,reason:"DndEnabledMenu:week"}),t.track(de.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:e,dnd_preset:de.DndPreset.DURATION_NEXT_WEEK,dnd_snooze_type:de.DndSnoozeType.SNOOZE_ADJUST})}}),o.a.createElement(fn.b,{label:Wk.t("Custom\u2026"),onSelected:()=>{this.props.openDndDialog(),t.track(de.EventId.DND_OPEN_CUSTOM_SNOOZE_DIALOG)}}))}renderAdjustMenuItem(){var e=this.props;const t=e.inDndBySnooze,a=e.featureGranularDnd;return t||a?o.a.createElement(kn.a,{label:Wk.t("Adjust time"),renderSubmenu:this.renderSubmenu}):o.a.createElement(fn.b,{label:Wk.t("Adjust schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule})}renderSettingsMenuItem(){const e=this.props.currentChannel;if(!e.id||Object(q.ib)(e))return null;const t=o.a.createElement(Bp.a,{channelId:e.id,iconProps:{inherit:!0,align:"baseline"},inline:!0}),a=Wk.rt("Settings for {name}\u2026",{name:o.a.createElement("strong",null,t),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return o.a.createElement(fn.b,{label:a,onSelected:()=>this.props.openChannelNotificationPrefsModal({channelId:e.id,entryPoint:"dnd_enabled_menu"})})}render(){var e=this.props;const t=e.inDndBySnooze,a=e.menuProps,n=e.featureGranularDnd,r=e.showNotificationScheduleNewBadge,i=e.isIAP1Enabled;let l,c;n&&(l=o.a.createElement("span",{className:"p-dnd_menu__new_pill"},Wk.t("NEW")),c=r?o.a.createElement("span",null,Wk.t("Notification schedule\u2026")," ",l):Wk.t("Notification schedule\u2026"));return o.a.createElement("div",null,this.renderDndMenuHeader(),o.a.createElement(fn.f,s()({},a,{menuClassNames:"p-dnd_menu"}),o.a.createElement(fn.b,{label:n?Wk.t("Turn off"):Wk.t("Resume notifications now"),onSelected:()=>{t?this.props.endDndSnooze({reason:"DndEnabledMenu:end_snooze"}):this.props.endDndSchedule({reason:"DndEnabledMenu:end_schedule"})},danger:n}),this.renderAdjustMenuItem(),o.a.createElement(fn.d,null),n&&o.a.createElement(fn.b,{label:n?c:Wk.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!n&&this.renderSettingsMenuItem(),!n&&o.a.createElement(fn.b,{label:Wk.t("Your notification preferences\u2026",{fallbackHash:"4fa8d4f0498a550e3cf075dc9c810f7b6f771e65"}),onSelected:this.onClickNotificationPreferences}),i&&o.a.createElement(Dk.a,null)))}}dnd_enabled_menu_DndEnabledMenu.displayName="DndEnabledMenu",dnd_enabled_menu_DndEnabledMenu.defaultProps=Gk;var Kk=Object(u.b)(e=>{const t=Object(m.d)(e);const a=Object(xC.e)(e,t).nextDndEndTs;var n=Object(xC.f)(e);return{inDndBySnooze:n.snoozeEnabled,snoozeEndTs:n.snoozeEndTs,dndEndTs:a,do24hrTime:Object(ba.k)(e,"time24"),clogger:Object(ie.a)({state:e}),featureGranularDnd:Object(m.m)(e,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(ba.k)(e,"dnd_notification_schedule_new_badge_seen")}},e=>({snoozeNotifications:t=>e(Object(Uk.e)(t)),openDndDialog:()=>e(Object(qk.a)()),endDndSnooze:t=>e(Object(Uk.b)(t)),endDndSchedule:t=>e(Object(Uk.a)(t)),openChannelNotificationPrefsModal:t=>e(Object(Hk.a)(t)),setUserPrefByApi:t=>e(Object(Ka.f)(t)),openPrefsModal:t=>e(Object(ol.a)(t))}))(dnd_enabled_menu_DndEnabledMenu);const Vk=new x.b("do_not_disturb"),zk=(l.default.bool.isRequired,l.default.object,l.default.string,l.default.bool,l.default.bool,l.default.object,{currentChannel:{},className:void 0,featureGranularDnd:!1,featureClassicNav:!1,clogger:{track:r.a}});class dnd_button_DndButton extends i.PureComponent{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this),Object(la.a)(this,["onClick"])}onClick(){this.props.clogger.track(de.EventId.DND_MENU_OPEN,{})}renderMenu(e){var t=this.props;const a=t.inDnd,n=t.currentChannel;let r;return t.featureClassicNav&&(r={menuProps:s()({},e,{onMenuItemSelected:(t,a)=>{a.stopPropagation(),e.onMenuItemSelected(t,a)}})}),a?o.a.createElement(Kk,s()({currentChannel:n,menuProps:e},r)):o.a.createElement(Fk.a,s()({currentChannel:n,menuProps:e},r))}render(){var e=this.props;const t=e.inDnd,a=e.className,n=e.featureGranularDnd,s=t?"snooze-outline":"bell-o";return o.a.createElement(fn.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:8,onClick:this.onClick},o.a.createElement(Xr.c,{tip:n?Vk.t("Do Not Disturb"):Vk.t("Notifications"),position:"bottom",hideFromScreenReader:!0},o.a.createElement(Qh.a,{className:d()("p-dnd_button",a),"data-qa":"do_not_disturb_btn","aria-label":n?Vk.t("Do Not Disturb"):Vk.t("Notifications"),"aria-pressed":t},o.a.createElement(bn.b,{type:s}))))}}dnd_button_DndButton.displayName="DndButton",dnd_button_DndButton.defaultProps=zk;var $k=Object(u.b)(e=>{const t=Object(_.a)(e);return{inDnd:!!Object(xC.c)(e),currentChannel:Object(B.e)(e,t)||void 0,featureGranularDnd:Object(m.m)(e,"feature_granular_dnd"),featureClassicNav:Object(m.m)(e,"feature_classic_nav"),clogger:Object(ie.a)({state:e})}})(dnd_button_DndButton),Yk=a("rz65"),Qk=a("d24p"),Xk=a("Jn9h");a("skMg");const Jk=new x.b("global_actions"),Zk=(l.default.object,l.default.object,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.bool.isRequired,l.default.bool,{menuProps:{},clogger:{track:r.a},featureGlobalActionsV0:!1});class global_actions_menu_GlobalActionsMenu extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onClickMessage","onClickChannel","renderBrowseMoreTools"])}onClickMessage(){this.props.isComposeFlowEnabled?this.props.openComposerPage():this.props.openDmBrowserModal()}onClickChannel(){this.props.openChannelCreateModal({showOpenTransition:!1,entryPoint:"global_actions"})}renderBrowseMoreTools(){var e=this.props;const t=e.menuProps;if(!e.featureGlobalActionsV0)return null;const a=o.a.createElement(bn.b,{type:"search",className:"p-global_actions_menu__icon p-global_actions_menu__icon_search",size:"inherit"}),n=o.a.createElement(Xk.a,{src:"/img/global-actions/asana/asana@2x.png",height:"20",width:"20",alt:""}),i=o.a.createElement(Xk.a,{src:"/img/global-actions/bitmoji/bitmoji@2x.png",height:"20",width:"20",alt:""});return o.a.createElement(fn.f,s()({},t,{menuClassNames:"p-global_actions_menu"}),o.a.createElement(fn.b,{icon:a,className:"p-global_actions_menu__item",onSelected:r.a},o.a.createElement(qt.default,{className:"p-global_actions_menu__search_input_box",ariaLabel:Jk.t("Find tools"),placeholder:Jk.t("Find tools \u2026"),isSingleLine:!0})),o.a.createElement(fn.d,null),o.a.createElement(fn.c,{label:Jk.t("Asana"),className:"p-global_actions_menu__item_header"}),o.a.createElement(fn.b,{icon:n,label:Jk.t("Create a new task"),className:"p-global_actions_menu__item p-global_actions_menu__asana",onSelected:this.onClickChannel}),o.a.createElement(fn.b,{icon:n,label:Jk.t("View my tasks"),className:"p-global_actions_menu__item p-global_actions_menu__asana",onSelected:this.onClickChannel}),o.a.createElement(fn.c,{label:Jk.t("Bitmoji"),className:"p-global_actions_menu__item_header"}),o.a.createElement(fn.b,{icon:i,label:Jk.t("Send a Bitmoji"),className:"p-global_actions_menu__item p-global_actions_menu__bitmoji",onSelected:this.onClickChannel}))}render(){var e=this.props;const t=e.menuProps;if(!e.featureGlobalActionsV0)return null;const a=o.a.createElement("div",{className:"p-global_actions_menu__icon p-global_actions_menu__icon_message"},o.a.createElement(bn.b,{type:"pencil-filled",size:"inherit"})),n=o.a.createElement("div",{className:"p-global_actions_menu__icon p-global_actions_menu__icon_channel"},o.a.createElement(bn.b,{type:"channel",size:"inherit"})),r=o.a.createElement(Xk.a,{src:"/img/global-actions/reminder/reminder@2x.png",height:"20",width:"20",alt:""}),i=o.a.createElement(Xk.a,{src:"/img/global-actions/zoom/zoom@2x.png",height:"20",width:"20",alt:""}),l=o.a.createElement(Xk.a,{src:"/img/global-actions/giphy/giphy@2x.png",height:"20",width:"20",alt:""});return o.a.createElement("div",null,o.a.createElement(fn.f,s()({},t,{menuClassNames:"p-global_actions_menu"}),o.a.createElement(fn.b,{icon:a,label:Jk.t("Start a message"),className:"p-global_actions_menu__item p-global_actions_menu__item_primary",onSelected:this.onClickMessage,type:Yk.a.custom}),o.a.createElement(fn.b,{icon:n,label:Jk.t("Create a channel"),className:"p-global_actions_menu__item p-global_actions_menu__item_primary",onSelected:this.onClickChannel,type:Yk.a.custom}),o.a.createElement(fn.d,null),o.a.createElement(fn.c,{label:Jk.t("Suggestions"),className:"p-global_actions_menu__item_header p-global_actions_menu__item_header_suggestions"}),o.a.createElement(fn.b,{icon:r,label:Jk.t("New reminder"),className:"p-global_actions_menu__item",href:"https://calendar.google.com/calendar/b/1/r/eventedit",showLinkIndicatorIcon:!1,onSelected:()=>this.props.clogger.track(de.EventId.GLOBAL_ACTIONS_CLICK_APP,{app_id:"reminder"})}),o.a.createElement(fn.b,{icon:i,label:Jk.t("Start a Zoom call"),className:"p-global_actions_menu__item",href:"https://slack.zoom.us/j/176336025",showLinkIndicatorIcon:!1,onSelected:()=>this.props.clogger.track(de.EventId.GLOBAL_ACTIONS_CLICK_APP,{app_id:"zoom"})}),o.a.createElement(fn.b,{icon:l,label:Jk.t("Find a GIF"),className:"p-global_actions_menu__item",href:"https://giphy.com",showLinkIndicatorIcon:!1,onSelected:()=>this.props.clogger.track(de.EventId.GLOBAL_ACTIONS_CLICK_APP,{app_id:"giphy"})}),o.a.createElement(kn.a,{label:Jk.t("Browse more tools"),className:"p-global_actions_menu__item p-global_actions_menu__item_header",renderSubmenu:this.renderBrowseMoreTools})))}}global_actions_menu_GlobalActionsMenu.displayName="GlobalActionsMenu",global_actions_menu_GlobalActionsMenu.defaultProps=Zk;const eS={openDmBrowserModal:(...e)=>Object(Qk.a)(...e),openComposerPage:(...e)=>ym(...e),openChannelCreateModal:(...e)=>Object(I.a)(...e)};var tS=Object(u.b)(e=>({clogger:Object(ie.a)({state:e}),featureGlobalActionsV0:Object(m.m)(e,"feature_global_actions_v0"),isComposeFlowEnabled:Object(C.g)(e)}),eS)(global_actions_menu_GlobalActionsMenu);const aS=new x.b("global_actions"),nS=(l.default.string,l.default.bool,l.default.object,{className:void 0,featureGlobalActionsV0:!1,clogger:{track:r.a}});class global_actions_button_GlobalActionsButton extends i.PureComponent{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this),Object(la.a)(this,["onClick"])}onClick(){this.props.clogger.track(de.EventId.GLOBAL_ACTIONS_CLICK,{})}renderMenu(e){return o.a.createElement(tS,{menuProps:e})}render(){var e=this.props;const t=e.className;return e.featureGlobalActionsV0?o.a.createElement(fn.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:8,onClick:this.onClick},o.a.createElement(Xr.c,{tip:aS.t("New"),position:"bottom"},o.a.createElement(Qh.a,{className:d()("p-global_actions_button",t),"data-qa":"global_actions_btn","aria-label":aS.t("New")},o.a.createElement(bn.b,{type:"plus"})))):null}}global_actions_button_GlobalActionsButton.displayName="GlobalActionsButton",global_actions_button_GlobalActionsButton.defaultProps=nS;var sS=Object(u.b)(e=>({featureGlobalActionsV0:Object(m.m)(e,"feature_global_actions_v0"),clogger:Object(ie.a)({state:e})}))(global_actions_button_GlobalActionsButton),rS=a("ZYn4"),iS=a("6avh");const oS=Object(tp.a)("Create a new Channel Section for this user",(e,t,{name:a,emoji:n,nextChannelSectionId:s=null,reason:r="channel_sections_create"}={})=>{if(!Object(m.m)(t(),"feature_channel_sections"))return Promise.reject(new Error("Channel sections not enabled"));const i={name:a,emoji:n};return s&&(i.next_channel_section_id=s),e(Object(np.a)({method:"users.channelSections.create",args:i,reason:r}))});oS.meta={name:"fetchChannelSectionsCreate",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsCreate",description:"Create a new Channel Section for this user"},oS.propTypes={name:l.default.string.isRequired,emoji:l.default.string.isRequired,nextChannelSectionId:l.default.string};const lS=Object(tp.a)("Update a Channel Section for this user",(e,t,{channelSectionId:a,name:n,emoji:s,nextChannelSectionId:r=null,reason:i="channel_sections_set"}={})=>{if(!Object(m.m)(t(),"feature_channel_sections"))return Promise.reject(new Error("Channel sections not enabled"));const o={channel_section_id:a,name:n,emoji:s};return r&&(o.next_channel_section_id=r),e(Object(np.a)({method:"users.channelSections.set",args:o,reason:i}))});lS.meta={name:"fetchChannelSectionsSet",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsSet",description:"Update a Channel Section for this user"},lS.propTypes={channelSectionId:l.default.string.isRequired,name:l.default.string.isRequired,emoji:l.default.string.isRequired,nextChannelSectionId:l.default.string};const cS=Object(tp.a)("Gets the list of channel sections for this user",(e,t,{reason:a}={reason:"channel_sections_list"})=>Object(m.m)(t(),"feature_channel_sections")?e(Object(np.a)({method:"users.channelSections.list",args:{},reason:a})):Promise.reject(new Error("Channel sections not enabled")));cS.meta={name:"fetchChannelSectionsList",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsList",description:"Gets the list of channel sections for this user"},cS.propTypes={};const dS=Object(tp.a)("Gets a channel section for this user with the given ID",(e,t,{channelSectionId:a,reason:n}={reason:"channel_sections_get"})=>Object(m.m)(t(),"feature_channel_sections")?e(Object(np.a)({method:"users.channelSections.get",args:{channel_section_id:a},reason:n})):Promise.reject(new Error("Channel sections not enabled")));dS.meta={name:"fetchChannelSectionsGetById",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsGetById",description:"Gets a channel section for this user with the given ID"},dS.propTypes={channelSectionId:l.default.string.isRequired};const uS=Object(tp.a)("Delete a Channel Section for this user",(e,t,{channelSectionId:a,reason:n}={reason:"channel_sections_delete"})=>Object(m.m)(t(),"feature_channel_sections")?e(Object(np.a)({method:"users.channelSections.delete",args:{channel_section_id:a},reason:n})):Promise.reject(new Error("Channel sections not enabled")));uS.meta={name:"fetchChannelSectionsDelete",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsDelete",description:"Delete a Channel Section for this user"},uS.propTypes={channelSectionId:l.default.string.isRequired};const pS=Object(tp.a)("Insert or re-insert a channel into a section",(e,t,{channelSectionId:a,channelId:n,reason:s}={reason:"channel_sections_channel_insert"})=>Object(m.m)(t(),"feature_channel_sections")?e(Object(np.a)({method:"users.channelSections.channels.insert",args:{channel_section_id:a,channel_id:n},reason:s})):Promise.reject(new Error("Channel sections not enabled")));pS.meta={name:"fetchChannelSectionsChannelsInsert",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsChannelsInsert",description:"Insert or re-insert a channel into a section"},pS.propTypes={channelSectionId:l.default.string.isRequired,channelId:l.default.string.isRequired};const hS=Object(tp.a)("Remove a channel from a section",(e,t,{channelSectionId:a,channelId:n,reason:s}={reason:"channel_sections_channel_reomve"})=>Object(m.m)(t(),"feature_channel_sections")?e(Object(np.a)({method:"users.channelSections.channels.remove",args:{channel_section_id:a,channel_id:n},reason:s})):Promise.reject(new Error("Channel sections not enabled")));hS.meta={name:"fetchChannelSectionsChannelsRemove",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsChannelsRemove",description:"Remove a channel from a section"},hS.propTypes={channelSectionId:l.default.string.isRequired,channelId:l.default.string.isRequired};const mS=Object(tp.a)("Bulk update channel section membership",(e,t,{remove:a,insert:n,reason:s="channel_sections_channel_bulk_update"}={})=>Object(m.m)(t(),"feature_channel_sections")?e(Object(np.a)({method:"users.channelSections.channels.bulkUpdate",args:{remove:JSON.stringify((a||[]).map(e=>({channel_section_id:e.channelSectionId,channel_ids:e.channelIds}))),insert:JSON.stringify((n||[]).map(e=>({channel_section_id:e.channelSectionId,channel_ids:e.channelIds})))},reason:s})):Promise.reject(new Error("Channel sections not enabled")));mS.meta={name:"fetchChannelSectionsChannelsBulkUpdate",key:"fetchersUsersChannelSectionsApiFetchChannelSectionsChannelsBulkUpdate",description:"Bulk update channel section membership"},mS.propTypes={remove:l.default.arrayOf(l.default.shape({channelSectionId:l.default.string.isRequired,channelIds:l.default.arrayOf(l.default.string).isRequired})),insert:l.default.arrayOf(l.default.shape({channelSectionId:l.default.string.isRequired,channelIds:l.default.arrayOf(l.default.string).isRequired}))},Object(Ia.a)("fetchChannelSections",{list:e=>Object(p.dispatchForTeamId)(e,cS()),create:(e,t,a,n)=>Object(p.dispatchForTeamId)(e,oS({name:t,emoji:a,nextChannelSectionId:n})),set:(e,t,a,n,s)=>Object(p.dispatchForTeamId)(e,lS({channelSectionId:t,name:a,emoji:n,nextChannelSectionId:s})),deleteSection:(e,t)=>Object(p.dispatchForTeamId)(e,uS({channelSectionId:t})),insertChannel:(e,t,a)=>Object(p.dispatchForTeamId)(e,pS({channelSectionId:t,channelId:a})),removeChannel:(e,t,a)=>Object(p.dispatchForTeamId)(e,hS({channelSectionId:t,channelId:a}))});var bS=a("S6Dj"),fS=void 0;const _S=Object(mt.b)("Fetches and upserts Channel Sections",(e,t,{ids:a}={ids:[]})=>e(cS()).then(t=>{t.channel_sections.forEach(t=>{e(Object(bS.l)({channelSectionId:t.channel_section_id,channelSection:{id:t.channel_section_id,type:t.type,name:t.name,emoji:t.emoji,nextChannelSectionId:t.next_channel_section_id}}));const a=t&&t.channel_ids_page&&t.channel_ids_page.channel_ids||[];e(Object(bS.e)({channelSectionId:t.channel_section_id,channelIds:a}))});const n=t.channel_sections.map(e=>e.channel_section_id);return Object(Y.a)(a,n).forEach(t=>e(Object(bS.b)({channelSectionId:t}))),n}));_S.meta={name:"fetchAndUpsertChannelSectionsList",key:"channelSectionsStoreConditionalFetchingFetchAndUpsertChannelSectionsList",description:"Fetches and upserts Channel Sections"},_S.propTypes={ids:l.default.arrayOf(l.default.string).isRequired};const gS=Object(kt.a)(()=>new St.b({fetch:(e,t)=>Object(p.dispatchForTeamId)(e,_S({ids:t})).then(t=>{fS.markObjectsAsFresh(e,t)}),isEnabled:e=>Object(m.m)(Object(p.getStateByTeamId)(e),"feature_channel_sections"),metricsName:"channel-sections",maxAge:()=>86400})),yS=(e,t)=>{gS().maybeRefetch(e,t)};Object(Ia.b)("conditionalFetchManagerChannelSections",gS);const OS=Object(Ve.b)(e=>(yS(Object(h.b)(e),"channel-sections-list-pseudo-id"),e&&e.channelSections&&e.channelSections.channelSectionById||{}));OS.meta={name:"getAllChannelSections",key:"channelSectionsStoreChannelSectionsSelectorsGetAllChannelSections"};const CS=Object(Ve.b)(e=>(yS(Object(h.b)(e),"channel-sections-list-pseudo-id"),e&&e.channelSections&&e.channelSections.orderedChannelSectionList));CS.meta={name:"_getOrderedChannelSections",key:""},CS.meta={name:"getOrderedChannelSections",key:"channelSectionsStoreChannelSectionsSelectorsGetOrderedChannelSections"};const vS=Object(Ve.b)(e=>{const t=CS(e);return t&&t[0]&&t[0].id||null});vS.meta={name:"getFirstChannelSectionId",key:"channelSectionsStoreChannelSectionsSelectorsGetFirstChannelSectionId"};const ES=Object(Ve.b)((e,t)=>(yS(Object(h.b)(e),"channel-sections-list-pseudo-id"),e&&e.channelSections.channelSectionById&&e.channelSections.channelSectionById[t]));ES.meta={name:"_getChannelSectionById",key:""},ES.meta={name:"getChannelSectionById",key:"channelSectionsStoreChannelSectionsSelectorsGetChannelSectionById"};const kS=Object(Ve.b)(e=>(yS(Object(h.b)(e),"channel-sections-list-pseudo-id"),e&&e.channelSections&&e.channelSections.channelIdsByChannelSectionId));kS.meta={name:"getAllChannelSectionChannels",key:"channelSectionsStoreChannelSectionsSelectorsGetAllChannelSectionChannels"};const SS=[],jS=Object(Ve.b)((e,t)=>(yS(Object(h.b)(e),"channel-sections-list-pseudo-id"),e&&e.channelSections&&e.channelSections.channelIdsByChannelSectionId&&e.channelSections.channelIdsByChannelSectionId[t]||SS));jS.meta={name:"_getChannelSectionChannels",key:""},jS.meta={name:"getChannelSectionChannels",key:"channelSectionsStoreChannelSectionsSelectorsGetChannelSectionChannels"};const IS=[],wS=Object(Ve.b)((e,t)=>e&&e.channelSections&&e.channelSections.channelSectionIdsByChannelId&&e.channelSections.channelSectionIdsByChannelId[t]||IS);wS.meta={name:"getChannelChannelSections",key:"channelSectionsStoreChannelSectionsSelectorsGetChannelChannelSections"};const TS=Object(Ve.b)((e,t)=>wS(e,t).length>0);TS.meta={name:"getChannelIsInAnyChannelSection",key:"channelSectionsStoreChannelSectionsSelectorsGetChannelIsInAnyChannelSection"},Object(Ve.b)((e,t)=>e&&e.channelSections&&e.channelSections.localChannelSectionById&&e.channelSections.localChannelSectionById[t]).meta={name:"getLocalChannelSectionById",key:"channelSectionsStoreChannelSectionsSelectorsGetLocalChannelSectionById"};const NS=Object(Ve.b)(e=>e&&e.channelSections.isOrganizing);NS.meta={name:"getIsOrganizing",key:"channelSectionsStoreChannelSectionsSelectorsGetIsOrganizing"},Object(Ve.b)(e=>e&&e.channelSections.focusedChannelSectionId).meta={name:"getFocusedChannelSectionId",key:"channelSectionsStoreChannelSectionsSelectorsGetFocusedChannelSectionId"};const AS=Object(Ve.b)((e,t)=>!!(e&&e.channelSections&&e.channelSections.defaultSectionsCollapsed&&e.channelSections.defaultSectionsCollapsed[t]));AS.meta={name:"isDefaultSectionCollapsed",key:"channelSectionsStoreChannelSectionsSelectorsIsDefaultSectionCollapsed"};const RS=Object(Ve.b)((e,t)=>!!(e&&e.channelSections&&e.channelSections.customSectionsCollapsed&&e.channelSections.customSectionsCollapsed[t]));RS.meta={name:"isCustomSectionCollapsed",key:"channelSectionsStoreChannelSectionsSelectorsIsCustomSectionCollapsed"};const MS=Object(Ve.b)(e=>e&&e.channelSections&&e.channelSections.customSectionsCollapsed);MS.meta={name:"getAllCustomSectionCollapsedDict",key:"channelSectionsStoreChannelSectionsSelectorsGetAllCustomSectionCollapsedDict"};const PS=Object(Ve.b)(e=>e&&e.channelSections&&e.channelSections.defaultSectionsCollapsed);PS.meta={name:"getAllDefaultSectionCollapsedDict",key:"channelSectionsStoreChannelSectionsSelectorsGetAllDefaultSectionCollapsedDict"};const xS=Object(Ve.b)(e=>e&&e.channelSections&&Object.keys(e.channelSections.organizingSectionItemSelectedState).length||0);xS.meta={name:"getOrganizingSectionItemSelectionCount",key:"channelSectionsStoreChannelSectionsSelectorsGetOrganizingSectionItemSelectionCount"};const LS=Object(Ve.b)((e,t,a)=>!!(e&&e.channelSections&&e.channelSections.organizingSectionItemSelectedState&&e.channelSections.organizingSectionItemSelectedState[`${t}-${a}`]));LS.meta={name:"getIsOrganizingSectionItemSelected",key:"channelSectionsStoreChannelSectionsSelectorsGetIsOrganizingSectionItemSelected"};const FS=Object(Ve.b)(e=>e&&e.channelSections&&e.channelSections.organizingSectionItemSelectedState&&Object.values(e.channelSections.organizingSectionItemSelectedState));FS.meta={name:"getAllSelectedItems",key:"channelSectionsStoreChannelSectionsSelectorsGetAllSelectedItems"};const DS=Object(Ve.b)(e=>e&&e.channelSections&&e.channelSections.lastActiveDropTargetForChannelDrag);DS.meta={name:"getLastActiveDropTargetForChannelDrag",key:"channelSectionsStoreChannelSectionsSelectorsGetLastActiveDropTargetForChannelDrag"};const BS=Object(Ve.b)(e=>e&&e.channelSections&&e.channelSections.lastActiveDropTargetForChannelSectionDrag);BS.meta={name:"getLastActiveDropTargetForChannelSectionDrag",key:"channelSectionsStoreChannelSectionsSelectorsGetLastActiveDropTargetForChannelSectionDrag"},Object(Ia.a)("channelSectionsSelectors",{getOrderedChannelSections:e=>CS(e),getChannelSectionById:(e,t)=>ES(e,t),getChannelSectionChannels:(e,t)=>jS(e,t)});var US=a("okZA"),qS=a("yZEV"),HS=a("W045"),WS=a("8vJI");l.default.string.isRequired,l.default.string,l.default.string.isRequired;const GS={secondary:void 0},KS=({name:e,secondary:t,userId:a})=>{const n=t&&o.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__sub"},t);return o.a.createElement("div",{className:"p-classic_nav__team_menu__blurb p-classic_nav__team_menu__blurb--user"},o.a.createElement(fi.c,{userId:a,size:36,isInteractive:!1,className:"p-classic_nav__team_menu__blurb__icon",tabIndex:"-1"}),o.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__right"},o.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__name"},e),n))};KS.displayName="UserBlurb",KS.defaultProps=GS;var VS=Object(u.b)(e=>{const t=Object(bi.b)(e);return{name:Object(Je.V)(e,t),secondary:Object(Je.M)(e,t),userId:t.id}})(KS);const zS=new x.b("classic_nav");function $S(e,t){const a=e.hasCustomStatus,n=e.presence,s=e.featureClassicNav,r=e.featureOfflineMode,i=e.isOffline;return s?[{type:"custom",children:o.a.createElement(VS,{key:"user-blurb"}),show:!0,key:"user-blurb"},{label:zS.t("Clear status"),show:a,click:t.clearStatus,key:"clear-status"},{label:a?zS.t("Edit status"):zS.t("Set a status"),shortcut:Object(ue.q)()?"\u2318\u21e7Y":"Ctrl+Shift+Y",show:!0,click:t.setStatus,key:"set-status"},{label:zS.t("Profile & account"),show:!0,click:t.openProfile,key:"profile"},{label:zS.t("Preferences"),shortcut:Object(ue.q)()&&Is.V&&"\u2318,",show:!0,click:t.preferences,key:"preferences"},{label:YS({presence:n,featureClassicNav:s}),show:!0,click:t.togglePresence,key:"presence",disabled:r&&i,showOfflineIcon:r&&i},{label:zS.t("Help & feedback"),show:!0,click:t.help,key:"help"}].filter(e=>e.show):[]}function YS({presence:e,featureClassicNav:t}={}){if(!t)return null;switch(e){case"active":return zS.rt("Set yourself to <strong>away</strong>");case"away":return zS.rt('<strong className="half_opacity">Away</strong> Set yourself to <strong>active</strong>');default:return null}}function QS(e){const t=Object(bi.b)(e);return{hasCustomStatus:Object(Je.ab)(t),presence:Object(qS.f)(e,t.id),isOffline:!Object(pa.c)(e),featureClassicNav:Object(m.m)(e,"feature_classic_nav"),featureOfflineMode:Object(m.m)(e,"feature_offline_mode")}}function XS(e){return{clearStatus:()=>e(Object(HS.a)({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}})),setStatus:()=>e(Object(LC.a)()),openProfile:()=>e(Object(qa.j)()),preferences:()=>e(Object(ol.a)()),togglePresence:()=>e(Object(qS.h)()),help:()=>e(Object(WS.a)())}}var JS=a("yU6Y"),ZS=a.n(JS),ej=a("KGMq"),tj=a("0nhw"),aj=a("s5Is"),nj=a("derf");const sj=new x.b("leave_workspace"),rj=Object(Ot.b)(),ij=(l.default.object.isRequired,l.default.object.isRequired,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,{featureSonicLeaveWorkspaceDialog:!1,callLeaveWorkspace:r.a,enqueueToast:r.a,removeWorkspaceAndSignOutOfTeam:r.a,getSelfEnterpriseOwnerEmail:r.a}),oj={disableDeniedDueToIdpGroupMembership:"disable_denied_due_to_idpgroup_membership",userDeletedAlready:"user_deleted_already",failedToConvertOrgUserToTeamUser:"failed_to_convert_org_user_to_team_user"};class leave_workspace_dialog_LeaveWorkspaceDialog extends o.a.Component{constructor(e){super(e),this.state={isLoading:!1},this.onClickSubmit=this.onClickSubmit.bind(this),this.trackLeaveClick=this.trackLeaveClick.bind(this)}onClickSubmit(){var e=this.props;const t=e.team,a=e.removeWorkspaceAndSignOutOfTeam;if(!e.featureSonicLeaveWorkspaceDialog)return null;const n=Object(xe.i)(t);this.setState(()=>({isLoading:!0}));const s=this.props.getSelfEnterpriseOwnerEmail();return this.trackLeaveClick(),this.props.callLeaveWorkspace({teamId:n}).catch(({data:e})=>{if(e.error===oj.disableDeniedDueToIdpGroupMembership){const t=sj.rt("<strong>You can\u2019t leave this workspace.</strong>"),a=sj.rt("Because you\u2019re in an IdP group assigned to this workspace, you can\u2019t leave it here. <a>Contact an Org Admin</a> for help leaving the workspace.",null,({key:e,text:t})=>o.a.createElement("a",{key:e,href:`mailto:${s}`,target:"_blank",rel:"noopener noreferrer"},t));this.setToastText({node:o.a.createElement("div",null,o.a.createElement("strong",null,t),o.a.createElement("br",null),a)}),rj.error("Error with Leave Workspace Action from TeamMenu - ",e.error)}else if(e.error===oj.userDeletedAlready||e.error===oj.failedToConvertOrgUserToTeamUser){a(n);const e=sj.rt("<strong>You've successfully left {team_name}</strong>",{team_name:Object(xe.e)(t),fallbackHash:"4a38fa5a5bec946cb5cc0d6a9e2817bc498562aa"});this.setToastText({node:o.a.createElement("span",null,e)})}else{const t=sj.rt("<strong>Leaving workspace failed due to an error</strong>",{fallbackHash:"e51a69c26500f73f762ddcacb0cdcb7db688191f"});this.setToastText({node:o.a.createElement("span",null,t)}),rj.error("Error with Leave Workspace Action from TeamMenu - ",e.error)}}).finally(()=>{this.setState(()=>({isLoading:!1}))})}setToastText({node:e}){this.props.enqueueToast({element:o.a.createElement(Ba.b,{position:"bottom-right",offsetY:50,fadeDelay:5e3},e)})}trackLeaveClick(){var e=this.props;const t=e.team,a=e.clogger,n={anchor_page:"your_workspaces",entity_key:"leave_workspace_confirm",target_team_id:Object(xe.i)(t),tracking_code:"your_workspaces_list"};a.track("ENTERPRISE_LEAVE_WORKSPACE",s()({},n,{contexts:{ui_context:{action:"click",action_status:1}}}))}render(){var e=this.props;const t=e.featureSonicLeaveWorkspaceDialog,a=e.team,n=this.state.isLoading;if(!t)return null;const s=sj.t("Are you sure you want to leave {team_name}?",{team_name:Object(x.q)(Object(xe.e)(a)),fallbackHash:"2db4b766c6e1e14fbc2657d45b8fb13b96b85dd6"}),r=o.a.createElement("div",{className:"display_flex align_items_center"},o.a.createElement(nj.b,{id:Object(xe.i)(a),size:20,className:"margin_right_75"}),o.a.createElement("div",null,s));return o.a.createElement(o.a.Fragment,null,o.a.createElement(bs.a,{title:r,titleAria:s,goButtonText:sj.t("Leave This Workspace",{fallbackHash:"29b1014ee5c119d2a9785259535f58bb3f123bb6"}),onGo:this.onClickSubmit,showCancelButton:!0,truncateTitle:!1,shouldCloseOnGo:!0,goButtonIsPending:n},Object(xe.J)(a)&&sj.t("This workspace is hidden. Once you leave, you won\u2019t have access unless you\u2019re invited back.")))}}leave_workspace_dialog_LeaveWorkspaceDialog.displayName="LeaveWorkspaceDialog",leave_workspace_dialog_LeaveWorkspaceDialog.defaultProps=ij;var lj=Object(u.b)(e=>{const t=Object(m.d)(e);return{team:Object(Se.d)(e),clogger:Object(ie.a)({state:e}),member:Object(bi.d)(e,t),featureSonicLeaveWorkspaceDialog:Object(m.m)(e,"feature_sonic_leave_workspace_dialog"),getSelfEnterpriseOwnerEmail:()=>Object(Se.f)(e)}},e=>({enqueueToast:(...t)=>e(Object(_a.c)(...t)),callLeaveWorkspace:(...t)=>e(Object(tj.c)(...t)),removeWorkspaceAndSignOutOfTeam:e=>Object(p.dispatchForClientStore)(Object(aj.removeWorkspace)(e))}))(leave_workspace_dialog_LeaveWorkspaceDialog);const cj=Object(mt.b)("Opens the leave a workspace dialog",(e,t)=>{Object(m.m)(t(),"feature_sonic_leave_workspace_dialog")&&e(Object(ga.e)({element:o.a.createElement(lj,{})}))});cj.meta={name:"openLeaveWorkspaceDialog",key:"actionsOpenLeaveWorkspaceDialogOpenLeaveWorkspaceDialog",description:"Opens the leave a workspace dialog"};var dj=cj;cj.propTypes={};var uj=a("XUHR");const pj=Object(mt.b)("Clogs shared channels team menu item click",(e,t)=>{const a=t(),n=Object(ie.a)({state:a}),s=Object(xe.D)(Object(Se.d)(a));n.track(de.EventId.GROWTH_INTRO_SHARED_CHANNEL,{contexts:{ui_context:{step:de.UiStep.TEAM_MENU,step_variant:s?gr.b.PAID:gr.b.FREE,action:de.UiAction.CLICK,ui_properties:{element_type:de.ElementType.LINK,element_name:s?"shared_channels_beta_cta":"shared_channels_beta_new_cta"}}}}),n.track(de.EventId.CHANNEL_CREATE_FLOW,{contexts:{family:"shared",ui_context:{step:"channel_create_modal",action:de.UiAction.CLICK,ui_properties:{element_type:de.ElementType.BUTTON,element_name:"shared_channels_new"}}}})});pj.meta={name:"clogSharedChannelsTeamMenuItemClick",key:"actionsClogSharedChannelsTeamMenuItemClickClogSharedChannelsTeamMenuItemClick",description:"Clogs shared channels team menu item click"};var hj=pj,mj=a("XNBh"),bj=a("Lts7"),fj=a("KXvl"),_j=a("p9qW"),gj=a("6FZx");const yj=Object(Ve.b)(e=>e&&e.teamMenuCTA&&e.teamMenuCTA.name);yj.meta={name:"getTeamMenuCTAName",key:"teamMenuCtaStoreTeamMenuCtaSelectorsGetTeamMenuCTAName"};const Oj=Object(Ve.b)(e=>e&&e.teamMenuCTA&&e.teamMenuCTA.data);Oj.meta={name:"getTeamMenuCTAData",key:"teamMenuCtaStoreTeamMenuCtaSelectorsGetTeamMenuCTAData"};var Cj=a("dhcM"),vj=a("j4mf");a("5DNE");l.default.number.isRequired,l.default.number.isRequired,l.default.number.isRequired,l.default.string,l.default.string,l.default.string;class team_messages_progress_bar_TeamMessagesProgressBar extends i.Component{render(){var e=this.props;const t=e.containerSizeInPixels,a=e.progressPercentage,n=e.progressBarWidthInPixels,s=e.progressBarColor,r=e.progressBarBackgroundColor,i=e.progressBarLabel,l=(t-n)/2,c=l*Math.PI*2,d=c-c*a/100,u=t/2;return o.a.createElement("svg",{width:t,height:t,viewBox:`0 0 ${t} ${t}`},o.a.createElement("circle",{className:"p-classic_nav__team_messages_progress_bar_background",cx:u,cy:u,r:l,strokeWidth:`${n}px`,style:{stroke:r}}),o.a.createElement("circle",{className:"p-classic_nav__team_messages_progress_bar_progress",cx:u,cy:u,r:l,strokeWidth:`${n}px`,transform:`rotate(-90 ${u} ${u})`,style:{stroke:s,strokeDasharray:c,strokeDashoffset:d}}),o.a.createElement("text",{className:"p-classic_nav__team_messages_progress_bar_text",x:u,y:u,dy:"4px",textAnchor:"middle"},i||Object(vj.e)(a,{precision:2})))}}team_messages_progress_bar_TeamMessagesProgressBar.displayName="TeamMessagesProgressBar",team_messages_progress_bar_TeamMessagesProgressBar.defaultProps={progressBarColor:null,progressBarBackgroundColor:null,progressBarLabel:null};var Ej=team_messages_progress_bar_TeamMessagesProgressBar,kj=a("BWAg");a("Rx/r");const Sj=new x.b("classic_nav"),jj=1e4,Ij=10100,wj=1e6,Tj={r:69,g:186,b:133},Nj={r:255,g:197,b:101},Aj={r:243,g:61,b:95},Rj="rgba(0, 0, 0, 0.1)",Mj="team_messages_limit_meter";l.default.number.isRequired,l.default.object.isRequired,l.default.bool.isRequired,l.default.object.isRequired;class team_messages_limit_meter_TeamMessagesLimitMeter extends i.Component{constructor(e){super(e),Object(la.a)(this,["onLimitMeterSelected"])}componentDidMount(){this.clogImpression()}onLimitMeterSelected(){const e=this.props.team,t=Object(Is.T)()?"stats":Object(gr.k)({entryPoint:Mj});Object(xe.P)(e,t),this.clogClick()}getTotalMessagesDetail(){var e=this.props;const t=e.messagesCount,a=e.inLimitMeterSpAbbrExper;let n="";return n=t>jj?t<Ij||t>wj?Sj.rt("Upgrade to access all of your messages."):Sj.rt("Upgrade to access your first {hiddenMessagesCountFormatted} messages.",{hiddenMessagesCountFormatted:Object(xc.a)(t-jj,{precision:2,lowercase:!0,inLimitMeterSpAbbrExper:a})}):Sj.rt("On the free plan, you can only view 10k most recent messages.")}getTeamMessagesProgressBarData(){const e=this.props.messagesCount;let t=0,a=null,n=null;if(e<=jj){t=e/jj*100,a=Rj;const r=Object(Cj.a)(s()({},Tj),s()({},Nj),(e,a)=>Math.floor(e*(1-t/100)+a*(t/100)));n=`rgb(${r.r}, ${r.g}, ${r.b})`}else t=100*(Math.atan((e-jj)/2500-3)/Math.PI+.5),a=`rgb(${Nj.r}, ${Nj.g} , ${Nj.b})`,n=`rgb(${Aj.r}, ${Aj.g}, ${Aj.b})`;return{progressBarPercentage:t,progressBarBackgroundColor:a,progressBarColor:n}}shouldShowProgressChart(){var e=this.props;const t=e.messagesCount,a=e.inLimitMeterSpAbbrExper;return!("es"===Object(Fi.f)().split("-")[0]&&t>99999&&a)}clog({action:e,elementType:t}){this.props.clogger.track(de.EventId.UPGRDEXP_LIMIT_METER,{contexts:{ui_context:{step:de.UiStep.SLACK_MENU,action:e,ui_properties:{element_type:t,element_name:Mj,element_value:this.props.messagesCount}}}})}clogImpression(){this.clog({action:de.UiAction.IMPRESSION,elementType:de.ElementType.BANNER})}clogClick(){this.clog({action:de.UiAction.CLICK,elementType:de.ElementType.BUTTON})}renderHeading(e){if(this.shouldShowProgressChart())return o.a.createElement("strong",null,Sj.rt("Total Messages"));const t=this.props.inLimitMeterSpAbbrExper;return o.a.createElement("strong",null,o.a.createElement("span",{className:"p-classic_nav__team_messages_limit_meter__heading"},Sj.rt("Total Messages:",{fallbackHash:"534d090466ace9a2753bce9fb5c9771d48ff6a8f"})),Object(xc.a)(e,{precision:e>=jj?3:2,lowercase:!0,inLimitMeterSpAbbrExper:t}))}renderProgressBar(e){if(!this.shouldShowProgressChart())return null;var t=this.getTeamMessagesProgressBarData();const a=t.progressBarPercentage,n=t.progressBarBackgroundColor,s=t.progressBarColor,r=this.props.inLimitMeterSpAbbrExper;return o.a.createElement("div",{className:"p-classic_nav__team_messages_limit_meter__progress_chart"},o.a.createElement(Ej,{containerSizeInPixels:54,progressBarWidthInPixels:4,progressPercentage:a,progressBarLabel:Object(xc.a)(e,{precision:e>=jj?3:2,lowercase:!0,inLimitMeterSpAbbrExper:r}),progressBarColor:s,progressBarBackgroundColor:n}))}render(){var e=this.props;const t=e.messagesCount,a=fp()(e,["messagesCount"]);return o.a.createElement(kj.a,s()({},a,{onSelected:this.onLimitMeterSelected}),o.a.createElement("div",{className:"p-classic_nav__team_messages_limit_meter",role:"presentation"},o.a.createElement("div",null,o.a.createElement("div",{"data-qa":"limit-meter-heading"},this.renderHeading(t)),o.a.createElement("div",{className:"p-classic_nav__team_messages_limit_meter__detail"},this.getTotalMessagesDetail())),this.renderProgressBar(t)))}}team_messages_limit_meter_TeamMessagesLimitMeter.displayName="TeamMessagesLimitMeter";var Pj=Object(u.b)(e=>({clogger:Object(ie.a)({state:e}),team:Object(Se.d)(e),inLimitMeterSpAbbrExper:"treatment"===Object(ha.c)(e,"limit_meter_spanish_no_abbreviations")}))(team_messages_limit_meter_TeamMessagesLimitMeter);const xj={LIMIT_METER:"limit_meter"};l.default.string.isRequired,l.default.object.isRequired;class team_menu_cta_container_TeamMenuCTAContainer extends i.PureComponent{render(){var e=this.props;const t=e.ctaName,a=e.ctaData,n=fp()(e,["ctaName","ctaData"]);switch(t){case xj.LIMIT_METER:return o.a.createElement(Pj,s()({messagesCount:a.messages_count},n));default:return null}}}team_menu_cta_container_TeamMenuCTAContainer.displayName="TeamMenuCTAContainer";var Lj=Object(gj.b)(Object(u.b)(e=>({ctaName:yj(e),ctaData:Oj(e)}))(team_menu_cta_container_TeamMenuCTAContainer));a("GXNc");const Fj=new x.b("classic_nav"),Dj=(l.default.number.isRequired,l.default.string.isRequired,l.default.bool.isRequired,l.default.object.isRequired,{BRAZIL:"brazil",INDIA:"india",TENURED_TEAMS:"tenured_teams_discount"});class discount_promo_DiscountPromo extends i.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var e=this.props;const t=e.clogger,a=e.promoType;t.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:de.UiStep.SLACK_MENU,action:de.UiAction.CLICK,ui_properties:{element_type:de.ElementType.LINK,element_name:`team_plan_pricing_link_${a}`}}}})}renderDiscountPromo(){var e=this.props;const t=e.discountPercent,a=e.promoType,n=e.featureTargetedPromotionalDiscounts;let s,r="p-classic_nav__team_menu__plan_info";return r=d()(r,"p-classic_nav__discount_promo",`p-classic_nav__discount_promo--${a.toLowerCase()}`),a===Dj.TENURED_TEAMS&&n?s=Fj.rt("Ready to upgrade Slack? Here's {discountOfferPercent}% off.",{discountOfferPercent:t}):a!==Dj.BRAZIL&&a!==Dj.INDIA||(s=Fj.rt("Get {localDiscountOfferPercent}% off a paid plan, for a limited time.",{localDiscountOfferPercent:t})),s?o.a.createElement("p",{className:r,"data-qa":"classic_nav__team_menu__plan_info"},s," ",o.a.createElement(Ze.a,{className:"bold",href:Object(gr.k)({entryPoint:"team_menu_discount_promo"}),onClick:this.onClick},Fj.t("See upgrade options"))):null}render(){return this.renderDiscountPromo()}}discount_promo_DiscountPromo.displayName="DiscountPromo";var Bj=Object(u.b)(e=>({promoType:Object(Gm.d)(e),discountPercent:Object(Gm.c)(e),featureTargetedPromotionalDiscounts:Object(m.m)(e,"feature_targeted_promotional_discounts"),clogger:Object(ie.a)({state:e})}))(discount_promo_DiscountPromo);a("Blhu");const Uj=new x.b("classic_nav"),qj=(l.default.object.isRequired,l.default.string,l.default.object.isRequired,{orgName:void 0});class plan_info_PlanInfo extends i.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){this.props.clogger.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:de.UiStep.SLACK_MENU,action:de.UiAction.CLICK,ui_properties:{element_type:de.ElementType.LINK,element_name:"team_plan_pricing_link"}}}})}buildPlanInfoLink({path:e,tag:t,text:a}){return"a"!==t?null:o.a.createElement(Ze.a,{className:"bold",href:e,onClick:this.onClick},a)}renderPlanInfo(){var e=this.props;const t=e.team,a=e.orgName;let n,s;return Object(xe.w)(t)?(n=Object(gr.k)({entryPoint:"team_menu_plan_info"}),s=Uj.rt("Your workspace is currently on the free version of Slack. <a>See upgrade options</a>",{fallbackHash:"4db253b125b40c2b0b2b8bc5e70aba1dbc223e5f",fallbackHashNs:"classic_nav"},({tag:e,text:t})=>this.buildPlanInfoLink({path:n,tag:e,text:t}))):Object(xe.z)(t)?(n=Object(gr.k)({planLevel:gr.g.standard.id,entryPoint:"team_menu_plan_info"}),s=Uj.rt("Your workspace is currently on Slack's <strong>Standard</strong> plan. <a>Learn more</a>",{},({tag:e,text:t})=>this.buildPlanInfoLink({path:n,tag:e,text:t}))):Object(xe.x)(t)?(n=Object(gr.k)({planLevel:gr.g.plus.id,entryPoint:"team_menu_plan_info"}),s=Uj.rt("Your workspace is currently on Slack's <strong>Plus</strong> plan. <a>Learn more</a>",{},({tag:e,text:t})=>this.buildPlanInfoLink({path:n,tag:e,text:t}))):Object(xe.s)(t)?(n="account/workspace-settings",s=Uj.rt("This workspace is part of the <strong>{orgName}</strong> organization. <a>Learn more</a>",{orgName:a},({tag:e,text:t})=>this.buildPlanInfoLink({path:n,tag:e,text:t}))):Object(xe.v)(t)&&(s=Uj.t("Your workspace is currently on Slack\u2019s Enterprise Select plan.")),s}render(){const e=this.renderPlanInfo();return e?o.a.createElement("p",{className:"p-classic_nav__team_menu__plan_info","data-qa":"classic_nav__team_menu__plan_info"},e):null}}plan_info_PlanInfo.displayName="PlanInfo",plan_info_PlanInfo.defaultProps=qj;var Hj=Object(u.b)(e=>{const t=Object(Se.d)(e);return{team:t,orgName:t.enterprise_name,clogger:Object(ie.a)({state:e})}})(Object(gj.b)(plan_info_PlanInfo));const Wj=new x.b("classic_nav");l.default.number.isRequired,l.default.string.isRequired,l.default.object.isRequired,l.default.object.isRequired;class trial_info_TrialInfo extends i.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick({path:e}){var t=this.props;const a=t.team,n=t.productLevel,s=t.clogger,r=`${n===gr.g.standard.id?"standard":"plus"}_trial`;Object(xe.P)(a,e),s.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:de.UiStep.SLACK_MENU,action:de.UiAction.CLICK,step_variant:r,ui_properties:{element_type:de.ElementType.LINK,element_name:"team_plan_pricing_link_trial"}}}})}render(){var e=this.props;const t=e.numDaysToExpiry,a=e.productLevel,n=a===gr.g.standard.id?Wj.t("Slack Standard"):Wj.t("Slack Plus"),s=a===gr.g.standard.id?"std_m":"plus_m",r=`${gr.a}?s=1&p=${s}&entry_point=team_menu_trial_info`;return o.a.createElement("p",{className:"p-classic_nav__team_menu__plan_info","data-qa":"classic_nav__team_menu__plan_info"},o.a.createElement(i.Fragment,null,Wj.rt("Your trial of <strong>{planName}</strong> ends in <strong>{numDaysToExpiry} days</strong>.",{numDaysToExpiry:t,planName:n,break:o.a.createElement("br",null),fallbackHashNs:"classic_nav",fallbackHash:"f7e45837bbd271a6a47dd6b4fb816040bdc19a78"})," ",o.a.createElement("br",null),o.a.createElement(Ua.a,{target:"_blank",className:"bold",path:r,onClick:()=>this.onClick({path:r})},Wj.t("Add payment details"))))}}trial_info_TrialInfo.displayName="TrialInfo";var Gj=Object(u.b)(e=>({team:Object(Se.d)(e),productLevel:Object(Gm.u)(e),numDaysToExpiry:Object(Gm.t)(e),clogger:Object(ie.a)({state:e})}))(trial_info_TrialInfo);const Kj={PLAN_INFO:"plan_info",TRIAL_INFO:"trial_info",DISCOUNT_PROMO:"discount_promo"};l.default.object.isRequired,l.default.string.isRequired,l.default.bool.isRequired,l.default.func.isRequired,l.default.object.isRequired;class plan_info_container_PlanInfoContainer extends i.PureComponent{constructor(e){super(e),this.state={paymentsStatusIsLoaded:!1}}componentDidMount(){this.props.fetchPaymentsStatus().then(()=>{this.setState(()=>({paymentsStatusIsLoaded:!0}))}),this.clogImpression()}clogImpression(){var e=this.props;const t=e.team;let a;e.planName===Kj.TRIAL_INFO&&(a=`${Object(xe.z)(t)?"standard":"plus"}_trial`),this.props.clogger.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:de.UiStep.SLACK_MENU,step_variant:a,action:de.UiAction.IMPRESSION,ui_properties:{element_type:de.ElementType.LINK,element_name:"team_plan_pricing_link"}}}})}render(){var e=this.props;const t=e.planName,a=e.isGuest;if(!this.state.paymentsStatusIsLoaded||a)return null;switch(t){case Kj.PLAN_INFO:return o.a.createElement(Hj,null);case Kj.TRIAL_INFO:return o.a.createElement(Gj,null);case Kj.DISCOUNT_PROMO:return o.a.createElement(Bj,null);default:return o.a.createElement(Hj,null)}}}plan_info_container_PlanInfoContainer.displayName="PlanInfoContainer";const Vj={fetchPaymentsStatus:US.d};var zj=Object(gj.b)(Object(u.b)(e=>{const t=Object(Se.d)(e),a=Object(bi.b)(e);return{team:t,planName:Object(Gm.q)(e),isGuest:Object(Je.wb)(a),orgName:t.enterprise_name,clogger:Object(ie.a)({state:e})}},Vj)(plan_info_container_PlanInfoContainer)),$j=a("0BC7");a("p6QP");const Yj=new x.b("shared_channels");l.default.bool,l.default.string.isRequired,l.default.string.isRequired,l.default.object.isRequired;class shared_channels_team_menu_item_SharedChannelsTeamMenuItem extends i.PureComponent{componentDidMount(){var e=this.props;const t=e.clogger,a=e.clogStepVariant,n=e.clogElementName;t.track(de.EventId.GROWTH_INTRO_SHARED_CHANNEL,{contexts:{ui_context:{step:de.UiStep.TEAM_MENU,step_variant:a,action:de.UiAction.IMPRESSION,ui_properties:{element_type:de.ElementType.LINK,element_name:n}}}})}render(){const e=this.props.showNewLabel,t=Yj.rt("Shared channels");return o.a.createElement("div",{className:"p-shared_channels_team_menu_item"},t,e&&o.a.createElement(i.Fragment,null," ",o.a.createElement("span",{className:"p-shared_channels_team_menu_item__label--new"},Yj.rt("NEW"))))}}shared_channels_team_menu_item_SharedChannelsTeamMenuItem.displayName="SharedChannelsTeamMenuItem",shared_channels_team_menu_item_SharedChannelsTeamMenuItem.defaultProps={showNewLabel:!1};var Qj=Object(u.b)(e=>{const t=Object(xe.D)(Object(Se.d)(e));return{clogger:Object(ie.a)({state:e}),clogStepVariant:t?gr.b.PAID:gr.b.FREE,clogElementName:t?"shared_channels_beta_cta":"shared_channels_beta_new_cta"}})(shared_channels_team_menu_item_SharedChannelsTeamMenuItem),Xj=a("IEWa");a("RHBl");l.default.object.isRequired,l.default.string.isRequired,l.default.string.isRequired;class team_blurb_TeamBlurb extends i.Component{render(){var e=this.props;const t=e.team,a=e.name,n=e.url;return o.a.createElement("div",null,o.a.createElement("div",{className:"p-classic_nav__team_menu__blurb p-classic_nav__team_menu__blurb--team"},o.a.createElement(nj.b,{id:t.id,size:36,className:"p-classic_nav__team_menu__blurb__icon",tabIndex:"-1"}),o.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__right"},o.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__name"},a),o.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__sub"},n))))}}team_blurb_TeamBlurb.displayName="TeamBlurb";var Jj=Object(u.b)(e=>{const t=Object(Se.d)(e);return{team:t,name:Object(xe.e)(t),url:`${t.domain}.slack.com`}})(Object(gj.b)(team_blurb_TeamBlurb)),Zj=a("M+5u");const eI=new x.b("classic_nav"),tI="team_plan_pricing_link",aI=(l.default.object.isRequired,l.default.object.isRequired,l.default.shape({isEligible:l.default.bool,discountPercent:l.default.number}),l.default.string,l.default.func.isRequired,l.default.object.isRequired,l.default.object,l.default.bool.isRequired,{orgName:void 0,localDiscountOffer:null,tenuredDiscountOffer:null});class team_plan_info_TeamPlanInfo extends i.PureComponent{constructor(e){super(e),this.state={paymentsStatusIsLoaded:!1}}componentDidMount(){this.props.fetchPaymentsStatus().then(()=>{this.setState(()=>({paymentsStatusIsLoaded:!0}),this.clogImpression())})}clog({action:e,elementType:t,elementName:a=tI,stepVariant:n}){this.props.clogger.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:de.UiStep.SLACK_MENU,step_variant:n,action:e,ui_properties:{element_type:t,element_name:a}}}})}clogImpression(){var e=this.props;const t=e.team,a=e.featureGGFromTheStart;let n;Object(xe.A)(t)&&a&&(n=`${Object(xe.z)(t)?"standard":"plus"}_trial`),this.clog({action:de.UiAction.IMPRESSION,elementType:de.ElementType.LINK,stepVariant:n})}clogClick(e,t){this.clog({action:de.UiAction.CLICK,elementType:de.ElementType.LINK,elementName:e,stepVariant:t})}buildPlanInfoLink({path:e,tag:t,text:a,elementName:n,stepVariant:s}){if("a"!==t)return null;const r=this.props.team;return o.a.createElement(Ua.a,{target:"_blank",className:"bold",path:e,onClick:()=>{Object(xe.P)(r,e),this.clogClick(n,s)}},a)}renderTeamPlanInfo(){var e=this.props;const t=e.team,a=e.member,n=e.orgName,s=e.localDiscountOffer,r=e.tenuredDiscountOffer;if(!this.state.paymentsStatusIsLoaded)return null;if(Object(Je.wb)(a))return null;let l,c="p-classic_nav__team_menu__blurb_plan";const u=Object(xe.w)(t),p=Object(xe.z)(t),h=Object(xe.x)(t),m=Object(xe.A)(t)&&!Object(xe.o)(t);let b;m||(p?b=gr.g.standard.id:h&&(b=gr.g.plus.id));let f=Object(gr.k)({planLevel:b,entryPoint:"team_menu_plan_info"});if(u&&r.isEligible){const e=`${tI}_discount_tenured_teams`;l=o.a.createElement(i.Fragment,null,eI.rt("Ready to upgrade Slack? Here's {discountOfferPercent}% off.",{discountOfferPercent:r.discountPercent})," ",this.buildPlanInfoLink({path:f,tag:"a",text:eI.t("See upgrade options"),elementName:e})),c=d()("p-classic_nav__team_menu__plan_info","p-classic_nav__discount_promo","p-classic_nav__discount_promo--tenured_teams_discount")}else if((m||u)&&s){let e;e=s.country?`${tI}_discount_${s.country.replace(/\s/g,"_").toLowerCase()}`:`${tI}_discount`,l=o.a.createElement(i.Fragment,null,eI.rt("Get {localDiscountOfferPercent}% off a paid plan, for a limited time.",{localDiscountOfferPercent:s.discountPercent})," ",this.buildPlanInfoLink({path:f,tag:"a",text:eI.t("See upgrade options"),elementName:e})),c=d()(c,"p-classic_nav__team_menu__blurb_plan--has_local_discount",`p-classic_nav__team_menu__blurb_plan--has_local_discount_${s.country.toLowerCase()}`)}else if(m)if(this.props.featureGGFromTheStart){const e=Gi()(1e3*Object(xe.c)(t)),n=Object(Zj.a)(e,{timeZone:Object(Je.Q)(a),timeZoneOffset:Object(Je.R)(a),returnMoment:!0}),s=Object(Zj.a)(Date.now(),{timeZone:Object(Je.Q)(a),timeZoneOffset:Object(Je.R)(a),returnMoment:!0}),r=n.diff(s,"days")+1,c=p?eI.t("Slack Standard"):eI.t("Slack Plus"),d=p?"std_m":"plus_m";f=`${gr.a}?s=1&p=${d}&entry_point=team_menu_plan_info`,l=o.a.createElement(i.Fragment,null,eI.rt("Your trial of <strong>{planName}</strong> ends in <strong>{numDaysToExpiry} days</strong>.",{planName:c,numDaysToExpiry:r,break:o.a.createElement("br",null),fallbackHashNs:"classic_nav",fallbackHash:"f7e45837bbd271a6a47dd6b4fb816040bdc19a78"})," ",o.a.createElement("br",null),this.buildPlanInfoLink({path:f,tag:"a",text:eI.t("Add payment details"),elementName:`${tI}_trial`,stepVariant:`${p?"standard":"plus"}_trial`}))}else{const e=Gi()(1e3*Object(xe.c)(t)).subtract(1,"day"),n=Object(Zj.a)(e,{timeZone:Object(Je.Q)(a),timeZoneOffset:Object(Je.R)(a),returnMoment:!0}),s=Object(Ol.a)(n,"{date}");l=o.a.createElement(i.Fragment,null,p?eI.rt("Your trial of <strong>Standard</strong> lasts through {trialExpiryDate}.",{trialExpiryDate:s}):eI.rt("Your trial of <strong>Plus</strong> lasts through {trialExpiryDate}.",{trialExpiryDate:s})," ",this.buildPlanInfoLink({path:f,tag:"a",text:eI.t("See upgrade options"),elementName:`${tI}_trial`}))}else u?l=eI.rt("Your workspace is currently on the free version of Slack. <a>See upgrade options</a>",{fallbackHash:"4db253b125b40c2b0b2b8bc5e70aba1dbc223e5f",fallbackHashNs:"classic_nav"},({tag:e,text:t})=>this.buildPlanInfoLink({path:f,tag:e,text:t})):p?l=eI.rt("Your workspace is currently on Slack's <strong>Standard</strong> plan. <a>Learn more</a>",{},({tag:e,text:t})=>this.buildPlanInfoLink({path:f,tag:e,text:t})):h?l=eI.rt("Your workspace is currently on Slack's <strong>Plus</strong> plan. <a>Learn more</a>",{},({tag:e,text:t})=>this.buildPlanInfoLink({path:f,tag:e,text:t})):Object(xe.s)(t)?(f="account/workspace-settings",l=eI.rt("This workspace is part of the <strong>{orgName}</strong> organization. <a>Learn more</a>",{orgName:n},({tag:e,text:t})=>this.buildPlanInfoLink({path:f,tag:e,text:t}))):Object(xe.v)(t)&&(l=eI.t("Your workspace is currently on Slack\u2019s Enterprise Select plan."));return l?o.a.createElement("p",{className:c,"data-qa":"classic_nav__team_menu__blurb_plan"},l):null}render(){return this.renderTeamPlanInfo()}}team_plan_info_TeamPlanInfo.displayName="TeamPlanInfo",team_plan_info_TeamPlanInfo.defaultProps=aI;const nI={fetchPaymentsStatus:US.d};var sI=Object(u.b)(e=>{const t=Object(Se.d)(e),a=Object(m.m)(e,"feature_targeted_promotional_discounts");return{team:t,member:Object(bi.b)(e),orgName:t.enterprise_name,clogger:Object(ie.a)({state:e}),localDiscountOffer:Object(xe.k)(t),tenuredDiscountOffer:{isEligible:a&&"discount_promo"===Object(Gm.q)(e)&&"tenured_teams_discount"===Object(Gm.d)(e),discountPercent:Object(Gm.c)(e)},featureGGFromTheStart:Object(m.m)(e,"feature_gg_from_the_start")}},nI)(Object(gj.b)(team_plan_info_TeamPlanInfo)),rI=a("atZP");const iI=new x.b("classic_nav"),oI=(l.default.object.isRequired,l.default.bool,l.default.string,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.bool.isRequired,l.default.bool.isRequired,l.default.func,{teamIsEnterprise:!1,teamEnterpriseDashUrl:void 0,teamUrl:"",userIsAppmin:!1,userCanManageSharedChannels:!1,featureClassicNav:!1,performOpenManageSharedChannelsModal:r.a}),lI=({menuProps:e,teamIsEnterprise:t,teamEnterpriseDashUrl:a,teamUrl:n,userIsAppmin:r,userCanManageSharedChannels:i,featureClassicNav:l,isAdminOrOwner:c,isEnterpriseAdminOrOwner:d,performOpenManageSharedChannelsModal:u})=>{if(!l)return null;const p=a,h=[{label:iI.t("Manage members"),show:c,href:`${n}admin`,key:"manage-members"},{label:iI.t("Workspace settings"),show:c,href:`${n}admin/settings`,key:"workspace-settings"},{label:iI.t("Organization settings"),show:d,href:p,key:"org-settings"},{label:iI.t("Manage apps"),show:!t&&r,href:`${n}apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click`,key:"manage-apps"},{label:iI.t("Manage shared channels"),click:()=>u({entryPoint:"team_menu"}),show:i,key:"manage-shared-channels",badgeLabel:iI.t("NEW")}].filter(e=>e.show);return o.a.createElement(fn.a,s()({},e,{template:h}))};lI.displayName="TeamAdminSubmenu",lI.defaultProps=oI;var cI=Object(u.b)(e=>{const t=Object(Se.d)(e),a=Object(bi.b)(e),n=Object(Se.g)(e),s=Object(Je.qb)(a)||Object(Je.rb)(a),r=Object(Je.eb)(e,a)||Object(Je.Eb)(e,a)||s;return{teamIsEnterprise:Object(xe.s)(t),teamUrl:Object(xe.n)(t),teamEnterpriseDashUrl:Object(xe.n)(n,"manage"),userIsAppmin:Object(bi.k)(e),userCanManageSharedChannels:Object(mj.a)(e)?Object(te.y)(e)||Object(te.S)(e):Object(Je.g)(e,{blockAllForNoOne:!1}),featureClassicNav:Object(m.m)(e,"feature_classic_nav"),isAdminOrOwner:r,isEnterpriseAdminOrOwner:s}},e=>({performOpenManageSharedChannelsModal:(...t)=>e(Object(rI.a)(...t))}))(lI),dI=a("Zr7G");const uI=Object(mt.b)("Counts the number of times the Open App team menu item is selected",(e,t)=>{Object(dI.c)({getState:t}).count("team_menu_download_apps")});uI.meta={name:"countOpenAppClick",key:"componentsClassicNavTeamMenuUtilityCountOpenAppClickCountOpenAppClick",description:"Counts the number of times the Open App team menu item is selected"};var pI=uI,hI=a("IY6O");const mI=new x.b("classic_nav");function bI(e,t){if(!e.featureClassicNav)return[];const a=e.userId,n=e.userIsAdmin,s=e.userIsEnterpriseAdminOrOwner,r=e.userIsOwner,i=e.userIsRestricted,l=e.teamIsEnterprise,c=e.teamIsPaid,d=e.orgId,u=e.orgName,p=e.teamName,h=e.teamUrl,m=e.teamEnterpriseDomain,b=e.team,f=e.isSignedIntoOtherOrgTeams,_=e.isSharedChannelsExplicitlyDisabled,g=e.userCanSeeInviteModal,y=e.userCanManageSharedChannelsBeta,O=e.userCanManageESC,C=e.userCanLeaveWorkspace,v=e.userIsAppmin,E=e.purchaserPref,k=e.statsOnlyAdmins,S=e.customizeOnlyAdmins,j=e.isAppSpaceEnabled,I=e.showSwitchWorkspaces,w=e.featureOfflineMode,T=e.featureTeamMenuMegaphoneTransition,N=e.isOffline,A=e.showTeamSidebar,R=e.workflowBuilderEnabled,M=e.usingAppStoreBuild,P=!i,x=!k,L=!S;return[{type:"custom",children:o.a.createElement(Jj,{key:"team-blurb"}),show:!0,key:"team-blurb"},{type:"custom",children:o.a.createElement(sI,{key:"team-plan-info"}),show:!T&&(l||!M),key:"team-plan-info"},{type:"custom",children:o.a.createElement(zj,{key:"plan-info-container"}),show:T&&(l||!M),key:"plan-info-container"},{type:"custom",children:o.a.createElement(Lj,{key:"team-menu-cta-container"}),show:!0,key:"team-menu-cta-container"},{type:"separator",show:!0,key:"separator-team-blurb"},{type:"submenu",label:mI.t("Administration"),show:O||n||r||s,renderSubmenu:gI,key:"administration"},{label:mI.t("Invite people"),show:g,click:t.invite,key:"invite",disabled:w&&N,showOfflineIcon:w&&N},{label:mI.t("Analytics"),show:P&&(n||x),href:`${h}stats`,key:"analytics"},{label:mI.t("Billing"),show:l?s:!!c&&(r||E),href:l?`https://${m}.enterprise.slack.com/manage/billing`:`${h}admin/billing`,key:"billing"},{show:R,click:t.launchWorkflowBuilder,label:mI.t("Workflow Builder"),key:"launch-workflow-builder",badgeLabel:mI.t("NEW")},{label:mI.t("Customize Slack"),show:P&&(n||L),href:`${h}customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click`,key:"customize"},{label:mI.t("Manage apps"),show:j&&v&&l,href:`${h}apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click`,key:"apps"},{label:o.a.createElement(Qj,{showNewLabel:!0}),show:c&&y&&!_,click:t.externalSharedChannels,key:"ext-shared-channels"},{label:o.a.createElement(Qj,{showNewLabel:!0}),show:!c&&y&&!M,click:t.externalSharedChannels,key:"ext-shared-channels-free-team"},{label:mI.t("Find more workspaces"),show:l&&P,click:()=>t.findWorkspaces(a),disabled:w&&N,showOfflineIcon:w&&N,key:"find-workspaces"},{label:mI.t("Leave this workspace"),show:l&&C,click:t.leaveWorkspace,key:"leave-workspace",disabled:w&&N,showOfflineIcon:w&&N},{label:mI.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:p}),show:!l||Object(fj.b)()&&f,click:()=>t.signOut(b.id),key:"sign-out",dataQa:"sign-out",disabled:w&&N,showOfflineIcon:w&&N},{label:mI.rt("Sign out of <strong>{signoutName}</strong> (organization)",{signoutName:u}),show:l,click:()=>t.signOutOfOrg(d),key:"org-sign-out",dataQa:"org-sign-out",disabled:w&&N,showOfflineIcon:w&&N},{type:"separator",show:!0,key:"separator-switch"},{type:"submenu",label:mI.t("Switch workspaces"),show:I,renderSubmenu:yI,key:"switch-workspaces"},{label:mI.t("Sign in to another workspace"),show:!A,click:t.signIn,key:"sign-in",disabled:w&&N,showOfflineIcon:w&&N},{type:"separator",show:!0,key:"separator-app"},{label:mI.rt("Open the Slack App"),show:!Is.V&&!ZS.a.chromeBook,href:`${h}ssb/redirect`,click:t.openApp,key:"open-desktop-app"}].filter(e=>e.show)}function fI(e){const t=Object(bi.b)(e),a=Object(Se.d)(e),n=Object(hI.getNumberOfWorkspaces)(Object(p.getStateForClientStore)()),s=Object(_j.a)({numTeams:n}),r=Object(xe.s)(a),i=Object(Se.g)(e),o=!Object(xe.E)(e,a),l=Object(Is.T)();return{userId:t.id,userIsAdmin:Object(Je.eb)(e,t),userIsOwner:Object(Je.Eb)(e,t),userIsRestricted:Object(Je.Gb)(t),userIsEnterpriseAdminOrOwner:Object(Je.qb)(t)||Object(Je.rb)(t),teamIsEnterprise:r,teamIsPaid:Object(xe.D)(a),orgName:a.enterprise_name,orgId:a.enterprise_id,teamName:Object(xe.e)(a),teamUrl:Object(xe.n)(a),teamEnterpriseDomain:i&&i.domain,team:a,numTeams:n,isSignedIntoOtherOrgTeams:Object(m.h)(e).some(e=>e.id!==a.id&&e.enterprise_id===a.enterprise_id),isSharedChannelsExplicitlyDisabled:o,userCanSeeInviteModal:Object(RC.d)(e),userCanManageSharedChannelsBeta:Object(te.k)(e,!0),userCanManageESC:Object(mj.a)(e)?Object(te.y)(e)||Object(te.S)(e):Object(Je.g)(e,{blockAllForNoOne:!1}),userCanLeaveWorkspace:Object(Je.l)(e,t)&&Object(m.m)(e,"feature_sonic_leave_workspace_dialog"),userIsAppmin:Object(bi.k)(e),purchaserPref:Object(ba.k)(e,"purchaser"),statsOnlyAdmins:Object(gn.a)(e,"stats_only_admins"),customizeOnlyAdmins:Object(gn.a)(e,"emoji_only_admins")&&Object(gn.a)(e,"slackbot_responses_only_admins")&&Object(gn.a)(e,"loading_only_admins"),showSwitchWorkspaces:Object(m.h)(e).length>0&&!s,showTeamSidebar:s,isAppSpaceEnabled:!0,featureClassicNav:Object(m.m)(e,"feature_classic_nav"),featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),isOffline:!Object(pa.c)(e),featureTeamMenuMegaphoneTransition:Object(m.m)(e,"feature_team_menu_megaphone_transition"),workflowBuilderEnabled:Object(Xj.b)(e),usingAppStoreBuild:l}}function _I(e){return{invite:()=>e(Object(j.a)()),externalSharedChannels:(...t)=>{e(hj()),e(Object(uj.a)(s()({entryPoint:"team_menu"},t)))},launchWorkflowBuilder:()=>e(Object(bj.a)({source:"workspace_menu"})),findWorkspaces:t=>e(Object(ej.a)(t)),leaveWorkspace:t=>e(dj(t)),signOut:e=>Object(p.dispatchForClientStore)(Object(aj.removeWorkspace)(e)),signOutOfOrg:e=>Object(p.dispatchForClientStore)(Object(aj.removeOrg)(e)),signIn:()=>Object(p.dispatchForClientStore)(Object(aj.startWorkspaceSignIn)()),openApp:()=>e(pI())}}function gI(e){return o.a.createElement(cI,{menuProps:e})}function yI(e){return o.a.createElement($j.a,{menuProps:e})}gI.displayName="renderAdministrationSubmenu",yI.displayName="renderWorkspacesSubmenu";l.default.object.isRequired,l.default.object.isRequired,l.default.objectOf(l.default.func).isRequired,l.default.objectOf(l.default.func).isRequired,l.default.func,l.default.bool.isRequired;const OI={renderSonicMenu:r.a},CI=e=>{const t=e.userItemsData,a=e.userItemsActions,n=e.teamItemsData,i=e.teamItemsActions,l=e.renderSonicMenu,c=e.featureTinyspeck,d=fp()(e,["userItemsData","userItemsActions","teamItemsData","teamItemsActions","renderSonicMenu","featureTinyspeck"]),u=[...Object(re.a)()&&(ue.l||c)&&l!==r.a?[{type:"submenu",label:"Sonic",renderSubmenu:l,key:"sonic-debug-submenu"},{type:"separator",key:"sonic-debug-separator"}]:[],...$S(t,a),{type:"separator",key:"team-menu-separator"},...bI(n,i)];return o.a.createElement(fn.a,s()({},d,{template:u,menuClassNames:"p-classic_nav__team_menu",stripTerminalSeparators:!0}))};CI.displayName="TeamMenu",CI.defaultProps=OI;var vI=Object(u.b)(e=>({userItemsData:QS(e),teamItemsData:fI(e),featureTinyspeck:Object(m.m)(e,"feature_tinyspeck")}),e=>({userItemsActions:XS(e),teamItemsActions:_I(e)}))(CI);a("Hza5");const EI=new x.b("classic_nav"),kI=(l.default.string.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.bool,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func.isRequired,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.number,l.default.func,l.default.bool.isRequired,{featureClassicNav:!1,featureOfflineMode:!1,featureGlobalActionsV0:!1,renderSonicMenu:r.a,isWindowFrameless:!1,userAttentionIsOnChat:!1,composerVisible:!1,featureSonicServiceDown:!1,isServiceDown:!1,customStatusSite:void 0,removeFromSectionNavigation:r.a,addToSectionNavigation:r.a,featureChannelSections:!1,isOrganizing:!1,organizingSectionItemSelectedCount:0,clearAllOrganizingSections:r.a});class team_header_TeamHeader extends i.Component{constructor(e){super(e),this.menuButtonRef=o.a.createRef(),this.renderIcon=this.renderIcon.bind(this),this.renderMenu=this.renderMenu.bind(this),this.onServiceDownIndicatorClick=this.onServiceDownIndicatorClick.bind(this),this.onDndContainerClick=this.onDndContainerClick.bind(this),this.focus=this.focus.bind(this)}componentDidMount(){this.props.fetchLocalDiscountOffer()}componentDidUpdate(e){const t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Np.a)(t)&&this.props.addToSectionNavigation(),Object(Ap.a)(t)&&this.props.removeFromSectionNavigation()}onServiceDownIndicatorClick(e){e.stopPropagation();const t=this.props.customStatusSite,a=t?`https://status.slack.com/${encodeURIComponent(t)}`:"https://status.slack.com";Object(Pr.a)(a,"_blank")}onOfflineIndicatorClick(e){e.stopPropagation()}onDndContainerClick(e){e.stopPropagation()}focus(){this.menuButtonRef.current.focus()}maybeRenderStatusIndicator(){var e=this.props;const t=e.isServiceDown,a=e.featureOfflineMode;return e.featureSonicServiceDown&&t?o.a.createElement(Xr.c,{tip:EI.t("Limited connectivity"),position:"bottom-left"},o.a.createElement(_e.c,{className:"display_flex",onClick:this.onServiceDownIndicatorClick,"aria-label":EI.t("Limited connectivity. Navigate to our status site.")},o.a.createElement(bn.b,{type:"exclamation-circle",className:"p-classic_nav__team_header__team__status_indicator p-classic_nav__team_header__team__status_indicator--service_down"}))):a?o.a.createElement(Vr.a,null,o.a.createElement(Xr.c,{tip:EI.t("No connection",{fallbackHash:"38d627873d774089f849a0750d81e19e73eba862"}),position:"bottom-left"},o.a.createElement(_e.c,{onClick:this.onOfflineIndicatorClick},o.a.createElement(bn.b,{type:"cloud-offline-small",className:"p-classic_nav__team_header__team__status_indicator cursor_default"})))):null}renderMenu(e){return this.props.clogger.track(de.EventId.GLOBAL_NAV,{contexts:{ui_context:{action:de.UiAction.CLICK,ui_component:de.UiComponent.GLOBAL_NAV,ui_element:de.UiElement.NAV_TEAM_MENU}}}),o.a.createElement(vI,s()({},e,{renderSonicMenu:this.props.renderSonicMenu}))}renderServiceDownIcon(){return this.props.featureSonicServiceDown?o.a.createElement(i.Fragment,null,o.a.createElement(Xr.c,{tip:EI.t("Slack is unavailable. Check our status page for updates."),position:"bottom"},o.a.createElement(bn.b,{type:"warning",className:"p-classic_nav__team_header__team__status_indicator margin_left_50"}))):null}renderIcon(){return o.a.createElement(bn.b,{type:"chevron-down",className:"p-classic_nav__team_header__team__icon"})}render(){var e=this.props;const t=e.teamName,a=e.teamId,n=e.userId,s=e.userName,r=e.featureClassicNav,l=e.isWindowFrameless,c=e.featureGlobalActionsV0,u=e.featureChannelSections,p=e.isOrganizing,h=e.organizingSectionItemSelectedCount,m=e.featureChannelHeaderLabels;if(!r)return null;const b=o.a.createElement(_e.c,{ref:this.menuButtonRef,className:"p-classic_nav__team_header__team__icon_button","aria-label":EI.t("Team Menu"),"aria-haspopup":!0},this.renderIcon()),f=this.maybeRenderStatusIndicator(),_=c?null:o.a.createElement("div",{className:"p-classic_nav__team_header__team__dnd_container",role:"presentation",onClick:this.onDndContainerClick},o.a.createElement($k,{className:"p-classic_nav__team_header__team__dnd"})),g=c?o.a.createElement("div",{className:"p-global_actions_button__container",role:"presentation"},o.a.createElement(sS,null)):null,y=d()({"p-classic_nav__team_header":!0,"p-classic_nav__team_header--frameless":l,"p-global_actions_button__header":c});if(u&&p)return o.a.createElement("div",{className:y},o.a.createElement("div",{className:"p-classic_nav__team_header__content p-classic_nav__team_header__content--organizing","data-qa":"organizing_header"},o.a.createElement("div",{className:"p-classic_nav__team_header__team"},o.a.createElement("div",{"data-teamid":a,className:"p-classic_nav__team_header__team__name","data-qa":"team_header"},EI.t("Organizing\u2026"))),o.a.createElement("div",{className:"p-classic_nav__header_organizing_state"},o.a.createElement("span",{"data-qa":"organizing_selection_count",className:"p-classic_nav__header_organizing_selection_count"},EI.t("{organizingSectionItemSelectedCount} selected",{organizingSectionItemSelectedCount:h})),h>0&&o.a.createElement(i.Fragment,null,o.a.createElement("span",{className:"p-classic_nav__header_organizing_selection_separator"}),o.a.createElement(Ze.a,{className:"p-classic_nav__header_organizing_selection_clear","data-qa":"organizing_selection_clear",onClick:this.props.clearAllOrganizingSections,invert:!0},EI.t("Deselect"))))));const O=m?EI.t("{teamName} options",{teamName:t,note:"Label for the left section of the Channel Header containing the workspace menu and notification menu buttons. Not visible on screen as it is only for customers using screen readers."}):void 0,C=m?"group":void 0;return o.a.createElement("div",{className:y,role:C,"aria-label":O},o.a.createElement(fn.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-8,offsetY:2,allowanceX:4},o.a.createElement("div",{className:"p-classic_nav__team_header__content",id:"team-menu-trigger"},o.a.createElement("div",{className:"p-classic_nav__team_header__team"},f,o.a.createElement("div",{"data-teamid":a,className:"p-classic_nav__team_header__team__name","data-qa":"team_header"},t),b,_),o.a.createElement("div",{className:"p-classic_nav__team_header__user","data-qa":"user_header"},o.a.createElement(rS.a,{memberId:n,className:"p-classic_nav__team_header__user__presence",inline:!0}),o.a.createElement("span",{className:"p-classic_nav__team_header__user__name"},o.a.createElement("span",{className:"p-classic_nav__team_header__user__name__truncate"},s),o.a.createElement(iS.b,{memberId:n,tooltip:!0,tipPosition:"bottom"}))))),g)}}team_header_TeamHeader.displayName="TeamHeader",team_header_TeamHeader.defaultProps=kI;const SI={fetchLocalDiscountOffer:US.c,clearAllOrganizingSections:bS.a},jI=Object(re.a)()?Object(H.a)(team_header_TeamHeader,"TeamHeader",{index:3}):team_header_TeamHeader;var II=Object(u.b)(e=>{const t=Object(m.d)(e);return{teamId:Object(h.b)(e),teamName:Object(xe.e)(Object(Se.d)(e)),userId:t,userName:Object(Je.W)(e,t),customStatusSite:Object(gn.a)(e,"custom_status_site"),isWindowFrameless:Object(S.l)(e),userAttentionIsOnChat:Object(wu.e)(e),composerVisible:(Object(rt.a)(e)||"composer_toolbar"===Object(ha.c)(e,"composer_toolbar"))&&Object(Tp.b)(e),featureClassicNav:Object(m.m)(e,"feature_classic_nav"),featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),featureGlobalActionsV0:Object(m.m)(e,"feature_global_actions_v0"),featureSonicServiceDown:Object(m.m)(e,"feature_sonic_service_down"),isServiceDown:!Object(pa.e)(e),clogger:Object(ie.a)({state:e}),featureChannelSections:Object(m.m)(e,"feature_channel_sections"),shouldUseChannelSections:Object(A.a)(e),isOrganizing:NS(e),organizingSectionItemSelectedCount:xS(e),featureChannelHeaderLabels:Object(m.m)(e,"feature_channel_header_labels")}},SI)(jI);l.default.object,l.default.bool;const wI={channel:void 0,isAppIm:!1},TI=({isAppIm:e,channel:t})=>t&&Object(q.ib)(t)?e?o.a.createElement(cC.c,{size:32,userId:Object(q.H)(t),className:"p-channel_tabs__header__avatar"}):o.a.createElement(rS.a,{memberId:Object(q.H)(t),className:"p-channel_tabs__header__presence"}):null;TI.displayName="TabsHeaderAvatar",TI.defaultProps=wI;var NI=Object(u.b)((e,{channelId:t})=>{return{channel:Object(B.e)(e,t),isAppIm:Object(q.lb)(e,t)}})(TI),AI=a("RbWr"),RI=a("NJ7B"),MI=a("IUyx"),PI=a("N5a2"),xI=a("M4X7"),LI=a("jeHR"),FI=a("FSos");l.default.string.isRequired,l.default.bool.isRequired,l.default.func.isRequired,l.default.func.isRequired;const DI=({memberId:e,isActive:t,addMemberToPresenceSubscription:a,removeMemberFromPresenceSubscription:n})=>{Object(i.useEffect)(()=>(a({memberId:e}),()=>{n({memberId:e})}),[e,a,n]);const s=t?void 0:"p-classic_nav__model__title__name--dim";return o.a.createElement(LO.a,{id:e,className:s})};DI.displayName="DimmableMemberName";const BI={addMemberToPresenceSubscription:(...e)=>Object(FI.a)(...e),removeMemberFromPresenceSubscription:(...e)=>Object(FI.c)(...e)};var UI=Object(u.b)((e,{memberId:t})=>({isActive:"active"===Object(qS.f)(e,t)}),BI)(DI);l.default.string.isRequired,l.default.string,l.default.string;const qI={emoji:void 0,text:void 0},HI=({emoji:e,text:t})=>e?o.a.createElement(eg.a,{className:"p-classic_nav__model__title__name__status--im",text:t?`${e} ${t}`:e,emojiSize:Ho.a.SMALL,showTooltips:!1,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noHighlights:!0,noEmojiText:!0,preventCopyPaste:!0,stopAnimations:!0}):null;HI.displayName="IMCustomStatus",HI.defaultProps=qI;var WI=Object(u.b)((e,{memberId:t})=>{const a=Object(bi.f)(e,t);return{text:a.text,emoji:a.emoji}})(HI);const GI=new x.b("channel_header"),KI=(l.default.string.isRequired,l.default.bool,({isYou:e})=>e?o.a.createElement("span",{className:"p-classic_nav__model__title__is_you"},GI.t("(you)",{fallbackHash:"1647df1274ca1403fb32187b06fed324ade6b1ad",fallbackHashNs:"channel_sidebar"})):null);KI.displayName="IMIsYou",KI.defaultProps={isYou:!1};var VI=Object(u.b)((e,{memberId:t})=>({isYou:Object(m.d)(e)===t}))(KI),zI=a("stJQ");const $I=new x.b("classic_nav");l.default.string.isRequired,l.default.bool.isRequired,l.default.func.isRequired;class unmute_button_UnmuteButton extends i.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){e.stopPropagation(),this.props.unmuteChannelById(this.props.channelId)}render(){return this.props.featureClassicNav?o.a.createElement(tg.c,{tip:$I.t("Unmute"),position:"bottom"},o.a.createElement(Qh.a,{className:"p-classic_nav__model__title__name__unmute",onClick:this.onClick},o.a.createElement(pe.a,{type:"bell-slash",size:"inherit"}))):null}}unmute_button_UnmuteButton.displayName="UnmuteButton";var YI=Object(u.b)(e=>({featureClassicNav:Object(m.m)(e,"feature_classic_nav")}),e=>({unmuteChannelById:(...t)=>e(Object(zI.b)(...t))}))(unmute_button_UnmuteButton),QI=a("2Inn"),XI=a("Nzgh"),JI=a("S6VJ"),ZI=a("+j2t"),ew=a("QTMz"),tw=a("9/KO"),aw=a("53Ys"),nw=a("wfE8"),sw=a("zmUX"),rw=a("aolG");const iw=new x.b("mpims");function ow({uras:e}){if(Object(io.a)(e))return null;const t=e.map(e=>o.a.createElement("strong",{key:e.id},o.a.createElement(LO.a,{id:e.id})));return o.a.createElement(Rb.a,{level:"warning",className:"top_margin"},iw.rt("{ura_list} { uras_length, plural, =1 { is a Single-Channel Guest. They are already a member } other { are Single-Channel Guests. They are already members }} of one channel, and will not have access to this new private channel.",{ura_list:Object(x.k)(t),uras_length:e.length}))}ow.displayName="SingleChannelGuestWarning",ow.defaultProps={uras:[]};var lw=Object(u.b)(function(e,{memberIds:t}){return{uras:t.map(t=>Object(bi.d)(e,t)).filter(e=>Object(Je.Mb)(e))}})(ow);const cw=new x.b("mpims");l.default.object.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.arrayOf(l.default.string),l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired;class mpim_conversion_modal_MpimConversionModal extends i.Component{constructor(e){super(e),this.state={confirmed:!1,newChannelName:"",newChannelNameValid:!1,promisePending:!1},this.onGo=this.onGo.bind(this),this.onValidNameEntered=this.onValidNameEntered.bind(this),this.onInvalidNameEntered=this.onInvalidNameEntered.bind(this)}componentWillUnmount(){this.promise&&this.promise.cancel()}onGo(){var e=this.props;const t=e.channelId,a=e.logger;var n=this.state;const s=n.confirmed,r=n.newChannelName;s?(this.setState(()=>({promisePending:!0})),this.promise=this.props.convertMpimToPrivateChannel({mpimId:t,privateChannelName:r}).then(()=>{this.promise=null,this.props.closeModal()}).catch(e=>{this.promise=null;const t=Object(se.a)(e,"data.error","");"conversion_already_started"!==t?(this.setState(()=>({promisePending:!1})),a.error("MPIM-CONVERSION",t,e,{subtype:"mpim-conversion-error"}),this.props.openModal({element:o.a.createElement(bs.a,{title:cw.t("Sorry, something went wrong")},cw.t("Try again in a moment.")),isStackable:!0})):this.props.closeModal()})):this.setState(()=>({confirmed:!0}))}onValidNameEntered({value:e}){this.setState(()=>({newChannelName:e,newChannelNameValid:!0}))}onInvalidNameEntered({value:e}){this.setState(()=>({newChannelName:e,newChannelNameValid:!1}))}renderConfirmationStep(){return o.a.createElement("p",{className:"no_bottom_margin"},cw.t("By converting this conversation to a private channel, you will make the entire message history and all shared files visible to the new members that you invite to the channel."))}renderNamingStep(){const e=this.props.memberIds.filter(e=>e!==this.props.currentUserId).map(e=>o.a.createElement("strong",{key:e},o.a.createElement(LO.a,{id:e})));return o.a.createElement(o.a.Fragment,null,o.a.createElement(sw.a,{id:"mpim-conversion-modal-input",value:"",onValid:this.onValidNameEntered,onInvalid:this.onInvalidNameEntered,shouldFix:!0,focusOnMount:!0}),o.a.createElement("p",{className:"no_bottom_margin small_top_margin"},cw.rt("You are about to convert the group DM with {member_list} to a private channel. <strong>This cannot be undone.</strong>",{member_list:Object(x.k)(e)})))}render(){var e=this.state;const t=e.confirmed,a=e.newChannelNameValid,n=e.promisePending,s=this.props.memberIds,r=t?cw.t("Enter a name for the channel"):cw.t("Are you sure?"),i=t?cw.t("Convert to a private channel"):cw.t("Yes, continue");return o.a.createElement(rw.a,{title:r,goButtonText:i,onGo:this.onGo,goButtonIsDisabled:t&&!a,goButtonIsPending:n},t?this.renderNamingStep():this.renderConfirmationStep(),o.a.createElement(lw,{memberIds:s}))}}mpim_conversion_modal_MpimConversionModal.displayName="MpimConversionModal",mpim_conversion_modal_MpimConversionModal.defaultProps={memberIds:[]};const dw={convertMpimToPrivateChannel:(...e)=>Object(nw.b)(...e),closeModal:(...e)=>Object(ga.a)(...e),openModal:(...e)=>Object(ga.e)(...e)};var uw=Object(u.b)(function(e,{channelId:t}){const a=Object(B.e)(e,t);return{logger:Object(Ot.a)({state:e}),currentUserId:Object(m.d)(e),memberIds:Object(q.I)(a)}},dw)(mpim_conversion_modal_MpimConversionModal);const pw=Object(mt.b)("Starts the MPIM -> Private channel workflow",(e,t,{channelId:a}={})=>{a&&e(Object(ga.e)({element:o.a.createElement(uw,{channelId:a})}))});pw.meta={name:"openMpimConversionModal",key:"componentsMpimConversionModalOpenMpimConversionModalOpenMpimConversionModal",description:"Starts the MPIM -> Private channel workflow"},pw.propTypes={channelId:l.default.string.isRequired};var hw=pw,mw=a("t3J7");const bw=Object(mt.b)("Sets the default tab for a channel",(e,t,{tabId:a,channelId:n}={})=>{const s=t();return n?Object(R.e)(s)?e(Object(nw.x)({channelId:n,newPrefs:JSON.stringify({default_tab:`subteam:${a||"messages"}`})})).then(t=>{const a=Object(se.a)(t,["prefs","default_tab"]);a&&e(Object(mw.b)({channelId:n,pref:"default_tab",value:a}))}):Promise.reject(new Error("not-enabled")):Promise.reject(new Error("invalid-args"))});bw.meta={name:"setDefaultTabForChannel",key:"actionsSetDefaultTabForChannelSetDefaultTabForChannel",description:"Sets the default tab for a channel"},bw.propTypes={tabId:l.default.string,channelId:l.default.string.isRequired};const fw=Object(mt.b)("Add an embed tab for a channel",(e,t,{channelId:a,type:n,label:s,url:r}={})=>{const i=t();if(!(a&&n&&s&&r))return Promise.reject(new Error("invalid-args"));if(!Object(R.e)(i))return Promise.reject(new Error("not-enabled"));const o=Object(R.c)(i,a);return o.push({type:n,url:encodeURI(r),label:s}),e(Object(nw.x)({channelId:a,newPrefs:JSON.stringify({embed_tabs:`subteam:${btoa(JSON.stringify(o))}`})})).then(t=>{const n=Object(se.a)(t,["prefs","embed_tabs"]);n&&(e(Object(mw.b)({channelId:a,pref:"embed_tabs",value:n})),e(Object(D.a)({tabId:`embed-${o.length-1}`,channelId:a})))})});fw.meta={name:"addEmbedTab",key:"actionsEmbedTabsAddEmbedTab",description:"Add an embed tab for a channel"},fw.propTypes={channelId:l.default.string.isRequired,type:l.default.oneOf(["figma"]).isRequired,label:l.default.string.isRequired,url:l.default.string.isRequired};const _w=Object(mt.b)("Add an embed tab for a channel",(e,t,{tabId:a,channelId:n}={})=>{const s=t();if(!n||!a)return Promise.reject(new Error("invalid-args"));if(!Object(R.e)(s))return Promise.reject(new Error("not-enabled"));const r=Object(R.b)(a);if(!1===r)return Promise.reject(new Error("invalid-args"));const i=Object(R.c)(s,n);return i.splice(r,1),e(Object(nw.x)({channelId:n,newPrefs:JSON.stringify({embed_tabs:`subteam:${btoa(JSON.stringify(i))}`})})).then(t=>{const a=Object(se.a)(t,["prefs","embed_tabs"]);a&&(e(Object(mw.b)({channelId:n,pref:"embed_tabs",value:a})),e(Object(D.a)({tabId:void 0,channelId:n})))})});_w.meta={name:"removeEmbedTab",key:"actionsEmbedTabsRemoveEmbedTab",description:"Add an embed tab for a channel"},_w.propTypes={tabId:l.default.string.isRequired,channelId:l.default.string.isRequired};var gw=a("jK7E"),yw=a("xrsA"),Ow=a("zo7m");const Cw=Object(wn.b)("TS.ui.apps_browser.startAddApps");var vw=a("qEEt");l.default.string.isRequired,l.default.func.isRequired;const Ew=[{value:"figma",label:"Figma"}];class add_embed_tab_dialog_AddEmbedTabDialog extends i.Component{constructor(e){super(e),this.onClose=this.onClose.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onLabelChange=this.onLabelChange.bind(this),this.onURLChange=this.onURLChange.bind(this),this.state={type:Ew[0],label:void 0,url:void 0}}onClose(){this.props.dispatch(Object(ga.a)())}onSubmit(){this.props.dispatch(fw({channelId:this.props.channelId,type:this.state.type.value,label:this.state.label,url:this.state.url})),this.props.dispatch(Object(ga.a)())}onTypeChange(e){this.setState(()=>({type:e}))}onLabelChange(e){this.setState(()=>({label:e}))}onURLChange(e){this.setState(()=>({url:e}))}render(){return o.a.createElement(Nm.a,{title:"Add an embed tab",submitButtonText:"Add",cancelButtonText:"Cancel",onClose:this.onClose,onCancel:this.onClose,onSubmit:this.onSubmit},o.a.createElement(Dn.a,{text:"Embed type",className:"margin_bottom_125"},o.a.createElement(HO.a,{options:Ew,selectedOption:this.state.type,width:"100%",onOptionSelected:this.onTypeChange})),o.a.createElement(Dn.a,{text:"Tab label"},o.a.createElement(vw.b,{value:this.state.label,onChange:this.onLabelChange})),o.a.createElement(Dn.a,{text:"Embed URL"},o.a.createElement(vw.b,{value:this.state.url,onChange:this.onURLChange})))}}add_embed_tab_dialog_AddEmbedTabDialog.displayName="AddEmbedTabDialog";var kw=Object(u.b)()(add_embed_tab_dialog_AddEmbedTabDialog),Sw=a("LzXF"),jw=a("hFPh");const Iw=new x.b("classic_nav"),ww=(l.default.string.isRequired,l.default.object,l.default.func,l.default.func,l.default.bool,l.default.func,{channel:void 0,close:r.a,back:r.a,featureClassicNav:!1,jumpToTimestamp:r.a});class model_menu_jump_ModelMenuJump extends i.Component{constructor(e){super(e),this.onDateChange=this.onDateChange.bind(this)}onDateChange(e){const t=Gi()(e,"YYYY-MM-DD").format("X");this.props.jumpToTimestamp({ts:t,highlight:!0}),this.props.close()}render(){var e=this.props;const t=e.channel,a=e.back;if(!e.featureClassicNav)return null;const n=t.created?Gi()(t.created,"X").format("YYYY-MM-DD"):void 0;return o.a.createElement(fn.f,s()({},this.props,{width:325}),o.a.createElement(jw.a,{key:"date-picker",className:"p-classic_nav__model__menu__jump",disableDatesBefore:n,disableDatesAfter:Gi()().format("YYYY-MM-DD"),onDateChange:this.onDateChange}),o.a.createElement(_e.c,{key:"date-picker-back",className:"p-classic_nav__model__menu__jump__back","data-qa":"date_picker_back",onClick:a},Iw.t("Back to menu")))}}model_menu_jump_ModelMenuJump.displayName="ModelMenuJump",model_menu_jump_ModelMenuJump.defaultProps=ww;var Tw=Object(u.b)((e,{channelId:t})=>({channel:Object(B.e)(e,t),featureClassicNav:Object(m.m)(e,"feature_classic_nav")}),e=>({jumpToTimestamp:(...t)=>e(Object(Sw.c)(...t))}))(model_menu_jump_ModelMenuJump),Nw=a("HMjZ");function Aw(e,t){const a=Object(B.e)(e,t);if(!e||!a)return null;const n=Object(bi.d)(e,Object(q.H)(a)),s=Object(bi.b)(e),r=Object(q.v)(a),i="im"===r,o="mpim"===r,l="channel"===r,c="private"===r,d=l||c,u=Object(q.Ub)(s.id,a),p=Object(Nw.f)(e,a),h=Object(te.K)(e,t)||o,b=u,f=i&&!u,_=i&&!u&&!Object(q.Ib)(a)&&!Object(Je.Mb)(s)&&!Object(Je.Mb)(n)&&!Object(Je.mb)(n)&&!Object(Je.tb)(n),g=d,y=function(e,t){if(!t)return!1;const a=Object(q.v)(t),n="channel"===a||"private"===a,s=Object(bi.b)(e);return!(!n||Object(q.Y)(t)||(Object(m.m)(e,"feature_announce_only")?!Object(q.ob)(t)||!Object(te.p)(e,t.id)&&(Object(q.Gb)(t)||Object(Je.Gb)(s)||Object(Je.Mb)(s)):Object(Je.Gb)(s)||Object(Je.Mb)(s)||!Object(q.ob)(t)||Object(m.q)(e)&&Object(q.wb)(t)&&!Object(te.L)(e)||!Object(te.p)(e,t.id)&&Object(q.Gb)(t)))}(e,a),O=Object(te.R)(e,t),C=o&&Object(te.C)(e)&&!Object(q.bb)(a)&&!Object(q.eb)(a),v=!i&&(o||Object(q.ob)(a)&&!Object(q.Y)(a)),E=Object(m.m)(e,"feature_all_dm_mute")?Object(q.ob)(a)&&!Object(q.Y)(a)&&!u&&!Object(q.Ib)(a):v,k=Object(te.x)(e,t),S=Object(gn.a)(e,"allow_email_ingestion"),j=d&&Object(q.ob)(a)&&!Object(q.Y)(a)&&!Object(q.Gb)(a)&&!Object(Je.Mb)(s)&&(!Object(Je.Gb)(s)||c),I=d&&!Object(q.ob)(a)&&!Object(q.Y)(a)&&!Object(Je.Mb)(s)&&!Object(Je.Gb)(s),w=!l&&Object(te.J)(e,t),T=Object(q.Y)(a)&&!Object(q.eb)(a)&&!Object(q.C)(a),N=Object(q.Y)(a)&&Object(Je.eb)(e,s)&&d&&!Object(q.Gb)(a);return Object(Eb.a)({call:p,jump:!0,invite:h,editProfile:b,viewProfile:f,addMember:_,details:!0,copyChannelName:g,options:y,retention:O,convertToPrivate:C,notifications:v,mute:E,apps:k,email:S,leave:j,join:I,exportHistory:w,unarchive:T,delete:N},e=>!!e)}const Rw=new x.b("classic_nav"),Mw=Object(mt.b)("Un-archive a channel",(e,t,{channelId:a})=>{Object(m.m)(t(),"feature_classic_nav")&&e(Object(nw.Q)({channelId:a})).catch(a=>{Object(Ot.a)({getState:t}).error("CHANNEL-ACTIONS","Unarchive failed with error",a);const n="restricted_action"===Object(se.a)(a,"data.error")?Rw.t("You don\u2019t have permission to un-archive channels. Please talk to your Workspace Owner."):Rw.t("Sorry, something went wrong. Try again in a moment.");e(Object(ga.e)({element:o.a.createElement(bs.a,{title:Rw.t("Un-archive failed")},n)}))})});Mw.meta={name:"unarchiveChannel",key:"componentsClassicNavChannelHeaderModelHeaderMenuUtilityUnarchiveChannelUnarchiveChannel",description:"Un-archive a channel"},Mw.propTypes={channelId:l.default.string.isRequired};var Pw=Mw;const xw=new x.b("classic_nav"),Lw=(l.default.string.isRequired,l.default.object.isRequired,l.default.func,l.default.object,l.default.string,l.default.bool,l.default.object,l.default.bool,l.default.string,l.default.object,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool,l.default.string,l.default.string,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.bool,l.default.bool,l.default.bool,{onMenuItemSelected:r.a,actions:void 0,displayName:void 0,isMuted:!1,team:void 0,canManagePostingPermissions:!1,lastChannelDetailsSection:void 0,clogger:{track:r.a},joinChannel:r.a,unarchiveChannel:r.a,gantryStartCall:r.a,showDetails:r.a,showMemberProfile:r.a,copyChannelNameById:r.a,maybeLeaveChannel:r.a,muteChannelById:r.a,unmuteChannelById:r.a,openDmBrowserModal:r.a,startChannelInviteModal:r.a,openChannelOptions:r.a,openChannelNotificationPrefsModal:r.a,openEditProfileModal:r.a,openInviteMemberToChannelDialog:r.a,openAppsBrowserModal:r.a,openMpimConversionModal:r.a,showAnnounceOnlyPromo:!1,desktopNotifySetting:void 0,featureClassicNav:!1,featureSonicEditProfile:!1,featureM11nAppsBrowser:!1,featureAnnounceOnly:!1,featureCopyChannelName:!1,featureAnnounceOnlyPromo:!1,isChannelTabsEnabled:!1,currentTabId:void 0,defaultTabId:void 0,featureChannelNotificationSettings:!1,channelNotificationSettings:!1,isIAPhase1Enabled:!1});class model_menu_ModelMenu extends i.Component{constructor(e){super(e),this.onMenuItemSelected=this.onMenuItemSelected.bind(this),this.getMuteLabel=this.getMuteLabel.bind(this),this.getItems=this.getItems.bind(this),this.preventClose=!1,this.state={mode:"menu"}}onMenuItemSelected(e,t){if(this.preventClose)return void(this.preventClose=!1);var a=this.props;const n=a.channel,s=a.clogger;"im"===Object(q.v)(n)&&s.track(de.EventId.USER_CARD_CLICK),this.props.onMenuItemSelected(e,t);const r=this.getItems()[e];r&&r.key&&s.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_SETTINGS_ITEM"}},label:r.key})}getMuteLabel(){var e=this.props;const t=e.isMuted,a=e.channel,n=e.displayName,s=e.featureClassicNav,r="mpim"===Object(q.v)(a)||"im"===Object(q.v)(a);return s?t&&r?xw.t("Unmute conversation",{fallbackHash:"20adf9cbeb9de497d0542ed186c2346d59f40451",fallbackHashNs:"classic_nav"}):t&&!r?xw.t("Unmute {channelName}",{channelName:n}):!t&&r?xw.t("Mute conversation",{fallbackHash:"56403da5406f82ce89e0bc11bad072c588ca1a91",fallbackHashNs:"classic_nav"}):t||r?null:xw.t("Mute {channelName}",{channelName:n}):null}getNotificationPreferencesDescription(){var e=this.props;const t=e.desktopNotifySetting,a=e.isMuted,n=e.featureChannelNotificationSettings,s=e.channelNotificationSettings,r=Object(Ne.l)();if(!n||!s)return"";if("not_allowed"===r||"not_yet_allowed"===r)return"";if(a)return xw.t("Muted");let i;switch(t){case"everything":i=xw.t("Every new message");break;case"mentions_dms":i=xw.t("Just @mentions");break;case"nothing":i=xw.t("No notifications");break;default:i=""}return i}getItems(){var e=this.props;const t=e.channelId,a=e.channel,n=e.actions,s=e.displayName,r=e.joinChannel,i=e.featureClassicNav,l=e.team,c=e.canManagePostingPermissions,d=e.showAnnounceOnlyPromo,u=e.clogger,p=e.featureSonicEditProfile,h=e.featureM11nAppsBrowser,m=e.featureOfflineMode,b=e.featureAnnounceOnly,f=e.featureAnnounceOnlyPromo,_=e.featureCopyChannelName,g=e.isOffline,y=e.isChannelTabsEnabled,O=e.currentTabId,C=e.defaultTabId,v=e.isIAPhase1Enabled,E=Object(q.v)(a),k=Object(q.H)(a);if(!n||!E||!i)return[];const S="mpim"===E,j="channel"===E||"private"===E;return[{label:xw.t("Jump to date\u2026"),show:n.jump,key:"jump",click:()=>{this.preventClose=!0,this.setState(()=>({mode:"jump-to-date"})),u.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_SETTINGS_ITEM"}},label:"jump"})},disabled:m&&g,showOfflineIcon:m&&g},{label:S?xw.t("Invite another member\u2026"):xw.rt("Add people to channel",{channelName:s,fallbackHash:"5a88a5faedf2e862fdeb161752d2d2f1b68b2333"}),show:n.invite&&!v,dataQa:"invite_user_modal",key:"invite",click:()=>{if(S){const e=Object(q.I)(a);this.props.openDmBrowserModal({memberIds:e,source:ZI.b.MPIM})}else this.props.startChannelInviteModal({channelId:t,entryPoint:"channel_settings_add_people"})},disabled:m&&g,showOfflineIcon:m&&g},{label:xw.t("Edit your profile"),show:n.editProfile&&!v,key:"editProfile",click:()=>p?this.props.openEditProfileModal():Object(gw.a)(),disabled:m&&g,showOfflineIcon:m&&g},{label:xw.rt("View {userPossesive} profile",{userPossesive:Object(x.c)(s)}),show:n.viewProfile,key:"viewProfile",click:()=>this.props.showMemberProfile({memberId:k})},{label:xw.rt("Add {userName} to a channel\u2026",{userName:s}),show:n.addMember&&!v,key:"addMember",click:()=>this.props.openInviteMemberToChannelDialog({memberId:k}),disabled:m&&g,showOfflineIcon:m&&g},{label:j?xw.t("View channel details"):xw.t("View conversation details"),show:n.details&&!v,key:"details",click:()=>this.props.showDetails({sectionId:this.props.lastChannelDetailsSection||"info"})},{label:_?xw.t("Copy channel name"):"",show:_&&n.copyChannelName,key:"copyChannelName",click:()=>this.props.copyChannelNameById(a.id)},{label:xw.t("Convert to a private channel\u2026"),show:n.convertToPrivate,key:"convertToPrivate",click:()=>this.props.openMpimConversionModal({channelId:a.id}),disabled:m&&g,showOfflineIcon:m&&g},{label:xw.t("Edit message retention\u2026"),show:n.retention&&!v,key:"retention",click:()=>this.props.openChannelOptions({channelId:t,section:"retention"}),disabled:m&&g,showOfflineIcon:m&&g},{label:xw.t("Manage posting permissions"),show:b&&c&&n.options,key:"posting_privilege",click:()=>this.props.openChannelOptions({channelId:t,section:"posting_privilege"}),disabled:m&&g,showOfflineIcon:m&&g},{label:xw.t("Manage posting permissions"),show:f&&d&&!c&&n.options,key:"posting_privilege",click:()=>this.props.openChannelOptions({channelId:t}),disabled:m&&g,showOfflineIcon:m&&g,badgeLabel:xw.t("UPGRADE")},{label:xw.t("Additional options\u2026"),show:n.options,key:"options",click:()=>this.props.openChannelOptions({channelId:t}),disabled:m&&g,showOfflineIcon:m&&g},{type:"separator",key:"separator-1"},{label:xw.t("Notification preferences\u2026"),show:n.notifications&&!v,key:"notifications",description:this.getNotificationPreferencesDescription(),click:()=>(u.track(de.EventId.CHANNEL_NOTIFICATION_SETTINGS,{contexts:{ui_context:{step:de.UiStep.CHANNEL_NOTIFICATION_SETTINGS_OPEN,action:de.UiAction.CLICK}}}),this.props.openChannelNotificationPrefsModal({channelId:t,entryPoint:"modal_menu"}))},{label:this.getMuteLabel(),show:n.mute&&!v,key:"mute",click:()=>{this.props.isMuted?this.props.unmuteChannelById(t):this.props.muteChannelById(t)}},{type:"separator",key:"separator-2",show:!v},{label:xw.t("Add an app"),show:n.apps&&!v,key:"apps",click:()=>{const e=de.EventId.CHANNEL_SETTINGS,a={action:de.UiAction.CLICK,ui_element:de.UiElement.BTN_ADD_APPS};u.track(e,{contexts:{ui_context:a}}),h?this.props.openAppsBrowserModal({addAppsVariant:!0,referringEventId:e,referringUiContext:a,channelId:t}):Cw()},disabled:m&&g,showOfflineIcon:m&&g},{label:S?xw.t("Send email to this conversation\u2026"):xw.t("Send email to {channelName}\u2026",{channelName:s}),show:n.email&&!v,key:"email",href:Object(xe.n)(l,"/services/new/email"),target:"_blank",disabled:m&&g,showOfflineIcon:m&&g},{type:"separator",key:"separator-3",show:!v},{label:xw.t("Leave {channelName}",{channelName:s}),show:n.leave,key:"leave",click:()=>this.props.maybeLeaveChannel({channelId:t}),disabled:m&&g,showOfflineIcon:m&&g},{label:xw.t("Join {channelName}",{channelName:s}),show:n.join,key:"join",click:()=>r({channelId:t}),disabled:m&&g,showOfflineIcon:m&&g},{type:"separator",key:"separator-4",show:!v},{label:xw.t("Export message history\u2026"),show:n.exportHistory,key:"exportHistory",click:()=>this.props.openChannelOptions({channelId:t,section:"export"}),disabled:m&&g,showOfflineIcon:m&&g},{type:"separator",key:"separator-5",show:!v},{label:xw.t("Un-archive {channelName}",{channelName:s}),show:n.unarchive,key:"unarchive",click:()=>this.props.unarchiveChannel({channelId:t}),disabled:m&&g,showOfflineIcon:m&&g},{label:xw.t("Delete {channelName}",{channelName:s}),show:n.delete,key:"unarchive",click:()=>this.props.openChannelOptions({channelId:t,section:"delete"}),disabled:m&&g,showOfflineIcon:m&&g},{type:"separator",key:"separator-6",show:Je.eb&&y&&!v},{label:"Make this tab the default",show:y&&c&&!v,key:"channel_tabs_default",disabled:O===C,click:()=>this.props.setDefaultTabForChannel({tabId:O,channelId:t})},{label:"Add an embed tab",show:y&&c&&!v,key:"channel_tabs_embed_add",click:()=>this.props.openModal({element:o.a.createElement(kw,{channelId:t})})},{label:"Remove this embed tab",show:y&&c&&O&&0===O.indexOf("embed")&&!v,key:"channel_tabs_embed_add",click:()=>this.props.removeEmbedTab({tabId:O,channelId:t})}].filter(e=>e&&(e.show||"separator"===e.type&&!1!==e.show))}render(){switch(this.state.mode){case"menu":return o.a.createElement(fn.a,s()({},this.props,{template:this.getItems(),onMenuItemSelected:this.onMenuItemSelected,stripTerminalSeparators:!0,width:"auto"}));case"jump-to-date":return o.a.createElement(Tw,s()({},this.props,{channelId:this.props.channelId,close:this.props.onMenuItemSelected,back:()=>{this.preventClose=!0,this.setState(()=>({mode:"menu"}))}}));default:return null}}}model_menu_ModelMenu.displayName="ModelMenu",model_menu_ModelMenu.defaultProps=Lw;var Fw=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(Se.d)(e),s=Object(te.M)(e,t),r=Object(m.m)(e,"feature_announce_only_promo"),i=r&&(Object(xe.w)(n)||Object(xe.z)(n))&&!Object(q.gb)(a);let o;return Object(q.ib)(a)||(o=Object(Ne.f)(e,t)),{channel:a,actions:Aw(e,t),displayName:Object(q.x)(e,a,{imIncludeAtSign:!1}),isMuted:Object(xu.c)(e,t),team:n,canManagePostingPermissions:s,showAnnounceOnlyPromo:i,clogger:Object(ie.a)({state:e}),lastChannelDetailsSection:Object(v.b)(e),featureClassicNav:Object(m.m)(e,"feature_classic_nav"),featureSonicEditProfile:Object(m.m)(e,"feature_sonic_edit_profile"),featureM11nAppsBrowser:Object(m.m)(e,"feature_m11n_apps_browser"),featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),featureAnnounceOnly:Object(m.m)(e,"feature_announce_only"),featureCopyChannelName:Object(m.m)(e,"feature_copy_channel_name"),featureAnnounceOnlyPromo:r,featureChannelNotificationSettings:Object(m.m)(e,"feature_channel_notification_settings"),isOffline:!Object(pa.c)(e),desktopNotifySetting:o,channelNotificationSettings:"new_design"===Object(ha.c)(e,"channel_notification_settings"),isChannelTabsEnabled:Object(R.e)(e),currentTabId:O(e),defaultTabId:Object(R.a)(e,t)}},e=>({joinChannel:(...t)=>e(Object(wi.joinConversationApi)(...t)),unarchiveChannel:(...t)=>e(Pw(...t)),gantryStartCall:(...t)=>e(Object(QI.d)(...t)),showDetails:(...t)=>e(Object(qa.e)(...t)),showMemberProfile:(...t)=>e(Object(qa.j)(...t)),copyChannelNameById:(...t)=>e(Object(XI.a)(...t)),maybeLeaveChannel:(...t)=>e(Object(JI.a)(...t)),muteChannelById:(...t)=>e(Object(zI.a)(...t)),unmuteChannelById:(...t)=>e(Object(zI.b)(...t)),openDmBrowserModal:(...t)=>e(Object(Qk.a)(...t)),startChannelInviteModal:(...t)=>e(Object(ew.b)(...t)),openChannelOptions:(...t)=>e(Object(tw.a)(...t)),openChannelNotificationPrefsModal:(...t)=>e(Object(Hk.a)(...t)),openEditProfileModal:(...t)=>e(Object(Ow.a)(...t)),openInviteMemberToChannelDialog:(...t)=>e(Object(yw.a)(...t)),openAppsBrowserModal:(...t)=>e(Object(aw.a)(...t)),openMpimConversionModal:(...t)=>e(hw(...t)),setDefaultTabForChannel:(...t)=>e(bw(...t)),openModal:(...t)=>e(Object(ga.e)(...t)),removeEmbedTab:(...t)=>e(_w(...t))}))(model_menu_ModelMenu);const Dw={channelId:l.default.string.isRequired,noMenu:l.default.bool,type:l.default.oneOf(["channel","private","im","mpim"]),name:l.default.string,memberId:l.default.string,mpimIds:l.default.arrayOf(l.default.string.isRequired),currentUser:l.default.string.isRequired,isChannelUnavailable:l.default.bool.isRequired,isMuted:l.default.bool,logger:l.default.object.isRequired,clogger:l.default.object.isRequired,isIAP1Enabled:l.default.bool.isRequired},Bw={noMenu:!1,type:void 0,name:void 0,memberId:void 0,mpimIds:void 0,isMuted:!1};class model_name_ModelName extends AI.a{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this),this.renderChannel=this.renderChannel.bind(this),this.renderIM=this.renderIM.bind(this),this.renderMPIM=this.renderMPIM.bind(this),this.onMenuOpen=this.onMenuOpen.bind(this)}onMenuOpen(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_NAME"}}})}renderMenu(e){return o.a.createElement(Fw,s()({},e,{channelId:this.props.channelId}))}renderChannel(e){var t=this.props;const a=t.channelId,n=t.name,s=t.isMuted,r=t.isIAP1Enabled,l=o.a.createElement(MI.a,{channelId:a,bold:!0,disableArchived:!0}),c=s&&!r?o.a.createElement(YI,{channelId:a}):null;return o.a.createElement(i.Fragment,null,o.a.createElement(e,null,l,n),r?null:o.a.createElement(RI.a,{channelId:a,className:"p-classic_nav__model__title__name__shared_icon",inherit:!1,inline:!1,tooltipPosition:"bottom"}),c)}renderIM(e){var t=this.props;const a=t.memberId,n=t.isMuted,s=t.channelId,r=t.isIAP1Enabled;if(!a)return null;const l=n&&!r?o.a.createElement(YI,{channelId:s}):null;return o.a.createElement(i.Fragment,null,o.a.createElement(e,null,o.a.createElement(UI,{memberId:a}),o.a.createElement(VI,{memberId:a}),o.a.createElement(WI,{memberId:a})),l)}renderMPIM(e){var t=this.props;const a=t.channelId,n=t.mpimIds,s=t.currentUser,r=t.isMuted,l=t.logger,c=t.isIAP1Enabled;if(!n||!n.length)return l.error("CLASSIC-NAV",`MPIM ${a} has no members`),o.a.createElement(i.Fragment,null,o.a.createElement(PI.b,{className:"align_self_center"}),"\u200b");const d=r&&!c?o.a.createElement(YI,{channelId:a}):null,u=n.filter(e=>e!==s).map((e,t)=>o.a.createElement(i.Fragment,{key:e},t>0?", ":null,o.a.createElement(UI,{memberId:e}),o.a.createElement(iS.b,{memberId:e,tipPosition:"bottom",className:"p-classic_nav__model__title__name__status--mpim"})));return o.a.createElement(e,null,u,d)}render(){var e=this.props;const t=e.type,a=e.isMuted,n=e.isChannelUnavailable,s=e.noMenu,r=e.isIAP1Enabled;if(!t)return null;const i=({children:e})=>n?o.a.createElement("div",{className:"p-classic_nav__model__title__name__button","data-qa":"channel_name"},e):r?o.a.createElement(xI.a,{id:this.props.channelId},o.a.createElement("div",{className:"p-classic_nav__model__title__name__button","data-qa":"channel_name"},e)):s?o.a.createElement("div",{className:"p-classic_nav__model__title__name__button","data-qa":"channel_name"},e):o.a.createElement(fn.e,{renderMenu:this.renderMenu,onClick:this.onMenuOpen,position:"bottom-left",offsetX:-4,offsetY:4},o.a.createElement(_e.c,{className:"p-classic_nav__model__title__name__button","data-qa":"channel_name"},e));let l;switch(t){case"channel":case"private":l=this.renderChannel(i);break;case"im":l=this.renderIM(i);break;case"mpim":l=this.renderMPIM(i);break;default:l=null}const c=d()({"p-classic_nav__model__title__name":!0,"p-classic_nav__model__title__name--dim":!r&&a,"p-classic_nav__no_drag":!0});return o.a.createElement("div",{className:c},l)}}model_name_ModelName.displayName="ModelName",model_name_ModelName.propTypes=Dw,model_name_ModelName.defaultProps=Bw;var Uw=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t);return{type:Object(q.v)(a),name:Object(q.N)(a),memberId:Object(q.H)(a)||void 0,mpimIds:(Object(LI.d)(e)?Object(q.M)(e,a):Object(q.I)(a))||void 0,currentUser:Object(m.d)(e),isMuted:Object(xu.c)(e,t),isChannelUnavailable:Object(q.Mb)(e,a),logger:Object(Ot.a)({state:e}),clogger:Object(ie.a)({state:e}),isIAP1Enabled:Object(bo.c)(e)}})(model_name_ModelName),qw=()=>o.a.createElement("span",{className:"p-classic_nav__model__title__info__sep","aria-hidden":"true"},"|");a("hCXE");l.default.string.isRequired,l.default.string,l.default.func.isRequired,l.default.bool,l.default.array;const Hw={tab:void 0,isEnabled:!1,embedTabs:[]};class model_info_tabs_ModelInfoTabs extends i.Component{constructor(e){super(e),this.onTabClick=this.onTabClick.bind(this)}onTabClick(e){this.props.setTab({tabId:e,channelId:this.props.channelId})}render(){var e=this.props;const t=e.tab,a=e.isEnabled,n=e.embedTabs;if(!a)return null;const s=[{id:void 0,label:"Messages"},{id:"about",label:"About"},{id:"space",label:"Notes"},...n.map((e,t)=>({id:`embed-${t}`,label:e.label}))].map(({id:e,label:a},n)=>{const s=d()("p-classic_nav__model__title__info__tab",{"p-classic_nav__model__title__info__tab--active":t===e,"p-classic_nav__model__title__info__tab--first":0===n});return o.a.createElement(_e.c,{className:s,onClick:()=>this.onTabClick(e),key:e||"default"},a)});return o.a.createElement(i.Fragment,null,s,o.a.createElement(qw,null))}}model_info_tabs_ModelInfoTabs.displayName="ModelInfoTabs",model_info_tabs_ModelInfoTabs.defaultProps=Hw;var Ww=Object(u.b)((e,{channelId:t})=>({tab:O(e),isEnabled:Object(R.e)(e),embedTabs:Object(R.c)(e,t)}),e=>({setTab:(...t)=>e(Object(D.a)(...t))}))(model_info_tabs_ModelInfoTabs),Gw=a("0F/N"),Kw=a("0VPD"),Vw=a("cZF4"),zw=a("5VWh"),$w=a("wMtF"),Yw=a("e4Fz"),Qw=a("PM8X");a("LsCE");const Xw=new x.b("current_status"),Jw={TEAM_MENU:"team_menu",TEAM_SITE:"team_site",VIEW_PROFILE:"view_profile"},Zw=100,eT=94,tT=(l.default.oneOf(["top","bottom-left"]),l.default.oneOf(Object.values(Jw)),l.default.string,l.default.string,l.default.arrayOf(l.default.shape({text:l.default.string,emoji:l.default.string})).isRequired,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.func,l.default.bool,l.default.func,l.default.string,{emojiMenuPosition:"bottom-left",inputType:Jw.TEAM_MENU,initialText:"",initialEmoji:"",onCancel:r.a,onClose:r.a,onSubmit:r.a,onChange:r.a,focusOnMount:!1,isControlled:!1,closeModal:r.a,featureChannelSections:!1,onRenameChannelSectionSubmit:r.a,channelSectionId:""});function aT(e){return e?o.a.createElement("div",{className:"p-channel_section_modal_input__emoji"},o.a.createElement(Ho.b,{text:e,stopAnimations:!0,obeyEmojiMode:!1,emojiSize:Ho.a.MEDIUM,forceDisplay:!0})):o.a.createElement("div",{className:"p-channel_section_modal_input__empty_emoji"},o.a.createElement(bn.a,{className:"p-channel_section_modal_input__emoji_circle_icon",type:"circle-fill"}),o.a.createElement(bn.a,{className:"p-channel_section_modal_input__emoji_smile_icon",type:"smile-o"}),o.a.createElement(bn.a,{className:"p-channel_section_modal_input__emoji_happy_icon",type:"happy-smile"}))}aT.displayName="renderEmoji";class channel_section_modal_input_BaseChannelSectionModalInput extends i.PureComponent{constructor(e){super(e),this.dialog=o.a.createRef(),this.state={text:Object(Mn.b)(e.initialText,null,{for_edit:!0}),emoji:e.initialEmoji,textyHasFocus:!1,userDidSelectEmoji:!!e.initialEmoji,selectedPresetIndex:void 0},this.setTextyRef=this.setTextyRef.bind(this),this.onTextChange=this.onTextChange.bind(this),this.onCancel=this.onCancel.bind(this),this.onClose=this.onClose.bind(this),this.onEmojiChange=this.onEmojiChange.bind(this),this.onEnter=this.onEnter.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onClickEmojiMenu=this.onClickEmojiMenu.bind(this),this.onClearIconClick=this.onClearIconClick.bind(this),this.onClearStatusButtonClick=this.onClearStatusButtonClick.bind(this),this.onTextyBlur=this.onTextyBlur.bind(this),this.onTextyFocus=this.onTextyFocus.bind(this),this.setFocusOnTextInput=this.setFocusOnTextInput.bind(this),this.selectedPresetOptionRef=o.a.createRef(),this.textyModules={tabcomplete:{positionMenu:e=>{e.style.width=`${this.texty.container.offsetWidth}px`,e.style.minWidth=`${this.texty.container.offsetWidth}px`,Object(nn.a)(e,this.texty.container)},completers:["channels","emoji","members"]},keyboard:{useFormattingCommands:!1}}}componentDidMount(){this.dialog&&(this.keyCommands=new Au.a(this.dialog.node),this.keyCommands.bindAll([{keys:["down"],handler:()=>this.handleDownArrow()},{keys:["up"],handler:()=>this.handleUpArrow()}]))}componentDidUpdate(){this.selectedPresetOptionRef.current&&this.selectedPresetOptionRef.current.focus()}componentWillUnmount(){this.keyCommands&&this.keyCommands.reset()}onCancel(){var e=this.props;const t=e.inputType,a=e.initialEmoji,n=e.initialText,s=e.onCancel;t!==Jw.TEAM_SITE&&(this.texty.value(n),this.setState(()=>({text:n,emoji:a}),()=>s({emoji:a,text:n})))}onClose(){this.props.onClose()}onClearIconClick(){this.clearStatus({andSubmit:!1})}onClearStatusButtonClick(){this.clearStatus({andSubmit:!0})}onClickEmojiMenu(e){const t=this.props.emojiMenuPosition,a="top"===t?-5:5;Object(Qw.a)({e:e,offset_y:a,position:t,callback:this.onEmojiChange,target_bounds:this.texty.container.getBoundingClientRect()})}onEmojiChange(e){const t=this.props.onChange;this.setState(()=>({emoji:e,userDidSelectEmoji:!0}),this.setFocusOnTextInput),t({emoji:e})}onEnter(){const e=this.state.text;this.hasUnsavedChanges()&&e.length<=Zw&&(this.onSubmit(),this.props.closeModal())}onPresetSelected({emoji:e,text:t}){const a=this.props.onChange;this.texty.value(t),this.setState(()=>({emoji:e,text:t,userDidSelectEmoji:!0}),this.setFocusOnTextInput),a({emoji:e,text:t})}onSubmit(){const e=this.state.emoji;var t=this.props;const a=t.inputType,n=t.onSubmit,s=t.onRenameChannelSectionSubmit,r=this.texty.value();return a!==Jw.TEAM_SITE&&(!(!this.hasUnsavedChanges()||r.length>Zw)&&(this.props.channelSectionId?(s({text:r,emoji:e}),!0):(n({text:r,emoji:e}),!0)))}onTextChange(){if(!this.texty)return;const e=this.props.onChange;var t=this.state;const a=t.text,n=t.emoji,s=t.userDidSelectEmoji,r=this.texty.value();if(r===a)return;let i=n;s||(i=""),this.setState(()=>({text:r,emoji:i})),e({text:r,emoji:i})}onTextyBlur(){this.setState(()=>({textyHasFocus:!1}))}onTextyFocus(){this.setState(()=>({textyHasFocus:!0}))}setFocusOnTextInput(){this.texty.setCursorAtEnd(),this.resetSelectedPresetIndex()}setSelectedPresetIndex(e){this.setState(()=>({selectedPresetIndex:e}))}setTextyRef(e){this.texty=e&&e.getWrappedInstance?e.getWrappedInstance():e}UNSAFE_componentWillReceiveProps(e){var t=this.props;const a=t.isControlled,n=t.initialEmoji,s=t.initialText,r=e.initialEmoji,i=e.initialText;if(n===r&&s===i)return;if(!a&&this.hasUnsavedChanges())return;const o=Object(Mn.b)(i,null,{for_edit:!0});this.texty.value(o),this.setState(()=>({emoji:r,text:o}))}clearStatus({andSubmit:e}={}){const t=this.props.onChange;var a=["","","",void 0,!1];const n=a[0],s=a[1],r=a[2];this.texty.clear(),this.setState(()=>({text:n,emoji:s,userDidSelectEmoji:r}),()=>{e?this.onSubmit():this.setFocusOnTextInput()}),t({emoji:s,text:n})}handleDownArrow(){const e=this.props.teamPresets;var t=this.state;const a=t.selectedPresetIndex,n=t.text,s=t.textyHasFocus;Object(dt.a)(a)?a<e.length-1&&this.setSelectedPresetIndex(a+1):!n&&s&&this.setSelectedPresetIndex(0)}handleUpArrow(){const e=this.state.selectedPresetIndex;Object(dt.a)(e)&&(0===e?this.setFocusOnTextInput():this.setSelectedPresetIndex(e-1))}hasInput(){var e=this.state;const t=e.emoji;return!(!e.text&&!t)}hasUnsavedChanges(){var e=this.props;const t=e.initialText,a=e.initialEmoji;var n=this.state;const s=n.emoji,r=n.text;return s!==a||r!==t}maybeRenderSaveButton(){const e=this.props.inputType,t=this.state.text;if(e===Jw.TEAM_SITE)return null;if(!this.hasUnsavedChanges())return null;const a=Xw.t("Save");return o.a.createElement("div",{className:"align_right"},o.a.createElement(_e.d,{type:"primary",size:"small",onClick:this.onSubmit,disabled:t.length>Zw,"data-qa":"channel_selection_modal_input_submit_button"},a))}resetSelectedPresetIndex(){this.setSelectedPresetIndex()}renderActionButtons(){const e=this.props.inputType===Jw.TEAM_SITE||this.hasUnsavedChanges()||this.hasInput(),t=d()("p-channel_section_modal_input__actions","p-channel_section_modal_input__actions--with_expiry",{"p-channel_section_modal_input__actions--invisible":!e});return o.a.createElement("div",{className:t},this.maybeRenderSaveButton())}renderClearIcon(){const e=this.props.inputType;var t=this.state;const a=t.text,n=t.emoji;if(e===Jw.TEAM_SITE||!a&&!n)return null;const s=Xw.t("Clear all"),r=e===Jw.VIEW_PROFILE?"top-right":"top",i=o.a.createElement(Qh.a,{className:"p-channel_section_modal_input__clear_link","aria-label":s,"data-qa":"channel_selection_modal_clear_icon",onClick:this.onClearIconClick},o.a.createElement(bn.a,{type:"close-filled",className:"p-channel_section_modal_input__clear_icon"}));return o.a.createElement("div",{className:"p-channel_section_modal_input__status_clear_icon_wrap"},o.a.createElement(Xr.c,{tip:s,position:r,zIndex:"above_fs"},i))}renderEmojiPicker(){const e=this.props.emojiMenuPosition,t=this.state.emoji;if(Object(xr.a)()){const a="top"===e?-5:5;return o.a.createElement($w.a,{onEmojiSelected:(e,t)=>this.onEmojiChange(`:${t}:`),offsetY:a,position:e},o.a.createElement(Qh.a,{className:"p-channel_section_modal_input__emoji_picker","aria-label":Xw.t("Emoji menu"),"data-qa":"channel_selection_modal_input_emoji_picker"},aT(t)))}return o.a.createElement(Qh.a,{onClick:this.onClickEmojiMenu,className:"p-channel_section_modal_input__emoji_picker","aria-label":Xw.t("Emoji menu"),"data-qa":"channel_selection_modal_input_emoji_picker"},aT(t))}renderPresetOption(e,t){const a=this.state.selectedPresetIndex,n=e.emoji,s=e.text,r=e.description,i=t===a?this.selectedPresetOptionRef:void 0;return o.a.createElement(Qh.a,{className:"p-channel_section_modal_input__preset_option","data-qa":"channel_selection_modal_input_preset_option",onClick:()=>this.onPresetSelected({emoji:n,text:s}),key:t,onFocus:()=>this.setSelectedPresetIndex(t),onBlur:()=>this.resetSelectedPresetIndex(),ref:i},o.a.createElement("div",{className:"p-channel_section_modal_input__preset_option_emoji"},aT(n)),o.a.createElement("div",{className:"p-channel_section_modal_input__preset_option_text"},s),o.a.createElement("div",{className:"p-channel_section_modal_input__preset_option_description"},"\xa0\u2014 ",r))}renderPresets(){var e=this.props;const t=e.inputType,a=e.teamPresets;var n=this.state;const s=n.emoji,r=n.text;if(t===Jw.TEAM_SITE||s||r)return null;const i=a.map(this.renderPresetOption,this);return o.a.createElement("div",{className:"p-channel_section_modal_input__presets"},i)}renderStatusTextInput(){var e=this.props;const t=e.inputType,a=e.focusOnMount,n=e.featureChannelSections,s=this.state.text;if(!n)return null;const r=`channel_selection_modal_input_for_${t}`,i=Xw.t("Choose a helpful name"),l=Object(Yw.a)(r,"character-count");return Object(xr.a)()?o.a.createElement(en.a,{completeOnMembers:!0,completeOnChannels:!0,completeOnEmoji:!0,position:"bottom",shouldCompleteOnTab:!1,renderInput:({modules:e,isOpen:t})=>o.a.createElement(zw.a,{id:l,currentCount:s.length,maxCharacterLimit:Zw,counterMinimumCharacters:eT,size:vw.a.medium},o.a.createElement(qt.default,{id:r,name:r,ref:this.setTextyRef,className:"p-channel_section_modal_input__text_input small",ariaLabel:i,initialText:s,"data-validation":"maxlength=100","data-validation-for":r,"data-qa":"channel_selection_modal_input_text_input",modules:e,isAutocompleteOpen:t,onBlur:this.onTextyBlur,onEnter:this.onEnter,onEscape:this.onCancel,onFocus:this.onTextyFocus,onTextChange:this.onTextChange,placeholder:i,focusOnMount:a,enableBroadcastKeywords:!1,enableFormattingCommands:!1,isSingleLine:!0}))}):o.a.createElement(zw.a,{id:l,currentCount:s.length,maxCharacterLimit:Zw,counterMinimumCharacters:eT,size:vw.a.medium},o.a.createElement(qt.default,{id:r,name:r,ref:this.setTextyRef,className:"p-channel_section_modal_input__text_input small",ariaLabel:i,initialText:s,"data-validation":"maxlength=100","data-validation-for":r,"data-qa":"channel_selection_modal_input_text_input",modules:this.textyModules,onBlur:this.onTextyBlur,onEnter:this.onEnter,onEscape:this.onCancel,onFocus:this.onTextyFocus,onTextChange:this.onTextChange,placeholder:i,focusOnMount:a,useLegacyCreate:!0,isSingleLine:!0,enableBroadcastKeywords:!1,legacyShouldCompleteOnTab:!1}))}render(){const e=this.props.featureChannelSections,t=this.state.text;if(!e)return null;const a=!this.hasUnsavedChanges()||t.length>Zw,n=this.props.channelSectionId?Xw.t("Save"):Xw.t("Move"),s=this.onSubmit;return o.a.createElement(ya.a,{className:d()("p-channel_section_modal_input__dialog",{"p-channel_section_modal_input--modern":Object(xr.a)()}),goButtonIsDisabled:a,goButtonText:n,goButtonType:"primary",onGo:s,onClose:this.onClose,title:this.props.channelSectionId?Xw.t("Rename section"):Xw.t("Add section"),ref:this.dialog,shouldCloseOnOverlayClick:!0,useSlackScrollbar:!1,showTooltipOnCloseButton:!0,"data-qa":"channel_selection_modal_input"},o.a.createElement("div",{className:"p-channel_section_modal_input__input_wrap"},this.renderStatusTextInput(),this.renderEmojiPicker(),this.renderClearIcon()),this.renderPresets())}}channel_section_modal_input_BaseChannelSectionModalInput.displayName="BaseChannelSectionModalInput",channel_section_modal_input_BaseChannelSectionModalInput.defaultProps=tT;const nT={closeModal:ga.a};var sT=Object(u.b)(function(e,{initialText:t,initialEmoji:a,channelSectionId:n}){const s=Object(m.m)(e,"feature_channel_sections");let r=[];return s&&(r=[{emoji:":speaker:",text:Xw.t("Announcements"),description:Xw.t("Internal comms")},{emoji:":busts_in_silhouette:",text:Xw.t("Team"),description:Xw.t("Direct messages and team channels")},{emoji:":triangular_flag_on_post:",text:Xw.t("Priority"),description:Xw.t("Urgent conversations")},{emoji:":notebook:",text:Xw.t("Resources"),description:Xw.t("IT, benefits, and HR requests")}]),{initialText:t,initialEmoji:a,teamPresets:r,featureChannelSections:s,channelSectionId:n}},nT)(Object(rn.a)(channel_section_modal_input_BaseChannelSectionModalInput)),rT=a("D03H");const iT=Object(mt.b)("Channel Sections: UI action when the collapsed state of a custom or default section is toggled",(e,t,{channelSectionId:a,defaultSectionName:n,isCollapsed:s}={})=>{e(n?Object(bS.g)({defaultSectionName:n,isCollapsed:s}):Object(bS.f)({channelSectionId:a,isCollapsed:s}))});iT.meta={name:"setSectionCollapsed",key:"channelSectionsStoreChannelSectionsThunksSetSectionCollapsed",description:"Channel Sections: UI action when the collapsed state of a custom or default section is toggled"},iT.propTypes={defaultSectionName:l.default.oneOf(rT.a),channelSectionId:l.default.string,isCollapsed:l.default.bool.isRequired};const oT=Object(mt.b)("Channel Sections: create a new channel section",(e,t,{name:a,emoji:n,nextChannelSectionId:s=null}={})=>{const r=n.startsWith(":")&&n.endsWith(":")?n.slice(1,-1):n,i=`local-${Object(pm.a)()}`;return e(Object(bS.l)({channelSection:{id:i,type:rT.g,name:a,emoji:r,nextChannelSectionId:s}})),e(oS({name:a,emoji:r,nextChannelSectionId:s})).then(t=>{const n=t.channel_section_id;return e(Object(bS.l)({channelSection:{id:t.channel_section_id,type:rT.g,name:a,emoji:r,nextChannelSectionId:s}})),e(Object(bS.n)({localChannelSection:{id:n,isCollapsed:!1,isEditable:!0}})),n}).catch(t=>{throw e(Object(bS.b)({channelSectionId:i})),t})});oT.meta={name:"createChannelSection",key:"channelSectionsStoreChannelSectionsThunksCreateChannelSection",description:"Channel Sections: create a new channel section"},oT.propTypes={name:l.default.string.isRequired,emoji:l.default.string.isRequired,nextChannelSectionId:l.default.string};const lT=Object(mt.b)("Channel Sections: bulk delete and add channels to channel sections section",(e,t,{remove:a=[],insert:n=[]}={})=>{const r=t(),i={},o={};a.forEach(e=>{e.channelIds.forEach(t=>{i[t]||(i[t]={}),i[t][e.channelSectionId]=!0})}),n.forEach(e=>{e.channelIds.forEach(t=>{i[t]&&i[t][e.channelSectionId]&&(o[e.channelSectionId]||(o[e.channelSectionId]=new Set),o[e.channelSectionId].add(t))})});const l=a.map(e=>o[e.channelSectionId]?s()({},e,{channelIds:e.channelIds.filter(t=>!o[e.channelSectionId].has(t))}):e).filter(e=>e.channelIds.length>0),c=n.map(e=>o[e.channelSectionId]?s()({},e,{channelIds:e.channelIds.filter(t=>!o[e.channelSectionId].has(t))}):e).filter(e=>e.channelIds.length>0),d=(e,t)=>{const a=ES(r,t.channelSectionId);return a&&a.type&&(e[a.type]||(e[a.type]=[]),e[a.type].push(t)),e},u=l.reduce(d,{}),p=c.reduce(d,{}),h=u[rT.g]||[],m=p[rT.g]||[],b=u[rT.h]||[],f=p[rT.h]||[];h.forEach(a=>{const n=a.channelSectionId,s=a.channelIds,r=new Set(s),i=jS(t(),n);e(Object(bS.e)({channelSectionId:n,channelIds:i.filter(e=>!r.has(e))}))}),m.forEach(t=>{e(Object(bS.m)(t))});const _=[];return b.forEach(t=>{const a=t.channelIds;_.push(...a.map(t=>e(Object(Gw.a)(!1,{channel:t}))))}),f.forEach(t=>{const a=t.channelIds;_.push(...a.map(t=>e(Object(Gw.a)(!0,{channel:t}))))}),h.length+m.length>0&&_.push(e(mS({remove:h,insert:m}))),Promise.all(_).catch(e=>{throw Object(Ot.a)({getState:t}).error("Failure while performing moveManyChannels",e),e})});lT.meta={name:"moveManyChannels",key:"channelSectionsStoreChannelSectionsThunksMoveManyChannels",description:"Channel Sections: bulk delete and add channels to channel sections section"},lT.propTypes={remove:l.default.arrayOf(l.default.shape({channelSectionId:l.default.string.isRequired,channelIds:l.default.arrayOf(l.default.string).isRequired})),insert:l.default.arrayOf(l.default.shape({channelSectionId:l.default.string.isRequired,channelIds:l.default.arrayOf(l.default.string).isRequired,nextChannelId:l.default.oneOf([l.default.string,l.default.null])}))};const cT=Object(mt.b)("Channel Sections: update a channel section",(e,t,{channelSection:a}={})=>{const n=t(),s=ES(n,a.id);return e(Object(bS.l)({channelSection:a})),e(lS({channelSectionId:a.id,name:a.name,emoji:a.emoji,nextChannelSectionId:a.nextChannelSectionId})).catch(()=>{e(Object(bS.l)({channelSection:s}))})});cT.meta={name:"updateChannelSection",key:"channelSectionsStoreChannelSectionsThunksUpdateChannelSection",description:"Channel Sections: update a channel section"},cT.propTypes={channelSection:rT.p.isRequired};const dT=Object(mt.b)("Channel Sections: move a sidebar section to before a target channel/section",(e,t,{channelSectionId:a,nextChannelSectionId:n=null}={})=>{if(a===n)return Promise.resolve();const r=ES(t(),a);return e(cT({channelSection:s()({},r,{nextChannelSectionId:n})}))});dT.meta={name:"moveChannelSection",key:"channelSectionsStoreChannelSectionsThunksMoveChannelSection",description:"Channel Sections: move a sidebar section to before a target channel/section"},dT.propTypes={channelSectionId:l.default.string.isRequired,nextChannelSectionId:l.default.string};const uT=Object(mt.b)("Channel Sections: delete a channel section",(e,t,{channelSectionId:a}={})=>{const n=t(),s=ES(n,a);return e(Object(bS.b)({channelSectionId:a})),e(uS({channelSectionId:a})).catch(()=>{e(Object(bS.l)({channelSection:s}))})});uT.meta={name:"deleteChannelSection",key:"channelSectionsStoreChannelSectionsThunksDeleteChannelSection",description:"Channel Sections: delete a channel section"},uT.propTypes={channelSectionId:l.default.string.isRequired};const pT=Object(mt.b)("Channel Sections: insert or update a channel within a channel section",(e,t,{channelSectionId:a,channelId:n}={})=>{if(ES(t(),a).type===rT.h)return e(Object(Gw.a)(!0,{channel:n}));const s=jS(t());return e(Object(bS.m)({channelSectionId:a,channelIds:[n]})),e(pS({channelSectionId:a,channelId:n})).catch(()=>{e(Object(bS.e)({channelSectionId:a,channelIds:s}))})});pT.meta={name:"upsertChannelSectionChannel",key:"channelSectionsStoreChannelSectionsThunksUpsertChannelSectionChannel",description:"Channel Sections: insert or update a channel within a channel section"},pT.propTypes={channelSectionId:l.default.string.isRequired,channelId:l.default.string.isRequired};const hT=Object(mt.b)("Channel Sections: remove a channel from a channel section",(e,t,{channelSectionId:a,channelId:n}={})=>{if(ES(t(),a).type===rT.h)return e(Object(Gw.a)(!1,{channel:n}));const s=jS(t());return e(Object(bS.d)({channelSectionId:a,channelIds:[n]})),e(hS({channelSectionId:a,channelId:n})).catch(()=>{e(Object(bS.e)({channelSectionId:a,channelIds:s}))})});hT.meta={name:"removeChannelSectionChannel",key:"channelSectionsStoreChannelSectionsThunksRemoveChannelSectionChannel",description:"Channel Sections: remove a channel from a channel section"},hT.propTypes={channelSectionId:l.default.string.isRequired,channelId:l.default.string.isRequired},Object(Ia.a)("channelSections",{create:(e,t,a,n)=>Object(p.dispatchForTeamId)(e,oT({name:t,emoji:a,nextChannelSectionId:n})),update:(e,t,a)=>Object(p.dispatchForTeamId)(e,cT({channelSectionId:t,channelSection:a})),deleteSection:(e,t)=>Object(p.dispatchForTeamId)(e,uT({channelSectionId:t})),upsertChannel:(e,t,a)=>Object(p.dispatchForTeamId)(e,pT({channelSectionId:t,channelId:a})),removeChannel:(e,t,a)=>Object(p.dispatchForTeamId)(e,hT({channelSectionId:t,channelId:a}))});const mT=new x.b("channel_sidebar"),bT=(l.default.arrayOf(l.default.string).isRequired,l.default.func,l.default.node.isRequired,l.default.func,l.default.func,l.default.func,l.default.objectOf(rT.p).isRequired,l.default.string,l.default.objectOf(l.default.bool).isRequired,l.default.objectOf(l.default.arrayOf(l.default.string)).isRequired,l.default.objectOf(l.default.arrayOf(l.default.string)).isRequired,l.default.bool.isRequired,{onItemSelected:r.a,createChannelSection:r.a,moveManyChannels:r.a,upsertChannelSectionChannels:r.a,firstChannelSectionId:null});class channel_section_select_menu_trigger_ChannelSectionSelectMenuTrigger extends i.Component{constructor(e){super(e),this.state={showingModal:!1},Object(la.a)(this,["onNewSectionSelected","onNewSectionClose","onNewSectionSubmit","onRemoveFromChannelSectionSelected","renderMenu"])}shouldComponentUpdate(e,t){return this.state.showingModal!==t.showingModal||this.props.channelIds!==e.channelIds||this.props.onItemSelected!==e.onItemSelected||this.props.children!==e.children||this.props.featureChannelSections!==e.featureChannelSections||this.props.channelSections!==e.channelSections||this.props.firstChannelSectionId!==e.firstChannelSectionId||!Object(zf.a)(this.props.channelIsStarred,e.channelIsStarred,1)||!Object(zf.a)(this.props.channelSectionChannels,e.channelSectionChannels,1)||!Object(zf.a)(this.props.channelChannelSections,e.channelChannelSections,1)}onNewSectionSelected(){this.setState(()=>({showingModal:!0}))}onNewSectionSubmit({emoji:e,text:t}){const a=this.props.firstChannelSectionId;this.props.createChannelSection({emoji:e,name:t,nextChannelSectionId:a}).then(e=>{this.moveChannelsToSection(e),this.setState(()=>({showingModal:!1})),this.props.onItemSelected()}).catch(()=>{this.setState(()=>({showingModal:!1}))})}onNewSectionClose(){this.setState(()=>({showingModal:!1}))}onRemoveFromChannelSectionSelected(){this.removeFromAllChannelSections(),this.props.onItemSelected()}onItemSelected(e){this.moveChannelsToSection(e.id),this.props.onItemSelected()}getDoesSectionContainAllChannels(e){var t=this.props;const a=t.channelIds,n=t.channelSections,s=t.channelSectionChannels,r=t.channelIsStarred;if(0===a.length)return!1;const i=n[e];return!!i&&(i.type===rT.h?a.reduce((e,t)=>e&&r[t],!0):Object(Kw.a)(a,s[e]).length===a.length)}getRemoveChannelSectionChannels(){var e=this.props;const t=e.channelIds,a=e.channelSections,n=e.channelChannelSections,s=e.channelIsStarred,r={};t.forEach(e=>{(n[e]||[]).forEach(t=>{r[t]||(r[t]={channelSectionId:t,channelIds:[]}),r[t].channelIds.push(e)})});const i=t.filter(e=>s[e]);return Object(Vw.a)(Object.values(r),0===i.length?[]:Object.values(a).filter(e=>e.type===rT.h).map(e=>({channelSectionId:e.id,channelIds:i})))}getShouldShowRemoveFromChannelSection(){return Object.values(this.props.channelSections).some(e=>this.getDoesSectionContainAllChannels(e.id))}moveChannelsToSection(e){const t=[{channelSectionId:e,channelIds:this.props.channelIds}];this.props.moveManyChannels({remove:this.getRemoveChannelSectionChannels(),insert:t})}removeFromAllChannelSections(){this.props.moveManyChannels({remove:this.getRemoveChannelSectionChannels(),insert:[]})}renderMenu(e){const t=this.props.channelSections;if(!this.props.featureChannelSections)return null;const a=Object.values(t).filter(e=>e.type===rT.g||e.type===rT.h);return o.a.createElement(fn.f,s()({width:196,menuClassNames:"p-channel_sidebar__channel_section_select_menu"},e),a.map(e=>o.a.createElement(fn.b,{key:e.id,"data-qa":"channel_section_select_menu_channel_section",onSelected:()=>this.onItemSelected(e),className:d()("p-channel_sidebar__channel_section_select_menu_item",{"p-channel_sidebar__channel_section_select_menu_item--checked":this.getDoesSectionContainAllChannels(e.id)})},this.getDoesSectionContainAllChannels(e.id)?o.a.createElement(bn.b,{type:"check-small"}):null,o.a.createElement(Ho.b,{text:e.emoji,stopAnimations:!0,obeyEmojiMode:!1,emojiSize:Ho.a.SMALL,forceDisplay:!0,isEmojiInlineWithText:!0})," ",e.name)),a.length>0&&o.a.createElement(fn.d,null),o.a.createElement(fn.b,{"data-qa":"channel_section_select_menu_new_section",onSelected:this.onNewSectionSelected},mT.t("New section\u2026")),this.getShouldShowRemoveFromChannelSection()&&o.a.createElement(fn.b,{"data-qa":"channel_section_select_menu_remove_from_section",onSelected:this.onRemoveFromChannelSectionSelected},mT.t("Remove from section")))}render(){return o.a.createElement(i.Fragment,null,this.state.showingModal&&o.a.createElement(sT,{focusOnMount:!0,openedFromKeyboardShortcut:!1,onSubmit:this.onNewSectionSubmit,onClose:this.onNewSectionClose}),o.a.createElement(fn.e,{"data-qa":"channel_section_select_menu_trigger",allowanceX:12,offsetY:8,position:"bottom",renderMenu:this.renderMenu},this.props.children))}}channel_section_select_menu_trigger_ChannelSectionSelectMenuTrigger.displayName="ChannelSectionSelectMenuTrigger",channel_section_select_menu_trigger_ChannelSectionSelectMenuTrigger.defaultProps=bT;const fT={moveManyChannels:(...e)=>lT(...e),createChannelSection:(...e)=>oT(...e),upsertChannelSectionChannels:(...e)=>Object(bS.m)(...e)};var _T=Object(u.b)((e,t)=>{const a=t.channelIds,n=OS(e),s={};a.forEach(t=>{const a=Object(B.e)(e,t);s[t]=Object(q.Jb)(a)});const r={};a.forEach(t=>{r[t]=wS(e,t)});const i={};return Object.values(n).forEach(t=>{i[t.id]=jS(e,t.id)}),{channelSections:n,firstChannelSectionId:vS(e),channelIsStarred:s,channelSectionChannels:i,channelChannelSections:r,featureChannelSections:Object(m.m)(e,"feature_channel_sections")}},fT)(channel_section_select_menu_trigger_ChannelSectionSelectMenuTrigger);const gT=new x.b("classic_nav"),yT=new x.b("channel_sidebar"),OT=(l.default.string.isRequired,l.default.bool,l.default.oneOf(["channel","private","im","mpim"]).isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.object.isRequired,l.default.string.isRequired,l.default.func,{isStarred:!1,featureClassicNav:!1,shouldUseChannelSections:!1,omitSeparator:!1,isMemberOfChannel:!1,isInAnyChannelSection:!1,updateStar:r.a});class model_info_star_ModelInfoStar extends i.Component{constructor(e){super(e),Object(la.a)(this,["onClick","renderTip","renderAriaLabel"])}onClick(){var e=this.props;const t=e.channelId,a=e.isStarred;this.props.updateStar(!a,{channel:t}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_STAR"}}})}renderTip(){var e=this.props;const t=e.channelType,a=e.isStarred;if(!e.featureClassicNav)return null;if(this.props.shouldUseChannelSections)return yT.t("Select sections");switch(t){case"channel":case"private":return a?gT.t("Unstar this channel"):gT.t("Star this channel");case"im":case"mpim":return a?gT.t("Unstar this direct message"):gT.t("Star this direct message");default:return null}}renderAriaLabel(){var e=this.props;const t=e.channelType,a=e.channelName;return"channel"===t||"private"===t?gT.t("Star channel {channelName}",{channelName:a,fallbackHash:"f314f33a825d5dc3ac1683638acc464b2aae62fc",note:"A label for the button in the Channel Header to star a channel. Not visible on screen as it is only for customers using screen readers."}):"im"===t?gT.t("Star conversation with {memberName}",{memberName:a,fallbackHash:"a04b360e228e052a9853fbe7203ab22697daade3",note:"A label for the button in the Channel Header to star an IM. Not visible on screen as it is only for customers using screen readers."}):"mpim"===t?gT.t("Star conversation with {memberNames}",{memberNames:a,fallbackHash:"a04b360e228e052a9853fbe7203ab22697daade3",note:"A label for the button in the Channel Header to star an MPIM. memberNames is a comma-delimited set of names. Not visible on screen as it is only for customers using screen readers."}):void 0}render(){var e=this.props;const t=e.isStarred,a=e.omitSeparator,n=e.isMemberOfChannel,s=e.isInAnyChannelSection;if(!n)return null;const r=this.props.shouldUseChannelSections&&s||t,l=r?"star":"star-o",c=d()({"p-classic_nav__model__title__info__star":!0,"p-classic_nav__model__title__info__star--starred":r}),u=o.a.createElement(Xr.c,{tip:this.renderTip,position:"bottom",hideFromScreenReader:!0},o.a.createElement(_e.c,{className:c,onClick:this.props.shouldUseChannelSections?null:this.onClick,"aria-label":this.renderAriaLabel(),"data-qa":"channel_header__star_button","aria-pressed":r},o.a.createElement(bn.b,{type:l,size:"inherit",inline:!0})));return o.a.createElement(i.Fragment,null,this.props.shouldUseChannelSections?o.a.createElement(_T,{channelIds:[this.props.channelId]},u):u,!a&&o.a.createElement(qw,null))}}model_info_star_ModelInfoStar.displayName="ModelInfoStar",model_info_star_ModelInfoStar.defaultProps=OT;var CT=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(q.x)(e,a,{publicChannelIncludeHashSign:!1});return{channelType:Object(q.v)(a),isStarred:Object(q.Jb)(a),isMemberOfChannel:Object(q.ob)(a),isInAnyChannelSection:TS(e,t),featureClassicNav:Object(m.m)(e,"feature_classic_nav"),shouldUseChannelSections:Object(A.a)(e),clogger:Object(ie.a)({state:e}),channelName:n}},e=>({updateStar:(...t)=>e(Object(Gw.a)(...t))}))(model_info_star_ModelInfoStar),vT=a("k0G2");const ET=new x.b("classic_nav"),kT=(l.default.string.isRequired,l.default.number,l.default.bool,l.default.arrayOf(l.default.string),l.default.number,l.default.bool,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.string.isRequired,l.default.func,{memberCount:void 0,isSharedMpim:!1,pendingAndConnectedTeamIds:void 0,externalMemberCount:void 0,featureClassicNav:!1,isMembersVisible:!1,showDetails:r.a,isChannel:!1});class model_info_members_ModelInfoMembers extends i.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}onClick(){this.props.showDetails({sectionId:"members"}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_MEMBERS"}}})}onKeyDown(e){e.keyCode===vT.e&&(e.preventDefault(),this.props.showDetails({sectionId:"members",focusKey:"members"}))}getCount(){var e=this.props;const t=e.isSharedMpim,a=e.memberCount,n=Object(dt.a)(a)?Object(x.o)(a):"\u2013";return t?this.getSharedMpimCount(n):n}getSharedMpimCount(e){var t=this.props;const a=t.featureClassicNav,n=t.pendingAndConnectedTeamIds,s=t.externalMemberCount;return a?n&&n.length&&s?n.length>1?ET.rt("{totalMemberCount} ({externalMemberCount} from other organizations)",{totalMemberCount:e,externalMemberCount:s}):ET.rt("{totalMemberCount} ({externalMemberCount} from\xa0{externalTeamName})",{totalMemberCount:e,externalMemberCount:s,externalTeamName:o.a.createElement(Mb.a,{id:n[0],bold:!1})}):e:null}render(){var e=this.props;const t=e.featureClassicNav,a=e.isMembersVisible,n=e.channelName,s=e.isChannel;if(!t)return null;const r=s?ET.t("Show member list for channel {channelName}",{channelName:n,fallbackHash:"cd2bc6930e2aeee592020415692ed1dc4c9652fe",note:"A label for the button in the Channel Header to show the member list for a channel in the Flexpane. Not visible on screen as it is only for customers using screen readers."}):ET.t("Show member list for conversation with {memberNames}",{memberNames:n,fallbackHash:"cd2bc6930e2aeee592020415692ed1dc4c9652fe",note:"A label for the button in the Channel Header to show the member list for an MPIM in the Flexpane. memberNames is a comma-delimited set of names. Not visible on screen as it is only for customers using screen readers."}),l=o.a.createElement(_e.c,{className:"p-classic_nav__model__title__info__members",onClick:this.onClick,onKeyDown:this.onKeyDown,"aria-label":r,"aria-expanded":a,"data-qa":"model-title-info-member"},o.a.createElement(bn.b,{type:"user",size:"inherit",inline:!0}),"\xa0",this.getCount());return o.a.createElement(i.Fragment,null,a?l:o.a.createElement(Xr.c,{tip:ET.t("View member list"),position:"bottom",hideFromScreenReader:!0},l),o.a.createElement(qw,null))}}model_info_members_ModelInfoMembers.displayName="ModelInfoMembers",model_info_members_ModelInfoMembers.defaultProps=kT;var ST=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(vf.f)(e,t),s=Object(q.bb)(a)&&Object(q.qb)(a),r=s?Object(q.O)(e,a):null,i=s?Object(q.I)(a).filter(t=>Object(Je.tb)(Object(bi.d)(e,t))).length:void 0,o=Object(v.e)(e)[0]||"",l=Object(q.x)(e,a,{publicChannelIncludeHashSign:!1});return{memberCount:n&&n.counts&&n.counts.member_count,featureClassicNav:Object(m.m)(e,"feature_classic_nav"),isSharedMpim:s,pendingAndConnectedTeamIds:r,externalMemberCount:i,clogger:Object(ie.a)({state:e}),isMembersVisible:"members"===o,channelName:l,isChannel:Object(q.Db)(a)||Object(q.Cb)(a)}},e=>({showDetails:(...t)=>e(Object(qa.e)(...t))}))(model_info_members_ModelInfoMembers);const jT=new x.b("classic_nav"),IT=(l.default.string.isRequired,l.default.bool,l.default.number,l.default.bool,l.default.object.isRequired,l.default.string.isRequired,l.default.bool,l.default.oneOf(["channel","private","im","mpim"]).isRequired,l.default.func,{maybe:!1,pinsCount:void 0,featureClassicNav:!1,isPinsVisible:!1,showDetails:r.a});class model_info_pins_ModelInfoPins extends i.Component{constructor(e){super(e),Object(la.a)(this,["onClick","onKeyDown","renderAriaLabel"])}onClick(){this.props.showDetails({sectionId:"pins"}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_PINS"}}})}onKeyDown(e){e.keyCode===vT.e&&(e.preventDefault(),this.props.showDetails({sectionId:"pins",focusKey:"pins"}))}renderAriaLabel(){var e=this.props;const t=e.channelType,a=e.channelName;return"channel"===t||"private"===t?jT.t("Show items pinned in channel {channelName}",{channelName:a,fallbackHash:"ed68592deea9577fd06f582a1ecb11ae4bc371e8",note:"A label for the button in the Channel Header to show the pinned items Flexpane for a channel. Not visible on screen as it is only for customers using screen readers."}):"im"===t?jT.t("Show items pinned in conversation with {memberName}",{memberName:a,fallbackHash:"ed68592deea9577fd06f582a1ecb11ae4bc371e8",note:"A label for the button in the Channel Header to show the pinned items Flexpane for an IM. Not visible on screen as it is only for customers using screen readers."}):"mpim"===t?jT.t("Show items pinned in conversation with {memberNames}",{memberNames:a,fallbackHash:"ed68592deea9577fd06f582a1ecb11ae4bc371e8",note:"A label for the button in the Channel Header to show the pinned items Flexpane for an MPIM. memberNames is a comma-delimited set of names. Not visible on screen as it is only for customers using screen readers."}):void 0}render(){var e=this.props;const t=e.maybe,a=e.featureClassicNav,n=e.pinsCount,s=e.isPinsVisible;if(!a)return null;if(t&&!n)return null;const r=Object(dt.a)(n)?Object(x.o)(n):"\u2013",l=jT.t("View pinned items"),c=o.a.createElement(_e.c,{className:"p-classic_nav__model__title__info__pins",onClick:this.onClick,onKeyDown:this.onKeyDown,"aria-label":this.renderAriaLabel(),"aria-expanded":s},o.a.createElement(bn.b,{type:"thumb-tack",size:"inherit",inline:!0}),"\xa0",r);return o.a.createElement(i.Fragment,null,s?c:o.a.createElement(Xr.c,{tip:l,position:"bottom",hideFromScreenReader:!0},c),o.a.createElement(qw,null))}}model_info_pins_ModelInfoPins.displayName="ModelInfoPins",model_info_pins_ModelInfoPins.defaultProps=IT;var wT=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(v.e)(e)[0]||"",s=Object(q.x)(e,a,{publicChannelIncludeHashSign:!1});return{pinsCount:Object(q.P)(a),featureClassicNav:Object(m.m)(e,"feature_classic_nav"),clogger:Object(ie.a)({state:e}),isPinsVisible:"pins"===n,channelName:s,channelType:Object(q.v)(a)}},e=>({showDetails:(...t)=>e(Object(qa.e)(...t))}))(model_info_pins_ModelInfoPins);const TT=e=>"persistent"===Object(ha.c)(e,"platform_workflows_action_menu"),NT=(e,t)=>{const a=Object(B.e)(e,t);return Object(re.a)()&&(TT(e)||Object(bo.c)(e))&&(Object(q.Cb)(a)||Object(q.Db)(a))},AT=(e,t)=>{const a=Object(B.e)(e,t);return(Object(q.Cb)(a)||Object(q.Db)(a))&&Object(q.ob)(a)},RT=new x.b("classic_nav"),MT=(l.default.string.isRequired,l.default.number,l.default.object.isRequired,l.default.string.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.func,{channelActionsCount:void 0,isActionsSectionExpanded:!1,countIsKnown:!1,showDetails:r.a,shouldDisplay:!1}),PT=({channelActionsCount:e,channelName:t,clogger:a,countIsKnown:n,isActionsSectionExpanded:s,shouldDisplay:r,showDetails:l})=>{const c=Object(i.useCallback)(()=>{l({sectionId:"actions"}),a.track(de.EventId.CLASSIC_NAV,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.CLICK,[de.UiContextKeys.ui_component]:de.UiComponent.CHANNEL_HEADER,[de.UiContextKeys.ui_element]:de.UiElement.NAV_CHANNEL_ACTIONS}}})},[a,l]),d=Object(i.useCallback)(e=>{e.keyCode===vT.e&&(e.preventDefault(),l({sectionId:"actions",focusKey:"actions"}))},[l]);if(!r)return null;const u=n?Object(x.o)(e):"\u2013",p=RT.t("View channel actions",{fallbackHash:"b225cbd5ab14bf4bbd8e4b05e1beb652d1f7c33b"}),h=RT.t("Actions in channel {channelName}",{channelName:t,fallbackHash:"b225cbd5ab14bf4bbd8e4b05e1beb652d1f7c33b",note:"Label for the channel actions button in Channel Header. Not visible on screen as it is only for customers using screen readers."}),m=o.a.createElement(_e.c,{className:"p-classic_nav__model__title__info__actions",onClick:c,onKeyDown:d,"aria-label":h,"aria-expanded":s},o.a.createElement(bn.b,{type:"bolt",size:"inherit",inline:!0}),"\xa0",u);return o.a.createElement(i.Fragment,null,s?m:o.a.createElement(Xr.c,{tip:p,position:"bottom",hideFromScreenReader:!0},m),o.a.createElement(qw,null))};PT.displayName="ModelInfoChannelActions",PT.defaultProps=MT;var xT=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(v.e)(e)[0]||"",s=Object(q.x)(e,a,{publicChannelIncludeHashSign:!1});return{channelActionsCount:xt(e,t),channelName:s,clogger:Object(ie.a)({state:e}),countIsKnown:Lt(e,t),isActionsSectionExpanded:"actions"===n,shouldDisplay:NT(e,t)}},e=>({showDetails:(...t)=>e(Object(qa.e)(...t))}))(PT),LT=a("hCI9"),FT=a("+z37");a("4tN7");const DT=250,BT=new x.b("classic_nav"),UT=(l.default.string.isRequired,l.default.string,l.default.oneOfType([l.default.string,l.default.object]),l.default.bool,l.default.func,l.default.func,{currentRawTopic:void 0,currentFormattedTopic:void 0,featureClassicNav:!1,submitChannelTopic:r.a,openModal:r.a});class channel_topic_dialog_ChannelTopicDialog extends i.Component{constructor(e){super(e),this.onSubmit=this.onSubmit.bind(this),this.renderInput=this.renderInput.bind(this),this.input=o.a.createRef()}onSubmit(){const e=this.input.current&&this.input.current.getWrappedInstance().value();null!=e&&e!==this.props.currentRawTopic&&this.props.submitChannelTopic({channelId:this.props.channelId,topic:e}).catch(e=>{const t=Object(q.u)(Object(se.a)(e,"data.error"));this.props.openModal({element:o.a.createElement(bs.a,{title:BT.t("Oooops!",{ns:"channels"})},t)})})}renderInput({modules:e,isOpen:t}){const a=this.props.currentFormattedTopic;return o.a.createElement(LT.b,{initialText:a,focusOnMount:!0,minLines:3,modules:e,isAutocompleteOpen:t,maxLength:DT,ariaLabel:BT.t("Edit channel topic"),ref:this.input,useLegacyLists:!0})}render(){return this.props.featureClassicNav?o.a.createElement(ya.a,s()({className:"p-channel_topic_dialog",title:BT.t("Edit channel topic"),goButtonText:BT.t("Set topic"),onGo:this.onSubmit},this.props),o.a.createElement(en.a,{renderInput:this.renderInput,completeOnMembers:!0,completeOnChannels:!0,completeOnEmoji:!0,shouldCompleteOnTab:!1})):null}}channel_topic_dialog_ChannelTopicDialog.displayName="ChannelTopicDialog",channel_topic_dialog_ChannelTopicDialog.defaultProps=UT;var qT=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=a&&a.topic&&a.topic.value;return{currentRawTopic:n,currentFormattedTopic:n&&Object(FT.a)(e,{text:n}),featureClassicNav:Object(m.m)(e,"feature_classic_nav")}},e=>({submitChannelTopic:(...t)=>e(Object(nw.H)(...t)),openModal:(...t)=>e(Object(ga.e)(...t))}))(channel_topic_dialog_ChannelTopicDialog);const HT=new x.b("classic_nav"),WT=(l.default.string.isRequired,l.default.string,l.default.bool,l.default.bool,l.default.object.isRequired,l.default.bool.isRequired,l.default.func,l.default.bool,l.default.func,l.default.func,{topic:void 0,readOnly:!1,featureClassicNav:!1,openModal:r.a,hasKeyboardFocusWithin:!1,onFocus:r.a,onBlur:r.a});class model_info_topic_ModelInfoTopic extends i.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.containerRef=o.a.createRef()}onClick(e){e.target&&"A"===e.target.tagName||this.props.readOnly||this.containerRef.current&&e.target&&!this.containerRef.current.contains(e.target)||(this.props.openModal({element:o.a.createElement(qT,{channelId:this.props.channelId})}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_TOPIC"}}}))}render(){var e=this.props;const t=e.topic,a=e.readOnly,n=e.featureClassicNav,s=e.hasKeyboardFocusWithin,r=e.isIAP1Enabled;if(!n)return null;if(a&&!t)return null;const l=t?o.a.createElement(eg.a,{text:t,className:"p-classic_nav__model__title__info__topic__content",emojiSize:Ho.a.SMALL,noJumbomoji:!0,noHighlights:!0}):!r&&o.a.createElement("div",{className:"p-classic_nav__model__title__info__topic__content"},o.a.createElement(bn.b,{type:"pencil",size:"inherit",inline:!0}),"\xa0",HT.t("Add a topic")),c=a?null:o.a.createElement(_e.c,{"aria-label":HT.t("Edit channel topic",{fallbackHash:"5301648dcf6b53cefc9ed52999aaa92d4603cae0"}),className:"p-classic_nav__model__title__info__topic__edit"},HT.t("Edit")),u=d()({"p-classic_nav__model__title__info__item":!0,"p-classic_nav__model__title__info__topic":!0,"p-classic_nav__model__title__info__topic--empty":!t,"p-classic_nav__model__title__info__topic--readonly":a,"p-classic_nav__model__title__info__topic--focus-within":s});return o.a.createElement(i.Fragment,null,o.a.createElement("div",{role:"presentation",ref:this.containerRef,className:u,onClick:this.onClick,onFocus:this.props.onFocus,onBlur:this.props.onBlur},o.a.createElement("div",{className:"p-classic_nav__model__title__info__topic__text"},l),c),o.a.createElement(qw,null))}}model_info_topic_ModelInfoTopic.displayName="ModelInfoTopic",model_info_topic_ModelInfoTopic.defaultProps=WT;var GT=Object(bk.a)(Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t);return{topic:a&&a.topic&&a.topic.value,readOnly:!Object(te.w)(e,t).ok,featureClassicNav:Object(m.m)(e,"feature_classic_nav"),clogger:Object(ie.a)({state:e}),isIAP1Enabled:Object(bo.c)(e)}},e=>({openModal:(...t)=>e(Object(ga.e)(...t))}))(model_info_topic_ModelInfoTopic)),KT=a("RDbB"),VT=a("yY9y");const zT=new x.b("presence"),$T=(l.default.string.isRequired,l.default.string,l.default.bool,{memberId:void 0,featureClassicNav:!1});class model_info_presence_ModelInfoPresence extends i.Component{constructor(e){super(e),this.getPresenceDescription=this.getPresenceDescription.bind(this)}getPresenceDescription(e){return this.props.featureClassicNav?e.isDnd?zT.t("notifications snoozed"):e.isActive?zT.t("active"):zT.t("away"):null}render(){const e=this.props.memberId;return e?o.a.createElement(i.Fragment,null,o.a.createElement(KT.a,{memberId:e},e=>o.a.createElement("div",{className:"p-classic_nav__model__title__info__presence"},o.a.createElement(VT.a,s()({},e,{className:"p-classic_nav__model__title__info__presence__icon"})),this.getPresenceDescription(e))),o.a.createElement(qw,null)):null}}model_info_presence_ModelInfoPresence.displayName="ModelInfoPresence",model_info_presence_ModelInfoPresence.defaultProps=$T;var YT=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t);return{memberId:Object(q.H)(a),featureClassicNav:Object(m.m)(e,"feature_classic_nav")}})(model_info_presence_ModelInfoPresence);l.default.string.isRequired,l.default.string;const QT={secondaryName:void 0},XT=({secondaryName:e})=>e?o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"p-classic_nav__model__title__info__secondary_name"},e),o.a.createElement(qw,null)):null;XT.displayName="ModelInfoSecondaryName",XT.defaultProps=QT;var JT=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(bi.d)(e,Object(q.H)(a));return{secondaryName:Object(Je.M)(e,n)}})(XT);const ZT=new x.b("classic_nav");l.default.string.isRequired,l.default.bool,l.default.arrayOf(l.default.string),l.default.bool,l.default.bool,l.default.string.isRequired,l.default.func.isRequired;class model_info_shared_teams_ModelInfoSharedTeams extends i.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){this.props.showDetails({sectionId:"info"})}render(){var e=this.props;const t=e.isShared,a=e.pendingAndConnectedTeamIds,n=e.featureClassicNav,s=e.isInfoOpen,r=e.channelName;if(!n)return null;if(!t)return null;const l=Object(x.k)(a.map(e=>o.a.createElement(Mb.a,{id:e}))),c=ZT.rt("Shared with {teamNames}",{teamNames:l}),d=ZT.t("View the organizations {channelName} is shared with",{channelName:r,fallbackHash:"fa4fe5f6ebd939a3f0478bc80b4bcc1890ef936e"}),u=o.a.createElement(_e.c,{className:"p-classic_nav__model__title__info__shared_teams",onClick:this.onClick,"aria-expanded":s},c);return o.a.createElement(i.Fragment,null,s?u:o.a.createElement(Xr.c,{tip:d,position:"bottom"},u),o.a.createElement(qw,null))}}model_info_shared_teams_ModelInfoSharedTeams.displayName="ModelInfoSharedTeams",model_info_shared_teams_ModelInfoSharedTeams.defaultProps={isShared:!1,pendingAndConnectedTeamIds:[],isInfoOpen:!1,featureClassicNav:!1};var eN=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(v.e)(e)[0]||"",s=Object(q.x)(e,a,{publicChannelIncludeHashSign:!1});return{isShared:Object(q.bb)(a),pendingAndConnectedTeamIds:Object(q.O)(e,a),featureClassicNav:Object(m.m)(e,"feature_classic_nav"),isInfoOpen:"info"===n,channelName:s}},e=>({showDetails:(...t)=>e(Object(qa.e)(...t))}))(model_info_shared_teams_ModelInfoSharedTeams);l.default.string.isRequired,l.default.bool,l.default.string;const tN={isExternal:!1,memberTeamId:void 0},aN=({isExternal:e,memberTeamId:t})=>e&&t?o.a.createElement(i.Fragment,null,o.a.createElement(Mb.a,{id:t,bold:!1}),o.a.createElement(qw,null)):null;aN.displayName="ModelInfoTeamName",aN.defaultProps=tN;var nN=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(q.H)(a),s=Object(bi.d)(e,n);return{isExternal:Object(Je.tb)(s),memberTeamId:Object(Je.P)(s)}})(aN);const sN={channel:["star","members","pins","actions","sharedTeams","topic"],private:["star","members","pins","actions","sharedTeams","topic"],mpim:["star","members","pinsMaybe"],im:["star","presence","secondaryName","teamName","pinsMaybe"]},rN=(l.default.string.isRequired,l.default.oneOf(["channel","private","im","mpim"]),l.default.bool,{channelType:void 0,showTabs:!1}),iN=({channelId:e,channelType:t,showTabs:a})=>{if(!t)return null;const n=a&&o.a.createElement(Ww,{channelId:e,key:"tabs"}),s=sN[t].map(t=>{switch(t){case"star":return o.a.createElement(CT,{channelId:e,key:"star"});case"members":return o.a.createElement(ST,{channelId:e,key:"members"});case"pins":return o.a.createElement(wT,{channelId:e,key:"pins"});case"actions":return o.a.createElement(xT,{channelId:e,key:"actions"});case"presence":return o.a.createElement(YT,{channelId:e,key:"presence"});case"secondaryName":return o.a.createElement(JT,{channelId:e,key:"secondaryName"});case"pinsMaybe":return o.a.createElement(wT,{maybe:!0,channelId:e,key:"pinsMaybe"});case"sharedTeams":return o.a.createElement(eN,{channelId:e,key:"sharedTeams"});case"teamName":return o.a.createElement(nN,{channelId:e,key:"teamName"});case"topic":return o.a.createElement(GT,{channelId:e,key:"topic"});default:return null}}),r=d()("p-classic_nav__model__title__info","p-classic_nav__no_drag",{"p-classic_nav__model__title__info--tabs":a});return o.a.createElement("div",{"data-qa":"channel_header__title__info",className:r},n,s)};iN.displayName="ModelInfo",iN.defaultProps=rN;var oN=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t);return{channelType:Object(q.v)(a),showTabs:Object(R.e)(e)}})(iN),lN=a("/m+M"),cN=a("cMxN");const dN=new x.b("channel_action_menu"),uN=({closeModal:e,setClickedThrough:t,launchWorkflowBuilder:a,channelId:n})=>{const s=Object(lN.a)().featureChannelActionsClient,r=Object(i.useCallback)(()=>{a({subPath:`workflow/create/channel_action/${n}`}),t(),e()},[e,t,n,a]);return s?o.a.createElement(Nm.a,{onClose:e,title:dN.t("Add a new action"),submitButtonText:dN.t("Create Workflow"),onSubmit:r,showCancelButton:!1,"data-qa":"add_channel_action_modal"},o.a.createElement("p",null,dN.t("You can automate everyday actions \u2014 like sending routine messages or gathering info from people \u2014 with Workflow Builder. Create workflows and add them to a channel for everyone to use."))):null};uN.displayName="BaseAddChannelActionModal";const pN=Object(u.b)(void 0,e=>({closeModal:()=>e(Object(ga.a)()),launchWorkflowBuilder:({subPath:t})=>e(Object(bj.a)({source:"add_channel_action__modal",subPath:t})),setClickedThrough:()=>e(Object(Ka.f)({pref:"workflow_builder_intro_modal_clicked_through",value:!0}))}))(uN);const hN=e=>o.a.createElement(pN,{channelId:e});hN.displayName="createAddChannelActionModal";const mN=Object(mt.b)("add channel action with workflow builder",(e,t,a)=>{const n=t();Object(Xj.a)(n)&&Object(m.m)(n,"feature_builder_can_access")&&(!0!==Object(ba.k)(n,"workflow_builder_intro_modal_clicked_through")?e(Object(ga.e)({element:hN(a)})):e(Object(bj.a)({source:"add_channel_action__seen_modal",subPath:`workflow/create/channel_action/${a}`})))});mN.meta={name:"addChannelActionWithWorkflowBuilder",key:"actionsAddChannelActionWithWorkflowBuilderAddChannelActionWithWorkflowBuilder",description:"add channel action with workflow builder"},mN.propTypes=l.default.string.isRequired;var bN=mN,fN=a("Pb16");const _N=new x.b("channel_action_menu"),gN=(l.default.string.isRequired,e=>{let t=e.name,a=fp()(e,["name"]);const n=Object(lN.a)().featureChannelActionsClient;return o.a.createElement(Ba.b,a,o.a.createElement("span",null,n?_N.rt("You used the action <b>{name}</b>",{name:t}):""))});gN.displayName="AppActionSuccessToast";const yN=e=>o.a.createElement(gN,e);yN.displayName="appActionSuccessToastFactory";var ON=a("DVJN");const CN=Object(mt.b)("Runs a channel action",(e,t,{channelId:a,actionId:n}={})=>{const s=t(),r=Object(Ot.a)({state:s,label:"PLATFORM-CHANNEL-ACTIONS"}),i=Rt(s,n);if(!i)return r.error(`Unable to run unknown channel action with ID ${n} for channel ${a}`),Promise.resolve();const o={actionId:n,appId:i.appId,channelId:a,type:ON.a.channelAction};return e(Object(jt.c)(o)).tap(()=>{r.info(`Successfully ran channel action ${n} for channel ${a}`);const t=yN({name:i.name});e(Object(_a.c)({element:t}))}).catch(t=>{r.error(`Failed to run channel action ${n} for channel ${a}`,t);const s=Object(fN.a)({onRetry:()=>e(CN({channelId:a,actionId:n}))});e(Object(_a.c)({element:s}))})});CN.meta={name:"runChannelAction",key:"channelActionsStoreActionsRunChannelAction",description:"Runs a channel action"},CN.propTypes={actionId:l.default.string.isRequired,channelId:l.default.string.isRequired};a("fYpC");const vN=e=>{let t=e.action,a=e.app,n=e.channelId,r=e.isOffline,l=e.onSelected,c=e.runChannelAction,d=e.index,u=e.clogger,p=fp()(e,["action","app","channelId","isOffline","onSelected","runChannelAction","index","clogger"]);const h=Object(se.a)(t,"app.icons.image_64",Object(xg.b)(a,64)),m=o.a.createElement(Xk.a,{alt:name,className:"p-channel_action_menu_item__icon",height:20,src:h,width:20}),b=Object(i.useCallback)(()=>{c({actionId:t.id,channelId:n}),((e,{index:t,appId:a,actionId:n})=>e.track(de.EventId.CHANNEL_ACTION_MENU,{app_id:a,action_id:n,contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.CLICK,[de.UiContextKeys.ui_component]:de.UiComponent.CHANNEL_ACTION,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.element_type]:de.ElementType.DROPDOWN,[de.UiPropertiesKeys.element_name]:"action_item",[de.UiPropertiesKeys.element_index]:t}}}}))(u,{index:d,actionId:t.id,appId:t.appId}),l(t)},[t,n,u,d,l,c]);return Object(i.useEffect)(()=>{((e,{index:t,appId:a,actionId:n})=>e.track(de.EventId.CHANNEL_ACTION_MENU,{app_id:a,action_id:n,contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.IMPRESSION,[de.UiContextKeys.ui_component]:de.UiComponent.CHANNEL_ACTION,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.element_type]:de.ElementType.DROPDOWN,[de.UiPropertiesKeys.element_name]:"action_item",[de.UiPropertiesKeys.element_index]:t}}}}))(u,{index:d,actionId:t.id,appId:t.appId})},[t.appId,t.id,u,d]),o.a.createElement(fn.b,s()({},p,{className:"p-channel_action_menu_item",onSelected:b,icon:m,"data-qa":"channel_action_menu_item",showOfflineIcon:r,disabled:r}),t.name)};vN.displayName="ChannelActionMenuItem",vN.defaultProps={app:null,onSelected:r.a};const EN=Object(u.b)((e,{action:{appId:t}})=>({app:Object(yn.e)(e,t)||null,isOffline:!Object(pa.c)(e),clogger:Object(ie.a)({state:e})}),e=>({runChannelAction:t=>e(CN(t))}))(vN);var kN=Object(gj.b)(EN);const SN=new x.b("channel_action_menu"),jN={small:160,medium:200,large:240},IN=e=>{let t=e.channelId,a=e.channelActionCount,n=e.channelActions,r=e.onSelected,l=e.addChannelActionWithWorkflowBuilder,c=e.shouldShowCreateButton,d=e.clogger,u=fp()(e,["channelId","channelActionCount","channelActions","onSelected","addChannelActionWithWorkflowBuilder","shouldShowCreateButton","clogger"]);const p=Object(lN.a)().featureChannelActionsClient,h=Object(a_.a)(()=>new Array(a).fill(null).map((e,t)=>o.a.createElement(fn.b,{"data-qa":"channel_action_menu__placeholder_item",key:t,disabled:!0},o.a.createElement(lf.b,{size:"random",sizes:jN}))),[a]),m=Object(i.useMemo)(()=>n&&0!==n.length?n.map((e,a)=>o.a.createElement(kN,{key:e.id,action:e,channelId:t,onSelected:r,index:a})):h,[h,n,t,r]),b=Object(i.useCallback)(()=>{d.track(de.EventId.CHANNEL_ACTION_MENU,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.CLICK,[de.UiContextKeys.ui_component]:de.UiComponent.CHANNEL_ACTION,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.element_type]:de.ElementType.LINK,[de.UiPropertiesKeys.element_name]:"create_action"}}}}),l(t)},[l,t,d]);return o.a.createElement(fn.f,s()({},u,{"data-qa":"channel_action_menu"}),m,c&&o.a.createElement(i.Fragment,null,o.a.createElement(fn.d,null),o.a.createElement(fn.b,{onSelected:b,"data-qa":"channel_action_menu__create_action_cta"},p?SN.t("Add a new action..."):"")))};IN.displayName="ChannelActionMenu",IN.defaultProps={channelActions:[],onSelected:r.a};var wN=Object(u.b)((e,{channelId:t})=>({channelId:t,channelActionCount:xt(e,t),channelActions:Ft(e,t),shouldShowCreateButton:Object(Xj.a)(e),clogger:Object(ie.a)({state:e})}),e=>({addChannelActionWithWorkflowBuilder:t=>e(bN(t))}))(IN);const TN=new x.b("channel_action_menu"),NN=(l.default.string,l.default.node.isRequired,l.default.number,l.default.number,l.default.string,l.default.bool,e=>{let t=e.children,a=e.channelId,n=e.featureChannelActionsClient,r=e.offsetX,i=e.offsetY,l=e.position,c=fp()(e,["children","channelId","featureChannelActionsClient","offsetX","offsetY","position"]);return n?o.a.createElement(cN.b,s()({},c,{ariaHasPopup:!0,renderPopover:e=>o.a.createElement(cN.a,s()({allowanceX:15,allowanceY:15,position:l,offsetX:r,offsetY:i,ariaLabel:TN.t("App Actions"),ariaRole:"dialog"},e),o.a.createElement(wN,{channelId:a,onTriggerClose:e.onClose,onMenuItemSelected:e.onClose}))}),t):null});NN.displayName="ChannelActionMenuTrigger",NN.defaultProps={channelId:null,offsetX:0,offsetY:0,position:"bottom-right",featureChannelActionsClient:!1};var AN=Object(fs.a)("feature_channel_actions_client")(NN);const RN=new x.b("classic_nav"),MN=(l.default.string.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.number,l.default.bool.isRequired,l.default.object.isRequired,({teamId:e,channelId:t,channelName:a,channelActionCount:n,shouldDisplay:s,clogger:r})=>{var l=Object(lN.a)();const c=l.featureClassicNav,d=l.featureChannelActionsClient,u=c&&d&&s,p=Object(i.useCallback)(()=>(e=>e.track(de.EventId.CLASSIC_NAV,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.CLICK,[de.UiContextKeys.ui_component]:de.UiComponent.CHANNEL_HEADER,[de.UiContextKeys.ui_element]:de.UiElement.NAV_CHANNEL_ACTIONS}}}))(r),[r]),h=Object(i.useCallback)(()=>(e=>e.track(de.EventId.CHANNEL_ACTION_MENU,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.HOVER,[de.UiContextKeys.ui_component]:de.UiComponent.CHANNEL_ACTION,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.element_type]:de.ElementType.ICON,[de.UiPropertiesKeys.element_name]:"action_icon"}}}}))(r),[r]);if(Object(i.useEffect)(()=>{s&&Nt(e,t)},[e,t,n,s]),Object(i.useEffect)(()=>{u&&(e=>e.track(de.EventId.CHANNEL_ACTION_MENU,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.IMPRESSION,[de.UiContextKeys.ui_component]:de.UiComponent.CHANNEL_ACTION,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.element_type]:de.ElementType.ICON,[de.UiPropertiesKeys.element_name]:"action_icon"}}}}))(r)},[r,u]),!u)return null;const m=RN.t("Actions in this channel"),b=d?RN.t("Actions in channel {channelName}",{channelName:a,fallbackHash:"b225cbd5ab14bf4bbd8e4b05e1beb652d1f7c33b",note:"Label for the channel actions button in Channel Header. Not visible on screen as it is only for customers using screen readers."}):"";return o.a.createElement(AN,{channelId:t,onClick:p},o.a.createElement(Xr.c,{position:"bottom",tip:m,onMouseEnter:h,hideFromScreenReader:!0},o.a.createElement(_e.c,{className:"p-classic_nav__model__button","aria-label":b,"data-qa":"channel_action_button"},o.a.createElement(bn.b,{type:"bolt",className:"p-classic_nav__model__button__icon"}))))});MN.displayName="ChannelActionButton",MN.defaultProps={channelActionCount:null};var PN=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=xt(e,t),s=((e,t)=>{const a=Object(B.e)(e,t),n=xt(e,t);return Object(re.a)()&&!TT(e)&&(Object(q.Cb)(a)||Object(q.Db)(a))&&Object(q.ob)(a)&&n>0})(e,t),r=Object(q.x)(e,a,{publicChannelIncludeHashSign:!1});return{shouldDisplay:s,channelActionCount:n,teamId:Object(h.b)(e),clogger:Object(ie.a)({state:e}),channelName:r}})(MN),xN=a("NB3s"),LN=a("2olY"),FN=a("jzln");var DN=e=>"treatment"===Object(ha.c)(e,"calls_4902")&&(Object(re.a)()||Object(FN.a)());a("XcDb");const BN=new x.b("calls"),UN=(l.default.bool.isRequired,l.default.object.isRequired,l.default.object.isRequired,({featureCallButtonCoachEnabled:e,clogger:t,team:a})=>{var n=Object(i.useState)(!1),s=at()(n,2);const r=s[0],l=s[1],c=Object(i.useCallback)(()=>{l(!1)},[]),d=Object(i.useCallback)(()=>{r||t.track(de.EventId.CALLS_UPGRADE_PROMPT_GROUP_CALLS,{contexts:{ui_context:{[de.UiContextKeys.step]:de.UiStep.CALLS_BUTTON_COACHMARK_OPEN,[de.UiContextKeys.action]:de.UiAction.IMPRESSION,[de.UiContextKeys.entry_point]:"calls-button-coachmark"}}}),l(!r)},[t,r]),u=Object(i.useCallback)(()=>{t.track(de.EventId.CALLS_UPGRADE_PROMPT_GROUP_CALLS,{contexts:{ui_context:{[de.UiContextKeys.step]:de.UiStep.CALLS_BUTTON_COACHMARK_LEARN_MORE,[de.UiContextKeys.action]:de.UiAction.CLICK,[de.UiContextKeys.is_primary_cta]:!0,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.element_type]:de.ElementType.LINK,[de.UiPropertiesKeys.element_name]:"calls_button_learn_more_link"}}}}),Object(xe.P)(a,Object(gr.k)({entryPoint:"calls-button-coachmark"}))},[t,a]);if(!e)return null;const p=o.a.createElement(Ya.a,{isOpen:r,closeCoachmark:c,centerOnArrow:!0,orientation:"bottom",coachmarkClassNames:"p-classic_nav__call-button-coachmark"},o.a.createElement("h3",{className:"margin_bottom_100"},o.a.createElement(bn.b,{type:"slack"})," ",BN.t("Slack Standard plan feature")),o.a.createElement("div",{className:"display_flex"},o.a.createElement(Xk.a,{alt:BN.t("Group calls image"),src:"/img/calls/calls-group-coachmark-2x.png",height:"151",width:"189",renderPending:()=>o.a.createElement("div",null,o.a.createElement(Kt.a,{color:"blue"}))}),o.a.createElement("div",{className:"display_flex flex_direction_column margin_left_100"},o.a.createElement("h2",{className:"margin_bottom_50"},BN.t("Group calls")),o.a.createElement("p",null,BN.rt("15-person video calls let you host daily stand-ups, share docs, and check in with team members all over the world. <a>Learn more about paid plans</a>",{fallbackHash:"baba8ad6e505593640eb65e5ae5181245af628bb"},({key:e,text:t})=>o.a.createElement("a",{key:e,href:"#",onClick:u,"data-qa":"learn_more_link"},t))))));return o.a.createElement(sn.b,{coachmarkElement:p,orientation:"bottom"},o.a.createElement(_e.c,{className:"p-classic_nav__model__button","aria-label":"Group calls","data-qa":"channel_header_calls_button",onClick:d},o.a.createElement(bn.b,{type:"phone",className:"p-classic_nav__model__button__icon"})))});UN.displayName="CallButtonCoachmark",UN.defaultProps={};var qN=Object(u.b)(e=>({featureCallButtonCoachEnabled:DN(e),clogger:Object(ie.a)({state:e}),team:Object(Se.d)(e)}),null)(UN),HN=a("rGr5"),WN=a("ENxx");const GN=100,KN=(l.default.string.isRequired,l.default.string,l.default.string,l.default.bool,l.default.bool,l.default.object.isRequired,l.default.number.isRequired,l.default.bool.isRequired,l.default.object,l.default.string,l.default.bool,l.default.bool.isRequired,l.default.bool,l.default.bool,l.default.func,{tooltip:void 0,tooltipContext:void 0,isVisible:!0,isDisabled:!1,callConfirmationStrings:null,startCall:r.a,shouldShowCoachmark:!1,memberPhoneNumber:void 0,isCallMenuEnabled:!1,isInChannel:!1});class call_button_CallButton extends i.Component{constructor(e){super(e),Object(la.a)(this,["onClick","startCall","closeConfirmationModal"]),this.state={showConfirmation:!1}}onClick({appId:e}){this.props.isDisabled||(this.props.memberCount>=GN?this.setState(()=>({showConfirmation:!0})):this.startCall({appId:e}))}closeConfirmationModal(){this.setState(()=>({showConfirmation:!1}))}startCall({appId:e}){this.props.startCall({appId:e}),this.closeConfirmationModal(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_CALL"}}})}maybeRenderConfirmationModal(){const e=this.props.callConfirmationStrings;return this.state.showConfirmation?o.a.createElement(xN.a,{closeModal:this.closeConfirmationModal,isOpen:this.state.showConfirmation,centered:!0},o.a.createElement(xN.h,null,o.a.createElement(xN.j,{title:e.title})),o.a.createElement(xN.d,null,o.a.createElement(xN.e,null,o.a.createElement("p",null,e.description))),o.a.createElement(xN.f,null,o.a.createElement(xN.g,null,o.a.createElement(xN.c,{type:"outline",onClick:this.closeConfirmationModal},e.cancel),o.a.createElement(_e.d,{type:"primary",onClick:this.startCall},e.confirm)))):null}render(){var e=this.props;const t=e.tooltip,a=e.tooltipContext,n=e.isVisible,s=e.isDisabled,r=e.featurePhoneIntegration,l=e.isCoachmarkExperimentEnabled,c=e.shouldShowCoachmark,u=e.isCallMenuEnabled;if(!n)return null;const p=d()({"p-classic_nav__model__button":!0,"p-classic_nav__model__button--disabled":s}),h=r?o.a.createElement("div",null,o.a.createElement("div",null,t),!s&&o.a.createElement("div",{className:"p-classic_nav__model__button--tooltip"},a)):t,m=o.a.createElement(Xr.c,{tip:h,position:"bottom"},o.a.createElement(_e.c,{onClick:u?null:this.onClick,className:p,"aria-label":t,"aria-disabled":s,"data-qa":"channel_header_calls_button"},o.a.createElement("div",{className:"display_flex"},o.a.createElement(bn.b,{type:"phone",className:"p-classic_nav__model__button__icon"}))));let b;return b=c&&l?o.a.createElement(qN,null):u&&!s?o.a.createElement(HN.a,{isInChannel:this.props.isInChannel,memberPhoneNumber:this.props.memberPhoneNumber,onMenuItemSelected:this.onClick},m):m,o.a.createElement(i.Fragment,null,b,this.maybeRenderConfirmationModal())}}call_button_CallButton.displayName="CallButton",call_button_CallButton.defaultProps=KN;var VN=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(vf.f)(e,a.id),s=Object(se.a)(n,"counts.member_count")||0,r=Object(q.H)(a),i=Object(bi.d)(e,r),o=Object(Je.D)(i),l=Object(q.Z)(a),c=Object(WN.d)(e,l),d=Object(LN.b)(e);return{memberCount:s,tooltip:Object(Nw.c)(e,a),tooltipContext:Object(Nw.d)(e,a,o),isVisible:Object(Nw.f)(e,a),isDisabled:Object(Nw.e)(e,a),clogger:Object(ie.a)({state:e}),callConfirmationStrings:Object(Nw.b)(s),shouldShowCoachmark:Object(Nw.h)(e,a),isCoachmarkExperimentEnabled:DN(e),featurePhoneIntegration:d,memberPhoneNumber:o,isCallMenuEnabled:Object(WN.e)(d,c,o),isInChannel:l}},e=>({startCall:(...t)=>{e(Object(QI.d)(...t))}}))(call_button_CallButton);const zN=new x.b("classic_nav"),$N=(l.default.string.isRequired,l.default.oneOf(["channel","private","im","mpim"]).isRequired,l.default.bool,l.default.string,l.default.bool,l.default.object.isRequired,l.default.string.isRequired,l.default.func,l.default.func,{isActive:!1,lastChannelDetailsSection:null,featureClassicNav:!1,showDetails:r.a,closeFlexpane:r.a});class details_button_DetailsButton extends i.Component{constructor(e){super(e),Object(la.a)(this,["onClick","onKeyDown","renderTip","renderAriaLabel"])}onClick(){this.props.isActive?this.props.closeFlexpane():this.props.showDetails({sectionId:this.props.lastChannelDetailsSection||"info"}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_DETAILS"}}})}onKeyDown(e){if(e.keyCode===vT.e)if(e.preventDefault(),this.props.isActive)this.props.closeFlexpane();else{const e=this.props.lastChannelDetailsSection||"info";this.props.showDetails({sectionId:e,focusKey:e})}}renderTip(){var e=this.props;const t=e.channelType,a=e.isActive,n="channel"===t||"private"===t;return e.featureClassicNav?n&&a?zN.t("Hide channel details"):n&&!a?zN.t("View channel details"):!n&&a?zN.t("Hide conversation details"):n||a?null:zN.t("View conversation details"):null}renderAriaLabel(){var e=this.props;const t=e.channelType,a=e.channelName;return"channel"===t||"private"===t?zN.t("Show details for channel {channelName}",{channelName:a,fallbackHash:"f342e3d5c6b2ef68fd26370af67b8f6725a1ca43",fallbackHashNs:"client",note:"A label for the button in the Channel Header to show the details Flexpane for a channel. Not visible on screen as it is only for customers using screen readers."}):"im"===t?zN.t("Show details for conversation with {memberName}",{memberName:a,fallbackHash:"d98f3774273f4ddf16d4c19acfc148750dbadbea",fallbackHashNs:"client",note:"A label for the button in the Channel Header to show the details Flexpane for an IM. Not visible on screen as it is only for customers using screen readers."}):"mpim"===t?zN.t("Show details for conversation with {memberNames}",{memberNames:a,fallbackHash:"d98f3774273f4ddf16d4c19acfc148750dbadbea",fallbackHashNs:"client",note:"A label for the button in the Channel Header to show the details Flexpane for an MPIM. memberNames is a comma-delimited set of names. Not visible on screen as it is only for customers using screen readers."}):void 0}render(){const e=this.props.isActive,t=d()({"p-classic_nav__model__button":!0,"p-classic_nav__model__button--active":e});return o.a.createElement(Xr.c,{position:"bottom",tip:this.renderTip(),delay:Xr.a,hideFromScreenReader:!0},o.a.createElement(_e.c,{className:t,onClick:this.onClick,onKeyDown:this.onKeyDown,"aria-label":this.renderAriaLabel(),"aria-expanded":e},o.a.createElement(bn.b,{type:"info-circle",className:"p-classic_nav__model__button__icon"})))}}details_button_DetailsButton.displayName="DetailsButton",details_button_DetailsButton.defaultProps=$N;var YN=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(q.x)(e,a,{publicChannelIncludeHashSign:!1});return{channelType:Object(q.v)(a),isActive:"details"===Object(v.j)(e),lastChannelDetailsSection:Object(v.b)(e),channelName:n,featureClassicNav:Object(m.m)(e,"feature_classic_nav"),clogger:Object(ie.a)({state:e})}},e=>({showDetails:(...t)=>e(Object(qa.e)(...t)),closeFlexpane:(...t)=>e(Object(qa.a)(...t))}))(details_button_DetailsButton),QN=a("8Mhq"),XN=a("u2vH"),JN=a("EOYu"),ZN=a("tBeP");function eA(e,t){const a=Object(B.e)(e,t);if(!e||!a)return null;const n=Object(q.H)(a),s=Object(bi.d)(e,n),r=Object(Je.q)(s),i=Object(bi.b)(e),o=Object(Se.d)(e),l=Object(JN.c)(e,{serviceId:r,memberId:n});if(Object(ee.d)(l)||!Object(ee.b)(l))return null;const c=Object(XN.j)(l),d=Object(XN.s)(l),u=Object(XN.B)(l),p=Object(XN.k)(l),h=Object(XN.p)(l),b="slack"===d,f=c!==o.id,_=!u||f||Object(Je.Gb)(i),g=!_,y=!_,O=Object(m.m)(e,"feature_all_dm_mute_bots"),C=Object(XN.L)(e,l),v=!!p,E=Object(XN.K)(e,l),k=!!h,S=!k&&b;return Object(Eb.a)({addApp:g,viewFiles:y,featureAllDmMuteBots:O,settings:C,homepage:v,viewInAppDirectory:E,support:k,slackSupport:S},e=>!!e)}a("CDdZ");const tA=new x.b("app_items"),aA=(l.default.string.isRequired,l.default.object.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.bool.isRequired,l.default.object.isRequired,l.default.string.isRequired,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.object,{onMenuItemSelected:r.a,openAppManagementModal:r.a,openInviteMemberToChannelDialog:r.a,muteChannelById:r.a,unmuteChannelById:r.a,openModal:r.a,showFileList:r.a,actions:void 0,featureClassicNav:!1});class app_menu_AppMenu extends i.Component{constructor(e){super(e),this.getItems=this.getItems.bind(this),this.clogClick=this.clogClick.bind(this)}getItems(){var e=this.props;const t=e.teamUrl,a=e.appProfile,n=e.memberId,r=e.botId,i=e.channelId,l=e.isMuted,c=e.clogger,d=e.featureClassicNav,u=e.actions,p=e.onMenuItemSelected,h=e.settingsUrl;if(!u||!d)return[];const m=Object(XN.l)(a),b=Object(XN.s)(a),f=Object(XN.k)(a),_=Object(XN.p)(a);return[{label:tA.t("Add this app to a channel\u2026"),show:u.addApp,key:"addApp",click:()=>this.props.openInviteMemberToChannelDialog({memberId:n}),dataQa:"app_menu_add_app_to_channel"},{label:tA.t("View files shared by this app"),show:u.viewFiles,key:"viewFiles",click:()=>this.props.showFileList({user:n}),dataQa:"app_menu_files_shared_by_app"},{type:"separator",key:"separator-1"},{label:l?tA.t("Unmute this app"):tA.t("Mute this app"),show:u.featureAllDmMuteBots,key:"muteApp",click:()=>{l?this.props.unmuteChannelById(i):this.props.muteChannelById(i)},dataQa:"app_menu_mute_app"},{label:tA.t("Settings"),show:u.settings,key:"settings",href:h,click:e=>{const t={action:"CLICK",ui_element:"LINK_APP_SETTINGS"};c.track("CHANNEL_SETTINGS",{contexts:{ui_context:t}}),"xoxa"===b&&(e.preventDefault(),this.props.openAppManagementModal({serviceId:r,referringEventId:"CHANNEL_SETTINGS",referringUiContext:t}))},dataQa:"app_menu_settings"},{label:tA.t("App Homepage"),show:u.homepage,key:"homepage",href:f,click:()=>{c.track("APP_CLICK_LINK_APP_HOMEPAGE_IN_CHANNEL_SETTINGS",{contexts:{ui_context:{step:"channel_settings",action:"click",ui_element:"link_app_homepage"}}})},dataQa:"app_menu_homepage"},{label:tA.t("View in App Directory"),show:u.viewInAppDirectory,key:"viewInAppDirectory",href:`${t}apps/${m}?utm_source=in-prod&utm_medium=inprod-link_app_directory-channel_settings-click`,click:()=>{c.track("APP_CLICK_LINK_APP_DIRECTORY_IN_CHANNEL_SETTINGS",{contexts:{ui_context:{step:"channel_settings",action:"click",ui_element:"link_app_directory"}}})},dataQa:"app_menu_view_app_directory"},{label:tA.t("Support for this app"),show:u.support,key:"support",href:_,dataQa:"app_menu_support"},{label:tA.t("Support for this app"),show:u.slackSupport,key:"slackSupport",click:()=>this.props.openModal({element:o.a.createElement(QN.a,{trigger:"app_support_profile_button"})}),dataQa:"app_menu_support"}].filter(e=>e&&(e.show||"separator"===e.type)).map((e,t)=>s()({},e,{click:a=>(this.clogClick(),p(t,a),e.click?e.click(a):void 0)}))}clogClick(){var e=this.props;const t=e.appProfile,a=e.botId,n=e.clogger,s=t.app_id;n.track(de.EventId.USER_CARD_CLICK,{app_id:s,bot_id:a})}render(){const e=this.props.appProfile;if(Object(ee.d)(e))return o.a.createElement(fn.f,{menuClassNames:"p-app_menu--loading"},o.a.createElement(Kt.a,null));if(!Object(ee.b)(e))return null;const t=this.getItems();return t.length?o.a.createElement(fn.a,{template:t,stripTerminalSeparators:!0}):null}}app_menu_AppMenu.displayName="AppMenu",app_menu_AppMenu.defaultProps=aA;var nA=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(q.H)(a),s=Object(bi.d)(e,n),r=Object(Je.q)(s),i=Object(h.b)(e),o=Object(Se.i)(e,i),l=Object(JN.b)(e,t),c=Object(XN.y)(e,l),d=Object(m.m)(e,"feature_all_dm_mute_bots")&&Object(xu.c)(e,t);return{actions:eA(e,t),teamUrl:Object(xe.n)(o),appProfile:l,memberId:n,botId:r,channelId:t,isMuted:d,settingsUrl:c,clogger:Object(ie.a)({state:e}),featureClassicNav:Object(m.m)(e,"feature_classic_nav")}},e=>Object(cg.b)({openAppManagementModal:ZN.a,openInviteMemberToChannelDialog:yw.a,openModal:ga.e,showFileList:qa.g,muteChannelById:zI.a,unmuteChannelById:zI.b},e))(app_menu_AppMenu);const sA=new x.b("classic_nav");l.default.string.isRequired,l.default.bool.isRequired,l.default.bool,l.default.bool,l.default.string,l.default.string.isRequired,l.default.oneOf(["channel","private","im","mpim"]).isRequired,l.default.object.isRequired;class actions_button_ActionsButton extends i.Component{constructor(e){super(e),Object(la.a)(this,["renderMenu","onTriggerClick","renderAriaLabel"])}onTriggerClick(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_SETTINGS"}}})}renderMenu(e){return this.props.hasAppMenu?o.a.createElement(nA,s()({},e,{channelId:this.props.channelId})):o.a.createElement(Fw,s()({},e,{channelId:this.props.channelId}))}renderAriaLabel(){var e=this.props;const t=e.channelType,a=e.channelName;return"channel"===t||"private"===t?sA.t("Settings for channel {channelName}",{channelName:a,fallbackHash:"eb2e450637aca7e07bbb3574966b72549c2b533b",note:"A label for the button in the Channel Header to show the settings menu for a channel. Not visible on screen as it is only for customers using screen readers."}):"im"===t?sA.t("Settings for conversation with {memberName}",{memberName:a,fallbackHash:"575f3f99f1b5afc989da1de8ca14e234f55e7ede",note:"A label for the button in the Channel Header to show the settings menu for an IM. Not visible on screen as it is only for customers using screen readers."}):"mpim"===t?sA.t("Settings for conversation with {memberNames}",{memberNames:a,fallbackHash:"575f3f99f1b5afc989da1de8ca14e234f55e7ede",note:"A label for the button in the Channel Header to show the settings menu for an MPIM. memberNames is a comma-delimited set of names.  Not visible on screen as it is only for customers using screen readers."}):void 0}render(){var e=this.props;const t=e.featureClassicNav,a=e.isChannel,n=e.tooltipPosition,s=a?sA.t("Channel settings"):sA.t("Conversation settings");return t?o.a.createElement(fn.e,{renderMenu:this.renderMenu,position:"bottom-right",onClick:this.onTriggerClick},o.a.createElement(Xr.c,{position:n,tip:s,hideFromScreenReader:!0},o.a.createElement(_e.c,{className:"p-classic_nav__model__button","data-qa":"channel_header_settings_button","aria-label":this.renderAriaLabel()},o.a.createElement(bn.b,{type:"cog-o",className:"p-classic_nav__model__button__icon"})))):null}}actions_button_ActionsButton.displayName="ActionsButton",actions_button_ActionsButton.defaultProps={featureClassicNav:!1,isChannel:!1,tooltipPosition:"bottom"};var rA=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(q.x)(e,a,{publicChannelIncludeHashSign:!1});return{channelType:Object(q.v)(a),channelName:n,hasAppMenu:Object(q.lb)(e,t),featureClassicNav:Object(m.m)(e,"feature_classic_nav"),clogger:Object(ie.a)({state:e})}})(actions_button_ActionsButton);const iA=new x.b("classic_nav"),oA=(l.default.node.isRequired,l.default.node,l.default.string,l.default.bool.isRequired,l.default.bool,l.default.string.isRequired,{className:"",buttons:void 0,featureChannelHeaderLabels:!1}),lA=e=>{const t=e.title,a=e.buttons,n=e.isChannelAvailable,s=e.className,r=e.featureChannelHeaderLabels,i=d()(s,"p-classic_nav__model_header",{"p-classic_nav__model__title__name__unavailable__channel":!n}),l=r?"group":void 0,c=r?iA.t("{channelName} options",{channelName:e["aria-label"],note:"Label for the Channel Header as a section. Not visible on screen as it is only for customers using screen readers."}):void 0;return o.a.createElement("div",{className:i,role:l,"aria-label":c},o.a.createElement("div",{"data-qa":"channel_header__title",className:"p-classic_nav__model__title"},t),a&&o.a.createElement("div",{"data-qa":"channel_header__buttons",className:"p-classic_nav__model__buttons p-classic_nav__no_drag"},a))};lA.displayName="ModelHeaderTemplate",lA.defaultProps=oA;var cA=lA;l.default.string.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.string,l.default.bool,l.default.string,l.default.bool.isRequired;const dA={className:"",useTabsHeaderVariant:!1,channelName:void 0},uA=e=>{const t=e.channelId,a=e.isUnknown,n=e.isChannelAvailable,s=e.className,r=e.useTabsHeaderVariant,l=e.featureChannelHeaderLabels,c=e.channelName;if(a)return o.a.createElement("div",{className:s});const u=d()(s,{"p-classic_nav__model_header--tabs_header":r});return o.a.createElement(cA,{className:u,isChannelAvailable:n,title:o.a.createElement(i.Fragment,null,r&&o.a.createElement(NI,{channelId:t}),o.a.createElement(Uw,{channelId:t}),r&&o.a.createElement(CT,{channelId:t}),n&&o.a.createElement(oN,{channelId:t})),buttons:n&&o.a.createElement(i.Fragment,null,o.a.createElement(PN,{channelId:t}),o.a.createElement(VN,{channelId:t}),o.a.createElement(YN,{channelId:t}),o.a.createElement(rA,{channelId:t})),"aria-label":c,featureChannelHeaderLabels:l})};uA.displayName="ModelHeader",uA.defaultProps=dA;var pA=Object(u.b)(e=>{const t=Object(_.a)(e),a=Object(B.e)(e,t),n=Object(q.x)(e,a,{publicChannelIncludeHashSign:!1});return{channelId:t,isUnknown:!a,isChannelAvailable:!Object(q.Mb)(e,a),useTabsHeaderVariant:Object(R.f)(e),featureChannelHeaderLabels:Object(m.m)(e,"feature_channel_header_labels"),channelName:n}})(uA);var hA=(e,t)=>Object(yn.g)(e)&&Object(q.lb)(e,t),mA=a("ukeO");l.default.string,l.default.string.isRequired,l.default.string.isRequired,l.default.object,l.default.bool.isRequired,l.default.bool.isRequired,l.default.string.isRequired;const bA={className:"",appObj:void 0};class app_im_header_AppImHeader extends i.Component{renderAppHomeHeader(e,t){var a=this.props;const n=a.channelId,s=a.memberId,r=a.isChannelAvailable,l=a.appObj;return o.a.createElement(i.Fragment,null,o.a.createElement(mA.a,{size:36,ariaHidden:!0,image:l?Object(xg.b)(l,72):null}),o.a.createElement("div",{className:"p-classic_nav_name_star","data-qa":"new_style_header"},o.a.createElement(LO.a,{id:s,className:"p-classic_nav_member_name"}),r&&o.a.createElement(CT,{channelId:n,key:"star",omitSeparator:!0}),t))}render(){var e=this.props;const t=e.channelId,a=e.isChannelAvailable,n=e.isMuted,s=e.className,r=e.appName,l=a?"padding_left_50":"",c=n?o.a.createElement(YI,{channelId:t}):null,u=d()("p-classic_nav__no_drag","p-classic_nav__model__title__name",{"p-classic_nav__model__title__name--dim":n});return o.a.createElement(cA,{className:d()(s,"p-classic_app_home_header"),isChannelAvailable:a,title:o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:u},this.renderAppHomeHeader(l,c))),buttons:a&&o.a.createElement(i.Fragment,null,o.a.createElement(YN,{channelId:t}),o.a.createElement(rA,{channelId:t})),"aria-label":r})}}app_im_header_AppImHeader.displayName="AppImHeader",app_im_header_AppImHeader.defaultProps=bA;var fA=Object(u.b)(e=>{const t=Object(_.a)(e),a=Object(B.e)(e,t),n=Object(m.m)(e,"feature_all_dm_mute_bots")&&Object(xu.c)(e,t),s=hA(e,t);const r=Object(U.b)(e).appId,i=Object(JN.b)(e,t),o=Object(XN.m)(i);return{channelId:t,memberId:Object(q.H)(a)||void 0,isChannelAvailable:!Object(q.Mb)(e,a),appObj:s&&r?Object(yn.e)(e,r):void 0,isMuted:n,appName:o}})(app_im_header_AppImHeader);l.default.object,l.default.string;const _A={className:"",appObj:void 0},gA=({appObj:e,className:t})=>{const a=d()("p-classic_nav__no_drag","p-classic_nav__model__title__name");return o.a.createElement(cA,{className:d()(t,"p-classic_app_home_header"),isChannelAvailable:!0,title:e?o.a.createElement("div",{className:a},o.a.createElement(mA.a,{size:36,ariaHidden:!0,image:e?Object(xg.b)(e,72):null}),o.a.createElement("div",{className:"p-classic_nav_name_star","data-qa":"new_style_header"},o.a.createElement("p",{className:"p-classic_nav_member_name padding_left_50"},e&&e.name))):null,"aria-label":e&&e.name})};gA.displayName="UTAHeader",gA.defaultProps=_A;var yA=Object(u.b)(e=>{return{appObj:Object(yn.e)(e,Object(_.a)(e))}})(gA),OA=a("r5Q4");const CA=new x.b("classic_nav"),vA=(l.default.number,l.default.string,l.default.bool,{totalUnreadReplies:void 0,className:void 0,featureClassicNav:!1}),EA=({totalUnreadReplies:e,className:t,featureClassicNav:a})=>{if(!a)return null;const n=d()("p-classic_nav__channel_header__title","p-classic_nav__no_drag");let s=null;return Object(dt.a)(e)&&(s=CA.t("{totalUnreadReplies, plural, =0 {No new replies} =1 {# new reply} other {# new replies}}",{totalUnreadReplies:e})),o.a.createElement("div",{className:t},o.a.createElement("span",{className:n},CA.t("Threads")),o.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},s))};EA.displayName="AllThreadsHeader",EA.defaultProps=vA;var kA=Object(u.b)(e=>({totalUnreadReplies:Object(OA.k)(e),featureClassicNav:Object(m.m)(e,"feature_classic_nav")}))(EA);l.default.string.isRequired,l.default.string,l.default.bool;const SA={className:void 0,legacy:!1},jA=({id:e,className:t,legacy:a})=>{if(!e)return null;const n=uk(e);if(n.header)return n.header({className:t});const s=d()("p-classic_nav__page_header",{"p-classic_nav__page_header--legacy":a},t);return o.a.createElement("div",{className:s},o.a.createElement("div",{className:"p-classic_nav__channel_header__title"},n.label()),o.a.createElement(nm,{regionId:"main",flex:!0}))};jA.displayName="PageHeader",jA.defaultProps=SA;var IA=jA,wA=a("5tH5"),TA=a("+Sjy");const NA="EMPTY",AA="ALL_THREADS",RA="ALL_UNREADS",MA="PAGE",PA="APP_IM",xA="UTA_HOME",LA="DEFAULT",FA=[{type:NA,isShowing:e=>!e},{type:AA,isShowing:e=>e===wA.a.allThreads},{type:RA,isShowing:e=>e===wA.a.allUnreads},{type:MA,isShowing:(e,t)=>Object(TA.e)(t,e)},{type:PA,isShowing:(e,t)=>hA(t,e)&&!Object(R.f)(t)},{type:xA,isShowing:(e,t)=>Object(f.a)(e)&&Object(E.b)(t)}],DA=e=>{const t=Object(_.a)(e),a=FA.find(a=>a.isShowing(t,e));return a?a.type:LA};a("c7HH");l.default.string,l.default.string,l.default.bool;const BA=({primaryView:e,headerType:t,isWindowFrameless:a})=>{const n=d()({"p-classic_nav__channel_header":!0,"p-classic_nav__channel_header--frameless":a,"p-classic_nav__drag":a});switch(t){case NA:return o.a.createElement("div",{className:n});case AA:return o.a.createElement(kA,{className:n});case RA:return o.a.createElement(om,{className:n});case MA:return o.a.createElement(IA,{id:e,className:n});case PA:return o.a.createElement(fA,{className:n});case xA:return o.a.createElement(yA,{className:n});default:return o.a.createElement(pA,{className:n})}};BA.defaultProps={primaryView:void 0,headerType:void 0,isWindowFrameless:!1};var UA=Object(u.b)(e=>({primaryView:Object(_.a)(e),headerType:DA(e),isWindowFrameless:Object(S.l)(e)}))(BA),qA=a("5dgH"),HA=a("m5Fn");a("4F1B");const WA=new x.b("app_launcher");l.default.bool,l.default.object.isRequired,l.default.string;class app_launcher_right_menu_actions_AppLauncherActions extends i.Component{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this),this.clogAppDirectory=this.clogAppDirectory.bind(this),this.onMenuTriggerClick=this.onMenuTriggerClick.bind(this),this.onMenuTriggerClose=this.onMenuTriggerClose.bind(this),this.state={isMenuOpen:!1}}onMenuTriggerClick(){this.setState(()=>({isMenuOpen:!0}))}onMenuTriggerClose(){this.setState(()=>({isMenuOpen:!1}))}clogAppDirectory(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"LINK_APP_DIRECTORY"}}})}renderMenu(e){const t=[{label:WA.t("Manage Apps",{fallbackHash:"5b7111cdde14815bb325dae16d169cfdefda6165"}),key:"manageApps",href:`${this.props.teamUrl}apps/manage`,dataQa:"app_launcher_header__manage_apps_link",click:()=>{this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_element:"LINK_MANAGE_APPS"}}})}}];return o.a.createElement(fn.a,s()({},e,{template:t,stripTerminalSeparators:!0,"data-qa":"app_launcher_menu"}))}render(){if(!this.props.featureAppLauncher)return null;const e=d()("p-classic_nav__right__button","p-classic_nav__no_drag");return o.a.createElement("div",{className:"p-app_launcher_actions"},o.a.createElement(Ze.a,{href:`${this.props.teamUrl}apps`,className:"p-app_launcher_actions__link",onClick:this.clogAppDirectory,"data-qa":"app_launcher_header__more_apps_link"},WA.t("Get more apps")),o.a.createElement(fn.e,{position:"bottom-right",renderMenu:this.renderMenu,allowanceX:8,onClick:this.onMenuTriggerClick,onClose:this.onMenuTriggerClose},o.a.createElement(Xr.c,{tip:WA.t("App Menu"),position:"bottom-right",hideFromScreenReader:!0},o.a.createElement(_e.c,{className:e,"aria-label":WA.t("App Menu"),"data-qa":"app_launcher_menu_trigger","aria-expanded":this.state.isMenuOpen},o.a.createElement(bn.b,{type:"cog-o"})))))}}app_launcher_right_menu_actions_AppLauncherActions.displayName="AppLauncherActions",app_launcher_right_menu_actions_AppLauncherActions.defaultProps={featureAppLauncher:!1,teamUrl:"my"};var GA=Object(u.b)(e=>({featureAppLauncher:Object(dg.a)(e),teamUrl:Object(xe.n)(Object(Se.d)(e)),clogger:Object(ie.a)({state:e})}))(app_launcher_right_menu_actions_AppLauncherActions),KA=a("Go8C"),VA=a("7ARk"),zA=a("fdJE"),$A=a("ckF6");const YA=new x.b("search"),QA=(l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.bool,l.default.oneOf(["dark","light"]),l.default.object.isRequired,l.default.func,l.default.func,{query:void 0,featureClassicNav:!1,featureComposeFlow:!1,isIAP1Enabled:!1,plainTextQuery:void 0,showKeyboardShortcut:!1,clientTheme:"light",openFromClick:r.a,clearSearchInput:r.a});class search_input_SearchInput extends i.Component{constructor(e){super(e),this.clearSearchRef=o.a.createRef(),this.onClick=this.onClick.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClearClick=this.onClearClick.bind(this)}onClick(){this.props.openFromClick(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_SEARCH"}}})}onMouseDown(e){2===e.nativeEvent.which&&(this.props.openFromClick(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_SEARCH"}}}))}onClearClick(e){e.preventDefault(),e.stopPropagation();const t=Object($A.a)();t&&t.focus(),this.props.clearSearchInput()}renderQueryText(){const e=this.props.query;return o.a.createElement(eg.a,{text:e,customLineEnding:" ",showTooltips:!1,noLinking:!0,noSpecials:!0,noHighlights:!0,noJumbomoji:!0})}renderSmallButton(){var e=this.props;const t=e.query,a=e.plainTextQuery,n=e.showKeyboardShortcut;if(!e.featureClassicNav)return null;const s=d()({"p-classic_nav__right__button":!0,"p-classic_nav__right__button--search_small":!0,"p-classic_nav__no_drag":!0}),r=n&&o.a.createElement("div",{className:"c-tooltip__tip_shortcut"},Object(ue.q)()?"\u2318G":"Ctrl+G");return o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"p-classic_nav__search_small_divider"}),o.a.createElement(Xr.c,{position:"bottom",tip:()=>t?YA.rt("Search: {query}",{query:this.renderQueryText()}):o.a.createElement(i.Fragment,null,YA.t("Search"),r)},o.a.createElement(_e.c,{className:s,onClick:this.onClick,"data-qa":"legacy_search_header","aria-label":t?YA.t("Search: {query}",{query:a}):YA.t("Search")},o.a.createElement(bn.b,{type:"search"}))))}render(){var e=this.props;const t=e.query,a=e.plainTextQuery,n=e.featureClassicNav,s=e.clientTheme,r=e.featureComposeFlow,l=e.isIAP1Enabled;if(!n)return null;const c=t?o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"p-classic_nav__right__search__text","aria-label":YA.t("Search: {query}",{query:a})},this.renderQueryText())):o.a.createElement("span",{className:"p-classic_nav__right__search__placeholder"},YA.t("Search"));return o.a.createElement("div",{className:"p-classic_nav__right__search__input"},o.a.createElement(_e.c,{onClick:this.onClick,onMouseDown:this.onMouseDown,"aria-label":YA.t("Search"),"data-qa":"legacy_search_header",className:d()("p-classic_nav__right__search","p-classic_nav__no_drag",{[`p-classic_nav__right__search--${s}`]:"light"!==s})},o.a.createElement(bn.b,{className:"p-classic_nav__right__search__icon",type:"search",size:"inherit",inline:!0}),c),t?o.a.createElement(_e.c,{className:"p-classic_nav__right__search__clear",onClick:this.onClearClick,"aria-label":YA.t("Clear search field"),ref:this.clearSearchRef},o.a.createElement(bn.b,{type:"times-small",inline:!0})):null,this.renderSmallButton(),!l&&!r&&o.a.createElement(HA.a,null))}}search_input_SearchInput.displayName="SearchInput",search_input_SearchInput.defaultProps=QA;var XA=Object(u.b)(e=>{const t=Object(KA.b)(e),a=Is.V||Object(ba.k)(e,"f_key_search");return{query:t,featureClassicNav:Object(m.m)(e,"feature_classic_nav"),featureComposeFlow:Object(C.g)(e),isIAP1Enabled:Object(bo.c)(e),plainTextQuery:t?Object(zA.a)(e,t):void 0,showKeyboardShortcut:a,clientTheme:Object(M.c)(e),clogger:Object(ie.a)({state:e})}},e=>({openFromClick:(...t)=>e(Object(oC.a)(...t)),clearSearchInput:(...t)=>e(Object(VA.a)(...t))}))(search_input_SearchInput),JA=a("Vs2R"),ZA=a("TOkS");const eR=new x.b("classic_nav"),tR=(l.default.string,l.default.string,l.default.bool,l.default.bool,l.default.objectOf(l.default.bool),l.default.string.isRequired,l.default.string.isRequired,{userName:void 0,channelName:void 0,isDirectMessage:!1,otherUsers:void 0,featureClassicNav:!1}),aR=({userName:e,channelName:t,isDirectMessage:a,otherUsers:n,featureClassicNav:s})=>{if(!s)return null;const r=Object(Hc.a)(n),l=0===r?e:eR.t("{userName} and {numOthers,plural,=1{# other}other{# others}}",{userName:e,numOthers:r}),c=a?eR.t("Direct Message"):t;return o.a.createElement(i.Fragment,null,l,o.a.createElement("span",{className:"p-classic_nav__tip_sub"},c))};aR.displayName="ActivityToastTip",aR.defaultProps=tR;var nR=Object(u.b)((e,{userId:t,channelId:a})=>{const n=Object(B.e)(e,a),s=Object(q.x)(e,n);return{userName:Object(Je.W)(e,t),channelName:s,isDirectMessage:Object(q.ib)(n),featureClassicNav:Object(m.m)(e,"feature_classic_nav")}})(aR);const sR=3e3,rR=400,iR="REACTIONS_TOAST",oR=new x.b("classic_nav"),lR=(l.default.shape({key:l.default.string.isRequired,emoji:l.default.string.isRequired,userId:l.default.string.isRequired,channelId:l.default.string.isRequired,otherUsers:l.default.objectOf(l.default.bool)}),l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.object.isRequired,l.default.object.isRequired,{currentToast:void 0,isActive:!1,stopAnimations:!1,featureClassicNav:!1,toggleActivityFlexpane:r.a,shiftToast:r.a});class base_activity_button_BaseActivityButton extends i.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.state={waiting:!1}}componentDidMount(){this.props.currentToast&&this.props.currentToast.emoji&&this.startToastTimer()}componentDidUpdate(e,t){const a=e.currentToast&&e.currentToast.emoji,n=this.props.currentToast&&this.props.currentToast.emoji;n&&n!==a&&this.startToastTimer(),this.state.waiting&&!t.waiting&&this.startWaitTimer()}componentWillUnmount(){this.props.shiftToast(),this.toastTimer&&clearTimeout(this.toastTimer),this.waitTimer&&clearTimeout(this.waitTimer)}onClick(){this.props.toggleActivityFlexpane(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_FLEX_ACTIVITY"}}})}onKeyDown(e){e.keyCode===vT.e&&(e.preventDefault(),this.props.toggleActivityFlexpane({focusKey:"activity"}))}startToastTimer(){const e=this.props.logger;e.info(iR,"Got next reaction, toasting"),this.toastTimer=setTimeout(()=>{e.debug(iR,"Toasting done, starting wait period"),this.setState(e=>s()({},e,{waiting:!0}))},sR)}startWaitTimer(){const e=this.props.logger;e.debug(iR,"Entering wait period"),this.waitTimer=setTimeout(()=>{e.debug(iR,"Wait period done, shifting toast"),this.setState(e=>s()({},e,{waiting:!1})),this.props.shiftToast()},rR)}shouldShowToast(){return this.props.currentToast&&!this.state.waiting}renderTipText(){return this.props.isActive?oR.t("Hide Activity"):oR.t("Show Activity")}renderTip(){var e=this.props;const t=e.currentToast;if(!e.featureClassicNav)return null;if(this.shouldShowToast())return o.a.createElement(nR,t);const a=this.renderTipText(),n=!(ZS.a.chrome&&!Is.V)&&o.a.createElement("div",{className:"c-tooltip__tip_shortcut"},Object(ue.q)()?"\u2318\u21e7M":"Ctrl+Shift+M");return o.a.createElement(i.Fragment,null,a,n)}render(){var e=this.props;const t=e.currentToast,a=e.isActive,n=e.stopAnimations,s=this.shouldShowToast()&&o.a.createElement(Ho.b,{text:`:${t.emoji}:`,emojiSize:Ho.a.LARGE,className:"p-classic_nav__right__activity__toast"}),r=this.renderTip(),i=d()("p-classic_nav__right__activity__container",{"p-classic_nav__right__activity__container--no_animation":n}),l=d()({"p-classic_nav__right__button":!0,"p-classic_nav__right__button--activity":!0,"p-classic_nav__right__button--active":a,"p-classic_nav__right__activity":!0,"p-classic_nav__right__activity--toasting":this.shouldShowToast(),"p-classic_nav__no_drag":!0}),c=oR.t("Show Activity");return o.a.createElement("div",{className:i},o.a.createElement(Xr.c,{position:"bottom-right",tip:r,hideFromScreenReader:!0},o.a.createElement(_e.c,{className:l,onClick:this.onClick,"aria-label":c,"aria-expanded":a,onKeyDown:this.onKeyDown},o.a.createElement(bn.b,{type:"mentions",className:"p-classic_nav__right__activity__icon"}))),s)}}base_activity_button_BaseActivityButton.displayName="BaseActivityButton",base_activity_button_BaseActivityButton.defaultProps=lR;var cR=Object(u.b)(e=>({isActive:"activity"===Object(v.j)(e),featureClassicNav:Object(m.m)(e,"feature_classic_nav"),stopAnimations:!Object(ba.k)(e,"a11y_animations"),logger:Object(Ot.a)({state:e}),clogger:Object(ie.a)({state:e})}),e=>({toggleActivityFlexpane:(...t)=>e(Object(qa.q)(...t)),shiftToast:(...t)=>e(Object(JA.e)(...t))}))(base_activity_button_BaseActivityButton);l.default.string.isRequired;class activity_button_ActivityButton extends i.Component{renderButton(e){const t=Object(JA.c)(e);return o.a.createElement(cR,{currentToast:t})}render(){const e=Object(p.getStoreInstanceByTeamId)(this.props.teamId);return o.a.createElement(ZA.a,{store:e,render:this.renderButton})}}activity_button_ActivityButton.displayName="ActivityButton";var dR=Object(u.b)(e=>({teamId:Object(h.b)(e)}))(activity_button_ActivityButton);const uR=new x.b("classic_nav"),pR=(l.default.bool,l.default.object.isRequired,l.default.func,l.default.func,{isActive:!1,showStarredItemsList:r.a,closeFlexpane:r.a});class stars_button_StarsButton extends i.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}onClick(){this.showDetails(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_FLEX_STARS"}}})}onKeyDown(e){e.keyCode===vT.e&&(e.preventDefault(),this.showDetails({focusKey:"stars"}))}showDetails({focusKey:e=null}={}){this.props.isActive?this.props.closeFlexpane():this.props.showStarredItemsList({focusKey:e})}render(){const e=this.props.isActive,t=e?uR.t("Hide Starred Items"):uR.t("Show Starred Items"),a=uR.t("Show Starred Items"),n=o.a.createElement(i.Fragment,null,t,o.a.createElement("div",{className:"c-tooltip__tip_shortcut"},Object(ue.q)()?"\u2318\u21e7S":"Ctrl+Shift+S")),s=d()({"p-classic_nav__right__button":!0,"p-classic_nav__right__button--stars":!0,"p-classic_nav__right__button--active":e,"p-classic_nav__no_drag":!0});return o.a.createElement(Xr.c,{position:"bottom-right",tip:n,hideFromScreenReader:!0},o.a.createElement(_e.c,{className:s,onClick:this.onClick,"aria-label":a,"aria-expanded":e,onKeyDown:this.onKeyDown},o.a.createElement(bn.b,{type:"star-o"})))}}stars_button_StarsButton.displayName="StarsButton",stars_button_StarsButton.defaultProps=pR;var hR=Object(u.b)(e=>({isActive:"starred_items"===Object(v.j)(e),clogger:Object(ie.a)({state:e})}),e=>({showStarredItemsList:(...t)=>e(Object(qa.k)(...t)),closeFlexpane:(...t)=>e(Object(qa.a)(...t))}))(stars_button_StarsButton),mR=a("qcAq"),bR=a("qSXi"),fR=a("HYPA"),_R=a("/X+W"),gR=a("rtjy");const yR=e=>({id:e.frecencyId,action:e}),OR=Object(mt.b)("Search global actions (shortcuts) in Redux store",(e,t,{query:a=""}={})=>{const n=t();let s=[...Object(fR.b)(n).actions.map(bR.a)];return s=s.filter(e=>Object(bR.b)(e,Object(_R.a)(a))),s=(s=Object(gR.e)(n,{query:a,list:s.map(yR)})).map(e=>e.action)});OR.meta={name:"searchLocalGlobalActions",key:"actionsSearchShortcutsSearchLocalGlobalActions",description:"Search global actions (shortcuts) in Redux store"},OR.propTypes={query:l.default.string};const CR=Object(mt.b)("Search shortcuts, returns as Promise",(e,t,a)=>{const n=e(OR(a));return Promise.resolve(n)});CR.meta={name:"searchShortcuts",key:"actionsSearchShortcutsSearchShortcuts",description:"Search shortcuts, returns as Promise"},CR.propTypes=OR.propTypes;var vR=CR,ER=a("2/vs"),kR=a("cTBa"),SR=a("Rrdp");const jR=56,IR=(Ku.a.MessageAction.isRequired,l.default.string,l.default.string,Ku.a.maybeUnknown(Ku.a.App),l.default.string.isRequired,{className:"",pillarClassName:"",app:void 0});class shortcuts_dialog_item_ShortcutsDialogItem extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["renderEnter","renderIcon","renderIconMaybe"])}renderIcon(){var e=this.props;const t=e.action,a=e.app,n=e.defaultAppIcon,s=a&&a.icons||t.iconSet;if(s){const e=jR,t=Object(xg.b)({icons:s},e,n);return o.a.createElement("img",{alt:"",className:"p-shortcuts__icon",src:t})}return t.iconType?o.a.createElement(bn.b,{type:t.iconType}):null}renderIconMaybe(e){return e?o.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},e):null}renderEnter(){var e=this.props;const t=e.className,a=e.pillarClassName,n=d()(t,"c-menu_item__enter",{[`${a}__enter`]:a});return o.a.createElement(bn.a,{type:"enter",className:n,"data-qa":"menu_item_enter",role:"presentation"})}render(){var e=this.props;const t=e.action,a=e.app,n=e.className,s=e.pillarClassName,r=d()(n,"c-menu_item__button","c-button-unstyled",{"c-menu_item__button--danger":t.danger,[`${s}`]:s,[`${s}--danger`]:t.danger&&s});let i=a&&a.name||t.description;return!i&&a&&(i=o.a.createElement(SR.a,{type:Object(ee.d)(a)?"unknown":"non-existent"})),o.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},o.a.createElement("div",{className:r,"data-qa":t["data-qa"],key:t.id,id:t.id},this.renderIconMaybe(this.renderIcon()),o.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},t.label||t.name,o.a.createElement("div",{className:"c-menu_item__description"},i)),this.renderEnter()))}}shortcuts_dialog_item_ShortcutsDialogItem.displayName="ShortcutsDialogItem",shortcuts_dialog_item_ShortcutsDialogItem.defaultProps=IR;var wR=Object(u.b)((e,t)=>{const a=t.action;return{app:a&&a.appId&&Object(yn.e)(e,a.appId),defaultAppIcon:Object(yn.f)(e)}})(shortcuts_dialog_item_ShortcutsDialogItem);a("N391");const TR=new x.b("shortcuts"),NR=64,AR=(l.default.func,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.bool.isRequired,{onClose:r.a});class shortcuts_dialog_ShortcutsDialog extends i.PureComponent{constructor(e){super(e),this.state={filterQuery:"",isLoading:!0,isError:!1,actions:[]},this.initClogged=!1,Object(la.a)(this,["onFilterUpdate","onSelectAction","renderSingleAction","handleSelectEvent","searchShortcuts"]),this.searchShortcutsDebounced=Object(oa.a)(this.searchShortcuts,200,{leading:!0})}componentDidMount(){this.searchShortcutsDebounced()}componentDidUpdate(){this.initClogged||this.state.isLoading||this.state.isError||(this.initClogged=!0)}componentWillUnmount(){this.activePromise&&delete this.activePromise}onSelectAction(e,t){var a=this.props;const n=a.closeModal,s=a.handleShortcut;n(),this.props.onClose&&this.props.onClose(e),s(t),this.props.recordShortcutFrecencyEvent({action:t,query:this.state.filterQuery})}onFilterUpdate(e){this.setState(()=>({filterQuery:e}),this.searchShortcutsDebounced)}searchShortcuts(){const e=this.props.searchShortcuts({query:this.state.filterQuery}).then(t=>{this.activePromise===e&&this.setState(()=>({actions:t,isError:!1,isLoading:!1}))}).catch(()=>{this.setState(()=>({isError:!0,isLoading:!1}))});this.activePromise=e}handleSelectEvent(e,t,a){this.onSelectAction(a,t.props.action)}renderTitle(e){return o.a.createElement("div",{className:"p-shortcuts_dialog__title","data-qa-shortcuts-dialog-title":!0},o.a.createElement("div",{className:"p-shortcuts_dialog__title_text"},e))}renderLoading(){return o.a.createElement("div",{className:"p-shortcuts_dialog__loader"},o.a.createElement(Kt.a,null))}renderSingleAction(e){return{label:o.a.createElement(wR,{key:e.id,pillarClassName:"p-shortcuts_dialog_option",action:e}),value:e.id}}renderSelect(){if(!this.props.featureAppActionsGlobal)return null;const e=TR.t("Search shortcuts");return o.a.createElement(kR.b,{"data-qa":"shortcuts-dialog-list",isAlwaysOpen:!0,usePlaceholderOption:!1,autoSelectFirstOption:!0,focusInputOnMount:!0,placeholder:e,icon:"search",id:"p-shortcuts_dialog__select",className:"p-shortcuts_dialog__select",pillarClassName:"p-shortcuts_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(ht.a)(this.state.actions,this.renderSingleAction),optionsRowHeight:NR})}render(){const e=this.state.isLoading;if(!this.props.featureAppActionsGlobal)return null;const t=TR.t("Build your own!"),a=TR.t("Use a shortcut");return o.a.createElement(ya.a,{contentLabel:a,className:"p-shortcuts_dialog",overlayClassName:"p-shortcuts_dialog__overlay",footerIcon:"external-link",footerLink:"/workflow-builder",footerText:t,goOnEnterPressed:!1,onCancel:this.props.onClose,showCloseButton:!1,showCancelButton:!1,showGoButton:!1,title:this.renderTitle(a),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:!1},e?this.renderLoading():this.renderSelect())}}shortcuts_dialog_ShortcutsDialog.displayName="ShortcutsDialog",shortcuts_dialog_ShortcutsDialog.defaultProps=AR;var RR=Object(u.b)(e=>({clogger:Object(ie.a)({state:e}),featureAppActionsGlobal:Object(m.m)(e,"feature_app_actions_global")}),e=>({closeModal:()=>e(Object(ga.a)()),searchShortcuts:(...t)=>e(vR(...t)),recordShortcutFrecencyEvent:t=>e(Object(mR.a)(t)),handleShortcut:t=>e(Object(ER.b)({actionId:t.id,appId:t.appId}))}))(shortcuts_dialog_ShortcutsDialog);const MR=Object(mt.b)("Open app shortcuts dialog",e=>{const t=o.a.createElement(RR);e(Object(ga.e)({element:t}))});MR.meta={name:"browseShortcuts",key:"actionsBrowseShortcutsBrowseShortcuts",description:"Open app shortcuts dialog"};var PR=MR;const xR=new x.b("classic_nav"),LR=(l.default.bool,l.default.bool,l.default.func,{featureClassicNav:!1,featureAppActionsGlobal:!1,browseShortcuts:r.a});class shortcuts_button_ShortcutsButton extends i.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){this.props.browseShortcuts()}render(){var e=this.props;const t=e.featureClassicNav,a=e.featureAppActionsGlobal;if(!t||!a)return null;const n=xR.t("Show Shortcuts"),s=d()("p-classic_nav__right__button","p-classic_nav__right__button--shortcuts","p-classic_nav__no_drag");return o.a.createElement(Xr.c,{position:"bottom-right",tip:n},o.a.createElement(_e.c,{className:s,onClick:this.onClick},o.a.createElement(bn.b,{type:"rocket"})))}}shortcuts_button_ShortcutsButton.displayName="ShortcutsButton",shortcuts_button_ShortcutsButton.defaultProps=LR;var FR=Object(u.b)(e=>({featureClassicNav:Object(m.m)(e,"feature_classic_nav"),featureAppActionsGlobal:Object(m.m)(e,"feature_app_actions_global")}),e=>({browseShortcuts:(...t)=>e(PR(...t))}))(shortcuts_button_ShortcutsButton),DR=a("M1FR"),BR=a("8zFM"),UR=a("Ro9a");const qR=new x.b("classic_nav"),HR=(l.default.object.isRequired,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.number,l.default.bool,l.default.bool,l.default.bool,l.default.object.isRequired,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.string,{currentUserId:void 0,isEnterprise:!1,isUserRestricted:!1,isPaid:!1,helpTicketsCount:0,whatsNewCount:0,featureClassicNav:!1,featureCalendarSimpleAgendaView:!1,featureEmailWorkflow:!1,showFileList:r.a,showDownloads:r.a,showMemberDirectory:r.a,showUserGroupList:r.a,showWhatsNew:r.a,showKeyboardShortcuts:r.a,openHelpModal:r.a,openSearch:r.a,showUserCalendar:r.a,keyboardLocale:null});class flexpanes_menu_FlexpanesMenu extends i.Component{constructor(e){super(e),this.onMenuItemSelected=this.onMenuItemSelected.bind(this)}onMenuItemSelected(e,t){var a=this.props;const n=a.menuProps,s=a.clogger;n&&n.onMenuItemSelected&&n.onMenuItemSelected(e,t);const r=this.items&&this.items[e];r&&r.key&&s.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_FLEX_MENU_ITEM"}},label:r.key})}render(){var e=this.props;const t=e.menuProps,a=e.currentUserId,n=e.isEnterprise,r=e.isUserRestricted,i=e.isPaid,l=e.helpTicketsCount,c=e.whatsNewCount,d=e.featureClassicNav,u=e.featureCalendarSimpleAgendaView,p=e.featureEmailWorkflow,h=e.keyboardLocale;if(!d)return null;const m=Object(x.j)("/",{kb:h}),b=[{key:"calendar",label:qR.t("Your calendar"),icon:o.a.createElement(bn.b,{type:"all-files-alt"}),click:this.props.showUserCalendar,show:u},{key:"files",label:qR.t("Files"),icon:o.a.createElement(bn.b,{type:"all-files-alt"}),click:e=>this.props.showFileList({focusKey:e&&"keydown"===e.type?"files":null,user:a}),show:!0},{key:"claimed",label:p?qR.t("Claimed"):"",icon:o.a.createElement(bn.b,{type:"emoji-objects"}),click:()=>this.props.openSearch({query:"my::eyes: -my::white_check_mark:",showAutocomplete:!1,commitSearch:!0,openMethod:"menu"}),show:p},{key:"completed",label:p?qR.t("Completed"):"",icon:o.a.createElement(bn.b,{type:"check-square-o"}),click:()=>this.props.openSearch({query:"my::white_check_mark:",showAutocomplete:!1,commitSearch:!0,openMethod:"menu"}),show:p},{key:"downloads",label:qR.t("Downloads"),icon:o.a.createElement(bn.b,{type:"cloud-download"}),click:e=>this.props.showDownloads({focusKey:e&&"keydown"===e.type?"downloads":null}),show:Is.V},{type:"separator",show:!0},{key:"team-directory",label:n?qR.t("Organization Directory"):qR.t("Workspace Directory"),icon:o.a.createElement(bn.b,{type:"team-directory"}),shortcut:!ZS.a.firefox&&(Object(ue.q)()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:this.props.showMemberDirectory,show:!0},{key:"user-groups",label:qR.t("User Groups"),icon:o.a.createElement(bn.b,{type:"user-groups"}),click:()=>this.props.showUserGroupList(),show:!r&&i},{type:"separator",show:!0},{key:"whats-new",label:qR.t("What\u2019s New"),icon:o.a.createElement(bn.b,{type:"emoji-celebration"}),click:e=>this.props.showWhatsNew({focusKey:e&&"keydown"===e.type?"whats_new":null}),show:!0,badgeCount:c,dataQa:"whats_new_menu_item"},{key:"keyboard-shortcuts",label:qR.t("Keyboard Shortcuts"),icon:o.a.createElement(bn.b,{type:"keyboard"}),shortcut:Object(ue.q)()?`\u2318${m}`:`Ctrl+${m}`,click:e=>this.props.showKeyboardShortcuts({focusKey:e&&"keydown"===e.type?"keyboard_shortcuts":null}),show:!0},{key:"help",label:qR.t("Help"),icon:o.a.createElement(bn.b,{type:"question-circle"}),click:()=>this.props.openHelpModal({trigger:"flex_menu"}),show:!0,badgeCount:l,dataQa:"help_center_menu_item"}].filter(e=>e.show);return this.items=b,o.a.createElement(fn.a,s()({},t,{onMenuItemSelected:this.onMenuItemSelected,menuClassNames:"p-classic_nav__right__flexpanes_menu",template:b,stripTerminalSeparators:!0,width:Object(ue.q)()?void 0:360}))}}flexpanes_menu_FlexpanesMenu.displayName="FlexpanesMenu",flexpanes_menu_FlexpanesMenu.defaultProps=HR;const WR=Object(u.b)(e=>({currentUserId:Object(m.d)(e),isEnterprise:Object(m.q)(e),isUserRestricted:Object(Je.Gb)(Object(bi.b)(e)),isPaid:Object(xe.D)(Object(Se.d)(e)),helpTicketsCount:Object(DR.d)(e),whatsNewCount:Object(qA.e)(e),featureClassicNav:Object(m.m)(e,"feature_classic_nav"),featureCalendarSimpleAgendaView:Object(m.m)(e,"feature_calendar_simple_agenda_view"),featureEmailWorkflow:Object(UR.a)(e),clogger:Object(ie.a)({state:e})}),e=>({showFileList:(...t)=>e(Object(qa.g)(...t)),showDownloads:(...t)=>e(Object(qa.f)(...t)),showMemberDirectory:(...t)=>e(Object(qa.i)(...t)),showUserGroupList:(...t)=>e(Object(qa.o)(...t)),showWhatsNew:(...t)=>e(Object(qa.p)(...t)),showKeyboardShortcuts:(...t)=>e(Object(qa.h)(...t)),openHelpModal:(...t)=>e(Object(WS.a)(...t)),openSearch:(...t)=>e(Object(BR.a)(...t)),showUserCalendar:(...t)=>e(Object(qa.m)(...t))}))(flexpanes_menu_FlexpanesMenu);var GR=Object(Qr.a)(WR);const KR=new x.b("classic_nav");l.default.number,l.default.bool,l.default.object.isRequired;class flexpanes_button_FlexpanesButton extends i.Component{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this),this.onTriggerClick=this.onTriggerClick.bind(this)}onTriggerClick(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_FLEX_MENU"}}})}maybeRenderBadge(){const e=this.props.helpTicketsCount;if(!e)return null;const t=e>9?"9+":String(e);return o.a.createElement("span",{className:"p-classic_nav__right__help_count","data-qa":"help_ticket_count"},t)}renderMenu(e){return o.a.createElement(GR,{menuProps:e})}render(){if(!this.props.featureClassicNav)return null;const e=d()("p-classic_nav__right__button","p-classic_nav__right__button--flexpanes","p-classic_nav__no_drag",{"p-classic_nav__right__button--flexpanes-help-count":!!this.props.helpTicketsCount});return o.a.createElement(fn.e,{position:"bottom-right",renderMenu:this.renderMenu,allowanceX:8,onClick:this.onTriggerClick},o.a.createElement(Xr.c,{tip:KR.t("More Items"),position:"bottom-right"},o.a.createElement(_e.c,{className:e,"aria-label":KR.t("More Items")},o.a.createElement(bn.b,{type:"vertical-ellipsis"}),this.maybeRenderBadge())))}}flexpanes_button_FlexpanesButton.displayName="FlexpanesButton",flexpanes_button_FlexpanesButton.defaultProps={helpTicketsCount:0,featureClassicNav:!1};var VR=Object(u.b)(e=>({helpTicketsCount:Object(DR.d)(e),featureClassicNav:Object(m.m)(e,"feature_classic_nav"),clogger:Object(ie.a)({state:e})}))(flexpanes_button_FlexpanesButton);const zR=new x.b("whats_new"),$R=(l.default.bool.isRequired,l.default.number.isRequired,l.default.number,l.default.object.isRequired,l.default.bool.isRequired,l.default.func.isRequired,{latestNewsTimestamp:void 0});class whats_new_button_WhastNewButton extends i.PureComponent{componentDidMount(){this.props.updateCount&&this.doClogBadge()}componentDidUpdate(e){!e.updateCount&&this.props.updateCount&&this.doClogBadge()}doClogBadge(){var e=this.props;const t=e.clogger,a=e.latestNewsTimestamp;t.track(de.EventId.WHATSNEW_ACTION,{action:"do_badge",trigger:String(a),step:String(a)})}renderCount(){const e=this.props.updateCount;if(e<=1)return null;const t=e>9?"9+":String(e),a=zR.t("{num_updates} Updates",{num_updates:t});return o.a.createElement(i.Fragment,null,o.a.createElement("span",{className:"p-classic_nav__right__whats_new_num_only","data-qa":"whats_new_btn_count"},t),o.a.createElement("span",{className:"p-classic_nav__right__whats_new_num_updates","data-qa":"whats_new_btn_count_full"},a))}render(){var e=this.props;const t=e.isActive,a=e.updateCount;if(!e.featureClassicNav)return null;if(!a)return null;if(t)return null;const n=zR.t("What\u2019s New");return o.a.createElement(Xr.c,{position:"bottom-right",tip:n},o.a.createElement(_e.c,{className:"p-classic_nav__right__button p-classic_nav__right__whats_new",onClick:this.props.showWhatsNew,"data-qa":"whats_new_button"},o.a.createElement(bn.b,{type:"emoji-celebration"}),this.renderCount()))}}whats_new_button_WhastNewButton.displayName="WhastNewButton",whats_new_button_WhastNewButton.defaultProps=$R;var YR=Object(u.b)(e=>({isActive:"whats_new"===Object(v.j)(e),featureClassicNav:Object(m.m)(e,"feature_classic_nav"),updateCount:Object(qA.e)(e),latestNewsTimestamp:Object(qA.d)(e),clogger:Object(ie.a)({state:e})}),e=>({showWhatsNew:(...t)=>e(Object(qa.p)(...t))}))(whats_new_button_WhastNewButton);a("tLal");const QR=new x.b("classic_nav"),XR=(l.default.string,l.default.bool,l.default.number.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool,{secondaryView:void 0,isWindowFrameless:!1,isAppLauncherView:!1}),JR=({secondaryView:e,isWindowFrameless:t,whatsNewCount:a,featureAppActionsGlobal:n,isAppLauncherView:s,featureChannelHeaderLabels:r})=>{const i=d()({"p-classic_nav__right_header":!0,"p-classic_nav__right_header--context_pane":e,"p-classic_nav__right_header--frameless":t,"p-classic_nav__right_header--whats_new_showing":!s&&a>0,"p-classic_nav__drag":t,"p-classic_nav__right_header--page_view":s}),l=s?o.a.createElement(o.a.Fragment,null,o.a.createElement(HA.a,null),o.a.createElement(GA,null)):o.a.createElement(o.a.Fragment,null,o.a.createElement(XA,null),o.a.createElement(dR,null),o.a.createElement(hR,null),n&&o.a.createElement(FR,null),o.a.createElement(VR,null),o.a.createElement(YR,null)),c=r?"group":void 0,u=r?QR.t("Search and additional options",{note:"Label for the right section of the Channel Header containing the search box and button to its right. Not visible on screen as it is only for customers using screen readers."}):void 0;return o.a.createElement("div",{className:i,role:c,"aria-label":u},l)};JR.displayName="RightHeader",JR.defaultProps=XR;var ZR=Object(u.b)(e=>({secondaryView:Object(v.j)(e),isWindowFrameless:Object(S.l)(e),whatsNewCount:Object(qA.e)(e),featureAppActionsGlobal:Object(m.m)(e,"feature_app_actions_global"),isAppLauncherView:Object(dg.a)(e)&&"Papps"===Object(_.a)(e),featureChannelHeaderLabels:Object(m.m)(e,"feature_channel_header_labels")}))(JR);a("05X0");l.default.string,l.default.bool,l.default.bool,l.default.func;const eM={className:void 0,forceNarrow:!1,hideChannelHeader:!1,renderSonicMenu:r.a},tM=({className:e,renderSonicMenu:t,hideChannelHeader:a,forceNarrow:n})=>o.a.createElement("div",{className:d()("p-classic_nav",e,{"p-classic_nav--narrow":n})},o.a.createElement(II,{renderSonicMenu:t}),!a&&o.a.createElement(i.Fragment,null,o.a.createElement(UA,null),o.a.createElement(ZR,null)));tM.displayName="ClassicNav",tM.defaultProps=eM;var aM=tM,nM=a("jA2l"),sM=a("XYlw"),rM=a("ManV"),iM=a("lyBs"),oM=a("brQN"),lM=a("OFWM"),cM=a("0Syo");const dM=Object(mt.b)("Ensure channels with drafts exist in our model",(e,t)=>{const a=t(),n=Object(Ot.a)({state:a,label:"DRAFTS"}),s=Object(re.a)()?Object(C.a)(a):Object(cM.e)();Object(io.a)(s)?n.info("There are no channels with drafts"):(n.info("Ensuring we have channel objects for all channels with drafts"),s.forEach(e=>{Object(B.e)(a,e)}))});dM.meta={name:"ensureDraftChannelObjects",key:"actionsEnsureDraftChannelObjectsEnsureDraftChannelObjects",description:"Ensure channels with drafts exist in our model"},dM.propTypes=null;var uM=dM,pM=a("eK5+");function hM(e){return Object(dg.a)(e)&&!Object(Je.Gb)(Object(bi.b)(e))}var mM=a("G4Tr");const bM=new x.b("a11y");var fM=a("Ik/9"),_M=a("Z3Pq");const gM=28,yM=/^channel_draft-/,OM=/^composer_draft-/,CM="treeitem",vM=new x.b("channel_sidebar"),EM={drafts:()=>vM.t("Drafts"),starred:()=>vM.t("Starred"),channels:()=>vM.t("Channels"),ims:()=>vM.t("Messages",{fallbackHash:"f1b1f5c277f7954dfbed1eddb8517dad1651b04b"}),apps:()=>vM.t("Recent apps",{fallbackHash:"eb537ca7589d275fa9d031a9a211ad476b691e63"})},kM={id:null,type:"spacer",height:12,key:null,role:"presentation"},SM={id:"Vall_threads",type:"allThreadsLink",height:gM,key:"Vall_threads",role:CM,"aria-level":1},jM={id:"Punreads",type:"pageLink",height:gM,key:"Punreads",role:CM,"aria-level":1},IM={id:null,type:"sectionHeading",name:"",height:36,role:CM,"aria-level":1},wM={id:null,type:"sectionHeadingAriaGroup",name:"",height:0,role:"group"},TM={id:null,type:"channel",index:null,height:28,role:CM,"aria-level":2},NM=s()({},TM,{type:"composer_draft",role:CM,"aria-level":2}),AM=s()({},TM,{type:"channel_draft",role:CM,"aria-level":2}),RM={id:null,type:"appDmSuggestion",index:null,height:28,role:CM,"aria-level":2};function MM(e,t){const a=uk(e&&e.id);if(!e||!a)return null;const n=a.sidebar&&a.sidebar.rowHeight||gM;return{id:e.id,key:e.id,type:"pageLink",height:n,scrollTop:t,scrollBottom:t+n,role:CM,"aria-level":1}}var PM=Object(yy.createSelector)([e=>e&&e.sidebarSectionsOrdered,e=>e&&e.sidebarSections,e=>e&&e.pages,e=>e&&e.hasAllUnreadsLink,e=>e&&e.hasThreadsLink,e=>e&&e.featureComposeFlow,e=>e&&e.showDraftsPageSidebar,e=>e&&e.primaryView,e=>e&&e.iap1MainMenuIsVisible,e=>e&&e.iaBrowsersEnabled,e=>e&&e.shouldUseChannelSections,e=>e&&e.isOrganizing],(e=[],t=[],a=[],n=!1,r=!1,i=!1,o=!1,l="",c=!1,d=!1,u=!1,p=!1)=>{const h=[];let m=0;h.push(s()({},kM,{id:"top-padding-spacer",key:"top-padding-spacer",height:12,scrollTop:m,scrollBottom:m+=12}));const b=a.find(e=>"Pwelcome"===e.id);if(b){const e=MM(b,m);h.push(e),m=e.scrollBottom}const f=!(u&&p),_=a.find(e=>"Phome"===e.id);if(_){const e=MM(_,m);h.push(e),m=e.scrollBottom}f&&n&&h.push(s()({},jM,{scrollTop:m,scrollBottom:m+=jM.height})),f&&r&&h.push(s()({},SM,{scrollTop:m,scrollBottom:m+=SM.height}));const g=MM(Object(qu.a)(a,{id:"Pactivity"}),m);f&&g&&(h.push(g),m=g.scrollBottom);const y=MM(Object(qu.a)(a,{id:"Pstars"}),m);if(f&&y&&(h.push(y),m=y.scrollBottom),f&&o){const e=MM(Object(qu.a)(a,{id:"Pdrafts"}),m);e&&(h.push(e),m=e.scrollBottom)}f&&(h.push(s()({},kM,{height:12,scrollTop:m,scrollBottom:m+=12})),h.push(s()({},IM,{name:"browse",scrollTop:m,scrollBottom:m+=IM.height,sectionName:"browse",key:"sectionHeading-browse","aria-expanded":!0}))),["Pbrowse-channels","Pdirectory","Papps",d?"Pbrowse-files":"Pfiles"].filter(e=>c||l===e).forEach(e=>{const t=MM(Object(qu.a)(a,{id:e}),m);t&&(h.push(t),m=t.scrollBottom)});let O=0;return e.forEach((a,n)=>{const r=t[a]||{},i=r.channelsOrdered||[],o=Object(Hu.a)(h);("sectionHeading"!==o.type&&"sectionHeadingAriaGroup"!==o.type||i.length>0)&&h.push(s()({},kM,{scrollTop:m,scrollBottom:m+=kM.height,key:`sectionHeading-spacer-${a}`}));const l=r.channelsOrdered.reduce((e,t)=>OM.test(t)?(e[t]=t.replace(OM,""),e):yM.test(t)?(e[t]=t.replace(yM,""),e):(e[t]=t,e),{});if(r.hasHeading){let i,o;if(u&&r.channelSection){var c=r.channelSection;const e=c.emoji,t=c.name;i=e?`${e} ${t}`:t}else i=EM[a]();if(u){const a=n>0&&e[n-1],s=a&&t[a];o=s?s.channelSection:void 0}h.push(s()({},IM,{"aria-label":i,name:a,scrollTop:m,scrollBottom:m+=IM.height,sectionName:a,key:`sectionHeading-${a}`,"aria-expanded":!0,channelIds:u?r.channelsOrdered:void 0,channelSection:r.channelSection,priorDisplayedChannelSection:o})),h.push(s()({},wM,{"aria-label":i,scrollTop:m,scrollBottom:m+=wM.height,key:`sectionHeadingAriaGroup-${a}`,"aria-owns":u&&r.isCollapsed?"":Object.values(l).join(" "),channelSection:r.channelSection}))}r.channelsOrdered.forEach(e=>{const t=l[e];let n,i;if(OM.test(e))n=NM;else if(yM.test(e)){n=AM;var o=Object(c_.b)(t);i={draftId:t,channelId:o.channelId,threadTs:o.threadTs}}else n=TM;u&&r.isCollapsed||h.push(s()({},n,{id:t,index:O,scrollTop:m,scrollBottom:m+=n.height,sectionName:a,channelSection:r.channelSection,channelSectionChannelIds:u?r.channelsOrdered:void 0,key:e,params:i})),O+=1}),"apps"===a&&(r.membersOrdered&&r.membersOrdered.forEach(e=>{const t=Object(Kb.a)(e)?RM:TM;h.push(s()({},t,{id:e,index:O,scrollTop:m,scrollBottom:m+=t.height,sectionName:a,key:e})),O+=1}),r.membersOrdered&&r.membersOrdered.length>0&&h.push(s()({},kM,{scrollTop:m,scrollBottom:m+=kM.height,key:"spacer-apps"})))}),h.push(s()({},kM,{scrollTop:m,scrollBottom:m+=kM.height,key:"spacer-footer-1"})),h.push(s()({},kM,{scrollTop:m,scrollBottom:m+=kM.height,key:"spacer-footer-2"})),i&&(h.push(s()({},kM,{scrollTop:m,scrollBottom:m+=kM.height,key:"spacer-footer-3"})),h.push(s()({},kM,{scrollTop:m,scrollBottom:m+=kM.height,key:"spacer-footer-4"})),h.push(s()({},kM,{scrollTop:m,scrollBottom:m+=kM.height,key:"spacer-footer-5"})),h.push(s()({},kM,{scrollTop:m,scrollBottom:m+=kM.height,key:"spacer-footer-6"})),h.push(s()({},kM,{scrollTop:m,scrollBottom:m+=kM.height,key:"spacer-footer-7"}))),{rows:h,rowsMap:Object(_M.a)(h,"id"),rowIds:Object(ht.a)(h,"id")}}),xM=a("Olm7"),LM=a("OL4R");const FM=Object(Ve.b)(e=>{const t=Object(Se.d)(e);return Object(xe.D)(t)?Object(ba.k)(e,"channel_sort"):"alphabetical"});FM.meta={name:"getChannelSortPref",key:"prefsStoreUserDerivedSelectorsGetChannelSortPrefGetChannelSortPref"};var DM=FM;const BM=[rT.k,rT.o,rT.n,rT.j,rT.m,rT.l,rT.i],UM=["defaultMentions","default","sharedMentions","shared","privateMentions","private","slackbot","you","imsMentions","ims"],qM=()=>({channelsOrdered:{default:UM.map(()=>[]),muted:UM.map(()=>[]),suggested:UM.map(()=>[])},hasHeading:!0,isCollapsed:!1,channelSection:null}),HM=Object(LM.a)(UM),WM=e=>e&&e.has_draft,GM=({channel:e,members:t,isCurrentlySelected:a,shouldHideReadChannels:n,shouldHideReadChannelsUnlessStarred:s,hasDraft:r,teamId:i,isSuggested:o,showAppDmSuggestions:l})=>{if(Object(q.db)(e))return!1;if(Object(q.Ob)(e))return!1;if(a)return!0;if(Object(q.fb)(i,e))return!0;if(Object(q.Y)(e))return!1;if(Object(q.jb)(e,t[Object(q.H)(e)]))return!1;if(!Object(q.ob)(e)&&!o)return!1;if((Object(q.ib)(e)||Object(q.qb)(e))&&!Object(q.tb)(e)&&Object(q.Eb)(e)&&!r)return!1;const c={members:t,selfTeamIds:{teamId:i},dangerouslyOverrideCreateSelectorSanityCheck:!0};if(Object(q.ib)(e)){const t=[Object(q.H)(e)];if(t[0]||Object(Ot.a)({teamId:i}).error("SIDEBAR-SECTIONS",`IM ${e.id} is missing its associated user`),!Object(Je.cb)(c,t))return i&&Object(bi.g)(c,t),!1}if(Object(q.qb)(e)){const t=Object(q.I)(e);if(t&&t.length||Object(Ot.a)({teamId:i}).error("SIDEBAR-SECTIONS",`MPIM ${e.id} is missing its associated members`),!Object(Je.cb)(c,t))return i&&Object(bi.g)(c,t),!1}return!(!s||!Object(q.Jb)(e))||(!!r||!(l&&n&&Object(q.X)(e,t)&&Object(q.Jb)(e)&&Object(q.Eb)(e))&&(!(!l||!Object(q.X)(e,t))||(!s&&!n||!Object(q.Eb)(e))))},KM={},VM={},zM={},$M=Object(an.a)(({channels:e,currentlySelectedId:t,mutedChannels:a,members:n,sidebarBehaviorPref:s,draftChannelIds:r,teamId:i,suggestedChannelIds:o,showAppDmSuggestions:l}={})=>{const c="hide_read_channels"===s,d="hide_read_channels_unless_starred"===s,u=[];let p=!1,h=!1,m=!1;const b=Object.keys(e);for(let f=0;f<b.length;f+=1){const s=e[b[f]];let _=-1!==r.indexOf(s.id);Object(re.a)()||(_=WM(s)),GM({channel:s,members:n,isCurrentlySelected:t===s.id,isMuted:!!a[s.id],shouldHideReadChannels:c,shouldHideReadChannelsUnlessStarred:d,hasDraft:_,teamId:i,isSuggested:-1!==o.indexOf(s.id),showAppDmSuggestions:l})&&u.push(s),p||(p=Object(q.fb)(i,s)||Object(q.Hb)(s)&&(Object(q.ob)(s)||t===s.id)),h||(h=Object(q.vb)(s)&&!Object(q.Cb)(s)),m||(m=Object(q.Jb)(s))}return{channelsVisible:u,belongsToOrPreviewingAnySharedChannels:p,belongsToAnyOrgChannels:h,hasAStarredChannel:m}},2);function YM({members:e,appChannels:t,flatSidebarSections:a,dismissedAppMembers:n,maxSuggestionsCount:s=10}){const r=Object(_M.a)(t,q.H),i=t.reduce((e,t)=>(a[rT.o]&&-1!==a[rT.o].channelsOrdered.indexOf(t.id)||e.push(t.id),e),[]);let o=[];const l=s-i.length;if(l>0){const t=Object.values(e).reduce((e,t)=>{const a=t.is_bot,s=t.id;return!a||r[s]||n[s]||Object(Je.mb)(t)||e.push(t),e},[]);t.sort((e,t)=>Object(x.r)(e.name,t.name)),o=t.map(e=>e.id).slice(0,l)}return i.concat(o)}const QM=Object(an.a)(({channelsSorted:e,belongsToOrPreviewingAnySharedChannels:t,members:a,mutedChannels:n,draftChannelIds:r,visibleUnifiedDrafts:i,withheldDraftIds:o,suggestedChannelIds:l,currentUserId:c,currentlySelectedId:d,teamId:u,sortPref:h,isGuest:b,shouldSeparateSharedChannels:f,shouldSeparateOrgWideChannels:_,shouldSeparatePrivateChannels:g,dismissedAppMembers:y,featureChannelSidebarDraftsSection:O,featureSilenceAppDMs:C,featureComposeFlowSidebar:v,shouldUseChannelSections:E,defaultChannelSectionsCollapsed:k,customChannelSectionsCollapsed:S,orderedChannelSections:j,allChannelSectionChannels:I,showAppDmSuggestions:w,showDraftsPageSidebar:T})=>{const N={},A=[],R=[],M={},P={},x={},L={};E?(R.push(rT.k),N[rT.k]=qM(),N[rT.k].channelSection=null,j.forEach(e=>{I[e.id].forEach(t=>{x[t]||(x[t]=[]),x[t].push(e.id)});const t=`custom-${e.id}`;let a;switch(M[e.id]=t,P[t]=e.id,e.type){case rT.b:a=rT.j,L[rT.j]=t;break;case rT.c:a=rT.l,L[rT.l]=t;break;case rT.d:a=rT.m,L[rT.m]=t;break;case rT.e:a=rT.i,L[rT.i]=t;break;case rT.f:a=rT.n,L[rT.n]=t;break;case rT.h:a=rT.o,L[rT.o]=t;break;case rT.g:default:a=t}R.push(a),N[a]=qM(),N[a].channelSection=e}),BM.forEach(e=>{N[e]||(R.push(e),N[e]=qM())})):BM.forEach(e=>{R.push(e),N[e]=qM()});const F=[],D=[];e.forEach(e=>{Object(q.ib)(e)&&F.push(Object(q.H)(e));const t=Object(q.X)(e,a),s=(({channel:e,isApp:t,isGuest:a,shouldSeparateSharedChannels:n,shouldSeparateOrgWideChannels:s,draftChannelIds:r,featureChannelSidebarDraftsSection:i,featureComposeFlowSidebar:o,currentlySelectedId:l,teamId:c})=>{const d=Object(p.getStateByTeamId)(c);return!o&&i&&(Object(fo.a)(r,e.id)||WM(e))&&(Object(m.m)(d,"feature_announce_only_websocket")||Object(te.p)(d,e.id))&&(l!==e.id||Object(fo.a)(VM[c],e.id)||KM[c]||(zM[c]=e.id),zM[c]&&l!==zM[c]&&delete zM[c],e.id!==zM[c])?rT.k:Object(q.Jb)(e)?rT.o:(Object(q.Hb)(e)||Object(q.fb)(c,e))&&n?rT.n:Object(q.vb)(e)&&!Object(q.Cb)(e)&&s?rT.m:t&&!a?rT.i:Object(q.ib)(e)||Object(q.qb)(e)?rT.l:rT.j})({channel:e,isApp:t,isGuest:b,shouldSeparateSharedChannels:f,shouldSeparateOrgWideChannels:_,draftChannelIds:r,featureChannelSidebarDraftsSection:O,featureComposeFlowSidebar:v,currentlySelectedId:d,teamId:u});t&&A.push(e);const i=!!n[e.id],o=Object(q.p)(e,i,C,Object(q.X)({channel:e,members:a})),y=(({channel:e,currentUserId:t,shouldSeparatePrivateChannels:a,shouldSeparateSharedChannels:n,shouldBumpMention:s})=>Object(q.Ib)(e)?HM.slackbot:Object(q.Rb)(e,t)?HM.you:Object(q.ib)(e)||Object(q.qb)(e)?s?HM.imsMentions:HM.ims:a&&Object(q.Cb)(e)?s?HM.privateMentions:HM.private:n&&Object(q.Hb)(e)?s?HM.sharedMentions:HM.shared:s?HM.defaultMentions:HM.default)({channel:e,currentUserId:c,shouldSeparatePrivateChannels:g,shouldSeparateSharedChannels:f,shouldBumpMention:"priority"===h&&o>0});let E;E=-1!==l.indexOf(e.id)?"suggested":i?"muted":"default",x[e.id]?x[e.id].forEach(t=>{const a=M[t];N[a].channelsOrdered[E][y].push(e.id)}):N[s].channelsOrdered[E][y].push(e.id),Object(re.a)()||WM(e)&&D.push(e.id)});const B={};l.forEach((e,t)=>{B[e]=t}),N.channels.channelsOrdered.suggested.forEach(e=>{e.sort((e,t)=>B[e]>B[t]?1:-1)}),VM[u]=[...r,...D];const U=Object(Eb.a)(N,e=>s()({},e,{channelsOrdered:Object(ji.a)([...e.channelsOrdered.default,...e.channelsOrdered.muted,...e.channelsOrdered.suggested])}));if(v){const e=Object(J.t)(i),t=[];e.forEach(e=>{const a=Object(J.d)(e);Object(J.p)(e)?t.push(`composer_draft-${a}`):Object(fo.a)(o,a)||t.push(`channel_draft-${a}`)}),U[rT.k].channelsOrdered=t}if((!O||T||U[rT.k].channelsOrdered.length<1)&&(delete U[rT.k],Object(xM.a)(R,e=>e===rT.k)),!E&&U[rT.o].channelsOrdered.length<1&&(delete U[rT.o],Object(xM.a)(R,e=>e===rT.o)),f&&t||(delete U[rT.n],Object(xM.a)(R,e=>e===rT.n)),(!_||U[rT.m].channelsOrdered.length<1)&&(delete U[rT.m],Object(xM.a)(R,e=>e===rT.m)),b?(delete U[rT.i],Object(xM.a)(R,e=>e===rT.i)):w&&(U[rT.i]={hasHeading:!0,channelsOrdered:[],membersOrdered:YM({members:a,appChannels:A,flatSidebarSections:U,dismissedAppMembers:y})}),E){Object.entries(L).forEach(e=>{var t=at()(e,2);const a=t[0],n=t[1];U[a]&&(U[n]=U[a],delete U[a])});const e=R.map(e=>L[e]||e);return e.forEach(e=>{const t=e===rT.k?!!k[rT.k]:!!S[P[e]];U[e].isCollapsed=t}),Object.entries(M).forEach(e=>{var t=at()(e,2);const a=t[0],n=t[1];if(U[n]){const e=!!S[a];U[n].isCollapsed=e}}),{sidebarSectionsOrdered:e,sidebarSections:U,orderedChannelSections:j,idsNeedingPresenceSubscription:F}}return{sidebarSectionsOrdered:R,sidebarSections:U,orderedChannelSections:j,idsNeedingPresenceSubscription:F}},3);var XM=e=>{const t=Object(h.b)(e),a=Object(B.b)(e),n=Object(xu.b)(e),s=Object(bi.a)(e),r=Object(C.a)(e),i=ne(e),o=Object(C.f)(e),l=Object(q.T)(e),c=Object(_.a)(e),d=Object(m.d)(e),u=(e=>Object(ba.k)(e,"sidebar_behavior"))(e),p=!Object(bo.c)(e)&&(e=>Object(ba.k)(e,"separate_private_channels"))(e),b=!Object(bo.c)(e)&&(e=>!Object(m.m)(e,"feature_channel_is_remove_create_shared_channel")&&Object(ba.k)(e,"separate_shared_channels"))(e),f=!Object(bo.c)(e)&&(e=>Object(ba.k)(e,"ent_org_wide_channels_sidebar"))(e),g=Object(ba.e)(e),y=Object(bi.l)(e),O=Object(m.u)(e),v=(e=>Object(m.m)(e,"feature_channel_sidebar_drafts_section"))(e),E=Object(C.j)(e),k="variant"===Object(ha.c)(e,"show_more_apps_in_sidebar_new_and_free"),S=Object(A.a)(e),j=S?PS(e):null,I=S?MS(e):null,w=S?CS(e):[],T=S?kS(e):{},N=Object(C.k)(e);void 0===KM[t]?KM[t]=!0:KM[t]&&(KM[t]=!1);var R=$M({channels:a,currentlySelectedId:c,mutedChannels:n,members:s,sidebarBehaviorPref:u,draftChannelIds:r,teamId:t,suggestedChannelIds:l,showAppDmSuggestions:k});const M=R.channelsVisible,P=R.belongsToOrPreviewingAnySharedChannels,L={};M.forEach(t=>{t&&t.id&&(L[t.id]=Object(q.x)(e,t,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}))});const F=(e,t)=>Object(x.r)(e&&L[e.id],t&&L[t.id]),D=(e,t)=>{const a=e.priority||-1,n=t.priority||-1;return a===n?F(e,t):n-a},U=DM(e),H=M.sort((e=>"priority"===e?D:F)(U));return QM({channelsSorted:H,belongsToOrPreviewingAnySharedChannels:P,members:s,mutedChannels:n,draftChannelIds:r,visibleUnifiedDrafts:i,withheldDraftIds:o,suggestedChannelIds:l,currentUserId:d,currentlySelectedId:c,teamId:t,sortPref:U,isGuest:y,shouldSeparateSharedChannels:b,shouldSeparateOrgWideChannels:f,shouldSeparatePrivateChannels:p,dismissedAppMembers:g,featureChannelSidebarDraftsSection:v,featureSilenceAppDMs:O,featureComposeFlowSidebar:E,shouldUseChannelSections:S,defaultChannelSectionsCollapsed:j,customChannelSectionsCollapsed:I,orderedChannelSections:w,allChannelSectionChannels:T,showAppDmSuggestions:k,showDraftsPageSidebar:N})};Object(Ia.a)("channelSidebar",{getDraftChannelToWithhold:()=>zM});const JM=26,ZM=/^channel_draft-/,eP=/^composer_draft-/,tP="treeitem",aP=new x.b("channel_sidebar"),nP={drafts:()=>aP.t("Drafts"),starred:()=>aP.t("Starred"),sharedChannels:()=>aP.t("Shared Channels"),channels:()=>aP.t("Channels"),orgWideChannels:()=>aP.t("Organization Channels"),ims:()=>aP.t("Direct Messages"),apps:()=>aP.t("Recent Apps")},sP={id:null,type:"topPadding",height:12,key:null,role:"presentation"},rP={id:null,type:"spacer",height:18,key:null,role:"presentation"},iP={id:null,type:"spacer",height:6,key:null,role:"presentation"},oP={id:"Vquick_switcher",type:"quickswitcherButton",height:52,key:"Vquick_switcher",role:tP,"aria-level":1},lP={id:"Vall_threads",type:"allThreadsLink",height:JM,key:"Vall_threads",role:tP,"aria-level":1},cP={id:"Punreads",type:"pageLink",height:JM,key:"Punreads",role:tP,"aria-level":1},dP={id:"Vsearch",type:"searchLink",height:JM,key:"Vsearch",role:tP,"aria-level":1},uP={id:null,type:"sectionHeading",name:"",height:JM,role:tP,"aria-level":1},pP={id:null,type:"sectionHeadingAriaGroup",name:"",height:0,role:"group"},hP={id:null,type:"folderHeading",name:"",height:JM,role:tP,"aria-level":1},mP={id:null,type:"channel",index:null,height:JM,role:tP,"aria-level":2},bP=s()({},mP,{type:"composer_draft",role:tP,"aria-level":2}),fP=s()({},mP,{type:"channel_draft",role:tP,"aria-level":2}),_P={id:null,type:"appDmSuggestion",index:null,height:JM,role:tP,"aria-level":2},gP={id:null,type:"addAChannelLink",dim:!1,height:JM,key:"addAChannelLink",role:tP,"aria-level":1},yP={id:null,type:"invitePeopleLink",dim:!1,height:JM,key:"invitePeopleLink",role:tP,"aria-level":1},OP={id:null,type:"installAppsLink",dim:!1,height:JM,key:"installAppsLink",role:tP,"aria-level":1},CP={id:null,type:"appSuggestionLinks",dim:!1,height:JM,key:"appSuggestionLinks",role:tP,"aria-level":1},vP={id:null,type:"upgradeSlackCTA",height:JM,key:"upgradeSlackCTA",role:tP,"aria-level":1},EP={id:null,type:"emptyState",index:null,height:JM,key:null,role:"presentation"};function kP(e,t){const a=uk(e.id),n=a.sidebar&&a.sidebar.rowHeight||JM;return{id:e.id,key:e.id,type:"pageLink",height:n,scrollTop:t,scrollBottom:t+n,role:tP,"aria-level":1}}var SP=Object(yy.createSelector)([e=>e&&e.hasQuickswitcherButton,e=>e&&e.hasAllUnreadsLink,e=>e&&e.hasSearchLink,e=>e&&e.hasAddAChannelLink,e=>e&&e.hasInvitePeopleLink,e=>e&&e.appSuggestionsCount,e=>e&&e.hasUpgradeSlackCTA,e=>e&&e.hasThreadsLink,e=>e&&e.hasAppsLink,e=>e&&e.hasInstallAppsLink,e=>e&&e.sidebarSectionsOrdered,e=>e&&e.sidebarSections,e=>e&&e.sidebarFoldersIsEnabled,e=>e&&e.sidebarFolders,e=>e&&e.pages,e=>e&&e.featureComposeFlow,e=>e&&e.shouldUseChannelSections,e=>e&&e.shouldHideForWelcomePlace,e=>e&&e.showDraftsPageSidebar],(e=!1,t=!1,a=!1,n=!1,r=!1,i=0,o=!1,l=!0,c=!1,d=!1,u=[],p={},h=!1,m=[],b=[],f=!1,_=!1,g=!1,y=!1)=>{let O=[];const C={};let v=0;!g&&e?O.push(s()({},oP,{scrollTop:v,scrollBottom:v+=oP.height})):O.push(s()({},sP,{scrollTop:v,scrollBottom:v+=sP.height,key:"top-padding"}));const E=b.find(e=>"Pwelcome"===e.id);if(E){const e=kP(E,v);O.push(e),v=e.scrollBottom}const k=b.find(e=>"Phome"===e.id);if(!g&&k){const e=kP(k,v);O.push(e),v=e.scrollBottom}t&&O.push(s()({},cP,{scrollTop:v,scrollBottom:v+=JM})),l&&O.push(s()({},lP,{scrollTop:v,scrollBottom:v+=lP.height})),a&&O.push(s()({},dP,{scrollTop:v,scrollBottom:v+=dP.height}));const S=b.find(e=>"Papps"===e.id);if(!g&&c){const e=kP(S,v);O.push(e),v=e.scrollBottom}const j=["Punreads","Pwelcome","Phome","Pcomposer","Papps","Ppaid-benefits"];y||j.push("Pdrafts");const I=b.filter(e=>-1===j.indexOf(e.id)),w=I.length;I.forEach((e,t)=>{const a=kP(e,v);O.push(s()({},a,{"aria-setsize":w,"aria-posinset":t+1})),v=a.scrollBottom});let T=0;h&&m.forEach(e=>{"folderHeading"!==Object(Hu.a)(O).type&&"sectionHeadingAriaGroup"!==Object(Hu.a)(O).type&&O.push(s()({},rP,{scrollTop:v,scrollBottom:v+=rP.height,key:`spacer-${e.name}`})),O.push(s()({},hP,{"aria-label":e.name,id:e.name,name:e.name,key:`folder-${e.name}`,"aria-expanded":!e.isCollapsed})),O.push(s()({},pP,{"aria-label":e.name,scrollTop:v,scrollBottom:v+=pP.height,"aria-owns":e.channelIds.join(" "),key:`aria-group-${e.name}`}));const t=e.channelIds.length;e.channelIds.forEach((a,n)=>{let r=!1;u.forEach(e=>{const t=(p[e]||{}).channelsOrdered||[];r=r||t.filter(e=>e===a).length>0}),r&&(e.isCollapsed||(O.push(s()({},mP,{id:a,index:T,scrollTop:v,scrollBottom:v+=mP.height,sectionName:e.name,key:a,"aria-setsize":t,"aria-posinset":n+1})),T+=1),C[a]=!0)})}),u.forEach((e,t)=>{const a=p[e]||{};if(!_&&a.channelSection)return;const o=a.channelsOrdered||[],l=_&&a.isCollapsed;if(_)O.push(s()({},iP,{scrollTop:v,scrollBottom:v+=iP.height,key:`sectionHeading-spacer-${e}`}));else{const t=Object(Hu.a)(O);("sectionHeading"!==t.type&&"sectionHeadingAriaGroup"!==t.type||o.length>0)&&O.push(s()({},rP,{scrollTop:v,scrollBottom:v+=rP.height,key:`sectionHeading-spacer-${e}`}))}const c=a.channelsOrdered.reduce((e,t)=>eP.test(t)?(e[t]=t.replace(eP,""),e):ZM.test(t)?(e[t]=t.replace(ZM,""),e):(e[t]=t,e),{});if(a.hasHeading){let n,r;if(_&&a.channelSection){var h=a.channelSection;const e=h.emoji,t=h.name;n=e?`${e} ${t}`:t}else n=nP[e]();if(_){const e=t>0&&u[t-1],a=e&&p[e];r=a?a.channelSection:void 0}O.push(s()({},uP,{"aria-label":n,name:e,scrollTop:v,scrollBottom:v+=uP.height,sectionName:e,key:`sectionHeading-${e}`,"aria-expanded":!l,channelIds:_?a.channelsOrdered:void 0,channelSection:a.channelSection,priorDisplayedChannelSection:r})),O.push(s()({},pP,{"aria-label":n,scrollTop:v,scrollBottom:v+=pP.height,key:`sectionHeadingAriaGroup-${e}`,"aria-owns":_&&a.isCollapsed?"":Object.values(c).join(" "),channelSection:a.channelSection}))}const m=a.channelsOrdered.length;a.channelsOrdered.forEach((t,n)=>{if(C[t])return;const r=c[t];let i,o;if(eP.test(t))i=bP;else if(ZM.test(t)){i=fP;var l=Object(c_.b)(r);o={draftId:r,channelId:l.channelId,threadTs:l.threadTs}}else i=mP;_&&a.isCollapsed||(O.push(s()({},i,{id:r,index:T,scrollTop:v,scrollBottom:v+=i.height,sectionName:e,channelSection:a.channelSection,channelSectionChannelIds:_?a.channelsOrdered:void 0,key:t,params:o,"aria-setsize":m,"aria-posinset":n+1})),T+=1)}),!g&&"channels"===e&&n&&(O.push(s()({},rP,{scrollTop:v,scrollBottom:v+=rP.height,key:"spacer-addAChannelLink"})),O.push(s()({},gP,{dim:!0,height:gP.height,scrollTop:v,scrollBottom:v+=gP.height}))),"ims"===e&&r&&(O.push(s()({},rP,{scrollTop:v,scrollBottom:v+=rP.height,key:"spacer-invite-people"})),O.push(s()({},yP,{dim:"dim"===r,height:yP.height,scrollTop:v,scrollBottom:v+=yP.height})));const b="apps"===e&&a.membersOrdered,f=b&&b.length;if("apps"===e){if(a.membersOrdered&&a.membersOrdered.forEach((t,a)=>{const n=Object(Kb.a)(t)?_P:mP;O.push(s()({},n,{id:t,index:T,scrollTop:v,scrollBottom:v+=n.height,sectionName:e,key:t,"aria-posinset":a+1,"aria-setsize":f})),T+=1}),a.membersOrdered&&a.membersOrdered.length>0&&O.push(s()({},rP,{scrollTop:v,scrollBottom:v+=rP.height,key:"spacer-apps"})),!g&&Number.isFinite(i)&&i>0){const e=i*CP.height;O.push(s()({},CP,{height:e,scrollTop:v,scrollBottom:v+=e}))}!g&&d&&O.push(s()({},OP,{height:OP.height,scrollTop:v,scrollBottom:v+=OP.height}))}});const N=b.find(e=>"Ppaid-benefits"===e.id);if(N){O.push(s()({},EP,{scrollTop:v,scrollBottom:v+=EP.height,key:"benefits-page-empty-state-1"}));const e=kP(N,v);O.push(e),v=e.scrollBottom}o&&(O.push(s()({},EP,{scrollTop:v,scrollBottom:v+=EP.height,key:"upgrade-slack-cta-empty-state-1"})),O.push(s()({},vP,{height:vP.height,scrollTop:v,scrollBottom:v+=vP.height})),O.push(s()({},EP,{scrollTop:v,scrollBottom:v+=EP.height,key:"upgrade-slack-cta-empty-state-2"}))),O.push(s()({},rP,{scrollTop:v,scrollBottom:v+=rP.height,key:"spacer-footer-1"})),O.push(s()({},rP,{scrollTop:v,scrollBottom:v+=rP.height,key:"spacer-footer-2"})),f&&(O.push(s()({},rP,{scrollTop:v,scrollBottom:v+=rP.height,key:"spacer-footer-3"})),O.push(s()({},rP,{scrollTop:v,scrollBottom:v+=rP.height,key:"spacer-footer-4"})));const A=O.filter(e=>1===e["aria-level"]),R=A.length,M=A.reduce((e,t,a)=>(e[t.key]=a+1,e),{});return{rows:O=O.map(e=>1===e["aria-level"]?s()({},e,{"aria-setsize":R,"aria-posinset":M[e.key]}):e),rowsMap:Object(_M.a)(O,"id"),rowIds:Object(ht.a)(O,"id")}}),jP=a("kMOi");const IP=new x.b("channel_sidebar"),wP=(e,t)=>{const a=Object(rM.f)(e,t),n=Object(jP.c)(a),s=Object(jP.e)(a),r=((e,t)=>{const a=Object(rM.f)(e,t);return Object(jP.d)(a)})(e,t),i=Object(Se.d)(e);if(!n||!s)return{};let o="";const l=Object(jP.b)(a)||"";return!r&&l&&(o=l).startsWith("/")&&(o=Object(xe.n)(i,o)),{appId:n,isInstall:r,href:o||Object(xe.n)(i,`/apps/${n}`),text:r?IP.t("Install {name}",{name:s}):IP.t("Connect {name}",{name:s}),label:IP.t("Dismiss {name} suggestion",{name:s}),dismissKey:r?`${t}_install_prompt_dismissed`:`${t}_connect_prompt_dismissed`,clogUiElement:r?"app_install_prompt":"app_connect_prompt"}},TP=e=>Object(rM.g)(e).length;var NP=a("vPIQ"),AP=a("ukIz"),RP=a("+Xah"),MP=a("Po2o"),PP=a("+yap"),xP=a("2Y1Y"),LP=a("yt6e"),FP=a("ARZM");a("Fsvi");l.default.string.isRequired,l.default.string,l.default.string,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.bool,l.default.bool;const DP={query:void 0,plainTextQuery:void 0,shouldUseChannelSections:!1,isOrganizing:!1};class omniswitcher_button_OmniswitcherButton extends i.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.onClearClick=this.onClearClick.bind(this)}onClick(){this.props.query?this.props.openFromClick():this.props.maybeShowOmniSwitcher()}onClearClick(){this.props.clearSearchInput()}render(){var e=this.props;const t=e.teamName,a=e.query,n=e.plainTextQuery,s=e.isOrganizing,r=this.props.shouldUseChannelSections&&s,i=d()("p-ia__omniswitcher_button",{"p-ia__omniswitcher_button--organizing":r});return a?o.a.createElement("div",{className:"p-ia__omniswitcher_button__search_container"},o.a.createElement(_e.c,{onClick:this.onClick,className:i},o.a.createElement(pe.a,{type:"search-medium",size:"inherit",className:"p-ia__omniswitcher_button__icon"})," ",o.a.createElement("span",{className:"p-ia__omniswitcher_button__text"},"Search: ",n)),o.a.createElement(_e.c,{onClick:this.onClearClick,className:"p-ia__omniswitcher_button__search_clear"},o.a.createElement(pe.a,{type:"times-medium"}))):o.a.createElement(_e.c,{onClick:this.onClick,className:i,disabled:r,"aria-disabled":r},o.a.createElement(pe.a,{type:"search-medium",size:"inherit",className:"p-ia__omniswitcher_button__icon"})," ",o.a.createElement("span",{className:"p-ia__omniswitcher_button__text"},"Search ",t),o.a.createElement("div",{className:"p-ia__omniswitcher_button__shortcut"},Object(ue.q)()?"\u2318K":"Ctrl+K"))}}omniswitcher_button_OmniswitcherButton.displayName="OmniswitcherButton",omniswitcher_button_OmniswitcherButton.defaultProps=DP;var BP=Object(u.b)(e=>{const t=Object(KA.b)(e),a=Object(Se.d)(e);return{query:t,teamName:Object(xe.s)(a)?Object(Se.e)(e):Object(xe.e)(a),plainTextQuery:t?Object(zA.a)(e,t):void 0,shouldUseChannelSections:Object(A.a)(e),isOrganizing:NS(e)}},e=>({maybeShowOmniSwitcher:(...t)=>e(Object(FP.a)(...t)),openFromClick:(...t)=>e(Object(oC.a)(...t)),clearSearchInput:(...t)=>e(Object(VA.a)(...t))}))(omniswitcher_button_OmniswitcherButton);a("/6P7");const UP=new x.b("channel_sidebar"),qP=(l.default.arrayOf(l.default.shape({channelSectionId:l.default.string.isRequired,channelId:l.default.string.isRequired})),l.default.func,l.default.bool,{selectedItems:[],clearAllOrganizingSections:r.a,featureChannelSections:!1});class organize_move_to_button_OrganizingMoveToButton extends i.Component{constructor(e){super(e),this.onItemSelected=this.onItemSelected.bind(this)}onItemSelected(){this.props.clearAllOrganizingSections()}render(){if(!this.props.featureChannelSections)return null;const e=this.props.selectedItems.length<1,t=this.props.selectedItems.map(e=>e.channelId);return o.a.createElement(_T,{channelIds:t,onItemSelected:this.onItemSelected},o.a.createElement(_e.c,{disabled:e,"data-qa":"organize_move_button",className:d()("p-channel_sidebar__jumper","p-channel_sidebar__organize_button",{"p-channel_sidebar__organize_button--disabled":e})},UP.t("Move to\u2026")))}}organize_move_to_button_OrganizingMoveToButton.displayName="OrganizingMoveToButton",organize_move_to_button_OrganizingMoveToButton.defaultProps=qP;const HP={clearAllOrganizingSections:(...e)=>Object(bS.a)(...e)};var WP=Object(u.b)(e=>({selectedItems:FS(e),featureChannelSections:Object(m.m)(e,"feature_channel_sections")}),HP)(organize_move_to_button_OrganizingMoveToButton);a("wMxR");const GP=new x.b("coachmarks"),KP=150,VP=-500,zP=(l.default.element,l.default.string,l.default.string,l.default.number,l.default.oneOfType([l.default.node,l.default.func]),l.default.oneOf(["above_fs","fs","menu","below_menu"]),l.default.func,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.string,l.default.string,l.default.string,l.default.node,l.default.oneOfType([l.default.func,l.default.bool]),{children:void 0,className:void 0,position:"right",delay:0,content:"",zIndex:"above_fs",onContinue:r.a,onShow:r.a,onSkip:r.a,hasCloseButton:!0,hasSkipLink:!0,hasSkipButton:!1,skipButtonText:"",skipLinkPre:"",skipLinkText:"",continueButtonText:"",title:"",shouldShow:!1});class coachmark_DeprecatedCoachmark extends i.PureComponent{constructor(){super(),this.state={isShowing:!1,contentsRect:null},this.setCoachmarkedContentRef=this.setCoachmarkedContentRef.bind(this),this.setCoachmarkRef=this.setCoachmarkRef.bind(this),this.maybeShowCoachmark=this.maybeShowCoachmark.bind(this),this.measureContents=this.measureContents.bind(this),this.onSkipClick=this.onSkipClick.bind(this),this.onCloseClick=this.onCloseClick.bind(this),this.onContinueClick=this.onContinueClick.bind(this),this.containClickEvents=this.containClickEvents.bind(this),this.onResize=Object(oa.a)(this.measureContentsAndSetState.bind(this),KP,{maxWait:KP})}componentWillUnmount(){this.hideCoachmark(),window.clearTimeout(this.delayTimer),this.onResize.cancel(),this.listenerInstalled&&(window.removeEventListener("resize",this.onResize),this.listenerInstalled=!1)}onCloseClick(e){this.hideCoachmark(),this.props.onSkip(e,"CLOSE")}onContinueClick(e){this.hideCoachmark(),this.props.onContinue(e)}onSkipClick(e){this.hideCoachmark(),this.props.onSkip(e,"SKIP")}setCoachmarkRef(e){this.coachmark=e}setCoachmarkedContentRef(e){this.coachmarkedContent=e}UNSAFE_componentWillMount(){this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay)}UNSAFE_componentWillReceiveProps(e){this.props.shouldShow!==e.shouldShow&&!0===e.shouldShow?this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay):this.props.shouldShow!==e.shouldShow&&!1===e.shouldShow&&this.hideCoachmark()}containClickEvents(e){e.stopPropagation()}hideCoachmark(){this.setState(()=>({isShowing:!1,contentsRect:null})),window.removeEventListener("resize",this.onResize),this.listenerInstalled=!1}maybeShowCoachmark(){(Object(kb.a)(this.props.shouldShow)?this.props.shouldShow():this.props.shouldShow)?(this.setState(()=>({isShowing:!0,contentsRect:this.measureContents()})),window.addEventListener("resize",this.onResize),this.listenerInstalled=!0,this.props.onShow()):this.hideCoachmark()}measureContents(){return this.coachmarkedContent?Object(Gc.findDOMNode)(this.coachmarkedContent).getBoundingClientRect():null}measureContentsAndSetState(){this.setState(()=>({contentsRect:this.measureContents()}))}renderCloseButton(){return this.props.hasCloseButton?o.a.createElement(_e.c,{className:"p-coachmark__close_btn","data-qa":"coachmark_close_btn",onClick:this.onCloseClick,"aria-label":GP.t("Close")},o.a.createElement(bn.a,{type:"times"})):null}renderContent(){return o.a.createElement("div",{className:"p-coachmark__content"},this.props.content)}renderFooter(){const e=this.props.hasSkipLink?"p-coachmark__footer":d()("p-coachmark__footer","margin_top_100"),t=this.props.continueButtonText||GP.t("Got It",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0"});return o.a.createElement("div",{className:e},this.renderSkipLink(),this.renderSkipButton(),o.a.createElement(_e.d,{onClick:this.onContinueClick,className:"p-coachmark__continue_button","data-qa":"coachmark_continue_btn"},t))}renderSkipButton(){return this.props.hasSkipButton?o.a.createElement(_e.d,{onClick:this.onSkipClick,type:"outline",className:"p-coachmark__skip_button margin_right_50","data-qa":"coachmark_skip_btn"},this.props.skipButtonText):null}renderSkipLink(){if(!this.props.hasSkipLink)return null;const e=this.props.skipLinkPre||GP.t("Done?"),t=this.props.skipLinkText||GP.t("Click here to skip");return o.a.createElement("div",{className:"p-coachmark__skip_link"},o.a.createElement("span",null,e),e&&" ",o.a.createElement(_e.c,{className:"p-coachmark__skip_link_button","data-qa":"coachmark_skip_link",onClick:this.onSkipClick},t))}renderTitle(){return o.a.createElement("h3",{className:"p-coachmark__title"},this.props.title)}render(){var e=this.props;const t=e.children,a=e.position,n=e.zIndex;var s=this.state;const r=s.isShowing,i=s.contentsRect,l=d()("p-coachmark",`p-coachmark--${a}`,this.props.className),c=r&&o.a.createElement(cN.a,{isOpen:r,position:a,targetBounds:i,allowanceX:VP,allowanceY:VP,zIndex:n,key:"coachmark-popover",onClose:this.onCloseClick},o.a.createElement("div",{className:l,"data-qa":"coachmark",onClick:this.containClickEvents,ref:this.setCoachmarkRef,role:"presentation"},o.a.createElement("div",{className:"p-coachmark__callout"}),this.renderCloseButton(),this.renderTitle(),this.renderContent(),this.renderFooter()));return o.a.cloneElement(t,{ref:this.setCoachmarkedContentRef},[...o.a.Children.toArray(t.props.children),c])}}coachmark_DeprecatedCoachmark.displayName="DeprecatedCoachmark",coachmark_DeprecatedCoachmark.defaultProps=zP;var $P=coachmark_DeprecatedCoachmark;const YP=new x.b("channel_sidebar"),QP=(l.default.oneOf(["SHOW_BUTTON","HIDE_BUTTON","HIDE_BUTTON_PENDING"]),l.default.func,l.default.func,l.default.func,l.default.object.isRequired,l.default.func,l.default.bool,l.default.bool,{coachmarkState:void 0,setJumperCoachmarkState:r.a,setUserPrefByApi:r.a,maybeShowOmniSwitcher:r.a,openFromQuickSwitcherCmd:r.a,historyNavigationEnabled:!1,useHistoryNavigation:!1});class quickswitcher_button_QuickswitcherButton extends i.Component{constructor(e){super(e),this.hideCoachmark=this.hideCoachmark.bind(this),this.hideButton=this.hideButton.bind(this),this.onShowContinue=this.onShowContinue.bind(this),this.onShowSkip=this.onShowSkip.bind(this),this.onHideContinue=this.onHideContinue.bind(this),this.onHideSkip=this.onHideSkip.bind(this),this.onButtonClick=this.onButtonClick.bind(this)}onShowContinue(e){e.stopPropagation(),this.clog("OK"),this.hideCoachmark()}onShowSkip(e,t){switch(e.stopPropagation(),t){case"SKIP":return this.clog("SKIP"),this.hideButton();case"CLOSE":return this.clog("CLOSE"),this.hideCoachmark();default:return null}}onHideContinue(e){e.stopPropagation(),this.clog("OK"),this.hideButton()}onHideSkip(e,t){switch(e.stopPropagation(),t){case"SKIP":return this.clog("SKIP"),this.hideCoachmark();case"CLOSE":return this.clog("CLOSE"),this.hideButton();default:return null}}onButtonClick(){this.props.openFromQuickSwitcherCmd({key:"button"})}clog(e){var t=this.props;const a=t.clogger,n={SHOW_BUTTON:"SIDEBAR_JUMPER_BUTTON_SHOW",HIDE_BUTTON:"SIDEBAR_JUMPER_BUTTON_HIDE"}[t.coachmarkState];a.track("SIDEBAR_JUMPER_COACHMARK",{contexts:{ui_context:{action:e,step:n}}})}hideCoachmark(){this.props.setJumperCoachmarkState(null)}hideButton(){this.hideCoachmark(),this.props.setUserPrefByApi({pref:"show_sidebar_quickswitcher_button",value:!1}),this.props.setUserPrefByApi({pref:"k_key_omnibox_auto_hide_count",value:5})}maybeRenderCoachmark(e){const t={SHOW:{title:YP.rt("Get around Slack faster <sparkles></sparkles>",null,({tag:e,key:t})=>"sparkles"===e?o.a.createElement(Ho.b,{key:t,text:":sparkles:",emojiSize:Ho.a.MEDIUM}):null),content:YP.rt("To jump to a channel, person, or file \u2014 or even kick off a Slack search \u2014 try using the <strong>Quick Switcher</strong>. Summon it with this button or {shortcut}.",{shortcut:Object(ue.q)()?"\u2318K":"Ctrl+K",fallbackHash:"e5c4c0b492d4a5244f99eabd8b8d5bc558e93e55"}),skipLinkText:YP.t("Hide the sidebar button"),continueButtonText:YP.t("OK")},HIDE:{title:YP.t("You\u2019re a pro at keyboard shortcuts"),content:YP.rt("Looks like you\u2019ve gotten the hang of using {shortcut} to summon the Quick Switcher. If you\u2019d like, you can gain back some sidebar space by hiding the <strong>Jump to</strong> button.",{shortcut:Object(ue.q)()?"\u2318K":"Ctrl+K"}),skipLinkText:YP.t("No thanks, I like the button"),continueButtonText:YP.t("Hide Button")}},a={skipLinkPre:"",position:"right-bottom",shouldShow:!0,hasCloseButton:!1,className:"p-channel_sidebar__jumper_coachmark"};switch(this.props.coachmarkState){case"SHOW_BUTTON":return this.clog("IMPRESSION"),o.a.createElement($P,s()({},a,t.SHOW,{onContinue:this.onShowContinue,onSkip:this.onShowSkip}),e);case"HIDE_BUTTON":return this.clog("IMPRESSION"),o.a.createElement($P,s()({},a,t.HIDE,{onContinue:this.onHideContinue,onSkip:this.onHideSkip}),e);default:return e}}render(){var e=this.props;const t=e.historyNavigationEnabled,a=e.useHistoryNavigation,n=Object(ue.q)()?"\u2318K":"Ctrl+K",s=YP.t("Quick Switcher ({keyboardShortcut})",{keyboardShortcut:n,fallbackHash:"66d3ce0aa57a3b14881f5588807ccbd726af7a15",fallbackHashNs:"quick_switcher"}),r=o.a.createElement(_e.c,{className:"p-channel_sidebar__jumper",onClick:this.onButtonClick,"aria-label":s},o.a.createElement("div",{className:"p-channel_sidebar__jumper_left"},o.a.createElement(bn.a,{type:"filter",inherit:!0,align:"baseline",className:"p-channel_sidebar__jumper_icon"}),YP.t("Jump to...",{note:"This label should be brief. It needs to fit in a 192px wide container."})),!a&&o.a.createElement("span",{className:"p-channel_sidebar__jumper_keys"},n));return t?r:this.maybeRenderCoachmark(r)}}quickswitcher_button_QuickswitcherButton.displayName="QuickswitcherButton",quickswitcher_button_QuickswitcherButton.defaultProps=QP;var XP=Object(u.b)(e=>({coachmarkState:Object(rM.i)(e),clogger:Object(ie.a)({state:e}),historyNavigationEnabled:Object(ja.a)(e),useHistoryNavigation:Object(ja.b)(e)}),e=>({setJumperCoachmarkState:(...t)=>e(Object(rM.q)(...t)),setUserPrefByApi:(...t)=>e(Object(Ka.f)(...t)),maybeShowOmniSwitcher:(...t)=>e(Object(FP.a)(...t)),openFromQuickSwitcherCmd:(...t)=>e(Object(oC.g)(...t))}))(quickswitcher_button_QuickswitcherButton);l.default.string.isRequired,l.default.func.isRequired,l.default.bool.isRequired,l.default.string,l.default.string,l.default.string;const JP={tooltip:void 0,ariaLabel:void 0,className:void 0},ZP=e=>{const t=e.iconType,a=e.onClick,n=e.isDisabled,s=e.tooltip,r=e.ariaLabel,i=e.className,l=d()("p-channel_sidebar__history_button",i,{"p-channel_sidebar__history_button--disabled":n});return o.a.createElement(tg.c,{tip:s,position:"bottom",delay:tg.a},o.a.createElement(_e.c,{className:l,onClick:a,"aria-label":r,"aria-disabled":n,tabIndex:n?-1:void 0},o.a.createElement(bn.b,{type:t})))};ZP.displayName="HistoryButton",ZP.defaultProps=JP;var ex=ZP;const tx=new x.b("navigation");l.default.string.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.bool,l.default.bool;class history_History extends i.Component{constructor(e){super(e),this.onBackClick=this.onBackClick.bind(this),this.onForwardClick=this.onForwardClick.bind(this)}componentDidMount(){Ra()}componentDidUpdate(e){this.props.primaryView!==e.primaryView&&Ra()}onBackClick(){this.props.triggerNavigateBack({fromKeyboardShortcut:!1})}onForwardClick(){this.props.triggerNavigateForward({fromKeyboardShortcut:!1})}render(){var e=this.props;const t=e.historyNavigationEnabled,a=e.isIAP1Enabled;if(!t)return null;let n=tx.t("Previous conversation"),s=tx.t("Next conversation");return a&&(n=o.a.createElement("div",null,o.a.createElement("div",null,"Previous"),o.a.createElement("div",{className:"sk_light_gray"},Object(ue.q)()?"\u2318[":"Ctrl \u2190")),s=o.a.createElement("div",null,o.a.createElement("div",null,"Next"),o.a.createElement("div",{className:"sk_light_gray"},Object(ue.q)()?"\u2318]":"Ctrl \u2192]"))),o.a.createElement(i.Fragment,null,o.a.createElement(ex,{onClick:this.onBackClick,tooltip:n,ariaLabel:tx.t("Move to the previous conversation"),className:"p-channel_sidebar__history_button-left",iconType:"chevron-medium-left",isDisabled:Ma()}),o.a.createElement(ex,{onClick:this.onForwardClick,tooltip:s,ariaLabel:tx.t("Move to the next conversation"),className:"p-channel_sidebar__history_button-right",iconType:"chevron-medium-right",isDisabled:Pa()}))}}history_History.displayName="History",history_History.defaultProps={historyNavigationEnabled:!1,isIAP1Enabled:!1};var ax=Object(u.b)(e=>({historyNavigationEnabled:Object(ja.a)(e),primaryView:Object(_.a)(e)}),e=>({triggerNavigateForward:t=>e(Fa(t)),triggerNavigateBack:t=>e(La(t))}),null,{pure:!1})(history_History);const nx=new x.b("channel_sidebar"),sx=(l.default.bool,l.default.bool,l.default.bool,e=>{const t=nx.t("Navigation",{fallbackHash:"cf03cf2e9cdf95a20af09137dfb9071db0c31bf2",fallbackHashNs:"shortcuts_flexpane"});return o.a.createElement("div",{className:"p-channel_sidebar__navigation_bar",role:"toolbar","aria-orientation":"vertical","aria-label":t},e.shouldUseChannelSections&&e.isOrganizing?o.a.createElement(WP,null):o.a.createElement(i.Fragment,null,o.a.createElement(XP,null),e.useHistoryNavigation&&o.a.createElement(ax,null)))});sx.displayName="NavigationBar",sx.defaultProps={useHistoryNavigation:!1,shouldUseChannelSections:!1,isOrganizing:!1};var rx=Object(u.b)(e=>({shouldUseChannelSections:Object(A.a)(e),isOrganizing:NS(e)}),{})(sx),ix=a("lfjV"),ox=a("rCFu"),lx=a("oUPN");l.default.bool.isRequired,l.default.func.isRequired,l.default.bool,l.default.bool;const cx=e=>e.shouldUseChannelSections&&e.isOrganizing?null:o.a.createElement(_e.c,{className:d()("p-channel_sidebar__section_heading p-channel_sidebar__section-heading--browse",{"p-channel_sidebar__section_heading--collapsed":!e.iap1MainMenuIsVisible}),role:"group",onClick:()=>e.setIAP1MainMenuIsVisible(!e.iap1MainMenuIsVisible)},o.a.createElement(bn.b,{className:"p-channel_sidebar__section_heading_expand","data-qa":"channel-section-collapse",type:"caret-right",size:"inherit",inline:!0}),o.a.createElement("span",{className:"p-channel_sidebar__section_heading_label"},"Directory"));cx.displayName="BrowseHeading",cx.defaultProps={shouldUseChannelSections:!1,isOrganizing:!1};var dx=Object(u.b)(e=>({iap1MainMenuIsVisible:Object(rM.h)(e),shouldUseChannelSections:Object(A.a)(e),isOrganizing:NS(e)}),e=>({setIAP1MainMenuIsVisible:(...t)=>e(Object(rM.p)(...t))}))(cx),ux=a("lwWk"),px=a("ESRc"),hx=a("eD8c");const mx={};var bx=Object(kt.a)(function(e,t){let a=mx[e.teamId];return a||(a={},mx[e.teamId]=a),(...n)=>{const s=t({eventId:n[0],payload:n[1]});a[s]||(a[s]=!0,e.track(...n))}});const fx=new x.b("channel_sidebar"),_x=(l.default.string.isRequired,l.default.string.isRequired,l.default.func,l.default.string.isRequired,l.default.string.isRequired,l.default.func,l.default.bool.isRequired,l.default.bool,l.default.object,{selectItem:r.a,dismissInstalledAppDmSuggestion:r.a,featureSidebarVirtualized:!1,clogger:{track:r.a}}),gx=({eventId:e,payload:t})=>`${e}-${t.contexts.ui_context.action}-${t.contexts.core.app_id}`,yx=({action:e,appId:t})=>({contexts:{ui_context:{action:e},core:{app_id:t}}});function Ox({id:e,name:t,appId:a,teamDomain:n,startImByMemberId:s,dismissInstalledAppDmSuggestion:r,featureSidebarContextMenu:l,featureSidebarVirtualized:c,clogger:u}){Object(i.useEffect)(()=>{bx(u,gx)(de.EventId.APP_SIDEBAR,yx({action:de.UiAction.IMPRESSION,appId:a}))});var p=Object(i.useState)(!1),h=at()(p,2);const m=h[0],b=h[1],f=Object(i.useCallback)(t=>{t.preventDefault(),u.track(de.EventId.APP_SIDEBAR,yx({action:de.UiAction.CLICK,appId:a})),s({memberId:e})},[u,a,s,e]),_=Object(i.useCallback)(()=>r({memberId:e,appId:a}),[a,r,e]),g=Object(i.useCallback)(()=>[{label:fx.t("Dismiss app"),click:_}],[_]),y=Object(i.useCallback)(e=>{e.target.offsetWidth<e.target.scrollWidth&&b(!0)},[b]),O=c?-1:void 0,C=o.a.createElement(_e.c,{onClick:_,className:"p-channel_sidebar__close","aria-label":c?void 0:fx.t("Dismiss app"),"aria-hidden":!!c||void 0,tabIndex:O},o.a.createElement(bn.a,{type:"times-circle-medium"})),v=o.a.createElement("div",{className:"p-channel_sidebar__close_container"},o.a.createElement(ux.a,{href:Object(q.o)({channelId:e,teamDomain:n}),className:"p-channel_sidebar__channel p-channel_sidebar__channel--suggested",onClick:f,"data-qa-channel-sidebar-channel":!0,"data-qa-channel-sidebar-channel-id":e,draggable:!1,"data-drag-type":"channel","data-drag-id":e,tabIndex:O,role:c?"presentation":void 0},o.a.createElement(rS.a,{className:"p-channel_sidebar__presence_icon",memberId:e,enablePresenceSubscriptions:!1,inline:!1}),o.a.createElement(Xr.c,{delay:Xr.a,position:"top-left",tip:t,tipClassName:d()({hidden:!m})},o.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name",onMouseEnter:y},t))),C);return l?o.a.createElement(hx.a,{getTemplate:g},v):v}Ox.defaultProps=_x;var Cx=Object(u.b)((e,{id:t})=>{const a=Object(bi.d)(e,t,!1);return{featureSidebarContextMenu:Object(m.m)(e,"feature_sidebar_context_menu"),teamDomain:Object(Se.d)(e).domain,name:Object(Je.W)(e,t),appId:Object(Je.p)(a),clogger:Object(ie.a)({state:e}),featureSidebarVirtualized:Object(m.m)(e,"feature_sidebar_virtualized")}},e=>Object(cg.b)({dismissInstalledAppDmSuggestion:px.a,startImByMemberId:wi.startImByMemberId},e))(Ox),vx=a("jkD3"),Ex=a("IEnm");const kx=Object(mt.b)("Dismiss suggested channel from channels list",(e,t,{channelId:a}={})=>{e(Object(Ex.d)({ids:[a]}));const n=Object(ba.i)(t()).split(","),s=n.indexOf(a);-1!==s&&(n.splice(s,1),e(Object(Ka.f)({pref:"newxp_suggested_channels",value:n.join(",")})))});kx.meta={name:"dismissSuggestedChannel",key:"actionsDismissSuggestedChannelDismissSuggestedChannel",description:"Dismiss suggested channel from channels list"},kx.propTypes={channelId:l.default.string.isRequired};var Sx=kx,jx=a("WIdh"),Ix=a("c48M"),wx=a("weu1");const Tx=new x.b("channel_sidebar");function Nx({type:e,displayName:t,isShared:a,isOrgShared:n,isYou:s,isMuted:r,isSuggested:i,hasUnreads:o,hasDraft:l,isArchived:c,unreadCount:d,badgeCount:u,isSelected:p,userActive:h,isTyping:m,isThread:b,canPost:f=!0,featureAnnounceOnly:_=!1}={}){const g=[p?Tx.t("selected"):null];return"channel"===e?g.push(a||n?Tx.t("shared channel"):Tx.t("channel")):"private"===e?g.push(Tx.t("private channel")):"mpim"===e?g.push(Tx.t("group direct message")):"im"===e&&(g.push(Tx.t("direct message")),g.push(h?Tx.t("active"):Tx.t("away"))),c&&g.push(Tx.t("archived")),r&&g.push(Tx.t("muted")),!f&&_&&g.push(Tx.t("read only",{fallbackHash:"1d8d39a6e91a5d579d831544fb5c2b08d7ea8d5d"})),i&&g.push(Tx.t("suggested")),o&&d&&!u&&g.push(Tx.t("{count} unread {count, plural, =1 {message} other {messages}}",{count:d})),u&&g.push(Tx.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:u})),l&&g.push(Tx.t("has draft")),m&&g.push(Tx.t("typing")),`${(()=>s?Tx.t("{name} (you)",{name:t}):!b||"channel"!==e&&"private"!==e?!b||"mpim"!==e&&"im"!==e?t:Tx.t("Thread with {name}",{name:t}):Tx.t("Thread in {name}",{name:t}))()} (${Object(wx.a)(Object(_n.a)(g,RP.a),", ")})`}var Ax=a("ICFZ");function Rx({channelId:e,channelSectionChannelIds:t,isCollapsed:a}){if(a)return!0;return(e?1+t.indexOf(e):0)<Math.floor(t.length+1)/2}const Mx="CHANNEL-SIDEBAR";function Px({canPostInChannel:e,featureComposeFlowSidebar:t,hasDraft:a,isSelected:n}){return!t&&a&&e&&!n}const xx={canPostInChannel:l.default.bool,channel:l.default.object,featureComposeFlowSidebar:l.default.bool,featureSonicPresenceManager:l.default.bool,hasDraft:l.default.bool,isFrozenAndInGracePeriod:l.default.bool,isSelected:l.default.bool,isTyping:l.default.bool},Lx={canPostInChannel:!1,channel:void 0,featureComposeFlowSidebar:!1,featureSonicPresenceManager:!1,hasDraft:!1,isFrozenAndInGracePeriod:!1,isSelected:!1,isTyping:!1};class channel_prefix_ChannelPrefix extends AI.a{render(){var e=this.props;const t=e.canPostInChannel,a=e.channel,n=e.featureComposeFlowSidebar,s=e.featureSonicPresenceManager,r=e.hasDraft,i=e.isFrozenAndInGracePeriod,l=e.isSelected,c=e.isTyping;if(function({channel:e,featureComposeFlow:t,hasDraft:a,isSelected:n,isTyping:s}){return!(!Object(q.ib)(e)||Object(q.Ib)(e)||!t&&a&&!n||s&&!n||Object(q.Y)(e)&&!Object(q.eb)(e))}({channel:a,featureComposeFlowSidebar:n,hasDraft:r,isSelected:l,isTyping:c})){const e=Object(q.H)(a)||a.user_id;return o.a.createElement(rS.a,{className:"p-channel_sidebar__presence_icon","data-qa":"sidebar-channel-presence-prefix",enablePresenceSubscriptions:s||Object(xr.a)(),inline:!1,memberId:e})}const u=d()("p-channel_sidebar__channel_icon_prefix",{"p-channel_sidebar__channel_icon_prefix--im-slackbot":Object(q.Ib)(a),"p-channel_sidebar__channel_icon_prefix--typing":c&&!l});if(c&&!l)return o.a.createElement("div",{"data-qa":"sidebar-channel-icon-prefix",className:u});let p;if(Px({canPostInChannel:t,featureComposeFlowSidebar:n,hasDraft:r,isSelected:l}))p="pencil";else if(!Object(q.Y)(a)||i||Object(q.eb)(a)&&Object(q.kb)(a))if(Object(q.Cb)(a))p="lock-small";else if(Object(q.qb)(a)){p=`multiparty-dm-${Object(q.L)(a)||0}`}else p=Object(q.Ib)(a)?"heart":"channel-pane-hash";else p="archived-channel";return o.a.createElement(bn.b,{className:u,"data-qa":"sidebar-channel-icon-prefix",inline:!0,size:"inherit",type:p})}}channel_prefix_ChannelPrefix.displayName="ChannelPrefix",channel_prefix_ChannelPrefix.propTypes=xx,channel_prefix_ChannelPrefix.defaultProps=Lx;var Fx=channel_prefix_ChannelPrefix;const Dx=new x.b("channel_sidebar"),Bx={channel:l.default.object,displayName:l.default.string,isYou:l.default.bool,memberPresences:l.default.arrayOf(l.default.string),members:l.default.arrayOf(l.default.string),userActive:l.default.bool},Ux={channel:void 0,displayName:"",isYou:!1,memberPresences:null,members:void 0,userActive:!0};class channel_name_ChannelName extends AI.a{constructor(e){super(e),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.state={isTruncated:!1}}handleMouseEnter(e){e.target.offsetWidth<e.target.scrollWidth&&this.setState(()=>({isTruncated:!0}))}buildImName(){var e=this.props;const t=e.channel,a=e.isYou,n=Object(q.H)(t)||t.user_id;return this.renderName(o.a.createElement(o.a.Fragment,null,o.a.createElement(iS.b,{memberId:n}),o.a.createElement(LO.a,{id:n}),a&&o.a.createElement("span",{className:"p-channel_sidebar__you_label","data-qa":"channel_sidebar_name_you"},Dx.t("(you)"))))}buildMpimName(){var e=this.props;const t=e.channel,a=e.members,n=e.memberPresences;if(!Object(q.qb)(t)||!a||!n)return null;const s=Object(Pb.a)(a,(e,t)=>[o.a.createElement(LO.a,{id:e,key:e}),t<a.length-1?", ":null]);return this.renderName(s)}renderName(e){var t=this.props;const a=t.channel,n=t.userActive,s=t.displayName,r=this.state.isTruncated,i=s.toString().replace(/ /g,"-").toLowerCase();return o.a.createElement(Xr.c,{delay:Xr.a,position:"top-left",tip:e,tipClassName:d()({hidden:!r})},o.a.createElement("span",{dir:"auto",className:d()("p-channel_sidebar__name",{"p-channel_sidebar__name--away":Object(q.ib)(a)&&!n}),"data-qa":`channel_sidebar_name_${i}`,onMouseEnter:this.handleMouseEnter},e))}render(){var e=this.props;const t=e.channel,a=e.displayName;return Object(q.ib)(t)?this.buildImName():Object(q.qb)(t)?this.buildMpimName():this.renderName(a)}}channel_name_ChannelName.displayName="ChannelName",channel_name_ChannelName.propTypes=Bx,channel_name_ChannelName.defaultProps=Ux;var qx=channel_name_ChannelName,Hx=a("EetU");l.default.number,l.default.object,l.default.bool;const Wx={badgeCount:0,channel:void 0,isIAP1Enabled:!1};class channel_suffix_ChannelSuffix extends o.a.PureComponent{renderSharedIcon(){var e=this.props;const t=e.channel;return e.isIAP1Enabled?null:o.a.createElement(RI.a,{channel:t,className:"p-channel_sidebar__channel_icon_suffix","data-qa":"sidebar-channel-icon-suffix",inherit:!0,inline:!0,forceNonBaseline:!0})}renderBadge(){const e=this.props.badgeCount;return e<=0?null:o.a.createElement(Hx.b,{count:e,className:"p-channel_sidebar__badge","data-qa":"sidebar-channel-badge-suffix"})}render(){return o.a.createElement(o.a.Fragment,null,this.renderSharedIcon(),this.renderBadge())}}channel_suffix_ChannelSuffix.displayName="ChannelSuffix",channel_suffix_ChannelSuffix.defaultProps=Wx;var Gx=channel_suffix_ChannelSuffix;const Kx=new x.b("channel_sidebar"),Vx={channel:l.default.object.isRequired,isYou:l.default.bool,isMuted:l.default.bool,isSuggested:l.default.bool,hasDraft:l.default.bool,suffix:l.default.node,hideCloseButton:l.default.bool,isFrozenAndInGracePeriod:l.default.bool,sharedTeamIds:l.default.arrayOf(l.default.string),displayName:l.default.string,teamDomain:l.default.string,appId:l.default.string,botId:l.default.string,isSelected:l.default.bool,badgeCount:l.default.number,userActive:l.default.bool,selectItem:l.default.func,closeIM:l.default.func,dismissSuggestedChannel:l.default.func,isTyping:l.default.bool,members:l.default.arrayOf(l.default.string),memberPresences:l.default.arrayOf(l.default.string),onContextMenu:l.default.func,featureSidebarContextMenu:l.default.bool,index:l.default.number.isRequired,sidebarFoldersIsEnabled:l.default.bool,onDragStart:l.default.func,onDragEnd:l.default.func,onDrop:l.default.func,onDragOver:l.default.func,featureSonicPresenceManager:l.default.bool,featureCopyChannelName:l.default.bool,featureCopyChannelLink:l.default.bool,featureComposeFlowSidebar:l.default.bool,isIAP1Enabled:l.default.bool,clogger:l.default.object.isRequired,canPostInChannel:l.default.bool,featureAnnounceOnly:l.default.bool,featureSidebarVirtualized:l.default.bool,onItemSelected:l.default.func,maybeLeaveChannel:l.default.func,muteChannelById:l.default.func,unmuteChannelById:l.default.func,updateStar:l.default.func,copyChannelNameById:l.default.func,featureChannelSections:l.default.bool,shouldUseChannelSections:l.default.bool,isOrganizing:l.default.bool,setIsOrganizing:l.default.func,isOrganizingSelected:l.default.bool,setOrganizingSectionItemSelected:l.default.func,channelSection:rT.p,connectDragSource:l.default.func,connectDropTarget:l.default.func,lastActiveDropTargetForChannelDrag:l.default.shape({channelSectionId:l.default.string}),lastActiveDropTargetForChannelSectionDrag:l.default.shape({channelSectionId:l.default.string,isAfter:l.default.bool}),isActiveDropTargetOfChannelDrag:l.default.bool},zx={isSelected:!1,isYou:!1,isMuted:!1,isSuggested:!1,hasDraft:!1,suffix:void 0,hideCloseButton:void 0,isFrozenAndInGracePeriod:!1,appId:void 0,botId:void 0,sharedTeamIds:null,displayName:"",badgeCount:0,userActive:!0,selectItem:r.a,closeIM:r.a,dismissSuggestedChannel:r.a,isTyping:!1,members:null,memberPresences:null,onContextMenu:r.a,teamDomain:"",featureSidebarContextMenu:!1,sidebarFoldersIsEnabled:!1,onDragStart:r.a,onDragEnd:r.a,onDrop:r.a,onDragOver:r.a,featureSonicPresenceManager:!1,featureCopyChannelName:!1,featureComposeFlowSidebar:!1,isIAP1Enabled:!1,clogger:{},canPostInChannel:!0,featureAnnounceOnly:!1,featureSidebarVirtualized:!1,onItemSelected:r.a,maybeLeaveChannel:r.a,muteChannelById:r.a,unmuteChannelById:r.a,updateStar:r.a,copyChannelNameById:r.a,featureChannelSections:!1,shouldUseChannelSections:!1,isOrganizing:!1,setIsOrganizing:r.a,isOrganizingSelected:!1,setOrganizingSectionItemSelected:r.a,channelSection:void 0,connectDragSource:RP.a,connectDropTarget:RP.a,lastActiveDropTargetForChannelDrag:void 0,lastActiveDropTargetForChannelSectionDrag:void 0,isActiveDropTargetOfChannelDrag:!1},$x=Object(Ot.b)();class channel_Channel extends AI.a{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.closeIM=this.closeIM.bind(this),this.closeSuggestedChannel=this.closeSuggestedChannel.bind(this),this.getContextMenuTemplate=this.getContextMenuTemplate.bind(this),this.linkRef=o.a.createRef()}componentDidMount(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}componentDidUpdate(e){if(!e.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current),this.props.shouldUseChannelSections&&this.props.channelSection&&!e.isChannelDraggingOverChannel&&this.props.isChannelDraggingOverChannel&&this.props.lastActiveDropTargetForChannelDrag&&this.props.lastActiveDropTargetForChannelDrag.channelSectionId!==this.props.channelSection.id&&this.props.setLastActiveDropTargetForChannelDrag({channelSectionId:this.props.channelSection.id}),this.props.shouldUseChannelSections&&!e.isChannelSectionDraggingOverChannel&&this.props.isChannelSectionDraggingOverChannel){const e=this.props.channelSection&&this.props.channelSection.id,t=!Rx({isCollapsed:this.props.isCollapsed,channelId:this.props.channel.id,channelSectionChannelIds:this.props.channelSectionChannelIds});this.props.setLastActiveDropTargetForChannelSectionDrag({channelSectionId:e,isAfter:t})}}onClick(e){var t=this.props;const a=t.channel,n=t.channelSection,s=t.shouldUseChannelSections,r=t.isOrganizing;if(e.preventDefault(),$x.action(Mx,`Selected ${a.id}`),s&&r){const e=n&&n.id?n.id:"default";this.props.setOrganizingSectionItemSelected({channelSectionId:e,channelId:a.id,isSelected:!this.props.isOrganizingSelected})}else this.props.selectItem(a.id),this.clogClick()}closeIM(e){const t=this.props.channel;e.preventDefault(),e.stopPropagation(),$x.action(Mx,`Closed ${t.id}`),this.props.closeIM({channelId:t.id})}closeSuggestedChannel(e){var t=this.props;const a=t.channel,n=t.index,s=t.isSelected,r=t.clogger,i=t.dismissSuggestedChannel;e.preventDefault(),e.stopPropagation(),$x.action(Mx,`Closed suggested channel ${a.id}`),i({channelId:a.id}),r.track("SIDEBAR_ITEM_SUGGESTED_CLOSE",{item_type:a.id[0],item_id:a.id,index:n,is_selected:s})}clogClick(){var e=this.props;const t=e.channel,a=e.index,n=e.isMuted,s=e.isSuggested,r=e.isSelected,i=e.badgeCount,o=e.appId,l=e.botId,c=e.clogger,d=e.isIAP1Enabled;c.track("SIDEBAR_ITEM_CLICK",{item_type:t.id[0],item_id:t.id,index:a,is_muted:n,is_suggested:s,is_starred:Object(q.Jb)(t),has_unreads:Object(q.Pb)(t),is_archived:Object(q.Y)(t),is_frozen:Object(q.eb)(t),is_selected:r,badge_count:i,app_id:o,bot_id:l,is_iap1:d})}shouldShowClose(){var e=this.props;const t=e.channel,a=e.isSuggested,n=e.hasDraft;return!e.hideCloseButton&&(!(!Object(q.kb)(t)&&!a)&&(!Object(q.Pb)(t)&&!n))}buildAriaLabel(){var e=this.props;const t=e.channel,a=e.displayName,n=e.isYou,s=e.isMuted,r=e.isSuggested,i=e.hasDraft,o=e.badgeCount,l=e.isSelected,c=e.userActive,d=e.isTyping,u=e.canPostInChannel,p=e.featureAnnounceOnly;if(!e.featureSidebarVirtualized)return Nx({type:Object(q.v)(t),displayName:a,isShared:Object(q.bb)(t),isOrgShared:Object(q.wb)(t),isYou:n,isMuted:s,isSuggested:r,hasUnreads:Object(q.Pb)(t),hasDraft:i,isArchived:Object(q.Y)(t),unreadCount:Object(q.V)(t),badgeCount:o,isSelected:l,userActive:c,isTyping:d,canPost:u,featureAnnounceOnly:p})}getChannelLink(){var e=this.props;const t=e.channel,a=e.teamDomain;return Object(q.o)({channelId:t.id,teamDomain:a,archive:!0})}getContextMenuTemplate(){const e=new x.b("menu");var t=this.props;const a=t.channel,n=t.displayName,s=t.isMuted,r=t.canMute,i=t.maybeLeaveChannel,o=t.updateStar,l=t.muteChannelById,c=t.unmuteChannelById,d=t.copyChannelNameById,u=t.featureCopyChannelName,p=t.featureCopyChannelLink,h=t.featureChannelSections,m=t.shouldUseChannelSections,b=t.isOrganizing,f=t.setIsOrganizing;let _,g,y,O,C,v,E,k,S,j,I,w,T,N;Object(q.kb)(a)?(_=e.t("Star Conversation"),g="star_conversation",y=e.t("Unstar Conversation"),O="unstar_conversation",C=e.t("Mute Conversation"),v="mute_conversation",E=e.t("Unmute Conversation"),k="unmute_conversation",S=e.t("Close Conversation",{fallbackHash:"170fcb2077d0265d1095a0f459abb40ffb9cf16f",fallbackHashNs:"menu"}),j="leave_conversation"):(_=e.t("Star Channel"),g="star_channel",y=e.t("Unstar Channel"),O="unstar_channel",C=e.t("Mute {channel}",{channel:`#${n}`}),v="mute_channel",E=e.t("Unmute {channel}",{channel:`#${n}`}),k="unmute_channel",S=e.t("Leave {channel}",{channel:`#${n}`}),j="leave_channel",u&&(I=e.t("Copy Channel Name"),w="copy_channel_name"),p&&!Is.V&&(T=e.t("Copy Channel Link"),N="copy_channel_link"));const A=[];if(h&&m){let t,a;if(b?(a=e.t("Stop organizing sidebar"),t="stop_organizing_sidebar"):(a=e.t("Organize sidebar"),t="organize_sidebar"),A.push({label:a,labelToClog:t,click:()=>f({isOrganizing:!b})}),b)return A;A.push({type:"separator"})}return Object(q.k)(a)&&(Object(q.Jb)(a)?A.push({label:y,labelToClog:O,click:()=>o(!1,{channel:a.id})}):A.push({label:_,labelToClog:g,click:()=>o(!0,{channel:a.id})})),(Object(q.ob)(a)||Object(q.Cb)(a))&&A.push({label:S,labelToClog:j,click:()=>i({channelId:a.id})}),r&&A.push({label:s?E:C,labelToClog:s?k:v,click:()=>s?c(a.id):l(a.id)}),I&&A.push({label:I,labelToClog:w,click:()=>d(a.id)}),T&&A.push({label:T,labelToClog:N,click:()=>{Object(Ax.c)(this.getChannelLink())}}),A.forEach(e=>{const t=e.click;e.click=((...a)=>(this.props.clogger.track(de.EventId.CONTEXT_MENU_ACTION,{contexts:{ui_context:{action:de.UiAction.CLICK,ui_component:de.UiComponent.SIDEBAR,ui_element:de.UiElement.SIDEBAR_CHANNEL_ITEM}},label:e.labelToClog}),t(...a)))}),A}renderOrganizingCheckbox(){var e=this.props;const t=e.featureChannelSections,a=e.shouldUseChannelSections,n=e.isOrganizing,s=e.isOrganizingSelected;return t&&a?o.a.createElement(bn.b,{className:d()("p-channel_sidebar__organizing_checkbox",{"p-channel_sidebar__organizing_checkbox--not-organizing":!n,"p-channel_sidebar__organizing_checkbox--selected":s}),"data-qa":"organizing-checkbox-state",size:"inherit",inline:!0,type:s?"real-checkbox-checked":"real-checkbox-empty"}):null}render(){var e=this.props;const t=e.isYou,a=e.isMuted,n=e.isSuggested,r=e.badgeCount,i=e.isSelected,l=e.displayName,c=e.onContextMenu,u=e.featureSidebarContextMenu,p=e.featureSidebarVirtualized,h=e.isTyping,m=e.hasDraft,b=e.isFrozenAndInGracePeriod,f=e.featureSonicPresenceManager,_=e.featureComposeFlowSidebar,g=e.canPostInChannel,y=e.memberPresences,O=e.members,C=e.userActive,v=e.isIAP1Enabled,E=e.sharedTeamIds,k=e.channel,S=e.suffix,j=e.shouldUseChannelSections,I=e.isOrganizing,w=e.isOrganizingSelected,T=e.channelSection,N=e.lastActiveDropTargetForChannelDrag,A=e.lastActiveDropTargetForChannelSectionDrag,R=e.orderedChannelSections,M=e.channelSectionChannelIds,P=e.isAnyChannelDragging,x=e.isAnyChannelSectionDragging,L=Px({canPostInChannel:g,featureComposeFlowSidebar:_,hasDraft:m,isSelected:i}),F={};if(j&&T){const e=Object(Hu.a)(M)===k.id,t=Object(Hu.a)(R),a=t&&t.id===T.id;F["p-channel_sidebar__channel--drop_over_section"]=P&&N&&N.channelSectionId===T.id,F["p-channel_sidebar__channel--last_in_section"]=e,F["p-channel_sidebar__channel--drop_section_below"]=x&&e&&a&&A&&A.channelSectionId===T.id&&A.isAfter}const D=d()("p-channel_sidebar__channel",s()({"p-channel_sidebar__channel--mpim":Object(q.qb)(k),"p-channel_sidebar__channel--im-slackbot":Object(q.Ib)(k),"p-channel_sidebar__channel--im-you":t,"p-channel_sidebar__channel--selected":j&&I?w:i,"p-channel_sidebar__channel--muted":a,"p-channel_sidebar__channel--suggested":n,"p-channel_sidebar__channel--unread":Object(q.Pb)(k)&&!Object(q.Y)(k),"p-channel_sidebar__channel--draft":L,"p-channel_sidebar__channel--typing":h&&!i},F)),B=o.a.createElement(Fx,{canPostInChannel:g,channel:k,featureComposeFlowSidebar:_,featureSonicPresenceManager:f,hasDraft:m,isFrozenAndInGracePeriod:b,isSelected:i,isTyping:h,"data-qa":"channel_prefix"}),U=S||o.a.createElement(Gx,{badgeCount:r,channel:k,isFrozenAndInGracePeriod:b,isIAP1Enabled:v,sharedTeamIds:E,"data-qa":"channel_suffix"}),H=o.a.createElement(qx,{channel:k,displayName:l,isYou:t,memberPresences:y,members:O,userActive:C,"data-qa":"channel_name"}),W=this.renderOrganizingCheckbox();let G={};this.props.shouldUseChannelSections?(this.props.connectDragSource(this.linkRef),this.props.connectDropTarget(this.linkRef)):G={draggable:this.props.sidebarFoldersIsEnabled,"data-drag-type":"channel","data-drag-id":k.id,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver};let K=o.a.createElement(ux.a,s()({href:this.getChannelLink(),ref:this.linkRef,className:D,onClick:this.onClick,onContextMenu:c,"data-user-count":Object(q.L)(k)||0,"data-qa-channel-sidebar-channel":!0,"data-qa-channel-sidebar-channel-is-selected":i,"data-qa-channel-sidebar-channel-id":k.id,"data-qa-channel-sidebar-channel-type":Object(q.v)(k),"data-qa-channel-sidebar-is-starred":Object(q.Jb)(k),"data-qa-channel-sidebar-is-you":t,"data-qa-channel-sidebar-priority":Object(q.Q)(k),"aria-label":this.buildAriaLabel(),tabIndex:p?-1:void 0,role:p?"presentation":void 0},G),W,B,H,U);if(this.shouldShowClose()){let e=Kx.t("Close Direct Message with {name}",{name:l});n&&(e=Kx.t("Dismiss suggested channel"));const t=j&&I?null:o.a.createElement(_e.c,{onClick:n?this.closeSuggestedChannel:this.closeIM,className:"p-channel_sidebar__close","data-qa":"channel_item_close","aria-label":p?void 0:e,"aria-hidden":!!p||void 0,tabIndex:p?-1:void 0},o.a.createElement(bn.a,{type:"times-circle-medium"}));K=o.a.createElement("div",{className:"p-channel_sidebar__close_container","data-qa":"channel_item_container"},K,t)}return u?o.a.createElement(hx.a,{getTemplate:this.getContextMenuTemplate,desktopAppOnly:!1},K):K}}channel_Channel.displayName="Channel",channel_Channel.propTypes=Vx,channel_Channel.defaultProps=zx;var Yx=channel_Channel;const Qx=["DRAG_CHANNEL_SIDEBAR_CHANNEL","DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"],Xx=Object(xr.a)()?Object(vx.a)("DRAG_CHANNEL_SIDEBAR_CHANNEL",{beginDrag:e=>({channel:e.channel,channelSection:e.channelSection}),endDrag:e=>{e.setLastActiveDropTargetForChannelDrag({channelSectionId:null})},canDrag:e=>e.shouldUseChannelSections&&!e.isOrganizing},(e,t)=>({connectDragSource:e.dragSource(),isDragging:t.isDragging()}))(Yx):Yx,Jx=Object(xr.a)()?Object(nM.a)(Qx,{},(e,t)=>{const a=t.getItemType(),n="DRAG_CHANNEL_SIDEBAR_CHANNEL"===a,s="DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"===a,r=n&&t.isOver(),i=s&&t.isOver();return{connectDropTarget:e.dropTarget(),isAnyChannelDragging:n,isAnyChannelSectionDragging:s,isChannelDraggingOverChannel:r,isChannelSectionDraggingOverChannel:i}})(Xx):Yx,Zx={closeIM:wi.closeChannelApi,dismissSuggestedChannel:Sx,maybeLeaveChannel:JI.a,muteChannelById:zI.a,unmuteChannelById:zI.b,updateStar:Gw.a,copyChannelNameById:(...e)=>Object(XI.a)(...e),setIsOrganizing:bS.h,setOrganizingSectionItemSelected:bS.k,setLastActiveDropTargetForChannelDrag:bS.i,setLastActiveDropTargetForChannelSectionDrag:bS.j},eL=(e,{id:t,isSelected:a,channelSection:n})=>{const s=Object(B.e)(e,t),r=Object(A.a)(e);if(!s)return{featureSidebarContextMenu:Object(m.m)(e,"feature_sidebar_context_menu"),shouldUseChannelSections:r};const i=Object(q.v)(s),o="im"===i&&Object(ba.k)(e,"show_typing")&&Object(jx.f)(e,t).length>0,l=Object(q.H)(s),c="im"!==i||"active"===Object(qS.f)(e,l),d=Object(bi.d)(e,l),u=Object(Je.q)(d)||void 0,p=Object(Je.p)(d)||void 0,h=Object(m.d)(e),b="mpim"===i&&(Object(LI.d)(e)?Object(q.M)(e,s):Object(q.I)(s)&&Object(_n.a)(Object(q.I)(s),e=>e!==h)),f="mpim"===i&&b&&Object(ht.a)(b,t=>Object(qS.f)(e,t)),g=Object(m.m)(e,"feature_all_dm_mute")?Object(q.ob)(s)&&!Object(q.lb)(e,s):Object(q.ob)(s)&&(Object(q.Db)(s)||Object(q.Cb)(s)),y=Object(q.x)(e,s,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),O=Object(Se.d)(e),v=Object(xe.i)(O),E=Object(xe.f)(O),k=Object(q.O)(e,s),S=Object(C.j)(e);return{channel:s,isSelected:Object(Sf.a)(a)?a:Object(_.a)(e)===t,isYou:Object(q.Ub)(h,s),isMuted:Object(xu.c)(e,t),isSuggested:!Object(q.ob)(s)&&Object(q.Kb)(e,s),hasDraft:!S&&Object(q.y)(e,t),isFrozenAndInGracePeriod:Object(q.fb)(v,s),appId:p,botId:u,sharedTeamIds:k.length?k:Ix.a,displayName:y,badgeCount:Object(B.d)(e,s),userActive:c,isTyping:o,canPostInChannel:Object(te.p)(e,t),featureAnnounceOnly:Object(m.m)(e,"feature_announce_only"),members:b||null,memberPresences:f||null,canMute:g,teamDomain:E,featureSidebarContextMenu:Object(m.m)(e,"feature_sidebar_context_menu"),featureCopyChannelName:Object(m.m)(e,"feature_copy_channel_name"),featureCopyChannelLink:Object(m.m)(e,"feature_copy_channel_link"),featureSonicPresenceManager:Object(m.m)(e,"feature_sonic_presence_manager"),featureComposeFlowSidebar:S,isIAP1Enabled:Object(bo.c)(e),clogger:Object(ie.a)({state:e}),featureSidebarVirtualized:Object(m.m)(e,"feature_sidebar_virtualized"),shouldUseChannelSections:r,featureChannelSections:Object(m.m)(e,"feature_channel_sections"),orderedChannelSections:CS(e),isOrganizing:NS(e),isOrganizingSelected:LS(e,n&&n.id?n.id:"default",t),lastActiveDropTargetForChannelDrag:r?DS(e):void 0,lastActiveDropTargetForChannelSectionDrag:r?BS(e):void 0}};var tL=Object(u.b)(eL,Zx,null,{withRef:!0})(Yx);const aL=Object(u.b)(eL,Zx,null,{withRef:!0})(Jx);var nL=a("UOab");const sL=new x.b("channel_sidebar"),rL=(l.default.func,l.default.object.isRequired,l.default.string,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.bool,{dispatch:r.a,draftText:void 0,featureComposeFlow:!1,isSelected:!1,onItemSelected:r.a,selectItem:r.a,featureSidebarVirtualized:!1});function iL({dispatch:e,draft:t,draftText:a,featureComposeFlow:n,isSelected:s,onItemSelected:r,selectItem:l,featureSidebarVirtualized:c}){const u=Object(sb.a)(),p=Object(i.useRef)();Object(i.useEffect)(()=>{r(p.current)},[s,r]);const h=Object(i.useMemo)(()=>n?Object(io.a)(t)?`(${sL.t("unknown")})`:a?o.a.createElement(o.a.Fragment,null,Object(x.e)(n),o.a.createElement(eg.a,{className:"p-channel_sidebar__name",customContentHandler:e=>e.map(e=>!function({text:e,type:t}={}){return!(!e||e.trim())||"paragraph_break"===t||"line_break"===t||"space_hard"===t}(e)?e:{text:" "}),emojiSize:FC.a.SMALL,maxCharacters:50,noHighlights:!0,noJumbomoji:!0,stopAnimations:!0,text:a}),Object(x.d)(n)):`(${sL.t("New message")})`:"",[t,a,n]);if(!n)return null;const m=c?-1:void 0;return o.a.createElement("div",{className:"p-channel_sidebar__close_container"},o.a.createElement(Qh.a,{className:d()("p-channel_sidebar__channel","p-channel_sidebar__channel--composer_draft",{"p-channel_sidebar__channel--selected":s}),onClick:()=>{const e=Object(J.d)(t);l("Pcomposer",{routeParams:{draftId:Object(um.b)(e)}}),u.track(de.EventId.COMPOSE_FLOW,{draft_id:e,draft_action_source:"sidebar",draft_type:"composer",contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.COMPOSE_FLOW_OPEN}}})},ref:p,tabIndex:m,role:c?"presentation":void 0},o.a.createElement(bn.b,{size:"inherit",inline:!0,className:"p-channel_sidebar__channel_icon_prefix",type:"file"}),h),o.a.createElement(Xr.c,{tip:sL.t("Delete draft")},o.a.createElement(Qh.a,{className:"p-channel_sidebar__close",onClick:()=>{const a=Object(J.d)(t);e(m_({draftId:a})),u.track(de.EventId.COMPOSE_FLOW,{draft_id:a,draft_action_source:"sidebar",draft_type:"composer",contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.COMPOSE_FLOW_DELETE}}})},tabIndex:m,"aria-hidden":!!c||void 0},o.a.createElement(bn.b,{className:"p-channel_sidebar__delete_icon",type:"trash"}))))}iL.displayName="ComposerDraft",iL.defaultProps=rL;var oL=Object(u.b)(function(e,{id:t}){const a=Object(_.a)(e),n=Xm(e),s=Object(C.d)(e,t);let r;if(s){const t=new da.a(s.ops),a=Object(N_.a)(e,t);r=Object(nL.a)(e,a.blocks)}return{draft:s,draftText:r,featureComposeFlow:Object(C.g)(e),isSelected:"Pcomposer"===a&&n===t,featureSidebarVirtualized:Object(m.m)(e,"feature_sidebar_virtualized")}})(iL);const lL=new x.b("channel_sidebar");let cL;l.default.string.isRequired,l.default.func,l.default.string,l.default.func,l.default.func,l.default.string,l.default.bool,l.default.bool.isRequired;const dL={dispatch:r.a,draftId:void 0,onItemSelected:r.a,selectItem:r.a,threadTs:void 0,featureComposeFlowSidebar:!1};function uL({channelId:e,dispatch:t,draftId:a,featureComposeFlowSidebar:n,onItemSelected:s,selectItem:r,threadTs:l,featureSidebarVirtualized:c}){const d=Object(sb.a)(),u=Object(i.useRef)();return Object(i.useEffect)(()=>{s(u.current)},[s]),n?o.a.createElement("div",{className:"p-channel_sidebar__close_container"},o.a.createElement(tL,{hideCloseButton:!0,id:e,index:0,isSelected:!1,suffix:l&&o.a.createElement(bn.b,{className:"p-channel_sidebar__icon p-channel_sidebar__reply_icon",type:"small-reply"}),selectItem:()=>{l?(t(Object(s_.a)({channelId:e,threadTs:l})),function(e,t){clearInterval(cL);const a=Object(c_.d)(e,t);return a?Promise.resolve(a):new Promise(a=>{cL=setInterval(()=>{const n=Object(c_.d)(e,t);n&&(clearInterval(cL),a(n))},50)}).timeout(1e4)}(e,l).then(e=>{e.scrollIntoView()})):r(e),d.track(de.EventId.COMPOSE_FLOW,{draft_id:a,draft_action_source:"sidebar",draft_type:l?"thread":"channel",contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.COMPOSE_FLOW_OPEN}}})}}),o.a.createElement(Xr.c,{tip:lL.t("Delete draft")},o.a.createElement(Qh.a,{className:"p-channel_sidebar__close",onClick:()=>{t(h_({channelId:e,threadTs:l})),d.track(de.EventId.COMPOSE_FLOW,{draft_id:a,draft_action_source:"sidebar",draft_type:l?"thread":"channel",contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.COMPOSE_FLOW_DELETE}}})},tabIndex:-1,"aria-hidden":!!c||void 0},o.a.createElement(bn.b,{className:"p-channel_sidebar__delete_icon",type:"trash"})))):null}uL.displayName="ChannelDraft",uL.defaultProps=dL;var pL=Object(u.b)(function(e){return{featureComposeFlowSidebar:Object(C.j)(e),featureSidebarVirtualized:Object(m.m)(e,"feature_sidebar_virtualized")}})(uL);const hL=new x.b("sonic_pilot");function mL({children:e,featureSonicPlaceholderLabels:t,unstyled:a,tooltipPosition:n}){if(!t)return e;if(Object(re.a)()){const t=o.a.cloneElement(e,s()({},e.props,{className:d()(e.props.className,{"c-button--sonic-placeholder":!a,"c-button-unstyled--sonic-placeholder":a})}),e.props.children);return o.a.createElement(Xr.c,{tip:o.a.createElement("div",{className:"c-tooltip__sonic_placeholder","data-qa":"sonic-placeholder-text"},hL.t("Coming soon")),position:n||"top",zIndex:"above_fs"},t)}return e}mL.defaultProps={unstyled:!1,tooltipPosition:void 0};var bL=Object(u.b)(e=>({featureSonicPlaceholderLabels:Object(m.m)(e,"feature_sonic_placeholder_labels")}))(mL);const fL=new x.b("channel_sidebar"),_L=(l.default.string.isRequired,l.default.string.isRequired,l.default.string,l.default.string,l.default.bool,l.default.number,l.default.bool,l.default.func,l.default.bool,l.default.string,l.default.bool,l.default.func,l.default.func,l.default.string,l.default.func,l.default.bool,{isSelected:!1,labelUnread:"",hasUnreads:!1,badgeCount:0,icon:void 0,selectItem:r.a,isDim:!1,qaLabel:"",disabledInSonic:!1,onItemSelected:r.a,onClick:r.a,className:"",renderLinkContent:null,featureSidebarVirtualized:!1});class link_Link extends i.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.linkRef=o.a.createRef(),this.state={}}componentDidMount(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}componentDidUpdate(e){!e.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}onClick(e){Object(Ot.b)().action(Mx,`Selected ${this.props.id}`),this.props.selectItem(this.props.id,e),"function"==typeof this.props.onClick&&this.props.onClick()}render(){var e=this.props;const t=e.id,a=e.label,n=e.labelUnread,s=e.icon,r=e.hasUnreads,l=e.badgeCount,c=e.isSelected,u=e.isDim,p=e.qaLabel,h=e.disabledInSonic,m=e.className,b=e.renderLinkContent,f=e.featureSidebarVirtualized,_=d()("p-channel_sidebar__link",{"p-channel_sidebar__link--all-unreads":"Vall_unreads"===t,"p-channel_sidebar__link--all-threads":"Vall_threads"===t,"p-channel_sidebar__link--search":"Vsearch"===t,"p-channel_sidebar__link--invites":"Vinvites"===t,"p-channel_sidebar__link--add-channel":"Vadd_channel"===t,"p-channel_sidebar__link--selected":c,"p-channel_sidebar__link--unread":r,"p-channel_sidebar__link--dim":u},m),g=r&&n?n:a,y=o.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":`channel_sidebar_name_${p.toLowerCase()}`},g),O=Object(_n.a)([c?fL.t("selected"):null,r&&!l?fL.t("has unreads"):null,l?fL.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:l}):null],RP.a),C=g+(O.length?` (${O.join(", ")})`:""),v=o.a.createElement(Hx.b,{count:l,className:"p-channel_sidebar__badge"}),E=s&&o.a.createElement(bn.b,{type:s,size:"inherit",className:"p-channel_sidebar__link__icon"}),k=o.a.createElement(_e.c,{role:f?"presentation":void 0,className:_,onClick:this.onClick,"aria-label":f?void 0:C,"data-sidebar-link-id":t,"data-qa-channel-sidebar-link-id":t,ref:this.linkRef,tabIndex:f?-1:void 0},b?b({icon:E,name:y,badge:v}):o.a.createElement(i.Fragment,null,E,y,v));return h?o.a.createElement(bL,null,k):k}}link_Link.displayName="Link",link_Link.defaultProps=_L;var gL=link_Link;const yL=new x.b("channel_sidebar");var OL=Object(u.b)(e=>({id:"Vall_threads",label:yL.t("Threads"),labelUnread:yL.t("Threads"),hasUnreads:Object(m.m)(e,"feature_incremental_unread_counts")?Object(X.j)(e):Object(Q.c)(e),badgeCount:Object(m.m)(e,"feature_incremental_unread_counts")?Object(X.e)(e):Object(Q.b)(e),isSelected:"Vall_threads"===Object(_.a)(e),featureSidebarVirtualized:Object(m.m)(e,"feature_sidebar_virtualized")}),null,null,{withRef:!0})(gL);const CL=new x.b("channel_sidebar");var vL=Object(u.b)(e=>{const t=Object(m.m)(e,"feature_primary_search")&&Object(N.a)(e)?CL.t("Search Results"):"",a=Object(m.m)(e,"feature_sidebar_virtualized");return{id:"Vsearch",label:t,isSelected:"Vsearch"===Object(_.a)(e),featureSidebarVirtualized:a}})(gL);const EL=new x.b("channel_sidebar"),kL=(l.default.string.isRequired,l.default.bool,l.default.string,l.default.object.isRequired,l.default.func.isRequired,l.default.bool.isRequired,l.default.func,l.default.bool,{isDim:!1,qaLabel:"",onClickClose:r.a,featureSidebarVirtualized:!1});class add_channel_link_AddChannelLink extends o.a.Component{constructor(e){super(e),this.onItemSelect=this.onItemSelect.bind(this)}onItemSelect(){this.props.clogger.track("SIDEBAR_ITEM_CLICK",{contexts:{ui_context:{step:"ADD_CHANNEL",action:"click",ui_component:"SIDEBAR"}}}),this.props.openChannelBrowser()}render(){var e=this.props;const t=e.label,a=e.qaLabel,n=e.isDim,s=e.onClickClose,r=e.featureNewxp2798,i=e.featureSidebarVirtualized,l=i?-1:void 0,c=r&&!i?EL.t("Hide Add Channel button"):null;return o.a.createElement("div",{className:"p-channel_sidebar__close_container"},o.a.createElement(gL,{key:"Vadd_channel",id:"Vadd_channel",isDim:n,qaLabel:a,label:t,selectItem:this.onItemSelect,featureSidebarVirtualized:i}),o.a.createElement(Qh.a,{onClick:s,className:"p-channel_sidebar__close","aria-hidden":!!i||void 0,"aria-label":c,tabIndex:l},o.a.createElement(bn.b,{type:"times-circle-medium"})))}}add_channel_link_AddChannelLink.displayName="AddChannelLink";const SL={openChannelBrowser:(...e)=>Object(fe.a)(...e)};add_channel_link_AddChannelLink.defaultProps=kL;var jL=Object(u.b)(e=>({clogger:Object(ie.a)({state:e}),featureNewxp2798:Object(m.m)(e,"feature_newxp_2798"),featureSidebarVirtualized:Object(m.m)(e,"feature_sidebar_virtualized")}),SL)(add_channel_link_AddChannelLink);l.default.string.isRequired,l.default.shape({label:l.default.func.isRequired,sidebar:l.default.shape({icon:l.default.string.isRequired,isBold:l.default.func,badgeCount:l.default.func,getCloseLinkLabel:l.default.func})}).isRequired,l.default.bool,l.default.number,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.bool;const IL={isBold:!1,badgeCount:void 0,isSelected:!1,isCloseButtonVisible:!1,onClickClose:r.a,selectItem:r.a,featureSidebarVirtualized:!1},wL=e=>{let t=e.id,a=e.views,n=e.isBold,r=e.isCloseButtonVisible,i=e.onClickClose,l=e.badgeCount,c=e.featureSidebarVirtualized,d=fp()(e,["id","views","isBold","isCloseButtonVisible","onClickClose","badgeCount","featureSidebarVirtualized"]);const u=Object(kb.a)(a.label)&&a.label();var p=a.sidebar||{};const h=p.icon,m=p.getCloseLinkLabel,b=o.a.createElement(gL,s()({},d,{id:t,label:u,className:`p-channel_sidebar__link--page_${t.toLowerCase()} position_relative`,icon:h,hasUnreads:n,badgeCount:l,qaLabel:`page_${t}`,featureSidebarVirtualized:c}));if(!r)return b;const f=Object(kb.a)(m)?m():"",_=o.a.createElement(Qh.a,{onClick:i,className:"p-channel_sidebar__close p-channel_sidebar__close--circle","aria-label":c?void 0:f,"aria-hidden":!!c||void 0,tabIndex:c?-1:void 0},o.a.createElement(bn.b,{type:"times-circle-medium"}));return o.a.createElement("div",{className:"p-channel_sidebar__close_container"},b,_)};wL.displayName="PageLink",wL.defaultProps=IL;var TL=Object(u.b)((e,{id:t})=>{const a=uk(t),n=a.sidebar||{},s=(!Object(kb.a)(n.showCloseButton)||n.showCloseButton(e))&&Object(kb.a)(n.onClickClose);return{id:t,views:a,isBold:Object(kb.a)(n.isBold)&&n.isBold(e),badgeCount:Object(kb.a)(n.badgeCount)?n.badgeCount(e):void 0,isSelected:Object(_.a)(e)===t,isCloseButtonVisible:s,featureSidebarVirtualized:Object(m.m)(e,"feature_sidebar_virtualized")}},(e,{id:t})=>{const a=uk(t).sidebar||{};return{onClickClose:Object(kb.a)(a.onClickClose)?()=>{a.onClickClose(e)}:null,onClick:Object(kb.a)(a.onClick)?()=>{a.onClick(e)}:null,renderLinkContent:a.renderLinkContent}})(wL);const NL=new x.b("channel_sidebar"),AL=({selectItem:e,dim:t,label:a,qaLabel:n,showClose:s,onClickClose:r,featureSidebarVirtualized:i})=>{const l=a||NL.t("Invite people",{fallbackHash:"a937c4ac396e25f4c9a290d468e33c668ec6ff69"}),c=i?-1:void 0,d=o.a.createElement(gL,{key:"Vinvites",id:"Vinvites",label:l,selectItem:e,isDim:t,qaLabel:n,featureSidebarVirtualized:i});if(!s)return d;const u=o.a.createElement(Qh.a,{onClick:r,className:"p-channel_sidebar__close","aria-label":i?void 0:NL.t("Hide Invite People button"),tabIndex:c,"aria-hidden":!!i||void 0},o.a.createElement(bn.b,{type:"times-circle-medium"}));return o.a.createElement("div",{className:"p-channel_sidebar__close_container"},d,u)};AL.displayName="InvitePeopleLink",AL.defaultProps={selectItem:r.a,dim:!0,label:void 0,qaLabel:"",showClose:!1,onClickClose:r.a,featureSidebarVirtualized:!1};var RL=Object(_p.a)(AL),ML=a("YCXn");const PL=Object(mt.b)("Dismiss Add Apps link in sidebar",e=>{e(Object(Ka.f)({pref:"add_apps_prompt_dismissed",value:!0}))});PL.meta={name:"dismissInstallAppsPrompt",key:"actionsDismissInstallAppsPromptDismissInstallAppsPrompt",description:"Dismiss Add Apps link in sidebar"};var xL=PL,LL=a("97va");const FL=new x.b("channel_sidebar"),DL=(l.default.object.isRequired,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.number,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,{hideAppLinkPrompt:r.a,dismissInstallAppsPrompt:r.a,openAppsBrowserModal:r.a,openAppLauncherView:r.a,clogAppLauncherOpen:r.a,appSuggestionsCount:0,featureM11nAppsBrowser:!1,featureAppLauncher:!1,featureSidebarVirtualized:!1,appLinkImpression:!1,setAppLinkImpressionClogged:r.a});class install_apps_link_InstallAppsLink extends i.Component{constructor(e){super(e),this.handleAppsBrowserClick=this.handleAppsBrowserClick.bind(this),this.dismissLink=this.dismissLink.bind(this)}componentDidMount(){this.props.appLinkImpression||(this.clogEvent("impression"),this.props.setAppLinkImpressionClogged())}clogEvent(e){this.props.clogger.track("APP_ADD_APPS_PROMPT",{contexts:{ui_context:{action:e,ui_element:"ADD_APPS"}}})}handleAppsBrowserClick(){this.clogEvent("click"),this.props.clogger.track("INSTALL_APPS_LINK_APP_BROWSER_CLICK"),this.props.featureM11nAppsBrowser?this.props.featureAppLauncher?(this.props.openAppLauncherView(),this.props.clogAppLauncherOpen({eventId:"APP_LAUNCHER_OPEN_FROM_ADD_APPS_CTA"})):this.props.openAppsBrowserModal():Object(ML.a)()}dismissLink(){this.props.hideAppLinkPrompt(),this.clogEvent("decline"),this.props.dismissInstallAppsPrompt()}render(){var e=this.props;const t=e.appSuggestionsCount,a=e.featureSidebarVirtualized,n=t>1?FL.t("Add more apps"):FL.t("Add apps"),s=FL.t('Dismiss "Add apps" prompt'),r=a?-1:void 0;return o.a.createElement("div",{className:"p-channel_sidebar__close_container"},o.a.createElement(_e.c,{className:"p-channel_sidebar__link p-channel_sidebar__link--dim p-channel_sidebar__link--add-apps",onClick:this.handleAppsBrowserClick,"data-qa":"add_apps_link",role:a?"presentation":void 0,tabIndex:r},o.a.createElement("span",{className:"p-channel_sidebar__name"},n)),o.a.createElement(_e.c,{onClick:this.dismissLink,className:"p-channel_sidebar__close","aria-label":a?void 0:s,"data-qa":"add_apps_dismiss_link",tabIndex:r,"aria-hidden":!!a||void 0},o.a.createElement(bn.b,{type:"times-circle-medium"})))}}install_apps_link_InstallAppsLink.displayName="InstallAppsLink",install_apps_link_InstallAppsLink.defaultProps=DL;var BL=Object(u.b)(function(e){return{clogger:Object(ie.a)({state:e}),appLinkImpression:Object(rM.c)(e),appSuggestionsCount:(Object(rM.g)(e)||[]).length,featureM11nAppsBrowser:Object(m.m)(e,"feature_m11n_apps_browser"),featureAppLauncher:Object(dg.a)(e),featureSidebarVirtualized:Object(m.m)(e,"feature_sidebar_virtualized")}},e=>({setAppLinkImpressionClogged:(...t)=>e(Object(rM.n)(...t)),hideAppLinkPrompt:(...t)=>e(Object(rM.j)(...t)),dismissInstallAppsPrompt:(...t)=>e(xL(...t)),openAppsBrowserModal:(...t)=>e(Object(aw.a)(...t)),openAppLauncherView:(...t)=>e(Object(LL.a)(...t)),clogAppLauncherOpen:(...t)=>e(Object(qm.a)(...t))}))(install_apps_link_InstallAppsLink),UL=a("4qCO");l.default.string.isRequired,l.default.string.isRequired,l.default.bool.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.object.isRequired,l.default.object.isRequired,l.default.func,l.default.func,l.default.func,l.default.string,l.default.bool;const qL={setUserPrefByApi:r.a,hideAppSuggestion:r.a,setAppSuggestionImpressionClogged:r.a,onboardingRoleApps:"",featureSidebarVirtualized:!1};function HL({appKey:e,appId:t,isInstall:a,setUserPrefByApi:n,hideAppSuggestion:s,dismissKey:r,href:l,text:c,label:d,clogUiElement:u,clogger:p,appSuggestionImpressions:h,setAppSuggestionImpressionClogged:m,onboardingRoleApps:b,featureSidebarVirtualized:f}){const _=Object(i.useCallback)(e=>{p.track(de.EventId.APP_SIDEBAR_PROMPTS,{contexts:{ui_context:{action:e,ui_element:u},core:{app_id:t}}})},[t,p,u]);Object(i.useEffect)(()=>{h[e]||(m(e),_("impression"))},[h,m,_,e]);const g=Object(i.useCallback)(()=>{s(e),a||n({pref:r,value:!0}),_("click")},[e,s,a,_,n,r]),y=Object(i.useCallback)(()=>{s(e);const a=(b||"").split(",");a.includes(t)&&(a.splice(a.indexOf(t),1),n({pref:"onboarding_role_apps",value:a.join(",")})),n({pref:r,value:!0}),_("decline")},[b,t,s,e,n,r,_]),O=f?-1:void 0,C=f?void 0:d;return o.a.createElement("div",{className:"p-channel_sidebar__close_container"},o.a.createElement(Ze.a,{"data-qa":"app_suggestion_prompt_cta",className:"p-channel_sidebar__link p-channel_sidebar__link--dim p-channel_sidebar__link--add-apps",href:l,onClick:g,tabIndex:O,role:f?"presentation":void 0},o.a.createElement("span",{className:"p-channel_sidebar__name"},c)),o.a.createElement(_e.c,{"data-qa":"app_suggestion_prompt_dismiss",onClick:y,className:"p-channel_sidebar__close","aria-label":C,"aria-hidden":!!f||void 0,tabIndex:O},o.a.createElement(bn.b,{type:"times-circle-medium"})))}HL.displayName="AppSuggestionLink",HL.defaultProps=qL;var WL=Object(u.b)((e,{appKey:t})=>s()({},wP(e,t),{clogger:Object(ie.a)({state:e}),onboardingRoleApps:Object(ba.k)(e,"onboarding_role_apps"),appSuggestionImpressions:Object(rM.e)(e),featureSidebarVirtualized:Object(m.m)(e,"feature_sidebar_virtualized")}),e=>({setUserPrefByApi:(...t)=>e(Object(Ka.f)(...t)),hideAppSuggestion:(...t)=>e(Object(rM.k)(...t)),setAppSuggestionImpressionClogged:(...t)=>e(Object(rM.o)(...t))}))(HL);l.default.arrayOf(l.default.shape({appKey:l.default.string.isRequired,appName:l.default.string.isRequired}));const GL=({appName:e},{appName:t})=>Object(UL.a)(e,t);function KL({displayedAppSuggestionsList:e}){return o.a.createElement(i.Fragment,null,e.sort(GL).map(({appKey:e})=>o.a.createElement(WL,{appKey:e,key:e})))}KL.displayName="AppSuggestionLinks",KL.defaultProps={displayedAppSuggestionsList:[]};var VL=Object(u.b)(e=>({displayedAppSuggestionsList:Object(rM.g)(e)}))(KL);const zL=new x.b("channel_sidebar"),$L=(l.default.string,l.default.bool,l.default.object,l.default.func,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.node,l.default.func,l.default.func,{channelSectionId:"",featureSidebarVirtualized:!1,channelSection:{},updateChannelSection:r.a,shouldUseChannelSections:!1,featureChannelSections:!1,deleteChannelSection:r.a,openModal:r.a,closeModal:r.a,labelPrefix:null,onRenameSectionSelected:r.a,onRemoveSectionSelected:r.a});class section_menu_SectionMenu extends i.Component{constructor(e){super(e),this.renderSectionMenu=this.renderSectionMenu.bind(this),this.onSectionMenuOpen=this.onSectionMenuOpen.bind(this),this.onSectionMenuClose=this.onSectionMenuClose.bind(this),this.state={ellipsisVisible:!1}}onSectionMenuOpen(){this.setState(()=>({ellipsisVisible:!0}))}onSectionMenuClose(){this.setState(()=>({ellipsisVisible:!1}))}renderSectionMenu(e){return o.a.createElement(fn.f,s()({width:200,className:"p-channel_sidebar__channel_section_select_menu"},e,{"data-qa":"channel_section_menu"}),o.a.createElement(fn.b,{"data-qa":"channel_section_menu_rename_channel_section",onSelected:this.props.onRenameSectionSelected,label:this.props.featureChannelSections?zL.t("Rename section"):null}),this.props.channelSection.type===rT.g&&o.a.createElement(fn.b,{"data-qa":"channel_section_menu_remove_channel_section",onSelected:this.props.onRemoveSectionSelected,label:this.props.featureChannelSections?zL.t("Remove section"):null,danger:!0}))}render(){var e=this.props;const t=e.featureSidebarVirtualized,a=e.featureChannelSections;return!!this.props.featureChannelSections&&o.a.createElement(i.Fragment,null,o.a.createElement(fn.e,{renderMenu:this.renderSectionMenu,onClick:this.onSectionMenuOpen,position:"bottom-left",offsetX:-4,offsetY:4,"data-qa":"channel_section_menu_trigger",onClose:this.onSectionMenuClose},o.a.createElement(_e.c,{"aria-label":t&&!a?void 0:zL.t("Channel Section Options"),"data-qa":"standard_channel_section_button"},o.a.createElement(bn.b,{"data-qa":"channel_section_ellipsis_icon",className:d()("p-channel_sidebar__section_heading_ellipsis_icon",{"p-channel_sidebar__section_heading_ellipsis_icon--hover":this.state.ellipsisVisible}),type:"vertical-ellipsis",size:"inherit",inline:!0}))))}}section_menu_SectionMenu.displayName="SectionMenu";section_menu_SectionMenu.defaultProps=$L;var YL=Object(u.b)((e,{channelSectionId:t})=>{const a=Object(A.a)(e);return{featureSidebarVirtualized:Object(m.m)(e,"feature_sidebar_virtualized"),featureChannelSections:Object(m.m)(e,"feature_channel_sections"),channelSectionId:t,channelSection:ES(e,t),shouldUseChannelSections:a}},{})(section_menu_SectionMenu);const QL=new x.b("channel_browser_coachmark"),XL=(l.default.string.isRequired,l.default.string,l.default.node,l.default.node,l.default.string,l.default.string,l.default.number,l.default.func,l.default.bool,l.default.node,l.default.string,l.default.func,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.node,l.default.object,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.oneOf(rT.a),l.default.string,l.default.object,l.default.func,l.default.number,l.default.bool,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.shape({channelSectionId:l.default.string}),l.default.shape({channelSectionId:l.default.string,isAfter:l.default.bool}),l.default.string,l.default.func,l.default.func,l.default.arrayOf(rT.p),l.default.bool,l.default.bool,l.default.arrayOf(l.default.string),l.default.func,l.default.func,l.default.func,l.default.func,{qaLabel:"",labelPrefix:null,tooltip:"",headerAriaLabel:"",tooltipClassName:null,tooltipArrowOffset:void 0,onLabelClick:r.a,showPlus:!1,plusTooltip:null,plusAriaLabel:"",onPlusClick:r.a,seenChannelBrowserCoachmark:!1,hasRecentlySharedAChannel:!1,setUserPrefByApi:r.a,openChannelBrowser:r.a,featureChannelIsRemoveCreateSharedChannel:!1,isSelected:!1,secondaryContent:void 0,clogger:{track:r.a},featureSidebarVirtualized:!1,featureChannelSections:!1,defaultSectionName:void 0,channelSectionId:void 0,channelSection:{},shouldUseChannelSections:!1,isCollapsed:!1,setSectionCollapsed:r.a,badgeCount:0,hasUnreads:!1,connectDropTarget:RP.a,connectDragSource:RP.a,isChannelDraggingOverHeading:!1,isChannelSectionDraggingOverHeading:!1,lastActiveDropTargetForChannelDrag:void 0,lastActiveDropTargetForChannelSectionDrag:void 0,priorDisplayedChannelSectionId:void 0,setLastActiveDropTargetForChannelDrag:r.a,setLastActiveDropTargetForChannelSectionDrag:r.a,orderedChannelSections:[],isAnyChannelDragging:!1,isAnyChannelSectionDragging:!1,channelIds:[],updateChannelSection:r.a,deleteChannelSection:r.a,openModal:r.a,closeModal:r.a}),JL={defaultSectionName:l.default.oneOf(rT.a),channelIds:l.default.arrayOf(l.default.string)},ZL={defaultSectionName:void 0,channelIds:[]},eF=Object(Ot.b)();class section_heading_SectionHeading extends o.a.PureComponent{constructor(e){super(e),this.onLabelClick=this.onLabelClick.bind(this),this.onPlusClick=this.onPlusClick.bind(this),this.setTooltipRef=this.setTooltipRef.bind(this),this.setPlusTooltipRef=this.setPlusTooltipRef.bind(this),this.onCollapseToggleClick=this.onCollapseToggleClick.bind(this),this.sectionHeadingRef=o.a.createRef(),this.getContextMenuTemplate=this.getContextMenuTemplate.bind(this),this.onRenameSectionSelected=this.onRenameSectionSelected.bind(this),this.onRemoveSectionSelected=this.onRemoveSectionSelected.bind(this),this.onRenameChannelSectionSubmit=this.onRenameChannelSectionSubmit.bind(this),this.onRenameSectionClose=this.onRenameSectionClose.bind(this),this.renderContextMenu=this.renderContextMenu.bind(this),this.renderSectionHeading=this.renderSectionHeading.bind(this),this.state={showingModal:!1}}componentDidUpdate(e){if(this.props.shouldUseChannelSections&&!e.isChannelDraggingOverHeading&&this.props.isChannelDraggingOverHeading&&this.props.lastActiveDropTargetForChannelDrag&&this.props.lastActiveDropTargetForChannelDrag.channelSectionId!==this.props.channelSectionId&&this.props.setLastActiveDropTargetForChannelDrag({channelSectionId:this.props.channelSectionId}),this.props.shouldUseChannelSections&&!e.isChannelSectionDraggingOverHeading&&this.props.isChannelSectionDraggingOverHeading){const e=this.props.channelSectionId,t=!Rx({isCollapsed:this.props.isCollapsed,channelSectionChannelIds:this.props.channelIds,channelId:null});this.props.setLastActiveDropTargetForChannelSectionDrag({channelSectionId:e,isAfter:t})}}onCollapseToggleClick(e){e.preventDefault(),eF.action(Mx,`Toggled collapsed state of heading ${this.props.qaLabel}`);var t=this.props;const a=t.channelSectionId,n=t.defaultSectionName,s=t.isCollapsed;this.props.setSectionCollapsed({channelSectionId:a,defaultSectionName:n,isCollapsed:!s})}onLabelClick(e){this.props.shouldUseChannelSections?this.onCollapseToggleClick(e):(e.preventDefault(),eF.action(Mx,`Selected heading ${this.props.qaLabel}`),this.props.onLabelClick(),this.tooltip&&this.tooltip.hideTip())}onPlusClick(e){e.preventDefault(),eF.action(Mx,`Clicked plus button for ${this.props.qaLabel}`),this.props.onPlusClick(),this.plusTooltip&&this.plusTooltip.hideTip(),this.props.clogger.track(de.EventId.SIDEBAR_PLUS_CLICK,{label:this.props.qaLabel})}onRenameSectionSelected(){this.setState(()=>({showingModal:!0}))}onRemoveSectionSelected(){if(!this.props.featureChannelSections)return;const e=o.a.createElement(i.Fragment,null,o.a.createElement("span",null,this.props.featureChannelSections?QL.rt("Conversations in <strong>{labelPrefix} {channelSectionName}</strong> across all workspaces will move back to the Channels or Direct Messages section in your sidebar.",{labelPrefix:this.renderLabelPrefix(),channelSectionName:this.props.channelSection.name}):null),o.a.createElement("div",{className:"p-channel_sidebar__remove_section_modal_note"},this.props.featureChannelSections?QL.rt("<strong>Note:</strong> you won't be leaving any channels when you remove this section."):null));this.props.openModal({element:o.a.createElement(Nm.a,{"data-qa":"remove_channel_section_modal",submitButtonText:this.props.featureChannelSections?QL.t("Remove"):null,submitButtonType:"danger",cancelButtonText:this.props.featureChannelSections?QL.t("Cancel"):null,onSubmit:()=>{this.props.deleteChannelSection({channelSectionId:this.props.channelSectionId}).then(()=>this.props.closeModal()).catch(()=>this.props.closeModal())},onCancel:()=>this.props.closeModal(),onClose:()=>this.props.closeModal(),title:QL.t("Remove this section?")},e)})}onRenameChannelSectionSubmit({text:e,emoji:t}){const a=this.props.channelSection,n=t.startsWith(":")&&t.endsWith(":")?t.slice(1,-1):t,s={id:a.id,name:e,emoji:n,type:a.type};a.nextChannelSectionId&&(s.nextChannelSectionId=a.nextChannelSectionId),this.props.updateChannelSection({channelSection:s}).then(()=>{this.setState(()=>({showingModal:!1}))}).catch(()=>{this.setState(()=>({showingModal:!1}))})}onRenameSectionClose(){this.setState(()=>({showingModal:!1}))}setTooltipRef(e){this.tooltip=e}setPlusTooltipRef(e){this.plusTooltip=e}getContextMenuTemplate(){const e=new x.b("menu");let t;const a={label:this.props.featureChannelSections?e.t("Rename Section"):null,click:()=>this.onRenameSectionSelected()},n={label:this.props.featureChannelSections?e.t("Remove Section"):null,click:()=>this.onRemoveSectionSelected(),danger:!0};return this.props.channelSection.type===rT.g?t=[a,n]:this.props.channelSection.type===rT.h&&(t=[a]),t}determineTabIndexForPlus(){var e=this.props;const t=e.onPlusClick,a=e.onLabelClick;return e.featureSidebarVirtualized?-1:t===a?"-1":void 0}renderLabelPrefix(){const e=this.props.labelPrefix;return e||null}renderSectionHeadingRightMaybe(e){var t=this.props;const a=t.showPlus,n=t.plusTooltip,r=t.plusAriaLabel,i=t.qaLabel,l=t.onPlusClick,c=t.onLabelClick,d=t.featureSidebarVirtualized,u=t.isCollapsed,p=t.badgeCount;let h=null;if(this.props.shouldUseChannelSections&&u&&p>0)h=o.a.createElement(Hx.b,{className:"p-channel_sidebar__badge",style:Hx.a.red,count:p});else if(!this.props.shouldUseChannelSections||this.props.channelSection.type!==rT.g&&this.props.channelSection.type!==rT.h){if(a){const e=this.determineTabIndexForPlus(),t=l===c||d?"true":void 0,a=o.a.createElement(_e.c,{className:"p-channel_sidebar__section_heading_plus",onClick:this.onPlusClick,"aria-label":d?void 0:r,"aria-hidden":t,tabIndex:e,"data-qa":`channel_sidebar__plus__${i}`});h=n?o.a.createElement(Xr.c,{tip:n,position:"top",ref:this.setPlusTooltipRef,delay:Xr.a},a):a}}else h=o.a.createElement(YL,s()({},e,{channelSectionId:this.props.channelSectionId,labelPrefix:this.props.labelPrefix,onRenameSectionSelected:this.onRenameSectionSelected,onRemoveSectionSelected:this.onRemoveSectionSelected,onRenameChannelSectionSubmit:this.onRenameChannelSectionSubmit}));return h?o.a.createElement("div",{className:"p-channel_sidebar__section_heading_right"},h):null}renderSharedChannelsCoachmarkMaybe(e){var t=this.props;const a=t.seenChannelBrowserCoachmark,n=t.hasRecentlySharedAChannel,s=t.qaLabel,r=t.featureChannelIsRemoveCreateSharedChannel;if("shared_channels"!==s&&!r||"channels"!==s&&r||a||!n)return e;const i=()=>{this.props.setUserPrefByApi({pref:"seen_channel_browser_admin_coachmark",value:!0})},l=o.a.createElement(Ya.a,{secondaryCallToActionText:QL.t("Close"),primaryCallToActionText:QL.t("Show Me"),title:QL.t("View and manage shared channels"),content:QL.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar."),isOpen:!0,onClickSecondaryButton:i,onClickPrimaryButton:()=>{i(),this.props.openChannelBrowser()},orientation:"right",closeCoachmark:i},o.a.createElement("h3",{className:"margin_bottom_50"},QL.t("View and manage shared channels")),o.a.createElement("p",null,QL.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar.")));return o.a.createElement("div",null,o.a.createElement(sn.b,{orientation:"right",coachmarkElement:l},e))}renderCollapseToggle(){return this.props.shouldUseChannelSections&&(this.props.defaultSectionName||this.props.channelSectionId)?o.a.createElement("span",{role:"presentation","aria-hidden":"true",onClick:this.onCollapseToggleClick},o.a.createElement(bn.b,{"data-qa":"channel-section-collapse",className:"p-channel_sidebar__section_heading_expand",type:"caret-right",size:"inherit",inline:!0})):null}renderContextMenu(){return o.a.createElement(hx.a,{width:200,getTemplate:this.getContextMenuTemplate,desktopAppOnly:!1},this.renderSectionHeading())}renderSectionHeading(){var e=this.props;const t=e.label,a=e.qaLabel,n=e.tooltip,i=e.headerAriaLabel,l=e.tooltipClassName,c=e.tooltipArrowOffset,u=e.onLabelClick,p=e.isSelected,h=e.isCollapsed,m=e.isAnyChannelSectionDragging,b=e.secondaryContent,f=e.featureSidebarVirtualized,_=e.shouldUseChannelSections,g=e.hasUnreads,y=e.channelIds,O=e.isAnyChannelDragging,C=f?-1:void 0;let v;const E=u!==r.a||_;v=E?o.a.createElement(_e.c,{className:d()("p-channel_sidebar__section_heading_label","p-channel_sidebar__section_heading_label--clickable",{"p-channel_sidebar__section_heading_label--unreads":g}),onClick:this.onLabelClick,"aria-label":f?void 0:i,"aria-hidden":!!f||void 0,tabIndex:C,"data-qa":`channel_sidebar__section_heading_label__${a}`},this.renderLabelPrefix()," ",t):o.a.createElement("span",{role:f?void 0:"heading","aria-level":f?void 0:"2",className:d()("p-channel_sidebar__section_heading_label",{"p-channel_sidebar__section_heading_label--unreads":g}),"data-qa":`channel_sidebar__section_heading_label__${a}`},this.renderLabelPrefix()," ",t);const k=n&&!_?o.a.createElement(Xr.c,{tip:n,tipClassName:l,position:"top-left",tipArrowOffset:c,ref:this.setTooltipRef,delay:Xr.a},this.renderSharedChannelsCoachmarkMaybe(v)):v,S=E&&!f?o.a.createElement("h2",{className:"offscreen"},t):null,j=!f&&this.props.onPlusClick!==this.props.onLabelClick,I=j?"group":void 0,w=j?t:void 0,T={};if(_){this.props.connectDropTarget(this.sectionHeadingRef),this.props.connectDragSource(this.sectionHeadingRef);const e=this.props.orderedChannelSections.length>0&&this.props.orderedChannelSections[this.props.orderedChannelSections.length-1].id===this.props.channelSectionId,t=h||0===y.length;T["p-channel_sidebar__section_heading--collapsed"]=h,T["p-channel_sidebar__section_heading--empty"]=t,T["p-channel_sidebar__section_heading--drop_over_section"]=O&&this.props.lastActiveDropTargetForChannelDrag&&this.props.lastActiveDropTargetForChannelDrag.channelSectionId===this.props.channelSectionId;const a=m&&this.props.lastActiveDropTargetForChannelSectionDrag&&this.props.priorDisplayedChannelSectionId&&this.props.lastActiveDropTargetForChannelSectionDrag.channelSectionId===this.props.priorDisplayedChannelSectionId&&this.props.lastActiveDropTargetForChannelSectionDrag.isAfter,n=m&&this.props.lastActiveDropTargetForChannelSectionDrag&&this.props.lastActiveDropTargetForChannelSectionDrag.channelSectionId===this.props.channelSectionId&&!this.props.lastActiveDropTargetForChannelSectionDrag.isAfter;T["p-channel_sidebar__section_heading--drop_target_before"]=n||a;const s=m&&this.props.lastActiveDropTargetForChannelSectionDrag&&this.props.lastActiveDropTargetForChannelSectionDrag.channelSectionId===this.props.channelSectionId&&this.props.lastActiveDropTargetForChannelSectionDrag.isAfter;T["p-channel_sidebar__section_heading--drop_target_after"]=e&&t&&s}return o.a.createElement("div",{className:d()("p-channel_sidebar__section_heading",s()({"p-channel_sidebar__section_heading--selected":p},T)),ref:this.sectionHeadingRef,"data-qa-channel-sidebar-section-heading":a,"data-qa":a,role:I,"aria-label":w},this.renderCollapseToggle(),S,k,this.renderSectionHeadingRightMaybe(),b)}render(){return o.a.createElement(i.Fragment,null,this.state.showingModal&&o.a.createElement(sT,{focusOnMount:!0,openedFromKeyboardShortcut:!1,onRenameChannelSectionSubmit:this.onRenameChannelSectionSubmit,onClose:this.onRenameSectionClose,channelSectionId:this.props.channelSectionId,initialText:this.props.channelSection.name,initialEmoji:this.props.channelSection.emoji}),this.props.shouldUseChannelSections&&Object(re.a)()&&(this.props.channelSection.type===rT.h||this.props.channelSection.type===rT.g)?this.renderContextMenu():this.renderSectionHeading())}}section_heading_SectionHeading.displayName="SectionHeading",section_heading_SectionHeading.defaultProps=XL;const tF=Object(xr.a)()?Object(vx.a)("DRAG_CHANNEL_SIDEBAR_SECTION_HEADING",{beginDrag:e=>({channelSection:e.channelSection}),endDrag:e=>{e.setLastActiveDropTargetForChannelSectionDrag({channelSectionId:null,isAbove:!1})},canDrag:e=>e.shouldUseChannelSections&&!e.isOrganizing},e=>({connectDragSource:e.dragSource()}))(section_heading_SectionHeading):section_heading_SectionHeading,aF=["DRAG_CHANNEL_SIDEBAR_CHANNEL","DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"],nF=Object(xr.a)()?Object(nM.a)(aF,{},(e,t)=>{const a=t.getItemType(),n="DRAG_CHANNEL_SIDEBAR_CHANNEL"===a,s="DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"===a,r=n&&t.isOver(),i=s&&t.isOver();return{connectDropTarget:e.dropTarget(),isAnyChannelDragging:n,isAnyChannelSectionDragging:s,isChannelDraggingOverHeading:r,isChannelSectionDraggingOverHeading:i}})(tF):section_heading_SectionHeading,sF=(e,{channelSectionId:t,defaultSectionName:a,channelIds:n})=>{const s=Object(A.a)(e);let r=!1;t?r=RS(e,t):a&&(r=AS(e,a));let i=!1,o=0;return s&&r&&n.forEach(t=>{if(Object(An.a)(t)){const a=Object(B.e)(e,t);if(!Object(q.rb)(a)&&!Object(xu.c)(e,a.id)){const t=Object(q.V)(a),n=Object(B.d)(e,a);i=i||t>0,o+=n}}}),{seenChannelBrowserCoachmark:Object(ba.k)(e,"seen_channel_browser_admin_coachmark"),hasRecentlySharedAChannel:Object(ba.k)(e,"has_recently_shared_a_channel"),featureChannelIsRemoveCreateSharedChannel:Object(m.m)(e,"feature_channel_is_remove_create_shared_channel"),clogger:Object(ie.a)({state:e}),featureSidebarVirtualized:Object(m.m)(e,"feature_sidebar_virtualized"),featureChannelSections:Object(m.m)(e,"feature_channel_sections"),isCollapsed:s&&r,shouldUseChannelSections:s,hasUnreads:i,badgeCount:o,channelSection:ES(e,t),isOrganizing:NS(e),orderedChannelSections:CS(e),lastActiveDropTargetForChannelDrag:s?DS(e):null,lastActiveDropTargetForChannelSectionDrag:s?BS(e):null}},rF={setUserPrefByApi:(...e)=>Object(Ka.f)(...e),openChannelBrowser:(...e)=>Object(fe.a)(...e),setSectionCollapsed:(...e)=>iT(...e),updateChannelSection:(...e)=>cT(...e),deleteChannelSection:(...e)=>uT(...e),openModal:(...e)=>Object(ga.e)(...e),closeModal:(...e)=>Object(ga.a)(...e),setLastActiveDropTargetForChannelDrag:(...e)=>Object(bS.i)(...e),setLastActiveDropTargetForChannelSectionDrag:(...e)=>Object(bS.j)(...e)},iF=Object(u.b)(sF,rF)(section_heading_SectionHeading);iF.propTypes=JL,iF.defaultProps=ZL;var oF=iF;const lF=Object(u.b)(sF,rF,null,{withRef:!0})(nF);lF.propTypes=JL,lF.defaultProps=ZL;const cF=new x.b("channel_sidebar"),dF=(l.default.object,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.bool,l.default.func,l.default.arrayOf(l.default.string),{clogger:{track:r.a},featureChannelSidebarDraftsSection:!1,featureComposeFlow:!1,isSelected:!1,selectItem:r.a,setUserPrefByApi:r.a,showDraftsSectionCoachmark:!1,scrollToTopOfChannelList:r.a,channelIds:[]});class drafts_heading_DraftsHeading extends i.Component{constructor(e){super(e),this.state={showCoachmark:e.showDraftsSectionCoachmark},this.markCoachmarkSeen=this.markCoachmarkSeen.bind(this),this.onShow=this.onShow.bind(this)}componentDidMount(){this.props.showDraftsSectionCoachmark&&this.props.scrollToTopOfChannelList()}onShow(){this.state.showCoachmark&&this.props.setUserPrefByApi({pref:"seen_drafts_section_coachmark",value:!0})}markCoachmarkSeen(){this.setState(()=>({showCoachmark:!1}))}render(){var e=this.props;const t=e.featureChannelSidebarDraftsSection,a=e.featureComposeFlow,n=e.isSelected,r=e.selectItem,i=e.channelIds,l=e.clogger,c=this.state.showCoachmark;if(!t)return null;const d={};if(a){const e=cF.t("View all drafts");d.onLabelClick=(()=>{r("Pdrafts"),l.track(de.EventId.COMPOSE_FLOW,{draft_action_source:"sidebar",contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.COMPOSE_FLOW_DRAFTS_OPEN}}})}),d.headerAriaLabel=e,d.tooltip=e,d.tooltipArrowOffset=20,d.isSelected=n}const u=o.a.createElement(oF,s()({},d,{label:cF.t("Drafts"),defaultSectionName:rT.k,qaLabel:"drafts",channelIds:i}));if(c){this.onShow();const e=cF.t("Pick up where you left off"),t=cF.t("Your drafts are now collected in one place, so you can jump right back whenever you're ready to hit send."),a=o.a.createElement(Ya.a,{orientation:"right",onClickPrimaryButton:this.markCoachmarkSeen,closeCoachmark:this.markCoachmarkSeen,primaryCallToActionText:cF.t("Got it",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0",fallbackHashNs:"coachmarks"}),isOpen:!0,"data-qa":"drafts-coachmark"},o.a.createElement("h3",{className:"margin_bottom_50"},e),o.a.createElement("p",null,t));return o.a.createElement(sn.b,{orientation:"right",coachmarkElement:a},o.a.createElement("div",null,u))}return u}}drafts_heading_DraftsHeading.displayName="DraftsHeading",drafts_heading_DraftsHeading.defaultProps=dF;var uF=Object(u.b)(e=>({clogger:Object(ie.a)({state:e}),featureChannelSidebarDraftsSection:Object(m.m)(e,"feature_channel_sidebar_drafts_section"),featureComposeFlow:Object(C.g)(e),isSelected:"Pdrafts"===Object(_.a)(e),showDraftsSectionCoachmark:!Object(ba.k)(e,"seen_drafts_section_coachmark")}),e=>({setUserPrefByApi:t=>e(Object(Ka.f)(t))}))(drafts_heading_DraftsHeading);const pF=new x.b("channel_sidebar");l.default.object.isRequired,l.default.bool;class upgrade_slack_cta_UpgradeSlackCTA extends i.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}componentDidMount(){this.clog(de.UiAction.IMPRESSION)}onClick(){this.clog(de.UiAction.CLICK)}clog(e){this.props.clogger.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:de.UiStep.SIDEBAR,action:e,ui_properties:{element_type:de.ElementType.LINK,element_name:"upgrade_link"}}}})}render(){const e=this.props.featureSidebarVirtualized,t=o.a.createElement("span",{className:"p-channel_sidebar__name"},pF.t("Upgrade")),a=e?-1:void 0,n=e?"presentation":void 0;return o.a.createElement(Ze.a,{className:"p-channel_sidebar__link p-channel_sidebar__link--upgrade-slack","data-qa":"upgrade-slack-cta",onClick:this.onClick,href:Object(gr.k)({entryPoint:"channel_sidebar_upgrade_cta"}),tabIndex:a,role:n},t)}}upgrade_slack_cta_UpgradeSlackCTA.displayName="UpgradeSlackCTA",upgrade_slack_cta_UpgradeSlackCTA.defaultProps={featureSidebarVirtualized:!1};var hF=Object(u.b)(function(e){return{clogger:Object(ie.a)({state:e}),featureSidebarVirtualized:Object(m.m)(e,"feature_sidebar_virtualized")}})(upgrade_slack_cta_UpgradeSlackCTA);const mF=new x.b("channel_sidebar"),bF=e=>o.a.createElement(oF,s()({},e,{label:mF.t("Starred"),qaLabel:"starred",defaultSectionName:rT.o}));bF.displayName="StarredHeading";var fF=Object(_p.a)(bF);l.default.shape({id:l.default.string,emoji:l.default.string,name:l.default.string}).isRequired;const _F=e=>o.a.createElement(lF,s()({},e,{labelPrefix:e.channelSection.emoji&&o.a.createElement(Ho.b,{text:e.channelSection.emoji,stopAnimations:!0,obeyEmojiMode:!1,emojiSize:Ho.a.SMALL,forceDisplay:!0,isEmojiInlineWithText:!0}),label:e.channelSection.name,qaLabel:`custom-${e.channelSection.id}`,channelSectionId:e.channelSection.id}));_F.displayName="ChannelSectionHeading";var gF=Object(_p.a)(_F),yF=a("08ch");const OF=new x.b("channel_sidebar"),CF=(l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.object,{canOpenChannelBrowser:!0,showPlusButton:!1,openSharedChannelCreationModal:r.a,openChannelCreateModal:r.a,canUserRequestSharedChannel:!1,canUserCreateSharedChannel:!1,featureSonicDmBrowser:!1,openDmBrowserModal:r.a,clogger:{}}),vF=e=>{const t=e.canOpenChannelBrowser,a=e.showPlusButton;let n;t&&(n=OF.t("Browse all shared channels"));const i=t?()=>e.openChannelBrowser({initialFilter:"shared"}):r.a,l=e.openSharedChannelCreationModal.bind(null,{entryPoint:"shared_channel_sidebar"});return o.a.createElement(oF,s()({},e,{onLabelClick:i,tooltip:n,headerAriaLabel:OF.t("Browse all shared channels"),tooltipArrowOffset:50,label:OF.t("Shared Channels"),qaLabel:"shared_channels",showPlus:a,plusTooltip:OF.t("Create a shared channel"),onPlusClick:(...e)=>l(...e),defaultSectionName:rT.n}))};vF.displayName="SharedChannelsHeading",vF.defaultProps=CF;const EF={openSharedChannelCreationModal:(...e)=>Object(yF.a)(...e),openChannelBrowser:(...e)=>Object(fe.a)(...e),openDmBrowserModal:(...e)=>Object(Qk.a)(...e),openChannelCreateModal:(...e)=>Object(I.a)(...e)},kF=Object(_p.a)(vF);var SF=Object(u.b)(e=>({canOpenChannelBrowser:!Object(Je.Mb)(Object(bi.b)(e)),featureSonicEscCreation:Object(m.m)(e,"feature_sonic_esc_creation"),showPlusButton:jF(e),canUserRequestSharedChannel:Object(te.P)(e),canUserCreateSharedChannel:Object(te.E)(e),featureSonicDmBrowser:Object(m.m)(e,"feature_sonic_dm_browser")}),EF)(kF);function jF(e){const t=!Object(m.m)(e,"feature_shared_channels_block_large_orgs"),a=Object(bi.b)(e);return!(!Object(te.D)(e)&&!Object(te.C)(e))&&(Object(mj.a)(e)?Object(te.P)(e):Object(z_.d)(e)&&t?Object(Je.g)(e,{blockAllForNoOne:!0}):!Object(Je.Mb)(a)&&!Object(Je.Gb)(a)&&Object(te.P)(e))}const IF=new x.b("coachmarks"),wF=(l.default.object,l.default.bool,l.default.string,l.default.bool,l.default.bool,l.default.func.isRequired,l.default.instanceOf(Element),{currentMember:r.a,currentMemberIsAdmin:!1,firstListedChannel:null,inSinglePublicChannel:!1,inSinglePrivateChannel:!1,anchorElement:null});class channel_heading_coachmark_ChannelHeadingCoachmark extends i.Component{constructor(e){super(e),this.onClose=this.onClose.bind(this),this.renderCoachmarkContent=this.renderCoachmarkContent.bind(this)}onClose(e){e.preventDefault(),this.props.setAboutChannelsCoachmarkIsVisible(!1)}renderCoachmarkContent(){var e=this.props;const t=e.currentMember,a=e.currentMemberIsAdmin,n=e.inSinglePublicChannel,s=e.inSinglePrivateChannel,r=e.firstListedChannel;let i="";return i=a?IF.t("Channels bring order and searchability to your team\u2019s conversations. Organize by topic (#research), working group (#sales), or specific project (#sales-tv-ad)."):Object(Je.Gb)(t)?n?IF.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in one channel, {channelName}.",{channelName:o.a.createElement("strong",null,r),fallbackHash:"714a97c13fc44eebbf3c57a94f5e275f6c6da22f",fallbackHashNs:"coachmarks"}):s?IF.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can access one channel, {channelName}. This is a private, invitation-only channel.",{channelName:o.a.createElement("strong",null,r),fallbackHash:"6b2988717e064c5abfcad7bc9ba9187458753ac3",fallbackHashNs:"coachmarks"}):IF.t("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in the channels listed here."):IF.t("Channels bring order and searchability to your team\u2019s conversations. They\u2019re organized by topic (#research), working group (#sales), or specific project (#sales-tv-ad).")}render(){const e=this.props.anchorElement;return o.a.createElement(Ya.a,{anchorElement:e,orientation:"right",onClickPrimaryButton:this.onClose,closeCoachmark:this.onClose,primaryCallToActionText:IF.t("Got it!"),isOpen:!0},o.a.createElement("h3",{className:"margin_bottom_50"},IF.t("Messaging happens in channels")),o.a.createElement("p",null,this.renderCoachmarkContent()))}}channel_heading_coachmark_ChannelHeadingCoachmark.displayName="ChannelHeadingCoachmark",channel_heading_coachmark_ChannelHeadingCoachmark.defaultProps=wF;const TF={setAboutChannelsCoachmarkIsVisible:(...e)=>Object(rM.m)(...e)};var NF=Object(u.b)(e=>{const t=Object(B.t)(e),a=t.filter(q.Cb),n=t.filter(q.Db),s=Object(bi.b)(e);return{currentMember:s,currentMemberIsAdmin:Object(Je.eb)(e,s),inSinglePrivateChannel:1===t.length&&1===a.length,inSinglePublicChannel:1===t.length&&1===n.length,firstListedChannel:t.length?t[0].name:""}},TF)(channel_heading_coachmark_ChannelHeadingCoachmark);const AF=new x.b("channel_sidebar"),RF=(l.default.bool,l.default.bool,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.func.isRequired,e=>{const t=e.featureOfflineMode,a=e.showPlus,n=e.canOpenChannelBrowser,r=e.wasRecentlyOnline,i=e.aboutChannelsCoachmarkIsVisible,l=e.iAPhase1Enabled;let c,d,u=AF.t("Create a channel");t&&!r&&(u=o.a.createElement(zr.a,{tooltipLabel:AF.t("Create a channel")})),n&&!l&&(c=e.openChannelBrowser,d=AF.t("Browse all channels"));const p=o.a.createElement(oF,s()({},e,{onLabelClick:c,label:AF.t("Channels"),qaLabel:"channels",tooltip:d,headerAriaLabel:AF.t("Browse all channels"),tooltipArrowOffset:30,showPlus:a,plusTooltip:u,plusAriaLabel:AF.t("Create a channel"),defaultSectionName:rT.j}));return i?o.a.createElement(sn.b,{orientation:"right",coachmarkElement:o.a.createElement(NF,null)},p):p});RF.defaultProps={showPlus:!0,canOpenChannelBrowser:!0};const MF={openChannelBrowser:(...e)=>Object(fe.a)(...e)};var PF=Object(u.b)(e=>({showPlus:Object(te.D)(e)||Object(te.C)(e),canOpenChannelBrowser:!Object(Je.Mb)(Object(bi.b)(e)),featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),wasRecentlyOnline:Object(pa.h)(e),aboutChannelsCoachmarkIsVisible:Object(rM.b)(e),iAPhase1Enabled:Object(bo.c)(e)}),MF)(RF);l.default.string,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.number,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool;const xF={name:"",setIsRenaming:r.a,saveFolderData:r.a,renameFolder:r.a,toggleFolderCollapse:r.a,setFolderCollapse:r.a,badgeCount:0,hasUnreads:!1,isCollapsed:!1,isRenaming:!1,onDragStart:r.a,onDragEnd:r.a,onDrop:r.a,onDragOver:r.a,featureSidebarVirtualized:!1};class folder_heading_FolderHeading extends o.a.PureComponent{constructor(e){super(e),this.toggleFolderCollapse=this.toggleFolderCollapse.bind(this),this.renameFolder=this.renameFolder.bind(this),this.showRenameBox=this.showRenameBox.bind(this),this.setRenamingLabel=this.setRenamingLabel.bind(this),this.setInputRef=this.setInputRef.bind(this),this.onBlur=this.onBlur.bind(this),this.state={renamingLabel:this.props.name,hasTyped:!1}}onBlur(e){if(this.props.isRenaming){const t=this.props.name,a=e.target.value;this.props.renameFolder({oldName:t,newName:a}),this.props.saveFolderData()}}setRenamingLabel(e){const t=e.target.value;this.setState(()=>({renamingLabel:t,hasTyped:!0}))}setInputRef(e){e&&!this.state.hasTyped&&(e.select(),e.focus())}showRenameBox(){const e=this.props.name;this.props.setIsRenaming({name:e}),this.setState(()=>({renamingLabel:e,hasTyped:!1}))}toggleFolderCollapse(e){e.altKey?this.props.setFolderCollapse({isCollapsed:!this.props.isCollapsed}):this.props.toggleFolderCollapse({name:this.props.name}),this.props.saveFolderData()}renameFolder(e){const t=this.props.name;let a;"Enter"===e.key&&(a=e.target.value),"Escape"===e.key&&(a=this.props.name),void 0!==a&&(this.props.renameFolder({oldName:t,newName:a}),this.props.saveFolderData())}render(){const e=this.props.featureSidebarVirtualized,t=this.props.isRenaming?"":o.a.createElement(_e.c,{"aria-hidden":!!e||void 0,tabIndex:e?-1:void 0,className:d()("p-channel_sidebar__folder_heading_icon",{"p-channel_sidebar__folder_heading_icon_collapsed":this.props.isCollapsed}),onClick:this.toggleFolderCollapse});let a;a=this.props.isRenaming?o.a.createElement("input",{type:"text",className:"p-channel_sidebar__folder_heading_label_rename",value:this.state.renamingLabel,onChange:this.setRenamingLabel,onKeyDown:this.renameFolder,ref:this.setInputRef,onBlur:this.onBlur}):Object(fo.a)(this.props.name,"<")?o.a.createElement(_e.c,{className:d()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":e?"":void 0,tabIndex:e?-1:void 0},this.props.name):o.a.createElement(_e.c,{className:d()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":e?"":void 0,tabIndex:e?-1:void 0},o.a.createElement(eg.a,{text:this.props.name,noJumbomoji:!0,noHighlights:!0}));const n=this.props.isCollapsed?o.a.createElement(_e.c,{className:"p-channel_sidebar__folder_heading_badge",onClick:this.toggleFolderCollapse,"aria-hidden":!!e||void 0,tabIndex:e?-1:void 0},o.a.createElement(Hx.b,{count:this.props.badgeCount,className:"p-channel_sidebar__badge"})):"";return o.a.createElement("div",{className:"p-channel_sidebar__folder_heading","data-qa-channel-sidebar-section-heading":"folder",draggable:!0,"data-drag-type":"folder","data-drag-id":this.props.name,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver},a,n,t)}}folder_heading_FolderHeading.displayName="FolderHeading",folder_heading_FolderHeading.defaultProps=xF;const LF={toggleFolderCollapse:iM.k,setFolderCollapse:iM.i,saveFolderData:iM.h,renameFolder:iM.g,setIsRenaming:iM.j};var FF=Object(u.b)((e,{name:t})=>{const a=Object(iM.d)(e,t),n=a?Object(ht.a)(a.channelIds,t=>Object(B.e)(e,t)):[],s=!!a&&a.isCollapsed,r=!!a&&a.isRenaming,i=n.length>0?Object(oo.a)(Object(ht.a)(n,t=>Object(B.d)(e,t))):0;return{isCollapsed:s,isRenaming:r,hasUnreads:n.length>0&&!!Object(qu.a)(n,t=>Object(q.Pb)(t)&&!Object(xu.c)(e,t.id)),badgeCount:i,featureSidebarVirtualized:Object(m.m)(e,"feature_sidebar_virtualized")}},LF)(folder_heading_FolderHeading);const DF=new x.b("channel_sidebar"),BF=(l.default.string.isRequired,e=>o.a.createElement(oF,s()({},e,{tooltipClassName:"p-channel_sidebar__section_heading_tip--short",label:DF.t("Organization Channels"),qaLabel:"org_wide_channels",tooltip:DF.t("Shared with all workspaces at {orgName}",{orgName:e.orgName}),tooltipArrowOffset:50,defaultSectionName:rT.m})));BF.displayName="OrgWideChannelsHeading";var UF=Object(_p.a)(BF);var qF=Object(u.b)(e=>{return{orgName:Object(Se.e)(e)}})(UF);const HF=new x.b("channel_sidebar"),WF=e=>o.a.createElement(oF,s()({},e,{label:e.iAPhase1Enabled?"Direct messages":e.label,qaLabel:"ims",tooltip:e.iAPhase1Enabled?void 0:HF.t("Open a direct message"),headerAriaLabel:e.iAPhase1Enabled?void 0:HF.t("Open a direct message"),tooltipArrowOffset:50,showPlus:!0,plusTooltip:HF.t("Open a direct message"),plusAriaLabel:HF.t("Open a direct message"),onLabelClick:e.iAPhase1Enabled?void 0:e.openDmBrowserModal,onPlusClick:e.openDmBrowserModal,defaultSectionName:rT.l}));WF.displayName="DirectMessagesHeading",WF.defaultProps={openDmBrowserModal:r.a};const GF={openDmBrowserModal:()=>Object(Qk.a)()};var KF=Object(u.b)(e=>({label:HF.t("Direct Messages"),iAPhase1Enabled:Object(bo.c)(e)}),GF)(WF);const VF=new x.b("sonic_pilot");var zF=Object(u.b)(e=>({featureSonicPlaceholderLabels:Object(m.m)(e,"feature_sonic_placeholder_labels")}))(function({children:e,featureSonicPlaceholderLabels:t}){return t&&Object(re.a)()?o.a.createElement(o.a.Fragment,null,e,o.a.createElement("div",{className:"c-tooltip__sonic_placeholder","data-qa":"sonic-placeholder-text"},VF.t("Coming soon"))):e});const $F=new x.b("channel_sidebar"),YF=e=>{const t=e.featureM11nAppsBrowser?$F.t("Browse Apps"):o.a.createElement(zF,null,$F.t("Browse apps")),a=e.featureM11nAppsBrowser?e.openAppsBrowserModal:ML.a;let n=e.featureAppLauncher?$F.t("Recent Apps"):$F.t("Apps");return e.iAPhase1Enabled&&(n="Recent apps"),o.a.createElement(oF,s()({},e,{onLabelClick:e.featureAppLauncher?r.a:a,onPlusClick:e.featureAppLauncher?r.a:a,label:n,qaLabel:"apps",tooltip:e.featureAppLauncher?"":t,headerAriaLabel:$F.t("Browse apps"),tooltipArrowOffset:16,showPlus:e.showPlus,plusTooltip:e.featureAppLauncher?"":t,plusAriaLabel:$F.t("Browse apps"),defaultSectionName:rT.i}))};YF.displayName="AppsHeading",YF.defaultProps={featureM11nAppsBrowser:!1,featureAppLauncher:!1,iAPhase1Enabled:!1};var QF=Object(u.b)(e=>{const t=Object(dg.a)(e);return{featureM11nAppsBrowser:Object(m.m)(e,"feature_m11n_apps_browser"),featureAppLauncher:t,showPlus:!Object(bo.c)(e)&&!t,iAPhase1Enabled:Object(bo.c)(e)}},e=>Object(cg.b)({openAppsBrowserModal:aw.a},e))(YF),XF=a("z0G2");class sidebar_layout_SidebarLayout extends XF.a{constructor({getHeight:e,keys:t=[]}={}){super({keys:t}),this.getHeight=e,this.layout()}getHeightValidity(){return!0}setHeight(){}}var JF=a("3lVB");const ZF=Tg()("enter"),eD=Tg()("delete"),tD=Tg()("backspace"),aD=new x.b("channel_sidebar"),nD=(l.default.arrayOf(l.default.shape({type:l.default.string,scrollBottom:l.default.number,key:l.default.string})).isRequired,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.object.isRequired,l.default.object,l.default.object,l.default.bool,l.default.oneOf(["warm","cold"]),l.default.func,l.default.func,l.default.string,l.default.bool,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.number,l.default.bool,l.default.bool,{onItemSelect:r.a,onInviteClick:r.a,onCreateChannelClick:r.a,onCreateSharedChannelClick:r.a,onResize:r.a,onScroll:r.a,sidebarFoldersIsEnabled:!1,onDragStart:r.a,onDragEnd:r.a,onDrop:r.a,onDragOver:r.a,onCreateFolder:r.a,shouldTrackTTFMP:!0,logger:null,clogger:null,bootType:null,setHideInviteButton:r.a,setHideAddChannelButton:r.a,teamId:null,featureSeeMoreChannels:!1,removeFromSectionNavigation:r.a,addToSectionNavigation:r.a,userAttentionIsOnChat:!1,composerVisible:!1,featureSidebarVirtualized:!1,selectedItemId:void 0,closeIM:r.a,getAriaLabelForRow:r.a,shouldUseChannelSections:!1,isScreenReaderEnabled:!1,hasKeyboardFocus:!1,deleteComposerDraft:r.a,deleteChannelDraft:r.a,bannerHeight:void 0,isTopBannerVisible:!1,isBottomBannerVisible:!1});class channel_list_ChannelList extends o.a.PureComponent{constructor(e){super(e),Object(la.a)(this,["setScrollbarRef","getCurrentScrollTop","resetCurrentScrollTopMaybe","onResize","onScroll","onListFocusEnter","onInviteClick","onInviteCloseClick","onAddChannelCloseClick","onItemKeyDown","renderRow","renderRowWithWrapper","isRowFocusable","getAriaAttributesForRow","onItemSelected","scrollToTopOfChannelList","focus","getPropsForItem"]),this.currentScrollTop=0,this.height=0,this.keyboardNavigableListRef=o.a.createRef();this.layout=new sidebar_layout_SidebarLayout({getHeight:e=>this.rowHeightByKey[e]})}componentDidMount(){if(!Object(se.a)(window,"performance.timing.fetchStart"))return;let e=this.props.shouldTrackTTFMP;if(e&&Object(re.a)()){const t=Object(p.getStateForClientStore)();(e=Object(b.f)(t))&&Object(p.dispatchForClientStore)(Object(b.b)(!1))}let t=Promise.resolve();Object(ue.v)()&&Object(Is.sb)()&&(t=Object(Is.B)("shouldLogFirstMeaningfulPaint").then(t=>{"false"===t&&(e=!1)})),(ue.l||ue.t||ue.o)&&(e=!1);const a=Object(ox.d)(),n=Object(ue.u)()?"_reload":"",s=Date.now()-(window.performance.timing.fetchStart+a),r=Object(re.a)()?`ttfmp_sonic_${this.props.bootType}${n}`:`ttfmp_legacy${n}`;t.then(()=>{e&&(this.shouldLogFirstMeaningfulPaint=!1,Object(ue.v)()&&Object(Is.sb)()&&Object(Is.Vb)("shouldLogFirstMeaningfulPaint","false"),this.props.logger.info("PERF",`First meaningful paint: ${s}ms`),window.performance.timing.fetchStart>0&&this.props.telemeter.store(r,s))}),this.clogInvitePeopleButton()}componentDidUpdate(e){if(Object(re.a)()){const e=Object(p.getStateForClientStore)(),t=Object(hI.getFocusedWorkspace)(e);if(Object(b.i)(e)&&t===this.props.teamId){const e=Object(JF.b)(),t=Date.now()-e;this.props.telemeter.store("team_switch_sonic",t),Object(p.dispatchForClientStore)(Object(b.e)(!1))}}const t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Np.a)(t)&&this.props.addToSectionNavigation(),Object(Ap.a)(t)&&this.props.removeFromSectionNavigation(),this.restoreFocusOnUpdate&&(this.focus(),this.restoreFocusOnUpdate=!1)}onResize({height:e}){this.resetCurrentScrollTopMaybe(e),this.height=e,this.props.onResize({height:e})}onScroll(e,{scrollTop:t}){this.currentScrollTop=t,this.props.onScroll&&this.props.onScroll(t)}onListFocusEnter(){var e=this.props;const t=e.selectedItemId,a=e.bannerHeight,n=e.isTopBannerVisible,s=e.isBottomBannerVisible,r=e.hasKeyboardFocus,i=this.keyboardNavigableListRef.current,o=i.getActiveItem();r&&(o!==t&&i.focusOnKey(t),(n||s)&&this.ensureRowInView(t,a+10))}onDeleteKeyPressed(e){this.restoreFocusOnUpdate=!0;var t=this.props;const a=t.rows,n=t.closeIM,s=t.deleteComposerDraft,r=t.deleteChannelDraft,i=e.id,o=a[Object(AP.a)(this.rowKeys,i)];if(!o)return;const l=o.id;var c=o.params;const d=void 0===c?{}:c,u=d.channelId,p=d.threadTs,h=o.type;"composer_draft"!==h?"channel_draft"!==h?"channel"===h&&n(l):r({channelId:u,threadTs:p}):s(l)}onEnterKeyPressed(e){const t=e.currentTarget.querySelector("a,button");t&&t.click()}onItemKeyDown(e){const t=e.keyCode;t!==ZF?(t===eD||Object(ue.q)()&&t===tD)&&this.onDeleteKeyPressed(e):this.onEnterKeyPressed(e)}onInviteClick(e,t){this.props.onInviteClick(t)}onInviteCloseClick(){this.props.setHideInviteButton()}onAddChannelCloseClick(){this.props.setHideAddChannelButton()}onItemSelected(e){this.selectedItemRef=e}setScrollbarRef(e){this.Scrollbar=e&&e.getWrappedInstance?e.getWrappedInstance():e}getCurrentScrollTop(){return this.currentScrollTop}getContentHeight(e=this.props.rows){return e.length?e[e.length-1].scrollBottom:0}getAriaLabelForRow(e){var t=this.props;const a=t.isScreenReaderEnabled,n=t.hasKeyboardFocus;return e&&"channel"===e.type&&(n||a)?this.props.getAriaLabelForRow(e.id):void 0}getAriaAttributesForRow(e){return"sectionHeading"===e.type?{role:e.role,"aria-expanded":e["aria-expanded"],"aria-level":e["aria-level"],"aria-label":e["aria-label"]}:"folderHeading"===e.type?{role:e.role,"aria-level":e["aria-level"],"aria-expanded":e["aria-expanded"],"aria-label":e.name}:"sectionHeadingAriaGroup"===e.type?{role:e.role,"aria-owns":e["aria-owns"],"aria-label":e["aria-label"]}:{role:e.role,"aria-level":e["aria-level"]}}getPropsForItem({key:e,index:t}){var a=this.props;const n=a.rows,r=a.selectedItemId,i=n[t];if(!i)return;const o={className:"p-channel_sidebar__static_list__item",tabIndex:-1};if("presentation"===i.role)return s()({},o,{role:i.role});const l=this.getAriaAttributesForRow(i);if("group"===l.role)return s()({},o,l);const c=r===e,d=c?0:-1;return s()({},o,l,{tabIndex:d,"aria-label":i["aria-label"]||this.getAriaLabelForRow(i),"aria-selected":c,"aria-setsize":i["aria-setsize"],"aria-posinset":i["aria-posinset"]})}isItemInView(e){const t=this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current;return!!t&&t.isItemInView(e)}isItemAboveView(e){const t=this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current;return!!t&&t.isItemAboveView(e)}isItemBelowView(e){const t=this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current;return!!t&&t.isItemBelowView(e)}focus(){var e=this.props;const t=e.featureSidebarVirtualized,a=e.selectedItemId;t?this.keyboardNavigableListRef.current.focusOnKey(a):this.selectedItemRef&&this.selectedItemRef.focus()}clogInvitePeopleButton(){const e=this.props.clogger;e.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}}),e.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}}),e.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}}),e.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}})}resetCurrentScrollTopMaybe(e,t=this.props.rows){e>this.getContentHeight(t)&&(this.currentScrollTop=0)}scrollToTarget(e){const t=Math.max(0,Math.min(this.getContentHeight()-this.height,e));Object(ix.a)({fromValue:this.currentScrollTop,toValue:t,duration:200,easing:"easeOutQuad",onTick:({value:e,nextTick:t})=>{this.jumpToOffset(e),t()}})}ensureRowInView(e,t){const a=this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current;if(!a)return;if(a.isItemInView(e,t))return;const n=a.getContainerHeight(),s=this.layout.getTotalHeight(),r=this.layout.getOffsetForKey(e),i=this.layout.getHeight(e);a.isItemAboveView(e,t)&&a.scrollToOffset(Math.max(0,r-t),{animate:!0}),a.isItemBelowView(e,t)&&a.scrollToOffset(Math.min(s,r-n+i+t),{animate:!0})}scrollToTopOfChannelList(){this.jumpToOffset(0)}jumpToOffset(e){this.Scrollbar&&this.Scrollbar.scrollTop(e),this.keyboardNavigableListRef.current&&this.keyboardNavigableListRef.current.scrollToOffset(e)}isRowFocusable({index:e}){const t=this.props.rows[e];return"presentation"!==t.role&&"group"!==t.role}renderRowWithWrapper(e,t){const a=e.height,n=e.type,s=e.key,r={quickswitcherButton:"listitem",allThreadsLink:"listitem",searchLink:"listitem",pageLink:"listitem",sectionHeading:"listitem",channel:"listitem",app:"listitem",addAChannelLink:"listitem",invitePeopleLink:"listitem",installAppsLink:"listitem",appSuggestionLinks:"listitem",upgradeSlackCTA:"listitem",spacer:"presentation",topPadding:"presentation",emptyState:"listitem"}[n];return o.a.createElement("div",{key:s,style:{height:a},role:r},this.renderRow(t))}renderRow(e){var t=this.props;const a=t.onItemSelect,n=t.featureSeeMoreChannels,s=t.featureSidebarVirtualized,r=t.rows[e];if(!r)return null;switch(r.type){case"quickswitcherButton":return o.a.createElement(XP,null);case"allThreadsLink":return o.a.createElement(OL,{qaLabel:"all_thread_link",selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected});case"searchLink":return o.a.createElement(vL,{selectItem:a});case"pageLink":return o.a.createElement(TL,{id:r.id,selectItem:a,onItemSelected:this.onItemSelected});case"sectionHeading":return this.renderSectionHeading(r);case"sectionHeadingAriaGroup":return" ";case"folderHeading":return this.renderFolderHeading(r.name);case"channel":return this.renderChannel(r);case"composer_draft":return this.renderComposerDraft(r);case"channel_draft":return this.renderChannelDraft(r);case"appDmSuggestion":return this.renderAppDmSuggestion(r.id,r.index);case"addAChannelLink":return o.a.createElement(jL,{isDim:r.dim,qaLabel:"add_channel",label:n?aD.t("See more channels"):aD.t("Add a channel"),onClickClose:this.onAddChannelCloseClick});case"invitePeopleLink":return o.a.createElement(RL,{selectItem:this.onInviteClick,dim:r.dim,qaLabel:"invite_people",label:aD.t("Invite people"),showClose:!0,onClickClose:this.onInviteCloseClick,featureSidebarVirtualized:s});case"installAppsLink":return o.a.createElement(BL,null);case"appSuggestionLinks":return o.a.createElement(VL,null);case"upgradeSlackCTA":return o.a.createElement(hF,null);case"spacer":case"topPadding":case"emptyState":return null;default:Object(Ot.b)().warn(`Row type ${r.type} not implemented`,r)}return null}renderDraftsHeading(e){const t=e.channelIds;return o.a.createElement(uF,{selectItem:this.props.onItemSelect,scrollToTopOfChannelList:this.scrollToTopOfChannelList,channelIds:t})}renderSectionHeading(e){const t=e.name,a=e.priorDisplayedChannelSection,n=e.channelSection,s=e.channelIds;var r=this.props;const i=r.shouldUseChannelSections,l=r.onCreateChannelClick,c=r.onCreateSharedChannelClick;if(i&&n)return"drafts"===t?this.renderDraftsHeading(e):o.a.createElement(gF,{channelSection:n,priorDisplayedChannelSectionId:a&&a.id,channelIds:s});switch(t){case"drafts":return this.renderDraftsHeading(e);case"starred":return!this.props.shouldUseChannelSections&&this.props.sidebarFoldersIsEnabled?o.a.createElement(oF,{label:aD.t("Starred"),qaLabel:"starred",showPlus:!0,onPlusClick:this.props.onCreateFolder,channelIds:s}):o.a.createElement(fF,{channelIds:s});case"sharedChannels":return o.a.createElement(SF,{onPlusClick:c,channelIds:s});case"channels":return o.a.createElement(PF,{onPlusClick:l,channelIds:s});case"orgWideChannels":return o.a.createElement(qF,{channelIds:s});case"ims":return o.a.createElement(KF,{channelIds:s});case"apps":return o.a.createElement(QF,{channelIds:s});case"browse":return o.a.createElement(dx,{label:"Browse",channelIds:s});default:return null}}renderFolderHeading(e){return o.a.createElement(FF,{name:e,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver})}renderAppDmSuggestion(e,t){return o.a.createElement(Cx,{id:e,index:t})}renderChannel(e){const t=e.id,a=e.index,n=e.channelSection,s=e.channelSectionChannelIds;return this.props.shouldUseChannelSections?o.a.createElement(aL,{key:t,id:t,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:a,channelSection:n,channelSectionChannelIds:s}):this.props.sidebarFoldersIsEnabled?o.a.createElement(tL,{key:t,id:t,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:a,sidebarFoldersIsEnabled:!0,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver}):o.a.createElement(tL,{key:t,id:t,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:a,channelSection:n})}renderComposerDraft({id:e}){return o.a.createElement(oL,{id:e,key:e,onItemSelected:this.onItemSelected,selectItem:this.props.onItemSelect})}renderChannelDraft(e){const t=e.id;var a=e.params;const n=void 0===a?{}:a,s=n.draftId,r=n.channelId,i=n.threadTs;return o.a.createElement(pL,{draftId:s,channelId:r,threadTs:i,key:t,onItemSelected:this.onItemSelected,selectItem:this.props.onItemSelect})}render(){var e=this.props;const t=e.featureSidebarVirtualized,a=e.rows,n=a.map(e=>e.key);return this.rowKeys=n,this.rowHeightByKey=a.reduce((e,t)=>(e[t.key]=t.height,e),{}),o.a.createElement(pr.a,{onResize:this.onResize},({width:e,height:s})=>t?o.a.createElement(lx.a,{layout:this.layout,ref:this.keyboardNavigableListRef,width:e,height:s,className:"p-channel_sidebar__static_list",keys:n,rowRenderer:this.renderRow,"aria-label":aD.t("Channels and direct messages"),onScroll:this.onScroll,onItemKeyDown:this.onItemKeyDown,isFocusableItem:this.isRowFocusable,pageHeight:s-26,getPropsForItem:this.getPropsForItem,role:"tree",useStaticHeightForListItems:!0,useFixedTrackHeightForScrollbar:!0,onFocusEnter:this.onListFocusEnter}):o.a.createElement(Mv.a,{width:e,height:s,contentHeight:this.getContentHeight(),onScroll:this.onScroll,ref:this.setScrollbarRef,serializationKey:"channel-list-scrollbar"},o.a.createElement("div",{className:"p-channel_sidebar__static_list","data-qa":"channel_sidebar_list","aria-label":aD.t("Channels and direct messages"),role:"list"},a.map(this.renderRowWithWrapper))))}}channel_list_ChannelList.displayName="ChannelList",channel_list_ChannelList.defaultProps=nD;const sD=Object(re.a)()?Object(H.a)(channel_list_ChannelList,"ChannelList",{index:2}):channel_list_ChannelList;var rD=Object(rn.a)(sD);const iD=new x.b("channel_sidebar"),oD=(l.default.bool.isRequired,l.default.oneOfType([l.default.string,l.default.bool]),l.default.bool,l.default.oneOf(["top","bottom"]),l.default.func,l.default.bool,l.default.object,l.default.bool,{linkedId:null,isMention:!1,position:"top",ensureRowInView:r.a,featureSidebarVirtualized:!1,clogger:{},isIAPhase1Enabled:!1});class unread_banner_UnreadBanner extends o.a.PureComponent{constructor(){super(),this.onClick=this.onClick.bind(this)}onClick(e){var t=this.props;const a=t.linkedId,n=t.ensureRowInView,s=t.clogger,r=t.isIAPhase1Enabled;e.preventDefault(),s.track("SIDEBAR_MORE_UNREADS_CLICK",{is_iap1:r}),a&&n(a)}render(){var e=this.props;const t=e.isShowing,a=e.position,n=e.isMention,s=e.linkedId,r=e.featureSidebarVirtualized;if(!t)return null;const i=d()("p-channel_sidebar__banner",{"p-channel_sidebar__banner--mentions":n,"p-channel_sidebar__banner--unreads":!n,"p-channel_sidebar__banner--top":"top"===a,"p-channel_sidebar__banner--bottom":"bottom"===a}),l="top"===a?"arrow-up-medium":"arrow-down-medium",c=n?iD.t("Unread Mentions"):iD.t("More Unreads");return o.a.createElement(_e.c,{className:i,onClick:this.onClick,"data-qa-linked-id":s,tabIndex:r?-1:void 0},c,o.a.createElement(bn.b,{type:l,inline:!0,className:"p-channel_sidebar__banner_icon"}))}}unread_banner_UnreadBanner.displayName="UnreadBanner",unread_banner_UnreadBanner.defaultProps=oD;var lD=unread_banner_UnreadBanner;const cD=new x.b("drafts"),dD=(l.default.func,l.default.bool,l.default.bool,l.default.bool,{dispatch:r.a,featureComposeFlow:!1,hasMaxDrafts:!1,isIAP1Enabled:!1}),uD=({dispatch:e,featureComposeFlow:t,hasMaxDrafts:a,isIAP1Enabled:n})=>{const s=Object(sb.a)();return t?o.a.createElement(Xr.c,{delay:Xr.a,tip:a?cD.t("You have reached the maximum number of drafts (Copy TBD)"):cD.t("New message")},o.a.createElement(_e.c,{className:d()("p-channel_sidebar__compose_button",{"p-channel_sidebar__compose_button--disabled":a}),disabled:a,onClick:()=>{e(ym()),s.track(de.EventId.COMPOSE_FLOW,{draft_action_source:"sidebar",draft_type:"composer",contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.COMPOSE_FLOW_CREATE}},is_iap1:n})},tabIndex:"-1"},o.a.createElement(bn.b,{type:n?"compose-dm":"pencil",className:"p-channel_sidebar__compose_button_icon"}))):null};uD.displayName="ComposeButton",uD.defaultProps=dD;var pD=Object(u.b)(e=>({featureComposeFlow:Object(C.g)(e),hasMaxDrafts:hm(e),isIAP1Enabled:Object(bo.c)(e)}))(uD),hD=a("ZSbO");const mD=new x.b("channel_sidebar"),bD="react_channel_sidebar_update",fD=Object(pM.a)(1),_D=2,gD=10,yD=24,OD={FOCUS_WITHIN:2,CONTAINER_FOCUSED:1,NOT_FOCUSED:-1},CD=(l.default.bool,l.default.string,l.default.arrayOf(l.default.string),l.default.arrayOf(l.default.string),l.default.arrayOf(l.default.string),l.default.arrayOf(l.default.object),l.default.object,l.default.arrayOf(l.default.string),l.default.arrayOf(l.default.string),l.default.func,l.default.func,l.default.func,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.string,l.default.bool,l.default.bool,l.default.object,l.default.object,l.default.bool,l.default.oneOf(["warm","cold"]),l.default.string,l.default.object,l.default.object,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.bool,l.default.bool,{isBooted:!1,selectedItemId:null,mentionIds:[],unreadIds:[],mutedMentionIds:[],idsNeedingPresenceSubscription:[],rows:[],rowsMap:{},rowIds:[],onItemSelect:r.a,onInviteClick:r.a,onCreateChannelClick:r.a,jumperCoachmarkState:null,historyNavigationEnabled:!1,useHistoryNavigation:!1,featureClassicNav:!1,sidebarFoldersIsEnabled:!1,ensureDraftChannelObjects:void 0,initializeFolderData:r.a,initializeAppSuggestionLinksData:r.a,createFolder:r.a,dragFolderOrChannel:r.a,ariaLandmarkLabel:null,featureSonicPresenceManager:!1,featureSonicInputs:!1,telemeter:null,isWindowFocused:!1,logger:null,bootType:null,teamId:null,suggestedChannelsMap:{},clogger:{},setHideInviteButton:r.a,setHideAddChannelButton:r.a,featureSeeMoreChannels:!1,userAttentionIsOnChat:!1,composerVisible:!1,featureSidebarVirtualized:!1,closeIM:r.a,getAriaLabelForRow:r.a,deleteComposerDraft:r.a,deleteChannelDraft:r.a,shouldUseChannelSections:!1,isOrganizing:!1,isScreenReaderEnabled:!1,isWelcomePlaceAnimationEnabled:!1,isIAPhase1Enabled:!1,shouldHideForWelcomePlace:!1,connectDropTarget:RP.a,isChannelDraggingOverSidebar:!1,isChannelSectionDraggingOverSidebar:!1});class channel_sidebar_ChannelSidebar extends i.PureComponent{constructor(e){super(e),this.setRef=this.setRef.bind(this),this.ensureRowInView=this.ensureRowInView.bind(this),this.onResize=this.onResize.bind(this),this.onScroll=this.onScroll.bind(this),this.onItemSelect=this.onItemSelect.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDrop=this.onDrop.bind(this),this.onCreateFolder=this.onCreateFolder.bind(this),Object(re.a)()||(this.onFocusEnter=this.onFocusEnter.bind(this),this.onFocusLeave=this.onFocusLeave.bind(this),this.onFocusWithin=this.onFocusWithin.bind(this)),this.state=s()({},this.getUnreadRows(e),{scrolledBelowFirstMention:!1,scrolledBelowFirstUnread:!1,scrolledAboveLastMention:!1,scrolledAboveLastUnread:!1,listHeight:0,hasInitializedFolderData:!1,hasInitializedAppSuggestionLinksData:!1}),Object(re.a)()||(this.state.hasKeyboardFocus=OD.NOT_FOCUSED),this.presenceList=Object(MP.a)(this.props.idsNeedingPresenceSubscription),this.commands=[{keys:["option+up"],handler:this.gotoNext.bind(this,"up",!1)},{keys:["option+down"],handler:this.gotoNext.bind(this,"down",!1)},{keys:["option+shift+up"],handler:this.gotoNext.bind(this,"up",!0)},{keys:["option+shift+down"],handler:this.gotoNext.bind(this,"down",!0)}],this.pendingEnsureRowInView=!1,this.shouldTrackTTFMP=!0,this.isSuggestedChannelsClogSent=!1,this.hasInitializedDraftsData=!1}componentDidMount(){this.keyCommands=new Au.a,this.keyCommands.bindAll(this.commands),this.maybeLoadFolderData(),this.maybeLoadDraftsData(),this.maybeLoadAppSuggestionLinksData(),this.shouldTrackTTFMP=this.props.isWindowFocused,this.maybeBeaconBootMountSuccess()}componentDidUpdate(e){var t=this.props;const a=t.selectedItemId,n=t.isBooted,s=t.jumperCoachmarkState,r=t.rows,i=t.suggestedChannelsMap,o=t.clogger,l=t.telemeter,c="SHOW_BUTTON"===s||"HIDE_BUTTON"===s,d=e.selectedItemId!==a,u=n&&!e.isBooted;if(c||!d&&!u||this.ensureRowInView(a),this.maybeLoadFolderData(),this.maybeLoadDraftsData(),this.maybeLoadAppSuggestionLinksData(),fD&&l.measureAndClear(`${bD}_mark`,bD),!this.isSuggestedChannelsClogSent&&Object.keys(i).length){const e=r.filter(e=>"channel"===e.type&&i[e.id]).length;e&&o.track&&(this.isSuggestedChannelsClogSent=!0,o.track("SIDEBAR_SUGGESTED_CHANNELS_RENDERED",{count:e}))}this.maybeBeaconBootMountSuccess()}componentWillUnmount(){this.keyCommands.reset(),this.presenceList&&this.presenceList.destroy()}onCreateFolder(){this.props.sidebarFoldersIsEnabled&&this.props.createFolder()}onDragEnd(){this.props.sidebarFoldersIsEnabled&&(this.props.dragFolderOrChannel(this.state.dragData),this.setState(()=>({dragData:null})))}onDragOver(e){this.props.sidebarFoldersIsEnabled&&e.preventDefault()}onDragStart(e){if(!this.props.sidebarFoldersIsEnabled)return;const t=e.dataTransfer;t.effectAllowed="move",t.dropEffect="move";let a=e.target;for(;a&&!a.attributes["data-drag-type"];)a=a.parentNode;const n={src:{type:a.attributes["data-drag-type"].value,id:a.attributes["data-drag-id"].value}};this.setState(()=>({dragData:n}))}onDrop(e){if(!this.props.sidebarFoldersIsEnabled)return;let t=e.target;for(;t&&!t.attributes["data-drag-type"];)t=t.parentNode;this.setState(e=>({dragData:s()({},e.dragData,{dest:{type:t.attributes["data-drag-type"].value,id:t.attributes["data-drag-id"].value}})}))}onFocusEnter({relatedEvent:e,target:t,currentTarget:a}){if(e&&"mousedown"===e.type)return;const n=t===a?OD.CONTAINER_FOCUSED:OD.FOCUS_WITHIN;this.setState(()=>({hasKeyboardFocus:n}))}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:OD.NOT_FOCUSED}))}onFocusWithin(){this.setState(()=>({hasKeyboardFocus:OD.FOCUS_WITHIN}))}onItemSelect(e,{routeParams:t}={}){return this.props.onItemSelect(e,{routeParams:t})}onResize({height:e}){this.setState(t=>{const a=s()({},t,{listHeight:e});return s()({},a,this.getBannerState(a))},()=>{!1!==this.pendingEnsureRowInView&&this.ensureRowInView(this.pendingEnsureRowInView)})}onScroll(){this.setState(this.getBannerState)}getBannerStateFromVisibleListItems(e,t,a,n){const s=t&&this.ChannelList.isItemAboveView(t.key),r=n&&this.ChannelList.isItemBelowView(n.key);return{scrolledBelowFirstMention:e&&this.ChannelList.isItemAboveView(e.key),scrolledBelowFirstUnread:s,scrolledAboveLastMention:a&&this.ChannelList.isItemBelowView(a.key),scrolledAboveLastUnread:r}}getBannerState({firstMention:e,firstUnread:t,lastMention:a,lastUnread:n,listHeight:s}=this.state){const r=this.ChannelList?this.ChannelList.getCurrentScrollTop():0;if(this.props.featureSidebarVirtualized)return this.getBannerStateFromVisibleListItems(e,t,a,n);const i=!!(t&&t.scrollBottom-gD<=r),o=!!(n&&n.scrollTop+gD>=r+s);return{scrolledBelowFirstMention:!!(e&&e.scrollBottom-gD-(i?yD:0)<=r),scrolledBelowFirstUnread:i,scrolledAboveLastMention:!!(a&&a.scrollTop+gD+(o?yD:0)>=r+s),scrolledAboveLastUnread:o}}getUnreadRows({rowsMap:e,unreadIds:t,mentionIds:a}=this.props){return{firstUnread:e[Object(db.a)(t)],lastUnread:e[Object(Hu.a)(t)],firstMention:e[Object(db.a)(a)],lastMention:e[Object(Hu.a)(a)]}}setRef(e){this.ChannelList=e}UNSAFE_componentWillReceiveProps(e){if(this.shouldTrackTTFMP=this.shouldTrackTTFMP&&e.isWindowFocused,!e.isBooted)return;e.featureSonicPresenceManager||Object(xr.a)()||Object(zf.a)(this.props.idsNeedingPresenceSubscription,e.idsNeedingPresenceSubscription)||this.presenceList&&(this.presenceList.clear(),this.presenceList.add(e.idsNeedingPresenceSubscription));const t="SHOW_BUTTON"===e.jumperCoachmarkState||"HIDE_BUTTON"===e.jumperCoachmarkState,a=this.props.rows.length&&e.rows.length&&("Vquick_switcher"===this.props.rows[0].id||"Vquick_switcher"===e.rows[0].id)&&this.props.rows[0].id!==e.rows[0].id;(t||a)&&this.ChannelList&&this.ChannelList.jumpToOffset(0),this.setState(t=>{const a=s()({},t,this.getUnreadRows(e));return this.ChannelList&&this.ChannelList.resetCurrentScrollTopMaybe(a.listHeight,e.rows),s()({},a,this.getBannerState(a))})}UNSAFE_componentWillUpdate(e){fD&&e.telemeter.mark(`${bD}_mark`)}ensureRowInView(e=this.props.selectedItemId){var t=this.props;const a=t.rows,n=t.rowsMap,s=t.rowIds,r=t.featureSidebarVirtualized;if(!n[e])return;if(r)return void this.ChannelList.ensureRowInView(e,yD);const i=this.ChannelList.currentScrollTop,o=this.state.listHeight;if(0===o)return void(this.pendingEnsureRowInView=e);this.pendingEnsureRowInView=!1;const l=a[Math.max(s.indexOf(e)-_D,0)].scrollTop;if(l<i)return void this.ChannelList.scrollToTarget(l);const c=a[Math.min(s.indexOf(e)+_D,a.length-1)].scrollBottom-o;c>i&&this.ChannelList.scrollToTarget(c)}gotoNext(e,t,a){var n=this.props;const r=n.rows,i=n.rowIds,o=n.selectedItemId,l=n.featureSonicInputs,c=n.userAttentionIsOnChat;if(Object(re.a)()){if(!c)return}else if(!Object(Tu.f)())return;if(l){const t=Object(Rr.b)(document.activeElement);if(t){if(!t.isEmpty()){if(!("up"!==e||t.isCursorAtBeginning&&t.isCursorAtBeginning()))return;if(!("down"!==e||t.isCursorAtEnd&&t.isCursorAtEnd()))return}}else if(Object(Nu.a)(document.activeElement))return}else{const t=Object(PP.c)(),a=Object(xP.e)(t);if(Object(xP.f)(t)&&a>0){if(Object(xP.h)(t))return;const n=Object(xP.b)(t).start;if("up"===e&&0!==n)return;if("down"===e&&n!==a)return}}const d=i.indexOf(o),u=Object(_n.a)(Object(_n.a)(Object(ht.a)(r,(e,t)=>s()({},e,{index:t})),e=>"channel"===e.type),e=>!t||Object(AP.a)(this.props.unreadIds,e.id)>=0||Object(AP.a)(this.props.mutedMentionIds,e.id)>=0);if(0===u.length)return;let p;void 0===(p="down"===e?Object(qu.a)(u,e=>e.index>d):Object(NP.a)(u,e=>e.index<d))&&(p="down"===e?Object(db.a)(u):Object(Hu.a)(u)),this.props.onItemSelect(p.id),a&&a.preventDefault()}maybeLoadAppSuggestionLinksData(){this.state.hasInitializedAppSuggestionLinksData||this.props.initializeAppSuggestionLinksData===r.a||(this.props.initializeAppSuggestionLinksData(),this.setState(()=>({hasInitializedAppSuggestionLinksData:!0})))}maybeLoadDraftsData(){this.props.ensureDraftChannelObjects&&!this.hasInitializedDraftsData&&(this.props.ensureDraftChannelObjects(),this.hasInitializedDraftsData=!0)}maybeLoadFolderData(){this.props.sidebarFoldersIsEnabled&&!this.state.hasInitializedFolderData&&(this.props.initializeFolderData(),this.setState(e=>s()({},e,{hasInitializedFolderData:!0})))}maybeBeaconBootMountSuccess(){var e=this.props;const t=e.teamId,a=e.rows,n=e.telemeter,s=e.logger;window.clientBootMountTeam&&t===window.clientBootMountTeam&&a.length&&(n.count("client_boot_mount_success"),window.clientBootMountTeam=void 0,s.info("BOOT","Beaconed client boot mount success"))}renderFocusOutline(){return this.state.hasKeyboardFocus===OD.CONTAINER_FOCUSED?o.a.createElement("div",{className:"sectionfocusindicator"}):null}render(){if(!this.props.isBooted)return null;var e=this.props;const t=e.rows,a=e.onInviteClick,n=e.onCreateChannelClick,r=e.selectedItemId,i=e.historyNavigationEnabled,l=e.useHistoryNavigation,c=e.featureClassicNav,u=e.sidebarFoldersIsEnabled,p=e.ariaLandmarkLabel,h=e.telemeter,m=e.logger,b=e.bootType,f=e.teamId,_=e.featureSeeMoreChannels,g=e.featureSidebarVirtualized,y=e.clogger,O=e.userAttentionIsOnChat,C=e.composerVisible,v=e.closeIM,E=e.getAriaLabelForRow,k=e.shouldUseChannelSections,S=e.isOrganizing,j=e.isScreenReaderEnabled,I=e.isWelcomePlaceAnimationEnabled,w=e.isIAPhase1Enabled,T=e.shouldHideForWelcomePlace,N=e.deleteComposerDraft,A=e.deleteChannelDraft,R=e.connectDropTarget,M=e.isChannelDraggingOverSidebar,P=e.isChannelSectionDraggingOverSidebar;var x=this.state;const L=x.scrolledBelowFirstMention,F=x.scrolledBelowFirstUnread,D=x.scrolledAboveLastMention,B=x.scrolledAboveLastUnread,U=x.firstMention,q=x.firstUnread,H=x.lastMention,W=x.lastUnread,G=!Object(re.a)()&&this.state.hasKeyboardFocus!==OD.NOT_FOCUSED,K=Object(re.a)()||this.state.hasKeyboardFocus!==OD.CONTAINER_FOCUSED?null:"-1",V=d()("p-channel_sidebar",{focusablesection:!Object(re.a)()&&G,"p-channel_sidebar--classic_nav":c,"p-channel_sidebar--animate-channels":I,"p-channel_sidebar--iap1":w,"p-channel_sidebar--channel_dragging":M,"p-channel_sidebar--channel_section_dragging":P,"p-channel_sidebar--top_banner_showing":L||F,"p-channel_sidebar--bottom_banner_showing":D||B}),z=Object(re.a)()?{}:{"data-is-focusable-section":!0,tabIndex:K},$=!T&&w?o.a.createElement(BP,null):null,Y=L||F,Q=D||B,X=R(o.a.createElement("nav",s()({className:V,"data-qa-channel-sidebar":!0,"data-qa-channel-sidebar-selected-item-id":r,"aria-labelledby":p},z),o.a.createElement("h1",{id:"channel_sidebar_aria_label",className:"offscreen"},mD.t("Channel Sidebar")),o.a.createElement(hD.a,null),$,!T&&!w&&i&&o.a.createElement(rx,{useHistoryNavigation:l}),o.a.createElement("div",{className:"p-channel_sidebar__list"},o.a.createElement(lD,{position:"top",isShowing:Y,isMention:L,linkedId:L&&U.id||F&&q.id,ensureRowInView:this.ensureRowInView,featureSidebarVirtualized:g,clogger:y,isIAPhase1Enabled:w}),o.a.createElement(rD,{rows:t,onItemSelect:this.onItemSelect,onInviteClick:a,onCreateChannelClick:n,onScroll:this.onScroll,onResize:this.onResize,sidebarFoldersIsEnabled:u,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onDragOver:this.onDragOver,onCreateFolder:this.onCreateFolder,ref:this.setRef,telemeter:h,logger:m,shouldTrackTTFMP:this.shouldTrackTTFMP,bootType:b,teamId:f,setHideInviteButton:this.props.setHideInviteButton,setHideAddChannelButton:this.props.setHideAddChannelButton,featureSeeMoreChannels:_,featureSidebarVirtualized:g,clogger:y,userAttentionIsOnChat:O,composerVisible:C,selectedItemId:r,closeIM:v,getAriaLabelForRow:E,shouldUseChannelSections:k,isOrganizing:S,isScreenReaderEnabled:j,deleteComposerDraft:N,deleteChannelDraft:A,bannerHeight:yD,isTopBannerVisible:Y,isBottomBannerVisible:Q}),o.a.createElement(lD,{position:"bottom",isShowing:D||B,isMention:D,linkedId:D&&H.id||B&&W.id,ensureRowInView:this.ensureRowInView,featureSidebarVirtualized:g,clogger:y,isIAPhase1Enabled:w}),o.a.createElement(pD,null)),Object(re.a)()?null:this.renderFocusOutline()));return Object(re.a)()?X:o.a.createElement(LP.a,{onFocusEnter:this.onFocusEnter,onFocusWithin:this.onFocusWithin,onFocusLeave:this.onFocusLeave},X)}}channel_sidebar_ChannelSidebar.displayName="ChannelSidebar",channel_sidebar_ChannelSidebar.defaultProps=CD;var vD=channel_sidebar_ChannelSidebar;const ED=Object(pM.a)(1),kD=e=>{if(Object(ua.d)(e))return!1;if(Object(ba.k)(e,"add_channel_prompt_dismissed"))return!1;if(Object(bi.l)(e))return!1;if(!!Object(ba.i)(e))return!0;const t=Object(B.b)(e)||{},a=Object.keys(t);let n=0;for(let s=0;s<a.length;s++)if(Object(q.Sb)(t[a[s]])&&(n+=1),n>10)return!1;return!0},SD=e=>{if(!Object(RC.d)(e))return!1;const t=Object(Hc.a)(Object(_n.a)(Object(bi.a)(e),e=>!e.is_slackbot));return!Object(ba.k)(e,"channel_sidebar_hide_invite")&&(!(t>=2)||"dim")},jD=e=>{if("Vall_threads"!==Object(_.a)(e)){const t=Object(ba.k)(e,"has_received_threaded_message"),a=Object(m.m)(e,"feature_incremental_unread_counts")?Object(X.j)(e):Object(Q.c)(e);return t||a}return!0},ID=e=>{let t,a,n,i,o,l,c,d,u,p,b,f,g,y,O,v,E,k,S,j,I,w,T;return(R,M)=>{((e,t)=>ED&&Object(dI.c)({state:t}).mark(`${e}_mark`))("react_channel_sidebar_selector_factory",R);const P=Object(sM.b)(R),x=Object(Ot.a)({state:R}),L=Object(ie.a)({state:R}),F=Object(dI.c)({state:R}),D=Object(lM.g)(R),U=Object(lM.b)(R);if(!P)return{isBooted:P,isWindowFocused:D};const H=Object(_.a)(R),W=M.onItemSelect;var G=(e=>{const t=Object(ja.a)(e);var a=XM(e);const n=a.sidebarSections,s=a.sidebarSectionsOrdered,r=a.orderedChannelSections,i=a.idsNeedingPresenceSubscription,o="enabled"===Object(ha.c)(e,"folders_sidebar")&&Object(ba.k)(e,"folders_enabled"),l=o?Object(iM.e)(e):[],c=!Object(io.a)(Object(Se.g)(e)),d=Object(ba.k)(e,"add_apps_prompt_dismissed")||Object(rM.d)(e),u=!c&&!Object(xe.D)(Object(Se.d)(e))&&!d;let p;var h=p=Object(bo.c)(e)?PM({sidebarSectionsOrdered:s,sidebarSections:n,pages:Object(TA.a)().filter(t=>Object(TA.d)(e,t))||[],hasAllUnreadsLink:!0===Object(ba.k)(e,"enable_unread_view"),hasThreadsLink:jD(e),featureComposeFlow:Object(C.g)(e),showDraftsPageSidebar:Object(C.k)(e),primaryView:Object(_.a)(e),iap1MainMenuIsVisible:Object(rM.h)(e),iaBrowsersEnabled:Object(bo.a)(e),shouldUseChannelSections:Object(A.a)(e),isOrganizing:NS(e)}):SP({hasQuickswitcherButton:!t&&Object(ba.k)(e,"show_sidebar_quickswitcher_button")&&!Object(bo.c)(e),hasAllUnreadsLink:!0===Object(ba.k)(e,"enable_unread_view"),hasAddAChannelLink:kD(e),hasInvitePeopleLink:SD(e),hasSearchLink:Object(N.a)(e),hasAppsLink:hM(e),hasInstallAppsLink:u,appSuggestionsCount:TP(e),hasUpgradeSlackCTA:Object(Gm.o)(e),hasThreadsLink:jD(e),sidebarSectionsOrdered:s,sidebarSections:n,sidebarFoldersIsEnabled:o,sidebarFolders:l,pages:Object(TA.a)().filter(t=>Object(TA.d)(e,t))||[],featureComposeFlow:Object(C.g)(e),shouldUseChannelSections:Object(A.a)(e),shouldHideForWelcomePlace:Object(oe.p)(e),showDraftsPageSidebar:Object(C.k)(e)});return{rows:h.rows,rowsMap:h.rowsMap,rowIds:h.rowIds,orderedChannelSections:r,idsNeedingPresenceSubscription:i}})(R);const K=G.rows,V=G.rowsMap,z=G.rowIds,$=G.orderedChannelSections,Y=G.idsNeedingPresenceSubscription,Z=TP(R),ee=[],te=[],ae=[];Object(m.m)(R,"feature_incremental_unread_counts")?(Object(X.e)(R)&&te.push("Vall_threads"),Object(X.j)(R)&&ee.push("Vall_threads")):(Object(Q.b)(R)&&te.push("Vall_threads"),Object(Q.c)(R)&&ee.push("Vall_threads"));const ne=z.length;for(let e=0;e<ne;e++){const t=z[e],a=Object(B.w)(R,t),n=Object(xu.c)(R,t);!n&&Object(B.x)(R,t)&&ee.push(t),!n&&a&&te.push(t),n&&a&&ae.push(t)}const se=Object(wu.e)(R),le=(Object(rt.a)(R)||"composer_toolbar"===Object(ha.c)(R,"composer_toolbar"))&&Object(Tp.b)(R),ce=Object(rM.i)(R),de=Object(ba.k)(R,"sidebar_behavior"),ue="enabled"===Object(ha.c)(R,"folders_sidebar")&&Object(ba.k)(R,"folders_enabled"),pe=Object(ja.a)(R),he=Object(ja.b)(R),me=Object(m.m)(R,"feature_sonic_inputs"),be=Object(m.m)(R,"feature_classic_nav"),fe=Object(m.m)(R,"feature_sonic_presence_manager"),_e=Object(m.m)(R,"feature_see_more_channels"),ge=Object(m.m)(R,"feature_sidebar_virtualized"),ye=Object(Bu.a)(K,e=>"addAChannelLink"===e.type),Oe=Object(h.b)(R),Ce=Object(q.T)(R),ve=Ce.join(","),Ee=Object(A.a)(R),ke=Ee&&DS(R),je=Ee&&BS(R),Ie=Object(Yu.b)(R),we=Object(oe.a)(R),Te=Object(oe.p)(R),Ne=Object(bo.c)(R);if(H===a&&Object(zf.a)(ee,n)&&Object(zf.a)(te,i)&&Object(zf.a)(ae,o)&&Object(zf.a)(z,l)&&ce===c&&de===d&&ue===u&&be===p&&Object(zf.a)(M,b)&&ye===f&&ve===g&&se===y&&le===O&&Z===v&&E===Ie&&k===we&&S===Ne&&j===Te&&Object(zf.a)(I,$)&&w===ke&&Object(zf.a)(T,je))return t;const Ae=s()({},M,{isBooted:P,rows:K,rowsMap:V,rowIds:z,selectedItemId:H,unreadIds:ee,mentionIds:te,mutedMentionIds:ae,userAttentionIsOnChat:se,composerVisible:le,jumperCoachmarkState:ce,historyNavigationEnabled:pe,useHistoryNavigation:he,featureClassicNav:be,idsNeedingPresenceSubscription:Y,featureSonicPresenceManager:fe,featureSonicInputs:me,featureSeeMoreChannels:_e,sidebarFoldersIsEnabled:ue,featureSidebarVirtualized:ge,closeIM:t=>{const a=Object(B.e)(R,t),n=Object(q.v)(a);return"im"===n||"mpim"===n?e(Object(wi.closeChannelApi)({channelId:t})):void 0},deleteComposerDraft:t=>{const a=Object(C.d)(R,t),n=Object(J.d)(a);return e(m_({draftId:n}))},deleteChannelDraft:(...t)=>e(h_(...t)),ensureDraftChannelObjects:()=>e(uM()),initializeFolderData:()=>e(Object(iM.f)()),initializeAppSuggestionLinksData:()=>e(Object(rM.l)()),dragFolderOrChannel:({src:t,dest:a})=>{e(Object(iM.c)({src:t,dest:a})),e(Object(iM.h)())},createFolder:()=>e(Object(iM.a)()),setHideInviteButton:()=>(L.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}}),L.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}}),e(Object(Ka.f)({pref:"channel_sidebar_hide_invite",value:!0}))),setHideAddChannelButton:()=>e(Object(Ka.f)({pref:"add_channel_prompt_dismissed",value:!0})),onItemSelect:(t,{routeParams:a}={})=>{x.info("CHANNEL-SIDEBAR","onItemSelect",t),H===t&&e(Object(No.a)({channelId:t})),Object(re.a)()?(e(Object(qn.a)({id:t,routeParams:a})),e(Object(oM.d)({source:"SIDE_BAR",objId:t}))):W&&W(t).then(()=>{e(Object(oM.d)({source:"SIDE_BAR",objId:t}))}).catch(r.a)},ariaLandmarkLabel:"channel_sidebar_aria_label",logger:x,clogger:L,telemeter:F,isWindowFocused:D,bootType:U,teamId:Oe,suggestedChannelsMap:Ce.reduce((e,t)=>(e[t]=t,e),{}),getAriaLabelForRow:e=>{const t=Object(B.e)(R,e),a=Object(q.v)(t),n=Object(q.x)(R,t,{publicChannelIncludeHashSign:!1}),s=Object(m.d)(R),r=Object(q.Ub)(s,t),i=Object(xu.c)(R,e),o=!!Object(q.V)(t),l=Object(q.y)(R,e),c=!!Object(B.d)(R,t),d=Object(q.Jb)(t);return"im"===a?Object(fM.a)({name:n,isSelf:r,hasNotifications:c,isStarred:d,isMuted:i,hasDraft:l,hasUnreads:o}):"mpim"===a?function({name:e,isCurrent:t,hasNotifications:a,isStarred:n,isMuted:s,hasDraft:r}={}){const i=(()=>t&&a&&s&&n&&r?bM.t("current conversation, has notifications, muted, starred, has a draft message"):!t&&a&&s&&n&&r?bM.t("has notifications, muted, starred, has a draft message"):t&&!a&&s&&n&&r?bM.t("current conversation, muted, starred, has a draft message"):!t&&!a&&s&&n&&r?bM.t("muted, starred, has a draft message"):t&&a&&!s&&n&&r?bM.t("current conversation, has notifications, starred, has a draft message"):!t&&a&&!s&&n&&r?bM.t("has notifications, starred, has a draft message"):t&&!a&&!s&&n&&r?bM.t("current conversation, starred, has a draft message"):t||a||s||!n||!r?t&&a&&s&&!n&&r?bM.t("current conversation, has notifications, muted, has a draft message"):!t&&a&&s&&!n&&r?bM.t("has notifications, muted, has a draft message"):t&&!a&&s&&!n&&r?bM.t("current conversation, muted, has a draft message"):t||a||!s||n||!r?t&&a&&!s&&!n&&r?bM.t("current conversation, has notifications, has a draft message"):t||!a||s||n||!r?!t||a||s||n||!r?t||a||s||n||!r?t&&a&&s&&n&&!r?bM.t("current conversation, has notifications, muted, starred"):!t&&a&&s&&n&&!r?bM.t("has notifications, muted, starred"):t&&!a&&s&&n&&!r?bM.t("current conversation, muted, starred"):t||a||!s||!n||r?t&&a&&!s&&n&&!r?bM.t("current conversation, has notifications, starred"):t||!a||s||!n||r?!t||a||s||!n||r?t||a||s||!n||r?t&&a&&s&&!n&&!r?bM.t("current conversation, has notifications, muted"):t||!a||!s||n||r?!t||a||!s||n||r?t||a||!s||n||r?!t||!a||s||n||r?t||!a||s||n||r?!t||a||s||n||r?"":bM.t("current conversation"):bM.t("has notifications"):bM.t("current conversation, has notifications"):bM.t("muted"):bM.t("current conversation, muted"):bM.t("has notifications, muted"):bM.t("starred"):bM.t("current conversation, starred"):bM.t("has notifications, starred"):bM.t("muted, starred"):bM.t("has a draft message"):bM.t("current conversation, has a draft message"):bM.t("has notifications, has a draft message"):bM.t("muted, has a draft message"):bM.t("starred, has a draft message"))();return e&&i?bM.t("{name} ({context})",{name:e,context:i}):e||""}({name:n,hasNotifications:c,isStarred:d,isMuted:i,hasDraft:l,hasUnreads:o}):Object(mM.a)({channelName:n,isPrivate:Object(q.Cb)(t),isStarred:d,isMuted:i,hasDraft:l,hasUnreads:o})},shouldUseChannelSections:Ee,lastActiveDropTargetForChannelDrag:ke,lastActiveDropTargetForChannelSectionDrag:je,moveManyChannels:(...t)=>e(lT(...t)),moveChannelSection:(...t)=>e(dT(...t)),isOrganizing:NS(R),isScreenReaderEnabled:Ie,isWelcomePlaceAnimationEnabled:we,isIAPhase1Enabled:Ne,shouldHideForWelcomePlace:Te});return t=Ae,a=H,n=ee,i=te,o=ae,l=z,c=ce,d=de,u=ue,p=be,b=M,f=ye,g=ve,y=se,O=le,v=Z,E=Ie,S=Ne,k=we,j=Te,I=$,w=ke,T=je,((e,t)=>ED&&Object(dI.c)({state:t}).measureAndClear(`${e}_mark`,e))("react_channel_sidebar_selector_factory",R),Ae}},wD={withRef:!0};var TD=Object(u.c)(ID,wD)(vD);const ND=["DRAG_CHANNEL_SIDEBAR_CHANNEL","DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"],AD={drop:(e,t)=>{const a=t.getItemType();if("DRAG_CHANNEL_SIDEBAR_CHANNEL"===a){const a=t.getItem(),n=a.channel.id,s=a.channelSection&&a.channelSection.id,r=e.lastActiveDropTargetForChannelDrag&&e.lastActiveDropTargetForChannelDrag.channelSectionId;if(s===r)return;const i=[],o=[];s&&i.push({channelSectionId:s,channelIds:[n]}),r&&o.push({channelSectionId:r,channelIds:[n]}),(i.length||o.length)&&e.moveManyChannels({remove:i,insert:o})}else if("DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"===a){const a=t.getItem().channelSection.id;var n=e.lastActiveDropTargetForChannelSectionDrag||{};const s=n.channelSectionId,r=n.isAfter,i=e.orderedChannelSections||[];let o=s;if(r){const e=i.findIndex(e=>e.id===s),t=e>=0?i[e+1]:void 0;o=t?t.id:null}e.moveChannelSection({channelSectionId:a,nextChannelSectionId:o})}}},RD=Object(re.a)()?Object(nM.a)(ND,AD,(e,t)=>{const a=t.getItemType(),n="DRAG_CHANNEL_SIDEBAR_CHANNEL"===a&&t.isOver(),s="DRAG_CHANNEL_SIDEBAR_SECTION_HEADING"===a&&t.isOver();return{connectDropTarget:e.dropTarget(),isChannelDraggingOverSidebar:n,isChannelSectionDraggingOverSidebar:s}})(vD):vD,MD=Object(u.c)(ID,wD)(RD);var PD=TD,xD=a("uXhx"),LD=a("1wEm");const FD=Object(mt.b)("Save the scrollmark if the current user is viewing a public channel that they are a member of",(e,t,{channelId:a,scrollmark:n}={})=>{const s=t(),r=Object(B.e)(s,a);Object(q.Db)(r)&&!Object(q.ob)(r)||e(Object(Sw.d)({channelId:a,scrollmark:n}))});FD.meta={name:"maybeSaveScrollmark",key:"messagePaneStoreThunksMaybeSaveScrollmark",description:"Save the scrollmark if the current user is viewing a public channel that they are a member of"},FD.propTypes={channelId:l.default.string,scrollmark:l.default.object};var DD=a("umiW"),BD=a("pfyZ"),UD=a("YjHT");const qD=({featureReactjiEducationTip:e,inProductCoachmark:t,channel:a})=>!!Object(re.a)()&&(!!e&&(!(!t||"reactji_awareness_coachmark"!==t.name)&&!(!a||!Object(q.Db)(a)&&!Object(q.Cb)(a))));var HD=a("K138"),WD=a("Muja");const GD=Object(wn.b)("TS.debug_widget.isVisible"),KD=Object(wn.b)("TS.debug_widget.setFrameRate"),VD=100,zD=1e3,$D=300,YD=1e3,QD=500,XD=60;class responsiveness_ResponsivenessMetrics{constructor(){this.enabledForPRQMetrics=!1,this.enabledForClientStats=!1,this.resetCountersForClientStats(),this.resetCountersForPRQMetrics(),this.beachballsTotal=0,this.stuttersTotal=0,this.rafHandler=this.rafHandler.bind(this)}isEnabled(){return this.isEnabledForClientStats()||this.isEnabledForPRQMetrics()}rafHandler(){this.isEnabledForClientStats()&&this.rafHandlerForClientStats(),this.isEnabledForPRQMetrics()&&this.rafHandlerForPRQMetrics(),this.isEnabled()&&window.requestAnimationFrame(this.rafHandler)}resetCountersForClientStats(){this.beachballs=0,this.frameRates=[],this.stutters=0,this.lastRafHandlerTimeForClientStats=window.performance.now(),this.fpsIndex=0,this.fpsStartTime=null}rafHandlerForClientStats(){if(!this.isEnabledForClientStats())return;const e=window.performance.now(),t=e-this.lastRafHandlerTimeForClientStats;if(this.lastRafHandlerTimeForClientStats=e,t>zD?(this.beachballs+=1,this.beachballsTotal+=1):t>VD&&(this.stutters+=1,this.stuttersTotal+=1),0===this.fpsIndex&&(this.fpsStartTime=e),this.fpsIndex+=1,this.fpsIndex===$D){const t=(e-this.fpsStartTime)/1e3,a=Math.floor(this.fpsIndex/t);this.fpsIndex=0,GD()&&KD(a),this.frameRates.push(a)}}startClientStats(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler),this.enabledForClientStats=!0,this.resetCountersForClientStats()}stopClientStats(){this.enabledForClientStats=!1}storeClientStats(){const e=Object(dI.a)();if(e.count("stutters",this.stutters),e.count("beachballs",this.beachballs),!Object(io.a)(this.frameRates)){const t=Object(ut.a)(this.frameRates);let a;const n=this.frameRates.sort(),s=Math.floor(n.length/2);a=n.length%2==1?n[s]:(n[s-1]+n[s])/2,e.store("fps_min",t),e.store("fps_median",a)}this.stutters=void 0,this.beachballs=void 0,this.frameRates=void 0}isEnabledForClientStats(){return!!this.enabledForClientStats}getTotalBeachballCount(){return this.beachballsTotal}getTotalStutterCount(){return this.stuttersTotal}resetCountersForPRQMetrics(){this.histJankyWindows={},this.histFrameRenderTime={},this.durationMs=0,this.lastRafHandlerTimeForPRQMetrics=void 0,this.nextJankyWindowSampleIntervalNumber=1,this.framesInPreviousJankyWindowSample=0,this.framesInCurrentJankyWindowSample=0}recordJankyWindows(e,t=1){if(t<1)return;const a=Math.max(XD-e,0);this.histJankyWindows[a]=(this.histJankyWindows[a]||0)+t}sampleJankyWindows(){const e=Object(xc.d)(this.durationMs,9)>QD*this.nextJankyWindowSampleIntervalNumber,t=Math.floor(this.durationMs/QD),a=t-this.nextJankyWindowSampleIntervalNumber;e&&(this.durationMs>=YD&&(this.recordJankyWindows(0,a-1),this.recordJankyWindows(this.framesInCurrentJankyWindowSample,a>0?1:0),this.recordJankyWindows(this.framesInCurrentJankyWindowSample+this.framesInPreviousJankyWindowSample)),this.nextJankyWindowSampleIntervalNumber=t+1,this.framesInPreviousJankyWindowSample=a>0?0:this.framesInCurrentJankyWindowSample,this.framesInCurrentJankyWindowSample=0),this.framesInCurrentJankyWindowSample+=1}rafHandlerForPRQMetrics(){if(!this.isEnabledForPRQMetrics())return;const e=window.performance.now();if(void 0===this.lastRafHandlerTimeForPRQMetrics)return void(this.lastRafHandlerTimeForPRQMetrics=e);const t=e-this.lastRafHandlerTimeForPRQMetrics,a=Object(xc.d)(Math.round(t,0),2);this.histFrameRenderTime[a]=(this.histFrameRenderTime[a]||0)+1,this.lastRafHandlerTimeForPRQMetrics=e,this.durationMs+=t,this.sampleJankyWindows()}startPRQMetrics(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler),this.enabledForPRQMetrics=!0,this.resetCountersForPRQMetrics()}stopPRQMetrics(){this.enabledForPRQMetrics=!1}isEnabledForPRQMetrics(){return!!this.enabledForPRQMetrics}getPRQMetrics(){return{durationMs:Math.round(this.durationMs),histJankyWindows:this.histJankyWindows,histFrameRenderTime:this.histFrameRenderTime}}}function JD(){return null===responsiveness_ResponsivenessMetrics.instance&&(responsiveness_ResponsivenessMetrics.instance=new responsiveness_ResponsivenessMetrics),responsiveness_ResponsivenessMetrics.instance}responsiveness_ResponsivenessMetrics.instance=null;JD().startClientStats.bind(responsiveness_ResponsivenessMetrics.instance),JD().stopClientStats.bind(responsiveness_ResponsivenessMetrics.instance),JD().storeClientStats.bind(responsiveness_ResponsivenessMetrics.instance),JD().isEnabledForClientStats.bind(responsiveness_ResponsivenessMetrics.instance),JD().getTotalBeachballCount.bind(responsiveness_ResponsivenessMetrics.instance),JD().getTotalStutterCount.bind(responsiveness_ResponsivenessMetrics.instance);const ZD=JD().startPRQMetrics.bind(responsiveness_ResponsivenessMetrics.instance),eB=JD().stopPRQMetrics.bind(responsiveness_ResponsivenessMetrics.instance),tB=JD().isEnabledForPRQMetrics.bind(responsiveness_ResponsivenessMetrics.instance),aB=JD().getPRQMetrics.bind(responsiveness_ResponsivenessMetrics.instance);var nB=a("h5+L"),sB=a("F2y5"),rB=a("RQuH");const iB=new x.b("contextual_shortcuts"),oB=(l.default.func,l.default.bool,l.default.func,l.default.bool,l.default.object.isRequired,{showKeyboardShortcuts:r.a,featureContextualMessageShortcuts:!1,closeModal:r.a,featureAppViewsReminders:!1});class contextual_message_shortcuts_modal_ContextualShortcutsModal extends o.a.Component{constructor(e){super(e),this.state={isOpen:!0},Object(la.a)(this,["closeModal","openShortcutsPanel"])}componentDidMount(){this.props.clogger.track(de.EventId.CLIENT_KEYBOARD_SHORTCUTS,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.KEYDOWN,[de.UiContextKeys.step]:de.UiStep.CONTEXTUAL_SHORTCUTS_EDUCATION,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.element_type]:de.ElementType.MODAL}}}})}closeModal(){this.setState(()=>({isOpen:!1})),this.props.closeModal()}openShortcutsPanel(e){this.props.showKeyboardShortcuts({focusKey:e&&"keydown"===e.type?"keyboard_shortcuts":null}),this.closeModal()}render(){var e=this.props;const t=e.featureAppViewsReminders;if(!e.featureContextualMessageShortcuts)return null;const a=iB.t("Message keyboard shortcuts");return o.a.createElement(xN.a,{isOpen:this.state.isOpen,centered:!0,fullscreen:!1,closeModal:this.closeModal},o.a.createElement(xN.h,null,o.a.createElement(xN.j,{title:a})),o.a.createElement(xN.d,null,o.a.createElement(xN.e,null,o.a.createElement("div",{className:"margin_bottom_100"},iB.rt("When you focus on a message using {up_arrow_key} or {f6_key}, you can quickly interact with it by pressing:",{up_arrow_key:o.a.createElement(Da.a,{label:"\u2191",slim:!0}),f6_key:o.a.createElement(Da.a,{label:"F6",slim:!0})})),o.a.createElement("ul",{className:"no_bullets margin_left_0"},o.a.createElement("li",{className:"margin_bottom_50"},iB.rt("{shortcut} to edit (if it's your message)",{shortcut:o.a.createElement(Da.a,{label:"E",className:"nudge_bottom_1"})})),o.a.createElement("li",{className:"margin_bottom_50"},iB.rt("{shortcut} to add an emoji reaction",{shortcut:o.a.createElement(Da.a,{label:"R",className:"nudge_bottom_1"})})),o.a.createElement("li",{className:"margin_bottom_50"},iB.rt("{shortcut} to open a thread",{shortcut:o.a.createElement(Da.a,{label:"T",className:"nudge_bottom_1"})})),o.a.createElement("li",{className:"margin_bottom_50"},iB.rt("{shortcut} to pin / unpin",{shortcut:o.a.createElement(Da.a,{label:"P",className:"nudge_bottom_1"})})),o.a.createElement("li",{className:"margin_bottom_50"},iB.rt("{shortcut} to share this message",{shortcut:o.a.createElement(Da.a,{label:"S",className:"nudge_bottom_1"})})),o.a.createElement("li",{className:"margin_bottom_50"},iB.rt("{shortcut} to star / unstar this message",{shortcut:o.a.createElement(Da.a,{label:"A",className:"nudge_bottom_1"})})),o.a.createElement("li",{className:"margin_bottom_50"},iB.rt("{shortcut} to mark as unread from this message",{shortcut:o.a.createElement(Da.a,{label:"U",className:"nudge_bottom_1"})})),t&&o.a.createElement("li",{className:"margin_bottom_50"},iB.rt("{shortcut} to remind you about this message",{shortcut:o.a.createElement(Da.a,{label:"M",className:"nudge_bottom_1"})})),o.a.createElement("li",null,iB.rt("{shortcut} to delete this message",{shortcut:o.a.createElement(Da.a,{label:"DELETE",className:"nudge_bottom_1"})}))))),o.a.createElement(xN.f,null,o.a.createElement(xN.g,null,o.a.createElement(Cm.b,{type:"outline",onClick:this.openShortcutsPanel},iB.t("Open the shortcut panel")),o.a.createElement(Cm.b,{onClick:this.closeModal,autoFocus:!0},iB.t("Okay")))))}}contextual_message_shortcuts_modal_ContextualShortcutsModal.displayName="ContextualShortcutsModal",contextual_message_shortcuts_modal_ContextualShortcutsModal.defaultProps=oB;var lB=Object(u.b)(e=>({featureContextualMessageShortcuts:Object(m.m)(e,"feature_contextual_message_shortcuts"),featureAppViewsReminders:Object(m.m)(e,"feature_app_views_reminders"),clogger:Object(ie.a)({state:e})}),e=>({showKeyboardShortcuts:(...t)=>e(Object(qa.h)(...t)),closeModal:(...t)=>e(Object(ga.a)(...t))}))(contextual_message_shortcuts_modal_ContextualShortcutsModal);const cB=Object(mt.b)("Open the contextual message shortcuts modal",(e,t={})=>{const a=t();Object(m.m)(a,"feature_contextual_message_shortcuts")&&e(Object(ga.e)({element:o.a.createElement(lB,null)}))});cB.meta={name:"openContextualMessageShortcutsModal",key:"actionsOpenContextualMessageShortcutsModalOpenContextualMessageShortcutsModal",description:"Open the contextual message shortcuts modal"};var dB=cB,uB=a("gtcZ");l.default.string,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.bool,l.default.bool,l.default.object.isRequired,l.default.oneOf(["light","dark"]),l.default.bool;class foreword_Foreword extends i.PureComponent{render(){var e=this.props;const t=e.channelId,a=e.channelType,n=e.hasLimitedHistory,s=e.isShared,r=e.isSlackbotIm,i=e.newxpOnboardingStep,l=e.hasTeamMessageLimit,c=e.isMsgLimitBannerUpgrd1131BugTreatment,d=e.logger;if(r)return i&&i!==uU.COMPLETE?o.a.createElement(pU,{step:i,clientTheme:this.props.clientTheme}):o.a.createElement(iU,null);if(c){if(n&&l)return o.a.createElement(XB,{channelId:t,clientTheme:this.props.clientTheme})}else if(n)return l||d.error("Foreword Component: Rendering `LimitedHistoryForeword` component when channel history is limited but team message limit is not.",{subtype:"MESSAGE_PANE_FOREWORD"}),o.a.createElement(XB,{channelId:t,clientTheme:this.props.clientTheme});return"channel"===a||"private"===a?s?o.a.createElement(lU,{channelId:t}):!this.props.inCreatorOnboarding&&o.a.createElement(xB,{channelId:t}):"im"===a?s?o.a.createElement($B,{channelId:t}):o.a.createElement(GB,{channelId:t}):"mpim"===a?o.a.createElement(nU,{channelId:t}):(Object(Ot.b)().warn(`Unknown foreword type "${a}"`),null)}}foreword_Foreword.displayName="Foreword",foreword_Foreword.defaultProps={channelId:null,channelType:null,hasLimitedHistory:!1,isShared:!1,isSlackbotIm:!1,newxpOnboardingStep:null,hasTeamMessageLimit:!1,isMsgLimitBannerUpgrd1131BugTreatment:!1,clientTheme:"light",inCreatorOnboarding:!1};var pB=Object(u.b)(function(e,{channelId:t}){const a=Object(B.e)(e,t);if(!a)return null;const n=Object(Se.d)(e);return{isShared:Object(q.bb)(a),isSlackbotIm:Object(q.Ib)(a),newxpOnboardingStep:Object(w.l)(e),hasTeamMessageLimit:Object(xe.l)(n)>0,isMsgLimitBannerUpgrd1131BugTreatment:"treatment"===Object(ha.c)(e,"lc_msg_limit_banner_upgrd_1131_bug"),logger:Object(Ot.a)({state:e}),inCreatorOnboarding:Object(ua.d)(e)}})(foreword_Foreword),hB=a("w6pt"),mB=a("Atrf");const bB=Object(wn.b)("TS.ui.purpose_dialog.start",r.a);a("v+20");const fB=new x.b("dialogs_purpose"),_B=(l.default.string.isRequired,l.default.string,l.default.oneOfType([l.default.string,l.default.object]),l.default.bool,l.default.object.isRequired,l.default.func,l.default.bool,{currentRawPurpose:void 0,currentFormattedPurpose:void 0,featureM11nChannelDetails:!1,submitChannelPurpose:r.a,featureChangePurposeToDescription:!1});class channel_purpose_dialog_ChannelPurposeDialog extends i.Component{constructor(e){super(e),this.onSubmit=this.onSubmit.bind(this),this.renderInput=this.renderInput.bind(this),this.input=o.a.createRef()}onSubmit(){const e=this.input.current&&this.input.current.getWrappedInstance().value(),t=this.props.featureChangePurposeToDescription;if(null==e)return t&&this.props.logger.error("Channel Description dialog submitted with undefined value"),void this.props.logger.error("Channel Purpose dialog submitted with undefined value");e!==this.props.currentRawPurpose&&this.props.submitChannelPurpose({channelId:this.props.channelId,purpose:e})}renderInput({modules:e,isOpen:t}){var a=this.props;const n=a.currentFormattedPurpose,s=a.featureChangePurposeToDescription;return o.a.createElement(LT.b,{initialText:n,focusOnMount:!0,minLines:3,modules:e,isAutocompleteOpen:t,maxLength:q.b,ariaLabel:s?fB.t("Edit channel description"):fB.t("Edit channel purpose"),ref:this.input,useLegacyLists:!0})}render(){if(!this.props.featureM11nChannelDetails)return null;const e=this.props.featureChangePurposeToDescription;return o.a.createElement(ya.a,s()({className:"p-channel_purpose_dialog",title:e?fB.t("Edit channel description"):fB.t("Edit channel purpose"),goButtonText:e?fB.t("Update description"):fB.t("Update purpose"),onGo:this.onSubmit,footerText:fB.t("Describe what this channel is for.")},this.props),o.a.createElement(en.a,{renderInput:this.renderInput,completeOnMembers:!0,completeOnChannels:!0,completeOnEmoji:!0,shouldCompleteOnTab:!1}))}}channel_purpose_dialog_ChannelPurposeDialog.displayName="ChannelPurposeDialog",channel_purpose_dialog_ChannelPurposeDialog.defaultProps=_B;var gB=Object(u.b)((e,{channelId:t})=>{const a=Object(Ot.a)({label:"CHANNEL-PURPOSE",state:e}),n=Object(B.e)(e,t),s=n&&n.purpose&&n.purpose.value,r=s&&Object(FT.a)(e,{text:s});return{channelId:n.id,currentRawPurpose:s,currentFormattedPurpose:r,featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details"),featureChangePurposeToDescription:Object(m.m)(e,"feature_change_purpose_to_description"),logger:a}},e=>({submitChannelPurpose:(...t)=>e(Object(nw.G)(...t))}))(channel_purpose_dialog_ChannelPurposeDialog),yB=a("F+Fq");const OB=new x.b("message_pane_foreword"),CB=(l.default.func,{onClick:r.a});class app_button_AppButton extends i.PureComponent{render(){const e=this.props.onClick;return o.a.createElement(Ua.a,{className:"p-message_pane__foreword__button",onClick:e},o.a.createElement(bn.b,{type:"plus",size:"inherit"})," ",OB.t("Add an app"))}}app_button_AppButton.displayName="AppButton",app_button_AppButton.defaultProps=CB;var vB=app_button_AppButton;const EB=new x.b("message_pane_foreword"),kB=(l.default.bool,l.default.func,{isPrivate:!1,onClick:r.a});class invite_button_InviteButton extends i.PureComponent{render(){var e=this.props;const t=e.isPrivate,a=e.onClick;let n;return n=t?EB.t("Add people to this private channel",{fallbackHash:"e39d2befa2a64ec5522429e9d4be5aace4c8f08b"}):EB.t("Add people to this channel",{fallbackHash:"379e588d09f8d3998101d407aac8b99c9555d635"}),o.a.createElement(Ua.a,{className:"p-message_pane__foreword__button",onClick:a},o.a.createElement(bn.b,{type:"user",size:"inherit"})," ",n)}}invite_button_InviteButton.displayName="InviteButton",invite_button_InviteButton.defaultProps=kB;var SB=invite_button_InviteButton;const jB=new x.b("message_pane_foreword"),IB=(l.default.func,l.default.bool,{onClick:r.a,featureChangePurposeToDescription:!1});class purpose_button_PurposeButton extends i.PureComponent{render(){var e=this.props;const t=e.onClick,a=e.featureChangePurposeToDescription;return o.a.createElement(Ua.a,{className:"p-message_pane__foreword__button",onClick:t},o.a.createElement(bn.b,{type:"pencil",size:"inherit"})," ",a?jB.t("Set a description"):jB.t("Set a purpose"))}}purpose_button_PurposeButton.displayName="PurposeButton",purpose_button_PurposeButton.defaultProps=IB;var wB=Object(fs.a)("feature_change_purpose_to_description")(purpose_button_PurposeButton);l.default.string,l.default.string,l.default.bool,l.default.bool,l.default.string,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.bool;const TB={channelId:null,purpose:null,isUserRestricted:!1,isChannelArchived:!1,channelType:null,canInviteToChannel:!1,canAddAppsToChannel:!1,startChannelInviteModal:r.a,openModal:r.a,openAppsBrowserModal:r.a,featureM11nAppsBrowser:!1};class channel_foreword_buttons_ChannelForewordButtons extends i.PureComponent{constructor(e){super(e),this.onPurposeButtonClick=this.onPurposeButtonClick.bind(this),this.onInviteButtonClick=this.onInviteButtonClick.bind(this),this.onAppButtonClick=this.onAppButtonClick.bind(this)}onPurposeButtonClick(){const e=this.props.channelId;Object(re.a)()?this.props.openModal({element:o.a.createElement(gB,{channelId:e})}):bB(e)}onInviteButtonClick(){var e=this.props;const t=e.channelId;e.clogger.track(de.EventId.CHANNEL_FOREWORD,{contexts:{ui_context:{action:"click",ui_properties:{element_type:"button",element_name:"channel_foreword_add"}}}}),this.props.startChannelInviteModal({channelId:t})}onAppButtonClick(){var e=this.props;const t=e.channelId,a=e.clogger,n=de.EventId.CHANNEL_FOREWORD,s={[de.UiContextKeys.action]:de.UiAction.CLICK,[de.UiContextKeys.ui_element]:de.UiElement.BTN_ADD_APPS};a.track(n,{contexts:{[de.ClientEventKeys.ui_context]:s}}),this.props.featureM11nAppsBrowser?this.props.openAppsBrowserModal({addAppsVariant:!0,referringEventId:n,referringUiContext:s,channelId:t}):Object(yB.b)(n,s)}render(){var e=this.props;const t=e.channelId,a=e.canAddAppsToChannel,n=e.isUserRestricted,s=e.purpose,r=e.channelType,i=e.canInviteToChannel,l=e.isChannelArchived;let c,d,u;return s||n||l||(c=o.a.createElement(wB,{channelId:t,onClick:this.onPurposeButtonClick})),a&&(d=o.a.createElement(vB,{onClick:this.onAppButtonClick})),i&&(u=o.a.createElement(SB,{onClick:this.onInviteButtonClick,isPrivate:"private"===r})),o.a.createElement("div",{className:"p-message_pane__foreword__buttons"},c,d,u)}}channel_foreword_buttons_ChannelForewordButtons.displayName="ChannelForewordButtons",channel_foreword_buttons_ChannelForewordButtons.defaultProps=TB;var NB=Object(u.b)(function(e,{channelId:t}){const a=Object(B.e)(e,t);if(!a)return{};const n=Object(bi.b)(e),s=a.purpose?a.purpose.value:null,r=Object(te.K)(e,t),i=Object(te.x)(e,t);return{purpose:s,isUserRestricted:Object(Je.Gb)(n),isChannelArchived:Object(q.Y)(a),channelType:Object(q.v)(a),clogger:Object(ie.a)({state:e}),canInviteToChannel:r,canAddAppsToChannel:i,featureM11nAppsBrowser:Object(m.m)(e,"feature_m11n_apps_browser")}},e=>({startChannelInviteModal:(...t)=>e(Object(ew.b)(...t)),openAppsBrowserModal:(...t)=>e(Object(aw.a)(...t)),openModal:(...t)=>e(Object(ga.e)(...t))}))(channel_foreword_buttons_ChannelForewordButtons);const AB=new x.b("message_pane_foreword"),RB=(l.default.string,l.default.node,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.func,{channelId:null,description:null,purpose:null,isUserRestricted:!1,userCanSetPurposeForChannel:!0,featureChangePurposeToDescription:!1,openModal:r.a});class channel_foreword_description_ChannelForewordDescription extends i.PureComponent{constructor(e){super(e),this.onPurposeButtonClick=this.onPurposeButtonClick.bind(this)}onPurposeButtonClick(){const e=this.props.channelId;Object(re.a)()?this.props.openModal({element:o.a.createElement(gB,{channelId:e})}):bB(e)}maybeRenderPurpose(){var e=this.props;const t=e.purpose,a=e.featureChangePurposeToDescription;return t?o.a.createElement("span",null," ",a?AB.t("Description:"):AB.t("Purpose:")," ",o.a.createElement(eg.a,{text:t})):null}maybeRenderPurposeEditLink(){var e=this.props;const t=e.purpose,a=e.isUserRestricted,n=e.userCanSetPurposeForChannel;return t&&!a&&n?o.a.createElement("span",{className:"no_wrap"}," ","(",o.a.createElement(Ua.a,{onClick:this.onPurposeButtonClick},AB.t("edit")),")"):null}render(){const e=this.props.description;return o.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},e,this.maybeRenderPurpose(),this.maybeRenderPurposeEditLink())}}channel_foreword_description_ChannelForewordDescription.displayName="ChannelForewordDescription",channel_foreword_description_ChannelForewordDescription.defaultProps=RB;var MB=Object(u.b)((e,t)=>{return{userCanSetPurposeForChannel:Object(te.v)(e,t.channelId).ok}},e=>({openModal:(...t)=>e(Object(ga.e)(...t))}))(Object(fs.a)("feature_change_purpose_to_description")(channel_foreword_description_ChannelForewordDescription));const PB=new x.b("message_pane_foreword");l.default.string,l.default.string,l.default.bool,l.default.string,l.default.number,l.default.bool,l.default.bool,l.default.bool.isRequired;class channel_foreword_ChannelForeword extends i.PureComponent{renderTitle(){var e=this.props;const t=e.channelId,a=e.featureLongerChannelNames,n=d()("p-message_pane__foreword__title",{"p-message_pane__foreword__title--truncate":!a});return o.a.createElement("h1",{className:n},a?o.a.createElement(Ti.a,{channelId:t}):o.a.createElement(Bp.a,{channelId:t,inline:!0,iconProps:{inherit:!0,align:"baseline"}}))}renderDescription(){var e=this.props;const t=e.channelId,a=e.createdById,n=e.creatorIsYou,s=e.dateCreated,r=e.isPrivate,i=e.purpose,l=e.isUserRestricted,c=e.featureLongerChannelNames;let d;s?(d=Object(Ro.l)(s),d=Object(Ro.f)(s)||Object(Ro.g)(s)?d.toLowerCase():PB.t("on {date}",{date:d})):d=PB.rt("on {date}",{date:o.a.createElement(hB.a,{type:"unknown"})});const u=c?o.a.createElement("strong",null,o.a.createElement(Ti.a,{channelId:t,boldIcon:!0})):o.a.createElement(Bp.a,{channelId:t,inline:!0,iconProps:{inherit:!0,align:"baseline"},className:"bold"});let p;if(n)p=r?PB.rt("You created this private channel {date}. This is the very beginning of the {name} channel.",{date:d,name:u}):PB.rt("You created this channel {date}. This is the very beginning of the {name} channel.",{date:d,name:u});else{const e=a?o.a.createElement(mB.a,{id:a,showTooltip:!0}):o.a.createElement(hB.a,{type:"unknown"});p=r?PB.rt("{creator} created this private channel {date}. This is the very beginning of the {name} channel.",{creator:e,date:d,name:u}):PB.rt("{creator} created this channel {date}. This is the very beginning of the {name} channel.",{creator:e,date:d,name:u})}return o.a.createElement(MB,{channelId:t,description:p,purpose:i,isUserRestricted:l})}render(){var e=this.props;const t=e.channelId,a=e.isPrivate,n=d()("p-message_pane__foreword",{"p-message_pane__foreword--private":a});return o.a.createElement("div",{className:n},this.renderTitle(),this.renderDescription(),o.a.createElement(NB,{channelId:t}))}}channel_foreword_ChannelForeword.displayName="ChannelForeword",channel_foreword_ChannelForeword.defaultProps={channelId:null,purpose:null,creatorIsYou:!1,createdById:null,dateCreated:null,isPrivate:!1,isUserRestricted:!1};var xB=Object(u.b)(function(e,{channelId:t}){const a=Object(B.e)(e,t);if(!a)return{};const n=Object(bi.b)(e),s=a.purpose?a.purpose.value:null,r=Object(q.Cb)(a);return{purpose:s,creatorIsYou:n&&n.id===a.creator,createdById:a.creator,dateCreated:a.created,isPrivate:r,isUserRestricted:Object(Je.Gb)(n),featureLongerChannelNames:Object(m.m)(e,"feature_longer_channel_names")}})(channel_foreword_ChannelForeword),LB=a("uksu"),FB=a("HfwO");const DB=new x.b("message_pane_foreword"),BB=(l.default.string,l.default.string,l.default.object.isRequired,l.default.func,{botName:null,botId:null,openAboutAppWithMemberId:void 0});class app_help_button_AppHelpButton extends i.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){const e=this.props.botId;this.props.openAboutAppWithMemberId({memberId:e}),this.props.clogger.track("APP_SPACE_ABOUT_CLICKED",{about_clicked_from_bot_dm:!0})}render(){const e=this.props.botName;return o.a.createElement(Ua.a,{className:"p-message_pane__foreword__button",onClick:this.onClick},o.a.createElement(bn.b,{type:"lightbulb-o",size:"inherit"})," ",DB.t("How does {name} work?",{name:Object(x.q)(e)}))}}app_help_button_AppHelpButton.displayName="AppHelpButton",app_help_button_AppHelpButton.defaultProps=BB;var UB=Object(u.b)(function(e,{botId:t}){const a=Object(bi.d)(e,t),n=Object(ie.a)({state:e});return a?{botName:Object(Je.A)(a),clogger:n}:{clogger:n}},e=>({openAboutAppWithMemberId:(...t)=>e(Object(LB.c)(...t))}))(app_help_button_AppHelpButton);const qB=new x.b("message_pane_foreword"),HB=(l.default.bool.isRequired,l.default.string,l.default.oneOf(["self","bot","member"]).isRequired,l.default.bool,l.default.func,l.default.func.isRequired,l.default.bool.isRequired,{memberId:null,prefWhoCanSeeThis:!1,openAboutAppWithMemberId:r.a});class im_foreword_BaseImForeword extends i.PureComponent{constructor(e){super(e),this.onMemberClick=this.onMemberClick.bind(this)}onMemberClick(e){e.preventDefault();var t=this.props;const a=t.memberId,n=t.featureReactMemberProfileCard;this.canAppSpaceBeUsed()?this.props.openAboutAppWithMemberId({memberId:a}):n?this.props.showMemberProfile({memberId:a}):Object(Tu.i)(a)}canAppSpaceBeUsed(){var e=this.props;const t=e.isAppSpaceEnabled;return"bot"===e.type&&t}renderAvatar(){const e=this.props.memberId;return o.a.createElement("div",{className:"p-message_pane__foreword__avatars"},o.a.createElement(_e.c,{onClick:this.onMemberClick},o.a.createElement(FB.b,{id:e,showPresence:!0,showStatus:!0,showAvatar:!0})))}renderDescription(){var e=this.props;const t=e.memberId;if("self"===e.type)return o.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},qB.rt("<b>This is your space.</b> Draft messages, list your to-dos, or keep links and files handy. You can also talk to yourself here, but please bear in mind you\u2019ll have to supply both sides of the conversation."));let a=qB.rt("This is the very beginning of your direct message history with {name}",{name:o.a.createElement(mB.a,{id:t,showTooltip:!0})});return this.props.prefWhoCanSeeThis&&(a=qB.rt("This is the very beginning of your direct message history with {name}. Only the two of you are in this conversation, and no one else can join it. <a>Learn more</a>",{name:o.a.createElement(mB.a,{id:t,showTooltip:!0})},({text:e,key:t})=>o.a.createElement(Ze.a,{key:t,href:"https://get.slack.help/hc/articles/360002063088",rel:"noopener noreferrer"},e))),o.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},a)}renderButtons(){const e=this.props.memberId;return this.canAppSpaceBeUsed()?o.a.createElement("div",{className:"p-message_pane__foreword__buttons"},o.a.createElement(UB,{botId:e})):null}render(){return o.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription(),this.renderButtons())}}im_foreword_BaseImForeword.displayName="BaseImForeword",im_foreword_BaseImForeword.defaultProps=HB;const WB=Object(u.b)(function(e,{channelId:t}){const a=Object(B.e)(e,t);if(!a)return{};const n=Object(q.H)(a),s=Object(bi.d)(e,n);let r;return r=n===Object(m.d)(e)?"self":Object(Je.ib)(s)?"bot":"member",{isAppSpaceEnabled:Object(yn.g)(e),memberId:n,type:r,prefWhoCanSeeThis:Object(ba.k)(e,"whocanseethis_dm_mpdm_badge"),featureReactMemberProfileCard:Object(m.m)(e,"feature_react_member_profile_card")}},e=>({openAboutAppWithMemberId:(...t)=>e(Object(LB.c)(...t)),showMemberProfile:(...t)=>e(Object(qa.j)(...t))}))(im_foreword_BaseImForeword);WB.propTypes={channelId:l.default.string},WB.defaultProps={channelId:null};var GB=WB,KB=a("AncD");const VB=new x.b("message_pane_foreword"),zB=(l.default.string,l.default.object,{memberId:void 0,sharedTeam:void 0});class im_shared_foreword_ImSharedForeword extends i.PureComponent{renderAvatar(){const e=this.props.memberId;return o.a.createElement("div",{className:"p-message_pane__foreword__avatars"},o.a.createElement(KB.a,{id:e,size:"large",showPresence:!0,showStatus:!0,showAvatar:!0}))}renderDescription(){var e=this.props;const t=e.sharedTeam,a=e.memberId,n=!t||Object(xe.M)(t)?o.a.createElement(xl.a,{type:"unknown"}):o.a.createElement("strong",null,Object(xe.e)(t)),s=VB.rt("{name} is from {team} and not a member of your team, so share files and information with care.",{name:o.a.createElement(mB.a,{id:a,showTooltip:!0}),team:n});return o.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},s)}render(){return o.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription())}}im_shared_foreword_ImSharedForeword.displayName="ImSharedForeword",im_shared_foreword_ImSharedForeword.defaultProps=zB;var $B=Object(u.b)(function(e,{channelId:t}){const a=Object(B.e)(e,t);if(!a)return null;const n=Object(bi.d)(e,Object(q.H)(a)),s=Object(Je.P)(n),r=Object(Se.i)(e,s);return{memberId:Object(q.H)(a),sharedTeam:r}})(im_shared_foreword_ImSharedForeword);const YB=new x.b("message_pane_foreword");l.default.string.isRequired,l.default.string,l.default.object.isRequired,l.default.func.isRequired,l.default.string,l.default.number,l.default.oneOf(["light","dark"]);class limited_history_foreword_LimitedHistoryForeword extends i.PureComponent{constructor(e){super(e),this.onClickLearnMore=this.onClickLearnMore.bind(this)}componentDidMount(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:this.getClogUiElementVal()}}})}onClickLearnMore(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"click",ui_element:this.getClogUiElementVal()}}});this.props.showPricingPlans({pricingPlansPageUrl:Object(gr.k)({entryPoint:"limited_history_foreword"}),source:"limited_history_foreword"})}getClogUiElementVal(){const e=this.props.channelType;return"mpim"===e||"im"===e?33:34}render(){var e=this.props;const t=e.channelName,a=e.channelType,n=e.clientTheme,s=e.workspaceName,r=e.teamMessageLimitInSeconds;let l=!0,c="",u="";const p=YB.t("See Upgrade Options");r?(l=!1,c=YB.t("Unlock messages prior to {priorToDate} in {workspaceName}",{priorToDate:Object(Ol.a)(r,"{date}"),workspaceName:Object(x.q)(s)}),u=YB.t("To view and search all the messages in your workspace\u2019s history, rather than just the {maxMesssageLimitCount} most recent, upgrade to one of our paid plans.",{maxMesssageLimitCount:Object(vj.a)(1e4)})):"mpim"===a||"im"===a?(u=YB.t("To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),c=YB.t("There\u2019s more to this conversation")):(c=YB.t("There\u2019s more to the conversation in {name}",{name:t}),u=YB.t("To see and search this channel\u2019s full history, upgrade to one of our paid plans."));const h=d()("p-message_pane__limited_history_foreword",{[`p-message_pane__limited_history_foreword--${n}`]:"light"!==n});return o.a.createElement("div",{className:h,"data-qa":"msg_lim_header"},o.a.createElement("div",{className:"p-message_pane__limited_history_foreword_headline","data-qa":"msg_lim_headline"},l&&o.a.createElement(i.Fragment,null,o.a.createElement(Ho.b,{text:":speech_balloon:",emojiSize:Ho.a.MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0"),c),o.a.createElement("div",{className:"p-message_pane__limited_history_foreword_subheading","data-qa":"msg_lim_subheading"},u),o.a.createElement(_e.d,{onClick:this.onClickLearnMore,"data-qa":"see_upgrade_options_btn",size:"small"},p))}}limited_history_foreword_LimitedHistoryForeword.displayName="LimitedHistoryForeword",limited_history_foreword_LimitedHistoryForeword.defaultProps={channelName:"",workspaceName:"",teamMessageLimitInSeconds:0,clientTheme:"light"};const QB={showPricingPlans:T.h};var XB=Object(u.b)(function(e,{channelId:t}){const a=Object(B.e)(e,t);if(!a)return{};const n=Object(Se.d)(e),s=n?Object(xe.e)(n):"",r=Object(xe.l)(n);let i=0;return r>0&&(i=r/1e6),{channelType:Object(q.v)(a),channelName:Object(q.x)(e,a),clogger:Object(ie.a)({state:e}),workspaceName:s,teamMessageLimitInSeconds:i}},QB)(limited_history_foreword_LimitedHistoryForeword);const JB=new x.b("message_pane_foreword"),ZB=(l.default.string.isRequired,l.default.arrayOf(l.default.string),l.default.arrayOf(l.default.object),l.default.string,l.default.oneOf(["everything","mentions_dms","nothing"]),l.default.bool,l.default.func,l.default.func,l.default.bool.isRequired,{memberIds:[],externalTeams:[],notificationPermission:"na",notificationSetting:"everything",prefWhoCanSeeThis:!1,openChannelNotificationPrefsModal:r.a,openPrefsModal:r.a});class mpim_foreword_BaseMpimForeword extends i.PureComponent{constructor(e){super(e),this.openPrefsDialog=this.openPrefsDialog.bind(this),this.openChannelPrefsDialog=this.openChannelPrefsDialog.bind(this),this.state=Object(Ne.m)()}getNotificationWarningText(){var e=this.state;const t=e.notificationsEnabled,a=e.notificationDisabledType;if(t)return null;switch(a){case"not_yet_allowed":return JB.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",null,({key:e,text:t})=>o.a.createElement(Ua.a,{onClick:this.openPrefsDialog,key:e},t));case"not_allowed":return JB.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.");case"impossible":return JB.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",{},({key:e,text:t})=>o.a.createElement(ux.a,{target:"_blank",key:e,href:"/downloads"},t));default:return null}}UNSAFE_componentWillReceiveProps(e){this.props.notificationPermission!==e.notificationPermission&&this.setState(()=>Object(Ne.m)())}openChannelPrefsDialog(){this.props.openChannelNotificationPrefsModal({channelId:this.props.channelId,entryPoint:"foreward"})}openPrefsDialog(){this.props.openPrefsModal({activeSection:"notifications"})}renderAvatars(){var e=this.props;const t=e.memberIds,a=e.featureReactMemberProfileCard,n=t.map(e=>o.a.createElement(fi.c,{key:e,className:"p-message_pane__foreword__avatar",userId:e,size:56,showCard:a}));return o.a.createElement("div",{className:"p-message_pane__foreword__avatars"},n)}renderDescription(){var e=this.props;const t=e.memberIds,a=e.externalTeams;if(a.length){const e=a.map(this.renderTeamName),t=JB.rt("This conversation includes people from {teams}, so share files and information with care.",{teams:Object(x.k)(e,{noEscape:!0,react:!0,strong:!0})});return o.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},t,this.renderDescriptionActions())}const n=t.map(e=>o.a.createElement(mB.a,{id:e,showTooltip:!0}));let s=JB.rt("This is the very beginning of your direct message history with {names}",{names:Object(x.k)(n,{noEscape:!0,react:!0})});return this.props.prefWhoCanSeeThis&&(s=JB.rt("This is the very beginning of your direct message history with {names}. Only the {number} of you are in this conversation, and no one else can join it. <a>Learn more</a>",{names:Object(x.k)(n,{noEscape:!0,react:!0}),number:n.length+1},({text:e,key:t})=>o.a.createElement(ux.a,{key:t,href:"https://get.slack.help/hc/articles/360002063088",target:"_blank",rel:"noopener noreferrer"},e))),o.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},s,this.renderDescriptionActions())}renderDescriptionActions(){const e=this.getNotificationWarningText();if(e)return o.a.createElement("div",{className:"p-message_pane__foreword__notification_warning"},e);const t=this.props.notificationSetting;return"everything"===t?o.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},JB.rt("You\u2019ll be notified for <strong>every new message</strong> in this conversation.",{fallbackHash:"d74e681b9c224e38f01310015fd4ae63f9c3ba9c"})," ",this.renderEditButton()):"mentions_dms"===t?o.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},JB.rt("You\u2019ll be notified when <strong>a teammate mentions you or uses one of your keywords</strong>.")," ",this.renderEditButton()):o.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},JB.rt("You won\u2019t receive notifications.")," ",this.renderEditButton())}renderEditButton(){return o.a.createElement(Ua.a,{onClick:this.openChannelPrefsDialog},JB.rt("Change this setting",{fallbackHash:"5301648dcf6b53cefc9ed52999aaa92d4603cae0"}))}renderTeamName(e){return Object(xe.M)(e)?o.a.createElement(xl.a,{type:"unknown"}):Object(xe.e)(e)}render(){return o.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatars(),this.renderDescription())}}mpim_foreword_BaseMpimForeword.displayName="BaseMpimForeword",mpim_foreword_BaseMpimForeword.defaultProps=ZB;const eU=Object(yy.createSelector)((e,{channelId:t})=>Object(B.e)(e,t),m.d,(e,t)=>{const a=Object(q.I)(e);return Object(ep.a)(a,t)}),tU=Object(yy.createSelectorCreator)(yy.defaultMemoize,zf.a)((e,{channelId:t})=>Object(B.e)(e,t),m.d,(e,{channelId:t})=>{const a=Object(B.e)(e,t);return a?Object(q.I)(a).map(t=>({id:t,name:Object(Je.W)(e,t)})).sort((e,t)=>Object(UL.a)(e.name,t.name)).map(e=>e.id):null},(e,t,a)=>Object(ep.a)(a,t));const aU=Object(u.b)(function(e,{channelId:t}){const a=Object(B.e)(e,t);if(!a)return null;let n=[];if(Object(q.bb)(a)){const t=Object(q.O)(e,a,{includeSelfTeamId:!0});n=Object(xe.O)(e,t).map(t=>Object(Se.i)(e,t))}return{memberIds:Object(LI.d)(e)?tU(e,{channelId:t}):eU(e,{channelId:t}),externalTeams:n,notificationPermission:Object(pk.b)(e),notificationSetting:Object(Ne.f)(e,t),prefWhoCanSeeThis:Object(ba.k)(e,"whocanseethis_dm_mpdm_badge"),featureReactMemberProfileCard:Object(m.m)(e,"feature_react_member_profile_card")}},function(e){return{openChannelNotificationPrefsModal:(...t)=>e(Object(Hk.a)(...t)),openPrefsModal:(...t)=>e(Object(ol.a)(...t))}})(mpim_foreword_BaseMpimForeword);aU.propTypes={channelId:l.default.string},aU.defaultProps={channelId:null};var nU=aU;const sU=new x.b("message_pane_foreword"),rU="USLACKBOT";class slackbot_foreword_SlackbotForeword extends i.Component{shouldComponentUpdate(){return!1}render(){const e=o.a.createElement("h1",{className:"p-message_pane__foreword__title"},sU.t("Hi, Slackbot here!")),t=o.a.createElement("div",{className:"p-message_pane__foreword__description display_flex","data-qa":"im_foreword_description"},o.a.createElement(fi.c,{userId:rU,size:48,className:"p-message_pane__foreword__avatar"}),o.a.createElement("div",null,o.a.createElement("p",null,sU.rt("You can ask me simple questions about how Slack works, or just type a few keywords. I\u2019ll search the <a>Help Center</a> to help you find more info.",{fallbackHash:"0d892d295ed431c242e406d752976a0f4d8d8b38"},({key:e,text:t})=>o.a.createElement(Ze.a,{key:e,rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},t))),o.a.createElement("p",{className:"margin_0"},sU.rt("For example: <b>Can I edit a message I\u2019ve posted?</b> Or simply: <b>edit message</b>.",{fallbackHash:"bb42704f8751d2e3be33f3dd809a406c5a787d1e"},({key:e,text:t})=>o.a.createElement(Ze.a,{key:e,rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},t))))),a=d()("p-message_pane__foreword","p-message_pane__foreword--slackbot");return o.a.createElement("div",{className:a},e,t)}}slackbot_foreword_SlackbotForeword.displayName="SlackbotForeword";var iU=slackbot_foreword_SlackbotForeword;const oU=new x.b("message_pane_foreword");l.default.object,l.default.string,l.default.bool,l.default.bool,l.default.arrayOf(l.default.shape({id:l.default.string.isRequired,name:l.default.string})),l.default.arrayOf(l.default.shape({id:l.default.string.isRequired,name:l.default.string})),l.default.string,l.default.bool,l.default.bool.isRequired;class shared_foreword_SharedForeword extends i.PureComponent{constructor(){super(),this.renderTeamName=this.renderTeamName.bind(this)}renderTitle(){var e=this.props;const t=e.channel,a=e.featureLongerChannelNames,n=d()("p-message_pane__foreword__title",{"p-message_pane__foreword__title--truncate":!a});return o.a.createElement("h1",{className:n},a?o.a.createElement(Ti.a,{channel:t}):o.a.createElement(Bp.a,{channel:t,inline:!0,iconProps:{inherit:!0,align:"baseline"}}))}renderAvatars(){var e=this.props;const t=e.channel,a=e.sharedTeams;if(Object(io.a)(a))return null;const n=a.map(e=>{const a=Object(q.Ab)(t,e.id);return o.a.createElement(nj.b,{key:e.id,id:e.id,size:56,isPendingShared:a,className:"p-message_pane__foreword__avatar"})});return o.a.createElement("div",{className:"p-message_pane__foreword__avatars"},n)}renderTeamName(e){return Object(xe.M)(e)?o.a.createElement(xl.a,{type:"unknown"}):Object(xe.e)(e)}renderDescription(){var e=this.props;const t=e.channelId,a=e.purpose,n=e.sharedTeams,s=e.externalTeams,r=e.isPendingShared,i=e.isUserRestricted;let l;if(r){const e=s.map(this.renderTeamName),t=Object(x.k)(e,{noEscape:!0,react:!0,strong:!0});l=oU.rt("This is a shared channel. Waiting for {names} to join...",{names:t})}else{const e=n.map(this.renderTeamName),t=Object(x.k)(e,{noEscape:!0,react:!0,strong:!0});l=oU.rt("This is a shared channel between {names}.",{names:t})}return o.a.createElement(MB,{channelId:t,description:l,purpose:a,isUserRestricted:i})}render(){var e=this.props;const t=e.channelId,a=e.isPrivate,n=d()("p-message_pane__foreword",{"p-message_pane__foreword--private":a});return o.a.createElement("div",{className:n},this.renderAvatars(),this.renderTitle(),this.renderDescription(),o.a.createElement(NB,{channelId:t}))}}shared_foreword_SharedForeword.displayName="SharedForeword",shared_foreword_SharedForeword.defaultProps={channel:null,channelId:null,isPrivate:!1,isPendingShared:!1,sharedTeams:[],externalTeams:[],purpose:null,isUserRestricted:!1};var lU=Object(u.b)(function(e,{channelId:t}){const a=Object(B.e)(e,t);if(!a)return null;const n=Object(bi.b)(e),s=a.purpose?a.purpose.value:null,r=Object(q.Cb)(a),i=Object(q.bb)(a),o=Object(q.zb)(a);let l=[],c=[];if(i||o){const t=Object(q.O)(e,a,{includeSelfTeamId:!0});l=t.map(t=>Object(Se.i)(e,t)),c=Object(xe.O)(e,t).map(t=>Object(Se.i)(e,t))}return{channel:a,isPendingShared:o,isPrivate:r,isUserRestricted:n.is_restricted,purpose:s,sharedTeams:l,externalTeams:c,featureLongerChannelNames:Object(m.m)(e,"feature_longer_channel_names")}})(shared_foreword_SharedForeword),cU=a("zBEu");const dU=new x.b("newxp_onboarding"),uU=(l.default.string,l.default.oneOf(["light","dark"]),{START:"onboarding_start",CANCELLED:"onboarding_cancelled",SLACKBOT:"onboarding_slackbot_conversation",COMPLETE:"onboarding_complete"});class newxp_foreword_NewxpForeword extends i.PureComponent{renderHeaderAction(){return this.props.step===uU.CANCELLED?dU.rt("I changed my mind. <a>Take the tutorial.</a>",null,({key:e,text:t})=>o.a.createElement(Ze.a,{key:e,onClick:cU.b},t)):this.props.step===uU.SLACKBOT?dU.rt("Got the hang of Slack already? <a>Skip the tutorial.</a>",null,({key:e,text:t})=>o.a.createElement(Ze.a,{key:e,onClick:cU.a},t)):null}renderFooter(){return this.props.step!==uU.START?null:o.a.createElement("div",{className:"p-message_pane__newxp_foreword__footer"},o.a.createElement(_e.d,{type:"primary",size:"large",className:"p-message_pane__newxp_foreword__explore",onClick:cU.g},dU.rt("Explore Slack")),o.a.createElement("div",{className:"p-message_pane__newxp_foreword__pre_skip"},dU.rt("Not your first Slack workspace? <a>Skip the tutorial</a>",null,({key:e,text:t})=>o.a.createElement(Ze.a,{key:e,onClick:cU.a,"data-qa":"skip_tutorial"},t))))}render(){var e=this.props;const t=e.step,a=e.clientTheme,n=d()("p-message_pane__newxp_foreword",{"p-message_pane__newxp_foreword--start":"onboarding_start"===t}),s=d()("p-message_pane__newxp_foreword__welcome_text",{[`p-message_pane__newxp_foreword__welcome_text--${a}`]:"light"!==a});return o.a.createElement("div",{className:n},o.a.createElement("div",{className:"p-message_pane__newxp_foreword__header"},o.a.createElement("div",{className:s},dU.rt("Welcome!")),o.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_message"},dU.t("Slack is a collaboration hub for teams.",{fallbackHash:"2548745b7be53c916d085ad9d7a6350c53b003b3"})),o.a.createElement("div",{className:"p-message_pane__newxp_foreword__skip_messaging"},this.renderHeaderAction())),this.renderFooter())}}newxp_foreword_NewxpForeword.displayName="NewxpForeword",newxp_foreword_NewxpForeword.defaultProps={step:null,clientTheme:"light"};var pU=newxp_foreword_NewxpForeword,hU=pB;const mU=new x.b("message_pane_foreword"),bU=(l.default.object.isRequired,l.default.oneOf(["light","dark"]),35);class limited_history_alert_LimitedHistoryAlert extends i.PureComponent{componentDidMount(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:bU}}})}render(){const e=this.props.clientTheme,t=Object(gr.k)({entryPoint:"limited_history_alert"}),a=d()("p-message_pane__limited_history_alert",{[`p-message_pane__limited_history_alert--${e}`]:"light"!==e});return o.a.createElement("div",{className:a},o.a.createElement(Ho.b,{text:":speech_balloon:",emojiSize:Ho.a.MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0",mU.rt("<b>There\u2019s more to this conversation.</b> To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),"\xa0",o.a.createElement(Ze.a,{href:t,target:"_blank",rel:"noopener noreferrer","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"slackbot_message_limit_header","data-clog-ui-action":"click","data-clog-ui-step":"history"},mU.t("Learn More")))}}limited_history_alert_LimitedHistoryAlert.displayName="LimitedHistoryAlert",limited_history_alert_LimitedHistoryAlert.defaultProps={clientTheme:"light"};var fU=Object(u.b)(e=>({clogger:Object(ie.a)({state:e})}))(limited_history_alert_LimitedHistoryAlert),_U=a("H3xq").a,gU=a("qnZ7"),yU=a("0wDQ");a("Mzw9");const OU=new x.b("message"),CU=(l.default.object.isRequired,l.default.string,l.default.node,l.default.func.isRequired,l.default.func.isRequired,{className:void 0,children:void 0});class resend_MessageResend extends i.PureComponent{constructor(e){super(e),this.resend=this.resend.bind(this),this.cancel=this.cancel.bind(this)}getText(){return this.props.msg.isEKMError?OU.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel."):OU.t("Slack couldn\u2019t send this message")}resend(){const e=this.props.msg,t=e.ts,a=e.channel;this.props.resendMessage(a,t)}cancel(){const e=this.props.msg,t=e.ts,a=e.channel;this.props.removeMessageAndTimestamp({channelId:a,ts:t})}renderFooter(){var e=this.props.msg;const t=e.showResend,a=e.showCancel,n=e.isEKMError;if(!t&&!a)return null;const s=t&&o.a.createElement(Ua.a,{className:"c-message_kit__resend__resend",onClick:this.resend},OU.t("Try again")),r=a&&o.a.createElement(Ua.a,{className:"c-message_kit__resend__cancel",onClick:this.cancel},n?OU.t("Clear"):OU.t("Cancel")),i=s&&r&&o.a.createElement("span",{className:"c-message_kit__resend__separator"},"\xa0|\xa0");return o.a.createElement("div",{className:"c-message_kit__resend__footer"},o.a.createElement("div",{className:"c-message_kit__resend__footer__border"}),o.a.createElement("div",null,this.getText(),"\u2002",s,i,r))}render(){var e=this.props.msg;const t=e.showResend,a=e.showCancel,n=Object($e.xb)(this.props.msg);if(!t&&!a&&!n)return this.props.children;const s=d()("c-message_kit__resend",this.props.className,{"c-message_kit__resend--with_buttons":t||a,"c-message_kit__resend--unprocessed":n});return o.a.createElement("div",{className:s},this.props.children,this.renderFooter())}}resend_MessageResend.displayName="MessageResend",resend_MessageResend.defaultProps=CU;const vU={resendMessage:(...e)=>Object(gU.a)(...e),removeMessageAndTimestamp:(...e)=>Object(yU.a)(...e)};var EU=Object(u.b)(null,vU)(resend_MessageResend);a("8vlY");l.default.object.isRequired,l.default.oneOf(["light","dense"]),l.default.bool,l.default.bool,l.default.bool,l.default.oneOf(["above","inside","default"]),l.default.func,Ku.a.Rollup(),l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.string;const kU={theme:"light",adjacent:!1,focused:!1,renderActionsOffscreen:!1,actionsPosition:void 0,onOptionClick:r.a,rollup:null,parentId:void 0,isLast:!1,showingContextBar:!1,highlight:!1,clearHighlight:r.a,latestMessageTsWithReactions:void 0};class message_pane_message_Message extends i.PureComponent{constructor(e){super(e),this.handleBackgroundClick=this.handleBackgroundClick.bind(this)}getMessageBody(e){var t=this.props;const a=t.adjacent,n=t.rollup,s=t.latestMessageTsWithReactions;return o.a.createElement(o.a.Fragment,null,!a&&o.a.createElement(lh,{msg:e},o.a.createElement(Qt.a,{msg:e}),"\xa0\xa0",o.a.createElement(ta.a,{msg:e}),o.a.createElement("br",null)),o.a.createElement(EU,{msg:e},o.a.createElement(Xt.a,{msg:e,rollup:n,"data-qa":"message-text"}),o.a.createElement(Jt.a,{msg:e,blocksContainerContext:Vp.a.message}),o.a.createElement(Zt.a,{msg:e}),o.a.createElement(ea.b,{msg:e}),o.a.createElement(zp.a,{msg:e})),o.a.createElement(Qp.a,{msg:e,latestMessageTsWithReactions:s}),o.a.createElement(th,{msg:e}),o.a.createElement(Jp,{msg:e}))}getCompactMessageBody(e){var t=this.props;const a=t.adjacent,n=t.rollup,s=t.latestMessageTsWithReactions;return o.a.createElement(mh.a,null,!a&&o.a.createElement(lh,{msg:e},o.a.createElement(Qt.a,{msg:e,className:"p-message_pane_message__sender--compact"}),"\xa0"),o.a.createElement(EU,{msg:e},o.a.createElement(Xt.a,{msg:e,rollup:n,"data-qa":"message-text"}),o.a.createElement(Yp,{msg:e,blocksContainerContext:Vp.a.message}),o.a.createElement(Zt.a,{msg:e}),o.a.createElement(ea.b,{msg:e}),o.a.createElement(zp.a,{msg:e})),o.a.createElement(Qp.a,{msg:e,latestMessageTsWithReactions:s}),o.a.createElement(th,{msg:e}),o.a.createElement(Jp,{msg:e}))}getCompactGutter(){var e=this.props;const t=e.msg,a=e.theme,n=e.adjacent,s="light"===a,r=d()("p-message_pane_message__compact_timestamp",{"p-message_pane_message__compact_timestamp--light":s,"p-message_pane_message__compact_timestamp--adjacent":n});return o.a.createElement("div",{className:r},o.a.createElement(ta.a,{msg:t,meridiem:!(n&&s)}))}handleBackgroundClick(e){e.altKey&&(e.preventDefault(),this.props.onOptionClick(this.props.msg))}render(){var e=this.props;const t=e.msg,a=e.theme,n=e.adjacent,s=e.focused,r=e.renderActionsOffscreen,i=e.actionsPosition,l=e.parentId,c=e.isLast,u=e.showingContextBar,p=e.highlight,h=e.clearHighlight,m=d()("p-message_pane_message__message","c-message_kit__message",{"p-message_pane_message__message--last":c,"p-message_pane_message__message--showing_context_bar":u}),b="dense"===a,f=b?this.getCompactGutter():null,_=n?this.getCompactGutter():o.a.createElement(Yt.a,{msg:t}),g=b?this.getCompactMessageBody(t):this.getMessageBody(t);return o.a.createElement(ah.a,{msg:t},o.a.createElement(nh.a,{msg:t,className:m,onClick:this.handleBackgroundClick,highlight:p,clearHighlight:h},o.a.createElement(sh.a,{"data-qa":"message_pane_message_hover",hovered:s},o.a.createElement(rh.a,{msg:t,showComment:!0,showShare:!0,messageContainerType:Ln.I.MESSAGE_PANE,position:i||(b||n?"above":"default"),renderOffscreen:r,parentId:l},o.a.createElement(dh.a,{msg:t,className:"p-message_pane_message__message_label"},o.a.createElement($t.a,{light:_,compact:f},o.a.createElement(ch.a,{msg:t,replyBar:o.a.createElement(th,{msg:t})},o.a.createElement(hh,{msg:t},g))))))))}}message_pane_message_Message.displayName="Message",message_pane_message_Message.defaultProps=kU;var SU=Object(uB.a)(message_pane_message_Message,"message-pane-message");l.default.func;const jU={setUnreadPoint:r.a};class message_wrapper_MessageWrapper extends i.Component{constructor(e){super(e),this.markMsgUnread=this.markMsgUnread.bind(this)}markMsgUnread(e){const t=e.channel,a=e.ts;this.props.setUnreadPoint({channelId:t,unreadTs:a})}render(){return o.a.createElement(SU,s()({onOptionClick:this.markMsgUnread},this.props))}}message_wrapper_MessageWrapper.displayName="MessageWrapper",message_wrapper_MessageWrapper.defaultProps=jU;var IU=Object(mp.a)(Object(u.b)(null,function(e){return{setUnreadPoint:(...t)=>e(Object(wi.setUnreadPoint)(...t))}})(message_wrapper_MessageWrapper)),wU=a("PR8O");a("EnhK");const TU=sticky_list_StickyList,NU=degraded_list_DegradedList,AU={channelId:l.default.string,timestamps:l.default.arrayOf(l.default.string),requestHistory:l.default.func,lastReadTs:l.default.string,isGhostLastRead:l.default.bool,startTs:l.default.string,startTsOffset:l.default.number,highlightTs:l.default.string,focusRequestedTs:l.default.string,rollups:l.default.objectOf(Ku.a.Rollup()),setUnreadPoint:l.default.func,isLoading:l.default.bool,isLoadingOlder:l.default.bool,reachedStart:l.default.bool,reachedEnd:l.default.bool,prevReachedEnd:l.default.bool,oldest:l.default.string,latest:l.default.string,onScroll:l.default.func,onVisibleRowsChanged:l.default.func,doneHighlighting:l.default.func,isFileExpanding:l.default.bool,isLimited:l.default.bool,isSlackbotIm:l.default.bool,useStickyDayDividers:l.default.bool,shouldIgnoreScrollKeys:l.default.func,shouldIgnoreArrowKeys:l.default.func,channelSessionId:l.default.string,theme:l.default.string,firstUnreadTs:l.default.string,featureTinyspeck:l.default.bool,featureAriaApplicationMode:l.default.bool,messageContainerType:l.default.string,"aria-label":l.default.string.isRequired,teamId:l.default.string,enterpriseId:l.default.string,sessionId:l.default.string,msgTriggers:l.default.object,currentUserId:l.default.string,jumpToTimestamp:l.default.func,makeMessageSummary:l.default.func,isScreenReaderEnabled:l.default.bool,windowLastFocusEvent:l.default.number,onFocusEnter:l.default.func,onFocusLeave:l.default.func,isBannerVisible:l.default.bool,setFocusRequestedTs:l.default.func,showThreadIfThreadable:l.default.func,currentThreadKey:l.default.string,isThreadable:l.default.func,threadListId:l.default.string,telemeter:l.default.object,featureOfflineMode:l.default.bool,isOffline:l.default.bool,userAttentionIsOnChat:l.default.bool,clientTheme:l.default.string,featureMessageNavigationShortcuts:l.default.bool,featureContextualMessageShortcuts:l.default.bool,latestMessageTsWithReactions:l.default.string,openContextualMessageShortcutsModal:l.default.func,contextualMessageShortcutsModalWasSeen:l.default.bool,isToastInView:l.default.bool,featureMessageKitInMessagePane:l.default.bool,showingContextBar:l.default.bool,removeFromSectionNavigation:l.default.func,addToSectionNavigation:l.default.func,setInitialActiveSection:l.default.func,focusLastVisibleMessageInChannel:l.default.bool,setFocusLastVisibleMessageInChannel:l.default.func,setFocusMessageInput:l.default.func},RU={channelId:null,timestamps:[],requestHistory:r.a,lastReadTs:void 0,isGhostLastRead:!1,startTs:null,startTsOffset:null,highlightTs:null,focusRequestedTs:void 0,rollups:null,setUnreadPoint:r.a,isFileExpanding:!1,isLoading:!1,isLoadingOlder:!1,reachedStart:!1,reachedEnd:!1,prevReachedEnd:!1,oldest:void 0,latest:void 0,onScroll:r.a,onVisibleRowsChanged:r.a,doneHighlighting:r.a,isLimited:!1,isSlackbotIm:!1,useStickyDayDividers:!0,shouldIgnoreScrollKeys:()=>!1,shouldIgnoreArrowKeys:()=>!1,channelSessionId:null,theme:"light",firstUnreadTs:null,featureTinyspeck:!1,featureAriaApplicationMode:!1,messageContainerType:void 0,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,currentUserId:null,jumpToTimestamp:r.a,makeMessageSummary:void 0,isScreenReaderEnabled:!1,windowLastFocusEvent:null,onFocusEnter:r.a,onFocusLeave:r.a,isBannerVisible:!1,setFocusRequestedTs:r.a,showThreadIfThreadable:r.a,currentThreadKey:void 0,isThreadable:r.a,threadListId:void 0,telemeter:{store:r.a,measure:r.a},featureOfflineMode:!1,isOffline:!1,userAttentionIsOnChat:!1,clientTheme:"light",latestMessageTsWithReactions:null,removeFromSectionNavigation:r.a,addToSectionNavigation:r.a,setInitialActiveSection:r.a,focusLastVisibleMessageInChannel:!1,setFocusLastVisibleMessageInChannel:r.a,setFocusMessageInput:r.a,featureMessageNavigationShortcuts:!1,featureContextualMessageShortcuts:!1,openContextualMessageShortcutsModal:r.a,contextualMessageShortcutsModalWasSeen:!1,isToastInView:!1,featureMessageKitInMessagePane:!1,showingContextBar:!1},MU=80,PU=60,xU=64,LU=120,FU=28,DU="MESSAGE-LIST",BU=864e5,UU={ABOVE:1,VISIBLE:2,BELOW:3},qU="0000000000.000001",HU=e=>{return`${Math.floor(e/1e3)}.000000`};class message_list_MessageList extends AI.a{constructor(e){super(e);const t=Sb();if(this.state={degraded:t,isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder,isSelecting:!1,hasKeyboardFocus:!1,isFileExpanding:!1},this.DEFAULT_ROW_HEIGHT="light"===e.theme?MU:PU,this.STICKY_EPSILON=this.DEFAULT_ROW_HEIGHT/2,this.ANCHOR_OFFSET=t?LU:xU,this.heightCache=new t_.a({DEFAULT_HEIGHT:this.DEFAULT_ROW_HEIGHT}),this.layout=new gravity_anchor_layout_GravityAnchorLayout({heightCache:this.heightCache,stickToBottom:!e.isFileExpanding||e.reachedEnd||e.prevReachedEnd,shouldExcludeFirstItemFromGravity:this.isFirstRowLimitedHistoryForeword.bind(this),STICKY_EPSILON:this.STICKY_EPSILON,STICKY_EPSILON_SETHEIGHT:2,ANCHOR_OFFSET:this.ANCHOR_OFFSET}),this.keys=[],this.rows=[],this.visibleRows=[],this.partiallyVisibleRows=[],this.unreadIndex=null,this.list=null,this.useAnchor=!0,this.keyToScrollTo=null,this.width=0,this.hasRenderedOneMessage=!1,this.requestAround=this.requestAround.bind(this),this.requestOlder=this.requestOlder.bind(this),this.requestNewer=this.requestNewer.bind(this),this.renderRow=this.renderRow.bind(this),this.setListRef=this.setListRef.bind(this),this.getAriaLabelForRow=this.getAriaLabelForRow.bind(this),this.isItemAriaExpanded=this.isItemAriaExpanded.bind(this),this.getPropsForItem=this.getPropsForItem.bind(this),this.onScroll=this.onScroll.bind(this),this.onListScrolled=this.onListScrolled.bind(this),this.onFocusEnter=this.onFocusEnter.bind(this),this.onFocusLeave=this.onFocusLeave.bind(this),this.onItemTabWithin=this.onItemTabWithin.bind(this),this.onItemKeyDown=this.onItemKeyDown.bind(this),this.debouncedOnListScrolled=Object(ip.a)(this.onListScrolled,150),this.isMessage=this.isMessage.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.onJumpToUnreadShortcut=this.onJumpToUnreadShortcut.bind(this),this.focus=this.focus.bind(this),this.onShiftPageUp=this.onShiftPageUp.bind(this),this.onShiftPageDown=this.onShiftPageDown.bind(this),this.onEnd=this.onEnd.bind(this),this.onArrowKeyRight=this.onArrowKeyRight.bind(this),this.scrollToOffset=Object(ko.a)(this.scrollToOffset.bind(this),200),this.messagesRendered={},this.loadingHistoriesSeen=0,this.loadingHistoriesSeenHighEnd=0,this.loadingHistoriesPerHowManyMessages=84,this.loadingHistoriesPerHowManyMessagesHighEnd=500,this.scrollMetricsGatheringEnabled=Object(pM.a)(1)||this.props.featureTinyspeck,this.scrollMetricsGatheringEnabled){const t=Object(p.getStateByTeamId)(e.teamId),a=Object(dI.c)({state:t});this.debounceBatchMessagesSeen=Object(oa.a)(()=>{a.store("modern_history_load_seen_per_84_messages",this.loadingHistoriesSeen,{allow_zero:!0}),this.loadingHistoriesSeen=0},1e3),this.debounceBatchMessagesSeenHighEnd=Object(oa.a)(()=>{a.store("modern_history_load_seen_per_500_messages",this.loadingHistoriesSeenHighEnd,{allow_zero:!0}),this.loadingHistoriesSeenHighEnd=0},1e3)}this.debounceCountHistoryLoadSeen=Object(oa.a)(()=>{this.loadingHistoriesSeen+=1,this.loadingHistoriesSeenHighEnd+=1},1e3),this.prqMetrics={channelSwitch:{}}}componentDidMount(){this.shouldShowContextualShortcutsOnMount()&&this.showContextualShortcutsModal()}componentDidUpdate(e){this.keyToScrollTo&&this.list&&(this.list.scrollToKey(this.keyToScrollTo,{lazy:this.lazyScroll}),this.keyToScrollTo=null);const t=this.props.isLoading||this.props.isLoadingOlder;Object(kb.a)(this.onJump)&&!t&&this.props.timestamps.length&&(this.onJump(),this.onJump=null),!!e.isFileExpanding&&!this.props.isFileExpanding?this.layout.setStickToBottom(!1):this.layout.setStickToBottom(this.props.reachedEnd||this.props.prevReachedEnd),this.onListScrolled(),this.maybeLogChannelSwitch(e);const a={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Np.a)(a)&&this.props.addToSectionNavigation(),Object(Ap.a)(a)&&this.props.removeFromSectionNavigation(),this.props.featureMessageNavigationShortcuts&&this.maybeFocusOnLastVisibleMessage(e)}maybeFocusOnLastVisibleMessage(e){const t=this.props.focusLastVisibleMessageInChannel;t&&e.focusLastVisibleMessageInChannel!==t&&(this.list.focusLastItemInView(),this.props.setFocusLastVisibleMessageInChannel(null))}maybeLogChannelSwitch(e){if(navigator.onLine)if(void 0!==this.props.msgTriggers[this.props.channelId]&&this.props.windowLastFocusEvent===this.props.msgTriggers[this.props.channelId].lastFocus){if(e.channelId!==this.props.channelId)this.trackChannelSwitchWithoutSync(e.channelId);else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&!1===e.isLoading&&!0===this.props.isLoading&&!0!==this.props.isLoadingOlder&&!1===this.prqMetrics.channelSwitch.hasLoggedVisible&&!1===this.prqMetrics.channelSwitch.hasLoggedUsable){const e=!1;this.trackChannelSwitchWithSync(ox.g,e)}else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&!0===e.isLoading&&!1===this.props.isLoading&&!0!==this.props.isLoadingOlder&&!0===this.prqMetrics.channelSwitch.hasLoggedVisible){const e=!0;this.trackChannelSwitchWithSync(ox.f,e)}}else this.prqMetrics.channelSwitch={}}trackChannelSwitchWithoutSync(e){this.prqMetrics.channelSwitch.duration&&(Object(ox.f)(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId),Object(ox.g)(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId));const t=Object(p.getStateByTeamId)(this.props.teamId),a=Object(dI.c)({state:t}),n=`start_channel_change_${this.props.channelId}`,s=a.measure(n,"channel_change_react_msgs",null,{return_unprocessed:!0}).unprocessed;this.prqMetrics.channelSwitch={duration:s,prevChannelId:e,nextChannelId:this.props.channelId,fetchHistoryState:ox.c,hasLoggedVisible:!1,hasLoggedUsable:!1}}trackChannelSwitchWithSync(e,t){const a=`start_channel_change_${this.prqMetrics.channelSwitch.nextChannelId}`,n=Object(p.getStateByTeamId)(this.props.teamId);e(Object(dI.c)({state:n}).measure(a,"channel_change_not_stored",null,{ephemeral:!0,return_unprocessed:!0}).unprocessed,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,ox.a,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId),t?(this.prqMetrics.channelSwitch={},this.prqMetrics.channelSwitch.hasLoggedUsable=!0):this.prqMetrics.channelSwitch.hasLoggedVisible=!0}findTimestampClosestToStartTs(){var e=this.props;const t=e.startTs,a=e.timestamps;return!!a.length&&(t?Object(qu.a)(a,e=>e>=t):null)}focus(){this.list.focus()}blur(){this.list.blur()}setListRef(e){this.list=e}jumpToUnread(e){var t=this.props;const a=t.lastReadTs,n=t.isScreenReaderEnabled,s=t.firstUnreadTs,r=e&&"keydown"===e.type&&(n||this.state.hasKeyboardFocus),i=Object(dt.a)(this.unreadIndex)&&this.keys[this.unreadIndex];i?r?(this.list.setActiveItem(s),this.list.scrollToKey(s)):this.list.scrollToKey(i):this.jumpToTimestamp({ts:a,onJump:()=>{this.state.hasKeyboardFocus&&this.list.setActiveItem(this.props.firstUnreadTs)}})}isAtBottom(){if(!this.list)return!1;const e=this.list.getScrollTop(),t=this.layout.getTotalHeight();return e+this.height>=Math.floor(t)-this.STICKY_EPSILON}getUnreadLinePlacement(){if("number"!=typeof this.unreadIndex)return UU.ABOVE;if(!this.list)return UU.ABOVE;var e=this.list.getVisibleRange();const t=e.start,a=e.end;return this.unreadIndex<t?UU.ABOVE:this.unreadIndex<a?UU.VISIBLE:UU.BELOW}getVisibleRows(e){if(!this.list)return[];var t=this.list.getVisibleRange(void 0,e);const a=t.start,n=t.end;return this.rows.slice(a,n)}getScrollmarkForFocusedItem(e){const t=e===qU?this.props.timestamps[0]:e;return{mark:e,offset:this.layout.getTop(t)-this.list.getScrollTop()}}getScrollmark(){if(!this.list||!this.layout)return null;const e=this.state.hasKeyboardFocus?this.list.getActiveItem():this.previouslyActiveItem;if(this.previouslyActiveItem=null,e)return this.getScrollmarkForFocusedItem(e);const t=this.list.getScrollTop();if(this.layout.shouldStickToBottom(t))return null;const a=this.props.timestamps,n=this.layout.findAnchor(a,a,t+this.ANCHOR_OFFSET);return{mark:n,offset:this.layout.getTop(n)-t}}onScroll(){this.useAnchor=!1,this.layout.setAnchor(!1),this.debouncedOnListScrolled(),this.props.onScroll()}onSelectionChange(e){this.node&&this.setState(()=>({isSelecting:e}))}isMessage(e){const t=this.rows[e.index];return t&&("message"===t.type||"foreword"===t.type)}onListScrolled(){const e=this.getVisibleRows(!1),t=this.getVisibleRows(!0);Object(WD.a)(e,this.visibleRows)&&Object(WD.a)(t,this.partiallyVisibleRows)||(this.visibleRows=e,this.partiallyVisibleRows=t,this.props.onVisibleRowsChanged(e,t))}onShiftPageUp(){const e=this.getTimestampOfPrevDay();if(!e)return;const t=this.state.hasKeyboardFocus;if(this.list.isScrolledToTop()&&this.props.reachedStart&&t)return void this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(e));const a=HU(e),n=this.props.isBannerVisible?xU:FU;this.jumpToTimestamp({ts:a,offset:n,onJump:()=>{const a=this.getTimestampOfFirstMessageForDay(e);t&&this.list.setActiveItem(a),this.list.scrollToKey(a,{lazy:this.lazyScroll})}})}onShiftPageDown(){const e=this.getTimestampOfNextDay();if(!e)return;const t=this.state.hasKeyboardFocus;if(this.list.isScrolledToBottom()&&this.props.reachedEnd&&t)return void this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(e));const a=HU(e),n=this.props.isBannerVisible?xU:FU;this.jumpToTimestamp({ts:a,offset:n,onJump:()=>{const a=this.getTimestampOfFirstMessageForDay(e);t&&this.list.setActiveItem(a),this.list.scrollToKey(a,{lazy:this.lazyScroll})}})}onEnd(){var e=this.props;const t=e.reachedEnd,a=e.timestamps,n=t?a[a.length-1]:null;return this.jumpToTimestamp({ts:n,onJump:()=>{if(!this.state.hasKeyboardFocus)return;const e=this.rows,t=e[e.length-1];"message"===(t&&t.type)&&this.list.setActiveItem(t.ts)}}),!1}onArrowKeyRight({target:e}){if(Object(Nu.a)(e))return;var t=this.props;const a=t.channelId,n=t.timestamps;if(!this.state.hasKeyboardFocus)return;const s=this.list.getInitialActiveItem();s&&Object(fo.a)(n,s)&&this.props.showThreadIfThreadable({channelId:a,threadTs:s,requestFocus:!0})&&this.blur()}onItemKeyDown({key:e,id:t}={}){if(this.props.featureMessageNavigationShortcuts&&"ArrowDown"===e){const e=this.rows[this.rows.length-1];e&&t===e.ts&&this.props.setFocusMessageInput(!0)}}onJumpToUnreadShortcut(e){wU.a&&this.jumpToUnread(e)}onFocusEnter(e){this.shouldShowContextualShortcutsOnKeyPress(e)?this.showContextualShortcutsModal():this.setState(()=>({hasKeyboardFocus:e.isKeyboardFocus}),()=>{this.props.onFocusEnter(e);var t=this.props;const a=t.focusRequestedTs,n=t.setFocusRequestedTs;a&&a===this.list.getActiveItem()&&n(null)})}onFocusLeave(e){this.state.hasKeyboardFocus&&(this.previouslyActiveItem=e.activeItem),this.setState(()=>({hasKeyboardFocus:!1}),()=>{this.props.onFocusLeave(e)})}onItemTabWithin(){this.props.setInitialActiveSection()}scrollToOffset(...e){this.list&&this.list.scrollToOffset(...e)}shouldShowContextualShortcutsOnKeyPress(e){var t=this.props;const a=t.featureMessageNavigationShortcuts,n=t.featureContextualMessageShortcuts,s=t.contextualMessageShortcutsModalWasSeen,r=t.isToastInView;return!!n&&(!s&&(!(e&&!e.isKeyboardFocus)&&((!e||!e.relatedEvent||e.relatedEvent.keyCode!==vT.k)&&((!e||!Object(Nu.a)(e.target))&&(!a||!r)))))}shouldShowContextualShortcutsOnMount(){return this.props.isScreenReaderEnabled&&this.props.featureContextualMessageShortcuts&&!this.props.contextualMessageShortcutsModalWasSeen}shouldShowLimitedHistoryAlert(){var e=this.props;const t=e.isLimited,a=e.isSlackbotIm;return t&&a}shouldShowLimitedHistoryForeword(){var e=this.props;const t=e.isLimited,a=e.isSlackbotIm;return t&&!a}isFirstRowLimitedHistoryForeword(){if(!this.shouldShowLimitedHistoryForeword())return!1;const e=Object(db.a)(this.rows);return e&&"foreword"===e.type}showContextualShortcutsModal(){this.props.openContextualMessageShortcutsModal(),this.props.setUserPrefByApi({pref:"contextual_message_shortcuts_modal_was_seen",value:!0})}requestAround(){if(this.state.isLoading)return!1;if(this.props.reachedEnd)return this.requestOlder();if(this.props.reachedStart)return this.requestNewer();Object(Ot.a)({teamId:this.props.teamId}).info(DU,`requestAround channelId: ${this.props.channelId} isLoading: ${this.state.isLoading} timestamps: ${Object(Hc.a)(this.props.timestamps)} reachedStart: ${this.props.reachedStart} reachedEnd: ${this.props.reachedEnd}`);var e=this.props;const t=e.oldest,a=e.latest,n=e.timestamps,s=e.startTs;if(Object(io.a)(n)&&!s)return this.props.requestHistory({});const r=t||n&&Object(db.a)(n)||s,i=a||n&&Object(Hu.a)(n)||s,o=this.props.requestHistory({latest:r,oldest:i});return o&&(this.prqMetrics.channelSwitch.fetchHistoryState!==ox.a&&(this.prqMetrics.channelSwitch.fetchHistoryState=ox.b),o.then(()=>{this.prqMetrics.channelSwitch.fetchHistoryState=ox.a}),this.setState(()=>({isLoading:!0,isLoadingOlder:!1}))),o}requestOlder(){if(this.state.isLoading)return!1;var e=this.props;const t=e.oldest,a=e.timestamps,n=e.startTs,s=t||a&&Object(db.a)(a)||n,r=this.props.requestHistory({latest:s});return r&&(this.prqMetrics.channelSwitch.fetchHistoryState!==ox.a&&(this.prqMetrics.channelSwitch.fetchHistoryState=ox.b),r.then(()=>{this.prqMetrics.channelSwitch.fetchHistoryState=ox.a}),this.setState(()=>({isLoading:!0,isLoadingOlder:!0}))),r}requestNewer(){if(this.state.isLoading)return!1;var e=this.props;const t=e.latest,a=e.timestamps,n=e.startTs,s=t||a&&Object(Hu.a)(a)||n,r=this.props.requestHistory({oldest:s});return r&&(this.prqMetrics.channelSwitch.fetchHistoryState!==ox.a&&(this.prqMetrics.channelSwitch.fetchHistoryState=ox.b),r.then(()=>{this.prqMetrics.channelSwitch.fetchHistoryState=ox.a}),this.setState(()=>({isLoading:!0,isLoadingOlder:!1}))),r}renderMessage(e,{hasFocus:t,isHovered:a,isExpanded:n,itemId:s}){const r=e.ts,i=e.previousMessageTs,l=Object(Hu.a)(this.props.timestamps),c=r&&r===this.props.highlightTs;if(this.scrollMetricsGatheringEnabled){this.messagesRendered[e.ts]=!0;const t=Object(lo.a)(this.messagesRendered).length;t%this.loadingHistoriesPerHowManyMessages==0&&this.debounceBatchMessagesSeen(),t%this.loadingHistoriesPerHowManyMessagesHighEnd==0&&this.debounceBatchMessagesSeenHighEnd()}return this.props.featureMessageKitInMessagePane?o.a.createElement(IU,{channelId:this.props.channelId,ts:r,key:r,prevTs:i,focused:t,renderActionsOffscreen:this.state.hasKeyboardFocus,theme:this.props.theme,rollup:this.props.rollups[r],parentId:s,isLast:r===l,showingContextBar:this.props.showingContextBar,highlight:c,clearHighlight:this.props.doneHighlighting,latestMessageTsWithReactions:this.props.latestMessageTsWithReactions}):o.a.createElement(_U,{ts:r,key:r,channelId:this.props.channelId,previousMessageTs:i,isLast:r===l,rollup:this.props.rollups[r],setUnreadPoint:this.props.setUnreadPoint,fadeAwayHighlight:c,doneHighlighting:this.props.doneHighlighting,channelType:this.props.channelType,channelSessionId:this.props.channelSessionId,latestMessageTsWithReactions:this.props.latestMessageTsWithReactions,isHovered:a,isThreadExpanded:n,threadListId:this.props.threadListId,messageContainerType:this.props.messageContainerType,renderActions:a||t,hasFocus:t,renderActionsOffscreen:this.state.hasKeyboardFocus,showThreadIfThreadable:this.props.showThreadIfThreadable,parentId:s})}renderForeword(){return o.a.createElement(hU,{key:"message-list-foreword",channelType:this.props.channelType,channelId:this.props.channelId,clientTheme:this.props.clientTheme,hasLimitedHistory:this.shouldShowLimitedHistoryForeword()})}renderRow(e,{hasFocus:t,isHovered:a,isExpanded:n,itemId:s}={}){const r=this.rows[e];if(!r||!r.type)return null;switch(r.type){case"message":return this.renderMessage(r,{hasFocus:t,isHovered:a,isExpanded:n,itemId:s});case"dayDividerLabel":return o.a.createElement(kp,{key:r.day,date:r.day,sticky:this.props.useStickyDayDividers});case"dayDivider":return o.a.createElement(Ep,{key:r.day,date:r.day,isUnread:r.showDayDividerAsUnread,ghost:this.props.isGhostLastRead});case"unread":return o.a.createElement(Op,{key:"unread",ghost:this.props.isGhostLastRead});case"loading":return this.debounceCountHistoryLoadSeen(),o.a.createElement(gb,null);case"loadingSpinner":return o.a.createElement(bb,null);case"foreword":return this.renderForeword({hasFocus:t});case"limited_history":return o.a.createElement(fU,{clientTheme:this.props.clientTheme});default:return null}}isItemAriaExpanded(e,t){var a=this.props;const n=a.channelId,s=a.isThreadable,r=a.currentThreadKey;if(!s)return;const i=this.rows[t];if(!i||!i.type)return;if("message"!==i.type)return;var o=Object($a.a)(r);const l=o.threadTs,c=o.channelId,d=l===e&&n===c;return s({channelId:n,threadTs:e})?d:void 0}getAriaLabelForRow(e){var t=this.props;const a=t.channelId,n=t.makeMessageSummary,s=t.isScreenReaderEnabled;if(!n)return null;const r=this.rows[e];if(!r||!r.type)return null;if("message"!==r.type)return null;const i=r.ts,o=r.previousMessageTs,l=r.isFirstMsgForDay,c=r.isLastMsgForDay,d=r.isFirstUnreadMsg,u=r.day,p=this.props.rollups[i];return this.state.hasKeyboardFocus||s?n({channelId:a,ts:i,isFirstUnreadMsg:d,isFirstMsgForDay:l,isLastMsgForDay:c,previousMessageTs:o,day:u,rollup:p,hasFocus:this.state.hasKeyboardFocus,viewContext:Ln.I.MESSAGE_PANE}):null}UNSAFE_componentWillReceiveProps(e){if(this.setState(t=>e.isLoading===t.isLoading&&e.isLoadingOlder===t.isLoadingOlder?null:(Object(Ot.a)({teamId:this.props.teamId}).info(DU,`componentWillReceiveProps isLoading: ${e.isLoading} isLoadingOlder: ${e.isLoadingOlder} timestamps: ${Object(Hc.a)(e.timestamps)}`),{isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder})),e.channelId!==this.props.channelId||e.startTs!==this.props.startTs||e.highlightTs&&e.highlightTs!==this.props.highlightTs||e.timestamps.length&&!this.props.timestamps.length){this.useAnchor=!0;const t=e.startTs,a=this.props.timestamps,n=e.timestamps;if(Object(rB.a)(t,Object(sB.a)(Object(db.a)(a)),Object(nB.a)(Object(Hu.a)(a)))&&e.channelId===this.props.channelId){const t=Object(NP.a)(n,t=>t<=e.startTs);this.keyToScrollTo=t,this.lazyScroll=e.highlightLazy,this.useAnchor=!1}}e.channelId!==this.props.channelId&&(this.heightCache.invalidate(),this.list&&this.list.resetRendered&&this.list.resetRendered(),Object(Ot.a)({teamId:this.props.teamId}).info(DU,`Switching channels: ${e.channelId} timestamps: ${Object(Hc.a)(e.timestamps)}`)),e.lastReadTs!==this.props.lastReadTs&&(this.unreadIndex=null)}groupTimestampsByDay(e){return Object(Ph.a)(e,e=>Xu(e))}getTimestampsForDays(e){return Object(lo.a)(this.groupTimestampsByDay(e)).sort()}getTimestampOfDayClosestToTop(){const e=this.list.getVisibleRange().start,t=this.rows[e];if(t)return"dayDivider"===t.type?t.day.toString():"dayDividerLabel"===t.type?t.day.toString():"message"===t.type?t.day.ts.toString():void 0}getStartTimestampForDayNavigation(){return this.state.hasKeyboardFocus?Xu(this.list.getInitialActiveItem()):this.getTimestampOfDayClosestToTop()}getTimestampOfPrevDay(){const e=this.getStartTimestampForDayNavigation(),t=this.getTimestampOfFirstMessageForDay(e);if(!t)return e;if(t&&!this.list.isItemInView(t))return e;const a=this.getTimestampsForDays(this.props.timestamps);return a[Object(AP.a)(a,e)-1]}getTimestampOfNextDay(){const e=this.getStartTimestampForDayNavigation(),t=this.getTimestampsForDays(this.props.timestamps),a=t[Object(AP.a)(t,e)+1];return a||(parseInt(e,10)+BU).toString()}getTimestampOfFirstMessageForDay(e){const t=this.getTimestampsForDays(this.props.timestamps),a=Object(AP.a)(t,e);if(a<0)return;if(0===a&&!this.props.reachedStart)return;const n=this.groupTimestampsByDay(this.props.timestamps)[e];return n?n[0]:void 0}jumpToTimestamp({ts:e,offset:t,onJump:a}){Object(kb.a)(a)&&(this.onJump=a),this.props.jumpToTimestamp({ts:e,offset:t})}getPropsForItem({key:e,index:t}){const a=this.rows[t];return a&&a.type?{"aria-label":this.getAriaLabelForRow(t),"aria-expanded":this.isItemAriaExpanded(e,t)}:void 0}render(){if(this.props.featureOfflineMode&&this.props.isOffline&&Object(io.a)(this.props.timestamps))return o.a.createElement(ku,null);const e=this.groupTimestampsByDay(this.props.timestamps),t=Object(lo.a)(e).sort(),a=[],n=[],s=[],r=this.findTimestampClosestToStartTs(),i=this.props.firstUnreadTs;let l=r;this.props.reachedStart&&(n.push(qU),a.push({type:"foreword",ts:qU}),this.shouldShowLimitedHistoryAlert()&&(n.push("limited_history"),a.push({type:"limited_history"}))),this.unreadIndex=null;const c=Object(db.a)(this.props.timestamps)<=this.props.lastReadTs||this.props.reachedStart;Object(Rp.a)(t,(r,o)=>{const d=parseInt(r,10),u=e[r],p=`${r}.${this.props.channelId}`,h=c&&Object(db.a)(u)===i;let m;h&&(this.unreadIndex=a.length,this.props.startTs===this.props.lastReadTs&&(l=p)),a.push({type:"dayDividerLabel",day:d,showDayDividerAsUnread:h}),this.props.useStickyDayDividers&&s.push({key:p,index:n.length}),n.push(p),(o>0||this.props.reachedStart||this.state.degraded)&&(a.push({type:"dayDivider",day:d,showDayDividerAsUnread:h}),n.push(`${r}divider`)),this.state.degraded||this.state.isSelecting||0!==o||!this.state.isLoadingOlder||(n.push("loading"),a.push({type:"loading"})),Object(Rp.a)(u,(e,s)=>{if(c&&0!==s&&e===i){this.unreadIndex=a.length;const e="unreadDivider";n.push(e),a.push({type:"unread",day:d}),this.props.startTs===this.props.lastReadTs&&(l=i)}const r=0===o&&this.props.reachedStart,p=o===t.length-1&&this.props.reachedEnd,h=0===s&&(o>0||this.props.reachedStart),b=s===u.length-1&&(o<t.length-1||this.props.reachedEnd),f=i===e;a.push({type:"message",ts:e,previousMessageTs:m,isFirstMsgForDay:h,isLastMsgForDay:b,isFirstUnreadMsg:f,day:{ts:d,isFirstDay:r,isLastDay:p}}),n.push(e),m=e})}),!this.state.isLoading||this.state.isLoadingOlder||this.props.reachedEnd||this.props.prevReachedEnd||(n.push("loadingSpinner"),a.push({type:"loadingSpinner"})),this.layout.setAnchor(this.useAnchor&&l,this.useAnchor&&this.props.startTsOffset),!this.useAnchor&&this.keyToScrollTo&&Object(dt.a)(this.props.startTsOffset)&&(this.layout.anchorOffset=this.props.startTsOffset),this.keys=n,this.rows=a;const d={firstVisibleUnreadTs:i,isGhostLastRead:this.props.isGhostLastRead,highlightTs:this.props.highlightTs,lastTimestamp:Object(Hu.a)(this.props.timestamps),reachedEnd:this.props.reachedEnd,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:this.props.useStickyDayDividers},u=this.state.degraded?NU:TU,p=this.props.shouldIgnoreScrollKeys,h=[{keys:["command+j","ctrl+j"],handler:this.onJumpToUnreadShortcut},{keys:["shift+pagedown"],handler:this.onShiftPageDown.bind(this),filter:p},{keys:["shift+pageup"],handler:this.onShiftPageUp.bind(this),filter:p},{keys:["right"],handler:this.onArrowKeyRight,filter:this.props.shouldIgnoreArrowKeys}],m=(()=>{if(this.state.isLoading)return null;const e=a[a.length-1],t=e&&e.type;return this.props.startTs===qU||!1===r&&"foreword"===t?qU:null===r&&"message"===t?e.ts:i||(r||null)})();return o.a.createElement(pr.a,null,({width:e,height:t})=>0===e||0===t?null:(e!==this.width&&(this.heightCache.invalidate(),this.width=e),this.height=t,o.a.createElement(u,{ref:this.setListRef,className:"c-message_list",id:this.listId,"aria-label":this.props["aria-label"],height:t,width:e,keys:n,rowRenderer:this.renderRow,layout:this.layout,stickyItems:s,stickyOffsetTop:-21,stickyZIndex:200,loadAround:this.requestAround,loadPre:this.requestOlder,loadPost:this.requestNewer,isLoading:this.state.isLoading,reachedStart:this.props.reachedStart,reachedEnd:this.props.reachedEnd||this.props.prevReachedEnd,fadeScrollbar:!0,onScroll:this.onScroll,onSelectionChange:this.onSelectionChange,onEnd:this.onEnd,onFocusEnter:this.onFocusEnter,onItemTabWithin:this.onItemTabWithin,onFocusLeave:this.onFocusLeave,keyCommands:h,shouldIgnoreScrollKeys:this.props.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:this.props.shouldIgnoreArrowKeys,isFocusableItem:this.isMessage,unrelatedUpdateProps:d,activeItem:this.props.focusRequestedTs,initialActiveItem:m,useAriaApplicationMode:this.props.featureAriaApplicationMode,getPropsForItem:this.getPropsForItem,featureOfflineMode:this.props.featureOfflineMode,isOffline:this.props.isOffline,onItemKeyDown:this.onItemKeyDown})))}}message_list_MessageList.displayName="MessageList";message_list_MessageList.propTypes=AU,message_list_MessageList.defaultProps=RU;const WU=Object(uB.a)(message_list_MessageList),GU=Object(u.b)(e=>({focusLastVisibleMessageInChannel:Object(w.c)(e),featureMessageNavigationShortcuts:Object(m.m)(e,"feature_message_navigation_shortcuts"),featureContextualMessageShortcuts:Object(m.m)(e,"feature_contextual_message_shortcuts"),contextualMessageShortcutsModalWasSeen:Object(ba.k)(e,"contextual_message_shortcuts_modal_was_seen"),isToastInView:Object(_a.f)(e),featureMessageKitInMessagePane:Object(m.m)(e,"feature_message_kit_in_message_pane")}),e=>({setFocusLastVisibleMessageInChannel:(...t)=>e(Object(Sw.h)(...t)),setFocusMessageInput:(...t)=>e(Object(Sw.i)(...t)),openContextualMessageShortcutsModal:(...t)=>e(dB(...t)),setUserPrefByApi:(...t)=>e(Object(Ka.f)(...t))}))(e=>{let t=e.forwardedRef,a=fp()(e,["forwardedRef"]);return o.a.createElement(WU,s()({ref:t},a))});var KU=o.a.forwardRef((e,t)=>o.a.createElement(GU,s()({forwardedRef:t},e))),VU=a("jWJI"),zU=a("JS8a");a("3ise");const $U=new x.b("unavailable_channel"),YU=(l.default.bool.isRequired,l.default.string.isRequired,l.default.bool,({isThread:e,isImOrMpim:t,unavailableTeamId:a})=>{let n;const s=o.a.createElement(Mb.a,{id:a});let r;n=e?$U.t("This thread is currently unavailable"):$U.rt("{teamName} is making changes to their workspace",{teamName:s}),r=e?$U.rt("{teamName} is making changes to their workspace, and this thread will be unavailable until that process is complete.",{teamName:s}):t?$U.t("This conversation will be unavailable until this process is complete."):$U.t("This channel will be unavailable until this process is complete.");const l=cdn_url+"/80588/img/enterprise/unavailable_channel.png";return o.a.createElement(i.Fragment,null,o.a.createElement("img",{className:"p-unavailable_channel_image",src:l,srcSet:`${l}, ${l.replace(".png","@2x.png")} 2x`,alt:""}),o.a.createElement("h2",{className:"p-unavailable_channel_title"},n),o.a.createElement("div",{className:"p-unavailable_channel_content"},r))});YU.displayName="UnavailableChannelBlocker",YU.defaultProps={isThread:!1};var QU=YU,XU=a("c695"),JU=a("YB7p");const ZU=new x.b("unavailable_channel");l.default.bool.isRequired,l.default.string.isRequired,l.default.bool,l.default.object.isRequired,l.default.string.isRequired,l.default.oneOf(Object.values(q.a)).isRequired;class unavailable_channel_reload_UnavailableChannelReload extends i.PureComponent{constructor(e){super(e),this.state={loading:!1},this.handleReload=this.handleReload.bind(this)}handleReload(){var e=this.props;const t=e.channelId,a=e.channelPrivacyType,n=e.unavailableTeamId,s=e.clogger,r=e.isThread;this.setState(()=>({loading:!0}));const i=`UnavailableChannelReload: Remote team ${n} has migrated their data, user triggered client reload`;Object(xr.a)()?Object(JU.a)({reason:i,reasonKey:"unavailable_channel_reload"}):Object(JU.b)({reason:i,reasonKey:"unavailable_channel_reload",noCache:!0}),s.track(de.EventId.CHANNEL_UNAVAILABLE,{channel_id:t,channel_type:t?t.charAt(0):null,channel_privacy_type:a,unavailable_team_id:n,contexts:{ui_context:{action:de.UiAction.CLICK,step:r?de.UiStep.THREAD:de.UiStep.MESSAGE_PANE,ui_element:de.UiElement.BTN_RELOAD}}}),s.sendDataAndEmptyQueue()}render(){var e=this.props;const t=e.isThread,a=e.isImOrMpim,n=e.unavailableTeamId;let s;s=t?ZU.t("Reload Slack to view this thread"):a?ZU.t("Reload Slack to view this conversation"):ZU.t("Reload Slack to view this channel");const r=o.a.createElement(Mb.a,{id:n});let l;l=t?ZU.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this thread.",{teamName:r}):a?ZU.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this conversation.",{teamName:r}):ZU.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this channel.",{teamName:r});const c=cdn_url+"/80588/img/enterprise/unavailable_channel_reload.png";return o.a.createElement(i.Fragment,null,o.a.createElement("img",{className:"p-unavailable_channel_image p-unavailable_channel_image--reload",src:c,srcSet:`${c}, ${c.replace(".png","@2x.png")} 2x`,alt:""}),o.a.createElement("h2",{className:"p-unavailable_channel_title"},s),o.a.createElement("div",{className:"p-unavailable_channel_content"},o.a.createElement("p",null,l),o.a.createElement("div",{className:"align_center"},o.a.createElement(XU.a,{type:"primary",size:"large",onClick:this.handleReload,disabled:this.state.loading,loading:this.state.loading},ZU.t("Reload Slack")))))}}unavailable_channel_reload_UnavailableChannelReload.displayName="UnavailableChannelReload",unavailable_channel_reload_UnavailableChannelReload.defaultProps={isThread:!1};var eq=unavailable_channel_reload_UnavailableChannelReload;l.default.bool.isRequired,l.default.bool.isRequired,l.default.string.isRequired,l.default.bool,l.default.object.isRequired,l.default.string.isRequired,l.default.oneOf(Object.values(q.a)).isRequired;const tq="reload",aq="blocker";class unavailable_channel_UnavailableChannel extends i.PureComponent{componentDidMount(){this.clogImpression()}componentDidUpdate(e){e.isReloadRequired===this.props.isReloadRequired&&e.channelId===this.props.channelId||this.clogImpression()}clogImpression(){var e=this.props;const t=e.channelId,a=e.channelPrivacyType,n=e.unavailableTeamId,s=e.clogger,r=e.isThread,i=e.isReloadRequired;s.track(de.EventId.CHANNEL_UNAVAILABLE,{channel_id:t,channel_type:t?t.charAt(0):null,channel_privacy_type:a,unavailable_team_id:n,contexts:{ui_context:{action:de.UiAction.IMPRESSION,step:r?de.UiStep.THREAD:de.UiStep.MESSAGE_PANE,ui_properties:{element_name:i?tq:aq}}}})}render(){var e=this.props;const t=e.isReloadRequired,a=e.isThread,n=d()("p-unavailable_channel",{"p-unavailable_channel_thread":a});return o.a.createElement("div",{className:n},t?o.a.createElement(eq,this.props):o.a.createElement(QU,this.props))}}unavailable_channel_UnavailableChannel.displayName="UnavailableChannel",unavailable_channel_UnavailableChannel.defaultProps={isThread:!1};var nq=Object(u.b)((e,{unavailableTeamId:t,channelId:a})=>{const n=Object(Se.i)(e,t),s=Object(B.e)(e,a);return{isReloadRequired:Object(xe.a)(n),isImOrMpim:Object(q.ib)(s)||Object(q.qb)(s),clogger:Object(ie.a)({state:e}),channelId:s.id,channelPrivacyType:Object(q.t)(s)}})(unavailable_channel_UnavailableChannel);a("qfOp");const sq=new x.b("messages");l.default.string.isRequired,l.default.string.isRequired,l.default.func.isRequired;class archives_banner_ArchivesBanner extends i.PureComponent{render(){const e=Object(Ji.a)(this.props.firstTimestamp,{shortenMonth:!0}),t=Object(Ji.a)(this.props.lastTimestamp,{shortenMonth:!0});return o.a.createElement("div",{className:"p-archives_banner"},o.a.createElement("span",{className:"p-archives_banner__date_range"},sq.t("Viewing archives from {rangeStart} - {rangeEnd}",{rangeStart:e,rangeEnd:t})),o.a.createElement(_e.c,{className:"p-archives_banner__jump",onClick:this.props.jumpToRecent,"data-qa":"archives_banner"},sq.t("Jump to recent messages"),o.a.createElement(bn.a,{type:"arrow_down"})))}}archives_banner_ArchivesBanner.displayName="ArchivesBanner",archives_banner_ArchivesBanner.defaultProps={};const rq=new x.b("messages"),iq=3e3,oq=100,lq=(l.default.bool.isRequired,l.default.number,l.default.oneOfType([l.default.string,l.default.number]),l.default.bool,l.default.bool,l.default.string,l.default.bool,l.default.oneOf(Object(Z.a)(UU)),l.default.func,l.default.func,l.default.func,{displayCount:0,since:null,do24hrTime:!1,known:!1,channelId:null,ghost:!1,unreadPlacement:UU.VISIBLE,jumpToUnread:r.a,markMostRecentMsgRead:r.a,onHide:r.a});class message_pane_unread_banner_UnreadBanner extends i.PureComponent{constructor(e){super(e),this.startFade=this.startFade.bind(this),this.onAnimationTick=this.onAnimationTick.bind(this),this.onAnimationEnd=this.onAnimationEnd.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.jumpOrMark=this.jumpOrMark.bind(this),this.markAsRead=this.markAsRead.bind(this),this.animation=null,this.state={hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1}}componentWillUnmount(){this.animation&&this.animation.cancel()}onAnimationEnd(){this.setState(()=>({hasUnreads:!1,opacity:1}),()=>{this.props.onHide()})}onAnimationTick({value:e,nextTick:t}){this.animation&&(this.setState(()=>({opacity:e})),t())}onKeyDown(e){const t=[vT.e,vT.j];Object(fo.a)(t,e.keyCode)&&this.jumpOrMark(e)}UNSAFE_componentWillReceiveProps(e){if(e.channelId!==this.props.channelId&&this.animation&&this.animation.cancel(),!this.state.hasUnreads||e.hasUnreads)this.setState(()=>({hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1}));else{const t=e.ghost?iq:0;this.startFade(t)}}jumpOrMark(e){this.state.unreadPlacement===UU.VISIBLE?this.markAsRead(e):this.props.jumpToUnread(e)}makeJumpAriaLabel(){if(!Object(wU.a)())return;const e=Object(ue.q)()?rq.t("Cmd"):rq.t("Ctrl");return rq.t("Jump to first unread message ({cmdButton} J)",{cmdButton:e,fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})}makeJumpLabel(){if(!Object(wU.a)())return rq.t("Jump");const e=Object(ue.q)()?rq.t("Cmd"):rq.t("Ctrl");return rq.rt("Jump <span>({cmdButton} + J)</span>",{cmdButton:e},({text:e,key:t})=>o.a.createElement("span",{key:t,className:"normal"},e))}markAsRead(e){e.stopPropagation(),Object(Ot.b)().action("UNREAD-BANNER",`Mark ${this.props.channelId} read`),this.props.markMostRecentMsgRead({channelId:this.props.channelId,reason:Ln.w.CLICKED}),this.animation&&this.animation.cancel(),this.onAnimationEnd()}startFade(e){this.animation=Object(ix.a)({delay:e,fromValue:1,toValue:0,duration:oq,easing:"easeInQuad",onTick:this.onAnimationTick,onComplete:this.onAnimationEnd})}renderClose(){const e=d()("p-message_pane__unread_banner__close",{"p-message_pane__unread_banner__close--detached":this.state.unreadPlacement!==UU.VISIBLE});return o.a.createElement(Xr.c,{tip:rq.t("Mark as read (esc)"),position:"bottom-right"},o.a.createElement(_e.c,{className:e,onClick:this.markAsRead,"aria-label":rq.t("Mark as read")},o.a.createElement("span",{className:"p-message_pane__unread_banner__close__label"},rq.t("Mark as read")),o.a.createElement(bn.a,{type:"times_small",className:"p-message_pane__unread_banner__close__icon"})))}renderJump(){const e=this.state.unreadPlacement;if(e===UU.VISIBLE)return null;const t=e===UU.ABOVE?"arrow_up":"arrow_down",a=this.makeJumpLabel(),n=this.makeJumpAriaLabel();return o.a.createElement(_e.c,{"aria-label":n,onMouseDown:this.jumpOrMark,onKeyDown:this.onKeyDown,className:"p-message_pane__unread_banner__jump"},o.a.createElement(bn.a,{type:t,className:"p-message_pane__unread_banner__jump__arrow"}),a)}render(){var e=this.state;const t=e.hasUnreads,a=e.since,n=e.displayCount;var s=this.props;const r=s.do24hrTime,i=s.known;if(!t||!a)return null;const l=Math.floor(parseFloat(a));if(!l)return null;const c=Object(Ji.a)(l,{excludeYear:!0}),d=Object(n_.a)(l,{do24hrTime:r}),u=i?"":"+";let p=n;!i&&p>10&&(p=10*Math.floor(p/10));let h=rq.t("{count, plural, =1 {#{certainty} new message} other {#{certainty} new messages}} since {time} on {date}",{certainty:u,count:p,time:d,date:c});return p&&(1!==p||i)||(h=rq.t("New messages since {time} on {date}",{time:d,date:c})),o.a.createElement("div",{className:"p-message_pane__unread_banner p-message_pane__banner"},o.a.createElement("div",{className:"p-message_pane__unread_banner__banner"},this.renderJump(),o.a.createElement(_e.c,{className:"p-message_pane__unread_banner__msg",onMouseDown:this.jumpOrMark,onKeyDown:this.jumpOrMark,style:{opacity:this.state.opacity}},h)),this.renderClose())}}message_pane_unread_banner_UnreadBanner.displayName="UnreadBanner",message_pane_unread_banner_UnreadBanner.defaultProps=lq;var cq=Object(u.b)((e,t)=>{let a=t.since;"0000000000.000000"===a&&(a=Object(B.e)(e,t.channelId).created);return{do24hrTime:Object(ba.k)(e,"time24"),since:a}})(message_pane_unread_banner_UnreadBanner),dq=a("e9Nc"),uq=a("Rjjz");a("Rmar");const pq=new x.b("search"),hq=(l.default.object.isRequired,l.default.bool.isRequired,l.default.func,l.default.object,l.default.func,l.default.func,l.default.func,l.default.func,l.default.object,{searchInProductEducationDismiss:r.a,channelForCurrentInFilterQuery:null,openFromScrollSearchTipBanner:r.a,incrementScrollerSearchInProductEducationDismissalCount:r.a,recordLastDismissedScrollSearchTooltipTimestamp:r.a,refocusList:r.a,messageListRef:null});class search_tip_banner_SearchTipBanner extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onClose","onClickBannerContent","onKeyPressedUp"]),this.searchTipBannerRef=o.a.createRef()}componentDidMount(){this.keyCommands=this.initKeyCommands()}componentDidUpdate(e){this.props.showSearchScrollbackTip&&!e.showSearchScrollbackTip&&this.props.clogger.track("SEARCH_SCROLL_TIP",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id})}componentWillUnmount(){this.keyCommands&&this.keyCommands.reset()}onClose(e){e.stopPropagation(),e.preventDefault(),this.props.clogger.track("SEARCH_SCROLL_TIP_DISMISS",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id}),this.previousFocus&&document.activeElement!==this.previousFocus&&this.previousFocus.focus(),this.props.recordLastDismissedScrollSearchTooltipTimestamp(),this.props.incrementScrollerSearchInProductEducationDismissalCount(),this.props.searchInProductEducationDismiss(),this.props.refocusList()}onEscape(e){"Escape"===e.key&&this.onClose(e)}onClickBannerContent(e){e.stopPropagation(),e.preventDefault(),this.props.clogger.track("SEARCH_SCROLL_TIP_CLICK",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id}),this.props.openFromScrollSearchTipBanner()}onKeyPressedUp(){this.props.showSearchScrollbackTip&&this.searchTipBannerRef.current&&!this.searchTipBannerRef.current.contains(document.activeElement)&&this.props.messageListRef.current.contains(document.activeElement)&&(this.previousFocus=document.activeElement,this.searchTipBannerRef.current.focus())}initKeyCommands(){const e=new Au.a;return e.bindAll([{keys:["up"],handler:this.onKeyPressedUp}]),e}render(){return this.props.showSearchScrollbackTip&&o.a.createElement("div",{ref:this.searchTipBannerRef,className:"p-message_pane__search_tip_banner",role:"presentation",tabIndex:0,onKeyDown:e=>this.onEscape(e),"aria-label":pq.t("Tip: Try command F to search this channel.")},o.a.createElement(_e.c,{className:"p-message_pane__search_tip_banner_content",onClick:this.onClickBannerContent,tabIndex:-1,role:"presentation"},pq.rt("<strong>Tip</strong>: Try {command}{f} to search this channel.",{fallbackHash:"f74de2cccbeb348dd34450e1fc92a0fd0f502e71",command:o.a.createElement(Da.a,{label:Object(ue.q)()?"Cmd":"Ctrl",slim:!0}),f:o.a.createElement(Da.a,{label:"F",slim:!0})})),o.a.createElement(Xr.c,{tip:pq.t("Close",{fallbackHash:"1f863990d6ec5b308a2330f10e271f087ccf0bf7"})},o.a.createElement(_e.c,{className:"p-message_pane__search_tip_banner_action","aria-label":pq.t("Close",{ns:"toast"}),onClick:this.onClose,onKeyDown:e=>this.onEscape(e)},o.a.createElement(bn.b,{inline:!0,type:"times"}))))}}search_tip_banner_SearchTipBanner.displayName="SearchTipBanner",search_tip_banner_SearchTipBanner.defaultProps=hq;const mq={searchInProductEducationDismiss:yt.c,openFromScrollSearchTipBanner:oC.h,incrementScrollerSearchInProductEducationDismissalCount:uq.f,recordLastDismissedScrollSearchTooltipTimestamp:uq.m,setFocusRequestedTs:Sw.j};var bq=Object(u.b)(e=>({showSearchScrollbackTip:Object(yt.f)(e),clogger:Object(ie.a)({state:e}),channelForCurrentInFilterQuery:Object(dq.a)(e),appearedTime:Object(yt.b)(e)}),mq)(search_tip_banner_SearchTipBanner),fq=a("qgNY");const _q=new x.b("messages");l.default.func.isRequired,l.default.bool;class briefings_back_button_BriefingsBackButton extends i.PureComponent{constructor(e){super(e),this.backToBriefings=this.backToBriefings.bind(this)}backToBriefings(){this.props.displayModelOrViewById({id:"Vall_unreads"})}render(){return this.props.isHighlightsBackButtonVisible?o.a.createElement(_e.d,{type:"outline",size:"small",className:"p-message_pane__briefings_back_button",onClick:this.backToBriefings},o.a.createElement(bn.b,{className:"p-message_pane__briefings_back_button_icon",type:"arrow-left"}),_q.t("Back to my highlights")):null}}briefings_back_button_BriefingsBackButton.displayName="BriefingsBackButton",briefings_back_button_BriefingsBackButton.defaultProps={isHighlightsBackButtonVisible:!1};var gq=Object(u.b)(e=>({isHighlightsBackButtonVisible:Object(w.q)(e)}),e=>({displayModelOrViewById:({id:t}={})=>e(Object(fq.a)({id:t}))}))(briefings_back_button_BriefingsBackButton);const yq=Object(re.a)()?Object(H.a)(KU,"MessagePane",{index:0}):KU,Oq=(l.default.object,l.default.object,l.default.string,l.default.string,l.default.oneOf(["channel","private","im","mpim"]),l.default.oneOf(["light","dense"]),l.default.arrayOf(l.default.string),l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.string,l.default.func,l.default.func,l.default.func,l.default.func,l.default.string,l.default.bool,l.default.number,l.default.bool,l.default.string,l.default.number,l.default.string,l.default.bool,l.default.string,l.default.objectOf(Ku.a.Rollup()),l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.string,l.default.string,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.string,l.default.string,l.default.object,l.default.bool,l.default.func,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.bool,l.default.number,l.default.number,l.default.func,l.default.bool,l.default.func,l.default.func,l.default.string,l.default.func,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.object.isRequired,l.default.func,l.default.bool,l.default.oneOf(["warm","cold"]),l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.string,l.default.string,l.default.bool,{logger:{error:r.a},clogger:{track:r.a},channelId:null,channelDisplayName:void 0,type:"channel",theme:"light",timestamps:[],reachedStart:!1,reachedEnd:!1,prevReachedEnd:!1,oldest:void 0,latest:void 0,fetchHistory:r.a,fetchSliHighlights:r.a,onMount:r.a,callAppHomeOpenEventByChannelId:r.a,lastReadTs:void 0,isGhostLastRead:!1,unreadCount:0,unreadCountKnown:!1,startTs:null,startTsOffset:null,highlightTs:null,highlightLazy:void 0,focusRequestedTs:void 0,rollups:null,isLoading:!1,isLoadingOlder:!1,setUnreadPoint:r.a,markMostRecentMsgRead:r.a,setUnreadLineVisibility:r.a,clearHighlightTs:r.a,jumpToTimestamp:r.a,saveScrollmark:r.a,isArchived:!1,isLimited:!1,isSlackbotIm:!1,isAppIm:!1,overlayVisible:!1,channelSessionId:null,prevChannelSwitchTs:null,newxpOnboardingStep:null,firstUnreadTs:null,featureTinyspeck:!1,featureClassicNav:!1,featureAriaApplicationMode:!1,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,hasMessagePaneUnmounted:!1,setMessagePaneHasUnmounted:r.a,currentUserId:null,isAppSpaceOpen:!1,isShared:!1,isOrgShared:!1,isYou:!1,isMuted:!1,hasUnreads:!1,hasDraft:!1,badgeCount:0,screenReaderOverride:void 0,windowLastBlurEvent:null,windowLastFocusEvent:null,makeMessageSummary:void 0,isScreenReaderEnabled:!1,setFocusRequestedTs:r.a,showThreadIfThreadable:r.a,currentThreadKey:void 0,isThreadable:r.a,unavailableTeamId:"",canPostInChannel:!0,featureAnnounceOnly:!1,featureSonicInputs:!1,featureAppHome:!1,searchInProductEducationReset:r.a,bootInFlight:!1,bootType:null,isFileExpanding:!1,featureOfflineMode:!1,isOffline:!1,userAttentionIsOnChat:!1,composerVisible:!1,clientTheme:"light",impressionLoggingWebGroup:"control",latestMessageTsWithReactions:null,showingContextBar:!1});class message_pane_BaseMessagePane extends i.PureComponent{constructor(e){super(e),this.list=null,this.onFocusEnter=this.onFocusEnter.bind(this),this.onFocusLeave=this.onFocusLeave.bind(this),this.onVisibleRowsChanged=this.onVisibleRowsChanged.bind(this),this.onUnreadBannerHide=this.onUnreadBannerHide.bind(this),this.setListRef=this.setListRef.bind(this),this.shouldIgnoreScrollKeys=this.shouldIgnoreScrollKeys.bind(this),this.shouldIgnoreArrowKeys=this.shouldIgnoreArrowKeys.bind(this),this.requestHistory=this.requestHistory.bind(this),this.jumpToMostRecent=this.jumpToMostRecent.bind(this),this.jumpToUnread=this.jumpToUnread.bind(this),this.focus=this.focus.bind(this),this.renderSearchScrollbackTip=this.renderSearchScrollbackTip.bind(this),this.messageListRef=o.a.createRef(),this.state={showingArchiveBanner:!1,showingUnreadBanner:!1,unreadPlacement:UU.VISIBLE},this.historyRateLimiter=new HistoryRateLimiter,this.prqMetrics={usableVisible:{}},this.sendSessionFrameStats=this.sendSessionFrameStats.bind(this),this.recordSessionFrameStats=this.recordSessionFrameStats.bind(this),this.attachMessageImpressionsLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger)}componentDidMount(){this.props.onMount();const e=!!this.props.timestamps.length,t=!(!this.props.unreadCount&&!this.props.unreadCountKnown);e&&t&&("channel"===this.props.type||"private"===this.props.type)&&this.props.fetchSliHighlights({channelId:this.props.channelId,timestamps:Object(_n.a)(this.props.timestamps,e=>e>this.props.lastReadTs),lastReadTs:this.props.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs}),this.props.isAppIm&&this.logAppHomeRequest(this.props.channelId,"messages"),this.recordAndTrackTimeToVisible(),document.hasFocus()?this.recordSessionFrameStats():window.addEventListener("focus",this.recordSessionFrameStats)}componentDidUpdate(){if(this.list){const e=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(e)}(!0===this.props.reachedStart&&!0===this.props.reachedEnd||this.props.timestamps.length>0)&&this.recordAndTrackTimeToUsable(de.TimingStatus.COMPLETED)}componentWillUnmount(){if(Object(re.a)()){const e=this.list&&this.list.getScrollmark(),t=this.props.channelId;this.props.saveScrollmark({channelId:t,scrollmark:e})}this.sendSessionFrameStats(),window.removeEventListener("focus",this.recordSessionFrameStats),this.props.setMessagePaneHasUnmounted(!0);try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",e)}}onFocusEnter(e){this.hasFocus=!0,this.hasKeyboardFocus=e.isKeyboardFocus}onFocusLeave(){this.hasFocus=!1,this.hasKeyboardFocus=!1}onUnreadBannerHide(){this.setState(()=>({showingUnreadBanner:!1}))}onVisibleRowsChanged(e,t){if(!this.list)return;const a=this.getUnreadLinePlacement();this.setState(()=>({unreadPlacement:a}));const n=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(n);try{this.messageImpressionLogger.setCurrentlyVisibleMessages(t.filter(e=>"message"===e.type).map(e=>({ts:e.ts,channel:this.props.channelId})))}catch(s){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",s)}this.list.isAtBottom()&&this.props.searchInProductEducationReset()}getUnreadBannerDisplayCount(){var e=this.props;const t=e.timestamps,a=e.lastReadTs,n=e.unreadCount,s=e.reachedEnd;return t.length&&s?t.filter(e=>e>a).length:n}getUnreadLinePlacement(){return 1===this.props.unreadCount&&!this.props.unreadCountKnown||!this.list?UU.VISIBLE:this.list.getUnreadLinePlacement()}setListRef(e){this.list=e}componentDidCatch(e){this.setState(()=>({caughtError:!0})),this.props.logger.error("MessagePane componentDidCatch:",e,"message_pane_componentDidCatch")}UNSAFE_componentWillReceiveProps(e){const t=this.props.channelId;if(this.setState(t=>{const a=this.getUnreadLinePlacement();if(!e.isLoading&&!Object(io.a)(e.timestamps)){const n=!1===e.reachedEnd&&!e.prevReachedEnd;if(n!==t.showingArchiveBanner)return s()({},t,{unreadPlacement:a,showingArchiveBanner:n})}return t.unreadPlacement!==a?s()({},t,{unreadPlacement:a}):t}),this.setState(e=>{const t=this.getUnreadBannerDisplayCount()>0;return s()({},e,{showingUnreadBanner:t})}),this.setState(e=>{const t=this.getUnreadBannerDisplayCount()>0;return s()({},e,{showingUnreadBanner:t})}),t&&e.channelId!==t){try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(r){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",r)}const a=this.list&&this.list.getScrollmark();this.props.saveScrollmark({channelId:t,scrollmark:a}),this.historyRateLimiter.reset(),this.recordAndTrackTimeToUsable(de.TimingStatus.ABANDONED),this.state.caughtError&&this.setState(()=>({caughtError:!1})),e.isAppIm&&this.logAppHomeRequest(e.channelId,"messages")}e.channelId===t&&e.isAppIm!==this.props.isAppIm&&e.isAppIm&&this.logAppHomeRequest(e.channelId,"messages");const a=this.props.timestamps.length!==e.timestamps.length,n=this.props.unreadCount!==e.unreadCount||this.props.unreadCountKnown!==e.unreadCountKnown;!e.channelId||!a&&!n||"channel"!==e.type&&"private"!==e.type||this.props.fetchSliHighlights({channelId:e.channelId,timestamps:Object(_n.a)(e.timestamps,t=>t>e.lastReadTs),lastReadTs:e.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs}),e.teamId!==this.props.teamId&&this.attachMessageImpressionsLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger)}attachMessageImpressionsLogger(e,t,a){if(this.messageImpressionLogger)try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(n){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",n)}this.messageImpressionLogger=new message_impression_logger_MessageImpressionLogger({teamId:e,experimentGroup:t,clogger:a,messageViewLocation:lp.CHANNEL})}blur(){this.list.blur()}focus(){this.list.focus()}isUnreadLineVisible(){var e=this.props;const t=e.isGhostLastRead,a=e.unreadCount,n=e.reachedEnd;return!e.isLoading&&(!t&&this.list.getUnreadLinePlacement()===UU.VISIBLE||!(a||!n||!this.list.isAtBottom()))}jumpToMostRecent(){this.props.jumpToTimestamp({ts:null})}jumpToUnread(e){this.list.jumpToUnread(e)}logAppHomeRequest(e,t){this.props.featureAppHome||this.props.callAppHomeOpenEventByChannelId({channelId:e,appHomeSection:t})}recordAndTrackTimeToUsable(e){if(Object(re.a)()&&this.props.bootInFlight)return void(this.staleTimestamps||(this.staleTimestamps=this.props.timestamps));if(0===Object.keys(this.prqMetrics.usableVisible).length)return;if(0!==this.props.windowLastBlurEvent)return void(this.prqMetrics.usableVisible={});if(Object(re.a)()){if(!Object(b.g)(Object(p.getStateForClientStore)()))return;Object(p.dispatchForClientStore)(Object(b.c)(!1))}const t=this.props.telemeter.measure("navigationStart","prq_time_to_usable",null,{return_unprocessed:!0}).unprocessed;Object(re.a)()&&this.props.telemeter.store(`prq_time_to_usable_${this.props.bootType}`,t),!!this.staleTimestamps&&!Object(WD.a)(this.props.timestamps.sort(),this.staleTimestamps.sort())&&this.props.telemeter.count("prq_time_to_usable_required_sync"),Object(ox.i)(t,"APP_ICON",!0,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,e),this.prqMetrics.usableVisible={},this.props.logger.info("PERF",`Logged time to usable (TTU): ${t}`)}recordAndTrackTimeToVisible(){if(this.props.hasMessagePaneUnmounted&&!this.props.bootInFlight)return;if(0!==this.props.windowLastBlurEvent)return void(this.prqMetrics.usableVisible={});if(Object(re.a)()){if(!Object(b.h)(Object(p.getStateForClientStore)()))return;Object(p.dispatchForClientStore)(Object(b.d)(!1))}const e=this.props.telemeter.measure("navigationStart","prq_time_to_visible",null,{return_unprocessed:!0}).unprocessed;Object(re.a)()&&this.props.telemeter.store(`prq_time_to_visible_${this.props.bootType}`,e),this.prqMetrics.usableVisible={[this.props.channelId]:e},Object(ox.j)(e,"APP_ICON",!1,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId),this.props.setMessagePaneHasUnmounted(!0),this.props.logger.info("PERF",`Logged time to visible (TTV): ${e}`)}recordSessionFrameStats(){window.removeEventListener("focus",this.recordSessionFrameStats),window.addEventListener("blur",this.sendSessionFrameStats),window.addEventListener("beforeunload",this.sendSessionFrameStats),Object(ox.e)(this.props.teamId,this.props.enterpriseId,de.EventId.PRQ_SESSION_FRAME_STATS)&&ZD()}requestHistory({oldest:e,latest:t}){var a=this.props;const n=a.channelId,s=a.type,r=a.reachedStart,i=a.reachedEnd,o=a.logger;if(r&&i)return!1;let l=e,c=t;if(c&&r){if(!l)return!1;c=null}if(l&&i){if(!c)return!1;l=null}if(this.historyRateLimiter.isRequestPending({oldest:e,latest:t}))return!1;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:e,latest:t}))return this.beaconedRateLimit?o.warn("MESSAGE_PANE",`message_pane_request_rate_limited ${n} ${e}_${t}`):(o.error({channelId:n,latestTs:c,oldestTs:l},"message_pane_request_rate_limited"),this.beaconedRateLimit=!0),!1;this.beaconedRateLimit=!1;const d=this.props.fetchHistory({channelId:n,type:s,oldest:l,latest:c,reason:"message-pane/requestHistory"});return d&&this.historyRateLimiter.logHistoryRequest({oldest:l,latest:c,promise:d}),d}sendSessionFrameStats(){if(window.addEventListener("focus",this.recordSessionFrameStats),window.removeEventListener("blur",this.sendSessionFrameStats),window.removeEventListener("beforeunload",this.sendSessionFrameStats),!tB())return;eB();const e=aB();0!==e.durationMs&&Object(ox.h)(e.durationMs,e.histFrameRenderTime,e.histJankyWindows,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId)}shouldIgnoreArrowKeys({target:e}){const t=document.querySelector(".client_channels_list_container"),a=document.getElementById("col_flex"),n=t&&t.contains(e),s=a&&a.contains(e);return!(this.props.featureSonicInputs?this.props.userAttentionIsOnChat:Object(Tu.f)())||s||n||Object(zU.b)()||!this.hasKeyboardFocus}shouldIgnoreScrollKeys({target:e}){const t=e===document.body,a=this.hasFocus;let n=Object(Tu.e)();var s=this.props;const r=s.channelId;if(s.featureSonicInputs){const e=Object(Rr.a)({viewContext:Ln.I.MESSAGE_PANE,channelId:r});n=!!e&&e.hasFocus()}return!(t||a||n)}renderArchivesBanner(){if(!this.state.showingArchiveBanner)return null;const e=this.props.timestamps;return Object(io.a)(e)?null:o.a.createElement(archives_banner_ArchivesBanner,{firstTimestamp:Object(db.a)(e),lastTimestamp:Object(Hu.a)(e),jumpToRecent:this.jumpToMostRecent})}renderDegradedBanner(){var e=this.props;const t=e.newxpOnboardingStep;return e.overlayVisible?null:t?null:o.a.createElement(Eo.a,null,o.a.createElement(Bo,null))}renderMessagePaneBannerContainer(){var e=this.props;const t=e.newxpOnboardingStep;return e.overlayVisible?null:t?null:o.a.createElement(Cu,null)}renderSearchScrollbackTip(){return o.a.createElement(bq,{messageListRef:this.messageListRef,refocusList:()=>this.focus()})}renderUnreadBanner(){var e=this.props;const t=e.unreadCount,a=e.unreadCountKnown,n=e.lastReadTs,s=e.channelId,r=e.isGhostLastRead,i=e.markMostRecentMsgRead,l=e.newxpOnboardingStep,c=e.overlayVisible,d=e.isArchived;return c?null:l&&l!==uU.CANCELLED&&l!==uU.COMPLETE?null:d?null:o.a.createElement(cq,{channelId:s,hasUnreads:t>0,displayCount:this.getUnreadBannerDisplayCount(),known:a,since:n,ghost:r,unreadPlacement:this.state.unreadPlacement,jumpToUnread:this.jumpToUnread,markMostRecentMsgRead:i,onHide:this.onUnreadBannerHide})}render(){if(this.props.isAppSpaceOpen)return null;if(this.state.caughtError)return null;if(this.props.newxpOnboardingStep===uU.START)return o.a.createElement(pU,{step:this.props.newxpOnboardingStep});if(this.props.unavailableTeamId)return o.a.createElement(nq,{channelId:this.props.channelId,unavailableTeamId:this.props.unavailableTeamId});if(!this.props.channelId)return null;const e=ZS.a.msie||ZS.a.msedge,t=!this.props.overlayVisible&&!e,a=d()("p-message_pane",{"p-message_pane--ie":e,"p-message_pane--classic-nav":Object(re.a)()&&this.props.featureClassicNav});var n=this.props;const s=n.type,r=n.channelDisplayName,i=n.isShared,l=n.isOrgShared,c=n.isYou,u=n.isMuted,p=n.hasUnreads,h=n.hasDraft,m=n.isArchived,b=n.unreadCount,f=n.badgeCount,_=n.canPostInChannel,g=n.featureAnnounceOnly,y=n.isFileExpanding,O=n.userAttentionIsOnChat,C=n.composerVisible,v=n.clientTheme,E=n.latestMessageTsWithReactions,k=Nx({type:s,displayName:r,isShared:i,isOrgShared:l,isYou:c,isMuted:u,hasUnreads:p,hasDraft:h,isArchived:m,unreadCount:b,badgeCount:f,canPost:_,featureAnnounceOnly:g,isSelected:!1,userActive:!1,isTyping:!1}),S=Object($a.e)(this.props.currentThreadKey),j=o.a.createElement("div",{ref:this.messageListRef,className:a,"data-qa":"message_pane"},o.a.createElement("div",{className:"p-message_pane__top_banners"},o.a.createElement(vo,null),this.renderDegradedBanner(),o.a.createElement(gq,null),this.renderUnreadBanner(),this.renderSearchScrollbackTip()),this.renderMessagePaneBannerContainer(),o.a.createElement(yq,{ref:this.setListRef,channelId:this.props.channelId,"aria-label":k,timestamps:this.props.timestamps,startTs:this.props.startTs,startTsOffset:this.props.startTsOffset,shouldIgnoreScrollKeys:this.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:this.shouldIgnoreArrowKeys,highlightTs:this.props.highlightTs,highlightLazy:this.props.highlightLazy,focusRequestedTs:this.props.focusRequestedTs,requestHistory:this.requestHistory,lastReadTs:this.props.lastReadTs,isGhostLastRead:this.props.isGhostLastRead,rollups:this.props.rollups,isLoading:this.props.isLoading,isLoadingOlder:this.props.isLoadingOlder,setUnreadPoint:this.props.setUnreadPoint,reachedStart:this.props.reachedStart,reachedEnd:this.props.reachedEnd,prevReachedEnd:this.props.prevReachedEnd,oldest:this.props.oldest,latest:this.props.latest,onVisibleRowsChanged:this.onVisibleRowsChanged,doneHighlighting:this.props.clearHighlightTs,channelType:this.props.type,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:t,theme:this.props.theme,channelSessionId:this.props.channelSessionId,firstUnreadTs:this.props.firstUnreadTs,messageContainerType:Ln.I.MESSAGE_PANE,featureTinyspeck:this.props.featureTinyspeck,featureAriaApplicationMode:this.props.featureAriaApplicationMode,teamId:this.props.teamId,enterpriseId:this.props.enterpriseId,sessionId:this.props.sessionId,msgTriggers:this.props.msgTriggers,windowLastFocusEvent:this.props.windowLastFocusEvent,currentUserId:this.props.currentUserId,screenReaderOverride:this.props.screenReaderOverride,jumpToTimestamp:this.props.jumpToTimestamp,makeMessageSummary:this.props.makeMessageSummary,isScreenReaderEnabled:this.props.isScreenReaderEnabled,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,isBannerVisible:this.state.showingUnreadBanner,setFocusRequestedTs:this.props.setFocusRequestedTs,showThreadIfThreadable:this.props.showThreadIfThreadable,currentThreadKey:this.props.currentThreadKey,isThreadable:this.props.isThreadable,threadListId:S,isFileExpanding:y,featureOfflineMode:this.props.featureOfflineMode,isOffline:this.props.isOffline,userAttentionIsOnChat:O,composerVisible:C,clientTheme:v,latestMessageTsWithReactions:E,showingContextBar:this.props.showingContextBar}),this.renderArchivesBanner());return Object(re.a)()?j:o.a.createElement(Sp.a,{component:this,order:0},j)}}message_pane_BaseMessagePane.displayName="BaseMessagePane",message_pane_BaseMessagePane.defaultProps=Oq;var Cq=Object(VU.a)(message_pane_BaseMessagePane,{updateStore:({instance:e,dispatch:t})=>{const a=e.list&&e.list.getScrollmark();t(FD({channelId:e.props.channelId,scrollmark:a}))}});const vq=Object(yy.createSelectorCreator)(yy.defaultMemoize,zf.a),Eq=vq([e=>e,(e,t)=>t,(e,t,a)=>a],({timestamps:e,start:t,end:a,reachedStart:n,reachedEnd:s,prevReachedEnd:r},i,o)=>{if(!s&&!r&&e&&e.length-Object(LD.a)(e,o)<20)return{messages:[],rollups:{},reachedStart:!1,reachedEnd:!1};const l=Object(xD.a)(Object(ht.a)(e,e=>i[e]),$e.fb);var c=Object(Pp.a)(l);const d=c.rollups,u=c.messages;return{messages:u,timestamps:Object(ht.a)(u,e=>e.ts),rollups:d,reachedStart:n,reachedEnd:s,prevReachedEnd:r,oldest:t,latest:a}});const kq={fetchHistory:Ut,fetchSliHighlights:BD.c,setUnreadPoint:wi.setUnreadPoint,markMostRecentMsgRead:wi.markMostRecentMsgRead,setUnreadLineVisibility:function(e){return(t,a)=>{const n=Object(w.s)(a());n!==e&&(Object(Ot.a)({getState:a}).info("CHECK-UNREADS",`unreadLineVisible updated: ${n} -> ${e}`),t(Object(Sw.p)(e)))}},clearHighlightTs:Sw.a,jumpToTimestamp:Sw.c,saveScrollmark:FD,onMount:DD.b,setMessagePaneHasUnmounted:Sw.m,makeMessageSummary:Zu,setFocusRequestedTs:Sw.j,callAppHomeOpenEventByChannelId:L.b,isThreadable:(...e)=>(t,a)=>Object($e.vb)(a(),...e),showThreadIfThreadable:Gu.m,searchInProductEducationReset:yt.e};var Sq=Object(u.b)((e,t)=>{const a=t.channelId||Object(_.a)(e),n=Object(B.e)(e,a),s=Object(ha.c)(e,"context_bar"),r=Object(m.m)(e,"feature_tinyspeck"),i=Object(m.m)(e,"feature_classic_nav"),o=Object(m.m)(e,"feature_aria_application_mode"),l=Object(m.d)(e),c=Object(h.b)(e),d=Object(h.a)(e),u=Object(w.b)(e),p=Object(oM.b)(e),b=Object(w.g)(e),f=Object(lM.d)(e),g=Object(lM.e)(e),y=Object($a.b)(e),O=Object(dI.c)({state:e}),C=Object(Ot.a)({state:e}),v=Object(ie.a)({state:e}),E=Object(UD.g)(e),k=Object(lM.b)(e),S=Object(ha.c)(e,"impression_logging_web");if(!n)return{featureTinyspeck:r,featureClassicNav:i,impressionLoggingWebGroup:S,currentUserId:l,teamId:c,enterpriseId:d,sessionId:u,msgTriggers:p,hasMessagePaneUnmounted:b,windowLastBlurEvent:f,windowLastFocusEvent:g,telemeter:O,logger:C,clogger:v,bootInFlight:E,bootType:k};const j=Object(_t.d)(e,a),I=Object(_t.e)(e,a);let T=Object(q.D)(n),N=!1;const A=Object(w.f)(e);A&&A!==T&&(T=A,N=!0);const R=Object(w.j)(e),P=Object(w.k)(e),x=Object(w.i)(e),L=Object(w.h)(e),F=Object(q.V)(n),D=Object(ze.h)(e,a,T),U=D&&D.reachedEnd,H=Object(w.b)(e),W=Object(w.n)(e),G=Object(Wu.a)(e),K=Object(ze.f)(e,a,R),V=Object(ae.c)(e,a,K.timestamps);var z=Eq(K,V,R);const $=z.timestamps,Y=z.messages,Q=z.rollups,X=z.reachedStart,J=z.reachedEnd,ee=z.prevReachedEnd,ne=z.oldest,se=z.latest;(Object(q.Db)(n)&&!Object(q.ob)(n)||Object(q.Y)(n))&&(T=Object(Hu.a)($));const re=function({state:e,channelId:t,timestamps:a,rollups:n,lastReadTs:s}){return Object(qu.a)(a,a=>{const r=Object(ae.a)(e,t,a),i=Object(m.d)(e);if(!r)return!1;if(n[a]){const r=Object(Z.a)(n[a]),o=Object(ht.a)(r,"ts"),l=Object(ht.a)(o,a=>Object(ae.a)(e,t,a));return Object(Bu.a)(l,e=>Object($e.kb)(e,s,i))}return Object($e.kb)(r,s,i)})}({state:e,channelId:a,timestamps:$,rollups:Q,lastReadTs:T}),oe=Object(Yu.b)(e),le=Object(w.p)(e)&&hA(e,a);let ce;Object(q.Mb)(e,n)&&(ce=Object(q.U)(e,n));const de=Object(HD.e)(e),ue=Object(wu.e)(e),pe=function({state:e,channel:t,rolledMessages:a}){const n=Object(m.m)(e,"feature_reactji_education_tip"),s=Object(Wm.c)(e);if(!qD({featureReactjiEducationTip:n,inProductCoachmark:s,channel:t}))return null;const r=Object(NP.a)(a,t=>{const a=Object(Py.b)(t),n=Object(My.e)(e,a);return!!n&&!!n.length});return r?r.ts:null}({state:e,channel:n,rolledMessages:Y});return{isFileExpanding:de,channelId:a,type:Object(q.v)(n),channelDisplayName:Object(q.x)(e,n,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),timestamps:$,reachedStart:X,reachedEnd:J,prevReachedEnd:ee,oldest:ne,latest:se,lastReadTs:T,isGhostLastRead:N,unreadCount:F,unreadCountKnown:U,startTs:R,startTsOffset:P,highlightTs:x,highlightLazy:L,focusRequestedTs:Object(w.e)(e),rollups:Q,isAppSpaceOpen:le,isArchived:Object(q.Y)(n),isLoading:j,isLoadingOlder:I,isLimited:Object(ze.e)(e,a),isSlackbotIm:Object(q.Ib)(n),isAppIm:Object(q.lb)(e,a),overlayVisible:Object(Sf.a)(t.overlayVisible)?t.overlayVisible:Object(w.r)(e),channelSessionId:H,prevChannelSwitchTs:W,theme:G,newxpOnboardingStep:Object(w.l)(e),firstUnreadTs:re,featureTinyspeck:r,featureClassicNav:i,featureAriaApplicationMode:o,teamId:c,enterpriseId:d,sessionId:u,msgTriggers:p,hasMessagePaneUnmounted:b,windowLastBlurEvent:f,windowLastFocusEvent:g,currentUserId:l,badgeCount:Object(B.d)(e,n),isShared:Object(q.bb)(n),isOrgShared:Object(q.wb)(n),isYou:Object(q.Ub)(e,n),isMuted:Object(xu.c)(e,a),hasUnreads:!!Object(q.V)(n),hasDraft:Object(q.y)(e,a),isScreenReaderEnabled:oe,currentThreadKey:y,unavailableTeamId:ce,canPostInChannel:Object(te.p)(e,a),featureAnnounceOnly:Object(m.m)(e,"feature_announce_only"),featureSonicInputs:Object(m.m)(e,"feature_sonic_inputs"),telemeter:O,logger:C,clogger:v,bootInFlight:E,bootType:k,featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),isOffline:!Object(pa.c)(e),userAttentionIsOnChat:ue,contextBarExperimentGroup:s,composerVisible:(Object(rt.a)(e)||"composer_toolbar"===Object(ha.c)(e,"composer_toolbar"))&&Object(Tp.b)(e),clientTheme:Object(M.c)(e),impressionLoggingWebGroup:S,latestMessageTsWithReactions:pe}},kq)(Cq),jq=a("c+rX");const Iq=Object(mt.b)("Start editing the last message in a given channel",(e,t,{channelId:a,threadTs:n,viewContext:s,keyboardShortcut:r,hasKeyboardFocus:i}={})=>{const o=t(),l=Object(Yu.b)(o),c=Object($u.d)(o,{channelId:a,threadTs:n}),d=Object(ie.a)({state:o});return!!c&&(d.track(de.EventId.MSG_EDIT_LAST,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.EDIT,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.view_context]:s,[de.UiPropertiesKeys.key]:r,[de.UiPropertiesKeys.is_screen_reader_enabled]:l,[de.UiPropertiesKeys.client_has_keyboard_focus]:i}}}}),e(Object($u.g)({channelId:a,ts:c.ts,viewContext:s,scroll:!0,keyboardShortcut:r,screenReaderIsEnabled:l,hasKeyboardFocus:i})),!0)});Iq.meta={name:"editLastMessageInChannel",key:"actionsEditLastMessageInChannelEditLastMessageInChannel",description:"Start editing the last message in a given channel"},Iq.propTypes={channelId:l.default.string.isRequired,threadTs:l.default.string,viewContext:l.default.string};var wq=Iq,Tq=a("oRxB"),Nq=a("L8gx"),Aq=a("/u/P");const Rq="GLOBAL-RXN-SHORTCUT",Mq=(l.default.node.isRequired,l.default.string.isRequired,l.default.string,l.default.object.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,{threadTs:void 0});class message_input_reaction_popover_MessageInputReactionPopover extends i.PureComponent{constructor(e){super(e),this.state={forceOpen:!1},this.onEmojiSelected=this.onEmojiSelected.bind(this),this.onClose=this.onClose.bind(this)}onEmojiSelected(e,t){this.reactionKey?this.props.changeReactionFromUserAction({key:this.reactionKey,name:t}):this.props.logger.warn(Rq,"No reaction key")}onClose(){this.setState(()=>({forceOpen:!1}))}startReactionPopoverForLastMessage(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.logger;let s;(s=a?this.props.getLastMessageInThread(t,a):this.props.getLastMessageInChannel(t))?(this.reactionKey=Object(Py.b)(s),n.info(Rq,`Opening reaction popover for ${this.reactionKey}`),this.setState(()=>({forceOpen:!0}))):n.info(Rq,"Could not find last message")}render(){const e=this.props.children,t=this.state.forceOpen;return o.a.createElement($w.a,{showHandyReactions:!0,customTrigger:!0,forceOpen:t,onEmojiSelected:this.onEmojiSelected,onClose:this.onClose},o.a.createElement(message_input_reaction_popover_PassThrough,null,e))}}message_input_reaction_popover_MessageInputReactionPopover.displayName="MessageInputReactionPopover",message_input_reaction_popover_MessageInputReactionPopover.defaultProps=Mq;const Pq={getLastMessageInChannel:(...e)=>(t,a)=>Object(Nq.a)(a(),...e),getLastMessageInThread:(...e)=>(t,a)=>Object(Aq.a)(a(),...e),changeReactionFromUserAction:(...e)=>Object(Tq.a)(...e)};var xq=Object(u.b)(function(e){return{logger:Object(Ot.a)({state:e})}},Pq,null,{withRef:!0})(message_input_reaction_popover_MessageInputReactionPopover);class message_input_reaction_popover_PassThrough extends i.PureComponent{render(){return this.props.children}}message_input_reaction_popover_PassThrough.displayName="PassThrough";const Lq=new x.b("coachmarks"),Fq={anchorElement:l.default.instanceOf(Element),completeJoinerOnboarding:l.default.func};class joiner_onboarding_coachmark_JoinerOnboardingCoachmark extends Ya.a{render(){var e=this.props;const t=e.anchorElement,a=e.completeJoinerOnboarding;return o.a.createElement("div",{className:"position_relative"},o.a.createElement(Ya.a,{anchorElement:t,isOpen:!0,onClickPrimaryButton:a,closeCoachmark:a,coachmarkClassNames:"c-joiner-coachmark",qa:"joiner-coachmark",arrowPosition:10,offsetX:30,offsetY:45,primaryCallToActionText:Lq.t("Got It",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0"}),orientation:"top"},o.a.createElement("h3",null,Lq.rt("Say hello!",{fallbackHash:"ff30242209ddac7a521de4f37aabe952bc39165f"})),o.a.createElement("p",null,Lq.rt("Type a message to let your team know you\u2019re here.",{fallbackHash:"cacc432d26db2e0a0a36a197f329204ee25e63e1"}))))}}joiner_onboarding_coachmark_JoinerOnboardingCoachmark.displayName="JoinerOnboardingCoachmark",joiner_onboarding_coachmark_JoinerOnboardingCoachmark.propTypes=Fq,joiner_onboarding_coachmark_JoinerOnboardingCoachmark.defaultProps={anchorElement:null,completeJoinerOnboarding:!1};const Dq=new x.b("coachmarks"),Bq={anchorElement:l.default.instanceOf(Element),setTractorMessageCoachmarkVisibility:l.default.func},Uq={anchorElement:null,setTractorMessageCoachmarkVisibility:r.a};class tractor_send_message_coachmark_TractorSendMessageCoachmark extends Ya.a{render(){var e=this.props;const t=e.anchorElement,a=e.setTractorMessageCoachmarkVisibility;return o.a.createElement("div",{className:"position_relative"},o.a.createElement(Ya.a,{anchorElement:t,"data-qa":"coachmark",isOpen:!0,orientation:"top",offsetX:30,offsetY:45,arrowPosition:10,closeCoachmark:()=>a(!1)},o.a.createElement("h3",null,Dq.t("Just type and press Enter")),o.a.createElement("p",null,Dq.t("Your Slack teammates will see your messages when they join. Feel free to use your own words instead!"))))}}tractor_send_message_coachmark_TractorSendMessageCoachmark.displayName="TractorSendMessageCoachmark",tractor_send_message_coachmark_TractorSendMessageCoachmark.propTypes=Bq,tractor_send_message_coachmark_TractorSendMessageCoachmark.defaultProps=Uq;var qq=a("yZHI"),Hq=a("a6/V");function Wq({e:e,isMenuVisible:t=!1}={}){return!!e&&(!t&&(!Object(Nu.a)(e.target)&&(!!Object(Hq.a)(e)&&(!e||e.keyCode!==vT.j))))}const Gq=new x.b("welcome_place");class message_suggestion_encouragement_MessageSuggestionEncouragement extends i.Component{render(){let e=null;return e=this.props.hasMessages?Gq.rt("<b>Send your first message</b> to let your teammates know you're here."):Gq.rt("<b>Be the first to post a message</b> and help get the conversation started."),o.a.createElement("p",{className:"padding_top_125"},e)}}message_suggestion_encouragement_MessageSuggestionEncouragement.displayName="MessageSuggestionEncouragement";var Kq=Object(u.b)(e=>({hasMessages:Xe(e,Object(_.a)(e))}))(message_suggestion_encouragement_MessageSuggestionEncouragement);const Vq=new x.b("welcome_place");class welcome_message_wrapper_WelcomeMessageWrapper extends i.Component{constructor(e){super(e),this.shouldRenderWrapper=(()=>{var e=this.props;const t=e.isEligibleForWrapper,a=e.isSendMessageBannerDismissed,n=this.state.isTaskCompleteAtStart;return t&&!n&&!a}),this.onClickClose=(()=>{this.props.dismissWrapper()}),this.onClickGetStartedLink=(()=>{(0,this.props.goToWelcomePlace)()}),this.state={isTaskCompleteAtStart:e.isTaskComplete}}componentDidMount(){var e=this.props;const t=e.clogger,a=e.pageViewingSessionId;this.shouldRenderWrapper()&&t.track("WELCOME_PLACE",{contexts:{ui_context:{action:de.UiAction.IMPRESSION,ui_element:de.UiElement.WELCOME_PLACE_CHANNEL_MESSAGE_BANNER},welcome_place:{welcome_session_id:a}}})}render(){var e=this.props;const t=e.channelId,a=e.children,n=e.hasMessagesToRender,s=e.prefillMessageInput,r=e.isTaskComplete;if(!this.shouldRenderWrapper())return a;const i=o.a.createElement(Qh.a,{onClick:this.onClickClose,className:""},o.a.createElement(bn.b,{type:"times-medium"}));return r?o.a.createElement("div",{className:"p-message_pane_input__wrapper--welcome-place","data-qa":"welcome_place_input_wrapper"},o.a.createElement("div",{className:"display_flex justify_content_between"},o.a.createElement("p",{className:"padding_top_125"},o.a.createElement("span",{role:"img","aria-label":Vq.t("Tada!")},"\ud83c\udf89"),Vq.rt("<b>Sent!</b> Ready to learn more about Slack?")," ",o.a.createElement(J_.a,{onClick:this.onClickGetStartedLink},Vq.rt("Head to <b>Get Started</b>"))),i),a):o.a.createElement("div",{className:"p-message_pane_input__wrapper--welcome-place","data-qa":"welcome_place_input_wrapper"},o.a.createElement("div",{className:"display_flex justify_content_between"},o.a.createElement(Kq,{channelId:t}),i),a,o.a.createElement("div",{className:"p-message_pane_input__message-suggestions-container"},o.a.createElement(Gt,{hasMessagesToRender:n,prefillMessageInput:s})))}}welcome_message_wrapper_WelcomeMessageWrapper.displayName="WelcomeMessageWrapper";var zq=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(bi.b)(e);return{hasMessagesToRender:Xe(e,a),isEligibleForWrapper:Object(oe.s)(e)&&!Object(q.kb)(a)&&!Object(q.Fb)(a)&&!Object(q.Ub)(n.id,a)&&Object(q.ob)(a)&&Object(te.p)(e,a.id)&&!Object(q.wb)(a)&&!Object(q.bb)(a)&&!Object(q.Y)(a)&&!Object(q.Ib)(a),isTaskComplete:Object(oe.q)(e),isSendMessageBannerDismissed:!Object(oe.j)(e),clogger:Object(ie.a)({state:e}),pageViewingSessionId:Object(oe.i)(e)}},e=>({dismissWrapper:()=>e(Object(le.b)()),goToWelcomePlace:()=>e(Object(qn.a)({id:"Pwelcome",fromHistory:!1,replaceHistoryState:!1}))}))(welcome_message_wrapper_WelcomeMessageWrapper),$q=a("M46C"),Yq=a("NYp8"),Qq=a("AaT8"),Xq=a("4rp9");l.default.func.isRequired,l.default.func.isRequired,l.default.string.isRequired;function Jq({renderIcon:e,renderText:t,type:a}){return o.a.createElement("div",{className:"p-context_bar","data-qa":"context_bar"},e(),o.a.createElement("span",{className:"p-context_bar__text",id:"context-bar-text","data-qa":`context_bar_text_${a}`},t()))}Jq.displayName="ContextBarTemplate";var Zq=Jq;l.default.shape({emoji:l.default.string,text:l.default.string}).isRequired;function eH({status:e}){return o.a.createElement(Zq,{renderIcon:()=>o.a.createElement(Qq.a,{className:"p-context_bar__icon",emoji:e.emoji,emojiSize:Ho.a.SMALL,showTooltips:!0,stopAnimations:!0}),renderText:()=>o.a.createElement(Xq.a,{emojiSize:Ho.a.SMALL,showTooltips:!0,stopAnimations:!0,text:e.text}),type:"custom_status"})}eH.displayName="ContextBarCustomStatus";var tH=Object(_p.a)(eH);const aH=new x.b("messages");l.default.string.isRequired;function nH({memberId:e}){return o.a.createElement(Zq,{renderIcon:()=>o.a.createElement(bn.b,{className:"p-context_bar__dnd_icon",type:"snooze-filled-small"}),renderText:()=>aH.rt("{member} has <strong>notifications turned off</strong>",{member:o.a.createElement(LO.a,{id:e}),fallbackHash:"af944df75258fb2dc2f1bacf18089b94d89efec8"}),type:"do_not_disturb"})}nH.displayName="ContextBarDnd";var sH=Object(_p.a)(nH);const rH=new x.b("messages");l.default.object.isRequired,l.default.number.isRequired;function iH({channel:e,guestCount:t}){let a;return a=Object(q.ib)(e)?rH.rt("This person is a <strong>guest</strong> in your organization",{fallbackHash:"05fd90c8107c4450309a1fac880837845b684fa3"}):Object(q.qb)(e)?rH.rt("{guestCount, plural, =1 {<strong># guest</strong> is} other {<strong># guests</strong> are}} in this conversation",{guestCount:t,fallbackHash:"001b03a22307ab209631ce684de51e97f6eddd94"}):rH.rt("{guestCount, plural, =1 {<strong># guest</strong> is} other {<strong># guests</strong> are}} in this channel",{guestCount:t,fallbackHash:"6101cfd18ba681495b6716c62d50ae9de09aadb7"}),o.a.createElement(Zq,{renderIcon:()=>o.a.createElement(bn.b,{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"user-filled"}),renderText:()=>a,type:"guest"})}iH.displayName="ContextBarGuest";var oH=Object(_p.a)(iH);const lH=new x.b("messages");l.default.arrayOf(l.default.string).isRequired;function cH({connectedTeamIds:e}){let t;return t=Object(io.a)(e)?lH.rt("<strong>Another organization</strong> has been invited to this channel"):lH.rt("{numConnectedTeams, plural, =1 {{singleTeamName} has} other {<strong># other organizations</strong> have}} been invited to this channel",{singleTeamName:o.a.createElement(Mb.a,{id:e[0]}),numConnectedTeams:e.length,fallbackHash:"bda628c81a343fa32b015e193f6efb7d0db4fbc2"}),o.a.createElement(Zq,{renderIcon:()=>o.a.createElement(bn.b,{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"paper-plane"}),renderText:()=>t,type:"pending_shared"})}cH.displayName="ContextBarPendingShared";var dH=Object(_p.b)((e,t)=>!Object(zf.a)(t,e,2))(cH),uH=a("GzZI");const pH=3,hH=new x.b("messages");l.default.object.isRequired,l.default.arrayOf(l.default.string).isRequired,l.default.number.isRequired,l.default.string.isRequired;function mH({channel:e,connectedTeamIds:t,guestCount:a,teamId:n}){let s,r;if(Object(io.a)(t))s=o.a.createElement(bn.b,{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"shared-channels"});else{const a=Math.min(t.length,pH);s=Object(uH.a)(a).map(a=>o.a.createElement(nj.b,{className:"p-context_bar__icon",id:t[a],isPendingShared:Object(q.zb)(e),key:t[a],size:16}))}return r=Object(q.ib)(e)?Object(io.a)(t)?hH.rt("This person is from <strong>another organization</strong>"):hH.rt("This person is from {team}",{team:o.a.createElement(Mb.a,{id:t[0]}),fallbackHash:"d4b920ecdba14d62b4972dd3f8a95382091f31e1"}):Object(q.qb)(e)?Object(io.a)(t)?hH.rt("This conversation includes people outside {userTeamName}",{userTeamName:o.a.createElement("strong",null,o.a.createElement(Mb.a,{id:n}))}):hH.rt("<strong>{numConnectedTeams, plural, =1 {{singleTeamName}} other {# other organizations}}</strong> {guestCount, plural, =0 {{numConnectedTeams, plural, =1 {is} other {are}}} =1 {and <strong># guest</strong> are} other {and <strong># guests</strong> are}} in this conversation",{guestCount:a,singleTeamName:o.a.createElement(Mb.a,{id:t[0]}),numConnectedTeams:t.length,fallbackHash:"15c8badcafe7312961e8f41ee9124ac65309cd3f"}):Object(io.a)(t)?hH.rt("This channel is shared outside {userTeamName}",{userTeamName:o.a.createElement("strong",null,o.a.createElement(Mb.a,{id:n}))}):hH.rt("<strong>{numConnectedTeams, plural, =1 {{singleTeamName}} other {# other organizations}}</strong> {guestCount, plural, =0 {{numConnectedTeams, plural, =1 {is} other {are}}} =1 {and <strong># guest</strong> are} other {and <strong># guests</strong> are}} in this channel",{guestCount:a,singleTeamName:o.a.createElement(Mb.a,{id:t[0]}),numConnectedTeams:t.length,fallbackHash:"f32040563023486aa2782d3260f9017b3e6b3a7a"}),o.a.createElement(Zq,{renderIcon:()=>s,renderText:()=>r,type:"shared"})}mH.displayName="ContextBarShared";var bH=Object(_p.b)((e,t)=>!Object(zf.a)(t,e,2))(mH);const fH=new x.b("messages");function _H(e,t){return Object(Zj.a)(Date.now(),{timeZone:Object(Je.Q)(e),timeZoneOffset:Object(Je.R)(e),do24hrTime:t})}l.default.object.isRequired,l.default.bool;function gH({member:e,time24:t}){var a=Object(i.useState)(_H(e,t)),n=at()(a,2);const s=n[0],r=n[1];return Object(Yq.a)(()=>{r(_H(e,t))},[e,t]),o.a.createElement(Zq,{renderIcon:()=>o.a.createElement(bn.b,{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"clock-o"}),renderText:()=>fH.rt("It\u2019s {time} for {member}",{member:o.a.createElement(LO.a,{id:e.id}),time:s?o.a.createElement("strong",null,s):o.a.createElement(lf.b,{size:"small"}),fallbackHash:"8438a232c197c83b0b53191ac5834f1d8efc5eca"}),type:"time_zone"})}gH.displayName="ContextBarTimeZone",gH.defaultProps={time24:!1};var yH=Object(u.b)(function(e){return{time24:Object(ba.k)(e,"time24")}})(gH);const OH=new x.b("messages");l.default.bool,l.default.object.isRequired,l.default.object.isRequired;function CH({featureMigrationBackgroundClient:e,clogger:t,channel:a}){return e?(t.track(de.EventId.ENTERPRISE_MIGRATION_BACKGROUND,{contexts:{ui_context:{action:de.UiAction.IMPRESSION,ui_element:de.UiElement.MIGRATION_CONTEXT_BAR},channel_id:a.id,channel_privacy_type:Object(q.t)(a)}}),o.a.createElement(Zq,{renderIcon:()=>o.a.createElement(bn.b,{className:"p-context_bar__dnd_icon",type:"info-circle-filled"}),renderText:()=>OH.rt("Missing messages? They'll show up shortly when your workspace's migration is complete."),type:"is_migrating"})):null}CH.displayName="ContextBarMigrating",CH.defaultProps={featureMigrationBackgroundClient:!1};var vH=Object(_p.a)(CH);a("AuaN");const EH=22,kH=8,SH={channel:l.default.object.isRequired,currentUser:l.default.object,guestCount:l.default.number,connectedTeamIds:l.default.array,contextBarExperimentGroup:l.default.oneOf(["default","control","test"]),isDnd:l.default.bool,imMember:l.default.object,teamId:l.default.string.isRequired,maybePullDownMessagePane:l.default.func,featureContextBarCustomStatus:l.default.bool,imCustomStatus:l.default.shape({emoji:l.default.string,text:l.default.string}),isMigrating:l.default.bool,featureMigrationBackgroundClient:l.default.bool},jH={currentUser:void 0,guestCount:0,connectedTeamIds:[],contextBarExperimentGroup:"default",isDnd:!1,imMember:null,maybePullDownMessagePane:r.a,featureContextBarCustomStatus:!1,imCustomStatus:void 0,isMigrating:!1,featureMigrationBackgroundClient:!1},IH={};function wH({channel:e,connectedTeamIds:t,contextBarExperimentGroup:a,featureContextBarCustomStatus:n,guestCount:s,imCustomStatus:r,imMember:l,isDnd:c,maybePullDownMessagePane:d,teamId:u,isMigrating:p,featureMigrationBackgroundClient:h,clogger:m,currentUser:b}){const f=Object(q.bb)(e),_=Object(q.zb)(e),g="control"===a,y=function({currentUser:e,imMember:t,contextBarExperimentGroup:a}){var n=Object(i.useState)(!1),s=at()(n,2);const r=s[0],o=s[1],l=Object(lN.a)().featureContextBarTzIssues,c=Object(nb.a)(),d=Object(i.useCallback)(()=>{if("control"===a)if(!t||Object(Je.tb)(t)||Object(Je.Hb)(t)||Object(Je.kb)(t))o(!1);else if(e.tz!==t.tz&&t.tz)try{const a=Object(Zj.a)(Date.now(),{timeZone:Object(Je.Q)(t),timeZoneOffset:Object(Je.R)(t),do24hrTime:!0,returnMoment:!0,noTzFallback:!0}).hour();if(Object(dt.a)(a))return void o(a>=EH||a<kH);o(!1)}catch(n){o(!1),n&&n.message&&!IH[t.id]&&l&&(IH[t.id]=!0,c.error(`CONTEXT_BAR - imMember.id: ${t.id}, imMember.tz: ${t.tz}, currentUser.id: ${e.id}, currentUser.tz: ${e.tz}`,n,{subtype:"timezone"}))}else o(!1);else o(!1)},[a,t,c,e,l]);return Object(Yq.a)(()=>{d()},[d]),Object(i.useEffect)(()=>{d()},[d]),r}({imMember:l,contextBarExperimentGroup:a,teamId:u,currentUser:b}),O=n&&r&&r.text&&r.emoji,C=c&&g,v=y&&g;let E;h&&p?E=o.a.createElement(vH,{featureMigrationBackgroundClient:h,clogger:m,channel:e}):_?E=o.a.createElement(dH,{connectedTeamIds:t}):f?E=o.a.createElement(bH,{channel:e,connectedTeamIds:t,guestCount:s,teamId:u}):C?E=o.a.createElement(sH,{memberId:l.id}):O?E=o.a.createElement(tH,{status:r}):v?E=o.a.createElement(yH,{member:l}):s>0&&(E=o.a.createElement(oH,{channel:e,guestCount:s}));const k=!!E;return Object(i.useEffect)(()=>{d(k)},[k,d]),E||null}wH.propTypes=SH,wH.defaultProps=jH;var TH=Object(u.b)(e=>{const t=Object(_.a)(e),a=Object(B.e)(e,t),n=Object(q.O)(e,a),s=Object(vf.f)(e,t),r=Object(m.m)(e,"feature_context_bar_guests"),i=Object(m.m)(e,"feature_migration_background_client"),o=r?Object(se.a)(s,"counts.restricted_member_count"):0,l=Object(ha.c)(e,"context_bar"),c=Object(m.m)(e,"feature_context_bar_custom_status"),d=Object(q.ib)(a)?Object(q.H)(a):null,u=d?Object(bi.d)(e,d):null,p=!c||!u||Object(Je.tb)(u)||Object(Je.Hb)(u)||Object(Je.kb)(u)?null:Object(bi.f)(e,d),b=Object(h.b)(e),f=u&&!Object(Je.tb)(u)&&!Object(Je.xb)(u)&&!Object(Je.Hb)(u)&&!Object(Je.kb)(u)&&Object(xC.d)(e,d),g=Object(q.pb)(e,a),y=Object(ie.a)({state:e});return{currentUser:Object(bi.b)(e),channel:a,connectedTeamIds:n,guestCount:o,contextBarExperimentGroup:l,isDnd:f,imMember:u,teamId:b,featureContextBarCustomStatus:c,imCustomStatus:p,isMigrating:g,featureMigrationBackgroundClient:i,clogger:y}})(wH);a("HQme");const NH=new x.b("msg_input"),AH=(l.default.string,l.default.string,l.default.bool,l.default.bool,{tooltip:null,border:!1,padding:void 0,featureAnnounceOnly:!1}),RH=({tooltip:e,border:t,padding:a,featureAnnounceOnly:n})=>{if(!n)return null;const s=d()("p-message_input_announce_only_roadblock",{"p-message_input_announce_only_roadblock--border":t,"p-message_input_announce_only_roadblock--large_padding":"large"===a});return o.a.createElement("div",{className:s},o.a.createElement(bn.b,{type:"emoji-objects",className:"p-message_input_announce_only_roadblock__icon",inline:!0}),NH.t("Read only",{fallbackHash:"9b19a5a212deb29444cc1b420ad81703205848be"}),e&&o.a.createElement(Xr.c,{position:"top-right",tip:e},o.a.createElement(bn.b,{type:"question-circle",className:"p-message_input_announce_only_roadblock__tip",inline:!0})))};RH.displayName="MessageInputAnnounceOnlyRoadblock",RH.defaultProps=AH;var MH=RH;const PH=new x.b("view"),xH=(l.default.string.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.object.isRequired,l.default.object.isRequired,l.default.object,l.default.bool,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.bool.isRequired,l.default.object.isRequired,{showCloseButton:!1,channelIsIMWithDeletedMember:!1,prevChannelId:void 0,member:void 0,featureAnnounceOnly:!1,featureSharedChannelsFreeTrial:!1});class message_pane_input_disabled_MessagePaneInputDisabled extends i.Component{constructor(){super(),Object(la.a)(this,["onCloseButtonClicked","renderSharedChannelFreeTrialUpgradePane","onUpgradeButtonClicked"])}componentDidMount(){var e=this.props;const t=e.clogger,a=e.featureSharedChannelsFreeTrial,n=e.isChannelFrozenAndInGracePeriod;a&&n&&t.track(de.EventId.CHANNEL_CREATE_FLOW,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.step]:de.UiStep.SHARED_CHANNEL_TRIAL_EXPIRED,[de.UiContextKeys.action]:de.UiAction.IMPRESSION,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.element_type]:de.ElementType.BANNER,[de.UiPropertiesKeys.element_name]:"frozen_message_pane"}}}})}onCloseButtonClicked(){Object(q.ib)(this.props.channel)?this.props.closeChannelApi({channelId:this.props.channelId}):this.props.archiveChannel({id:this.props.channelId,wasArchivedThisSession:!1}),this.props.displayModelOrViewById({id:this.props.prevChannelId})}onUpgradeButtonClicked(){var e=this.props;const t=e.team,a=e.clogger,n=e.featureSharedChannelsFreeTrial,s=e.isChannelFrozenAndInGracePeriod;n&&s&&a.track(de.EventId.CHANNEL_CREATE_FLOW,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.step]:de.UiStep.SHARED_CHANNEL_TRIAL_EXPIRED,[de.UiContextKeys.action]:de.UiAction.CLICK,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.element_type]:de.ElementType.BUTTON,[de.UiPropertiesKeys.element_name]:"frozen_message_pane_upgrade"}}}}),Object(xe.P)(t,`${gr.a}?s=1&p=std_y&entry_point=shared_channels_free_trial_frozen_pane`)}renderSharedChannelFreeTrialUpgradePane(){return this.props.featureSharedChannelsFreeTrial?o.a.createElement("div",{className:"p-message_pane_input__disabled"},o.a.createElement("span",{className:"p-message_pane_input__disabled_text"},PH.rt("Upgrade to reconnect this shared channel for your organization.")),o.a.createElement(_e.d,{pillarClassName:"p-message_pane_input__disabled_button",onClick:this.onUpgradeButtonClicked,type:"outline-primary",size:"small"},PH.t("Upgrade"))):null}render(){var e=this.props;const t=e.channel,a=e.showCloseButton,n=e.channelIsIMWithDeletedMember,s=e.member,r=e.featureAnnounceOnly,i=e.featureSharedChannelsFreeTrial,l=e.isChannelFrozenAndInGracePeriod;if(!t)return null;const c=Object(q.Z)(t)?PH.t("Close Channel"):PH.t("Close");let d=null,u="";if(i&&l)return this.renderSharedChannelFreeTrialUpgradePane();if(Object(q.eb)(t))u=Object(q.ib)(t)?PH.rt("Your two organizations are no longer connected."):Object(q.qb)(t)?PH.rt("These organizations are no longer connected."):PH.rt("This channel is no longer shared with your organization.");else if(Object(q.Y)(t)&&!Object(q.ib)(t))u=Object(q.C)(t)?PH.rt("{channel_or_group} was moved to another workspace.",{channel_or_group:o.a.createElement("strong",null,o.a.createElement(Bp.a,{channel:t})),fallbackHash:"27c083b405e96387febe1099064dd930b6696124",fallbackHashNs:"view"}):PH.rt("You are viewing {channel_or_group}, an archived channel",{channel_or_group:o.a.createElement("strong",null,o.a.createElement(Bp.a,{channel:t}))});else if(n&&s&&Object(Je.jb)(s))u=PH.t("You are viewing messages from {app_name} which has been removed from your workspace",{app_name:Object(Je.K)(s)});else if(n)d=o.a.createElement(bn.b,{type:"archive"}),u=PH.rt("You are viewing the archives of a deactivated account",{fallbackHash:"a2f3df2a30993d2303ac6a87adcd41cb35c1799f"});else{if(r){const e=PH.t("Posting to this channel has been restricted to select members");return o.a.createElement(MH,{tooltip:e,featureAnnounceOnly:r,border:!0,padding:"large"})}u=PH.rt("Your Workspace Owners have limited who can post to {channel_or_group}",{channel_or_group:o.a.createElement("strong",null,o.a.createElement(Bp.a,{channel:t}))})}return o.a.createElement("div",{className:"p-message_pane_input__disabled"},o.a.createElement("span",{className:"p-message_pane_input__disabled_text"},d," ",u),a&&o.a.createElement(_e.d,{pillarClassName:"p-message_pane_input__disabled_button",onClick:this.onCloseButtonClicked,type:"outline",size:"small"},c))}}message_pane_input_disabled_MessagePaneInputDisabled.displayName="MessagePaneInputDisabled",message_pane_input_disabled_MessagePaneInputDisabled.defaultProps=xH;const LH={closeChannelApi:wi.closeChannelApi,archiveChannel:wi.archiveChannel,displayModelOrViewById:fq.a};var FH=Object(u.b)((e,{teamId:t,channelId:a})=>{const n=Object(Se.i)(e,t),s=Object(B.e)(e,a),r=Object(q.ib)(s)?Object(bi.d)(e,Object(q.H)(s)):null,i=Object(q.nb)(e,s);return{team:n,channel:s,member:r,channelIsIMWithDeletedMember:i,prevChannelId:Object(Jm.a)(e),showCloseButton:!Object(q.eb)(s)&&(Object(q.Y)(s)||i),featureAnnounceOnly:Object(m.m)(e,"feature_announce_only"),featureSharedChannelsFreeTrial:Object(m.m)(e,"feature_shared_channels_free_trial"),isChannelFrozenAndInGracePeriod:Object(q.fb)(t,s),clogger:Object(ie.a)({state:e})}},LH)(message_pane_input_disabled_MessagePaneInputDisabled),DH=a("GdsW");const BH=new x.b("archives"),UH=(l.default.string.isRequired,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.number,l.default.string,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.bool,l.default.string,l.default.bool.isRequired,l.default.bool.isRequired,{channelCreatedBySelf:!1,channelDetailsVisible:!1,dateCreated:void 0,createdById:void 0,userAttentionIsOnChat:!1,previousChannelId:void 0});class message_pane_input_preview_MessagePaneInputPreview extends i.Component{constructor(){super(),this.onJoinButtonClicked=this.onJoinButtonClicked.bind(this),this.onDetailsButtonClicked=this.onDetailsButtonClicked.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}onDetailsButtonClicked(){this.props.showDetails()}onJoinButtonClicked(){this.props.joinConversationApi({channelId:this.props.channelId})}handleKeyDown(e){var t=this.props;const a=t.userAttentionIsOnChat,n=t.previousChannelId;if(!(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)&&!Object(Nu.a)(document.activeElement)&&(!Object(re.a)()||a)&&(Object(re.a)()||Object(Tu.f)()))if(e.keyCode!==vT.e){if(e.keyCode===vT.f){if(Object(re.a)())return void this.props.displayModelOrViewById({id:n});Object(DH.a)()}}else this.onJoinButtonClicked()}render(){var e=this.props;const t=e.channel,a=e.dateCreated,n=e.createdById,s=e.channelCreatedBySelf,r=e.channelDetailsVisible,i=e.featureOfflineMode,l=e.isOffline;let c=o.a.createElement(hB.a,{type:"unknown"});a&&(c=Object(Ro.k)(a));let d=o.a.createElement(hB.a,{type:"unknown"});n&&(d=o.a.createElement(LO.a,{id:n}));const u=BH.rt("You are viewing {channel_name}",{channel_name:o.a.createElement("strong",null,o.a.createElement(Ti.a,{channel:t,boldIcon:!0}))});let p="";p=s?BH.rt("Created by you on {created_at}",{created_at:c}):BH.rt("Created by {name} on {created_at}",{name:d,created_at:c});let h=o.a.createElement(_e.d,{pillarClassName:"p-message_pane_input__preview_join",onClick:this.onJoinButtonClicked,type:"primary",size:"medium",disabled:i&&l,dataQA:"join-channel"},BH.t("Join Channel"));if(i&&l){const e=o.a.createElement(zr.a,{tooltipLabel:BH.t("Go online to join this channel")});h=o.a.createElement(Xr.c,{tip:e},o.a.createElement("div",{className:"inline_block"},h))}return o.a.createElement("div",{className:"p-message_pane_input__preview"},o.a.createElement("div",{className:"p-message_pane_input__preview_subtitle"},u),o.a.createElement("div",{className:"p-message_pane_input__preview_metadata"},p),o.a.createElement("div",null,h,!r&&o.a.createElement(_e.d,{pillarClassName:"p-message_pane_input__preview_details",onClick:this.onDetailsButtonClicked,type:"outline",size:"medium"},BH.t("See More Details"))))}}message_pane_input_preview_MessagePaneInputPreview.displayName="MessagePaneInputPreview",message_pane_input_preview_MessagePaneInputPreview.defaultProps=UH;const qH={joinConversationApi:wi.joinConversationApi,showDetails:qa.e,displayModelOrViewById:fq.a};var HH=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(v.j)(e);return{channel:a,channelDetailsVisible:"details"===n||"channel_info"===n,createdById:a.creator,dateCreated:a.created,channelCreatedBySelf:a.creator===Object(m.d)(e),userAttentionIsOnChat:Object(wu.e)(e),previousChannelId:Object(Jm.a)(e),featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),isOffline:!Object(pa.c)(e)}},qH)(message_pane_input_preview_MessagePaneInputPreview);l.default.bool,l.default.string,l.default.string,l.default.bool,l.default.string;const WH={isSelfDm:!1,channelName:void 0,memberId:void 0,showStatus:!1,forcePlaceholderText:void 0};class message_pane_input_placeholder_MessagePaneInputPlaceholder extends i.Component{render(){var e=this.props;const t=e.channelName,a=e.isSelfDm,n=e.showStatus,s=e.memberId,r=e.forcePlaceholderText,i=r||ci({channelName:t,isSelfDm:a}),l=!r&&n&&o.a.createElement(iS.b,{memberId:s,tooltip:!1});return o.a.createElement("div",{className:"c-texty_input__placeholder"},i,l)}}message_pane_input_placeholder_MessagePaneInputPlaceholder.displayName="MessagePaneInputPlaceholder",message_pane_input_placeholder_MessagePaneInputPlaceholder.defaultProps=WH;var GH=Object(u.b)((e,{channelId:t,isSelfDm:a})=>{const n=Object(B.e)(e,t),s=Object(q.H)(n),r=s?Object(bi.d)(e,s):null,i=Object(m.m)(e,"feature_context_bar_custom_status");return{memberId:s||void 0,showStatus:Object(q.ib)(n)&&!a&&Object(Je.ab)(r)&&!i}})(message_pane_input_placeholder_MessagePaneInputPlaceholder);a("0Eo7");l.default.object,l.default.string,l.default.bool,l.default.string,l.default.func,l.default.func,l.default.func,l.default.func,l.default.array,l.default.bool,l.default.bool,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.func,l.default.bool,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.func;const KH={channel:void 0,channelId:void 0,isSelfDm:!1,channelName:void 0,prepareAndSendMessage:()=>Promise.resolve(),currentUserStartedTyping:r.a,currentUserEndedTyping:r.a,editLastMessageInChannel:r.a,useSendButton:!1,userCanPost:!0,typingNames:[],teamId:void 0,featureWysiwygComposer:!1,featureAtMentionInvites:!1,featureComposeFlowSend:!1,isUnavailable:!1,shouldShowJoinerLandingPlaceCoachmark:!1,completeJoinerOnboardingCallback:r.a,shouldShowTractorMessageCoachmark:!1,setTractorMessageCoachmarkVisibility:r.a,userAttentionIsOnChat:!1,composerVisible:!1,removeFromSectionNavigation:r.a,addToSectionNavigation:r.a,resetSectionNavigation:r.a,shouldShowWorkflowItemCoachmark:!1,maybePullDownMessagePane:r.a,featureMessageNavigationShortcuts:!1,setFocusLastVisibleMessageInChannel:r.a,focusMessageInput:!1,setFocusMessageInput:r.a};class message_pane_input_MessagePaneInput extends i.Component{constructor(){super(),Object(la.a)(this,["handleKeyDown","onTextChange","onSelectionChange","sendMessage","editLastMessage","startListeningToKeydown","stopListeningToKeydown","registerInput","unregisterInput","focus","blur","onFocus","onBlur","maybePullDownMessagePane","handleContextBarError","onUpArrow","prefillMessageInput"]),this.textyRef=o.a.createRef(),this.reactionPopoverRef=o.a.createRef(),this.state={textyValue:"",textyWysiwygLength:0,hasKeyboardFocus:!1}}componentDidMount(){this.updatePlaceholder(),this.registerInput(),this.restoreLegacyDraft()}shouldComponentUpdate(e){var t=this.props;const a=t.userCanPost,n=t.channel;return(a&&!e.userCanPost||!Object(q.Bb)(n)&&Object(q.Bb)(e.channel))&&this.unmountPlaceholder(),!0}componentDidUpdate(e){var t=this.props;const a=t.userAttentionIsOnChat,n=t.channelId,s=t.userCanPost,r=t.channel,i=t.focusMessageInput,o=t.featureMessageNavigationShortcuts,l={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Np.a)(l)&&this.props.addToSectionNavigation(),Object(Ap.a)(l)&&this.props.removeFromSectionNavigation(),e.userAttentionIsOnChat&&!a?this.stopListeningToKeydown():!e.userAttentionIsOnChat&&a&&this.startListeningToKeydown(),e.channelId!==n&&(e.channelId&&this.unregisterInput(e.channelId),n&&(this.registerInput(),this.restoreLegacyDraft())),(n&&e.channelId!==n||!e.userCanPost&&s||(!e.channel||Object(q.Bb)(e.channel))&&!Object(q.Bb)(r))&&this.updatePlaceholder();const c=e.focusMessageInput!==i&&i;if(o&&c){const e=this.getInputRef();e&&e.focus(),this.props.setFocusMessageInput(null)}}componentWillUnmount(){const e=this.props.channelId;this.stopListeningToKeydown(),this.unmountPlaceholder(),this.unregisterInput(e),this.shouldNotListenToKeyDownAgain=!0}onUpArrow(e=!1){this.props.featureMessageNavigationShortcuts&&!e&&this.props.setFocusLastVisibleMessageInChannel(!0)}onTextChange(e,t){var a=this.props;const n=a.channelId,s=a.featureWysiwygComposer,r=this.getInputRef();let i=!1;if(s&&r){const e=r.getFormat();i=e&&e["code-block"]}this.setState(()=>({textyValue:e,textyWysiwygLength:Object(xb.a)(new da.a(t)),cursorInCodeBlock:i})),Object(re.a)()||Object(PP.h)(e),e&&0!==e.indexOf("/")&&Object(ia.a)(e).length?this.props.currentUserStartedTyping({channelId:n}):this.props.currentUserEndedTyping({channelId:n})}onSelectionChange(){const e=this.props.featureWysiwygComposer,t=this.state.cursorInCodeBlock;if(!e)return;const a=this.getInputRef();if(a){const e=a.getFormat(),n=e&&e["code-block"];t!==n&&this.setState(()=>({cursorInCodeBlock:n}))}}onFocus(){this.stopListeningToKeydown(),this.props.resetSectionNavigation()}onBlur(){this.startListeningToKeydown(),this.getInputRef()&&this.setState(()=>({hasKeyboardFocus:!1}))}getInputRef(){return this.textyRef.current?this.textyRef.current.getWrappedInstance?this.textyRef.current.getWrappedInstance():this.textyRef.current:null}restoreLegacyDraft(){const e=this.props.channelId,t=this.getInputRef();if(!e)return;if(Object(re.a)())return;if(!t)return;const a=Object(cM.a)(e);t.value(a||"");const n=Object(PP.b)(e);n?t.setCursor(n.start,n.length):t.setCursorAtEnd()}registerInput(){const e=this.props.channelId;e&&Object(Rr.c)({viewContext:Ln.I.MESSAGE_PANE,channelId:e,functions:{getContainer:()=>{const e=this.getInputRef();return e?e.container:null},isEmpty:()=>{const e=this.getInputRef();return e?e.isEmpty():null},clear:()=>{const e=this.getInputRef();e&&e.clear()},prependContents:e=>{const t=this.getInputRef();t&&t.prependContents(e)},setContents:e=>{const t=this.getInputRef();t&&t.setContents(e)},getContents:()=>{const e=this.getInputRef();return e?e.getContents():null},setText:e=>{const t=this.getInputRef();t&&t.value(e)},getText:()=>{const e=this.getInputRef();return e?e.value():null},getLength:()=>{const e=this.getInputRef();return e?e.getLength():null},getDisplayValue:()=>{const e=this.getInputRef();return e?e.displayValue():null},focus:()=>{const e=this.getInputRef();e&&e.setCursorAtEnd()},focusWithoutSettingCursor:()=>{const e=this.getInputRef();e&&e.focus()},hasFocus:()=>{const e=this.getInputRef();return!!e&&e.hasFocus()},isEnabled:()=>{const e=this.getInputRef();return!!e&&e.isEnabled()},getSelection:()=>{const e=this.getInputRef();return e?e.getSelection():null},insertContentsAtCursor:(e,t=!0,a="user")=>{const n=this.getInputRef();n&&n.insertContentsAtCursor(e,t,a)},setCursor:(e,t)=>{const a=this.getInputRef();a&&a.setCursor(e,t)},setCursorAtEnd:()=>{const e=this.getInputRef();e&&e.setCursorAtEnd()},setPlaceholder:e=>{this.updatePlaceholder(e)},getContentsForCurrentSelection:()=>{const e=this.getInputRef();if(!e)return null;const t=e.getSelection();return t?e.getContentsForRange(t.index,t.length):null},openReactionPopoverForLastMessage:()=>{this.reactionPopoverRef.current&&this.reactionPopoverRef.current.getWrappedInstance().startReactionPopoverForLastMessage()},isCursorAtBeginning:()=>{const e=this.getInputRef();if(!e)return!1;const t=e.getSelection();return t&&0===t.index},isCursorAtEnd:()=>{const e=this.getInputRef();if(!e)return!1;const t=e.getSelection();return t&&t.index===e.getLength()}}})}unregisterInput(e){e&&Object(Rr.d)({viewContext:Ln.I.MESSAGE_PANE,channelId:e})}unmountPlaceholder(){const e=this.getInputRef();if(!e)return;const t=e.container.querySelector(".ql-placeholder");t&&Kc.a.unmountComponentAtNode(t)}updatePlaceholder(e){var t=this.props;const a=t.channelName,n=t.isSelfDm,s=t.teamId,r=t.channelId,i=this.getInputRef();if(!i)return;const l=i.container.querySelector(".ql-placeholder");if(l){Kc.a.render(o.a.createElement(u.a,{store:Object(p.getStoreInstanceByTeamId)(s)},o.a.createElement(GH,{channelId:r,channelName:a,forcePlaceholderText:e,isSelfDm:n})),l);const t=e||ci({channelName:a,isSelfDm:n});i.container.querySelector(".ql-editor").setAttribute("aria-label",t)}}editLastMessage({keyboardShortcut:e,hasKeyboardFocus:t}){this.props.editLastMessageInChannel({channelId:this.props.channelId,keyboardShortcut:e,hasKeyboardFocus:t})}handleKeyDown(e){if(!Wq({e:e,isMenuVisible:Object(fn.g)()}))return;if(Object(qq.a)(e.target,e=>e.classList.contains("p-threads_flexpane")))return;const t=this.getInputRef();Object(Fi.c)()?setTimeout(()=>t.focus(),0):t&&t.focus()}startListeningToKeydown(){if(this.shouldNotListenToKeyDownAgain)return;this.props.userAttentionIsOnChat&&document.addEventListener("keydown",this.handleKeyDown)}stopListeningToKeydown(){document.removeEventListener("keydown",this.handleKeyDown)}sendMessage(){var e=this.props;const t=e.channelId,a=e.useSendButton,n=e.featureWysiwygComposer,s=e.telemeter,r=this.getInputRef(),i=r.value(),o=r.getContents();return Lb(r.getContents(),{featureWysiwygComposer:n})?(Object($q.a)()&&s.mark("msg_input_try_to_submit"),r.clear(),this.setState(()=>({cursorInCodeBlock:!1})),a&&r.focus(),this.props.prepareAndSendMessage({channelId:t,text:i,delta:n?new da.a(o.contents):null,includeBroadcastKeywordWarning:!0,includeAtMentionInviteWarning:!0,includePrivateFileReshareWarning:!0}).then(()=>{const e=this.getInputRef();e&&e.clearHistory()}).catch(()=>{r.isEmpty()&&r.setContents(o)})):null}focus(){const e=this.getInputRef();e&&(e.setCursorAtEnd(),this.setState(()=>({hasKeyboardFocus:!0})))}blur(){const e=this.getInputRef();e&&e.blur(),this.onBlur()}maybePullDownMessagePane(e){this.props.maybePullDownMessagePane(e)}handleContextBarError(){this.props.maybePullDownMessagePane(!1)}prefillMessageInput(e){const t=this.getInputRef();t.value(Object(st.b)(e)),t.setCursorAtEnd()}renderContextBar(){return o.a.createElement(X_.a,{onError:this.handleContextBarError},o.a.createElement(TH,{maybePullDownMessagePane:this.maybePullDownMessagePane,key:this.props.channelId}))}renderInput(){var e=this.props;const t=e.channelId,a=e.useSendButton,n=e.featureComposeFlowSend,s=e.featureWysiwygComposer;var r=this.state;const i=r.hasKeyboardFocus,l=r.textyValue,c=o.a.createElement(oi,{channelId:t,viewContext:Ln.I.MESSAGE_PANE,className:"p-workspace__input",sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,useSendButton:a,useLegacyDrafts:!Object(re.a)(),ref:this.textyRef,enableEmojiButton:!0,enableMentionButton:!0,enableComposerButton:s,enableSendButton:n&&a,isSendingDisabled:!Object(ia.a)(l),focusOnMount:!0,focusOnPaste:!0,onTextChange:this.onTextChange,onSelectionChange:this.onSelectionChange,onFocus:this.onFocus,onBlur:this.onBlur,maxLines:null,maxLength:s?Ln.C:Ln.B,showFocusOutline:i,ariaDescribedBy:"context-bar-text",onUpArrow:this.onUpArrow});return Object(re.a)()?o.a.createElement(xq,{ref:this.reactionPopoverRef,channelId:t},c):c}render(){var e=this.props;const t=e.typingNames,a=e.useSendButton,n=e.completeJoinerOnboardingCallback,s=e.userCanPost,r=e.channel,i=e.channelId,l=e.teamId,c=e.shouldShowTractorMessageCoachmark,d=e.setTractorMessageCoachmarkVisibility,u=e.shouldShowJoinerLandingPlaceCoachmark,p=e.shouldShowWorkflowItemCoachmark,h=e.featureWysiwygComposer,m=e.featureAtMentionInvites,b=e.featureComposeFlowSend;var f=this.state;const _=f.textyValue,g=f.textyWysiwygLength,y=f.cursorInCodeBlock;let O=null;if(u?O=o.a.createElement(joiner_onboarding_coachmark_JoinerOnboardingCoachmark,{completeJoinerOnboarding:n}):c?O=o.a.createElement(tractor_send_message_coachmark_TractorSendMessageCoachmark,{setTractorMessageCoachmarkVisibility:d}):p&&(O=o.a.createElement(joiner_onboarding_coachmark_JoinerOnboardingCoachmark,{completeJoinerOnboarding:()=>Object(fa.c)(!1)})),this.props.isUnavailable)return null;if(i&&Object(q.Bb)(r))return o.a.createElement(HH,{channelId:this.props.channelId});if(i&&!s)return o.a.createElement(FH,{teamId:l,channelId:this.props.channelId});const C=o.a.createElement(zq,{channelId:i,prefillMessageInput:this.prefillMessageInput},o.a.createElement("div",{className:"p-message_pane_input"},o.a.createElement("div",{className:"p-message_pane_input_inner"},this.renderContextBar(),this.renderInput(),o.a.createElement(wf,{typingNames:t,textLength:h?g:_.length,cursorInCodeBlock:y})),!b&&a&&o.a.createElement(ii,{isDisabled:!Object(ia.a)(_),sendMessage:this.sendMessage,className:"p-workspace__message_pane_send"})));return Object(re.a)()?m||O?o.a.createElement(sn.b,{coachmarkElement:O,orientation:"top",style:{width:"100%"}},C):C:o.a.createElement(Sp.a,{component:this,order:2},C)}}message_pane_input_MessagePaneInput.displayName="MessagePaneInput",message_pane_input_MessagePaneInput.defaultProps=KH;const VH={prepareAndSendMessage:(...e)=>Object(tr.a)(...e),currentUserStartedTyping:(...e)=>Object(jx.d)(...e),currentUserEndedTyping:(...e)=>Object(jx.c)(...e),editLastMessageInChannel:(...e)=>wq(...e),completeJoinerOnboardingCallback:(...e)=>Fm(...e),setTractorMessageCoachmarkVisibility:(...e)=>Object(fa.g)(...e),setFocusLastVisibleMessageInChannel:(...e)=>Object(Sw.h)(...e),setFocusMessageInput:(...e)=>Object(Sw.i)(...e)},zH=Object(re.a)()?Object(H.a)(message_pane_input_MessagePaneInput,"MessagePaneInput",{index:5}):message_pane_input_MessagePaneInput;var $H=Object(u.b)(e=>{const t=Object(_.a)(e),a=Object(B.e)(e,t),n=Object(ht.a)(Object(jx.f)(e,t),t=>Object(bi.d)(e,t));n.sort((t,a)=>Object(x.r)(Object(Je.X)(e,t),Object(Je.X)(e,a)));const s=Object(te.p)(e,t)||Object(m.m)(e,"feature_announce_only_websocket")&&Object(q.z)(e,a),r=n.map(t=>Object(Je.V)(e,t)),i=Object(m.d)(e);return{channelId:t,channel:a,channelName:Object(q.x)(e,a,{imIncludeAtSign:!1}),isSelfDm:Object(q.Ub)(i,a),userCanPost:s&&!Object(q.Y)(a),typingNames:r.length>0?r:Ix.a,useSendButton:Object(ba.k)(e,"msg_input_send_btn"),userAttentionIsOnChat:Object(wu.e)(e),composerVisible:(Object(rt.a)(e)||"composer_toolbar"===Object(ha.c)(e,"composer_toolbar"))&&Object(Tp.b)(e),teamId:Object(h.b)(e),featureWysiwygComposer:Object(rt.a)(e),featureAtMentionInvites:Object(m.m)(e,"feature_at_mention_invites"),featureComposeFlowSend:Object(C.i)(e),isUnavailable:Object(q.Mb)(e,a),telemeter:Object(dI.c)({state:e}),shouldShowTractorMessageCoachmark:Object(ua.c)(e),shouldShowJoinerLandingPlaceCoachmark:Object(ua.a)(e),shouldShowWorkflowItemCoachmark:Object(oe.l)(e),featureMessageNavigationShortcuts:Object(m.m)(e,"feature_message_navigation_shortcuts"),focusMessageInput:Object(w.d)(e)}},VH)(zH),YH=a("okoL"),QH=a("Xjfm"),XH=a("izWf");function JH(e,t,a){return Object(pt.a)(Object(_n.a)(a,a=>(function(e,t,a){const n=Object(ae.a)(e,t,a);return n&&!Object($e.sb)(n)&&!Object($e.bb)(n)})(e,t,a)))}const ZH=100,eW=8;function tW(e){const t=e.timestamps;return Object(Hu.a)(t)}var aW=a("Gz0X");var nW=function(e){const t=e.messages,a=e.timestamps,n=e.threadTs,s=e.lastRead,r=e.reachedStart,i=t[n];if(!i)return"0000000000.000000";const o=Object(_n.a)(a,e=>e!==n);if(Object($e.S)(i)<=4)return"0000000000.000000";const l=Object(aW.a)(o,e=>e<=s);return r&&l.length<=2?"0000000000.000000":l.length===o.length?Object(db.a)(Object(YH.a)(l,2)):Object(Hu.a)(l)},sW=a("m7fc");var rW=function({threads:e,minimumVisibleTsByThread:t,maximumVisibleTsByThread:a,firstReadThreadKey:n,isDoingGlobalRefresh:i,currentUserId:o,initialLastReadByThread:l,hasMore:c,logError:d=r.a}){const u=[],p=[];i&&(u.push("global-loading"),p.push({type:"loading"}));const h=Object(sW.a)(e,e=>e.threadKey!==n).some(e=>Object(Z.a)(e.messages).some(t=>t?t.ts>l[e.threadKey]&&t.user!==o:(d(`Missing message in ${e.threadKey}`),!1)));if(e.forEach(e=>{const r=e.channelId,o=e.threadTs,c=e.timestamps,d=e.threadKey,m=e.messages,b=e.reachedStart,f=t[d],_=a[d];i||h||d!==n||(u.push(`divider-${d}`),p.push({type:"divider"}));const g={channelId:r,threadTs:o,threadKey:d},y=c.some(e=>e>_);u.push(`heading-${d}`),p.push(s()({type:"heading"},g)),u.push(`root-${d}`),p.push(s()({type:"root"},g)),(!b||Object(Bu.a)(c,e=>e!==o&&e<f))&&(u.push(`load_older-${d}`),p.push(s()({type:"load_older",messages:m},g))),c.forEach(t=>{if(t===o)return;if(t<f)return;if(t>_)return;const a=m[t];if(Object($e.gb)(a))return;const n=l&&t>l[e.threadKey];u.push(`${d}-${t}`),p.push(s()({type:"reply",ts:t,isNewReply:n},g))}),y&&(u.push(`load_newer-${d}`),p.push(s()({type:"load_newer"},g))),u.push(`footer-${d}`),p.push(s()({type:"footer"},g))}),c&&e){const t=Object(Hu.a)(e),a=t&&t.threadKey;u.push(`loading_more_threads-${a}`),p.push({type:"loading_more_threads"})}return{keys:u,rows:p}};l.default.string,l.default.string,l.default.array,l.default.number,l.default.bool,l.default.func;const iW={channelId:void 0,threadTs:void 0,replyUsers:[],replyUsersCount:0,firstItem:!1,clogLinkClick:r.a};class threads_view_header_Header extends i.Component{constructor(e){super(e),this.clogClick=this.clogClick.bind(this)}clogClick(){(0,this.props.clogLinkClick)("CLICK_CHANNEL_NAME")}render(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.replyUsers,s=e.replyUsersCount,r=e.firstItem,i=Object($e.v)(t,a),l=d()("p-threads_view_header",{"p-threads_view_header--first":r});return o.a.createElement("div",{className:l},o.a.createElement(Ze.a,{href:i,className:"p-threads_view_header__permalink",clogLinkClick:this.clogClick},o.a.createElement(Bp.a,{channelId:t,className:"p-threads_view_header__channel_name"})),o.a.createElement(b_.a,{replyUsers:n,replyUsersCount:s,className:"p-threads_view_header__participant_list"}))}}threads_view_header_Header.displayName="Header",threads_view_header_Header.defaultProps=iW;var oW=Object(u.b)(function(e,{channelId:t,threadTs:a}){const n=Object(ae.a)(e,t,a);if(!n)return null;let s=Object($e.T)(n),r=Object($e.U)(n);return n.replies?(s=Object(ht.a)(n.replies,"user"),n.user&&s.push(n.user),r=Object(lt.a)(s).length):n.user&&s.push(n.user),{replyUsers:s,replyUsersCount:r}})(threads_view_header_Header);l.default.bool,l.default.bool,l.default.node;const lW={first:!1,last:!1,children:void 0};class threads_default_background_ThreadsDefaultBackground extends i.PureComponent{render(){var e=this.props;const t=e.first,a=e.last,n=d()("p-threads_view__default_background",{"p-threads_view__default_background--first":t,"p-threads_view__default_background--last":a});return o.a.createElement("div",{className:n},this.props.children)}}threads_default_background_ThreadsDefaultBackground.displayName="ThreadsDefaultBackground",threads_default_background_ThreadsDefaultBackground.defaultProps=lW;var cW=threads_default_background_ThreadsDefaultBackground;const dW=new x.b("message_kit"),uW=(l.default.object.isRequired,l.default.string,l.default.oneOf(["light","dense"]),l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.string,{className:void 0,theme:"light",clogLinkClick:r.a,clogThreadEvent:r.a,focused:!1,renderActionsOffscreen:!1,parentId:void 0});class root_message_RootMessage extends i.PureComponent{getMessageBody(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Qt.a,{msg:e}),"\xa0\xa0",o.a.createElement(ta.a,{msg:e,relative:!0,clickable:!0},dW.t("Open in channel")),o.a.createElement("br",null),o.a.createElement(Xt.a,{msg:e}),o.a.createElement(Jt.a,{msg:e,blocksContainerContext:Vp.a.all_threads}),o.a.createElement(ea.b,{msg:e}),o.a.createElement(zp.a,{msg:e}),o.a.createElement(Qp.a,{msg:e}))}getCompactMessageBody(e){return o.a.createElement(mh.a,null,o.a.createElement(Qt.a,{msg:e,className:"p-threads_view_sender--compact"}),"\xa0\xa0",o.a.createElement(Xt.a,{msg:e}),o.a.createElement(Yp,{msg:e,blocksContainerContext:Vp.a.all_threads}),o.a.createElement(ea.b,{msg:e}),o.a.createElement(zp.a,{msg:e}),o.a.createElement(Qp.a,{msg:e}))}render(){var e=this.props;const t=e.msg,a=e.theme,n=e.clogLinkClick,s=e.focused,r=e.renderActionsOffscreen,i=e.clogThreadEvent,l=e.parentId,c="dense"===a,u=d()("p-threads_view_root","c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className),p=c?o.a.createElement("div",{className:"p-threads_view_compact_timestamp"},o.a.createElement(ta.a,{msg:t,relative:!0,compact:!0,clickable:!0},dW.t("Open in channel"))):null,h=c?"above":"default",m=c?this.getCompactMessageBody(t):this.getMessageBody(t);return o.a.createElement(ah.a,{msg:t},o.a.createElement(cW,{first:!0},o.a.createElement(nh.a,{msg:t,className:u},o.a.createElement(sh.a,{hovered:s},o.a.createElement(rh.a,{msg:t,showComment:!0,showShare:!1,showJump:!0,messageContainerType:Ln.I.THREADS_VIEW,renderOffscreen:r,position:h,clogLinkClick:n,clogThreadEvent:i,parentId:l},o.a.createElement(dh.a,{msg:t},o.a.createElement($t.a,{light:o.a.createElement(Yt.a,{msg:t}),compact:p},o.a.createElement(ch.a,{msg:t},o.a.createElement(hh,{msg:t},m)))))))))}}root_message_RootMessage.displayName="RootMessage",root_message_RootMessage.defaultProps=uW;const pW=new x.b("threads"),hW=(l.default.object.isRequired,l.default.string,l.default.bool,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.oneOf(["light","dense"]),l.default.func,l.default.string,{className:void 0,highlight:void 0,clearHighlight:void 0,focused:!1,renderActionsOffscreen:!1,isNewReply:!1,theme:"light",clogThreadEvent:r.a,parentId:void 0});class reply_message_ReplyMessage extends i.PureComponent{getMessageBody(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Qt.a,{msg:e}),"\xa0\xa0",o.a.createElement(ta.a,{msg:e,relative:!0,clickable:!0},pW.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"})),o.a.createElement("br",null),o.a.createElement(EU,{msg:e},o.a.createElement(Xt.a,{msg:e}),o.a.createElement(Jt.a,{msg:e,blocksContainerContext:Vp.a.all_threads}),o.a.createElement(ea.b,{msg:e}),o.a.createElement(zp.a,{msg:e})),o.a.createElement(Qp.a,{msg:e}))}getCompactMessageBody(e){return o.a.createElement(mh.a,null,o.a.createElement(Qt.a,{msg:e,className:"p-threads_view_sender--compact"}),"\xa0\xa0",o.a.createElement(EU,{msg:e},o.a.createElement(Xt.a,{msg:e}),o.a.createElement(Yp,{msg:e,blocksContainerContext:Vp.a.all_threads}),o.a.createElement(ea.b,{msg:e}),o.a.createElement(zp.a,{msg:e})),o.a.createElement(Qp.a,{msg:e}))}render(){var e=this.props;const t=e.msg,a=e.highlight,n=e.clearHighlight,s=e.focused,r=e.renderActionsOffscreen,i=e.isNewReply,l=e.theme,c=e.clogThreadEvent,u=e.parentId,p="dense"===l,h=d()("c-message_kit__message","c-message_kit__thread_message","p-threads_view_reply",{"p-threads_view_reply--new_reply":i},this.props.className),m=p?o.a.createElement("div",{className:"p-threads_view_compact_timestamp"},o.a.createElement(ta.a,{msg:t,relative:!0,compact:!0,clickable:!0},pW.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"}))):null,b=p?"above":"default",f=p?this.getCompactMessageBody(t):this.getMessageBody(t);return o.a.createElement(ah.a,{msg:t},o.a.createElement(cW,null,o.a.createElement(nh.a,{msg:t,className:h,highlight:a,clearHighlight:n},o.a.createElement(sh.a,{hovered:s},o.a.createElement(rh.a,{msg:t,showComment:!1,showShare:!1,messageContainerType:Ln.I.THREADS_VIEW,renderOffscreen:r,position:b,clogThreadEvent:c,parentId:u},o.a.createElement(dh.a,{msg:t,showBroadcast:!0},o.a.createElement($t.a,{light:o.a.createElement(Yt.a,{msg:t}),compact:m},o.a.createElement(hh,{msg:t},f))))))))}}reply_message_ReplyMessage.displayName="ReplyMessage",reply_message_ReplyMessage.defaultProps=hW;var mW=a("8QLk");const bW=new x.b("threads"),fW=(l.default.string,l.default.string,l.default.string,l.default.object,l.default.object,l.default.func,l.default.oneOf(["light","dense"]),{channelId:void 0,threadTs:void 0,minimumVisibleTs:void 0,rootMsg:void 0,messages:{},loadOlderReplies:r.a,theme:"light"});class load_older_button_LoadOlderButton extends i.Component{constructor(e){super(e),this.state={isLoading:!1},this.onClick=this.onClick.bind(this)}onClick(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.loadOlderReplies;!this.state.isLoading&&n&&(this.setState(()=>({isLoading:!0})),n(t,a).then(()=>{this.setState(()=>({isLoading:!1}))}))}render(){var e=this.props;const t=e.minimumVisibleTs,a=e.rootMsg,n=e.messages,s="dense"===e.theme,r=[],i=Object($e.Q)(a),l=Object($e.C)(a);Object(Rp.a)(n,(e,t)=>{!Object($e.bb)(e)&&!Object($e.sb)(e)&&t!==i&&t<=l&&r.push(t)});const c=Object($e.S)(a)-r.length,u=r.filter(e=>e<t),p=Object(mW.a)(c+u.length,0,ZH);if(!p)return null;const h=d()("p_threads_view_load_older_button",{"p_threads_view_load_older_button--with-gutter":s});return o.a.createElement(cW,null,o.a.createElement("div",{className:h},o.a.createElement(Ze.a,{onClick:this.onClick},bW.t("Show {showPrevCount, plural, =1 {# more reply} other {# more replies}}",{showPrevCount:p})),this.state.isLoading?o.a.createElement(Kt.a,{size:"medium",className:"margin_left_25",inline:!0}):null))}}load_older_button_LoadOlderButton.displayName="LoadOlderButton",load_older_button_LoadOlderButton.defaultProps=fW;var _W=Object(u.b)(function(e,{channelId:t,threadTs:a,messages:n}){return{rootMsg:Object(ae.a)(e,t,a),messages:n}})(load_older_button_LoadOlderButton);const gW=new x.b("threads"),yW=(l.default.string,l.default.string,l.default.string,l.default.arrayOf(l.default.string),l.default.func,l.default.oneOf(["light","dense"]),{channelId:void 0,threadTs:void 0,maximumVisibleTs:"0000000000.000000",timestamps:[],loadNewerReplies:r.a,theme:"light"});class load_newer_button_LoadNewerButton extends i.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var e=this.props;const t=e.channelId,a=e.threadTs;(0,e.loadNewerReplies)(t,a)}render(){var e=this.props;const t=e.maximumVisibleTs,a=e.timestamps,n="dense"===e.theme,s=a.filter(e=>e>t);if(!s.length)return null;const r=gW.t("{count, plural, =1 {# new reply} other {# new replies}}",{count:s.length}),i=d()("p_threads_view_load_newer_button",{"p_threads_view_load_newer_button--with-gutter":n});return o.a.createElement(cW,null,o.a.createElement("div",{className:i},o.a.createElement("span",{className:"p_threads_view_load_newer_button__blue_dot"},"\u2022"),o.a.createElement(Ze.a,{onClick:this.onClick},r)))}}load_newer_button_LoadNewerButton.displayName="LoadNewerButton",load_newer_button_LoadNewerButton.defaultProps=yW;var OW=Object(u.b)(function(e,{channelId:t,threadTs:a}){const n=Object($a.c)(t,a);return{timestamps:(Object(ze.h)(e,n)||{timestamps:[]}).timestamps}})(load_newer_button_LoadNewerButton),CW=a("WFc3");a("t5GV");const vW=new x.b("threads"),EW=40,kW=150,SW=(l.default.string.isRequired,l.default.string.isRequired,l.default.string,l.default.func,l.default.func,l.default.func,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.func,l.default.bool.isRequired,l.default.func,l.default.func,l.default.func,{channelType:"channel",prepareAndSendMessage:()=>Promise.resolve(),legacySendSlashCommand:r.a,editLastMessageInChannel:r.a,viewContext:void 0,useSendButton:!1,focusInputOnMount:!1,featureSonicInputs:!0,featureWysiwygComposer:!1,featureComposeFlowSend:!1,enableStickyComposer:!1,replyCount:0,clogThreadEvent:r.a,onFocus:r.a,onUpArrow:r.a,onDownArrowWhenEmpty:r.a});class input_container_InputContainer extends i.Component{constructor(e){super(e),this.inputRef=o.a.createRef(),this.reactionPopoverRef=o.a.createRef(),this.state={textyValue:"",hasFocus:!1,broadcast:!1,broadcastControlsHeight:0},Object(la.a)(this,["onBroadcastChange","onBroadcastControlsMouseDown","onTextChange","onFocus","onBlur","sendMessage","editLastMessage","onExpandAnimationTick","onExpandAnimationEnd","handleDraftRestore"]),this.getAdditionalDraftContent=Object(an.a)(e=>({broadcast:e}))}componentDidMount(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.viewContext;if(!Object(re.a)()&&this.inputRef.current){const e=Object(cM.c)(t,a);e&&this.inputRef.current.getWrappedInstance().value(e)}Object(Rr.c)({viewContext:n,channelId:t,threadTs:a,functions:{clear:()=>{const e=this.getInputRef();e&&e.clear(),this.state.broadcast&&this.setState(()=>({broadcast:!1}))},isEmpty:()=>{const e=this.getInputRef();return e?e.isEmpty():null},prependContents:e=>{const t=this.getInputRef();t&&t.prependContents(e)},setContents:e=>{const t=this.getInputRef();t&&t.setContents(e)},getContents:()=>{const e=this.getInputRef();return e?e.getContents():null},setText:e=>{const t=this.getInputRef();t&&t.value(e)},getText:()=>{const e=this.getInputRef();return e?e.value():null},getDisplayValue:()=>{const e=this.getInputRef();return e?e.displayValue():null},setBroadcast:e=>this.setState(()=>({broadcast:e})),getBroadcast:()=>this.state.broadcast,focus:()=>{const e=this.getInputRef();e&&e.setCursorAtEnd()},clearHistory:()=>{const e=this.getInputRef();e&&e.clearHistory()},setCursorAtEnd:()=>{const e=this.getInputRef();e&&e.setCursorAtEnd()},getContentsForCurrentSelection:()=>{const e=this.getInputRef();if(!e)return null;const t=e.getSelection();return t?e.getContentsForRange(t.index,t.length):null},openReactionPopoverForLastMessage:()=>{this.reactionPopoverRef.current&&this.reactionPopoverRef.current.getWrappedInstance().startReactionPopoverForLastMessage()},isCursorAtBeginning:()=>{const e=this.getInputRef();if(!e)return!1;const t=e.getSelection();return t&&0===t.index},isCursorAtEnd:()=>{const e=this.getInputRef();if(!e)return!1;const t=e.getSelection();return t&&t.index===e.getLength()},setCursor:(e,t)=>{const a=this.getInputRef();a&&a.setCursor(e,t)},scrollIntoView:()=>{const e=this.getInputRef();e&&e.container.scrollIntoView()}}})}componentDidUpdate(e,t){const a=this.state.hasFocus||!!this.state.textyValue,n=t.hasFocus||!!t.textyValue;a&&!n?this.startExpandAnimation(0,EW):!a&&n&&this.startExpandAnimation(EW,0)}componentWillUnmount(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.viewContext;Object(Rr.d)({viewContext:n,channelId:t,threadTs:a}),this.expandAnimation&&this.expandAnimation.cancel()}onBroadcastChange(e){const t=e.target.checked;this.setState(()=>({broadcast:!!t})),this.state.textyValue||(this.inputRef.current.getWrappedInstance().focus(),this.preventUnfocus=!1)}onBroadcastControlsMouseDown(e){e.preventDefault(),this.state.textyValue||(this.preventUnfocus=!0)}onTextChange(e){this.setState(()=>({textyValue:e}));var t=this.props;const a=t.channelId,n=t.threadTs;Object(re.a)()||Object(cM.g)(a,n,e)}onFocus(){this.setState(()=>({hasFocus:!0}))}onBlur(){this.preventUnfocus?this.preventUnfocus=!1:this.setState(()=>({hasFocus:!1}))}onExpandAnimationTick({value:e,nextTick:t}){this.setState(()=>({broadcastControlsHeight:e}),t)}onExpandAnimationEnd(){this.expandAnimation=null}getInputRef(){return this.inputRef.current.getWrappedInstance?this.inputRef.current.getWrappedInstance():this.inputRef.current}handleDraftRestore(e){this.setState(({broadcastControlsHeight:t})=>({broadcast:!!e.broadcast,broadcastControlsHeight:e.ops?EW:t}))}startExpandAnimation(e,t){this.state.broadcastControlsHeight!==t&&(this.expandAnimation&&this.expandAnimation.cancel(),this.expandAnimation=Object(ix.a)({fromValue:e,toValue:t,duration:kW,easing:"easeInOutQuad",onTick:this.onExpandAnimationTick,onComplete:this.onExpandAnimationEnd}))}editLastMessage({keyboardShortcut:e,hasKeyboardFocus:t}){this.props.editLastMessageInChannel({channelId:this.props.channelId,threadTs:this.props.threadTs,viewContext:this.props.viewContext,keyboardShortcut:e,hasKeyboardFocus:t})}sendMessage(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.replyCount,s=e.clogThreadEvent,r=e.featureSonicInputs,i=e.featureWysiwygComposer,o=this.state.broadcast;this.setState(()=>({broadcast:!1}));const l=this.getInputRef(),c=l.value();if(!r&&Object(CW.a)(c))return l.clear(),this.props.legacySendSlashCommand(t,a,c),Promise.resolve();if(!Lb(l.getContents(),{featureWysiwygComposer:i}))return null;s({event:o?"THREADS_REPLY_BROADCAST_CLICKED":"THREADS_REPLY",metadata:{num_msg_in_thread:n+1}});const d=l.getContents();return l.clear(),l.focus(),this.props.prepareAndSendMessage({channelId:t,text:c,delta:i?new da.a(d.contents):null,replyToTs:a,shouldBroadcast:o}).then(()=>{const e=this.getInputRef();e&&e.clearHistory()}).catch(()=>{l.isEmpty()&&l.setContents(d)})}render(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.viewContext,s=e.channelType,r=e.useSendButton,i=e.focusInputOnMount,l=e.userCanPost,c=e.featureSonicInputs,u=e.onFocus,p=e.featureWysiwygComposer,h=e.featureComposeFlowSend,m=e.enableStickyComposer;var b=this.state;const f=b.broadcast,_=b.textyValue,g=b.hasFocus,y=b.broadcastControlsHeight,O=!!_||g,C=d()("p-threads_footer__broadcast_controls",{"p-threads_footer__broadcast_controls--visible":O}),v={height:y};let E="";E="mpim"===s?vW.t("Also send to the group"):"im"===s?vW.t("Also send as direct message"):vW.rt("Also send to <span></span>",null,()=>o.a.createElement(Bp.a,{channelId:t,inline:!0,className:"p-threads_footer__broadcast_channel"}));let k="";k="mpim"===s||"im"===s?vW.t("Choose this if you\u2019d like your reply to post in the main conversation, too"):vW.t("Choose this if you\u2019d like your reply to post in the channel, too");const S=`p-thread_footer__broadcast_checkbox--${Object($a.c)(t,a)}--${n}`,j=d()("p-threads_footer__input",{"p-threads_footer__input--legacy":!c});let I=o.a.createElement(oi,{key:`wysiwyg_${p}`,className:j,channelId:t,threadTs:a,viewContext:n,placeholder:vW.t("Reply\u2026",{fallbackHash:"fefcf598b8ea8332c1557b2ee245e83e5c8b0aef"}),enableEmojiButton:!0,enableComposerButton:p,enableSendButton:h&&r,isSendingDisabled:!Object(ia.a)(_),enableBroadcastKeywords:!1,onTextChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,ref:this.inputRef,useLegacyCreate:!c,useLegacyDrafts:!Object(re.a)(),maxLines:8,useSendButton:r,focusOnMount:i,maxLength:p?Ln.C:Ln.B,onDraftRestore:this.handleDraftRestore,additionalDraftContent:this.getAdditionalDraftContent(f),onUpArrow:this.props.onUpArrow,onDownArrowWhenEmpty:this.props.onDownArrowWhenEmpty});Object(re.a)()&&(I=o.a.createElement(xq,{ref:this.reactionPopoverRef,channelId:t,threadTs:a},I));const w=d()("p-threads_footer__input_container",{"p-threads_footer__input_container--sticky_composer":p&&m});return o.a.createElement("div",{className:w,"data-qa":"reply_container",onFocus:u},I,o.a.createElement("div",{className:C,style:v},o.a.createElement("div",{className:"p-threads_footer__broadcast_controls_inner"},l&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Dn.a,{className:"p-threads_footer__broadcast_label",text:E,htmlFor:S,type:"inline",onMouseDown:this.onBroadcastControlsMouseDown},o.a.createElement(Bn.a,{className:"p-threads_footer__broadcast_checkbox",id:S,checked:f,onChange:this.onBroadcastChange,"data-qa":"threads_footer_broadcast_checkbox",disabled:!O})),o.a.createElement(Xr.c,{tip:k},o.a.createElement(bn.b,{className:"p-threads_footer__info_tooltip",type:"question_circle",inline:!0,size:"inherit"}))),!h&&o.a.createElement(ii,{isDisabled:!Object(ia.a)(_),className:"p-threads_footer__send_button",sendMessage:this.sendMessage,buttonSize:"small",tabIndex:0}))))}}input_container_InputContainer.displayName="InputContainer",input_container_InputContainer.defaultProps=SW;const jW={prepareAndSendMessage:(...e)=>Object(tr.a)(...e),editLastMessageInChannel:(...e)=>wq(...e),legacySendSlashCommand:(e,t,a)=>(n,s)=>{const r=s(),i=Object(B.e)(r,e),o=Object(ae.a)(r,e,t);i&&o&&Object(Tu.k)(i,a,o)}};var IW=Object(u.b)(function(e,{channelId:t,threadTs:a}){const n=Object(B.e)(e,t),s=Object(ae.a)(e,t,a);return{channelType:Object(q.v)(n),featureSonicInputs:Object(m.m)(e,"feature_sonic_inputs"),featureWysiwygComposer:Object(rt.a)(e),featureComposeFlowSend:Object(C.i)(e),enableStickyComposer:Object(ba.k)(e,"msg_input_sticky_composer"),useSendButton:Object(ba.k)(e,"msg_input_send_btn"),replyCount:Object($e.S)(s),userCanPost:Object(te.p)(e,t)}},jW)(input_container_InputContainer);a("fxy3");const wW=new x.b("threads"),TW=(l.default.string.isRequired,l.default.object,l.default.string.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.bool,l.default.string,l.default.func,l.default.func,l.default.func,l.default.func,{channel:void 0,unknown:!1,archived:!1,frozen:!1,imWithDeletedMember:!1,cannotReply:!1,nonMember:!1,canJoin:!1,focusInputOnMount:!0,joinConversationApi:r.a,featureAnnounceOnly:!1,viewContext:void 0,clogThreadEvent:r.a,onFocus:r.a,onUpArrow:r.a,onDownArrowWhenEmpty:r.a});class thread_footer_ThreadFooter extends i.Component{constructor(e){super(e),this.joinChannel=this.joinChannel.bind(this),this.onUpArrow=this.onUpArrow.bind(this),this.onDownArrowWhenEmpty=this.onDownArrowWhenEmpty.bind(this)}onUpArrow(e=!1){var t=this.props;const a=t.channelId,n=t.threadTs;this.props.onUpArrow({cmd:e,channelId:a,threadTs:n})}onDownArrowWhenEmpty(){var e=this.props;const t=e.channelId,a=e.threadTs;this.props.onDownArrowWhenEmpty({channelId:t,threadTs:a})}joinChannel(){const e=this.props.channelId;this.props.joinConversationApi({channelId:e})}render(){var e=this.props;const t=e.channel,a=e.channelId,n=e.threadTs,s=e.unknown,r=e.archived,i=e.frozen,l=e.imWithDeletedMember,c=e.cannotReply,d=e.nonMember,u=e.canJoin,p=e.focusInputOnMount,h=e.featureAnnounceOnly,m=e.viewContext,b=e.clogThreadEvent,f=e.onFocus;if(s||l&&!i)return null;if(r||i){let e="";return e=i?Object(q.ib)(t)?wW.t("Your two organizations are no longer connected."):Object(q.qb)(t)?wW.t("These organizations are no longer connected."):wW.t("This channel is no longer shared with your organization."):wW.t("You are viewing a thread from an archived channel"),o.a.createElement(Rb.a,{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--archived"},e)}if(h&&c){const e=wW.t("Posting to this thread has been restricted to select members");return o.a.createElement(MH,{tooltip:e,featureAnnounceOnly:h})}return c?o.a.createElement(Rb.a,{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--no_reply"},wW.rt("Your Workspace Owners have limited who can post to <ChannelName></ChannelName>",null,()=>o.a.createElement(Bp.a,{channelId:a,inline:!0,iconProps:{inherit:!0}}))):d?u?o.a.createElement("div",{className:"p-threads_footer_join_container"},o.a.createElement(_e.d,{type:"primary",size:"medium",onClick:this.joinChannel},wW.t("Join Channel")),!h&&o.a.createElement("p",{className:"p-threads_footer_join_label"},wW.rt("You\u2019ll need to join <ChannelName></ChannelName> to reply",null,()=>o.a.createElement(Bp.a,{channelId:a,inline:!0,iconProps:{inherit:!0}})))):null:o.a.createElement(IW,{channelId:a,threadTs:n,key:Object($a.c)(a,n),focusInputOnMount:p,viewContext:m,clogThreadEvent:b,onFocus:f,onUpArrow:this.onUpArrow,onDownArrowWhenEmpty:this.onDownArrowWhenEmpty})}}thread_footer_ThreadFooter.displayName="ThreadFooter",thread_footer_ThreadFooter.defaultProps=TW;var NW=Object(u.b)(function(e,{channelId:t}){const a=Object(B.e)(e,t);return{unknown:Object(q.Ob)(a),archived:Object(q.Y)(a),frozen:Object(q.eb)(a),imWithDeletedMember:Object(q.nb)(e,a),cannotReply:!Object(q.l)(e,a),nonMember:Object(q.Db)(a)&&!Object(q.ob)(a),canJoin:Object(te.f)(e,t),featureAnnounceOnly:Object(m.m)(e,"feature_announce_only"),channel:a}},{joinConversationApi:wi.joinConversationApi})(thread_footer_ThreadFooter);function AW(e){return o.a.createElement(cW,{last:!0},o.a.createElement("div",{className:"p-threads_view__footer"},o.a.createElement(NW,e)))}AW.displayName="Footer";var RW=AW;const MW=new x.b("threads");function PW(){const e=Object(Fi.a)(),t=Object(Gv.b)({zdLocale:e,articleId:"115000769927"});return o.a.createElement("div",{className:"p-threads_view_empty"},o.a.createElement("div",{className:"p-threads_view_empty__contents"},o.a.createElement("div",{className:"p-threads_view_empty__emoji"},o.a.createElement(Ho.b,{text:":seedling:",emojiSize:Ho.a.LARGE})),o.a.createElement("p",{className:"p-threads_view_empty__header"},MW.t("Tend to your threads")),o.a.createElement("p",{className:"p-threads_view_empty__message"},MW.t("Threads you\u2019re involved in will be collected right here.")," ",o.a.createElement("br",null),o.a.createElement(Ze.a,{href:t},MW.t("Learn about threads")))))}PW.displayName="ThreadsEmptyState";var xW=PW;l.default.string,l.default.string,l.default.bool;const LW={className:void 0,label:void 0,showSpinner:!1};class divider_Divider extends i.PureComponent{render(){var e=this.props;const t=e.className,a=e.label,n=e.showSpinner;return o.a.createElement("div",{className:t},o.a.createElement("div",{className:"p-threads_view__divider_line"}),o.a.createElement("div",{className:"p-threads_view__divider_label"},n&&o.a.createElement(Kt.a,{color:"blue",size:"medium",className:"p-threads_view__divider_spinner"}),a))}}divider_Divider.displayName="Divider",divider_Divider.defaultProps=LW;const FW=new x.b("threads");l.default.bool;class loading_more_threads_indicator_LoadingMoreThreadsIndicator extends i.PureComponent{render(){const e=this.props.slowLoadingMore;return o.a.createElement("div",{className:"p-threads_view__loading_more_threads"},e?FW.t("Still loading... sorry for the long wait!"):FW.t("Loading more messages...",{fallbackHash:"49f93cf64ea9ce3b4fee3f46ee40103e4840b333",fallbackHashNs:"unread"}))}}loading_more_threads_indicator_LoadingMoreThreadsIndicator.displayName="LoadingMoreThreadsIndicator",loading_more_threads_indicator_LoadingMoreThreadsIndicator.defaultProps={slowLoadingMore:!1};const DW=new x.b("threads"),BW=(l.default.number,l.default.bool,l.default.func,{totalNewThreads:0,userHasUnreadThreads:!1,onClick:r.a});class new_threads_banner_NewThreadsBanner extends i.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){this.props.onClick()}render(){var e=this.props;const t=e.totalNewThreads,a=e.userHasUnreadThreads;if(!t)return null;if(!a)return null;const n=DW.rt('{totalNewThreads,plural,=1{{totalNewThreads} new thread}other{{totalNewThreads} new threads}} <span className="p-new_threads_banner__cta">Click to refresh</span>',{totalNewThreads:t});return o.a.createElement(_e.c,{className:"p-new_threads_banner p-message_pane__banner",onClick:this.onClick},n)}}new_threads_banner_NewThreadsBanner.displayName="NewThreadsBanner",new_threads_banner_NewThreadsBanner.defaultProps=BW;var UW=Object(u.b)(function(e){return{totalNewThreads:Object(OA.j)(e),userHasUnreadThreads:Object(m.m)(e,"feature_incremental_unread_counts")?Object(X.j)(e):Object(Q.c)(e)}})(new_threads_banner_NewThreadsBanner);a("NPry");const qW="THREADS-VIEW",HW=new x.b("threads"),WW=Object(mp.b)(root_message_RootMessage),GW=Object(mp.b)(reply_message_ReplyMessage),KW={threadKey:l.default.string,channelId:l.default.string,threadTs:l.default.string,reachedStart:l.default.bool,timestamps:l.default.arrayOf(l.default.string),messages:l.default.objectOf(l.default.object),lastRead:l.default.string,subscribed:l.default.bool,maxMarkableTs:l.default.string},VW=(l.default.string,l.default.arrayOf(l.default.shape(KW)),l.default.bool,l.default.bool,l.default.string,l.default.string,l.default.string,l.default.func,l.default.func,l.default.func,l.default.shape({error:l.default.func,info:l.default.func}),l.default.func,l.default.func,l.default.func,l.default.bool,l.default.oneOf(["light","dense"]),l.default.func,l.default.func,l.default.object,l.default.number,l.default.func,l.default.string,l.default.func,l.default.number,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.bool,l.default.bool,l.default.string,l.default.func,l.default.func,l.default.func,l.default.func,l.default.oneOf(["light","dark"]),l.default.string,l.default.bool,{teamId:void 0,threads:void 0,threadsPresent:!1,hasMore:!0,refreshId:void 0,cursorTs:void 0,currentUserId:void 0,refreshThreads:r.a,loadMoreThreads:r.a,truncateThreads:r.a,logger:{error:r.a,info:r.a},requestReplies:r.a,markThread:r.a,markAllThreads:r.a,featureAriaApplicationMode:!1,theme:"light",makeMessageSummary:r.a,clearTotalNewThreads:r.a,clogger:{track:r.a},allThreadsRefreshCount:void 0,showThreadOrRefresh:r.a,focusRequestedThreadKey:void 0,setFocusRequestedThreadKey:r.a,totalUnreadReplies:void 0,featureOfflineMode:!1,isOffline:!1,userAttentionIsOnChat:!1,composerVisible:!1,hasReceivedThreadedMessage:!0,setUserPrefByApi:r.a,removeFromSectionNavigation:r.a,addToSectionNavigation:r.a,setInitialActiveSection:r.a,clientTheme:"light",featureMessageNavigationShortcuts:!1,impressionLoggingWebGroup:"control",focusRequestedReplyTs:null,setFocusRequestedReplyTs:r.a,featureContextualMessageShortcuts:!1,isIAPhase1Enabled:!1});class threads_view_ThreadsView extends i.Component{static getDerivedStateFromProps({threads:e,currentUserId:t,refreshId:a,logger:n},r){let i=r.minimumVisibleTsByThread,o=r.maximumVisibleTsByThread,l=r.initialLastReadByThread,c=r.firstReadThreadKey,d=r.threadKeysOrdered;if(a!==r.currentRefreshId&&(i={},o={},l={},c=null,d=[]),Object(io.a)(d)){const t=function(e){const t=Object(_n.a)(e,"subscribed");return Object(Mh.a)(t,e=>`${e.maxMarkableTs>e.lastRead?1:0}-${e.maxMarkableTs}`).reverse()}(e);if(d=Object(ht.a)(t,"threadKey"),r.currentRefreshId){const t=Object(ht.a)(e,"threadKey");Object(WD.a)(d,t)||n.error(qW,`Thread order different after refreshing: ${d} - ${t}`)}}if(!c){const t=Object(_M.a)(e,"threadKey");c=Object(qu.a)(d,e=>t[e].maxMarkableTs<=t[e].lastRead)}const u={};e.forEach(e=>{if(i[e.threadKey])return;const t=nW(e);u[e.threadKey]=t});const p={};e.forEach(e=>{let a=o[e.threadKey];if(a){e.messages[a]||(a=Object(NP.a)(e.timestamps,e=>e<a),p[e.threadKey]=a);const n=Object(_n.a)(e.timestamps,e=>e>a),s=Object(Bu.a)(n,a=>{const n=e.messages[a];return n&&n.user===t}),r=Object(Bu.a)(n,t=>{const a=e.messages[t];return Object($e.bb)(a)});if(!s&&!r)return}const n=tW(e);p[e.threadKey]=n});const h={};return e.forEach(e=>{l[e.threadKey]||(h[e.threadKey]=e.lastRead)}),Object(io.a)(u)&&Object(io.a)(p)&&Object(io.a)(h)&&a===r.currentRefreshId&&c===r.firstReadThreadKey&&(d===r.threadKeysOrdered||Object(WD.a)(d,r.threadKeysOrdered))?null:s()({},r,{currentRefreshId:a,firstReadThreadKey:c,threadKeysOrdered:d,minimumVisibleTsByThread:s()({},i,u),maximumVisibleTsByThread:s()({},o,p),initialLastReadByThread:s()({},l,h)})}constructor(e){super(e),Object(la.a)(this,["fetchAround","fetchPre","fetchPost","renderRow","loadOlderReplies","loadNewerReplies","tryAgain","getPropsForItem","isFocusableItem","onKeyDown","reloadThreads","clogThreadEvent","clogThreadCloseEvent","onFocusEnter","onFocusLeave","onItemTabWithin","shouldIgnoreArrowKeys","logError","logInfo","focus","onArrowKeyRight","onItemFocusEnter","onUpArrowInEmptyInput","onDownArrowInEmptyInput","onListScroll"]),this.state={minimumVisibleTsByThread:{},maximumVisibleTsByThread:{},initialLastReadByThread:{},currentRefreshId:void 0,firstReadThreadKey:void 0,threadKeysOrdered:[],isDoingGlobalRefresh:!0,slowLoadingMore:!1,errored:!1,hasKeyboardFocus:!1},this.pendingPromises=[],this.threadsEventSeqId=0,this.initializedTime=Date.now(),this.clogThreadCloseHasBeenCalled=!1,this.onListScrolledDebounce=Object(ip.a)(this.onListScroll,150),this.listRef=o.a.createRef(),this.attachMessageImpressionLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger)}componentDidMount(){this.logInfo("mounting"),this.clogThreadEvent({event:"THREADS_VIEW_OPEN",metadata:{is_iap1:this.props.isIAPhase1Enabled}}),this.loadThreads(),this.props.hasReceivedThreadedMessage||this.props.setUserPrefByApi({pref:"has_received_threaded_message",value:!0})}shouldComponentUpdate(e,t){if(!Object(zf.a)(this.state,t))return!0;var a=this.props;const n=a.threads,s=fp()(a,["threads"]),r=e.threads,i=fp()(e,["threads"]);if(!Object(zf.a)(s,i))return!0;return!Object(zf.a)(n,r,3)}componentDidUpdate(e){const t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Np.a)(t)&&this.props.addToSectionNavigation(),Object(Ap.a)(t)&&this.props.removeFromSectionNavigation(),e.allThreadsRefreshCount<this.props.allThreadsRefreshCount&&!1===this.loading&&this.reloadThreads(),e.refreshId!==this.props.refreshId&&Object(dt.a)(this.nextScrollTop)&&this.listRef.current&&(this.listRef.current.scrollToOffset(this.nextScrollTop),this.nextScrollTop=null),e.teamId!==this.props.teamId&&this.attachMessageImpressionLogger(this.props.teamId,this.props.impressionLoggingWebGroup,this.props.clogger)}componentWillUnmount(){this.logInfo("unmounting"),this.clogThreadCloseEvent("OTHER"),this.pendingPromises.forEach(e=>e.cancel()),this.props.truncateThreads(),this.messageImpressionLogger.flushAllVisibleMessages()}onFocusEnter(e){this.setState(()=>({hasKeyboardFocus:e.isKeyboardFocus}),()=>{var e=this.props;const t=e.focusRequestedThreadKey,a=e.focusRequestedReplyTs,n=this.listRef.current;if(!n||!t)return;const s=n.getActiveItem(),r=this.threadKeyForListKey(s);t&&r===t&&(this.logInfo(`Focused ${t}`),this.props.setFocusRequestedThreadKey(null),a&&this.props.setFocusRequestedReplyTs(null))})}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}onItemFocusEnter(e={}){const t=e.id,a=e.relatedTarget;if(!this.props.featureMessageNavigationShortcuts||!t)return;const n=this.rows[this.keys.indexOf(t)];n&&"footer"===n.type&&a&&this.focusInput({channelId:n.channelId,threadTs:n.threadTs})}onUpArrowInEmptyInput({cmd:e=!1,channelId:t,threadTs:a}={}){if(!this.props.featureMessageNavigationShortcuts||e||!t||!a)return;const n=Object($a.c)(t,a);n&&this.focusItemAboveInput(n)}onDownArrowInEmptyInput({channelId:e,threadTs:t}={}){if(!this.props.featureMessageNavigationShortcuts||!e||!t)return;const a=Object($a.c)(e,t);a&&this.focusItemBelowInput(a)}onKeyDown(e){if(Object(Nu.a)(document.activeElement))return;if(!Object(Hq.a)(e))return;const t=this.getKeyboardFocusedThreadKey();if(!t)return;var a=Object($a.a)(t);const n=a.channelId,s=a.threadTs;this.focusInput({channelId:n,threadTs:s})}onArrowKeyRight(){const e=this.getKeyboardFocusedThreadKey();var t=Object($a.a)(e);const a=t.channelId,n=t.threadTs;a&&n&&(this.props.showThreadOrRefresh({channelId:a,threadTs:n,requestFocus:!0}),this.blur())}onItemTabWithin(){this.props.setInitialActiveSection()}onListScroll(){if(!this.listRef||!this.listRef.current)return;var e=this.listRef.current.getVisibleRange(void 0,!0);const t=e.start,a=e.end,n=this.rows.slice(t,a).filter(e=>["root","reply"].includes(e.type)).map(e=>({ts:"root"===e.type?e.threadTs:e.ts,channel:e.channelId}));try{this.messageImpressionLogger.setCurrentlyVisibleMessages(n)}catch(s){this.props.logger.error("threads_view_unable_log_message_impressions","Threads View unable to log message impressions",s)}}getKeyboardFocusedThreadKey(){const e=this.listRef.current;if(!e)return null;const t=e.getInitialActiveItem();return this.threadKeyForListKey(t)}getPropsForItem({index:e}){if(!this.props.makeMessageSummary)return;const t=this.rows[e];if(!t||!t.type)return;if("root"!==t.type&&"reply"!==t.type)return;const a="root"===t.type?t.threadTs:t.ts;return{"aria-label":this.props.makeMessageSummary({channelId:t.channelId,ts:a,hasFocus:this.state.hasKeyboardFocus,day:{ts:a,isFirstDay:!1,isLastDay:!1},viewContext:Ln.I.THREADS_VIEW})}}focusItemAboveInput(e){if(!e)return;const t=this.keys[this.keys.indexOf(`footer-${e}`)-1];t&&this.listRef.current&&this.listRef.current.focusOnKey(t)}focusItemBelowInput(e){if(!e)return;const t=this.keys[this.keys.indexOf(`footer-${e}`)+1];t&&this.listRef.current&&this.listRef.current.focusOnKey(t)}focusInput({channelId:e,threadTs:t}={}){if(!e||!t)return;const a=Object(Rr.a)({viewContext:Ln.I.THREADS_VIEW,channelId:e,threadTs:t});if(a){const e=()=>{a.focus()};Object(Fi.c)()?setTimeout(e,0):e()}}attachMessageImpressionLogger(e,t,a){if(this.messageImpressionLogger)try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(n){this.props.logger.error("threads_view_unable_log_message_impressions","Threads View unable to log message impressions",n)}this.messageImpressionLogger=new message_impression_logger_MessageImpressionLogger({teamId:e,experimentGroup:t,clogger:a,messageViewLocation:lp.ALL_THREADS})}shouldIgnoreArrowKeys(e){return!!Object(Nu.a)(e.target)||!this.state.hasKeyboardFocus}threadKeyForListKey(e){if(!e)return null;const t=this.keys.indexOf(e),a=this.rows[t];return a?a.threadKey:null}focus(){const e=this.listRef.current;e&&e.focus()}blur(){const e=this.listRef.current;e&&e.blur()}isFocusableItem({index:e}){const t=this.rows[e];if(!t)return!1;const a=["root","reply","heading","load_older","load_newer"];return this.props.featureMessageNavigationShortcuts&&a.push("footer"),Object(fo.a)(a,t.type)}clogThreadCloseEvent(e){if(this.clogThreadCloseHasBeenCalled)return;const t={view_session_elapsed_time:Date.now()-this.initializedTime,view_session_index:this.threadsEventSeqId,num_threads_loaded:this.props.threads.length,view_exit_event:e};this.clogThreadEvent({event:"THREADS_VIEW_CLOSE",metadata:t}),this.clogThreadCloseHasBeenCalled=!0}incrementTrackingSeqId(){this.threadsEventSeqId+=1}clogThreadEvent({event:e,metadata:t}){this.props.clogger.track(e,s()({is_threads_view:1,is_flexpane:0,view_session_index:this.threadsEventSeqId},t)),this.incrementTrackingSeqId()}componentDidCatch(e){this.setState(()=>({errored:!0})),this.logError("Threads view componentDidCatch"),this.props.logger.error(qW,e,"threads_view_did_catch")}loadThreads(){if(this.loading&&this.logError("Unexpectedly already loading"),!this.props.refreshThreads)return;this.loading=!0;const e=this.props.refreshThreads({limit:eW,refreshId:`threads-view-refresh-${Date.now()}`}).then(({maxTs:e}={})=>{this.listRef&&this.listRef.current&&(this.nextScrollTop=this.listRef.current.getScrollTop()),e?(this.logInfo(`marking all: ${e}`),this.props.markAllThreads({maxTs:e})):this.logInfo("no threads to mark"),this.setState(()=>({isDoingGlobalRefresh:!1,errored:!1}))}).catch(e=>{this.setState(()=>({errored:!0})),this.logError("refreshThreads caught error"),this.props.logger.error(qW,e,"threads_view_loading_error")}).finally(()=>{this.loading=!1,Object(xM.a)(this.pendingPromises,e)});this.pendingPromises.push(e)}reloadThreads(){this.logInfo("Reloading threads"),this.setState(()=>({currentRefreshId:null}),()=>{this.listRef&&this.listRef.current&&this.listRef.current.scrollToOffset(0),this.props.clearTotalNewThreads(),this.loadThreads()})}tryAgain(){this.setState(e=>s()({},e,{errored:!1}),()=>this.loadThreads())}loadOlderReplies(e,t){const a=Object($a.c)(e,t),n=Object(qu.a)(this.props.threads,{threadKey:a});if(!n)return this.logError(`Could not find ${a} in loadOlderReplies`),Promise.resolve();this.logInfo(`Loading older replies in ${a}`);const r=n.timestamps,i=this.state.minimumVisibleTsByThread[n.threadKey],o=Object(_n.a)(r,e=>e<i&&e!==t);if(o.length>=ZH)return this.setState(e=>s()({},e,{minimumVisibleTsByThread:s()({},e.minimumVisibleTsByThread,{[a]:Object(db.a)(Object(YH.a)(o,ZH))})})),Promise.resolve();if(n.reachedStart)return this.setState(e=>s()({},e,{minimumVisibleTsByThread:s()({},e.minimumVisibleTsByThread,{[a]:"0000000000.000000"})})),Promise.resolve();const l=this.props.requestReplies({channelId:e,threadTs:t,latest:Object(db.a)(r),limit:ZH}).then(({msgs:e})=>{const t=Object(db.a)(Object(YH.a)(e,ZH-o.length));this.setState(e=>s()({},e,{minimumVisibleTsByThread:s()({},e.minimumVisibleTsByThread,{[a]:t.ts})}))}).finally(()=>{Object(xM.a)(this.pendingPromises,l)});return this.pendingPromises.push(l),l}loadNewerReplies(e,t){const a=Object($a.c)(e,t),n=Object(qu.a)(this.props.threads,{threadKey:a});n?this.setState(e=>s()({},e,{maximumVisibleTsByThread:s()({},e.maximumVisibleTsByThread,{[a]:tW(n)})}),()=>{this.logInfo(`Marking ${a} to ${n.maxMarkableTs}`),this.props.markThread({channelId:e,ts:t,lastRead:n.maxMarkableTs,reason:"mark-thread-as-read-from-threads-view"})}):this.logError(`Could not find ${a} in loadNewerReplies`)}fetchAround(){return!1}fetchPre(){return!1}fetchPost(){var e=this.props;const t=e.threads,a=e.hasMore,n=e.cursorTs;if(this.loading||!a||!t||!t.length||!n)return!1;const r=setTimeout(()=>{this.setState(e=>s()({},e,{slowLoadingMore:!0}))},Ln.X);this.loading=!0,this.logInfo(`Loading more from ${n}`);const i=this.props.loadMoreThreads({currentTs:n,limit:eW}).then(({threads:e}={})=>{t&&this.setState(t=>{const a=Object(ht.a)(e,"threadKey");return{threadKeysOrdered:Object(lt.a)([...t.threadKeysOrdered,...a])}})}).finally(()=>{const e=this.state.slowLoadingMore;this.loading=!1,Object(xM.a)(this.pendingPromises,i),clearTimeout(r),e&&this.setState(e=>s()({},e,{slowLoadingMore:!1}))});return this.pendingPromises.push(i),i}determineFocusItemForRender(e,t){var a=this.props;const n=a.focusRequestedThreadKey,s=a.featureContextualMessageShortcuts,r=a.focusRequestedReplyTs;if(n)return s&&r?`${n}-${r}`:`root-${n}`;const i=this.listRef.current;if(!i)return null;const o=i.getInitialActiveItem();if(!o)return null;if((Object(Uu.a)(o,"load_older-")||Object(Uu.a)(o,"load_newer-"))&&!Object(fo.a)(t,o)){const a=e.indexOf(o);if(-1===a)return null;const n=e[a-1],s=t.indexOf(n);if(-1===s)return null;const r=t[s+1];if(r)return r}return null}logInfo(e){this.props.logger.info(qW,e)}logError(e){this.props.logger.error(qW,e)}renderRow(e,{hasFocus:t,itemId:a}){const n=this.rows[e];var s=this.state;const r=s.minimumVisibleTsByThread,i=s.maximumVisibleTsByThread,l=s.slowLoadingMore,c=s.hasKeyboardFocus;var u=this.props;const p=u.theme,h=u.featureOfflineMode,m=u.isOffline,b=d()("p-threads_view__divider",{"p-threads_view__divider--first":0===e}),f=HW.t("Loading threads\u2026");switch(n.type){case"heading":return o.a.createElement(oW,{channelId:n.channelId,threadTs:n.threadTs,firstItem:0===e,clogLinkClick:this.clogThreadCloseEvent});case"root":return o.a.createElement(WW,{channelId:n.channelId,ts:n.threadTs,theme:p,clogLinkClick:this.clogThreadCloseEvent,focused:t,renderActionsOffscreen:c,clogThreadEvent:this.clogThreadEvent,parentId:a});case"load_older":return o.a.createElement(_W,{messages:n.messages,channelId:n.channelId,threadTs:n.threadTs,minimumVisibleTs:r[n.threadKey],loadOlderReplies:this.loadOlderReplies,theme:p});case"load_newer":return o.a.createElement(OW,{channelId:n.channelId,threadTs:n.threadTs,maximumVisibleTs:i[n.threadKey],loadNewerReplies:this.loadNewerReplies,theme:p});case"reply":return o.a.createElement(GW,{channelId:n.channelId,ts:n.ts,minimumVisibleTs:r[n.threadKey],isNewReply:n.isNewReply,theme:p,focused:t,renderActionsOffscreen:c,clogThreadEvent:this.clogThreadEvent,parentId:a});case"divider":return o.a.createElement(divider_Divider,{className:b,label:HW.t("You\u2019re up to date")});case"loading":return o.a.createElement(divider_Divider,{className:b,label:f,showSpinner:!0});case"footer":return o.a.createElement(RW,{channelId:n.channelId,threadTs:n.threadTs,focusInputOnMount:!1,viewContext:Ln.I.THREADS_VIEW,clogThreadEvent:this.clogThreadEvent,onUpArrow:this.onUpArrowInEmptyInput,onDownArrowWhenEmpty:this.onDownArrowInEmptyInput});case"loading_more_threads":return h&&m?o.a.createElement(wp,{caption:HW.t("Go online to load more threads.")}):o.a.createElement(loading_more_threads_indicator_LoadingMoreThreadsIndicator,{slowLoadingMore:l});default:return this.logError(`Unknown row type ${n.type}`),null}}renderTopBanners(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"p-threads_view__top_banners"},o.a.createElement(vo,null),o.a.createElement(Eo.a,null,o.a.createElement(Bo,null)),o.a.createElement(UW,{onClick:this.reloadThreads})),o.a.createElement(Cu,null))}render(){var e=this.props;const t=e.threads,a=e.threadsPresent,n=e.currentUserId,s=e.hasMore,r=e.featureAriaApplicationMode,i=e.totalUnreadReplies,l=e.featureOfflineMode,c=e.isOffline;var d=this.state;const u=d.minimumVisibleTsByThread,p=d.maximumVisibleTsByThread,h=d.firstReadThreadKey,m=d.threadKeysOrdered,b=d.isDoingGlobalRefresh,f=d.initialLastReadByThread;if(d.errored)return o.a.createElement(o.a.Fragment,null,this.renderTopBanners(),o.a.createElement("div",{className:"p-threads_view"},o.a.createElement(Vo,{tryAgain:this.tryAgain,"data-qa":"threads_view_error"},HW.t("Something\u2019s fishy! Slack can\u2019t seem to load your threads.")," ",o.a.createElement("br",null),HW.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,({text:e})=>o.a.createElement(Ze.a,{href:"https://slack.com/help/contact"},e)))));if(l&&c&&!a)return o.a.createElement(o.a.Fragment,null,this.renderTopBanners(),o.a.createElement(ku,{caption:HW.t("Go online to get the latest threads.")}));if(!a)return o.a.createElement(o.a.Fragment,null,this.renderTopBanners(),o.a.createElement(qo,{clientTheme:this.props.clientTheme}));const _=Object(_M.a)(t,"threadKey"),g=Object(P.a)(Object(ht.a)(m,e=>_[e])),y=this.keys;var O=rW({threads:g,minimumVisibleTsByThread:u,maximumVisibleTsByThread:p,firstReadThreadKey:h,isDoingGlobalRefresh:b,currentUserId:n,initialLastReadByThread:f,hasMore:s,logError:this.logError});const C=O.rows,v=O.keys;this.rows=C,this.keys=v;const E=this.determineFocusItemForRender(y,this.keys);if(0===g.length)return o.a.createElement(o.a.Fragment,null,this.renderTopBanners(),o.a.createElement(xW,null));const k=this.keys.filter(e=>Object(Uu.a)(e,"footer-")),S=[{keys:["right"],handler:this.onArrowKeyRight,filter:this.shouldIgnoreArrowKeys}];let j;j=HW.t("Threads"),Object(dt.a)(i)&&(j=HW.t("Threads, {totalUnreadReplies, plural, =0 {no new replies} =1 {# new reply} other {# new replies}}",{totalUnreadReplies:i}));const I=o.a.createElement(zo.a,{id:Ln.I.THREADS_VIEW},o.a.createElement("div",{className:"p-threads_view",onKeyDown:this.onKeyDown},this.renderTopBanners(),o.a.createElement(pr.a,null,({width:e,height:t})=>o.a.createElement(Or.a,{id:"threads_view",ref:this.listRef,width:e,height:t,keys:this.keys,rowRenderer:this.renderRow,isFocusableItem:this.isFocusableItem,loadAround:this.fetchAround,loadPre:this.fetchPre,loadPost:this.fetchPost,persistentKeys:k,getPropsForItem:this.getPropsForItem,"aria-label":j,useAriaApplicationMode:r,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onScroll:this.onListScrolledDebounce,onItemTabWithin:this.onItemTabWithin,onItemFocusEnter:this.onItemFocusEnter,keyCommands:S,activeItem:E}))));return Object(re.a)()?I:o.a.createElement(Sp.a,{component:this,order:.1},I)}}threads_view_ThreadsView.displayName="ThreadsView",threads_view_ThreadsView.defaultProps=VW;const zW=Object(re.a)()?Object(H.a)(threads_view_ThreadsView,"ThreadsView",{index:0}):threads_view_ThreadsView;var $W=Object(u.b)(function(e){const t=Object(Ot.a)({state:e}),a=Object(ie.a)({state:e}),n=Object(OA.f)(e),s=Object(P.a)(Object(ht.a)(n,({threadKey:a})=>{var n=Object($a.a)(a);const s=n.channelId,r=n.threadTs,i=Object(B.e)(e,s);if(!i||Object(ee.e)(i))return t.warn(`Skipping ${a} in unknown or non-existent channel`),null;if(Object(q.Db)(i)&&!Object(q.ob)(i))return t.warn(`Skipping ${a} in non-member public channel`),null;var o=Object(ze.f)(e,a)||{timestamps:[],reachedStart:!0};const l=o.timestamps,c=o.reachedStart,d={},u=Object(ae.a)(e,s,r);if(!u)return t.warn(`Skipping ${a} with missing root message`),null;d[r]=u,l.forEach(t=>{const a=Object(ae.a)(e,s,t);a&&(d[t]=a)});const p=Object(QH.d)(e,{channelId:s,ts:r});return{threadKey:a,channelId:s,threadTs:r,reachedStart:c,timestamps:l,messages:d,lastRead:p.lastRead,subscribed:p.subscribed,maxMarkableTs:JH(e,s,l)||r}}));return{logger:t,clogger:a,teamId:Object(h.b)(e),featureAriaApplicationMode:Object(m.m)(e,"feature_aria_application_mode"),threadsPresent:void 0!==n,threads:s,hasMore:Object(OA.h)(e),refreshId:Object(OA.i)(e),cursorTs:Object(OA.g)(e),currentUserId:Object(m.d)(e),theme:Object(Wu.a)(e),allThreadsRefreshCount:Object(OA.c)(e),focusRequestedThreadKey:Object(OA.e)(e),totalUnreadReplies:Object(OA.k)(e),featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),isOffline:!Object(pa.c)(e),userAttentionIsOnChat:Object(wu.e)(e),composerVisible:(Object(rt.a)(e)||"composer_toolbar"===Object(ha.c)(e,"composer_toolbar"))&&Object(Tp.b)(e),hasReceivedThreadedMessage:Object(ba.k)(e,"has_received_threaded_message"),featureMessageNavigationShortcuts:Object(m.m)(e,"feature_message_navigation_shortcuts"),impressionLoggingWebGroup:Object(ha.c)(e,"impression_logging_web"),focusRequestedReplyTs:Object(OA.d)(e),featureContextualMessageShortcuts:Object(m.m)(e,"feature_contextual_message_shortcuts"),isIAPhase1Enabled:Object(bo.c)(e)}},function(e){return{refreshThreads:(...t)=>e(Object(OA.p)(...t)),loadMoreThreads:(...t)=>e(Object(OA.n)(...t)),truncateThreads:(...t)=>e(Object(OA.s)(...t)),requestReplies:(...t)=>e(Object(Gu.j)(...t)),clearTotalNewThreads:(...t)=>e(Object(OA.a)(...t)),markThread:(...t)=>e(Object(QH.e)(...t)),markAllThreads:(...t)=>e(Object(XH.c)(...t)),makeMessageSummary:(...t)=>e(Zu(...t)),showThreadOrRefresh:(...t)=>e(Object(Gu.n)(...t)),setFocusRequestedThreadKey:(...t)=>e(Object(OA.r)(...t)),setUserPrefByApi:(...t)=>e(Object(Ka.f)(...t)),setFocusRequestedReplyTs:(...t)=>e(Object(OA.q)(...t))}})(zW),YW=a("O6kw");a("PhaV");const QW=new x.b("files");class message_pane_drag_overlay_MessagePaneDragOverlay extends i.PureComponent{constructor(e){super(e),this.state={spriteLoaded:!1}}componentDidMount(){const e=new Image;this.spritePromise=new Promise(t=>{e.onload=(()=>{t()}),e.src=cdn_url+"/80588/img/dragdrop_sprites@2x.png"}).then(()=>{this.setState(()=>({spriteLoaded:!0}))})}componentWillUnmount(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}render(){var e=this.props;const t=e.featureAnnounceOnly,a=e.teamName,n=e.channelName,s=e.userCanPost,r=e.isImOrMpim,i=e.useNightIllustration,l=this.state.spriteLoaded;let c=!1;if(Object(Sf.a)(i))c=i;else{const e=(new Date).getHours();c=e>=20||e<8}const u=d()("p-message_pane_drag_overlay",{"p-message_pane_drag_overlay--night":!!c}),p=t&&!s?QW.t("Read only",{fallbackHash:"9b19a5a212deb29444cc1b420ad81703205848be"}):QW.rt("Upload to {teamName}",{teamName:a});let h="";h=t&&!s?QW.t("Only selected team members can post in this channel."):r?QW.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately with {userName}',{userName:n}):QW.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately to {channelName}',{channelName:n});let m="";return t&&!s?m=o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),o.a.createElement(bn.b,{type:"emoji-objects",className:"p-message_pane_drag_overlay__anim_readonly",inline:!0})):l&&(m=o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),o.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_03"}),o.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_02"}),o.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_01"}))),o.a.createElement("div",{className:u},o.a.createElement("div",{className:"p-message_pane_drag_overlay__info"},o.a.createElement("div",{className:"p-message_pane_drag_overlay__anim"},m),o.a.createElement("div",{className:"p-message_pane_drag_overlay__title"},p),o.a.createElement("div",{className:"p-message_pane_drag_overlay__subtitle"},h)))}}message_pane_drag_overlay_MessagePaneDragOverlay.displayName="MessagePaneDragOverlay",message_pane_drag_overlay_MessagePaneDragOverlay.defaultProps={featureAnnounceOnly:!1,teamName:"",channelName:"",isImOrMpim:!1,useNightIllustration:void 0};var XW=Object(u.b)(function(e,{channelId:t}){const a=Object(B.e)(e,t),n=Object(Se.d)(e);return{featureAnnounceOnly:Object(m.m)(e,"feature_announce_only"),channelName:Object(q.x)(e,a,{imIncludeAtSign:!1}),teamName:Object(xe.e)(n),userCanPost:Object(te.p)(e,a.id),isImOrMpim:Object(q.ib)(a)||Object(q.qb)(a)}})(message_pane_drag_overlay_MessagePaneDragOverlay);a("uC0n");const JW=new x.b("threads");class drag_overlay_DragOverlay extends i.PureComponent{constructor(e){super(e),this.state={spriteLoaded:!1}}componentDidMount(){const e=new Image;this.spritePromise=new Promise(t=>{e.onload=(()=>{t()}),e.src=cdn_url+"/80588/img/dragdrop_threads_sprites@2x.png"}).then(()=>{this.setState(()=>({spriteLoaded:!0}))})}componentWillUnmount(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}render(){var e=this.props;const t=e.featureAnnounceOnly,a=e.userCanThread,n=e.useNightIllustration,s=this.state.spriteLoaded;let r=!1;if(Object(Sf.a)(n))r=n;else{const e=(new Date).getHours();r=e>=20||e<8}const i=d()("p-thread_drag_overlay",{"p-thread_drag_overlay--night":!!r});let l="";t&&!a?l=o.a.createElement("div",{className:"p-thread_drag_overlay__anim--readonly"},o.a.createElement("div",{className:"p-thread_drag_overlay__anim_circle"}),o.a.createElement(bn.b,{type:"emoji-objects",className:"p-thread_drag_overlay__anim_readonly",inline:!0})):s&&(l=o.a.createElement("div",{className:"p-thread_drag_overlay__anim"},o.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_01"}),o.a.createElement("div",{className:"p-thread_drag_overlay__anim_card_01"}),o.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_02"})));const c=t&&!a?JW.t("Read only",{fallbackHash:"9b19a5a212deb29444cc1b420ad81703205848be"}):JW.t("Upload to thread"),u=JW.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately'),p=t&&!a?JW.t("Only selected team members can post in this thread."):u;return o.a.createElement("div",{className:i},o.a.createElement("div",{className:"p-thread_drag_overlay__info"},l,o.a.createElement("div",{className:"p-thread_drag_overlay__title"},c),o.a.createElement("div",{className:"p-thread_drag_overlay__subtitle"},p)))}}drag_overlay_DragOverlay.displayName="DragOverlay",drag_overlay_DragOverlay.defaultProps={featureAnnounceOnly:!1,useNightIllustration:void 0};var ZW=Object(u.b)(function(e){const t=Object($a.b)(e),a=Object($a.a)(t).channelId,n=Object(B.e)(e,a);return{featureAnnounceOnly:Object(m.m)(e,"feature_announce_only"),userCanThread:Object(q.l)(e,n)}})(drag_overlay_DragOverlay);a("Jm6a");const eG={MESSAGE_PANE:"message_pane",THREAD:"thread"},tG=(l.default.oneOf(Object(Z.a)(eG)).isRequired,l.default.node,l.default.string.isRequired,l.default.string,l.default.string,l.default.string,l.default.object,l.default.string,l.default.bool,l.default.bool,l.default.string,l.default.func,l.default.func,{children:void 0,threadTs:void 0,viewContext:void 0,className:void 0,elementProps:void 0,disableFileUploadsPref:void 0,featureAnnounceOnly:!1,userCanPostInChannel:!0,teamId:void 0,openFileUploadDialog:r.a,filterFilesForUpload:()=>Promise.resolve([])});class file_drag_drop_FileDragDrop extends i.Component{constructor(e){super(e),this.state={dragging:!1},this.activeElements=new Set,this.containerRef=o.a.createRef(),this.onDrop=this.onDrop.bind(this)}componentDidMount(){const e=this.containerRef.current;e.addEventListener("dragenter",e=>{this.shouldPreventDrag(e)||(e.preventDefault(),this.activeElements.add(e.target),1===this.activeElements.size&&this.setState(e=>s()({},e,{dragging:!0})))}),e.addEventListener("dragleave",e=>{e.preventDefault(),this.activeElements.delete(e.target),0===this.activeElements.size&&this.setState(e=>s()({},e,{dragging:!1}))}),e.addEventListener("dragover",e=>{this.shouldPreventDrag(e)||e.preventDefault()}),e.addEventListener("dragend",()=>{this.setState(e=>s()({},e,{dragging:!1})),this.activeElements.clear()}),e.addEventListener("drop",this.onDrop)}onDrop(e){var t=this.props;const a=t.channelId,n=t.threadTs,r=t.viewContext,i=t.teamId,o=t.userCanPostInChannel,l=t.featureAnnounceOnly;if(e.preventDefault(),this.setState(e=>s()({},e,{dragging:!1})),this.activeElements.clear(),l&&!o)return;const c=e.dataTransfer.files,d=Object(Rr.a)({viewContext:r,channelId:a,threadTs:n}),u={fileUploadAction:de.FileUploadAction.DRAG_AND_DROP,fileUploadSrc:de.FileUploadSrc.LOCAL};e.shiftKey?this.props.filterFilesForUpload({selectedFiles:[...c],channelId:a,threadTs:n}).then(e=>{if(!e||!e.length)return;Object(yo.a)(i).uploadFiles({files:e,shareData:{channelId:a,threadTs:n,metadata:u}})}):this.props.openFileUploadDialog({files:[...c],threadTs:n,initialChannelId:a,inputProxy:d,metadata:u})}shouldPreventDrag(e){var t=this.props;const a=t.disableFileUploadsPref,n=t.featureAnnounceOnly,s=t.userCanPostInChannel,r=Object(se.a)(e,"dataTransfer.types");return!Object(fo.a)(r.map(e=>e.toLowerCase()),"files")||("disable_all"===a||!n&&!s)}maybeRenderOverlay(){if(!this.state.dragging)return null;const e=this.props.channelId;switch(this.props.location){case eG.MESSAGE_PANE:return o.a.createElement(XW,{channelId:e});case eG.THREAD:return o.a.createElement(ZW,null);default:return null}}render(){var e=this.props;const t=e.children,a=e.className,n=e.elementProps;return o.a.createElement("div",s()({className:d()("p-file_drag_drop__container",a),ref:this.containerRef},n),t,this.maybeRenderOverlay())}}file_drag_drop_FileDragDrop.displayName="FileDragDrop",file_drag_drop_FileDragDrop.defaultProps=tG;var aG=Object(zo.b)(Object(u.b)((e,{channelId:t})=>({featureAnnounceOnly:Object(m.m)(e,"feature_announce_only"),disableFileUploadsPref:Object(gn.a)(e,"disable_file_uploads"),userCanPostInChannel:Object(te.p)(e,t),teamId:Object(h.b)(e)}),e=>({openFileUploadDialog:(...t)=>e(Object(ks.a)(...t)),filterFilesForUpload:(...t)=>e(Object(YW.a)(...t))}))(file_drag_drop_FileDragDrop));l.default.string,l.default.bool,l.default.bool,l.default.string,l.default.string,l.default.func.isRequired,l.default.func.isRequired;const nG={primaryView:void 0,userAttentionIsOnChat:!1,userCanPostInChannel:!1,teamId:void 0,disableFileUploadsPref:void 0};class clipboard_handler_ClipboardHandler extends i.Component{constructor(e){super(e),this.onPaste=this.onPaste.bind(this)}componentDidMount(){window.addEventListener("paste",this.onPaste)}componentWillUnmount(){window.removeEventListener("paste",this.onPaste)}onPaste(e){var t=this.props;const a=t.primaryView,n=t.userAttentionIsOnChat,s=t.userCanPostInChannel,r=t.teamId;if(!e||!e.clipboardData)return;if(!n)return;const i=this.getFiles(e);if(Object(io.a)(i))return;let o,l,c,d,u;if(Object(qq.a)(document.activeElement,e=>{const t=e.classList.contains("p-threads_footer__input");return t&&(d=e.querySelector(".p-message_input_field").getAttribute("data-thread-key"),u=e.querySelector(".p-message_input_field").getAttribute("data-view-context")),t})&&d){var p=Object($a.a)(d);const e=p.channelId,t=p.threadTs;o=e,l=t,c=Object(Rr.a)({viewContext:u,channelId:e,threadTs:t})}else Object(An.a)(a)&&s&&a&&(o=a,c=Object(Rr.a)({viewContext:Ln.I.MESSAGE_PANE,channelId:a}));if(!o)return;const h={fileUploadAction:de.FileUploadAction.COPY_AND_PASTE,fileUploadSrc:de.FileUploadSrc.LOCAL};e.shiftKey?this.props.filterFilesForUpload({selectedFiles:[...i],channelId:o,threadTs:l}).then(e=>{if(!e||!e.length)return;Object(yo.a)(r).uploadFiles({files:e,shareData:{channelId:o,threadTs:l,metadata:h}})}):this.props.openFileUploadDialog({files:Array.from(i),initialChannelId:o,fromPaste:!0,threadTs:l,inputProxy:c,metadata:h}),e.preventDefault()}getFiles(e){if("disable_all"===this.props.disableFileUploadsPref)return null;const t=Object(ht.a)(e.clipboardData.items,e=>e.type);return Object(_n.a)(e.clipboardData.files,e=>{if(-1!==e.type.indexOf("image")){if(Object(ue.q)()&&Object(fo.a)(t,"text/plain")&&Object(fo.a)(t,"text/html")&&Object(fo.a)(t,"text/rtf"))return!1;if(Object(ue.E)()&&Object(fo.a)(t,"text/plain")&&Object(fo.a)(t,"text/html")&&Object(fo.a)(t,"image/png"))return!1}return!0})}render(){return null}}clipboard_handler_ClipboardHandler.displayName="ClipboardHandler",clipboard_handler_ClipboardHandler.defaultProps=nG;const sG={openFileUploadDialog:(...e)=>Object(ks.a)(...e),filterFilesForUpload:(...e)=>Object(YW.a)(...e)};var rG=Object(u.b)(e=>{const t=Object(_.a)(e),a=Object(An.a)(t)&&t;return{primaryView:Object(_.a)(e),userAttentionIsOnChat:Object(wu.e)(e),userCanPostInChannel:a&&Object(te.p)(e,a),disableFileUploadsPref:Object(gn.a)(e,"disable_file_uploads"),teamId:Object(h.b)(e)}},sG)(clipboard_handler_ClipboardHandler),iG=a("MIIS"),oG=a("DBPf");l.default.string,l.default.string,l.default.bool.isRequired,l.default.number.isRequired,l.default.number.isRequired;class workspace_document_title_WorkspaceDocumentTitle extends i.PureComponent{static getDerivedStateFromProps(e,t){const a=!e.isWindowFocused&&(t.showHighlights||e.highlightCount>t.highlightCount),n=!e.isWindowFocused&&(t.showUnreads||e.unreadCount>t.unreadCount);return{highlightCount:e.highlightCount,unreadCount:e.unreadCount,showHighlights:a,showUnreads:n}}constructor(e){super(e),this.state={highlightCount:0,unreadCount:0,showHighlights:!1,showUnreads:!1}}render(){var e=this.props;const t=e.viewName,a=e.teamName;if(!a)return null;let n=t?`${t} | ${a}`:a;return this.state.showHighlights?n=`! ${n}`:this.state.showUnreads&&(n=`* ${n}`),o.a.createElement(oG.a,{title:n})}}workspace_document_title_WorkspaceDocumentTitle.displayName="WorkspaceDocumentTitle",workspace_document_title_WorkspaceDocumentTitle.defaultProps={viewName:"",teamName:""};var lG=workspace_document_title_WorkspaceDocumentTitle;const cG=new x.b("view"),dG=new x.b("welcome_place");l.default.shape({getState:l.default.func.isRequired,subscribeImmediate:l.default.func,subscribe:l.default.func.isRequired}).isRequired;class connected_workspace_document_title_ConnectedWorkspaceDocumentTitle extends i.Component{constructor(e){super(e),this.renderWithState=this.renderWithState.bind(this)}renderWithState(e){const t=Object(_.a)(e),a=Object(B.e)(e,t),n=Object(Se.d)(e);let s="";return t===wA.a.allUnreads||"Punreads"===t?s=cG.t("Unread Messages"):t===wA.a.allThreads?s=cG.t("Threads"):"Pwelcome"===t?s=dG.t("Get Started"):a&&(s=Object(q.x)(e,a,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1})),o.a.createElement(lG,{viewName:s,teamName:n&&n.name,isWindowFocused:!!Object(lM.g)(e),highlightCount:Object(X.f)(e),unreadCount:Object(X.g)(e)})}render(){return o.a.createElement(iG.a,{render:this.renderWithState,store:this.props.store})}}connected_workspace_document_title_ConnectedWorkspaceDocumentTitle.displayName="ConnectedWorkspaceDocumentTitle";var uG=connected_workspace_document_title_ConnectedWorkspaceDocumentTitle,pG=a("2LCd"),hG=a("5iqv");const mG={id:l.default.string.isRequired,isEnabled:l.default.bool.isRequired},bG=({id:e,isEnabled:t})=>{if(!e||!t)return null;return uk(e).view(e)};bG.propTypes=mG;var fG=Object(u.b)(e=>{const t=Object(_.a)(e);return{id:t,isEnabled:Object(TA.e)(e,t)}})(bG),_G=a("qMFv");l.default.object;const gG={appProfile:void 0};function yG({appProfile:e}){if(!e)return null;const t=Object(xg.b)(e.profile,512);return o.a.createElement("div",{className:"p-app_space_profile__side__avatar"},o.a.createElement("img",{className:"rounded",src:t,alt:"app avatar","data-qa":"app_profile_avatar"}))}yG.displayName="AppSpaceProfileSideAvatar",yG.defaultProps=gG;var OG=yG;const CG=new x.b("app_space"),vG=(l.default.bool.isRequired,l.default.string,l.default.string,l.default.func,l.default.object,l.default.object,l.default.bool.isRequired,{settingsUrl:void 0,homepageUrl:void 0,openAppManagementModal:r.a,appProfile:void 0,clogger:{track:r.a}});class app_space_profile_side_links_BaseAppSpaceProfileSideLinks extends i.PureComponent{constructor(e){super(e),this.onSettingsButtonClick=this.onSettingsButtonClick.bind(this),this.onWebsiteButtonClick=this.onWebsiteButtonClick.bind(this)}onWebsiteButtonClick(){this.props.clogger.track(de.EventId.APP_CLICK_LINK_APP_HOMEPAGE_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:de.UiStep.APP_SPACE_ABOUT_TAB,action:de.UiAction.CLICK,ui_element:de.UiElement.LINK_APP_HOMEPAGE}}})}onSettingsButtonClick(e){const t=this.props.appProfile;this.props.clogger.track(de.EventId.APP_CLICK_LINK_APP_SETTINGS_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:de.UiStep.APP_SPACE_ABOUT_TAB,action:de.UiAction.CLICK,ui_element:de.UiElement.LINK_APP_SETTINGS}}}),Object(XN.I)(t)&&(e.preventDefault(),this.props.openAppManagementModal({serviceId:Object(XN.o)(t),referringEventId:"APP_SPACE_ABOUT_OPEN"}))}renderSettingsButton(){var e=this.props;const t=e.showSettingsUrl,a=e.settingsUrl,n=e.appProfile,s=CG.t("Settings",{fallbackHash:"c7f73bb54d928922c3838bb789ee9fb8a5b1eb37",fallbackHashNs:"app_profile"});return t?o.a.createElement(_e.d,{type:"outline",size:"medium",href:Object(XN.I)(n)?void 0:a,"data-qa":"app_profile_settings_link",onClick:this.onSettingsButtonClick,className:"p-app_space_profile__side_link",title:s},s):null}renderWebsiteUrl(){var e=this.props;const t=e.homepageUrl,a=e.featureAppHomeUTA,n=e.settingsUrl,s=CG.t("App Homepage",{fallbackHash:"ee2dbe71c27837ecd0a10d866992e1b3ff0d9b2f",fallbackHashNs:"app_profile"});if(t)return o.a.createElement(_e.d,{type:"outline",size:"medium",href:t,"data-qa":"app_profile_homepage_link",className:"p-app_space_profile__side_link",title:s,onClick:this.onWebsiteButtonClick},s);const r=a&&n;if(!t&&a&&r){const e=CG.t("View in App Directory",{fallbackHash:"89d6871b6c4992dedd85fc07bc53a44293a6a9dd",fallbackHashNs:"app_profile"});return o.a.createElement(_e.d,{type:"outline",size:"medium",href:r,"data-qa":"app_profile_homepage_link",className:"p-app_space_profile__side_link",title:e,onClick:this.onWebsiteButtonClick},e)}return null}render(){return o.a.createElement("div",{className:"p-app_space_profile__side__links"},this.renderSettingsButton(),this.renderWebsiteUrl())}}app_space_profile_side_links_BaseAppSpaceProfileSideLinks.displayName="BaseAppSpaceProfileSideLinks",app_space_profile_side_links_BaseAppSpaceProfileSideLinks.defaultProps=vG;const EG={openAppManagementModal:ZN.a};var kG=Object(u.b)((e,{appProfile:t})=>({clogger:Object(ie.a)({state:e}),showSettingsUrl:Object(XN.z)(e,t),settingsUrl:Object(XN.y)(e,t),homepageUrl:Object(XN.k)(t),featureAppHomeUTA:Object(E.b)(e)}),EG)(app_space_profile_side_links_BaseAppSpaceProfileSideLinks),SG=a("Owxj");l.default.string,l.default.func;const jG={formattedDescription:"",clogLinkClick:r.a},IG=({formattedDescription:e,clogLinkClick:t})=>{const a=Object(i.useCallback)(e=>{e&&e.target&&e.target.href&&"A"===e.target.tagName&&(t(),e.preventDefault(),Object(Pr.a)(e.target.href))},[t]);return e?o.a.createElement("div",{onClick:a,dangerouslySetInnerHTML:{__html:e}}):null};IG.displayName="BaseFormattedAppDescription",IG.defaultProps=jG;var wG=Object(u.b)((e,{formattedDescription:t})=>({formattedDescription:Object(SG.a)(e,{messageText:t,teamId:Object(h.b)(e)})}))(IG);const TG=new x.b("app_space"),NG=(l.default.object,l.default.string,l.default.string,{appProfile:void 0,truncatedDescription:"",formattedDescription:""});function AG({appProfile:e,formattedDescription:t,truncatedDescription:a}){var n=Object(i.useState)(!1),s=at()(n,2);const r=s[0],l=s[1];if(!e||!t)return null;const c=Object(XN.J)(e),d=o.a.createElement(wG,{formattedDescription:t});return o.a.createElement("section",null,o.a.createElement("div",{className:"p-app_space_profile__description","data-qa":"app_profile_desc"},c?d:o.a.createElement(i.Fragment,null,o.a.createElement("span",{className:"p-app_space_profile__description__collapsed"},r?d:o.a.createElement(eg.a,{emoji:!0,text:a}))," ",o.a.createElement(Ze.a,{onClick:()=>l(!r),"data-qa":"toggle-app-description-expansion"},r?TG.t("Show less"):TG.t("Read more")))))}AG.displayName="AppSpaceProfileDescription",AG.defaultProps=NG;var RG=Object(u.b)((e,{appProfile:t})=>({truncatedDescription:Object(SG.a)(e,{messageText:Object(XN.r)(t),teamId:Object(h.b)(e)}),formattedDescription:Object(XN.h)(t)}))(Object(_p.a)(AG)),MG=a("Pl1I");const PG=new x.b("app_space");l.default.bool,l.default.bool,l.default.string,l.default.string,l.default.bool,l.default.string,l.default.string,l.default.bool;function xG({isPublished:e,isDistributed:t,appType:a,installedUserId:n,installerIsYou:s,appName:r,appHomeTeamDisplayName:l,featureAddAppHomeTeamName:c}){return e?null:o.a.createElement("section",null,o.a.createElement("div",{className:"p-app_space_profile__disclaimer","data-qa":"app_space_profile_disclaimer"},t?o.a.createElement(i.Fragment,null,PG.t("This app has not been reviewed or approved by Slack.")," ",o.a.createElement(Ze.a,{href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team"},PG.t("Learn more")),"."):o.a.createElement(MG.a,{isError:!1,appType:a,memberId:n,installerIsYou:s,appName:r,appHomeTeamDisplayName:l,featureAddAppHomeTeamName:c})))}xG.defaultProps={isPublished:!1,isDistributed:!1,appType:"",installedUserId:"",installerIsYou:!1,appName:"",appHomeTeamDisplayName:"",featureAddAppHomeTeamName:!1};var LG=Object(u.b)(function(e,{appProfile:t}){return{isPublished:Object(XN.G)(t),isDistributed:Object(XN.D)(t),appType:Object(XN.s)(t),installedUserId:Object(XN.v)(t),installerIsYou:Object(XN.w)(e,t),appName:Object(XN.m)(t),appHomeTeamDisplayName:Object(XN.i)(e,t),featureAddAppHomeTeamName:Object(m.m)(e,"feature_add_app_home_team_name")}})(xG);const FG=new x.b("app_space");l.default.object.isRequired,l.default.string,l.default.bool,l.default.string;function DG({appProfile:e,appName:t,isCustomIntegration:a,manageUrl:n}){return o.a.createElement("div",{className:"p-app_space_profile__info"},o.a.createElement("div",{className:"p-app_space_profile__side"},o.a.createElement(OG,{appProfile:e}),o.a.createElement(kG,{appProfile:e})),o.a.createElement("div",{className:"p-app_space_profile__about"},!!t&&o.a.createElement("h2",{className:"p-app_space__header","data-qa":"app_profile_name"},t),o.a.createElement(RG,{appProfile:e}),o.a.createElement(LG,{appProfile:e}),a&&o.a.createElement(_e.d,{type:"outline",href:n},FG.t("Manage",{note:"Manage permissions"}))))}DG.displayName="AppSpaceProfileInfo",DG.defaultProps={appName:"",isCustomIntegration:!1,manageUrl:""};var BG=Object(u.b)((e,{appProfile:t})=>({appName:Object(XN.m)(t),isCustomIntegration:Object(XN.C)(t),manageUrl:Object(XN.x)(e,t)}))(DG),UG=a("4phY");const qG=new x.b("app_space"),HG=(l.default.string,l.default.string,l.default.array,l.default.string,l.default.bool,l.default.func,{appName:"",appIcon:"",appScreenshots:[],youtubeUrl:"",featureReactFileViewer:!1,openFileViewer:r.a});class app_space_screenshots_AppSpaceScreenshots extends i.PureComponent{constructor(e){super(e),this.handleYoutubeClick=this.handleYoutubeClick.bind(this),this.handleImageClick=this.handleImageClick.bind(this)}handleYoutubeClick(){var e=this.props;const t=e.appName,a=e.appScreenshots,n=e.appIcon,s=e.youtubeUrl;if(e.featureReactFileViewer)this.props.openFileViewer({title:t,youtube:{src:s}});else{const e=Object(XN.A)(s);Object(Tu.g)({youtubeId:e,screenshots:a,appName:t,appIcon:n},0)}}handleImageClick(e){var t=this.props;const a=t.appName,n=t.appScreenshots,s=t.appIcon,r=t.youtubeUrl;if(t.featureReactFileViewer)this.props.openFileViewer({title:a,image:{src:n[e].image_1600,altText:a,thumbnailUrl:n[e].image_440,height:400,width:600}});else{const t=Object(XN.A)(r),i=r?e+1:e;Object(Tu.g)({youtubeId:t,screenshots:n,appName:a,appIcon:s},i)}}generateThumbnailUrl(e){const t=Object(XN.A)(e);return""!==t&&`https://i.ytimg.com/vi/${t}/hqdefault.jpg`}renderYoutubeVideo(){var e=this.props;const t=e.youtubeUrl,a=e.appName;if(!t)return null;const n=this.generateThumbnailUrl(t);if(!n)return null;const s=qG.t("Video of {appName}",{note:"Alt text for a screenreader to play a video about an app",appName:a});return o.a.createElement(_e.c,{onClick:this.handleYoutubeClick,className:"p-app_space_profile__screenshots_item"},o.a.createElement("img",{src:n,alt:s,className:"p-app_space_profile__youtube_thumbnail"}),o.a.createElement("div",{className:"p-app_space_profile__youtube_play_button"},o.a.createElement(bn.b,{type:"play",size:"inherit"})))}renderScreenshots(){var e=this.props;const t=e.appScreenshots,a=e.appName;if(!t||!t.length)return null;const n=qG.t("Screenshot of {appName}",{note:"Alt text for screenshots of an app in the full screen modal.",appName:a});return t.map((e,t)=>o.a.createElement(_e.c,{key:e.id,onClick:()=>this.handleImageClick(t),className:"p-app_space_profile__screenshots_item"},o.a.createElement("img",{src:e.image_440,alt:n})))}render(){var e=this.props;const t=e.youtubeUrl,a=e.appScreenshots;return a&&a.length||t&&""!==t?o.a.createElement("div",{className:"p-app_space__screenshots"},o.a.createElement("h3",{className:"p-app_space__subheader"},qG.t("Screenshots",{note:"Heading for screenshots of an app in the app profile."})),o.a.createElement("div",{className:"p-app_space_profile__screenshots","data-qa":"app_profile_screenshots"},this.renderYoutubeVideo(),this.renderScreenshots())):null}}app_space_screenshots_AppSpaceScreenshots.displayName="AppSpaceScreenshots",app_space_screenshots_AppSpaceScreenshots.defaultProps=HG,app_space_screenshots_AppSpaceScreenshots.displayName="AppSpaceScreenshots";const WG=app_space_screenshots_AppSpaceScreenshots;var GG=Object(u.b)(function(e,{appProfile:t}){return{youtubeUrl:Object(XN.t)(t),appScreenshots:Object(XN.n)(t),appName:Object(XN.m)(t),appIcon:Object(xg.b)(t.profile,512),featureReactFileViewer:Object(m.m)(e,"feature_react_file_viewer")}},e=>({openFileViewer:t=>e(Object(UG.a)(t))}))(WG),KG=a("KPXh"),VG=a("zwKj");const zG=new x.b("app_space"),$G=(l.default.func,l.default.object,l.default.shape({name:l.default.string.isRequired,usage:l.default.string.isRequired,description:l.default.string.isRequired}).isRequired,l.default.string,l.default.string,{autoFillSlashCommand:r.a,clogger:{track:r.a},appId:"",botId:""});function YG({autoFillSlashCommand:e,clogger:t,appId:a,botId:n,command:s}){const r=Object(KG.g)(s),l=Object(KG.i)(s),c=Object(KG.e)(s),d=Object(i.useCallback)(()=>{e({commandName:r}),t.track(de.EventId.APP_SPACE_ABOUT_SLASH_COMMAND_CLICK,{app_id:a,bot_id:n,contexts:{core:{app_id:a,bot_id:n}}})},[e,r,t,a,n]);return o.a.createElement("div",{className:"p-app_space_profile__slash_command","data-qa":"app_space_profile_slash_command"},o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("strong",null,r),o.a.createElement("span",null,l)),o.a.createElement("div",{className:"p-app_space_profile__slash_command_desc"},c)),o.a.createElement("div",null,o.a.createElement(_e.d,{type:"outline","data-qa":r,onClick:d},zG.t("Start command"))))}YG.displayName="AppSpaceSlashCommand",YG.defaultProps=$G;const QG={autoFillSlashCommand:(...e)=>Object(VG.a)(...e)};var XG=Object(u.b)(e=>({clogger:Object(ie.a)({state:e})}),QG)(YG);const JG=new x.b("app_space");l.default.object.isRequired;function ZG({appProfile:e}){const t=Object(XN.c)(e),a=Object(XN.l)(e),n=Object(XN.o)(e);return t&&t.length?o.a.createElement(i.Fragment,null,o.a.createElement("h3",{className:"p-app_space__subheader"},o.a.createElement("span",null,JG.t("Commands",{note:"Slash commands the app responds to"})),o.a.createElement("span",{className:"p-app_space__subheader__helper"},JG.t("Use / to start commands in any conversation",{note:"How to use slash commands helper text"}))),o.a.createElement("div",{className:"p-app_space_profile__slash_commands"},o.a.createElement("section",null,t.map(e=>o.a.createElement(XG,{key:e.name,command:e,appId:a,botId:n}))))):null}ZG.displayName="AppSpaceSlashCommands";var eK=o.a.memo(ZG);a("VTc2");const tK=new x.b("app_space"),aK=(l.default.object,l.default.object,l.default.bool,l.default.oneOfType([l.default.object,l.default.func]),l.default.number,l.default.string,l.default.bool,l.default.func,l.default.func,{appProfile:void 0,clogger:{track:r.a},showSlashCommands:!1,forwardedRef:void 0,hasKeyboardFocus:!1,tabIndex:void 0,role:void 0,onFocus:r.a,onBlur:r.a});function nK({clogger:e,appProfile:t,showSlashCommands:a,forwardedRef:n,hasKeyboardFocus:s,onFocus:r,onBlur:l,tabIndex:c,role:u}){const p=Object(XN.l)(t),h=Object(XN.o)(t),m=Object(i.useCallback)(()=>{e.track("APP_SPACE_ABOUT_OPEN",{app_id:p,bot_id:h,contexts:{core:{app_id:p,bot_id:h}}})},[e,p,h]),b=Object(i.useCallback)(()=>Object(_G.b)(t,h),[t,h]);if(Object(i.useEffect)(()=>{p&&h&&(b(),m())},[p,h,m,b]),!t||Object(ee.e)(t))return null;const f=Object(XN.m)(t)||"",_=tK.t("About {appName}",{appName:f,fallbackHash:"f7f9e16e31e93cf02131b1e81ff028152a103a0a",fallbackHashNs:"app_card"}),g=d()("p-app_space_profile",{"p-app_space_profile--focus":s});return o.a.createElement("div",{"aria-label":_,ref:n,className:g,"data-qa":"app_space_profile",onFocus:r,onBlur:l,tabIndex:c,role:u},o.a.createElement(BG,{appProfile:t}),o.a.createElement(GG,{appProfile:t}),a?o.a.createElement(eK,{appProfile:t}):null)}nK.displayName="BaseAppSpace",nK.defaultProps=aK;const sK=Object(u.b)((e,t)=>{const a=Object(_.a)(e),n=hA(e,a),s=Object(E.b)(e);if(!(Object(re.a)()||n&&Object(w.p)(e)))return{};const r=t.utaApp&&s?t.appProfile:Object(JN.b)(e,a);return{appProfile:r,showSlashCommands:Object(XN.M)(e,r),clogger:Object(ie.a)({state:e})}})(nK);var rK=o.a.forwardRef((e,t)=>o.a.createElement(sK,s()({},e,{forwardedRef:t})));l.default.string,l.default.bool,l.default.func,l.default.func;const iK={appId:null,hasKeyboardFocus:!1,onFocus:r.a,onBlur:r.a};class app_space_wrapper_AppSpaceWrapper extends o.a.Component{constructor(e){super(e),Object(la.a)(this,["focus"]),this.appSpaceRef=o.a.createRef()}componentDidMount(){this.focus()}componentDidUpdate(e){e.appId!==this.props.appId&&this.focus()}focus(){this.appSpaceRef&&this.appSpaceRef.current&&this.appSpaceRef.current.focus()}render(){return o.a.createElement(rK,s()({},this.props,{tabIndex:0,role:"tabPanel",ref:this.appSpaceRef}))}}app_space_wrapper_AppSpaceWrapper.displayName="AppSpaceWrapper",app_space_wrapper_AppSpaceWrapper.defaultProps=iK;const oK=Object(bk.a)(Object(H.a)(app_space_wrapper_AppSpaceWrapper,"AppSpaceWrapper",{index:5}));var lK=Object(u.b)(e=>{const t=Object(_.a)(e),a=Object(JN.b)(e,t);return{appId:Object(ee.b)(a)?a.app_id:null}})(oK),cK=a("pnoF"),dK=a("L4J1");var uK=Object(u.b)((e,{viewId:t})=>{return{view:Object(cK.a)(e,t)}})(dK.a),pK=a("jK/K"),hK=a("bbGV");const mK=new x.b("app_home"),bK=(l.default.string.isRequired,l.default.func.isRequired,l.default.object.isRequired,({app:e,setTab:t,channelId:a})=>{const n=Object(i.useCallback)(()=>{t({tabId:k.b.ABOUT,channelId:a})},[a,t]),s=mK.rt("In the meantime, learn more about {app} and what it can do by visiting the About tab.",{app:Object(On.b)(e)||o.a.createElement(hK.a,null)});return o.a.createElement("div",{className:"p-app_home__blockkit_loading_error"},o.a.createElement("h2",null,o.a.createElement(bn.b,{type:"life-ring",inline:!0})," ",mK.t("This is still a work in progress")),o.a.createElement("p",{className:"p-app_home__blockkit_loading_error__content"},s),o.a.createElement(_e.d,{type:"primary",onClick:n},mK.t("Learn More")))});bK.displayName="AppHomeTimeout";var fK=Object(u.b)(e=>({channelId:Object(_.a)(e)}),e=>({setTab:(...t)=>e(Object(D.a)(...t))}))(bK),_K=a("6BP1");const gK=new x.b("app_home"),yK=(l.default.string.isRequired,l.default.string.isRequired,e=>o.a.createElement("div",{className:"p-app_home__blockkit_loading_error","data-qa":"app_home_error_view"},o.a.createElement("h2",null,o.a.createElement(bn.b,{type:"life-ring",inline:!0})," ",gK.t("Hmm \u2014 something went wrong")),o.a.createElement("p",null,gK.t("There was an error loading this content. Mind trying again?")),o.a.createElement(_e.d,{type:"primary",onClick:()=>Object(_K.e)(e.teamId,[e.viewId])},gK.t("Reload"))));yK.displayName="AppHomeError";var OK=Object(u.b)(e=>({teamId:Object(h.b)(e)}))(yK);const CK=1e4,vK=(l.default.string.isRequired,l.default.string,l.default.bool,l.default.string,l.default.string,l.default.func,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.object.isRequired,{botId:void 0,containerId:void 0,renderBlockWrapper:void 0,appHomeIsLoading:!0,viewId:null,viewIsLoading:!1,viewIsStale:!1,viewIsNonExistentOrUnknown:!1});class app_home_blockkit_AppHomeBlockkit extends o.a.PureComponent{constructor(e){super(e),this.updateTimedOut=this.updateTimedOut.bind(this),this.state={timedOut:!1}}componentDidMount(){this.updateTimer()}componentDidUpdate(){this.updateTimer()}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}updateTimedOut(){this.setState(()=>({timedOut:!0}));var e=this.props;const t=e.appId,a=e.botId;e.clogger.track(de.EventId.APP_HOME_LOAD_ERROR,{app_id:t,bot_id:a,timeout:CK})}updateTimer(){this.state.timedOut||(this.timer&&(clearTimeout(this.timer),delete this.timer),this.showLoadingSpinner()&&(this.timer=setTimeout(this.updateTimedOut,CK)))}showLoadingSpinner(){return this.props.appHomeIsLoading||this.props.viewIsLoading}renderLoadingSpinner(){return o.a.createElement(Kt.a,{className:"p-app_home_spinner",size:"jumbo","data-qa":"app_home_bk_spinner"})}render(){if(this.props.viewIsNonExistentOrUnknown)return this.state.timedOut?o.a.createElement(fK,{app:this.props.app}):this.showLoadingSpinner()?this.renderLoadingSpinner():o.a.createElement(OK,{viewId:this.props.viewId});const e=d()("p-app_home__blockkit_container",{"p-app_home__blockkit_container--stale":this.props.viewIsStale});return o.a.createElement("div",{className:"p-app_home__blockkit","data-qa":"app_home_bk_app_view"},o.a.createElement("div",{className:e},o.a.createElement(uK,{viewId:this.props.viewId,containerContext:Vp.a.app_home,renderBlockWrapper:this.props.renderBlockWrapper,containerId:this.props.containerId})),this.props.viewIsStale&&this.renderLoadingSpinner())}}app_home_blockkit_AppHomeBlockkit.displayName="AppHomeBlockkit",app_home_blockkit_AppHomeBlockkit.defaultProps=vK;var EK=Object(u.b)((e,{appId:t,viewId:a})=>{const n=a&&Object(cK.a)(e,a);return{app:Object(yn.e)(e,t),viewIsLoading:!a||Object(ee.d)(n),viewIsStale:n&&Object(pK.a)(n),viewIsNonExistentOrUnknown:Object(ee.c)(n)||Object(ee.d)(n),clogger:Object(ie.a)({state:e})}})(app_home_blockkit_AppHomeBlockkit);a("Dcvo");const kK=new x.b("app_home"),SK=(l.default.string.isRequired,l.default.string,l.default.bool,l.default.string,l.default.string,l.default.bool,l.default.func,l.default.func,{botId:void 0,isLoading:void 0,viewId:void 0,appName:"",hasKeyboardFocus:!1,onFocus:r.a,onBlur:r.a});class app_home_BaseAppHome extends o.a.Component{constructor(e){super(e),Object(la.a)(this,["focus"]),this.appHomeRef=o.a.createRef()}componentDidMount(){this.focus()}componentDidUpdate(e){e.appId!==this.props.appId&&this.focus()}focus(){this.appHomeRef&&this.appHomeRef.current&&this.appHomeRef.current.focus()}render(){var e=this.props;const t=e.isLoading,a=e.appId,n=e.botId,s=e.viewId,r=e.appName,i=e.hasKeyboardFocus,l=e.onFocus,c=e.onBlur,u=d()("p-app_home",{"p-app_home--focus":i}),p=`${r} ${kK.t("Home",{fallbackHash:"70f8bb9a8a5393ef080507a89e4b98d139000d65",fallbackHashNs:"app_space"})}`;return o.a.createElement("div",{"aria-label":p,className:u,"data-qa":"app_home",onFocus:l,onBlur:c,tabIndex:0,ref:this.appHomeRef,role:"tabpanel"},o.a.createElement(EK,{appId:a,botId:n,viewId:s,appHomeIsLoading:t}))}}app_home_BaseAppHome.displayName="BaseAppHome",app_home_BaseAppHome.defaultProps=SK;const jK=Object(H.a)(app_home_BaseAppHome,"BaseAppHome",{index:5});var IK=Object(bk.a)(Object(u.b)(e=>{const t=Object(U.a)(e),a=t.appId,n=Object(yn.e)(e,a);return s()({appName:Object(On.b)(n)||""},t)})(jK));a("8ISr");const wK=new x.b("app_settings");l.default.string;class app_settings_BaseAppSettings extends o.a.Component{render(){return o.a.createElement("div",{className:"p-app_settings","data-qa":"app_settings"},o.a.createElement("div",{className:"p-app_settings_container"},o.a.createElement("h2",{className:"p-app_settings__sub_header"},wK.t("For App Permission and Authorizations, go to permissions")),o.a.createElement(_e.d,{type:"outline",size:"medium","data-qa":"app_settings_link",className:"p-app_settings_button",onClick:()=>window.open(this.props.settingsUrl,"_blank"),title:wK.t("Manage App Permissions")},wK.t("Manage App Permissions"))))}}app_settings_BaseAppSettings.displayName="BaseAppSettings",app_settings_BaseAppSettings.defaultProps={settingsUrl:""};var TK=Object(u.b)(e=>{const t=Object(_.a)(e);return{appProfile:Object(JN.b)(e,t),settingsUrl:Object(XN.y)(e,Object(JN.b)(e,t))}})(app_settings_BaseAppSettings),NK=a("Jufg"),AK=a("r6oD"),RK=a("PAPM"),MK=a("QEGb"),PK=a("02hs");const xK=new x.b("channel_details"),LK="CHANNEL-MEMBERS",FK=(l.default.string.isRequired,l.default.number.isRequired,l.default.bool,l.default.object.isRequired,l.default.func.isRequired,{className:"p-members_dialog__member_list_entity"});class members_dialog_MembersDialog extends i.Component{constructor(e){super(e),Object(la.a)(this,["fetchPost","renderRow","onSearchInputChange","onScroll"]),this.keys=null,this.loading=!1,this.state={memberIds:[],searchQuery:"",fullyLoaded:!1,marker:void 0,showScrollIndicatorTop:!1}}componentDidMount(){this.fetchMembers()}onSearchInputChange(e){const t=e.target.value;this.setState(()=>({searchQuery:t,memberIds:[],fullyLoaded:!1,marker:void 0}),()=>{this.fetchMembers()})}onScroll(e,{scrollTop:t=0}={}){const a=t>0;this.setState(()=>({showScrollIndicatorTop:a}))}getListKeys(){return this.state.memberIds}fetchPost(){this.fetchMembers()}fetchMembers(){this.loading||this.state.fullyLoaded||(this.props.logger.info(LK,"Fetching more"),this.loading=!0,this.props.fetchAndUpsertMembersForChannel({channelId:this.props.channelId,count:50,marker:this.state.marker,searchQuery:this.state.searchQuery}).then(({members:e,nextMarker:t})=>{this.setState(a=>({memberIds:Object(Vw.a)(a.memberIds,Object(ht.a)(e,"id")),fullyLoaded:!t,marker:t}),()=>{this.props.logger.info(LK,`Showing ${this.state.memberIds.length} members`),this.state.fullyLoaded&&this.props.logger.info(LK,"Done fetching")})}).finally(()=>{this.loading=!1}))}renderSearch(){return this.props.featureM11nChannelDetails?o.a.createElement("div",{className:"p-channel_details__members_dialog__search"},o.a.createElement(tC.a,{value:this.state.searchQuery,onChange:this.onSearchInputChange,placeholder:xK.t("Search members"),icon:"search","data-qa":"members_dialog_filter",autoFocus:!0})):null}renderRow(e){const t=this.keys[e];return t?this.renderMember(t):null}renderMember(e){return o.a.createElement(et.a,{userId:e,position:"left-bottom",includeRemoveFromChannelAction:!0},o.a.createElement(PK.a,{id:e,className:"p-members_dialog__member_list_btn","data-qa":"member_row_btn",listEntityProps:FK}))}renderMemberList(){this.keys=this.getListKeys();const e=this.state.showScrollIndicatorTop,t=d()("p-channel_details__members_dialog__list",{"p-channel_details__members_dialog__list--indicate-top":e});return o.a.createElement("div",{className:t},o.a.createElement(pr.a,null,({width:e,height:t})=>o.a.createElement(Or.a,{width:e,height:t,keys:this.keys,rowRenderer:this.renderRow,loadAround:this.fetchPost,loadPost:this.fetchPost,onScroll:this.onScroll})))}render(){const e=this.props.channelId;if(!this.props.featureM11nChannelDetails)return null;const t=o.a.createElement(Ti.a,{truncate:!0,channelId:e}),a=xK.rt("{member_count, number} members in {channel_name}",{member_count:this.props.memberCount,channel_name:t,fallbackHash:"7be769e7cb0f1f771e7a14fb7b1b6c90eaedf0cb",fallbackHashNs:"channel_pages"}),n="members_dialog__title-bar";return o.a.createElement(MK.a,{labelledby:n,centered:!0},o.a.createElement(mr.a,null,o.a.createElement(br.a,{id:n,title:a,"data-qa":"dialog_header"})),o.a.createElement("div",{className:"p-channel_details__members_dialog"},this.renderSearch(),this.renderMemberList()))}}members_dialog_MembersDialog.displayName="MembersDialog",members_dialog_MembersDialog.defaultProps={featureM11nChannelDetails:!1};var DK=Object(u.b)((e,{channelId:t})=>{const a=Object(Ot.a)({state:e});return{channelId:t,featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details"),logger:a}},e=>({fetchAndUpsertMembersForChannel:(...t)=>e(Object(RK.a)(...t))}))(members_dialog_MembersDialog);l.default.string.isRequired,l.default.object,l.default.arrayOf(l.default.string),l.default.number,l.default.func.isRequired;const BK={channel:void 0,memberList:[],memberCount:void 0},UK=({channelId:e,channel:t,memberList:a,memberCount:n,dispatch:s})=>{Object(i.useEffect)(()=>{s(Object(NK.b)({channelId:e,count:50}))},[e,s]);const r=Object(i.useCallback)(()=>{s(Object(ga.e)({element:o.a.createElement(DK,{channelId:e,memberCount:n})}))},[s,n,e]);if(Object(q.ib)(t))return null;const l=Object(dt.a)(n)?Object(x.o)(n):"\u2013",c=a.slice(0,50).map(e=>o.a.createElement(AK.a,{id:e,className:"p-about_tab__members__member",showPresence:!1,showStatus:!1,useShortMode:!0})),d=Object(dt.a)(n)&&n>c.length&&o.a.createElement(Cm.b,{type:"outline",className:"p-about_tab__members__see_all",onClick:r},"See All ",l," Members");return o.a.createElement("div",{className:"p-about_tab__members"},o.a.createElement("div",{className:"p-about_tab__members__heading"},l>0?`${l} Members`:"Members"),o.a.createElement("div",{className:"p-about_tab__members__list"},c),d)};UK.displayName="MembersList",UK.defaultProps=BK;var qK=Object(u.b)((e,{channelId:t})=>{const a=Object(vf.f)(e,t);return{channel:Object(B.e)(e,t),memberList:Object(NK.c)(e,t),memberCount:a&&a.counts&&a.counts.member_count}})(UK);l.default.string.isRequired,l.default.object,l.default.bool,l.default.func.isRequired;const HK={channel:void 0,isCallButtonVisible:!0},WK=({channelId:e,channel:t,isCallButtonVisible:a,dispatch:n})=>{const s=Object(i.useCallback)(()=>{if(Object(q.qb)(t)){const e=Object(q.I)(t);n(Object(Qk.a)({memberIds:e,source:ZI.b.MPIM}))}else n(Object(ew.b)({channelId:e}))},[t,e,n]),r=Object(i.useCallback)(()=>{n(Object(QI.d)())},[n]),l=!Object(q.ib)(t)&&o.a.createElement(Cm.b,{type:"primary",className:"p-about_tab__actions__button",onClick:s},"Add People"),c=a&&o.a.createElement(Cm.b,{type:"outline",className:"p-about_tab__actions__button",onClick:r},"Start a Call");return o.a.createElement("div",{className:"p-about_tab__actions"},l,c)};WK.displayName="ActionsList",WK.defaultProps=HK;var GK=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t);return{channel:a,isCallButtonVisible:Object(Nw.f)(e,a)}})(WK);l.default.string.isRequired,l.default.object,l.default.func.isRequired;const KK={channel:void 0},VK=({channelId:e,channel:t,dispatch:a})=>{const n=Object(i.useCallback)(()=>{a(Object(ga.e)({element:o.a.createElement(gB,{channelId:e})}))},[a,e]);if(!t)return null;if(Object(q.ib)(t)||Object(q.qb)(t))return null;const s=Object(q.S)(t);return s&&s.value?o.a.createElement("div",{className:"p-about_tab__purpose"},o.a.createElement(eg.a,{text:s.value,className:"p-about_tab__purpose__text"}),o.a.createElement(Ua.a,{onClick:n,className:"p-about_tab__purpose__edit"},"Edit")):o.a.createElement("div",{className:"p-about_tab__purpose"},o.a.createElement(Ua.a,{className:"p-about_tab__purpose__text",onClick:n},o.a.createElement(pe.a,{type:"pencil",size:"inherit",inline:!0,className:"margin_right_50"}),"Add a channel description\u2026"))};VK.displayName="PurposeBlock",VK.defaultProps=KK;var zK=Object(u.b)((e,{channelId:t})=>({channel:Object(B.e)(e,t)}))(VK),$K=a("hQtm");l.default.string.isRequired,l.default.arrayOf(l.default.object);const YK={pinnedItems:void 0},QK=({pinnedItems:e})=>{if(!e||!e.length)return null;const t=e.map(e=>o.a.createElement("div",{className:"p-about_tab__pins__item",key:e.ts||e.id},o.a.createElement($K.a,{pin:e})));return o.a.createElement("div",{className:"p-about_tab__pins"},o.a.createElement("h3",{className:"p-about_tab__pins__heading"},"Pinned"),t)};QK.displayName="PinsBlock",QK.defaultProps=YK;var XK=Object(u.b)((e,{channelId:t})=>({pinnedItems:Object(gt.h)(e,t)||[]}))(QK);const JK=Object(Er.a)(vr.a);l.default.string.isRequired,l.default.func.isRequired;class shared_file_SharedFile extends i.PureComponent{constructor(e){super(e),this.showFile=this.showFile.bind(this)}showFile(){this.props.previewFile({fileId:this.props.fileId,flexOrigin:"details",flexOriginId:"shared_files"})}render(){const e=this.props.fileId;return o.a.createElement(JK,{className:"p-channel_details__shared_files__file",fileId:e,onClick:this.showFile})}}shared_file_SharedFile.displayName="SharedFile";var ZK=Object(u.b)(null,function(e){return{previewFile:(...t)=>e(Object(qa.c)(...t))}})(shared_file_SharedFile);l.default.string.isRequired,l.default.func.isRequired;const eV=({channelId:e,dispatch:t})=>{var a=Object(i.useState)([]),n=at()(a,2);const s=n[0],r=n[1];if(Object(i.useEffect)(()=>{t(Object(jO.h)({channelId:e,count:10,reason:"about-view-files"})).then(({files:e}={})=>{const t=Object(Rh.a)(Object(Mh.a)(e,e=>Object(Qy.o)(e)));r(Object(ht.a)(t,"id"))})},[e,t]),!s.length)return null;const l=Object(ht.a)(s,e=>o.a.createElement(ZK,{key:e,fileId:e}));return o.a.createElement("div",{className:"p-about_tab__files"},o.a.createElement("h3",{className:"p-about_tab__files__heading"},"Recently Shared Files"),l)};eV.displayName="FilesBlock";var tV=Object(u.b)()(eV);a("U5UL");l.default.string.isRequired,l.default.bool;const aV=({channelId:e,isEnabled:t})=>t?o.a.createElement("div",{className:"p-about_tab"},o.a.createElement("div",{className:"p-about_tab__content"},o.a.createElement(zK,{channelId:e}),o.a.createElement(XK,{channelId:e}),o.a.createElement(tV,{channelId:e})),o.a.createElement("div",{className:"p-about_tab__sidebar"},o.a.createElement(GK,{channelId:e}),o.a.createElement(qK,{channelId:e}))):null;aV.displayName="AboutTab",aV.defaultProps={isEnabled:!1};var nV=Object(u.b)(e=>({isEnabled:Object(R.e)(e)}))(aV);a("ZYU7");l.default.string.isRequired,l.default.string.isRequired,l.default.array;const sV=({tabId:e,embedTabs:t})=>{const a=Object(R.b)(e);if(!1===a)return null;const n=t[a];if(!n)return null;switch(n.type){case"figma":return o.a.createElement("iframe",{title:n.label,className:"p-embed_tab__frame",src:`https://www.figma.com/embed?embed_host=astra&url=${decodeURI(n.url)}`});default:return null}};sV.defaultProps={embedTabs:[]};var rV=Object(u.b)((e,{channelId:t})=>({embedTabs:Object(R.c)(e,t)}))(sV);a("y4ZY");l.default.string,l.default.string.isRequired,l.default.bool;const iV=({tab:e,primaryView:t,isAppIm:n})=>{if(!e)return null;if(e&&0===e.indexOf("embed"))return o.a.createElement(rV,{channelId:t,tabId:e});const s=`${t}${e}`,r=Object(i.lazy)(()=>Promise.all([a.e(108),a.e(107)]).then(a.bind(null,"MEK5")));switch(e){case"about":return n?o.a.createElement(X_.b,{subtype:"app_space",key:s,className:"p-tab_view__error_boundary"},o.a.createElement(lK,null)):o.a.createElement(nV,{channelId:t});case"space":return o.a.createElement(i.Suspense,{fallback:""},o.a.createElement(r,{channelId:t}));case"app":return o.a.createElement(X_.b,{subtype:"app_home",key:s,className:"p-tab_view__error_boundary"},o.a.createElement(IK,{channelId:t}));case"settings":return o.a.createElement(TK,null);default:return null}};iV.defaultProps={tab:void 0,isAppIm:!1};var oV=Object(u.b)(e=>{const t=Object(_.a)(e);return{tab:O(e),primaryView:t,isAppIm:Object(q.lb)(e,t)}})(iV),lV=a("iqWe");l.default.string.isRequired,l.default.func.isRequired,l.default.object.isRequired;const cV=({appId:e,getAppProfile:t,clogger:a})=>{var n=Object(i.useState)(null),s=at()(n,2);const r=s[0],l=s[1],c=Object(i.useCallback)(()=>{a.track(de.EventId.APP_HOME_UTA_LOAD,{app_id:e})},[a,e]),d=Object(i.useCallback)(()=>{a.track(de.EventId.APP_HOME_UTA_ERROR,{app_id:e})},[a,e]),u=Object(i.useCallback)(()=>{t(e).then(e=>l(Object(VG.c)(null,e,null))).catch(d)},[t,d,e]);return Object(i.useEffect)(()=>{c(),u()},[c,u]),r?o.a.createElement("div",{className:"p-app_home_uta"},o.a.createElement(rK,{appProfile:r,utaApp:!0})):o.a.createElement(Kt.a,{className:"p-app_home_spinner",size:"jumbo","data-qa":"app_home_uta_spinner"})};cV.displayName="AppHomeUTA";var dV=Object(u.b)(e=>({clogger:Object(ie.a)({state:e})}),e=>({getAppProfile:t=>e(Object(lV.b)({appId:t}))}))(cV),uV=a("/xs0");const pV=Object(mt.b)("Jump the message pane to the end",e=>{e(Object(Sw.c)({ts:null}))});pV.meta={name:"triggerJumpToEnd",key:"actionsKeyCommandsTriggerJumpToEndTriggerJumpToEnd",description:"Jump the message pane to the end"};var hV=pV;const mV=Object(mt.b)("Handle key commands that trigger search",(e,t,{channelId:a}={})=>{e(Object(wi.markMostRecentMsgRead)({channelId:a,reason:"triggerMarkAsReadFromEscKey"})),e(Object(Sw.k)(null))});mV.meta={name:"triggerMarkAsReadFromEscKey",key:"actionsKeyCommandsTriggerMarkAsReadFromEscKeyTriggerMarkAsReadFromEscKey",description:"Handle key commands that trigger search"},mV.propTypes={channelId:l.default.string};var bV=mV;const fV=Object(mt.b)("Handle the escape key trigger",(e,t,{event:a}={})=>{a.preventDefault();const n=t(),s=Object(_.a)(n);Object(An.a)(s)&&(!function(e,t){const a=Object(w.j)(e),n=Object(ze.h)(e,t,a);return n&&!n.reachedEnd}(n,s)?function(e,t){const a=Object(B.e)(e,t);return Object(q.Pb)(a)||Object(w.f)(e)}(n,s)&&e(bV({channelId:s})):e(hV()))});fV.meta={name:"handleEscape",key:"actionsKeyCommandsHandleEscapeHandleEscape",description:"Handle the escape key trigger"},fV.propTypes={event:l.default.object.isRequired};var _V=fV;const gV=Object(mt.b)("Handle key commands that trigger search",(e,t,{event:a,keyCode:n}={})=>{a.preventDefault(),n===wg.codes.f?e(Object(oC.b)()):e(Object(oC.c)())});gV.meta={name:"triggerSearchFromKeyCommand",key:"actionsKeyCommandsTriggerSearchFromKeyCommandTriggerSearchFromKeyCommand",description:"Handle key commands that trigger search"},gV.propTypes={event:l.default.object.isRequired,keyCode:l.default.number.isRequired};var yV=gV;a("0nyD");const OV=6e3,CV=new x.b("unread");l.default.func.isRequired,l.default.bool.isRequired;class undo_mark_all_as_read_toast_BaseUndoMarkAllAsReadToast extends i.PureComponent{constructor(e){super(e),this.onUndo=this.onUndo.bind(this),this.toastRef=o.a.createRef()}onUndo(){this.props.onUndo();const e=this.toastRef.current&&this.toastRef.current.getWrappedInstance&&this.toastRef.current.getWrappedInstance();e&&e.hideToast()}render(){var e=this.props;e.onUndo;const t=e.featureUndoMarkAllAsRead,a=fp()(e,["onUndo","featureUndoMarkAllAsRead"]);return t?o.a.createElement(Ba.b,s()({ref:this.toastRef,fadeDelay:OV},a),o.a.createElement("span",{className:"p-undo_mark_all_as_read_toast__icon",role:"img","aria-label":CV.t("Ta-da")},"\ud83c\udf89"),o.a.createElement("span",{className:"p-undo_mark_all_as_read_toast__msg"},CV.t("You\u2019ve marked all unread messages and notifications as read.")," ",o.a.createElement(Ze.a,{className:"p-undo_mark_all_as_read_toast__btn","data-qa":"undo_mark_all_as_read_btn",onClick:this.onUndo},CV.t("Undo")))):null}}undo_mark_all_as_read_toast_BaseUndoMarkAllAsReadToast.displayName="BaseUndoMarkAllAsReadToast",undo_mark_all_as_read_toast_BaseUndoMarkAllAsReadToast.defaultProps={};const vV=Object(fs.a)("feature_undo_mark_all_as_read")(undo_mark_all_as_read_toast_BaseUndoMarkAllAsReadToast);const EV=e=>Object(_a.c)({element:o.a.createElement(vV,e)}),kV=Object(Ve.b)(e=>{const t={};return Object(B.g)(e).forEach(e=>{if(!Object(q.V)(e))return;const a=Object(q.D)(e);"0000000000.000000"!==a&&(t[e.id]=a)}),t});kV.meta={name:"getLastReadMarkers",key:"actionsGetLastReadMarkersGetLastReadMarkers"},kV.propTypes={};var SV=kV,jV=a("PJFs");const IV=Object(mt.b)("Mark all channels as read",(e,t)=>{const a=t(),n="treatment"===Object(ha.c)(a,"undo_mark_all_as_read")&&SV(a),s=Object(jV.a)(a);if(e(Object(mo.b)({markers:s,reason:"markAllAsRead"})),e(Object(Sw.k)(null)),e(Object(ho.b)()),n){const t=()=>{e(Object(mo.b)({markers:n,reason:"undo-markAllAsRead"})),e(Object(ho.b)())};e(EV({onUndo:t}))}});IV.meta={name:"markAllAsRead",key:"actionsMarkAllAsReadMarkAllAsRead",description:"Mark all channels as read"},IV.propTypes={};var wV=IV;const TV=new x.b("client");l.default.func.isRequired,l.default.func.isRequired,l.default.bool.isRequired;class shift_escape_confirm_dialog_ShiftEscapeConfirmDialog extends o.a.PureComponent{constructor(e){super(e),this.state={dontAskAgain:!1},this.onGo=this.onGo.bind(this),this.onCheckboxToggle=this.onCheckboxToggle.bind(this)}onCheckboxToggle(){this.setState(e=>({dontAskAgain:!e.dontAskAgain}))}onGo(){this.state.dontAskAgain&&this.props.setUserPrefByApi({pref:"confirm_clear_all_unreads",value:!1}),this.props.markAllAsRead()}render(){const e=this.props.featureUndoMarkAllAsRead,t=this.state.dontAskAgain;return o.a.createElement(ya.a,{"data-qa":"shift_escape_confirm_dialog",title:TV.t("Clear all unreads?"),goButtonText:TV.t("Yes, clear all!"),onGo:this.onGo,showCancelButton:!0},o.a.createElement("p",null,e?TV.rt("<b>Shift+esc</b> will clear all unread messages and notifications. Are you sure you want to do this?"):TV.rt("<b>Shift+esc</b> will clear all unread messages and notifications. Are you sure you want to do this? It\u2019s liberating\u2026 but there\u2019s no going back.")),o.a.createElement(Dn.a,{htmlFor:"dont_ask_again",type:"inline",text:TV.t("Don\u2019t ask me again, please")},o.a.createElement(Bn.a,{id:"dont_ask_again",checked:t,onChange:this.onCheckboxToggle})))}}shift_escape_confirm_dialog_ShiftEscapeConfirmDialog.displayName="ShiftEscapeConfirmDialog";var NV=Object(u.b)(e=>({featureUndoMarkAllAsRead:Object(m.m)(e,"feature_undo_mark_all_as_read")}),e=>({markAllAsRead:(...t)=>e(wV(...t)),setUserPrefByApi:(...t)=>e(Object(Ka.f)(...t))}))(shift_escape_confirm_dialog_ShiftEscapeConfirmDialog);const AV=Object(mt.b)("Opens the Channel Create modal in client",e=>e(Object(ga.e)({element:o.a.createElement(NV,null)})));AV.meta={name:"openShiftEscapeConfirmDialog",key:"actionsOpenShiftEscapeConfirmDialogOpenShiftEscapeConfirmDialog",description:"Opens the Channel Create modal in client"},AV.propTypes={};var RV=AV;const MV=Object(mt.b)("Handle key commands that trigger search",(e,t,{event:a}={})=>{if(a.repeat)return;a.preventDefault();const n=t();if(Object(ba.k)(n,"confirm_clear_all_unreads"))return void e(RV());const s="treatment"===Object(ha.c)(n,"undo_mark_all_as_read")&&SV(n),r=Object(jV.a)(n);if(e(Object(mo.b)({markers:r,reason:"triggerMarkAllAsReadFromEscKey"})),e(Object(Sw.k)(null)),e(Object(ho.b)()),s){const t=()=>{e(Object(mo.b)({markers:s,reason:"undo-markAllAsRead"})),e(Object(ho.b)())};e(EV({onUndo:t}))}});MV.meta={name:"triggerMarkAllAsReadFromEscKey",key:"actionsKeyCommandsTriggerMarkAllAsReadFromEscKeyTriggerMarkAllAsReadFromEscKey",description:"Handle key commands that trigger search"},MV.propTypes={event:l.default.object.isRequired};var PV=MV;const xV=Object(mt.b)("Cmd+Shift+\\ handler",(e,t,{event:a}={})=>{const n=Object(Ot.a)({getState:t,label:"GLOBAL-RXN-SHORTCUT"}),s=Object(_.a)(t());let r,i=Ln.I.MESSAGE_PANE,o=Object(An.a)(s)?s:void 0;const l=document.activeElement;if(Object(Nu.a)(l)){let e;if(Object(qq.a)(document.activeElement,t=>{const a=t.classList.contains("p-threads_footer__input");return a&&(e=t.querySelector(".p-message_input_field").getAttribute("data-thread-key"),i=t.querySelector(".p-message_input_field").getAttribute("data-view-context")),a}),e){var c=Object($a.a)(e);o=c.channelId,r=c.threadTs}}const d=Object(Rr.a)({viewContext:i,channelId:o,threadTs:r});d?d.openReactionPopoverForLastMessage?(d.openReactionPopoverForLastMessage(),a.preventDefault()):n.warn(`No openReactionPopoverForLastMessage for ${i}-${o}-${r}`):n.info(`No input for ${i}-${o}-${r}`)});xV.meta={name:"triggerReactionPopoverForLastMessage",key:"actionsKeyCommandsTriggerReactionPopoverForLastMessageTriggerReactionPopoverForLastMessage",description:"Cmd+Shift+\\ handler"},xV.propTypes={event:l.default.object.isRequired};var LV=xV,FV=a("u4Vc");a("PQ52");const DV=new x.b("keyboard_shortcuts"),BV=(l.default.func.isRequired,l.default.func.isRequired,l.default.string,l.default.object,{keyboardLocale:null,telemeter:{count:r.a}});class keyboard_shortcut_prompt_KeyboardShortcutPrompt extends i.Component{constructor(e){super(e),this.closeAndShowKeyboardShortcuts=this.closeAndShowKeyboardShortcuts.bind(this)}componentDidMount(){this.props.telemeter.count("displayed_keyboard_shortcuts_coachmark")}componentWillUnmount(){this.props.telemeter.count("dismissed_keyboard_shortcuts_coachmark")}getSlashKey(){const e=this.props.keyboardLocale;return Object(x.j)("/",{kb:e})}closeAndShowKeyboardShortcuts(){this.props.telemeter.count("opened_keyboard_shortcuts_fp_from_coachmark"),this.props.showKeyboardShortcuts()}render(){const e=Object(ue.q)()?DV.t("Cmd"):DV.t("Ctrl"),t=this.getSlashKey(),a=DV.t("F6");return o.a.createElement(xN.a,{closeModal:this.props.closeModal},o.a.createElement(xN.h,null,o.a.createElement(xN.j,{title:DV.t("Navigating Slack with a keyboard?")})),o.a.createElement(xN.d,null,o.a.createElement(xN.e,null,o.a.createElement("p",null,DV.t("Shortcuts make it easier to get around in Slack. Here are a few you might find helpful:")),o.a.createElement("ul",{className:"p-keyboard_shortcut_prompt__list"},o.a.createElement("li",{className:"p-keyboard_shortcut_prompt__list_item"},o.a.createElement("span",{className:"c-keyboard_key"},o.a.createElement(bn.b,{type:"arrow-up-medium"})),o.a.createElement("span",{className:"c-keyboard_key"},o.a.createElement(bn.b,{type:"arrow-down-medium"}))," ",DV.t(" Move focus through messages")),o.a.createElement("li",{className:"p-keyboard_shortcut_prompt__list_item"},!Is.V&&o.a.createElement("span",{className:"c-keyboard_key"},e),o.a.createElement("span",{className:"c-keyboard_key"},a)," ",DV.t(" Move focus to the next section")),o.a.createElement("li",{className:"p-keyboard_shortcut_prompt__list_item"},!Is.V&&o.a.createElement("span",{className:"c-keyboard_key"},e),o.a.createElement("span",{className:"c-keyboard_key"},DV.t("K"))," ",DV.t("Quick Switcher"))),o.a.createElement("p",{className:"no_bottom_margin"},DV.rt('And that\u2019s just the beginning. To view the full list of keyboard shortcuts, just press <span class="c-keyboard_key">{cmd_key}</span> + <span class="c-keyboard_key">{slash_key}</span>',{cmd_key:e,slash_key:t})))),o.a.createElement(xN.f,null,o.a.createElement(xN.g,null,o.a.createElement(_e.d,{type:"outline",onClick:this.closeAndShowKeyboardShortcuts},DV.t("View More")),o.a.createElement(xN.c,{type:"primary"},DV.t("Got it")))))}}keyboard_shortcut_prompt_KeyboardShortcutPrompt.displayName="KeyboardShortcutPrompt",keyboard_shortcut_prompt_KeyboardShortcutPrompt.defaultProps=BV;const UV={closeModal:(...e)=>Object(ga.a)(...e),showKeyboardShortcuts:(...e)=>Object(qa.h)(...e)},qV=Object(u.b)(function(e){return{telemeter:Object(dI.c)({state:e})}},UV)(keyboard_shortcut_prompt_KeyboardShortcutPrompt),HV=Object(Qr.a)(qV);const WV=Object(mt.b)("Opens the keyboard shortcut prompt",e=>{e(Object(ga.e)({element:o.a.createElement(HV,null),name:FV.a}))});WV.meta={name:"openKeyboardShortcutPrompt",key:"componentsKeyboardShortcutPromptKeyboardShortcutPromptOpenKeyboardShortcutPrompt",description:"Opens the keyboard shortcut prompt"};let GV,KV=0;const VV=Object(mt.b)("After 5 consecutive tabs we show a dialog explaining kb shortcuts",e=>{if(4===KV)return e(WV()),e(Object(Ka.f)({pref:"seen_keyboard_shortcuts_coachmark",value:!0})),clearTimeout(GV),void(KV=0);KV+=1,clearTimeout(GV),GV=setTimeout(()=>{KV=0},1e3)});VV.meta={name:"triggerKeyboardShortcutsPrompt",key:"actionsKeyCommandsTriggerKeyboardShortcutsPromptTriggerKeyboardShortcutsPrompt",description:"After 5 consecutive tabs we show a dialog explaining kb shortcuts"};var zV=VV,$V=a("Nc5J"),YV=a("0Mct");const QV=Object(mt.b)("Toggles Dark Mode; for development only.",(e,t)=>{const a=Object(M.c)(t());e(Object(M.f)("light"===a?"dark":"light"))});QV.meta={name:"triggerDarkModeToggle",key:"actionsKeyCommandsTriggerDarkModeToggleTriggerDarkModeToggle",description:"Toggles Dark Mode; for development only."};var XV=QV,JV=a("YYb+"),ZV=a("ZpWa");var ez=[{keys:["mod+f","mod+g"],handler:yV,ignoreIf:e=>!Object(wu.e)(e)||!Is.V&&!Object(ba.k)(e,"f_key_search")},{keys:["mod+k"],handler:FP.a,ignoreIf:e=>{const t=Object(JV.e)(e);return!Object(wu.e)(e)&&!t||!Is.V&&!Object(ba.k)(e,"k_key_omnibox")}},{keys:["mod+t"],handler:FP.a,ignoreIf:e=>{const t=Object(JV.e)(e);return!Is.V||!Object(wu.e)(e)&&!t}},{keys:["esc"],handler:_V,ignoreIf:e=>!Object(wu.e)(e)},{keys:["shift+esc"],handler:PV,ignoreIf:e=>!Object(wu.e)(e)},{keys:["mod+shift+y"],handler:({event:e})=>(e.preventDefault(),Object(LC.a)({fromKeyboardShortcut:!0})),ignoreIf:e=>!Object(wu.e)(e)},{keys:["mod+,"],handler:()=>Object(ol.a)({fromKeyboardShortcut:!0}),ignoreIf:e=>!Object(wu.e)(e)||!(Object(ue.q)()&&Is.V)},{keys:["mod+shift+k"],handler:({event:e})=>(e.preventDefault(),Object(Qk.a)()),ignoreIf:e=>!Object(wu.e)(e)},{keys:["mod+shift+l"],handler:()=>Object(fe.a)(),ignoreIf:e=>!Object(wu.e)(e)},{keys:["mod+."],handler:qa.s,ignoreIf:e=>!Object(wu.e)(e)},{keys:["mod+/"],handler:({event:e,isScreenReaderEnabled:t})=>{e.preventDefault();const a=t?"keyboard_shortcuts":null;return Object(qa.t)({focusKey:a})},ignoreIf:e=>!Object(wu.e)(e)&&!Object(wu.d)(e)},{keys:["mod+shift+a"],handler:({event:e})=>(e.preventDefault(),Object($V.a)()),ignoreIf:e=>!Object(wu.e)(e)||!Object(ba.k)(e,"enable_unread_view")},{keys:["mod+shift+t"],handler:YV.a,ignoreIf:e=>!Object(wu.e)(e)||!Is.V},{keys:["mod+shift+m"],handler:({event:e,isScreenReaderEnabled:t})=>{e.preventDefault();const a=t?"activity":null;return Object(qa.q)({focusKey:a})},ignoreIf:e=>!(!ZS.a.chrome||Is.V)||!Object(wu.e)(e)},{keys:["mod+shift+s"],handler:({isScreenReaderEnabled:e})=>{const t=e?"stars":null;return Object(qa.v)({focusKey:t})},ignoreIf:e=>ZS.a.firefox||!Object(wu.e)(e)},{keys:["mod+shift+e"],handler:qa.u,ignoreIf:e=>ZS.a.firefox||!Object(wu.e)(e)},{keys:["mod+shift+i"],handler:({isScreenReaderEnabled:e})=>{const t=e?"info":null;return Object(qa.r)({focusKey:t})},ignoreIf:e=>!Is.V||!Object(wu.e)(e)||!Object(An.a)(Object(_.a)(e))},{keys:["mod+shift+\\"],handler:LV,ignoreIf:e=>!Object(wu.e)(e)},{keys:["command+left"],handler:({event:e})=>La({event:e,fromKeyboardShortcut:!0}),ignoreIf:e=>!Object(ue.q)()||!Object(wu.e)(e)||Object(Nu.a)(document.activeElement)},{keys:["command+right"],handler:({event:e})=>Fa({event:e,fromKeyboardShortcut:!0}),ignoreIf:e=>!Object(ue.q)()||!Object(wu.e)(e)||Object(Nu.a)(document.activeElement)},{keys:["command+["],handler:({event:e})=>La({event:e,fromKeyboardShortcut:!0}),ignoreIf:e=>!Object(ja.a)(e)||!Object(ue.q)()},{keys:["command+]"],handler:({event:e})=>Fa({event:e,fromKeyboardShortcut:!0}),ignoreIf:e=>!Object(ja.a)(e)||!Object(ue.q)()},{keys:["alt+left"],handler:({event:e})=>La({event:e,fromKeyboardShortcut:!0}),ignoreIf:e=>!Object(ja.a)(e)||Object(ue.q)()},{keys:["alt+right"],handler:({event:e})=>Fa({event:e,fromKeyboardShortcut:!0}),ignoreIf:e=>!Object(ja.a)(e)||Object(ue.q)()},{keys:["tab"],handler:zV,ignoreIf:e=>!Object(wu.e)(e)||Object(Nu.a)(document.activeElement)||Object(ba.k)(e,"seen_keyboard_shortcuts_coachmark")},{keys:["command+option+shift+d"],handler:XV,ignoreIf:e=>!(Object(ZV.a)(e)&&(ue.l||ue.o))},{keys:["mod+shift+r"],handler:()=>Object(JU.a)({reason:"cmd_shift_r",reasonKey:"cmdshiftr"}),ignoreIf:e=>!(Is.V&&Object(m.m)(e,"feature_sonic_hard_reload"))}],tz=a("KU1P"),az=a("mqWI");l.default.node.isRequired,l.default.object.isRequired;function nz({children:e,logger:t}){return o.a.createElement(az.a.Provider,{value:t},e)}nz.displayName="LoggerContextProvider";var sz=Object(u.b)(function(e){return{logger:Object(Ot.a)({state:e})}})(nz),rz=a("5APj");l.default.node.isRequired;function iz({children:e}){return o.a.createElement(rz.a,null,o.a.createElement(tz.a,null,o.a.createElement(sz,null,e)))}iz.displayName="AppContextProviders";var oz=iz;a("8IIt");l.default.string.isRequired;const lz=({channelId:e})=>o.a.createElement("div",{className:"p-channel_tabs__header"},o.a.createElement(Ww,{channelId:e}),o.a.createElement("div",{className:"p-channel_tabs__header__buttons"},o.a.createElement(VN,{channelId:e}),o.a.createElement(rA,{channelId:e,tooltipPosition:"bottom-right"})));lz.displayName="TabsHeader";var cz=Object(u.b)(e=>({channelId:Object(_.a)(e)}))(lz),dz=a("/K2e");l.default.number,l.default.string,l.default.string,l.default.string,l.default.bool,l.default.bool,l.default.string,l.default.bool,l.default.bool,l.default.number,l.default.object;const uz={timestamp:void 0,url:"",titleUrl:"",title:"",isTitleHtml:!1,isDescriptionHtml:!1,description:"",isLast:!1,isNew:!1,latestNewsTimestamp:void 0,clogger:void 0},pz=({url:e,isTitleHtml:t,title:a,onClick:n})=>{const s=t?o.a.createElement("span",{dangerouslySetInnerHTML:{__html:a}}):a;return o.a.createElement(ux.a,{href:e,target:"new",onClick:n,"data-qa":"whats_new_title_link"},s)};pz.displayName="mkLinkedTitle";class update_Update extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["handleDescriptionLinkClick","handleTitleClick","handleMoreLinkClick"])}clogAction(e,t){const a=e.target;if(a&&a.href){var n=this.props;const e=n.clogger,s=n.latestNewsTimestamp;e.track(de.EventId.WHATSNEW_ACTION,{action:"view_update",trigger:t,page_url:a.href,step:String(s)})}}handleDescriptionLinkClick(e){this.clogAction(e,"description_link")}handleTitleClick(e){this.clogAction(e,"heading_link")}handleMoreLinkClick(e){this.clogAction(e,"read_more_link")}render(){var e=this.props;const t=e.timestamp,a=e.url,n=e.title,s=e.titleUrl,r=e.isDescriptionHtml,i=e.isTitleHtml,l=e.description,c=e.isLast,u=e.isNew,p=Object(Ro.d)(t,"{date}"),h=a?pz({url:a,isTitleHtml:i,title:n,onClick:this.handleTitleClick}):n,m=r?o.a.createElement("div",{role:"presentation",dangerouslySetInnerHTML:{__html:l},onClick:this.handleDescriptionLinkClick}):l,b=d()("p-whats_new__item",{"p-whats_new__item_last":c});return o.a.createElement("div",{className:b,"data-qa":`whats_new_item_${t}`},o.a.createElement("h5",{className:"p-whats_new__date"},p),o.a.createElement("h3",{className:"p-whats_new__title"},u&&o.a.createElement(bn.b,{type:"presence-online",size:"inherit",className:"p-whats_new__blue_dot"}),h),m,a&&s&&o.a.createElement(ux.a,{className:"p-whats_new__link",href:a,onClick:this.handleMoreLinkClick,target:"new","data-qa":"whats_new_more_link"},s,o.a.createElement(bn.b,{type:"chevron-medium-right",className:"align_bottom",size:"inherit"})))}}update_Update.displayName="Update",update_Update.defaultProps=uz,update_Update.displayName="Update";var hz=Object(u.b)(e=>({clogger:Object(ie.a)({state:e}),latestNewsTimestamp:Object(qA.d)(e)}))(update_Update);const mz=new x.b("whats_new"),bz=(l.default.arrayOf(Ku.a.WhatsNewUpdate.isRequired),l.default.func,l.default.number,l.default.string,l.default.func,{items:[],onItemTabWithin:r.a,whatsNewRead:-1,focusKey:null,setFocusKey:r.a});class updates_list_UpdatesList extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["renderItem","focus"]),this.list=o.a.createRef()}componentDidMount(){var e=this.props;const t=e.focusKey,a=e.items;"whats_new"===t&&a.length&&this.setFocusOnFirstItem()}componentDidUpdate({focusKey:e}){var t=this.props;const a=t.focusKey,n=t.items;"whats_new"===a&&a!==e&&n.length&&this.setFocusOnFirstItem()}setFocusOnFirstItem(){const e=this.getItemKeys()[0],t=this.list.current;t&&t.focusOnKey(e),this.props.setFocusKey(null)}getItemKeys(){return this.props.items.map((e,t)=>`update-${t}`)}focus(){const e=this.list.current;e&&e.focus()}renderItem(e){var t=this.props;const a=t.items,n=t.whatsNewRead,s=a[e],r=e===a.length-1,i=-1!==n&&n<s.timestamp;return o.a.createElement(hz,{isLast:r,timestamp:s.timestamp,url:s.url,titleUrl:s.url_title,title:s.title,isTitleHtml:s.html_title,isDescriptionHtml:s.html,description:s.description,isNew:i})}render(){const e=this.getItemKeys(),t=mz.t("What\u2019s New");return o.a.createElement(pr.a,null,({width:a,height:n})=>o.a.createElement(lx.a,{ref:this.list,width:a,height:n,keys:e,rowRenderer:this.renderItem,animateOnScroll:!1,"aria-label":t,onItemTabWithin:this.props.onItemTabWithin}))}}updates_list_UpdatesList.displayName="UpdatesList";updates_list_UpdatesList.defaultProps=bz;var fz=Object(u.b)(e=>({focusKey:Object(vy.a)(e)}),e=>({setFocusKey:t=>e(Object(Ey.a)(t))}),null,{withRef:!0})(updates_list_UpdatesList);const _z=new x.b("whats_new");class notify_checkbox_NotifyCheckbox extends i.PureComponent{constructor(e){super(e),this.onChange=this.onChange.bind(this)}onChange(e){var t=this.props;const a=t.clogger,n=t.latestNewsTimestamp,s=t.setUserPrefByApi;!!e.target.checked?(a.track(de.EventId.WHATSNEW_ACTION,{action:"opt_in",trigger:"checkbox_whats_new",step:String(n)}),s({pref:"whats_new_read",value:n||Math.floor(Date.now()/1e3)})):(a.track(de.EventId.WHATSNEW_ACTION,{action:"opt_out",trigger:"checkbox_whats_new",step:String(n)}),s({pref:"whats_new_read",value:-1}))}render(){const e=-1!==this.props.whatsNewRead;return o.a.createElement(Dn.a,{text:_z.t("Notify me about updates"),type:"inline",cursor:"pointer"},o.a.createElement(Bn.a,{checked:e,onChange:this.onChange}))}}notify_checkbox_NotifyCheckbox.displayName="NotifyCheckbox",notify_checkbox_NotifyCheckbox.defaultProps={latestNewsTimestamp:null};const gz={setUserPrefByApi:(...e)=>Object(Ka.f)(...e)};var yz=Object(u.b)(e=>({clogger:Object(ie.a)(e),latestNewsTimestamp:Object(qA.d)(e),whatsNewRead:Object(ba.k)(e,"whats_new_read")}),gz)(notify_checkbox_NotifyCheckbox);a("Aev0");l.default.arrayOf(Ku.a.WhatsNewUpdate.isRequired),l.default.number,l.default.func.isRequired;const Oz=({dispatch:e,updates:t,whatsNewRead:a})=>{const n=Object(i.useCallback)(()=>{e(Object(ga.a)())},[e]),s=Object(i.useRef)(a);return o.a.createElement(xN.a,{isOpen:!0,centered:!0,closeModal:n,maxWidth:600,className:"p-whats_new_dialog"},o.a.createElement(xN.h,null,o.a.createElement(xN.j,{title:"What\u2019s New",className:"p-whats_new_dialog__title_bar"},o.a.createElement(yz,null))),o.a.createElement(xN.d,{showScrollIndicatorBottom:!1,className:"p-whats_new_dialog__content"},o.a.createElement("div",{className:"p-whats_new_dialog__content__inner"},o.a.createElement(fz,{items:t,whatsNewRead:s.current}))))};Oz.displayName="WhatsNewDialog",Oz.defaultProps={updates:[],whatsNewRead:0};var Cz=Object(u.b)(e=>({updates:Object(qA.f)(e),whatsNewRead:Object(ba.k)(e,"whats_new_read")}))(Oz);a("J0/G");l.default.object,l.default.string.isRequired,l.default.string.isRequired,l.default.string,l.default.string,l.default.bool,l.default.func.isRequired;const vz={menuProps:{},customStatusText:void 0,customStatusEmoji:void 0,inDnd:!1,currentChannel:void 0},Ez=({menuProps:e,currentUserId:t,userPresence:a,customStatusText:n,customStatusEmoji:r,inDnd:l,currentChannel:c,dispatch:d})=>{const u=r&&o.a.createElement("div",{className:"p-ia__user_menu__blurb__status"},o.a.createElement(eg.a,{text:n?`${r} ${n}`:r,emojiSize:Ho.a.SMALL,showTooltips:!1,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noHighlights:!0,noEmojiText:!0,preventCopyPaste:!0,stopAnimations:!0})),p=[{type:"custom",children:o.a.createElement("div",{className:"p-ia__user_menu__blurb"},o.a.createElement("div",{className:"p-ia__user_menu__blurb__info"},o.a.createElement(LO.a,{id:t,className:"p-ia__user_menu__blurb__name"}),u))},{type:"separator"},{label:r?"Edit status":"Set status",shortcut:Object(ue.q)()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:()=>d(Object(LC.a)())},{type:"submenu",label:"Do not disturb",renderSubmenu:e=>l?o.a.createElement(Kk,{menuProps:e,currentChannel:c}):o.a.createElement(Fk.a,{menuProps:e,currentChannel:c})},{label:o.a.createElement(i.Fragment,null,"Set yourself to ",o.a.createElement("strong",null,"active"===a?"away":"active")),click:()=>d(Object(qS.h)())},{label:"View profile",click:()=>d(Object(qa.j)())}];return o.a.createElement(dz.a,s()({},e,{template:p}))};Ez.displayName="UserMenu",Ez.defaultProps=vz;var kz=Object(u.b)(e=>{const t=Object(m.d)(e),a=Object(bi.f)(e,t),n=Object(_.a)(e);return{currentUserId:t,userPresence:Object(qS.f)(e,t),customStatusText:a.text,customStatusEmoji:a.emoji,inDnd:!!Object(xC.c)(e),currentChannel:Object(B.e)(e,n)||void 0}})(Ez);l.default.number.isRequired,l.default.bool,l.default.object,l.default.string.isRequired;const Sz=({size:e,hasMenu:t,menuTriggerProps:a,currentUserId:n})=>{const r=Object(i.useCallback)(e=>o.a.createElement(kz,{menuProps:e}),[]),l=o.a.createElement("div",{className:"p-ia__nav__user"},o.a.createElement(cC.c,{userId:n,size:e,isInteractive:!1,className:"p-ia__nav__user__avatar"}),o.a.createElement(KT.a,{memberId:n,inline:!1,className:"p-ia__nav__user__presence--stroke"}),o.a.createElement(KT.a,{memberId:n,inline:!1,className:"p-ia__nav__user__presence"}));return t?o.a.createElement(eC.a,s()({renderMenu:r,position:"bottom-right",offsetY:6,offsetX:4,allowanceX:8},a),o.a.createElement(Qh.a,{className:"p-ia__nav__user__button"},l)):l};Sz.defaultProps={hasMenu:!1,menuTriggerProps:{}};var jz=Object(u.b)(e=>({currentUserId:Object(m.d)(e)}))(Sz);l.default.string,l.default.string.isRequired,l.default.string,l.default.func,l.default.func.isRequired,l.default.bool,l.default.func,l.default.func,l.default.func;const Iz={customStatusEmoji:void 0,userPresence:"active",onClick:r.a,highlighted:!1,onMouseEnter:r.a,onMouseLeave:r.a,menuCallback:r.a},wz=({dispatch:e,onClick:t,customStatusEmoji:a,currentUserId:n,userPresence:s,highlighted:r,onMouseEnter:l,onMouseLeave:c,menuCallback:u})=>{const p=Object(i.useCallback)(a=>{a.preventDefault(),a.stopPropagation(),e(Object(qa.j)()),u(),t()},[e,u,t]);Object(i.useEffect)(()=>{const e=new Au.a;return r&&e.bindAll([{keys:["return"],handler:p}]),()=>{e.reset()}},[r,p]);const h=d()("p-ia__main_menu__user",{"p-ia__main_menu__user--highlighted":r});return o.a.createElement(Qh.a,{className:h,onClick:p,onMouseEnter:l,onMouseLeave:c},o.a.createElement(jz,{size:36}),o.a.createElement("div",{className:"p-ia__main_menu__user__details"},o.a.createElement("div",{className:"p-ia__main_menu__user__name_container"},o.a.createElement(LO.a,{id:n,className:"p-ia__main_menu__user__name"})),a?o.a.createElement(dC.a,{className:"p-ia__main_menu__user__status",memberId:n,tooltip:!1}):o.a.createElement("span",{className:"p-ia__main_menu__user__status"},"active"===s?"Active":"Away"),o.a.createElement("span",{className:"p-ia__main_menu__user__status_alt"},"View Profile")))};wz.displayName="UserItem",wz.defaultProps=Iz;var Tz=Object(gj.b)(Object(u.b)(e=>{const t=Object(m.d)(e),a=Object(bi.f)(e,t);return{currentUserId:t,userPresence:Object(qS.f)(e,t),customStatusEmoji:a.emoji}})(wz));a("6u4E");l.default.object.isRequired,l.default.string.isRequired,l.default.object.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.string.isRequired,l.default.bool.isRequired,l.default.bool,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool,l.default.object.isRequired,l.default.string.isRequired,l.default.bool.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool,l.default.func.isRequired;class main_menu_MainMenu extends i.Component{render(){var e=this.props;const t=e.currentChannel,a=e.customStatusEmoji,n=e.inDnd,r=e.showCreateChannelAction,l=e.showInvitePeopleGlobalAction,c=e.teamDisplayName,d=e.userIsRestricted,u=e.customizeOnlyAdmins,h=e.userIsAdmin,m=e.userIsOwner,b=e.userIsAppmin,f=e.statsOnlyAdmins,_=e.team,g=e.teamUrl,y=e.teamIsEnterprise,O=e.orgName,C=e.orgId,v=e.isOffline,E=e.featureOfflineMode,k=e.isSignedIntoOtherOrgTeams,S=e.showSwitchWorkspaces,w=e.dispatch,T=!d,N=!u,A=h||m,R=!f,M=[{type:"custom",key:"user",children:o.a.createElement(Tz,{className:"p-ia__main_menu__user",onClick:()=>{this.props.menuProps.onClose()}})},{label:a?"Edit status":"Set status",shortcut:Object(ue.q)()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:()=>w(Object(LC.a)()),key:"status"},{type:"submenu",label:"Do not disturb",renderSubmenu:e=>n?o.a.createElement(Kk,{menuProps:e,currentChannel:t,isIAP1Enabled:!0}):o.a.createElement(Fk.a,{menuProps:e,currentChannel:t,isIAP1Enabled:!0}),key:"dnd"},{type:"separator",key:"seppy-2"},{type:"header",label:y?o.a.createElement(i.Fragment,null,o.a.createElement("strong",null,O)," \u2014 ",c):o.a.createElement("strong",null,c)},{label:"Create a channel\u2026",click:()=>w(Object(I.a)()),show:r,key:"create-channel"},{label:`Invite people to ${c}\u2026`,click:()=>w(Object(j.a)()),show:l,key:"invite-people"},{type:"separator",key:"seppy-3"},{label:"Settings",type:"submenu",key:"settings-submenu",template:[{label:"Preferences",click:()=>w(Object(ol.a)()),shortcut:Object(ue.q)()&&Is.V&&"\u2318,"},{label:"Edit profile",click:()=>w(Object(Ow.a)()),key:"edit-profile"},{label:`Customize ${c}`,show:T&&(h||N),href:`${g}customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click`,key:"customize-workspace"},{type:"separator",key:"seppy-submenu-1"},{label:"Admin tools",type:"header",key:"admin-tools-header"},{label:"Manage members",show:A,href:`${g}admin`,key:"manage-members"},{label:"Manage apps",show:!y&&b,href:`${g}apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click`,key:"manage-apps"},{label:"Workspace settings",show:A,href:`${g}admin/settings`,key:"workspace-settings"},{label:"Analytics",show:T&&(h||R),href:`${g}stats`,key:"analytics"}].filter(e=>!1!==e.show)},{label:"Help",type:"submenu",key:"help-submenu",template:[{label:"Help center",click:()=>w(Object(WS.a)()),key:"help"},{label:"What\u2019s new",click:()=>w(Object(ga.e)({element:o.a.createElement(Cz,null)})),key:"whats-new"},{label:"Keyboard shortcuts",click:()=>w(Object(qa.h)()),key:"keyboard-shortcuts",shortcut:Object(ue.q)()?"\u2318/":"Ctrl+/"}]},...(()=>{const e=[{label:`Sign out of ${c}`,show:!y||Object(fj.b)()&&k,click:()=>Object(p.dispatchForClientStore)(Object(aj.removeWorkspace)(_.id)),key:"sign-out",disabled:E&&v,showOfflineIcon:E&&v},{label:`Sign out of ${O}`,show:y,click:()=>Object(p.dispatchForClientStore)(Object(aj.removeOrg)(C)),key:"org-sign-out",disabled:E&&v,showOfflineIcon:E&&v}].filter(e=>!1!==e.show);return 1===e.length?e:[{label:"Sign out",type:"submenu",key:"signout-submenu",template:e}]})(),{type:"submenu",label:"Switch workspaces",show:S,renderSubmenu:e=>o.a.createElement($j.a,{menuProps:e}),key:"switch-workspaces"}].filter(e=>!1!==e.show);return o.a.createElement(dz.a,s()({menuClassNames:"p-ia__main_menu"},this.props.menuProps,{template:M}))}}main_menu_MainMenu.displayName="MainMenu",main_menu_MainMenu.defaultProps={customizeOnlyAdmins:!1,statsOnlyAdmins:!1,showSwitchWorkspaces:!1};var Nz=Object(u.b)(e=>{const t=Object(_.a)(e),a=Object(m.d)(e),n=Object(bi.b)(e),s=Object(bi.f)(e,a),r=Object(Se.d)(e),i=Object(xe.s)(r),o=Object(hI.getNumberOfWorkspaces)(Object(p.getStateForClientStore)()),l=Object(_j.a)({numTeams:o});return{iap1MainMenuIsVisible:Object(rM.h)(e),currentChannel:Object(B.e)(e,t)||void 0,currentUserId:a,userIsAdmin:Object(Je.eb)(e,n),userIsOwner:Object(Je.Eb)(e,n),userIsRestricted:Object(Je.Gb)(n),userIsEnterpriseAdminOrOwner:Object(Je.qb)(n)||Object(Je.rb)(n),userIsAppmin:Object(bi.k)(e),showCreateChannelAction:Object(te.D)(e)||Object(te.C)(e),showInvitePeopleGlobalAction:Object(RC.d)(e),inDnd:!!Object(xC.c)(e),userPresence:Object(qS.f)(e,a),customStatusEmoji:s.emoji,team:r,orgName:r.enterprise_name,orgId:r.enterprise_id,isSignedIntoOtherOrgTeams:Object(m.h)(e).some(e=>e.id!==r.id&&e.enterprise_id===r.enterprise_id),teamDisplayName:Object(xe.e)(r),teamUrl:Object(xe.n)(r),customizeOnlyAdmins:Object(gn.a)(e,"emoji_only_admins")&&Object(gn.a)(e,"slackbot_responses_only_admins")&&Object(gn.a)(e,"loading_only_admins"),statsOnlyAdmins:Object(gn.a)(e,"stats_only_admins"),teamIsEnterprise:i,isOffline:!Object(pa.c)(e),featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),showSwitchWorkspaces:Object(m.h)(e).length>0&&!l}})(main_menu_MainMenu);a("tx91");const Az=new x.b("channel_sidebar"),Rz=(l.default.string.isRequired,l.default.string.isRequired,l.default.string.isRequired,l.default.string,l.default.string,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.func,{currentUserName:void 0,currentStatusEmoji:void 0,shouldUseChannelSections:!1,featureChannelSections:!1,isOrganizing:!1,organizingSectionItemSelectedCount:0,clearAllOrganizingSections:r.a});class sidebar_header_SidebarHeader extends i.Component{constructor(e){super(e),this.state={animateStatus:!1},this.renderMenu=this.renderMenu.bind(this)}componentDidUpdate(e){this.props.currentStatusEmoji!==e.currentStatusEmoji&&this.setState(()=>({animateStatus:!0}),()=>{this.animateTimeout=setTimeout(()=>this.setState(()=>({animateStatus:!1})),1e3)})}componentWillUnmount(){this.animateTimeout&&clearTimeout(this.animateTimeout)}renderMenu(e){return this.props.clogger.track(de.EventId.GLOBAL_NAV,{contexts:{ui_context:{action:de.UiAction.CLICK,ui_component:de.UiComponent.GLOBAL_NAV,ui_element:de.UiElement.NAV_TEAM_MENU}},is_iap1:!0}),o.a.createElement(Nz,{menuProps:e})}renderOrganizing(){var e=this.props;const t=e.teamId,a=e.isOrganizing,n=e.organizingSectionItemSelectedCount;return this.props.featureChannelSections&&this.props.shouldUseChannelSections&&a?o.a.createElement("div",{className:d()("p-ia__sidebar_header")},o.a.createElement("div",{className:"p-ia__sidebar_header__mode"},o.a.createElement("div",{className:"p-ia__sidebar_header__info"},o.a.createElement("div",{"data-teamid":t,className:"p-ia__sidebar_header__mode__name","data-qa":"organizing_header"},Az.t("Organizing\u2026")),o.a.createElement("div",{className:"p-ia__sidebar_header__mode__state"},o.a.createElement("span",{"data-qa":"organizing_selection_count",className:"p-ia__sidebar_header__mode__state_count"},Az.t("{organizingSectionItemSelectedCount} selected",{organizingSectionItemSelectedCount:n})),n>0&&o.a.createElement(i.Fragment,null,o.a.createElement("span",{className:"p-ia__sidebar_header__mode__state_separator"}),o.a.createElement(Ze.a,{className:"p-ia__sidebar_header__mode__state_clear","data-qa":"organizing_selection_clear",onClick:this.props.clearAllOrganizingSections,invert:!0},Az.t("Deselect"))))))):null}render(){var e=this.props;const t=e.teamName,a=e.currentUserId,n=e.currentUserName,s=e.currentStatusEmoji,r=e.isOrganizing,i=d()("p-ia__sidebar_header__user__status",{"p-ia__sidebar_header__user__status--animate":this.state.animateStatus});return this.props.shouldUseChannelSections&&r?this.renderOrganizing():o.a.createElement("div",{className:d()("p-ia__sidebar_header")},o.a.createElement(fn.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:12,offsetY:-4},o.a.createElement(Qh.a,{className:"p-ia__sidebar_header__button"},o.a.createElement("div",{className:"p-ia__sidebar_header__info"},o.a.createElement("div",{className:"p-ia__sidebar_header__team_name"},t),o.a.createElement("div",{className:"p-ia__sidebar_header__user"},o.a.createElement(rS.a,{memberId:a,className:"p-ia__sidebar_header__user__presence"}),o.a.createElement("span",{className:"p-ia__sidebar_header__user__name"},n),o.a.createElement(iS.b,{memberId:a,className:i,tipPosition:"bottom",key:s}))),o.a.createElement(pe.a,{type:"chevron-large-down",className:"p-ia__sidebar_header__menu_icon"}))))}}sidebar_header_SidebarHeader.displayName="SidebarHeader",sidebar_header_SidebarHeader.defaultProps=Rz;const Mz={clearAllOrganizingSections:bS.a};var Pz=Object(u.b)(e=>{const t=Object(Se.d)(e),a=Object(bi.b)(e);return{teamId:t.id,teamName:Object(xe.e)(t),currentUserId:a&&a.id,currentUserName:Object(Je.K)(a),currentStatusEmoji:Object(bi.f)(e,a.id).emoji,clogger:Object(ie.a)({state:e}),shouldUseChannelSections:Object(A.a)(e),featureChannelSections:Object(m.m)(e,"feature_channel_sections"),isOrganizing:NS(e),organizingSectionItemSelectedCount:xS(e)}},Mz)(sidebar_header_SidebarHeader);a("CDIG");l.default.string,l.default.bool,l.default.bool,l.default.func.isRequired,l.default.string,l.default.bool,l.default.string;const xz={primaryView:void 0,isPublicOrPrivateChannel:!1,hideHeader:!1,secondaryView:"",isWindowFrameless:!1,appName:""},Lz=({primaryView:e,isPublicOrPrivateChannel:t,hideHeader:a,toggleDetails:n,secondaryView:s,isWindowFrameless:r,appName:l})=>{if(a)return null;const c=t&&o.a.createElement(GT,{channelId:e}),u=(()=>{if("Vall_threads"===e)return o.a.createElement("div",{className:"p-ia__view_header__title"},"Threads");if(e&&"P"===e[0]){const t=uk(e);if(t)return t.header?t.header({className:"p-ia__view_header__page_header"}):o.a.createElement("div",{className:"p-ia__view_header__title"},t.label())}return Object(f.a)(e)?o.a.createElement("div",{className:"p-ia__view_header__title"},l):o.a.createElement("div",{className:"p-ia__view_header__info"},o.a.createElement(Uw,{channelId:e,noMenu:!0}),c)})(),p=Object(ue.v)(),h="details"===s;return o.a.createElement("div",{className:d()("p-ia__view_header",{"p-ia__view_header--with-history":p,"p-ia__view_header--frameless":r})},p&&o.a.createElement(ax,{isIAP1Enabled:!0}),u,Object(An.a)(e)&&!h&&o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"p-ia__view_header__spacer"}),o.a.createElement(Qh.a,{onClick:n,className:"p-ia__view_header__details"},o.a.createElement("span",{className:"p-ia__view_header__details_text"},"Details")," ",o.a.createElement(bn.b,{type:"side-panel"}))))};Lz.displayName="ViewHeader",Lz.defaultProps=xz;var Fz=Object(u.b)(e=>{const t=Object(_.a)(e),a=uk(t),n=Object(An.a)(t)&&Object(B.e)(e,t);let s="";if(Object(f.a)(t)){const a=Object(yn.e)(e,t);s=Object(On.b)(a)}return{primaryView:t,appName:s,isPublicOrPrivateChannel:Object(q.Db)(n)||Object(q.Cb)(n),hideHeader:a&&a.isChannelHeaderHidden&&a.isChannelHeaderHidden(e),secondaryView:Object(v.j)(e),isWindowFrameless:Object(S.l)(e)}},e=>({toggleDetails:()=>e(Object(qa.r)())}))(Lz),Dz=a("9rZX"),Bz=a.n(Dz),Uz=a("VwqH"),qz=a("7Ztl"),Hz=(a("Lpwv"),a("+rBa")),Wz=a("1YQg"),Gz=a("59b6");var Kz=Object(u.b)(e=>{const t=Object(qz.c)(e),a=Object(Gz.b)(e);return{invitingCall:t&&t.id,callTitle:a}},e=>({onAcceptCall:t=>e(Object(Hz.a)(t)),onRejectCall:t=>e(Object(Hz.b)({id:t,response:Wz.c.Reject}))}))(({invitingCall:e,onAcceptCall:t,onRejectCall:a,callTitle:n})=>{if(Object(Ik.a)()&&Object(Ot.b)().error("BrowserIncomingCall should only be instantiated in a browser."),!e)return null;return o.a.createElement(Bz.a,{isOpen:!0,overlayClassName:"p-browser_incoming_call--shroud",shouldFocusAfterRender:!0,shouldReturnFocusAfterClose:!0,style:{content:{background:"transparent",border:"none",left:"50%",margin:"0",padding:"0",width:"200px"}},contentLabel:n},o.a.createElement("div",{className:"p-browser_incoming_call"},o.a.createElement(Uz.a,{callId:e,onAcceptCall:t,onRejectCall:a})))}),Vz=a("Gmrf");l.default.string,l.default.func;const zz={lastError:void 0,enqueueToast:r.a};class debug_error_DebugError extends i.Component{UNSAFE_componentWillReceiveProps(e){e.lastError&&e.lastError!==this.props.lastError&&this.props.enqueueToast({element:o.a.createElement(Ba.b,{position:"bottom-right",offsetY:66,shouldAutoFade:!1},o.a.createElement(bn.b,{type:"exclamation-circle",className:"margin_right_50"}),o.a.createElement("span",null,e.lastError))})}render(){return null}}debug_error_DebugError.displayName="DebugError",debug_error_DebugError.defaultProps=zz;const $z={enqueueToast:_a.c};var Yz=Object(u.b)(e=>{const t=Object(Vz.b)(e);return{lastError:Object(m.m)(e,"feature_tinyspeck")?t&&t.toString&&t.toString():void 0}},$z)(debug_error_DebugError),Qz=a("UUlk"),Xz=a("uFGw"),Jz=a("J9z2"),Zz=a("AUAP"),e$=a("GTwG"),t$=a("mOAw"),a$=a("u9my"),n$=a("K5QD"),s$=a("2Jxo");const r$=Object(wn.b)("TS.ui.comments.startDelete"),i$=new x.b("comments"),o$=(l.default.bool,l.default.func,l.default.string,l.default.string,{isStarred:!1,updateStar:r.a,commentId:void 0,fileId:void 0});class comment_actions_CommentActions extends i.PureComponent{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this),this.toggleStar=this.toggleStar.bind(this),this.deleteComment=this.deleteComment.bind(this)}toggleStar(){var e=this.props;const t=e.commentId,a=e.fileId,n=e.isStarred;t&&a&&this.props.updateStar(!n,{file_comment:t,file_comment_file:a})}deleteComment(){var e=this.props;const t=e.commentId,a=e.fileId;t&&a&&r$(a,t)}renderMenu(e){const t=this.props.isStarred;return o.a.createElement(fn.f,e,o.a.createElement(fn.b,{label:t?i$.t("Unstar this file comment"):i$.t("Star this file comment"),onSelected:this.toggleStar}),o.a.createElement(fn.d,null),o.a.createElement(fn.b,{label:i$.t("Delete comment"),danger:!0,onSelected:this.deleteComment}))}render(){return o.a.createElement(fn.e,{renderMenu:this.renderMenu,position:"left-bottom"},o.a.createElement(Qh.a,{className:"p-comment__actions","aria-label":i$.t("Show more actions")},o.a.createElement(bn.b,{type:"cog",size:"inherit"})))}}comment_actions_CommentActions.displayName="CommentActions",comment_actions_CommentActions.defaultProps=o$;var l$=Object(u.b)(null,{updateStar:Gw.a})(comment_actions_CommentActions);a("2ekl");const c$=new x.b("comments"),d$=(l.default.bool,l.default.shape({id:l.default.string,user:l.default.string,timestamp:l.default.number,comment:l.default.string}).isRequired,l.default.string,{time24:!1,fileId:void 0});class comment_Comment extends i.PureComponent{render(){var e=this.props;const t=e.comment,a=e.time24,n=e.fileId,s=t.user,r=t.timestamp,i=t.comment,l=t.is_starred,c=t.id;return o.a.createElement("div",{className:"p-comment"},o.a.createElement("div",{className:"p-comment__header"},s?o.a.createElement(Ly.a,{userId:s}):null,o.a.createElement("span",{className:"p-comment__timestamp"},c$.t("{date} at {time}",{date:Object(zm.a)(r,{shortenMonth:!0}),time:Object(n_.a)(r,{do24hrTime:a})})),o.a.createElement(l$,{isStarred:l,commentId:c,fileId:n})),o.a.createElement("div",{className:"p-comment__body"},o.a.createElement(eg.a,{text:i,memberId:s})))}}comment_Comment.displayName="Comment",comment_Comment.defaultProps=d$;var u$=Object(u.b)(function(e){return{time24:Object(ba.k)(e,"time24")}})(comment_Comment);a("G4eq");const p$=new x.b("comments"),h$=(l.default.func,l.default.number,l.default.bool,{toggleList:r.a,commentCount:0,expanded:!1});function m$({toggleList:e,commentCount:t,expanded:a}){const n=a?p$.t("Hide older comments",{fallbackHash:"f560b67c78f367354057065ac81410a1c310432b"}):p$.t("See older comments"),s=a?"caret-down":"caret-right";return o.a.createElement("div",{className:"p-comment_list__toggle_container"},o.a.createElement(Ua.a,{onClick:e,"aria-expanded":a},n),o.a.createElement("span",{className:"p-comment_list__toggle_count_button",role:"presentation",onClick:e},o.a.createElement(bn.b,{type:"comment-alt"}),o.a.createElement("span",{className:"p-comment_list__toggle_count"},t),o.a.createElement(bn.b,{type:s,className:"p-comment_list__toggle_caret"})))}m$.displayName="CommentListToggle",m$.defaultProps=h$;const b$={comments:l.default.array,fileId:l.default.string},f$={comments:void 0,fileId:void 0};class comment_list_CommentList extends AI.a{constructor(e){super(e),this.toggle=this.toggle.bind(this),this.state={expanded:!1}}toggle(){this.setState(e=>({expanded:!e.expanded}))}render(){var e=this.props;const t=e.comments,a=e.fileId,n=this.state.expanded;if(Object(io.a)(t))return null;const s=t.map(e=>{const t=e.id;return o.a.createElement(u$,{key:t,comment:e,fileId:a})}),r=d()("p-comment_list",{"p-comment_list--expanded":n});return o.a.createElement("div",{className:r},o.a.createElement(m$,{expanded:n,commentCount:t.length,toggleList:this.toggle}),o.a.createElement("div",{className:"p-comment_list__comments"},s))}}comment_list_CommentList.displayName="CommentList",comment_list_CommentList.propTypes=b$,comment_list_CommentList.defaultProps=f$;var _$=comment_list_CommentList,g$=a("JXW8"),y$=a("5yEy"),O$=a("VfGJ"),C$=a("1Lli"),v$=a("NvKv");const E$=new x.b("file-details"),k$=(l.default.string.isRequired,l.default.shape({sharedTeamIds:l.default.arrayOf(l.default.string),teamId:l.default.string,channelId:l.default.string,channelName:l.default.string,isPublic:l.default.bool,ts:l.default.string,threadTs:l.default.string,replyCount:l.default.number}).isRequired,l.default.string,l.default.string,l.default.func,{teamIdForIcon:void 0,teamDomain:void 0,openThread:r.a});class file_details_share_location_FileDetailsShareLocation extends i.Component{constructor(e){super(e),this.onShareClick=this.onShareClick.bind(this)}onShareClick(e){var t=this.props;const a=t.share,n=t.fileId,s=t.openThread;e.preventDefault();const r=a.threadTs||a.ts,i=r!==a.ts?a.ts:null,o=n;s({channelId:a.channelId,threadTs:r,highlightTs:i,origin:"file_details",originId:o})}getReplyCountText(e,t,a){var n=e||{};const s=n.replyCount,r=n.ts,i=n.threadTs;if(!s)return null;let l="";return l=i&&r!==i?E$.t("from a thread"):E$.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:s}),o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"p-file_details__share_metadata_dot"},"\xb7"),o.a.createElement(Ze.a,{href:t,onClick:a},o.a.createElement("span",{className:"p-file_details__share_metadata_reply_count"},l)))}render(){var e=this.props;const t=e.share,a=e.teamIdForIcon,n=e.teamDomain;let s,r,i;return a?s={id:t.channelId,name:t.channelName,is_channel:!0,is_private:!t.isPublic,shared_team_ids:t.sharedTeamIds,team_id:a}:i=this.onShareClick,n&&(r=Object($e.u)({teamDomain:n,channelId:t.channelId,ts:t.ts,threadTs:t.threadTs})),o.a.createElement("div",{className:"p-file_details__share",key:`${t.channelId}_${t.ts}`},o.a.createElement(Ze.a,{href:r,onClick:i,className:"p-file_details__share_channel_link"},o.a.createElement(Ti.a,{channel:s,channelId:t.channelId,className:"p-file_details__share_channel",truncate:!0,truncateWidth:"100%"})),o.a.createElement("span",{className:"p-file_details__share_metadata"},o.a.createElement(v$.a,{timestamp:t.ts,relative:!0}),this.getReplyCountText(t,r,i)))}}file_details_share_location_FileDetailsShareLocation.displayName="FileDetailsShareLocation",file_details_share_location_FileDetailsShareLocation.defaultProps=k$;var S$=Object(u.b)(function(e,{share:t}){const a=Object(Se.d)(e);if(!a)return{};const n=a.id,s=a.enterprise_id;let r,i=a.domain;const o=t.teamId===s&&!Object(io.a)(t.sharedTeamIds)&&!Object(fo.a)(t.sharedTeamIds,n),l=t.teamId&&t.teamId!==n&&t.teamId!==s;if(o||l){r=Object(db.a)(t.sharedTeamIds)||t.teamId;const a=Object(Se.j)(e,[r]);i=Object(xe.t)(a&&a[0])?a[0].domain:null}return{teamIdForIcon:r,teamDomain:i}},{openThread:qa.l})(file_details_share_location_FileDetailsShareLocation);const j$=new x.b("file-details");Ku.a.File();class file_details_shares_FileDetailsShares extends i.PureComponent{getFormattedSharesData(e){const t=[];Object(Rp.a)(e.public,(e,a)=>{Object(Rp.a)(e,e=>{const n=this.formatShareData(e,a,!0);n&&t.push(n)})});Object(Rp.a)(e.private,(e,a)=>{Object(Rp.a)(e,e=>{const n=this.formatShareData(e,a,!1);n&&t.push(n)})});const a=t.concat([]);return Object(C$.a)(a,"ts","desc")}formatShareData(e,t,a){if("0000000000.000000"===e.ts)return Object(Ot.b)().warn(`Skipping 0000000000.000000 share for ${this.props.file.id}`),null;const n=e.reply_count||null,s=e.reply_users,r=e.reply_users_count,i=e.latest_reply||e.ts,o=e.internal_team_ids;return{channelId:t,replyCount:n,replyUsers:s,replyUsersCount:r,latest:i,ts:e.ts,threadTs:e.thread_ts,channelName:e.channel_name,teamId:e.team_id,sharedTeamIds:o,isPublic:a}}render(){const e=this.props.file;if(!e||!e.shares)return null;const t=e.shares,a=!!Object.keys(e.shares).length,n=a&&this.getFormattedSharesData(t);return a&&o.a.createElement("div",{className:"p-file_details__shares"},o.a.createElement("div",{className:"p-file_details__share_divider"},o.a.createElement("span",null,j$.rt("Shared in")),o.a.createElement("hr",null)),n.map(t=>o.a.createElement(S$,{key:`${t.ts}-${t.channelId}`,share:t,fileId:e.id})))}}file_details_shares_FileDetailsShares.displayName="FileDetailsShares",file_details_shares_FileDetailsShares.defaultProps={file:null};var I$=a("s/YD");const w$=new x.b("file-details"),T$=(l.default.func,{tryAgain:r.a});function N$({tryAgain:e}){return o.a.createElement("div",{role:"alert",className:"p-file_details__error"},o.a.createElement("p",{className:"p-file_details__error_header"},w$.t("Couldn't load file")),o.a.createElement("p",null,w$.rt("If the problem persists, please <a>drop us a line.</a>",null,({text:e,key:t})=>o.a.createElement(Ze.a,{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:t},e))),o.a.createElement(_e.d,{type:"primary",onClick:e},w$.t("Try Again")))}N$.displayName="FileDetailsError",N$.defaultProps=T$;const A$=new x.b("file-details");function R$(){return o.a.createElement("div",{role:"alert",className:"p-file_details__tombstone"},o.a.createElement("div",{className:"p-file_details__tombstone_icon"},o.a.createElement(bn.b,{type:"trash",size:"inherit"})),o.a.createElement("p",null,A$.t("This file was deleted.")))}R$.displayName="FileDetailsTombstone";const M$=new x.b("file-details");l.default.bool;function P$({featureDocsTranslations:e}){const t=e?M$.t("This file was not found."):"This file was not found.";return o.a.createElement("div",{role:"alert",className:"p-file_details__tombstone"},o.a.createElement("div",{className:"p-file_details__tombstone_icon"},o.a.createElement(bn.b,{type:"question",size:"inherit"})),o.a.createElement("p",null,t))}P$.displayName="FileDetailsNotFound",P$.defaultProps={featureDocsTranslations:!1};var x$=Object(u.b)(e=>({featureDocsTranslations:Object(m.m)(e,"feature_docs_translations")}),{})(P$);a("JHKc"),a("FXxD");const L$=new x.b("file-details"),F$=(Ku.a.File(),l.default.string,l.default.bool,l.default.bool,l.default.func,l.default.string,l.default.string,l.default.bool,l.default.string,l.default.bool,l.default.func,{file:null,origin:null,do24hrTime:!1,fileIsFetching:!1,reloadFile:r.a,isWorkflow:!1,userId:"",botId:"",ownerName:"",featureReactMemberProfileCard:!1,clogFileClick:r.a});class file_details_FileDetails extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["renderPreview","onNameClick","clogLinkClick","renderBody"])}onNameClick(e){if(Object(Mr.a)(e))return;var t=this.props;const a=t.userId,n=t.botId,s=t.featureReactMemberProfileCard;(a||n)&&(e.preventDefault(),e.persist(),s||(n?Object(a$.a)(e,n):Object(t$.a)(e,a)))}clogLinkClick(e){const t=this.props.file;this.props.clogFileClick({file:t,payload:e})}isImage(){return"image"===Object(Qy.p)(this.props.file)}renderPreview(){return o.a.createElement(O$.a,{file:this.props.file,showActions:!1,forceExpanded:!0,largeImage:!0,clogLinkClick:this.clogLinkClick,channelId:"",ts:""})}renderUserNameAndTimestamp(){var e=this.props;const t=e.file,a=e.do24hrTime,n=e.ownerName,s=e.userId,r=e.botId,i=e.isWorkflow,l=e.featureReactMemberProfileCard;let c="";Object(Qy.I)(t)||(c=o.a.createElement("div",{className:"p-file_details__private"},L$.t("Private file")));let d,u="";return u=r?`/services/${r}`:`/team/${s}`,d=l?o.a.createElement(et.a,{botId:r,userId:s,onClick:this.onNameClick},o.a.createElement(Ze.a,{href:u,className:"p-file_details__user_link"},n)):o.a.createElement(Ze.a,{href:u,className:"p-file_details__user_link",onClick:this.onNameClick},n),o.a.createElement("div",{className:"p-file_details__user_meta"},d,r&&o.a.createElement(g$.a,{isWorkflow:i}),o.a.createElement("div",{className:"p-file_details__upload_date"},L$.t("{date} at {time}",{date:t.timestamp&&Object(Ro.l)(t.timestamp),time:t.timestamp&&Object(Ro.p)(t.timestamp,{do24hrTime:a})})),c)}renderComments(){const e=this.props.file;return Object(io.a)(e.comments)?null:o.a.createElement("div",{className:"p-file_details__comments"},o.a.createElement("hr",{className:"p-file_details__comment_separator"}),o.a.createElement(_$,{comments:e.comments,fileId:e.id}))}renderFileDetails(){var e=this.props;const t=e.file,a=e.fileIsFetching,n=e.reloadFile;if(a&&(!t||Object(ee.d)(t)&&!Object(ee.c)(t)))return null;if(!t||Object(ee.c)(t))return o.a.createElement(N$,{tryAgain:n});if(Object(Qy.Q)(t))return o.a.createElement(R$,null);if(Object(Qy.L)(t))return o.a.createElement(x$,null);const s=!Object(Qy.K)(t),r={};this.isImage()&&(r.maxWidth=`${t.thumb_480_w||t.thumb_360_w}px`,r.maxHeight=`${t.thumb_480_h||t.thumb_360_h}px`);const i=Object(Qy.p)(t),l="image"===i||"snippet"===i,c=d()("p-file_details__meta",{"p-file_details__meta--show_filename":l});return o.a.createElement(o.a.Fragment,null,s?o.a.createElement("div",{className:"p-file_details__meta_container","data-qa":"file_details-meta_container"},o.a.createElement("div",{className:c},l?o.a.createElement(n$.a,{file:t,className:"p-file_details__name"}):null,this.renderUserNameAndTimestamp()),o.a.createElement(y$.a,{file:t,clogLinkClick:this.clogLinkClick,inFileDetails:!0})):null,o.a.createElement("div",{className:"p-file_details__preview",style:r},this.renderPreview()),this.renderComments(),o.a.createElement(file_details_shares_FileDetailsShares,{file:t}))}renderBody(){return o.a.createElement("div",{className:"p-file_flexpane__content"},o.a.createElement(pr.a,null,({width:e,height:t})=>o.a.createElement(Mv.b,{width:e,height:t,fade:!0},o.a.createElement("div",{className:"p-file_details"},this.renderFileDetails()))))}render(){const e=this.props.origin,t={member_preview:L$.t("Member"),starred_items:L$.t("Starred Items"),search_results:L$.t("Search Results"),channel_page:L$.t("Channel Details"),group_page:L$.t("Channel Info"),im_page:L$.t("Conversation Details"),mentions:L$.t("Activity")},a=L$.t("Files"),n=t[e]||a,s=d()("p-file_flexpane","p-file_flexpane--detail");return o.a.createElement(I$.b,{flexOrigin:e,className:s,title:n,renderBody:this.renderBody,viewId:"file-details",kbNavOrder:Object(re.a)()?void 0:4.9})}}file_details_FileDetails.displayName="FileDetails",file_details_FileDetails.defaultProps=F$;const D$={clogFileClick:(...e)=>Object(e$.a)(...e)},B$=Object(u.b)((e,t)=>{const a=t.fileId;if(!a)return{};const n=Object(Yy.c)(e,a);if(!n)return{};var s=Object(Qy.l)(n);const r=s.userId,i=s.botId,o=r?Object(bi.d)(e,r):null,l=o?Object(Je.q)(o):null,c=i||l;let d="";if(c){const t=Object(Zz.c)(e,c);t&&t.name&&(d=t.name)}return!d&&o&&(d=Object(Je.V)(e,o)),d||(d=n.username),{file:Object(Yy.c)(e,a),do24hrTime:Object(ba.k)(e,"time24"),featureEmailWorkobjectUi:Object(m.m)(e,"feature_email_workobject_ui"),featureReactMemberProfileCard:Object(m.m)(e,"feature_react_member_profile_card"),userId:r,botId:c,ownerName:d,isWorkflow:Object(Je.Qb)(o)}},D$)(file_details_FileDetails);var U$=Object(s$.a)(B$,{alwaysFetchOnMount:!0}),q$=a("jYCR"),H$=a("kX2h");const W$=new x.b("files"),G$=(l.default.object,l.default.func,l.default.func.isRequired,{member:null,onChange:r.a});class files_flexpane_members_select_FilesFlexpaneMembersSelect extends i.PureComponent{constructor(e){super(e),this.onChange=this.onChange.bind(this),this.state={value:e.member?e.member.id:null,selectedOption:e.member?K$(e.member.id):null}}onChange(e,t){this.setState(()=>({value:e,selectedOption:{value:e,label:t}})),this.props.onChange(e)}UNSAFE_componentWillReceiveProps(e){this.setState(()=>({value:e.member?e.member.id:null,selectedOption:e.member?K$(e.member.id):null}))}render(){return o.a.createElement(H$.a,{className:"p-file_list__select p-file_list__members_select",placeholder:W$.t("Everyone",{fallbackHash:"c756f6af1f03c9ce381cb85934ffb274e2f54af3"}),onChange:this.onChange,value:this.state.value,selectedOption:this.state.selectedOption,optionsFetcher:this.props.searchMembers,optionsRowHeight:30})}}function K$(e){return{value:e,label:o.a.createElement("div",{className:"p-file_list__select__member"},o.a.createElement(KB.a,{id:e,size:"small"}))}}files_flexpane_members_select_FilesFlexpaneMembersSelect.displayName="FilesFlexpaneMembersSelect",files_flexpane_members_select_FilesFlexpaneMembersSelect.defaultProps=G$;var V$=Object(u.b)((e,{userId:t})=>({member:Object(bi.d)(e,t)}),e=>({searchMembers:t=>e(Object(q$.c)({query:t,options:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0}},sort:{selfFirst:!0},allowEmptyQuery:!0}})).then(e=>({options:e.map(e=>K$(e.id))}))}))(files_flexpane_members_select_FilesFlexpaneMembersSelect);a("vr4i");const z$=new x.b("files"),$$=Object(Er.a)(vr.a),Y$=(l.default.arrayOf(l.default.shape({id:l.default.string,ts:l.default.number})),l.default.string,l.default.string,l.default.shape({key:l.default.string,offset:l.default.number}),l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.object.isRequired,l.default.string,l.default.func,l.default.bool.isRequired,l.default.func,{files:[],filetype:"",user:"",scrollmark:void 0,fetchFilesPre:r.a,fetchFilesPost:r.a,saveScrollmark:r.a,setFiletype:r.a,setUser:r.a,previewFile:r.a,focusKey:null,clogFileClick:r.a,setFocusKey:r.a});class file_list_FileList extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onFileClick","onScroll","fetchPre","fetchPost","fetchAround","renderRow","renderFile","clogFileClick","clogPricingLinkClick","renderBody","focus","isEmpty","isFocusableItem","onItemTabWithin"]),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.keys=null,this.layout=new Cr.a,this.list=o.a.createRef(),this.flexpane=o.a.createRef(),this.layout.heightCache.DEFAULT_HEIGHT=69}componentDidMount(){var e=this.props;const t=e.scrollmark,a=e.clogger,n=e.overStorageLimit;if(t){const e=t.key,a=t.offset;this.layout.setAnchor(e,a),this.props.saveScrollmark(null)}n&&a.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:de.UiAction.IMPRESSION,step:de.UiStep.FILE_PANE,ui_component:de.UiComponent.FILE_STORAGE_LIMIT_BANNER}}});var s=this.props;const r=s.focusKey,i=s.files;"files"===r&&i.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}componentDidUpdate({focusKey:e}){var t=this.props;const a=t.focusKey,n=t.files;"files"===a&&a!==e&&n.length&&(this.setFocusOnFirstItem(),this.clearFocusKey()),"files"===a&&n.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}onFileClick(e){const t=e.id,a=this.list.current;a&&t&&(this.props.clogger.track(de.EventId.FLEXPANE_FILE_CLICKED,{click_file_id:t}),this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-a.getScrollTop()}),this.props.previewFile({fileId:t,flexOrigin:"files"}))}onItemTabWithin(){const e=this.flexpane.current;e&&e.setInitialActiveSection()}onScroll(){this.layout.anchor&&this.layout.setAnchor(!1)}setFocusOnFirstItem(){const e=this.keys[0],t=this.list.current;t&&t.focusOnKey(e)}UNSAFE_componentWillReceiveProps(e){var t=this.props;const a=t.filetype,n=t.user;e.filetype===a&&e.user===n||(this.requestPre&&this.requestPre.cancel(),this.requestPost&&this.requestPost.cancel(),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.layout&&this.layout.setAnchor(!1))}clearFocusKey(){this.props.setFocusKey(null)}clogFileClick(e,t){this.props.clogFileClick({file:t,payload:e})}clogPricingLinkClick(){this.props.clogger.track(de.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:de.UiAction.CLICK,step:de.UiStep.FILE_PANE,ui_element:de.UiElement.PRICING_LINK,ui_component:de.UiComponent.FILE_STORAGE_LIMIT_BANNER}}})}fetchAround(){return(!this.requestPre||!this.requestPost)&&(this.reachedEnd?this.fetchPre():this.reachedStart?this.fetchPost():this.fetchPre())}fetchPost(){if(this.requestPost)return!1;if(this.reachedEnd)return!1;var e=this.props;const t=e.filetype,a=e.user;return this.requestPost=this.props.fetchFilesPost({types:t,user:a}),this.requestPost.then(({paging:e}={})=>{e.page>=e.pages&&(this.reachedEnd=!0)}).finally(()=>{this.requestPost=null})}fetchPre(){if(this.requestPre)return!1;if(this.reachedStart)return!1;var e=this.props;const t=e.filetype,a=e.user;return this.requestPre=this.props.fetchFilesPre({types:t,user:a}),this.requestPre.then(({paging:e}={})=>{1===e.page&&(this.reachedStart=!0)}).finally(()=>{this.requestPre=null})}focus(){const e=this.list.current;e&&e.focus()}isEmpty(){return!this.props.files.length&&this.reachedStart&&this.reachedEnd}isFocusableItem({key:e}={}){return Object(Qz.a)(e)}renderBody(){var e=this.props;const t=e.files,a=e.overStorageLimit,n=t.map(e=>e.id);return this.keys=[...n],this.reachedEnd||this.keys.push(`Loading${this.keys.length}`),this.isEmpty()&&this.keys.push("Placeholder"),o.a.createElement(o.a.Fragment,null,a&&this.renderStorageWarningBanner(),o.a.createElement("div",{className:"p-file_list"},o.a.createElement(pr.a,null,({width:e,height:t})=>o.a.createElement(Or.a,{width:e,height:t,keys:this.keys,layout:this.layout,rowRenderer:this.renderRow,onScroll:this.onScroll,ref:this.list,loadAround:this.fetchAround,loadPre:this.fetchPre,loadPost:this.fetchPost,onItemTabWithin:this.onItemTabWithin,onItemClick:this.onFileClick,isFocusableItem:this.isFocusableItem,"aria-label":z$.t("Files")}))))}renderFile(e){const t=this.props.files[e]&&this.props.files[e].id;if(!t)return null;const a=e===this.props.files.length-1,n=d()("p-file_list__file",{"p-file_list__file--last":a});return o.a.createElement($$,{fileId:t,className:n,clogLinkClick:this.clogFileClick,fullWidth:!0,useRowAction:!0})}renderRow(e){const t=this.keys[e];if(!t)return null;switch(t[0]){case"L":return o.a.createElement("div",{className:"p-file_list__loading"},z$.t("Loading\u2026"));case"P":return o.a.createElement("div",{className:"p-file_list__empty"},z$.t("No matching files were found."));default:return this.renderFile(e)}}renderStorageWarningBanner(){return o.a.createElement("div",{className:"p-file_flexpane__storage-warning-container"},o.a.createElement("div",{className:"display_flex"},o.a.createElement(bn.b,{className:"p-message_limit_banner__graphic",type:"eye-closed"}),o.a.createElement("div",null,o.a.createElement("span",null,z$.rt("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,({text:e})=>o.a.createElement(Ze.a,{href:Object(gr.k)({entryPoint:"flexpane_file_list"}),onClick:this.clogPricingLinkClick,target:"new","data-qa":"file-flexpane__pricing-link"},e))))))}render(){var e=this.props;const t=e.filetype,a=e.user;return o.a.createElement(I$.b,{ref:this.flexpane,focus:this.focus,isEmpty:this.isEmpty(),title:z$.t("Files"),className:d()("p-file_flexpane","p-file_flexpane--list"),bodyClassName:"p-file_flexpane__body",renderBody:this.renderBody,renderControls:()=>o.a.createElement("div",{className:"p-file_list__filters"},o.a.createElement(kr.a,{filetype:t,onChange:this.props.setFiletype}),o.a.createElement(V$,{userId:a,onChange:e=>{this.props.setUser(e)}})),viewId:"file-list",kbNavOrder:Object(re.a)()?void 0:4.8})}}file_list_FileList.displayName="FileList",file_list_FileList.defaultProps=Y$;const Q$={fetchFilesPre:(...e)=>Object(jO.c)(...e),fetchFilesPost:(...e)=>Object(jO.b)(...e),saveScrollmark:(...e)=>Object(jO.i)(...e),setFiletype:(...e)=>Object(jO.j)(...e),setUser:(...e)=>Object(jO.k)(...e),previewFile:(...e)=>Object(qa.c)(...e),clogFileClick:(...e)=>Object(e$.a)(...e),setFocusKey:e=>Object(Ey.a)(e)},X$=Object(u.b)(e=>({files:Object(jO.e)(e),scrollmark:Object(jO.f)(e),filetype:Object(jO.d)(e),user:Object(jO.g)(e),clogger:Object(ie.a)({state:e}),overStorageLimit:Object(xe.C)(Object(Se.d)(e)),focusKey:Object(vy.a)(e)}),Q$)(e=>{let t=e.forwardedRef,a=fp()(e,["forwardedRef"]);return o.a.createElement(file_list_FileList,s()({ref:t},a))});var J$=o.a.forwardRef((e,t)=>o.a.createElement(X$,s()({forwardedRef:t},e)));a("5NHF");const Z$=new x.b("member_directory"),eY=(l.default.bool,l.default.bool,l.default.func,l.default.string,l.default.func,l.default.string,l.default.bool,l.default.bool,l.default.arrayOf(l.default.string),l.default.string,l.default.func,l.default.bool,{isEnterprise:!1,isAdmin:!1,isRestricted:!1,setSearchQuery:r.a,setFilter:r.a,searchQuery:"",filter:"people",featureSonicMemberDirectory:!1,isVisible:!1,flexParams:[],teamUrl:"/",fetchMemberCountsForTeam:r.a});class member_directory_MemberDirectoryFlexpane extends i.Component{constructor(e){super(e),Object(la.a)(this,["onSearchInputChange","onMenuItemSelected","renderMenu","renderBody","focus","onItemTabWithin"]),this.state={externalTeams:[]},this.list=o.a.createRef(),this.flexpane=o.a.createRef()}componentDidMount(){this.fetchExternalTeams()}onSearchInputChange(e){const t=e.target.value||"";this.props.setSearchQuery(t)}onMenuItemSelected(e){this.props.setFilter(e)}onItemTabWithin(){const e=this.flexpane.current;e&&e.setInitialActiveSection()}getTitle(){var e=this.props;const t=e.featureSonicMemberDirectory,a=e.isEnterprise;return t?a?Z$.t("Organization Directory"):Z$.t("Workspace Directory"):null}focus(){const e=this.list.current;e&&e.focus()}fetchExternalTeams(){this.props.fetchMemberCountsForTeam().then(e=>{e&&e.external_teams&&this.setState(()=>({externalTeams:Object.keys(e.external_teams)}))})}renderSearch(){return this.props.featureSonicMemberDirectory?o.a.createElement("div",{className:"p-member_directory__search"},o.a.createElement(tC.a,{value:this.props.searchQuery,onChange:this.onSearchInputChange,placeholder:Z$.t("Search by name or title"),icon:"search",autoFocus:!0,inputAriaLabel:Z$.t("Search members by name or title",{fallbackHash:"4be82cb9b1458f2d26a012d16010b3630c49c611"})})):null}renderMenu(e){return o.a.createElement(TC,{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter,menuProps:e,externalTeams:this.state.externalTeams})}renderFilterIconButton(){if(!this.props.featureSonicMemberDirectory)return null;if(this.props.isRestricted)return null;const e="people"!==this.props.filter,t=e?Z$.t("Filter members (filter active)"):Z$.t("Filter members");return o.a.createElement(fn.e,{renderMenu:this.renderMenu,position:"bottom-left"},o.a.createElement(Up.a,{icon:"filters","data-qa":"p-member_directory_menu_trigger",showBadge:e,"aria-label":t}))}renderBody(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"p-member_directory__search_filter_container","data-qa":"member_directory"},this.renderSearch(),this.renderFilterIconButton()),o.a.createElement(SC,{ref:this.list,onItemTabWithin:this.onItemTabWithin,"aria-label":this.getTitle()}))}render(){var e=this.props;const t=e.isVisible,a=e.flexParams,n=e.teamUrl;return e.featureSonicMemberDirectory&&t?a.length?null:o.a.createElement(I$.b,{ref:this.flexpane,focus:this.focus,title:this.getTitle(),renderBody:this.renderBody,kbNavOrder:Object(re.a)()?void 0:5,viewId:"member-directory",headerProps:{optionsHref:this.props.isAdmin?`${n}admin`:void 0,optionsIconType:"cog-o",optionsTooltipText:Z$.t("Manage members")}}):null}}member_directory_MemberDirectoryFlexpane.displayName="MemberDirectoryFlexpane",member_directory_MemberDirectoryFlexpane.defaultProps=eY;const tY={setSearchQuery:(...e)=>Object(XO.f)(...e),setFilter:(...e)=>Object(XO.d)(...e),fetchMemberCountsForTeam:(...e)=>Object(JO.b)(...e)};var aY=Object(u.b)(e=>{const t=Object(v.j)(e),a=!Object(re.a)()&&"team"===t||"directory"===t;return{featureSonicMemberDirectory:Object(m.m)(e,"feature_sonic_member_directory"),isEnterprise:Object(m.q)(e),isAdmin:Object(Je.eb)(e,Object(bi.b)(e)),isRestricted:Object(Je.Gb)(Object(bi.b)(e)),searchQuery:YO(e),filter:QO(e),flexParams:Object(v.e)(e),teamUrl:Object(xe.n)(Object(Se.d)(e)),isVisible:a}},tY)(member_directory_MemberDirectoryFlexpane),nY=a("1cj1"),sY=a("3JmS"),rY=a("kyN7"),iY=a("Ect7"),oY=a("YcId"),lY=a("RoDk");const cY=new x.b("member_profile"),dY=(l.default.bool,l.default.object.isRequired,l.default.object.isRequired,l.default.func,l.default.func,l.default.object.isRequired,l.default.func,l.default.bool,l.default.func,{isPresenceActive:!1,openPrefsModal:r.a,showFileList:r.a,toggleUserPresence:r.a,userCanEditCustomResponses:!1,onClick:r.a});function uY({isPresenceActive:e,member:t,menuProps:a,openPrefsModal:n,showFileList:r,team:i,toggleUserPresence:l,userCanEditCustomResponses:c,onClick:d}){if(!Object(lN.a)().featureModernProfileFlexpane)return null;let u;if(Object(Je.Hb)(t)){let a;a=e?cY.t("Set yourself away"):cY.t("[AWAY] Set yourself active"),u=[{label:cY.t("View preferences"),click:()=>{d(),n()}},{label:cY.t("Account settings"),click:()=>{Object(xe.P)(i,"/account/settings")},showLinkIndicatorIcon:!0},{type:"separator"},{label:cY.t("View your files"),click:()=>{d(),r({user:t.id})}},{label:a,click:()=>{d(),l()}}]}else u=[{label:cY.t("View files"),click:()=>{d(),r({user:t.id})}}],Object(Je.Ib)(t)&&c&&u.push({label:cY.t("Create/edit Slackbot responses"),href:Object(xe.n)(i,"/customize/slackbot")});return Object(Ax.a)()&&(u.push({type:"separator"}),u.push({label:cY.t("Copy member ID"),description:t.id,click:()=>{d(),Object(Ax.c)(t.id)}})),o.a.createElement(dz.a,s()({},a,{template:u}))}uY.displayName="MemberProfileOverflowMenu",uY.defaultProps=dY;const pY={openPrefsModal:(...e)=>Object(ol.a)(...e),showFileList:(...e)=>Object(qa.g)(...e),toggleUserPresence:(...e)=>Object(qS.h)(...e)};var hY=Object(u.b)(function(e,{member:t}){return{isPresenceActive:Object(qS.f)(e,t.id)===qS.a,userCanEditCustomResponses:Object(te.I)(e)}},pY)(uY),mY=a("G7w5");a("UCMe");l.default.string,l.default.object,l.default.object,l.default.object,l.default.bool,l.default.object;const bY={currentMemberId:void 0,member:void 0,memberTeam:void 0,team:void 0,canInteract:!0,clogger:{track:r.a}};function fY({currentMemberId:e,member:t,memberTeam:a,team:n,canInteract:s,clogger:r}){const l=Object(i.useMemo)(()=>{const a=[mY.a.STATUS,mY.a.NAME,mY.a.TIME,mY.a.PHONE,mY.a.EMAIL,mY.a.CUSTOM,mY.a.GUEST,mY.a.SHARED_CHANNELS];return t.id!==e&&a.push(mY.a.SHARED_WORKSPACES),a},[e,t]);const c=Object(lN.a)().featureModernProfileFlexpane,d=Object(i.useCallback)(()=>{r.track(de.EventId.USER_PROFILE_CLICK)},[r]);if(!c)return null;const u=o.a.createElement(sY.a,{className:"p-member_profile__picture",member:t}),p=o.a.createElement(iY.a,{className:"p-member_profile__restriction",member:t,team:a}),h=o.a.createElement(Ni.a,{className:"p-member_profile__name",member:t,canInteract:s});return Object(xe.K)(a)?o.a.createElement(o.a.Fragment,null,u,p,h,o.a.createElement(oY.a,{memberTeam:a})):s?o.a.createElement(pr.a,null,({width:e,height:s})=>o.a.createElement(Mv.b,{width:e,height:s,fade:!0},u,p,o.a.createElement(rY.a,{className:"p-member_profile__buttons",includeOverflow:!0,member:t,showCallButton:!0,onClick:d},o.a.createElement(fn.e,{offsetY:8,position:"bottom-right",renderMenu:e=>o.a.createElement(hY,{member:t,menuProps:e,team:a,onClick:d})},o.a.createElement(_e.d,{className:"p-member_profile_buttons__button p-member_profile_buttons__button--overflow",type:"outline"},o.a.createElement(bn.b,{type:"vertical-ellipsis"})))),h,o.a.createElement(mY.b,{member:t,team:n,types:l,onClick:d}))):o.a.createElement(o.a.Fragment,null,u,p,h,o.a.createElement(lY.a,{member:t}))}fY.displayName="MemberProfileDetails",fY.defaultProps=bY;var _Y=Object(u.b)(function(e,{memberId:t}){const a=Object(bi.d)(e,t);if(!a)return{};const n=Object(m.m)(e,"feature_stranger_danger")?Object(nY.a)(e,t):!Object(Je.Jb)(a);return{currentMemberId:Object(m.d)(e),member:a,memberTeam:Object(Se.i)(e,Object(Je.P)(a)),team:Object(Se.d)(e),canInteract:n,clogger:Object(ie.a)({state:e})}})(fY);a("20nV");const gY=new x.b("menu"),yY=(l.default.func,l.default.bool,l.default.string.isRequired,{fetchTeamProfile:r.a,isEnterprise:!1});class member_profile_flexpane_MemberProfileFlexpane extends i.PureComponent{constructor(e){super(e),this.state={isLoading:!0}}componentDidMount(){this.props.fetchTeamProfile({reason:"MemberProfileFlexpane"}).finally(()=>{this.setState(()=>({isLoading:!1}))})}render(){const e=this.props.isEnterprise?gY.t("Organization Directory"):gY.t("Workspace Directory");return o.a.createElement(I$.b,{className:"p-member_profile_flexpane",dataQa:"member_profile_pane",flexOrigin:"directory",isLoading:this.state.isLoading,renderBody:()=>o.a.createElement(_Y,{memberId:this.props.memberId}),title:e,viewId:Ln.I.MEMBER_PROFILE_FLEXPANE,kbNavOrder:Object(re.a)()?void 0:4.2})}}member_profile_flexpane_MemberProfileFlexpane.displayName="MemberProfileFlexpane",member_profile_flexpane_MemberProfileFlexpane.defaultProps=yY;const OY={fetchTeamProfile:(...e)=>Object(US.e)(...e)};var CY=Object(u.b)(e=>({isEnterprise:Object(m.q)(e)}),OY)(member_profile_flexpane_MemberProfileFlexpane);function vY(e,t){return{appProfile:e,appId:Object(XN.l)(e),botId:Object(XN.o)(e),isPublished:Object(XN.G)(e),customIntegrationType:Object(XN.d)(e),dateCreated:Object(XN.e)(e),isUserRestricted:Object(Je.Gb)(t)||Object(Je.Mb)(t),installedUserId:Object(XN.v)(e),commands:Object(XN.c)(e),description:Object(XN.f)(e),formattedDescription:Object(XN.h)(e),hideDescriptionExpansion:Object(XN.J)(e)}}var EY=a("VMwU"),kY=a("yluG");const SY=new x.b("app_profile");var jY=function({appId:e,serviceId:t,appHomepageUrl:a,supportUrl:n,isSlackIntegration:s,dispatch:r,currentTeamId:i,currentUserId:l,locale:c,currentEnterpriseId:d}){const u=Object(ie.a)({userId:l,teamId:i,locale:c,enterpriseId:d}),h=Object(Se.d)(Object(p.getStateByTeamId)(i)),m={app_id:e,bot_id:t},b=()=>u.track(de.EventId.USER_PROFILE_CLICK,m);return[{key:"app_homepage",label:SY.t("App Homepage"),href:a,click:()=>{b(),u.track(de.EventId.APP_CLICK_APP_HOMEPAGE_IN_USER_PROFILE,{contexts:{ui_context:{step:de.UiStep.USER_PROFILE,action:de.UiAction.CLICK,ui_element:de.UiElement.APP_HOMEPAGE}}})},show:!!a,dataQa:"app_profile_overflow_homepage"},{key:"app_directory_page",label:SY.t("View in App Directory"),href:Object(xe.n)(h,`/apps/${e}?utm_source=in-prod&utm_medium=inprod-link_app_directory-user_profile-click`),click:()=>{b(),u.track(de.EventId.APP_CLICK_LINK_APP_DIRECTORY_IN_USER_PROFILE,{contexts:{ui_context:{step:de.UiStep.USER_PROFILE,action:de.UiAction.CLICK,ui_element:de.UiElement.LINK_APP_DIRECTORY}}})},show:!0,dataQA:"app_profile_app_directory_page"},{key:"support",label:SY.t("Support for this app"),href:n||void 0,click:()=>{b(),u.track(de.EventId.APP_CLICK_LINK_APP_SUPPORT_IN_USER_PROFILE,{contexts:{ui_context:{step:de.UiStep.USER_PROFILE,action:de.UiAction.CLICK,ui_element:de.UiElement.LINK_APP_SUPPORT}}}),s&&r(Object(ga.e)({element:o.a.createElement(QN.a,{trigger:"app_support_profile_button"})}))},show:!0}].filter(e=>e.show)};l.default.bool.isRequired,l.default.string,l.default.object,l.default.func,l.default.string,l.default.string,l.default.string;const IY={customIntegrationType:"",appProfile:void 0,dispatch:l.default.noop,currentTeamId:"",currentUserId:"",currentEnterpriseId:""};class app_profile_overflow_menu_button_AppProfileOverflowMenuButton extends i.Component{constructor(e){super(e),Object(la.a)(this,["renderMenu"])}renderMenu(e){var t=this.props;const a=t.dispatch,n=t.appProfile,s=t.currentTeamId,r=t.currentUserId,i=t.currentEnterpriseId,l=jY({appId:Object(XN.l)(n),serviceId:Object(XN.o)(n),appHomepageUrl:Object(XN.k)(n),supportUrl:Object(XN.p)(n),isSlackIntegration:Object(XN.H)(n),dispatch:a,currentTeamId:s,currentUserId:r,locale:Object(x.s)(),currentEnterpriseId:i});return l.length?o.a.createElement(fn.a,{template:l,stripTerminalSeparators:!0,onMenuItemSelected:e.onMenuItemSelected}):null}render(){return this.props.isDistributed&&!this.props.customIntegrationType?o.a.createElement(fn.e,{renderMenu:this.renderMenu,position:"bottom-right"},o.a.createElement(_e.d,{"data-qa":"app_header_overflow_menu_button",className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",icon:"chevron-large-down",size:"large"})):null}}app_profile_overflow_menu_button_AppProfileOverflowMenuButton.displayName="AppProfileOverflowMenuButton",app_profile_overflow_menu_button_AppProfileOverflowMenuButton.defaultProps=IY;var wY=Object(u.b)((e,{appProfile:t})=>({isDistributed:Object(XN.D)(t),customIntegrationType:Object(XN.d)(t),currentTeamId:Object(h.b)(e),currentUserId:Object(m.d)(e),currentEnterpriseId:Object(m.q)(e)?Object(Se.g)(e).id:void 0}))(app_profile_overflow_menu_button_AppProfileOverflowMenuButton);a("avbl");const TY=new x.b("app_card"),NY=(l.default.bool,l.default.bool.isRequired,l.default.bool.isRequired,l.default.object,l.default.string,l.default.string,l.default.string,l.default.string,l.default.string.isRequired,l.default.object,l.default.object,{appProfile:void 0,color:"",name:"",tagline:"",settingsUrl:"",clogger:{track:r.a},externalTeam:void 0,isAvatarEmoji:!1});class app_profile_header_AppProfileHeader extends i.Component{constructor(e){super(e),Object(la.a)(this,["calculateStyle","renderSettingsButton","onSettingsButtonClick"])}onSettingsButtonClick(){this.props.clogger.track(de.EventId.USER_PROFILE_CLICK,{app_id:Object(XN.l)(this.props.appProfile),bot_id:Object(XN.o)(this.props.appProfile)}),this.props.clogger.track(de.EventId.APP_CLICK_LINK_APP_SETTINGS_IN_USER_PROFILE,{contexts:{ui_context:{step:de.UiStep.USER_PROFILE,action:de.UiAction.CLICK,ui_element:de.UiElement.LINK_APP_SETTINGS}}})}calculateStyle(){const e=this.props.color,t=Object(EY.f)(e);if(t&&e){var a=at()(t,3);return{background:`linear-gradient(136.53deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.2) 100%), linear-gradient(312.01deg, ${e} 0%, rgba(${a[0]},${a[1]},${a[2]},0.75) 100%)`,backgroundColor:e}}}renderSettingsButton(){var e=this.props;const t=e.isExternal,a=e.isUserRestricted,n=e.settingsUrl;return t||a||!n?null:o.a.createElement(_e.d,{"data-qa":"app_header_settings_button",href:`${n}?utm_source=in-prod&utm_medium=inprod-link_app_settings-user_profile-click`,className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",onClick:this.onSettingsButtonClick},TY.t("Settings"))}render(){var e=this.props;const t=e.avatarUrl,a=e.isAvatarEmoji,n=e.color,s=e.isExternal,r=e.name,i=e.tagline,l=e.appProfile,c=e.externalTeam;return o.a.createElement("div",{className:d()({"p-app_profile_flexpane_header":!s,"p-app_profile_flexpane_header--external":s}),style:this.calculateStyle(n)},!!s&&o.a.createElement(kY.a,{externalTeam:c}),o.a.createElement("img",{className:d()("p-app_profile_flexpane_header__icon rounded",{"p-app_profile_flexpane_header__icon--emoji":a}),alt:"app avatar","data-qa":"app_header_icon",src:t}),o.a.createElement("div",{className:"p-app_profile_flexpane_header__text"},o.a.createElement("div",{className:"p-app_profile_flexpane_header__row"},o.a.createElement("span",{className:"p-app_profile_flexpane_header__app_name","data-qa":"app_header_name"},r),o.a.createElement("div",null,o.a.createElement("span",{className:"p-app_profile_flexpane_header__app_label rounded","data-qa":"app_header_app_label"},TY.t("APP")))),!!i&&o.a.createElement("div",{className:"p-app_profile_flexpane_header__tagline overflow_hidden","data-qa":"app_header_tagline"},i),o.a.createElement("div",{className:"p-app_profile_flexpane_header__button_container"},this.renderSettingsButton(),o.a.createElement(wY,{appProfile:l}))))}}app_profile_header_AppProfileHeader.displayName="AppProfileHeader",app_profile_header_AppProfileHeader.defaultProps=NY;var AY=Object(u.b)((e,{appProfile:t})=>{const a=Object(XN.g)(t),n=Object(XN.a)(e,t);return{clogger:Object(ie.a)({state:e}),avatarUrl:n,isAvatarEmoji:!!a,customIntegrationType:Object(XN.d)(t),color:Object(XN.b)(t),tagline:Object(XN.q)(t),isExternal:Object(XN.E)(e,t),isDistributed:Object(XN.D)(t),isUserRestricted:Object(Je.Gb)(self)||Object(Je.Mb)(self),settingsUrl:Object(XN.y)(e,t),name:Object(XN.m)(t),externalTeam:Object(XN.u)(e,t)}})(app_profile_header_AppProfileHeader);a("W90I");const RY=new x.b("app_profile"),MY=(l.default.string,l.default.bool,l.default.func,{formattedDescription:"",hideExpandButton:!1,clogLinkClick:r.a});function PY({formattedDescription:e,hideExpandButton:t,clogLinkClick:a}){var n=Object(i.useState)(!1),s=at()(n,2);const r=s[0],l=s[1];return e?o.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_how_to_use"},o.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},RY.t("How to use this app")),o.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},o.a.createElement("div",{className:d()("p-app_profile_flexpane__description",{"p-app_profile_flexpane__description--collapse":!t&&!r})},o.a.createElement(wG,{formattedDescription:e,clogLinkClick:a}),!t&&o.a.createElement(i.Fragment,null,!r&&o.a.createElement("div",{className:"p-app_profile_flexpane__description__fade"}),o.a.createElement(_e.c,{className:d()("p-app_profile_flexpane__description__button",{"p-app_profile_flexpane__description__button--expand":!r,"p-app_profile_flexpane__description__button--collapse":r}),onClick:()=>{l(!r)}},r?RY.t("Collapse"):RY.t("Expand"),o.a.createElement(bn.b,{type:r?"arrow-up-medium":"arrow-down-medium"})))))):null}PY.displayName="AppProfileDescription",PY.defaultProps=MY;var xY=Object(_p.a)(PY);l.default.string.isRequired,l.default.shape({name:l.default.string,usage:l.default.string,description:l.default.string}).isRequired,l.default.func,l.default.object.isRequired;const LY={autoFillSlashCommand:r.a};class app_profile_slash_command_item_AppProfileSlashCommandItem extends i.PureComponent{autoFillSlashCommand(e){this.props.autoFillSlashCommand({commandName:e});var t=this.props;const a=t.appId,n=t.clogger;n.track(de.EventId.USER_PROFILE_CLICK,{app_id:a}),n.track(de.EventId.APP_PROFILE_SLASH_COMMAND_CLICK,{app_id:a,contexts:{core:{app_id:a}}})}render(){var e=this.props.command;const t=e.name,a=e.usage,n=e.description;return o.a.createElement(_e.c,{type:"outline","data-qa":t,onClick:()=>this.autoFillSlashCommand(t),className:"p-app_profile_flexpane__slash_command"},o.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__title overflow_ellipsis"},o.a.createElement("span",{className:"bold"},t)," ",o.a.createElement("span",null,a)),o.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__description overflow_ellipsis"},n))}}app_profile_slash_command_item_AppProfileSlashCommandItem.displayName="AppProfileSlashCommandItem",app_profile_slash_command_item_AppProfileSlashCommandItem.defaultProps=LY;var FY=Object(u.b)(e=>({clogger:Object(ie.a)({state:e})}),e=>Object(cg.b)({autoFillSlashCommand:VG.a},e))(app_profile_slash_command_item_AppProfileSlashCommandItem);const DY=new x.b("app_profile"),BY=(l.default.bool,l.default.string,l.default.object,l.default.string,l.default.string,l.default.string,l.default.bool,l.default.number,l.default.arrayOf(l.default.object),l.default.string,l.default.bool,l.default.bool,l.default.object,{isPublished:!1,installedUserId:"",appProfile:void 0,appId:"",botId:"",customIntegrationType:"",isUserRestricted:!1,dateCreated:void 0,commands:[],formattedDescription:"",hideDescriptionExpansion:!1,showSlashCommands:!1,clogger:{track:r.a}});class app_profile_BaseAppProfile extends i.PureComponent{constructor(e){super(e),this.clogLinkClick=this.clogLinkClick.bind(this)}getSectionHeaderText(){switch(this.props.customIntegrationType){case"incoming-webhook":return DY.t("About this Incoming Webhook");case"outgoing-webhook":return DY.t("About this Outgoing Webhook");case"bot":return DY.t("How to use this Bot");case"slash-commands":return DY.t("How to use this Slash Command");default:return null}}getSectionText(){switch(this.props.customIntegrationType){case"outgoing-webhook":return null;case"bot":return DY.t("You can message bots and invite them to channels like other members.");case"slash-commands":return DY.t("Slash commands take actions when you post them in a conversation.");default:return null}}clogLinkClick(){var e=this.props;const t=e.clogger,a=e.appId,n=e.botId;t.track(de.EventId.USER_PROFILE_CLICK,{appId:a,botId:n})}renderAboutSection(){var e=this.props;const t=e.customIntegrationType,a=e.dateCreated,n=e.isUserRestricted,s=e.installedUserId;if(t){const e=o.a.createElement(mB.a,{id:s,onClick:e=>{e.preventDefault(),this.clogLinkClick(),Object(Tu.i)(s)}});return o.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_about"},o.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},this.getSectionHeaderText(t)),o.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},this.getSectionText(t)," ",!n&&DY.rt("Created by {custom_integration_creator} on {date_created, date, long}.",{custom_integration_creator:e,date_created:1e3*a})))}return null}renderCommandsSection(){var e=this.props;const t=e.appId,a=e.commands,n=e.showSlashCommands;return a&&a.length&&n?o.a.createElement("section",{"data-qa":"app_profile_commands",className:"p-app_profile_flexpane__section"},o.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},DY.t("Responds to\u2026",{note:"Refers to slash commands the app responds to."})),a.map(e=>o.a.createElement(FY,{key:e.name,command:e,appId:t}))):null}renderMetaSection(){return this.props.isPublished?null:o.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_meta"},o.a.createElement("p",null,o.a.createElement("i",{className:"sk_foreground_max"},DY.t("This app has not been reviewed by Slack."))))}render(){var e=this.props;const t=e.appProfile,a=e.appId,n=e.botId,s=e.formattedDescription,r=e.hideDescriptionExpansion;return!t||Object(ee.e)(t)?null:o.a.createElement("div",{className:"p-app_profile_flexpane__container","data-qa":"app_profile_container","data-app_id":a,"data-bot_id":n},o.a.createElement(AY,{appProfile:t}),o.a.createElement("div",{className:"sk_primary_foreground large_bottom_margin"},this.renderAboutSection(),o.a.createElement(xY,{formattedDescription:s,hideExpandButton:r,clogLinkClick:this.clogLinkClick}),this.renderCommandsSection(),this.renderMetaSection()))}}app_profile_BaseAppProfile.displayName="BaseAppProfile",app_profile_BaseAppProfile.defaultProps=BY;var UY=Object(u.b)((e,{serviceId:t})=>{const a=Object(JN.c)(e,{serviceId:t});return s()({},vY(a,Object(bi.b)(e)),{showSlashCommands:Object(XN.M)(e,a),clogger:Object(ie.a)({state:e})})})(app_profile_BaseAppProfile);l.default.string,l.default.object.isRequired,l.default.func;const qY={appId:"",fetchLegacyAppProfile:void 0};class generic_app_profile_GenericAppProfile extends i.Component{constructor(e){super(e),this.state={appProfile:void 0},this.getAppProfileProps=this.getAppProfileProps.bind(this)}componentDidMount(){this.props.appId&&this.fetchAppProfile()}componentDidUpdate(e){this.props.appId!==e.appId&&this.fetchAppProfile()}getAppProfileProps(){const e=this.state.appProfile,t=this.props.currentMember;return s()({},vY(e,t),{showSettingsSection:!1})}fetchAppProfile(){this.props.fetchLegacyAppProfile({appId:this.props.appId}).then(e=>{this.setState(()=>({appProfile:Object(VG.c)(null,e)}))})}render(){return o.a.createElement(app_profile_BaseAppProfile,this.getAppProfileProps())}}generic_app_profile_GenericAppProfile.displayName="GenericAppProfile",generic_app_profile_GenericAppProfile.defaultProps=qY;var HY=Object(u.b)(e=>({currentMember:Object(bi.b)(e)}),e=>Object(cg.b)({fetchLegacyAppProfile:lV.b},e))(generic_app_profile_GenericAppProfile);a("zbnt");const WY=new x.b("app_profile"),GY=(l.default.string,l.default.string,l.default.string,{serviceId:void 0,appId:void 0,customIntegrationType:""});class app_profile_flexpane_AppProfilePane extends i.PureComponent{render(){const e={"incoming-webhook":WY.t("About this Incoming Webhook"),"outgoing-webhook":WY.t("About this Outgoing Webhook"),bot:WY.t("About this Bot"),"slash-commands":WY.t("About this Slash Command")},t=WY.t("About this app"),a=e[this.props.customIntegrationType]||t;return o.a.createElement(I$.b,{className:"p-app_profile_flexpane",dataQa:"app_profile_pane",title:a,viewId:"app-profile-flepane",kbNavOrder:Object(re.a)()?void 0:4.7,renderBody:()=>o.a.createElement(pr.a,null,({width:e,height:t})=>o.a.createElement(Mv.b,{width:e,height:t,fade:!0},this.props.serviceId?o.a.createElement(UY,{serviceId:this.props.serviceId}):o.a.createElement(HY,{appId:this.props.appId})))})}}app_profile_flexpane_AppProfilePane.displayName="AppProfilePane",app_profile_flexpane_AppProfilePane.defaultProps=GY;var KY=Object(u.b)((e,{serviceId:t})=>{const a=t?Object(JN.c)(e,{serviceId:t}):void 0;return{customIntegrationType:Object(XN.d)(a)}})(app_profile_flexpane_AppProfilePane),VY=a("HYSh"),zY=a("9XiS"),$Y=a("DQNL"),YY=a("3Hq1");const QY=new x.b("a11y");a("Sqd7");l.default.func.isRequired;function XY({children:e}){return o.a.createElement(tb.a,null,({width:t,height:a,measureRef:n})=>o.a.createElement("div",{ref:n,className:"c-measure_container"},e({width:t,height:a})))}XY.displayName="MeasureContainer";var JY=XY,ZY=a("0xwB"),eQ=a("pbgM"),tQ=a("kpmE"),aQ=a("rVFV");const nQ=80,sQ=new x.b("user_groups");let rQ,iQ;const oQ=Object(mt.b)("Validate user group name",(e,t,{name:a,prevName:n,reason:s})=>{if(function(e,t){Object(m.m)(e,"feature_sonic_user_groups")&&(iQ={hasNameRequiredWarning:sQ.t("Please enter a name for this group."),hasReservedName:sQ.t('The name "{name}" is reserved and cannot be used.',{name:t,fallbackHash:"fc741acb2c5d6bf755a8dfceb173bf447313e359"}),hasMaxLengthWarning:sQ.t("Names can\u2019t be more than {maxLength} characters.",{maxLength:nQ}),hasNameTakenWarning:sQ.t("This name is already in use by another group."),unknownError:sQ.t("Sorry, something went wrong. Please try a different name.")})}(t(),a),rQ={admins:sQ.t("Team Admins"),owners:sQ.t("Team Owners")},!a||!a.trim())return Promise.resolve(iQ.hasNameRequiredWarning);const r=a.toLowerCase().trim();return n&&r===n.toLowerCase().trim()?Promise.resolve(""):r===rQ.admins.toLowerCase()||r===rQ.owners.toLowerCase()?Promise.resolve(iQ.hasReservedName):Object(aQ.a)(a)>nQ?Promise.resolve(iQ.hasMaxLengthWarning):e(Object(tQ.p)({name:a,reason:s})).then(({error:e})=>"name_already_exists"===e?iQ.hasNameTakenWarning:e?iQ.unknownError:"")});oQ.meta={name:"validateUserGroupName",key:"utilityValidateUserGroupNameValidateUserGroupName",description:"Validate user group name"},oQ.propTypes={name:l.default.string,prevName:l.default.string};var lQ=oQ;const cQ=new x.b("user_groups"),dQ=80;let uQ,pQ;const hQ=Object(mt.b)("Validate user group handle",(e,t,{handle:a,prevHandle:n,reason:s})=>{return function(e,t){Object(m.m)(e,"feature_sonic_user_groups")&&(uQ={hasHandleRequiredWarning:cQ.t("Please enter a handle for this group."),hasMaxLengthWarning:cQ.t("Handles can\u2019t be more than {maxLength} characters.",{maxLength:dQ}),hasReservedHandle:cQ.t("The group name @{handle} is reserved and cannot be used.",{handle:t,fallbackHash:"87ee177397df658b72975b506208aebb74090907"}),hasSpecialsWarning:cQ.t("Handles can only contain letters or numbers."),hasPunctuationWarning:cQ.t("Handles can only contain letters or numbers."),hasLowercaseWarning:cQ.t("Handles can only be in lowercase."),hasHandleTakenWarning:cQ.t("This handle is already in use by a member, channel, or another group."),unknownError:cQ.t("Sorry, something went wrong. Please try a different handle.")})}(t(),a),pQ={admins:cQ.t("admins"),owners:cQ.t("owners")},a&&a.trim()?a===n?Promise.resolve(""):a.toLowerCase()===pQ.admins.toLowerCase()||a.toLowerCase()===pQ.owners.toLowerCase()?Promise.resolve(uQ.hasReservedHandle):/[ ,;'`~!@#$%^&*+=\\:"<>?|]/.test(a.trim())?Promise.resolve(uQ.hasSpecialsWarning):/^[-|_]+$/.test(a)?Promise.resolve(uQ.hasPunctuationWarning):/[A-Z]/.test(a)?Promise.resolve(uQ.hasLowercaseWarning):Object(aQ.a)(a)>dQ?Promise.resolve(uQ.hasMaxLengthWarning):e(Object(tQ.o)({handle:a,reason:s})).then(({error:e})=>"handle_already_exists"===e?uQ.hasHandleTakenWarning:e?uQ.unknownError:""):Promise.resolve(uQ.hasHandleRequiredWarning)});hQ.meta={name:"validateUserGroupHandle",key:"utilityValidateUserGroupHandleValidateUserGroupHandle",description:"Validate user group handle"},hQ.propTypes={handle:l.default.string,prevHandle:l.default.string};var mQ=hQ,bQ=a("dI1W");const fQ=new x.b("user_groups"),_Q=(l.default.array,l.default.func,l.default.bool.isRequired,{selectedChannels:[],onChange:r.a}),gQ=32,yQ={entities:{channels:{includePublic:!0,includePrivate:!0,includeFromAnotherTeam:!1,includeMpims:!1,includeArchived:!1,searchPreviousNames:!1,onlyVisibleMpims:!1,includeRequired:!0}},limit:100,tiered:!0,sort:{frecency:!0}};class user_group_default_channel_picker_UserGroupDefaultChannelPicker extends i.PureComponent{getSelectedOptions(){return(this.props.selectedChannels||[]).map(e=>({value:e}))}renderChannelOption(e){return o.a.createElement(Jb.a,{channel:e.entity,channelId:e.value})}render(){if(!this.props.featureSonicUserGroups)return null;const e=this.props.onChange,t=fQ.t("Default channels"),a=fQ.t("Group members are added to these channels automatically.");return o.a.createElement(Dn.a,{htmlFor:"user_group_default_channel_select",id:"user_group_default_channel",key:"user_group_default_channel",text:t,optional:!0},o.a.createElement(Gb.c,{selectedOptions:this.getSelectedOptions(),renderOption:this.renderChannelOption,width:"100%",optionsRowHeight:gQ,onSelectedItemsChange:e,selectId:"user_group_default_channel_select",searcherOptions:yQ}),o.a.createElement(bQ.a,null,a))}}user_group_default_channel_picker_UserGroupDefaultChannelPicker.displayName="UserGroupDefaultChannelPicker",user_group_default_channel_picker_UserGroupDefaultChannelPicker.defaultProps=_Q;const OQ={search:q$.c};var CQ=Object(u.b)(e=>({getChannelById:t=>Object(B.e)(e,t),featureSonicUserGroups:Object(m.m)(e,"feature_sonic_user_groups")}),OQ)(user_group_default_channel_picker_UserGroupDefaultChannelPicker);const vQ=new x.b("user_groups");l.default.object.isRequired,l.default.shape({name:l.default.string,handle:l.default.string,purpose:l.default.string,channels:l.default.array}),l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.bool.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.shape({nameError:l.default.string,handleError:l.default.string,purposeError:l.default.string}),l.default.string,l.default.func.isRequired,l.default.number.isRequired;class user_group_edit_create_form_UserGroupEditCreateForm extends i.PureComponent{constructor(e){super(e),this.state={name:e.detailsFormValues.name,handle:e.detailsFormValues.handle,purpose:e.detailsFormValues.purpose,channels:e.detailsFormValues.channels};const t=!this.state.name||!this.state.handle;this.props.setRequiredFieldsEmpty(t),this.validateUserGroupName=Object(oa.a)(this.validateUserGroupName,300).bind(this),this.validateUserGroupHandle=Object(oa.a)(this.validateUserGroupHandle,300).bind(this),Object(la.a)(this,["onNameChange","onHandleChange","onPurposeChange","onChannelsUpdate","getFormValues","setUserGroupFormRef","maybeRenderApiError","focusNameInput"]),this.postValidateHandle=null,this.postValidateName=null,this.nameInputRef=o.a.createRef()}componentDidMount(){this.props.onRef(this),this.focusNameInput()}componentDidUpdate(e){if(e!==this.props){const e=!this.state.name||!this.state.handle;this.props.setRequiredFieldsEmpty(e)}}componentWillUnmount(){this.props.onRef(void 0)}onNameChange(e){return this.postValidateName&&(this.postValidateName.cancel(),this.postValidateName=null),this.setState(()=>({name:e})),this.validateUserGroupName(e)}onHandleChange(e){this.postValidateHandle&&(this.postValidateHandle.cancel(),this.postValidateHandle=null);const t=e.replace(/ /g,"");return this.setState(()=>({handle:t}))," "!==e.charAt(0)?this.validateUserGroupHandle(t):Promise.resolve()}onPurposeChange(e){this.props.onPurposeChange(e),this.setState(()=>({purpose:e}))}onChannelsUpdate(e){const t=e.map(e=>e.value);this.setState(()=>({channels:t}))}getFormValues(){return this.state}setUserGroupFormRef(e){this.defaultChannelsRef=e}focusNameInput(){this.nameInputRef.current.focus()}validateUserGroupHandle(e){const t=this.props.userGroup;return this.props.validateUserGroupHandle({handle:e,prevHandle:Object($Y.f)(t,{includeAtSign:!1}),reason:"user-group-edit-create-form"}).then(e=>{this.props.setFormErrors({handleError:e})}).finally(()=>{this.postValidateHandle=null})}validateUserGroupName(e){const t=this.props.userGroup;return this.props.validateUserGroupName({name:e,prevName:Object($Y.h)(t),reason:"user-group-edit-create-form"}).then(e=>{this.props.setFormErrors({nameError:e})}).finally(()=>{this.postValidateName=null})}hasValidationErrors(e){return Object(qu.a)(e,e=>e)}maybeRenderApiError(){if(!this.props.featureSonicUserGroups)return null;if(this.props.submitError){const e=vQ.t("We\u2019re not sure why, but that didn\u2019t work. Try again?");return o.a.createElement(Rb.a,{level:"error",type:"inline",className:"margin_bottom_100"},e)}return!1}maybeRenderAutogeneratedUserGroupAlert(){const e=this.props.userGroup;if(!Object($Y.n)(e))return null;const t=vQ.t("This user group is automatically generated for Workspace Admins.",{fallbackHash:"0cf6a765aa60fc4bc7f34f9ec7e18139d7ab4c37"}),a=vQ.t("This user group is automatically generated for Workspace Owners.",{fallbackHash:"18d8fa9ec13425420cc46bc2669fc1f2055284c6"});let n;return Object($Y.p)(e)&&(n=a),Object($Y.o)(e)&&(n=t),o.a.createElement(Rb.a,{level:"info",type:"inline",className:"margin_bottom_100"},n)}renderUserGroupNameField(){if(!this.props.featureSonicUserGroups)return null;const e=vQ.t("Name"),t=vQ.t("e.g. Accounts Team");return o.a.createElement("div",null,o.a.createElement(Dn.a,{htmlFor:"name_label",id:"user_group_name",key:"user_group_name",text:e},o.a.createElement(Un.a,{name:"user_group_name",ref:this.nameInputRef,id:"name_input",placeholder:t,labelId:"user_group_name",value:this.state.name,type:"text",onChange:e=>this.onNameChange(e),errorText:this.props.errors.nameError,isRequired:!0,useInlineAlert:!0,isDisabled:Object($Y.n)(this.props.userGroup)})))}renderUserGroupHandleField(){if(!this.props.featureSonicUserGroups)return null;const e=vQ.t("e.g. accounts-team"),t=vQ.t("You\u2019ll use the display name to get the group\u2019s attention. It should be all lowercase, with no spaces."),a=vQ.t("Handle");return o.a.createElement("div",null,o.a.createElement(Dn.a,{htmlFor:"handle_label",id:"user_group_handle",key:"user_group_handle",text:a},o.a.createElement(Un.a,{name:"user_group_handle",id:"handle_input",placeholder:e,labelId:"user_group_handle",value:this.state.handle,type:"text",onChange:e=>this.onHandleChange(e),errorText:this.props.errors.handleError,hintText:t,isRequired:!0,icon:"mentions",useInlineAlert:!0,isDisabled:Object($Y.n)(this.props.userGroup)})))}renderUserGroupPurposeField(){if(!this.props.featureSonicUserGroups)return null;const e=vQ.t("Purpose"),t=vQ.t("What is this group about?");return o.a.createElement("div",null,o.a.createElement(Dn.a,{htmlFor:"purpose_label",id:"user_group_purpose",key:"user_group_purpose",text:e,optional:!0},o.a.createElement(fd.a,{name:"user_group_purpose",id:"purpose_input",labelId:"user_group_purpose",value:this.state.purpose,type:"text",onChange:e=>this.onPurposeChange(e),errorText:this.props.errors.purposeError,hintText:t,maxCharacterLimit:this.props.purposeMaxLength,useInlineAlert:!0})))}renderDefaultChannelSelect(){return o.a.createElement(CQ,{selectedChannels:this.state.channels,onChange:this.onChannelsUpdate})}render(){return this.props.featureSonicUserGroups?o.a.createElement("div",null,this.maybeRenderApiError(),this.maybeRenderAutogeneratedUserGroupAlert(),o.a.createElement("form",{className:"p-user_group_create_form"},this.renderUserGroupNameField(),this.renderUserGroupHandleField(),this.renderUserGroupPurposeField(),this.renderDefaultChannelSelect())):null}}user_group_edit_create_form_UserGroupEditCreateForm.displayName="UserGroupEditCreateForm",user_group_edit_create_form_UserGroupEditCreateForm.defaultProps={detailsFormValues:{name:"",handle:"",purpose:"",channels:[]},errors:{nameError:"",handleError:"",purposeError:""},submitError:""};const EQ={validateUserGroupName:lQ,validateUserGroupHandle:mQ};var kQ=Object(u.b)(e=>({featureSonicUserGroups:Object(m.m)(e,"feature_sonic_user_groups")}),EQ)(user_group_edit_create_form_UserGroupEditCreateForm);a("UJZI");const SQ=new x.b("user_groups"),jQ=(l.default.func,l.default.func,l.default.array,l.default.bool,l.default.string,{onSelectedItemsChange:r.a,getMemberById:r.a,userGroupMemberIds:[],isEnterprise:null,teamId:null}),IQ=32,wQ=148;class user_group_member_selector_UserGroupMemberSelector extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["getSelectedMembers","renderMemberOption","filterMembers"])}getSelectedMembers(e){return e.map(e=>this.formatMemberOption(this.props.getMemberById(e)))}formatMemberOption(e){return e?{label:Object(Je.F)(e),value:e.id}:null}filterMembers(e){return!(this.props.isEnterprise&&!Object(Je.o)(e,[this.props.teamId]).length)}renderMemberOption(e){return o.a.createElement(Qb.a,{id:e.value})}render(){const e=this.props.userGroupMemberIds,t=this.getSelectedMembers(e);return o.a.createElement(Gb.c,{isRequired:!0,focusOnMount:!0,key:"user_group_member_select",selectId:"user_group_member_select",renderOption:this.renderMemberOption,selectedOptions:t,onSelectedItemsChange:this.props.onSelectedItemsChange,placeholderText:SQ.t("Search by name"),width:"100%",size:"large",maxHeight:wQ,optionsRowHeight:IQ,searcherOptions:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0,includeSlackbot:!1,includeBots:!1,includeDeleted:!1,includeGuests:!1}},allowEmptyQuery:!0,sort:{frecency:!1,selfFirst:!1},limit:40,filter:this.filterMembers}})}}user_group_member_selector_UserGroupMemberSelector.displayName="UserGroupMemberSelector",user_group_member_selector_UserGroupMemberSelector.defaultProps=jQ;var TQ=Object(u.b)((e,{groupId:t})=>{const a=Object(VY.e)(e,t);return{userGroupMemberIds:Object($Y.g)(a),getMemberById:t=>Object(bi.d)(e,t),isEnterprise:Object(z_.d)(e),teamId:Object(h.b)(e)}})(user_group_member_selector_UserGroupMemberSelector);const NQ=new x.b("user_groups"),AQ=(l.default.string,l.default.func,l.default.array,l.default.func,{groupId:void 0,onSelectedItemsChange:r.a,userGroupMemberIds:[],fetchAndUpsertUserGroupMembers:r.a});class user_group_member_management_UserGroupMemberManagement extends i.PureComponent{constructor(e){super(e),this.state={updatedGroupMembers:e.userGroupMemberIds,displayNoMemberError:!1,haveUpsertedExistingMembers:!1},Object(la.a)(this,["setAllMembers","onSelectedItemsChange"])}componentDidMount(){const e=this.props.groupId;e&&this.props.fetchAndUpsertUserGroupMembers({groupId:e}).then(e=>{this.setState(()=>({haveUpsertedExistingMembers:!0})),Object(io.a)(e)||this.setState(()=>({updatedGroupMembers:e}))})}componentWillUnmount(){this.keyCommands&&this.keyCommands.reset()}onSelectedItemsChange(e){this.setDisplayNoMemberError(!e.length),this.setAllMembers(e.map(e=>e.value)),this.props.onSelectedItemsChange(e)}getUpdatedUserGroupMembers(){return this.state.updatedGroupMembers}setDisplayNoMemberError(e){this.setState(()=>({displayNoMemberError:e}))}setAllMembers(e){this.setState(()=>({updatedGroupMembers:e}))}validateUpdatedGroupMemberCount(){const e=this.state.updatedGroupMembers.length>0;return e||this.setDisplayNoMemberError(!0),e}maybeRenderNoMembersAlert(){return this.state.displayNoMemberError?o.a.createElement(Rb.a,{type:"inline",level:"error",className:"margin_right_150 margin_left_150 margin_bottom_100","data-qa-user-group-error":!0},NQ.t("User groups need to have at least one member.")):null}renderLoadingSpinner(){return o.a.createElement("div",{className:"full_height full_width display_flex align_items_center","data-qa-user-group-loading":!0},o.a.createElement(Kt.a,{size:"jumbo",className:"inline_block full_width margin_top_200"}))}renderUserGroupMemberSelector(){const e=this.state.haveUpsertedExistingMembers,t=this.props.groupId;return o.a.createElement("div",{className:"p-user_group_member_selector","data-qa-user-group-member-management-body":!0},!t||e?o.a.createElement("div",null,this.maybeRenderNoMembersAlert(),o.a.createElement(TQ,{groupId:this.props.groupId,onSelectedItemsChange:this.onSelectedItemsChange})):o.a.createElement("div",{className:"p-user_group_member_selector_loading_spinner_container"},this.renderLoadingSpinner()))}render(){return this.renderUserGroupMemberSelector()}}user_group_member_management_UserGroupMemberManagement.displayName="UserGroupMemberManagement",user_group_member_management_UserGroupMemberManagement.defaultProps=AQ;const RQ={fetchAndUpsertUserGroupMembers:eQ.j};var MQ=Object(u.b)((e,{groupId:t})=>{const a=Object(VY.e)(e,t);return{userGroupMemberIds:Object($Y.g)(a)}},RQ,null,{withRef:!0})(user_group_member_management_UserGroupMemberManagement);const PQ=Object(mt.b)("Validate the user group form",(e,t,{name:a,handle:n,prevName:s,prevHandle:r})=>Promise.all([e(lQ({name:a,prevName:s})),e(mQ({handle:n,prevHandle:r}))]).then(([e,t])=>({nameError:e,handleError:t})));PQ.meta={name:"validate",key:"componentsFlexpaneUserGroupsUtilityValidationValidate",description:"Validate the user group form"},PQ.propTypes={name:l.default.string,handle:l.default.string,prevName:l.default.string,prevHandle:l.default.string};var xQ=PQ;const LQ=new x.b("user_groups"),FQ=(l.default.object.isRequired,l.default.string,l.default.string,l.default.string,l.default.string,l.default.array,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.bool.isRequired,l.default.func,l.default.func,l.default.func,l.default.func.isRequired,{userGroupId:"",userGroupName:null,userGroupHandle:null,userGroupPurpose:"",userGroupDefaultChannels:[],closeModal:r.a,enqueueToast:r.a,showUserGroupDetails:r.a});let DQ;const BQ=Object(Ot.b)(),UQ=140;class user_group_edit_create_dialog_UserGroupEditCreateDialog extends i.PureComponent{constructor(e){super(e),this.state={formSubmitPending:!1,errors:{nameError:"",handleError:"",purposeError:""},formStep:"",submitError:"",requiredFieldsEmpty:!1,detailsFormValues:{name:this.props.userGroupName,handle:this.props.userGroupHandle,purpose:this.props.userGroupPurpose,channels:this.props.userGroupDefaultChannels},purposeTooLong:!1},Object(la.a)(this,["setFormErrors","setUserGroupFormRef","setUserGroupMemberManagementRef","setRequiredFieldsEmpty","onSubmitSuccess","onSubmitFailure","onDetailsStepComplete","onEditDialogSubmit","onCreateDialogSubmit","createDialogViewInfo","shouldShowCloseDialogSpeedBump","onSelectedItemsChange","onPurposeChange"]),this.onPurposeChange=Object(oa.a)(this.onPurposeChange,300).bind(this),this.formRef=null}onCreateDialogSubmit(){if(!this.props.featureSonicUserGroups)return null;var e=this.state.detailsFormValues;const t=(e=void 0===e?{}:e).name,a=e.handle,n=e.purpose,s=e.channels;if(!this.userGroupMemberManagementRef)return!1;if(!this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount())return this.setRequiredFieldsEmpty(!0),!1;const r=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.createUserGroup({name:Object(ia.a)(t),handle:a,description:n,channels:s,users:r,reason:"onCreateDialogSubmit"}).then(({id:e})=>{this.props.showUserGroupDetails({groupId:e}),this.props.addUserGroupIds([e])}).then(()=>{this.props.enqueueToast({element:o.a.createElement(Ba.b,null,LQ.t("User group created!"))}),this.onSubmitSuccess()}).catch(e=>{BQ.error(`Error creating user group: ${e}`),this.onSubmitFailure(e)})}onDetailsStepComplete(){const e=this.formRef.getFormValues();return this.setFormSubmitPending(!0),this.props.validate(s()({},e,{prevName:this.props.userGroupName,prevHandle:this.props.userGroupHandle})).then(t=>{this.setFormErrors(t),this.hasValidationErrors(t)?this.setFormSubmitPending(!1):this.state.formStep===DQ.edit.id?this.onEditDialogSubmit(e):(this.setDetailsFormValues(e),this.setDialogStep(DQ.members.id),this.setFormSubmitPending(!1))})}onEditDialogSubmit({name:e,handle:t,purpose:a,channels:n}){if(!this.props.featureSonicUserGroups)return null;const s=this.props.userGroupId;return this.props.updateUserGroup({groupId:s,name:Object(ia.a)(e),handle:t,description:a,channels:n,reason:"onEditDialogSubmit"}).then(()=>{this.props.enqueueToast({element:o.a.createElement(Ba.b,null,LQ.t("Group has been updated."))}),this.onSubmitSuccess()}).catch(e=>{BQ.error(`Error editing user group: ${e}`),this.onSubmitFailure(e)})}onPurposeChange(e){const t=e.length>UQ;this.setState(()=>({purposeTooLong:t}))}onSelectedItemsChange(e){this.setRequiredFieldsEmpty(!e.length)}onSubmitFailure(e){this.setFormSubmitPending(!1),this.setApiError(e)}onSubmitSuccess(){this.setFormSubmitPending(!1),this.props.closeModal(),this.setApiError("")}getDetailsFormDialogProps(){if(!this.props.featureSonicUserGroups)return null;const e=this.state.formStep,t=Object(qu.a)(DQ,t=>t.id===e);return{title:t.title,contentLabel:t.title,goButtonText:t.goButtonText,onGo:this.onDetailsStepComplete,shouldCloseOnCancel:!0,cancelText:LQ.t("Cancel"),shouldCloseOnGo:!1,footerText:t.footerText}}getMemberSelectorDialogProps(){return this.props.featureSonicUserGroups?{title:DQ.members.title,contentLabel:DQ.members.title,shouldCloseOnGo:!0,bodyClassName:"p-user_group_member_management__dialog_body",onGo:this.onCreateDialogSubmit,goButtonText:DQ.members.goButtonText,shouldCloseOnCancel:!1,cancelText:LQ.t("Back"),onCancel:()=>{this.setDialogStep(DQ.details.id)},footerText:DQ.members.footerText}:null}setApiError(e){this.setState(()=>({submitError:e}))}setDetailsFormValues(e){this.setState(t=>({detailsFormValues:s()({},t.detailsFormValues,e)}))}setDialogStep(e){this.setState(()=>({formStep:e}))}setFormErrors(e){this.setState(t=>({errors:s()({},t.errors,e)}))}setFormSubmitPending(e){this.setState(()=>({formSubmitPending:e}))}setRequiredFieldsEmpty(e){this.setState(()=>({requiredFieldsEmpty:e}))}setUserGroupFormRef(e){this.formRef=e}setUserGroupMemberManagementRef(e){this.userGroupMemberManagementRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}UNSAFE_componentWillMount(){this.createDialogViewInfo(),this.props.userGroupId?this.setDialogStep(DQ.edit.id):this.setDialogStep(DQ.details.id)}createDialogViewInfo(){this.props.featureSonicUserGroups&&(DQ={details:{id:"details",footerText:LQ.t("Step 1 of 2"),title:LQ.t("Create User Group"),goButtonText:LQ.t("Next")},members:{id:"members",footerText:LQ.t("Step 2 of 2"),title:LQ.t("Add members"),goButtonText:LQ.t("Create Group")},edit:{id:"edit",footerText:null,title:LQ.t("Edit User Group"),goButtonText:LQ.t("Save")}})}hasValidationErrors(e){return!!Object(qu.a)(e,e=>e.length)}shouldShowCloseDialogSpeedBump(e){if("go"===e||this.state.formStep===DQ.members.id)return!1;const t=this.formRef.getFormValues();return!Object(WD.a)(this.state.detailsFormValues,t)}renderDetailsForm(){return o.a.createElement("div",null,o.a.createElement(kQ,s()({},this.props,{detailsFormValues:this.state.detailsFormValues,errors:this.state.errors,submitError:this.state.submitError,setFormErrors:this.setFormErrors,onRef:e=>this.setUserGroupFormRef(e),setRequiredFieldsEmpty:this.setRequiredFieldsEmpty,onPurposeChange:this.onPurposeChange,purposeMaxLength:UQ,userGroup:this.props.userGroup})))}renderDialogStep(){return this.state.formStep===DQ.details.id||this.state.formStep===DQ.edit.id?this.renderDetailsForm():this.state.formStep===DQ.members.id?this.renderMemberSelector():""}renderMemberSelector(){return this.props.featureSonicUserGroups?o.a.createElement(MQ,{groupId:this.props.userGroupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange}):null}render(){if(!this.props.featureSonicUserGroups)return null;const e=this.hasValidationErrors(this.state.errors)||this.state.requiredFieldsEmpty||this.state.purposeTooLong,t=this.state.formStep===DQ.details.id||this.state.formStep===DQ.edit.id?this.getDetailsFormDialogProps():this.getMemberSelectorDialogProps();return o.a.createElement(ya.a,s()({showCancelButton:!0,goButtonIsDisabled:e,goButtonIsPending:this.state.formSubmitPending},t,{getShouldShowSpeedBump:this.shouldShowCloseDialogSpeedBump,speedBumpCancelButtonText:LQ.t("Keep Editing"),speedBumpContinueButtonText:LQ.t("Close"),speedBumpTitleText:LQ.t("Your work won\u2019t be saved - are you sure you want to close?")}),this.renderDialogStep())}}user_group_edit_create_dialog_UserGroupEditCreateDialog.displayName="UserGroupEditCreateDialog",user_group_edit_create_dialog_UserGroupEditCreateDialog.defaultProps=FQ;const qQ={createUserGroup:eQ.g,updateUserGroup:eQ.o,closeModal:ga.a,enqueueToast:_a.c,showUserGroupDetails:qa.n,validate:xQ,addUserGroupIds:zY.a};var HQ=Object(u.b)((e,t)=>{const a=Object(VY.e)(e,t.userGroupId);return a?{userGroup:a,userGroupName:Object($Y.h)(a),userGroupHandle:Object($Y.f)(a,{includeAtSign:!1}),userGroupPurpose:Object($Y.e)(a),userGroupDefaultChannels:Object($Y.d)(e,a),featureSonicUserGroups:Object(m.m)(e,"feature_sonic_user_groups")}:{userGroup:{},userGroupName:"",userGroupHandle:"",userGroupPurpose:"",userGroupDefaultChannels:[],featureSonicUserGroups:Object(m.m)(e,"feature_sonic_user_groups")}},qQ)(user_group_edit_create_dialog_UserGroupEditCreateDialog);l.default.string.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.object,l.default.func;const WQ={isDetailsView:!1,featureSonicUserGroups:!1,onEnableUserGroup:r.a,onDisableUserGroup:r.a,canEditUserGroups:r.a,canCreateAndDeleteUserGroups:r.a,openModal:r.a,menuProps:{},onClick:r.a},GQ=new x.b("user_groups");class user_group_context_menu_UserGroupContextMenu extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onEnableUserGroup","onDisableUserGroup","onEditDetails","onEditMembers"])}onEnableUserGroup(){return this.props.onClick(),this.props.onEnableUserGroup()}onDisableUserGroup(){this.props.openModal({element:this.renderConfirmationDialog({action:"disable_group",onSubmit:this.props.onDisableUserGroup})}),this.props.onClick()}onEditDetails(){this.props.openModal({element:this.renderEditDialog(this.props.groupId)})}onEditMembers(){this.props.openModal({element:this.renderEditMembersDialog()})}getEditMenuItems(){if(!this.props.featureSonicUserGroups)return null;var e=this.props;const t=e.isAutoGenerated,a=e.isDetailsView;if(t&&a)return null;const n=[];return a||t||n.push({key:"menu-edit-members",label:GQ.t("Edit group members..."),onSelected:this.onEditMembers}),n.push({key:"menu-edit-details",label:GQ.t("Edit group details..."),onSelected:this.onEditDetails}),n}getMenuItems(){if(!this.props.featureSonicUserGroups)return null;const e=[];if(this.userGroupIsEditable()){const t=this.getEditMenuItems();t&&e.push(...t)}return this.canEnableUserGroup()?e.push({key:"menu-enable",label:GQ.t("Enable group"),onSelected:()=>this.onEnableUserGroup()}):this.canDisableUserGroup()&&e.push({key:"menu-disable",label:GQ.t("Deactivate group"),danger:!0,onSelected:()=>this.onDisableUserGroup()}),e}userGroupIsEditable(){return this.props.canEditUserGroups()&&this.props.isActive}canDisableUserGroup(){return this.props.canCreateAndDeleteUserGroups()&&this.props.isActive}canEnableUserGroup(){return this.props.canCreateAndDeleteUserGroups()&&!this.props.isActive}renderConfirmationDialog({action:e,onSubmit:t}){const a=this.props.groupId;return o.a.createElement(tX,{groupId:a,action:e,onSubmit:t})}renderEditDialog(e){return o.a.createElement(HQ,{userGroupId:e})}renderEditMembersDialog(){const e=this.props.groupId;return o.a.createElement(cX,{groupId:e})}render(){return this.props.featureSonicUserGroups?o.a.createElement(fn.f,s()({},this.props.menuProps,{width:"auto"}),this.getMenuItems().map(e=>o.a.createElement(fn.b,e))):null}}user_group_context_menu_UserGroupContextMenu.displayName="UserGroupContextMenu",user_group_context_menu_UserGroupContextMenu.defaultProps=WQ;var KQ=Object(u.b)((e,{groupId:t,isDetailsView:a})=>{const n=Object(VY.e)(e,t);return{isActive:Object($Y.v)(n),isAutoGenerated:Object($Y.n)(n),isDetailsView:a,canEditUserGroups:()=>Object($Y.c)(e),canCreateAndDeleteUserGroups:()=>Object($Y.b)(e),featureSonicUserGroups:Object(m.m)(e,"feature_sonic_user_groups")}},(e,{groupId:t})=>({openModal:(...t)=>e(Object(ga.e)(...t)),onLoad:()=>e(Object(eQ.j)({groupId:t})),onDisableUserGroup:()=>{e(Object(eQ.h)({groupId:t})).then(()=>e(Object(qa.o)()))},onEnableUserGroup:()=>{e(Object(eQ.i)({groupId:t})).then(()=>e(Object(qa.n)({groupId:t})))}}))(user_group_context_menu_UserGroupContextMenu);a("sQIv");const VQ=new x.b("user_groups"),zQ=(l.default.object,l.default.func.isRequired,l.default.func.isRequired,l.default.bool.isRequired,{userGroup:void 0});class user_groups_details_action_bar_UserGroupsDetailsActionBar extends i.Component{constructor(e){super(e),this.renderUserGroupOptionsMenu=this.renderUserGroupOptionsMenu.bind(this)}renderUserGroupOptionsMenu(e){return o.a.createElement(KQ,{menuProps:e,groupId:this.props.userGroup.id,isDetailsView:!0})}renderUserGroupOptions(){if(!this.props.featureSonicUserGroups)return null;const e=VQ.t("More actions");return o.a.createElement(fn.e,{renderMenu:this.renderUserGroupOptionsMenu,position:"bottom-right"},o.a.createElement(Xr.c,{tip:e,delay:Xr.a,position:"top-right"},o.a.createElement(_e.d,{type:"outline",className:"p-user_group_details__button--options","data-qa-user-group-details-group-options-btn":!0,"aria-label":e,icon:"ellipsis"})))}renderEditMembersButton(){return this.props.featureSonicUserGroups?o.a.createElement(_e.d,{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditMembers,"data-qa-user-group-details-edit-members-btn":!0},VQ.t("Edit Members")):null}renderEditDetailsButton(){return this.props.featureSonicUserGroups?o.a.createElement(_e.d,{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditDetails,"data-qa-user-group-details-edit-details-btn":!0},VQ.t("Edit Details")):null}renderPrimaryAction(){return Object($Y.n)(this.props.userGroup)?this.renderEditDetailsButton():this.renderEditMembersButton()}render(){return this.props.featureSonicUserGroups?o.a.createElement("div",{className:"p-user_group_details__actions"},this.renderPrimaryAction(),this.renderUserGroupOptions()):null}}user_groups_details_action_bar_UserGroupsDetailsActionBar.displayName="UserGroupsDetailsActionBar";user_groups_details_action_bar_UserGroupsDetailsActionBar.defaultProps=zQ;var $Q=Object(u.b)((e,{groupId:t})=>({userGroup:Object(VY.e)(e,t),featureSonicUserGroups:Object(m.m)(e,"feature_sonic_user_groups")}))(user_groups_details_action_bar_UserGroupsDetailsActionBar);const YQ={members:"members",channels:"channels"},QQ=new x.b("user_groups"),XQ=(l.default.shape({created_by:l.default.string,date_create:l.default.number,date_delete:l.default.number,date_update:l.default.number,deleted_by:l.default.string,description:l.default.string,enterprise_subteam_id:l.default.string,handle:l.default.string,id:l.default.string,is_external:l.default.bool,is_subteam:l.default.bool,is_usergroup:l.default.bool,name:l.default.string,prefs:l.default.shape({channels:l.default.array,groups:l.default.array}),team_id:l.default.string,updated_by:l.default.string,user_count:l.default.number,users:l.default.array,_name_lc:l.default.string}),l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.string.isRequired,l.default.array,l.default.array,l.default.array,l.default.bool,{userGroup:{},fetchUserGroupMembers:r.a,onChannelSwitch:r.a,removeMember:r.a,removeChannel:r.a,openModal:r.a,openUserGroupList:r.a,enqueueToast:r.a,canEditUserGroups:r.a,canCreateAndDeleteUserGroups:r.a,userGroupMembers:[],newMembers:[],userGroupDefaultChannels:[],showMemberProfile:r.a,getPrefCompliantMemberNameLowerCase:r.a,featureSonicUserGroups:!1}),JQ=Object(Ot.b)();class user_group_details_UserGroupDetails extends i.PureComponent{constructor(e){super(e),this.state={sortedMembers:[],freshMount:!0},Object(la.a)(this,["onViewProfile","onRemoveFromGroup","onAddMembers","onAddChannels","renderMemberItem","renderChannelItem","renderChannelsList","renderMembersList","renderListItemOptionsMenu","renderConfirmationDialog","renderContent","focus","getAriaLabelForChannelRow","getAriaLabelForMemberRow","onItemTabWithin","sortMembers","setSortedMembers","setAndUpdateSortedMembers"]),this.memberList=o.a.createRef(),this.channelsList=o.a.createRef(),this.flexpane=o.a.createRef(),this.channelListKeys=null,this.memberListKeys=null}componentDidMount(){Object($Y.v)(this.props.userGroup)&&this.props.fetchUserGroupMembers("user-group-details/componentDidMount")}componentDidUpdate(e){var t=e.userGroup;t.users;const a=fp()(t,["users"]);var n=this.props.userGroup;n.users;const s=fp()(n,["users"]),r=this.props.userGroupMembers,i=this.state.freshMount;Object(WD.a)(a,s)||this.props.fetchUserGroupMembers("user-group-details/componentDidUpdate"),(i&&!Object(WD.a)(e.userGroupMembers,r)||i&&e.userGroupMembers.length)&&this.setSortedMembers(this.sortMembers(r)),i||Object(WD.a)(e.userGroupMembers,r)||this.setAndUpdateSortedMembers(this.state.sortedMembers,r)}onRemoveMember(e){this.props.featureSonicUserGroups&&this.props.openModal({element:this.renderConfirmationDialog({action:"remove_member",onSubmit:()=>{this.props.removeMember(e).then(()=>{this.props.enqueueToast({element:o.a.createElement(Ba.b,null,QQ.t("Member removed from group."))})}).catch(e=>{JQ.error(`Error removing member from user group: ${e}`),"no_users_provided"===e.data.error&&this.props.enqueueToast({element:o.a.createElement(Ba.b,null,QQ.t("User groups need to have at least one member."))})})},id:e})})}onRemoveChannel(e){this.props.featureSonicUserGroups&&this.props.openModal({element:this.renderConfirmationDialog({action:"remove_channel",onSubmit:()=>{this.props.removeChannel(e).then(()=>{this.props.enqueueToast({element:o.a.createElement(Ba.b,null,QQ.t("Channel removed from group."))})}).catch(e=>{JQ.error(`Error removing default channel from user group: ${e}`)})},id:e})})}onAddMembers(){this.displayMemberManagementDialog()}onAddChannels(){this.displayEditDetailsDialog()}onRemoveFromGroup({type:e,id:t}){e===YQ.members?this.onRemoveMember(t):e===YQ.channels&&this.onRemoveChannel(t)}onViewProfile({type:e,id:t}){return e===YQ.members?this.props.showMemberProfile({memberId:t}):e===YQ.channels?this.props.onChannelSwitch(t):null}onItemTabWithin(){const e=this.flexpane.current;e&&e.setInitialActiveSection()}setSortedMembers(e){this.setState(()=>({sortedMembers:e}))}setAndUpdateSortedMembers(e,t){let a=Object(Kw.a)(e,t);const n=Object(Y.a)(t,e);a=a.concat(n),this.setState(()=>({sortedMembers:a}))}getTabs(){if(!this.props.featureSonicUserGroups)return null;var e=this.props;const t=e.userGroup;var a=e.userGroupDefaultChannels;const n=void 0===a?[]:a,s=Object($Y.l)(t);return[{title:QQ.rt("Members"),titleCount:s,id:"user-groups-members-tab",content:this.renderMembersList()},{title:QQ.rt("Channels"),titleCount:n.length,id:"user-groups-channels-tab",content:this.renderChannelsList()}]}getAriaLabelForChannelRow({index:e}){if(!this.channelListKeys)return;const t=this.props.userGroupDefaultChannels[e];return{"aria-label":Nx({type:Object(q.v)(t),displayName:Object(q.w)(t),isShared:Object(q.bb)(t),isOrgShared:Object(q.wb)(t),isArchived:Object(q.Y)(t)})}}getAriaLabelForMemberRow({index:e}){if(!this.memberListKeys)return;const t=this.props.userGroupMembers[e];return{"aria-label":Object(fM.a)({name:Object(Je.K)(t),isDeleted:Object(Je.mb)(t),isAppOrBot:!1,isGuest:!1})}}sortMembers(e){return this.setState(()=>({freshMount:!1})),Object(Mh.a)(e,e=>this.props.getPrefCompliantMemberNameLowerCase(e))}focus(){const e=this.memberList.current||this.channelsList.current;e&&e.focus()}displayMemberManagementDialog(){this.props.openModal({element:this.renderEditMembersDialog()})}displayEditDetailsDialog(){this.props.openModal({element:this.renderEditDetailsDialog()})}userGroupIsEditable(){const e=this.props.userGroup;return this.props.canEditUserGroups()&&Object($Y.v)(e)}canRemoveItem(e){const t=this.props.userGroup;return e!==YQ.members||!Object($Y.n)(t)}renderHeader(){const e=this.props.userGroup;return o.a.createElement("div",{className:"p-user_group_details__section"},o.a.createElement("div",{className:"p-user_group_details__name"},Object($Y.h)(e)),o.a.createElement("div",{className:"p-user_group_details__description"},Object($Y.e)(e)),o.a.createElement("div",{className:"p-user_group_details__handle"},Object($Y.f)(e,{includeAtSign:!0})))}renderActions(){return this.props.featureSonicUserGroups&&this.userGroupIsEditable()&&this.props.canEditUserGroups()?o.a.createElement("div",{className:"p-user_group_details__section"},o.a.createElement($Q,{groupId:this.props.groupId,onEditMembers:()=>this.displayMemberManagementDialog(),onEditDetails:()=>this.displayEditDetailsDialog()})):null}renderTabs(){const e=this.getTabs();return o.a.createElement(G.a,{tabs:e,defaultTabId:"user-groups-members-tab",fullHeight:!0,fullWidthMenu:!0})}renderListItemOptionsMenu({menuProps:e,id:t,type:a}){if(!this.props.featureSonicUserGroups)return null;const n=a===YQ.channels?QQ.t("Open channel"):QQ.t("View profile"),r=[o.a.createElement(fn.b,{key:t,label:n,onSelected:()=>this.onViewProfile({type:a,id:t})})];return this.canRemoveItem(a)&&r.push(o.a.createElement(fn.b,{key:t,label:QQ.t("Remove from group..."),onSelected:()=>this.onRemoveFromGroup({type:a,id:t}),danger:!0})),o.a.createElement(fn.f,s()({},e,{width:"auto"}),r)}renderMemberItem(e={}){const t=this.userGroupIsEditable(),a=Object(fo.a)(this.props.newMembers,e),n={className:d()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":t,"p-user_group_base_row--active":a}),isContextButtonVisible:t,tooltip:this.renderTooltip(),onClick:()=>this.onViewProfile({type:YQ.members,id:e.id}),renderMenu:t=>this.renderListItemOptionsMenu({menuProps:t,id:e.id,type:YQ.members}),customProps:{key:e.id,"data-qa-user-group-details-members-list-item":!0,"data-qa-user-group-details-members-list-item-id":e.id},id:e.id};return o.a.createElement(oX,n)}renderChannelItem(e={}){const t=this.userGroupIsEditable(),a={className:d()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":t}),isContextButtonVisible:t,tooltip:this.renderTooltip(),onClick:()=>this.onViewProfile({type:YQ.channels,id:e.id}),renderMenu:t=>this.renderListItemOptionsMenu({menuProps:t,id:e.id,type:YQ.channels}),customProps:{key:e.id,"data-qa-user-group-details-channels-list-item":!0,"data-qa-user-group-details-channels-list-item-id":e.id},id:e.id};return o.a.createElement(oX,a)}renderTooltip(){return this.props.featureSonicUserGroups?QQ.t("More actions"):null}renderMembersList(){var e=this.props;const t=e.userGroup,a=e.userGroupMembers,n=this.state.sortedMembers;if(!a||Object(io.a)(a))return this.renderEmptyMemberState();this.memberListKeys=Object(ht.a)(n,"id");const s=Object($Y.h)(t);return o.a.createElement(tb.a,null,({width:e,height:t,measureRef:a})=>o.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-members-list":!0,ref:a},o.a.createElement(Or.a,{ref:this.memberList,width:e,height:t,keys:this.memberListKeys,rowRenderer:e=>this.renderMemberItem(n[e]),"aria-label":QQ.t("{userGroupName} Members",{userGroupName:s}),getPropsForItem:this.getAriaLabelForMemberRow,onItemTabWithin:this.onItemTabWithin})))}renderChannelsList(){var e=this.props;const t=e.userGroupDefaultChannels,a=e.userGroup;if(!t||Object(io.a)(t))return this.renderEmptyChannelState();this.channelListKeys=Object(ht.a)(t,"id");const n=Object($Y.h)(a);return o.a.createElement(tb.a,null,({width:e,height:a,measureRef:s})=>o.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-channels-list":!0,ref:s},o.a.createElement(Or.a,{ref:this.channelsList,width:e,height:a,keys:this.channelListKeys,rowRenderer:e=>this.renderChannelItem(t[e]),"aria-label":QQ.t("{userGroupName} Default Channels",{userGroupName:n}),getPropsForItem:this.getAriaLabelForChannelRow,onItemTabWithin:this.onItemTabWithin})))}renderEmptyMemberState(){if(!this.props.featureSonicUserGroups)return null;const e=QQ.t("Nobody\u2019s in this group"),t=QQ.t("Add Members");return o.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-members-empty-list":!0},o.a.createElement(lC.a,{title:e,description:"You can add a few people with the button below.",primaryActionText:t,onClickPrimaryAction:this.onAddMembers}))}renderEmptyChannelState(){if(!this.props.featureSonicUserGroups)return null;const e=QQ.t("Add Default Channels"),t=QQ.t("No default channels"),a=QQ.t("All members of a user group are automatically added to its default channels.");return o.a.createElement("div",{className:"p-user_group_details__empty_list"},o.a.createElement(lC.a,{title:t,description:a,primaryActionText:e,onClickPrimaryAction:this.onAddChannels}))}renderConfirmationDialog({action:e,onSubmit:t,id:a}){const n=this.props.groupId;return o.a.createElement(tX,{action:e,onSubmit:t,id:a,groupId:n})}renderEditMembersDialog(){const e=this.props.groupId;return o.a.createElement(cX,{groupId:e})}renderEditDetailsDialog(){const e=this.props.groupId;return o.a.createElement(HQ,{userGroupId:e})}renderContent(){if(!this.props.featureSonicUserGroups)return null;const e=this.props.userGroup;return o.a.createElement("div",{className:"p-user_group_details p-user_group__content","data-qa-user-group-details":!0,"data-qa-user-group-details-id":e.id},this.renderHeader(),this.renderActions(),this.renderTabs())}render(){return this.props.featureSonicUserGroups?o.a.createElement(I$.b,{ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container",onOptionsClick:this.onCreateUserGroup,renderBody:this.renderContent,title:QQ.t("User Groups"),viewId:"user-group-details",kbNavOrder:Object(re.a)()?void 0:7}):null}}user_group_details_UserGroupDetails.displayName="UserGroupDetails",user_group_details_UserGroupDetails.defaultProps=XQ;var ZQ=Object(u.b)((e,t)=>{const a=t.groupId,n=Object(VY.e)(e,a),s=Object(m.m)(e,"feature_sonic_user_groups");if(Object($Y.t)(n))return{userGroup:n,featureSonicUserGroups:s};const r=Object($Y.g)(n),i=Object(ht.a)(r,t=>Object(bi.d)(e,t)),o=Object($Y.d)(e,n);return{userGroup:n,featureSonicUserGroups:s,userGroupMembers:i,userGroupDefaultChannels:Object(ht.a)(o,t=>Object(B.e)(e,t)),canEditUserGroups:()=>Object($Y.c)(e),canCreateAndDeleteUserGroups:()=>Object($Y.b)(e),getPrefCompliantMemberNameLowerCase:t=>Object(Je.X)(e,t)}},(e,{groupId:t})=>({openModal:(...t)=>e(Object(ga.e)(...t)),fetchUserGroupMembers:a=>e(Object(eQ.j)({groupId:t,reason:a})),removeMember:a=>e(Object(eQ.n)({groupId:t,memberId:a})),removeChannel:a=>e(Object(eQ.m)({groupId:t,channelId:a})),onChannelSwitch:t=>e(Object(fq.a)({id:t})),openUserGroupList:()=>e(Object(qa.o)()),enqueueToast:(...t)=>e(Object(_a.c)(...t)),showMemberProfile:(...t)=>e(Object(qa.j)(...t))}))(user_group_details_UserGroupDetails);const eX=new x.b("user_groups");l.default.oneOf(Object(Z.a)({disable_group:"disable_group",remove_member:"remove_member",remove_channel:"remove_channel"})).isRequired,l.default.func.isRequired,l.default.string,l.default.string,l.default.bool;class user_group_confirmation_dialog_UserGroupConfirmationDialog extends i.Component{constructor(e){super(e),this.onGo=this.onGo.bind(this)}onGo(){return this.props.onSubmit()}getTitle(){if(!this.props.featureSonicUserGroups)return"";var e=this.props;const t=e.action,a=e.groupName;switch(t){case"disable_group":return eX.t("Deactivate {groupName}?",{groupName:a});case"remove_member":return eX.t("Remove from group?");case"remove_channel":return eX.t("Remove default channel?")}return""}getButtonText(){if(!this.props.featureSonicUserGroups)return"";switch(this.props.action){case"disable_group":return eX.t("Deactivate");case"remove_member":case"remove_channel":return eX.t("Remove")}return""}getDialogBody(){if(!this.props.featureSonicUserGroups)return"";var e=this.props;const t=e.groupName,a=e.label;switch(e.action){case"disable_group":return eX.rt("If you deactivate this user group, you won\u2019t be able to use <strong>{groupName}</strong> or view a list of its members. You can reactivate this group at any time.",{groupName:t});case"remove_member":return eX.rt("Are you sure you want to remove <strong>{label}</strong> from the <strong>{groupName}</strong> user group?",{label:a,groupName:t});case"remove_channel":return eX.rt("Are you sure you want to remove <strong>{label}</strong> as a default channel for the <strong>{groupName}</strong> user group?",{label:a,groupName:t})}return""}render(){return o.a.createElement(ya.a,{showHeader:!0,showGoButton:!0,title:this.getTitle(),goButtonText:this.getButtonText(),goButtonType:"danger",onGo:this.onGo},o.a.createElement("p",null,this.getDialogBody()))}}user_group_confirmation_dialog_UserGroupConfirmationDialog.displayName="UserGroupConfirmationDialog",user_group_confirmation_dialog_UserGroupConfirmationDialog.defaultProps={label:"",groupName:"",featureSonicUserGroups:!1};var tX=Object(u.b)((e,{id:t,groupId:a})=>{let n="";const s=Object(VY.e)(e,a);if(Object(An.a)(t)){const a=Object(B.e)(e,t);n=Object(q.x)(e,a)}else if(Object(Kb.a)(t)){const a=Object(bi.d)(e,t);n=Object(Je.K)(a)}return{groupName:Object($Y.h)(s),label:n,featureSonicUserGroups:Object(m.m)(e,"feature_sonic_user_groups")}})(user_group_confirmation_dialog_UserGroupConfirmationDialog),aX=a("8pCN"),nX=a("6ne/"),sX=a("/foC");a("/VNe");l.default.string,l.default.func.isRequired,l.default.string,l.default.bool,l.default.func,l.default.string;const rX=new x.b("user_groups"),iX={id:null,className:"",isContextButtonVisible:!1,onClick:r.a,tooltip:void 0};class user_group_base_row_UserGroupBaseRow extends i.PureComponent{getTooltipLabel(){return this.props.tooltip||rX.t("Edit user groups")}renderContextButton(){var e=this.props;const t=e.isContextButtonVisible,a=e.renderMenu;if(!t)return null;const n={tooltip:this.getTooltipLabel(),icon:"ellipsis",tooltipPosition:"top-right",onClick:a,menuProps:{renderMenu:a,width:"auto"}};return o.a.createElement(aX.b,{customClasses:"p-user_group_base_row__list_item_option"},o.a.createElement(aX.a,n))}render(){var e=this.props;const t=e.className,a=e.id,n=e.onClick,s=d()("p-user_group_base_row__list_item","p-user_group_base_row__entity",{"p-user_group_base_row__entity_group":a&&Object(Xz.a)(a)},t);return Object(An.a)(a)?o.a.createElement(sX.a,{channelId:a,secondaryContent:this.renderContextButton(),showPurpose:!1,onClick:n,className:s}):Object(Kb.a)(a)?o.a.createElement(bC.a,{className:s,id:a,secondaryContent:this.renderContextButton()}):o.a.createElement(nX.a,{id:a,secondaryContent:this.renderContextButton(),className:s})}}user_group_base_row_UserGroupBaseRow.displayName="UserGroupBaseRow",user_group_base_row_UserGroupBaseRow.defaultProps=iX;var oX=user_group_base_row_UserGroupBaseRow;const lX=new x.b("user_groups");l.default.bool,l.default.string.isRequired,l.default.func.isRequired,l.default.func.isRequired;class user_group_member_management_dialog_UserGroupMemberManagementDialog extends i.PureComponent{constructor(e){super(e),this.state={searchResultMode:!1,disableGoButton:!1},Object(la.a)(this,["onSave","onUpsertSuccess","onToggleSearchResultsMode","setUserGroupMemberManagementRef","onSelectedItemsChange"]),this.userGroupMemberManagementRef=null}onSave(){if(!this.userGroupMemberManagementRef)return!1;if(!this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount())return!1;const e=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.bulkUpsertUserGroupMembers(e).then(this.onUpsertSuccess).catch(this.onUpsertFailure)}onSelectedItemsChange(e){this.setState(()=>({disableGoButton:!e.length}))}onUpsertSuccess(){this.props.featureSonicUserGroups&&this.props.enqueueToast({element:o.a.createElement(Ba.b,null,lX.t("Group has been updated."))})}onUpsertFailure(e){Object(Ot.b)().error(`Error updating user group members: ${JSON.stringify(e)}`)}onToggleSearchResultsMode(){this.setState(e=>({searchResultMode:!e.searchResultMode}))}setUserGroupMemberManagementRef(e){this.userGroupMemberManagementRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}render(){if(!this.props.featureSonicUserGroups)return null;const e=lX.t("Edit members");return o.a.createElement(ya.a,{showHeader:!0,showGoButton:!0,showFooter:!0,bodyClassName:"p-user_group_member_management__dialog_body",title:e,contentLabel:e,goButtonText:lX.t("Save"),onGo:this.onSave,goOnEnterPressed:!1,goButtonIsDisabled:this.state.disableGoButton},o.a.createElement(MQ,{groupId:this.props.groupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange}))}}user_group_member_management_dialog_UserGroupMemberManagementDialog.displayName="UserGroupMemberManagementDialog",user_group_member_management_dialog_UserGroupMemberManagementDialog.defaultProps={featureSonicUserGroups:!1};var cX=Object(u.b)(e=>({featureSonicUserGroups:Object(m.m)(e,"feature_sonic_user_groups")}),(e,{groupId:t})=>({bulkUpsertUserGroupMembers:a=>e(Object(eQ.f)({groupId:t,users:a})),enqueueToast:(...t)=>e(Object(_a.c)(...t))}))(user_group_member_management_dialog_UserGroupMemberManagementDialog),dX=a("F3Uw");a("hZjP");l.default.string,l.default.bool,l.default.array;class user_groups_UserGroupsFlexpane extends i.PureComponent{constructor(e){super(e),this.state={newMembers:[],timeoutId:null,searchTerm:""},Object(la.a)(this,["onSearchInputChange","onClearSearch"])}componentDidUpdate(e){let t=[];if(e.userGroupMembers.length&&!Object(WD.a)(e.userGroupMembers,this.props.userGroupMembers)&&(t=Object(dX.a)(this.props.userGroupMembers,e.userGroupMembers,"id")),t.length){this.setState(()=>({newMembers:t}));const e=this.state.timeoutId;e&&clearTimeout(e);const a=setTimeout(()=>{this.setState(()=>({newMembers:[]}))},1050);this.setState(()=>({timeoutId:a}))}}onSearchInputChange(e){const t=e.target.value;this.setState(()=>({searchTerm:t}))}onClearSearch(){this.setState(()=>({searchTerm:""}))}render(){if(!this.props.featureSonicUserGroups)return null;const e=this.props.groupId;var t=this.state;const a=t.newMembers,n=t.searchTerm;return e?o.a.createElement(ZQ,{groupId:e,newMembers:a}):o.a.createElement(xX,{searchTerm:n,onSearchInputChange:this.onSearchInputChange,onClearSearch:this.onClearSearch})}}user_groups_UserGroupsFlexpane.displayName="UserGroupsFlexpane",user_groups_UserGroupsFlexpane.defaultProps={groupId:null,featureSonicUserGroups:!1,userGroupMembers:[]};Object(u.b)(e=>{const t=Object(v.e)(e)[0],a=Object(VY.e)(e,t),n=Object($Y.g)(a);return{groupId:t,userGroupMembers:Object(ht.a)(n,t=>Object(bi.d)(e,t)),featureSonicUserGroups:Object(m.m)(e,"feature_sonic_user_groups")}})(user_groups_UserGroupsFlexpane),a("Oxmb");l.default.string.isRequired,l.default.string.isRequired,l.default.string,l.default.bool,l.default.string,l.default.number.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.bool,l.default.func,l.default.func.isRequired;const uX={description:null,isActive:!1,handle:void 0,featureSonicUserGroups:!1,onClick:r.a},pX=new x.b("user_groups");class user_group_row_UserGroupRow extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onMenuClick","renderContextMenu"])}onMenuClick(e){const t=this.props.id;this.props.onClick(e,t)}renderName(){var e=this.props;const t=e.name,a=e.isActive;if(!e.featureSonicUserGroups)return null;const n=d()("black",{sk_foreground_max:!a}),s=a?t:pX.t("{name} (Deactivated)",{name:t});return o.a.createElement("div",{className:n},s)}renderDescription(){var e=this.props;const t=e.description,a=e.isActive;if(!t)return null;const n=d()("overflow_ellipsis",{sk_foreground_max:!a});return o.a.createElement("div",{className:n},t)}renderHandle(){const e=this.props.handle;return e?o.a.createElement("span",{className:"p-user_group_row__handle"},e):null}renderContextMenu(e){return o.a.createElement(KQ,{menuProps:e,groupId:this.props.id,onClick:this.onMenuClick})}render(){var e=this.props;const t=e.userCount,a=e.isActive;if(!e.featureSonicUserGroups)return null;const n=d()("p-user_group_row",{"p-user_group_row--inactive":!a}),s={renderMenu:this.renderContextMenu,className:n,isContextButtonVisible:this.props.canEditUserGroups()||this.props.canCreateAndDeleteUserGroups(),id:this.props.id,isActive:a};return o.a.createElement(oX,s,this.renderName(),this.renderDescription(),this.renderHandle(),o.a.createElement("span",{className:"p-user_group_row__count"},pX.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:t})))}}user_group_row_UserGroupRow.displayName="UserGroupRow",user_group_row_UserGroupRow.defaultProps=uX;const hX={showUserGroupDetails:qa.n};var mX=Object(u.b)((e,{id:t})=>{const a=Object(VY.e)(e,t),n={canEditUserGroups:()=>Object($Y.c)(e),canCreateAndDeleteUserGroups:()=>Object($Y.b)(e),featureSonicUserGroups:Object(m.m)(e,"feature_sonic_user_groups")};return a?s()({name:Object($Y.h)(a),description:Object($Y.e)(a),handle:Object($Y.f)(a),userCount:Object($Y.l)(a),isActive:Object($Y.v)(a)},n):n},hX)(user_group_row_UserGroupRow),bX=a("sK36"),fX=a("uqAm");const _X=new x.b("user_groups"),gX=(l.default.object,l.default.arrayOf(l.default.string),l.default.bool,l.default.string,{userGroup:{},defaultChannelNames:void 0,showToggle:!1,creator:void 0});class legacy_user_group_browser_list_item_LegacyUserGroupBrowserListItem extends i.Component{constructor(e){super(e),this.onButtonClick=this.onButtonClick.bind(this)}onButtonClick(e,t){const a=this.props.userGroup;Object(fX.c)({action:t,userGroup:a})}maybeRenderDescription(e){const t=this.props.userGroup,a=Object($Y.e)(t);return a?o.a.createElement("p",{className:e},a):null}maybeRenderHandle(){const e=this.props.userGroup,t=Object($Y.f)(e,{includeAtSign:!0});return t?o.a.createElement("span",{className:"subtle_silver"},t):null}maybeRenderToggle(){return this.props.showToggle?o.a.createElement(o.a.Fragment,null,o.a.createElement(Xr.c,{position:"left",zIndex:"above_fs",tip:_X.t("Enable group")},o.a.createElement(Ua.a,{"data-action":"enable_user_group",className:"user_group_toggle_btn no_bottom_margin subtle_silver small small_right_padding",onClick:e=>this.onButtonClick(e,"enable"),"aria-label":_X.t("Enable group")},o.a.createElement("i",{className:"ts_icon ts_icon_power_off"})))):null}maybeRenderDefaultChannels(){const e=this.props.defaultChannelNames;if(!e||!e.length)return null;const t=Object(x.k)(e,{react:!0,noEscape:!0}).join("");return o.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},o.a.createElement("span",{className:"bold"},_X.t("Default channels: {channels}",{channels:t})))}maybeRenderCreatedBy(){var e=this.props;const t=e.userGroup,a=e.creator;if(!(t||t.created_by&&t.date_create))return null;const n=_X.rt("Created by <strong>{creator}</strong> on {creationDate}",{creator:a,creationDate:Gi()(1e3*t.date_create).format("MMMM Do, YYYY")});return o.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},n)}maybeRenderDisableButton(){return this.props.showToggle?o.a.createElement(Xr.c,{position:"bottom",zIndex:"above_fs",tip:_X.t("Disable group")},o.a.createElement(_e.d,{size:"large",type:"outline",icon:"disable",className:"user_group_toggle_btn",title:`${_X.t("Disable")}`,"data-action":"disable_user_group",onClick:e=>this.onButtonClick(e,"disable")})):null}renderDeactivatedRow(){const e=this.props.userGroup,t=Object($Y.h)(e);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"col span_4_of_6 small_padding no_bottom_margin"},o.a.createElement("p",{className:"no_bottom_margin subtle_silver"},o.a.createElement("span",{className:"bold"},t),_X.t("(Disabled)"))),o.a.createElement("div",{className:"col span_2_of_6 small_padding no_bottom_margin float_right align_right"},this.maybeRenderToggle()))}renderCount(){const e=this.props.userGroup,t=e.isExternal||Object($Y.n)(e)?o.a.createElement("i",{className:"ts_icon ts_icon_sync"}):null;return o.a.createElement("p",{className:"user_group_count no_bottom_margin float_right small subtle_silver"},t,o.a.createElement("i",{className:"ts_icon ts_icon_user"}),Object($Y.l)(e))}renderSettingsButton(){return o.a.createElement(Xr.c,{position:"bottom",tip:_X.t("Edit group info"),zIndex:"above_fs"},o.a.createElement(_e.d,{size:"large",type:"outline",icon:"cog_o",title:`${_X.t("Settings")}`,"data-action":"open_form",onClick:e=>this.onButtonClick(e,"editInfo")}))}renderMemberButton(){const e=this.props.userGroup;let t;return t=Object($Y.n)(e||e.is_external)?_X.t("View group members"):_X.t("Edit group members"),o.a.createElement(Xr.c,{position:"bottom",tip:t,zIndex:"above_fs"},o.a.createElement(_e.d,{size:"large",type:"outline",icon:"user",title:`${_X.t("Members")}`,"data-action":"edit_members",onClick:e=>this.onButtonClick(e,"editMembers")}))}render(){const e=this.props.userGroup;if(!Object($Y.v)(this.props.userGroup))return this.renderDeactivatedRow();const t=Object($Y.h)(e);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"col span_3_of_4 small_padding no_bottom_margin"},o.a.createElement("p",{className:"bold no_bottom_margin"},t," ",this.maybeRenderHandle()),this.maybeRenderDescription("small no_bottom_margin"),this.maybeRenderDefaultChannels(),this.maybeRenderCreatedBy()),o.a.createElement("div",{className:"float_right right_padding"},this.renderCount(),o.a.createElement("p",{className:"user_group_actions user_group_actions--modern small no_bottom_margin"},this.maybeRenderDisableButton(),this.renderSettingsButton(),this.renderMemberButton())))}}legacy_user_group_browser_list_item_LegacyUserGroupBrowserListItem.displayName="LegacyUserGroupBrowserListItem",legacy_user_group_browser_list_item_LegacyUserGroupBrowserListItem.defaultProps=gX;var yX=Object(u.b)((e,{id:t})=>{const a=Object(VY.e)(e,t),n=Object($Y.d)(e,a,{includePrivateChannels:!1});let s=n.map(t=>{if(!t)return null;const a=Object(B.e)(e,t);if(!a)return null;const n=Object(q.N)(a);return n?`#${n}`:null});return{userGroup:a,defaultChannels:n,defaultChannelNames:s=Object(_n.a)(s),creator:Object(Je.W)(e,a.created_by),showDelete:!Object($Y.n)(a)&&!a.is_external,showToggle:Object($Y.b)(e)}},null,null,{areStatePropsEqual:(e,t)=>Object(zf.a)(e,t,2)})(legacy_user_group_browser_list_item_LegacyUserGroupBrowserListItem);const OX=new x.b("user_groups"),CX=(l.default.string.isRequired,l.default.object,l.default.func,l.default.bool,{userGroup:{},onClick:r.a,isUserGroupBrowser:!1});class legacy_user_group_list_item_LegacyUserGroupListItem extends i.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){return this.props.onClick(e,this.props.id),Object(bX.d)(e,this.props.id)}maybeRenderDescription(){const e=this.props.userGroup,t=Object($Y.e)(e);return t?o.a.createElement("p",null,t):null}maybeRenderCountOrHandle(){const e=this.props.userGroup,t=Object($Y.l)(e),a=Object($Y.f)(e,{includeAtSign:!1});if(!t&&!a)return null;let n=OX.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:t});return a&&(n=`${n} - ${Object($Y.f)(e)}`),o.a.createElement("p",{className:"subtle_silver tiny_bottom_margin"},n)}renderRow(){var e=this.props;const t=e.userGroup,a=e.id;return e.isUserGroupBrowser?o.a.createElement(yX,{id:a}):o.a.createElement("div",{className:"col span_5_of_6 small_padding no_bottom_margin"},o.a.createElement(Qh.a,{"data-user-group-id":`${a}`,onClick:this.onClick},o.a.createElement("h4",null,Object($Y.h)(t)),this.maybeRenderDescription(),this.maybeRenderCountOrHandle()))}render(){const e=this.props.id;return o.a.createElement("div",{className:"user_group_item small_padding bottom_border clearfix","data-qa":"user_group_list_item","data-user-group-id":`${e}`},this.renderRow())}}legacy_user_group_list_item_LegacyUserGroupListItem.displayName="LegacyUserGroupListItem",legacy_user_group_list_item_LegacyUserGroupListItem.defaultProps=CX;var vX=Object(u.b)((e,{id:t})=>({userGroup:Object(VY.e)(e,t)}))(legacy_user_group_list_item_LegacyUserGroupListItem),EX=a("ITcr");const kX=new x.b("user_groups");l.default.bool,l.default.bool;class legacy_user_group_empty_state_LegacyUserGroupEmptyState extends i.PureComponent{computeAtLabel(e){let t=e;return"group"===t&&(t="channel"),`@${Object(EX.b)({ms_name:t})}`}renderContent(){const e=this.props.isFlexpane,t=e?null:d()("col","span_3_of_4"),a=d()("normal_padding",{dull_grey:e}),n=kX.rt('While commands like <span className="mention">{atEveryone}</span>, <span className="mention">{atChannel}</span>, and <span className="mention">{atHere}</span> call the attention of all members in a conversation, User Groups let you choose exactly who should get your message.',{atEveryone:this.computeAtLabel("everyone"),atChannel:this.computeAtLabel("channel"),atHere:this.computeAtLabel("here"),fallbackHash:"b74e7333e097c646698fe696052060665b263452"}),s=kX.rt('Choose a group name, like <span className="mention">@design</span> or <span className="mention">@marketing</span>, then select the group members. Now, when someone in your workspace mentions the User Group, only its members will be notified. You can even add those members to channels of your choice automatically!',{fallbackHash:"a7c79b0ec617bd1a98db5c6183b5e1f91d52cb31"});return o.a.createElement("div",{className:t},o.a.createElement("div",{className:a},o.a.createElement("p",{className:"user_groups_tip"},n),o.a.createElement("p",{className:"user_groups_tip"},s)))}render(){var e=this.props;const t=e.isFlexpane;if(e.featureSonicUserGroups)return null;const a=t?o.a.createElement("div",null,o.a.createElement("span",{className:"user_groups_img"})):null,n=t?null:o.a.createElement("div",{className:"col span_1_of_4 no_right_padding"},o.a.createElement("span",{className:"user_groups_img"}));return o.a.createElement(i.Fragment,null,a,this.renderContent(),n)}}legacy_user_group_empty_state_LegacyUserGroupEmptyState.displayName="LegacyUserGroupEmptyState",legacy_user_group_empty_state_LegacyUserGroupEmptyState.defaultProps={isFlexpane:!1,featureSonicUserGroups:!1};var SX=Object(u.b)((e,{id:t})=>({userGroup:Object(VY.e)(e,t),featureSonicUserGroups:Object(m.m)(e,"feature_sonic_user_groups")}))(legacy_user_group_empty_state_LegacyUserGroupEmptyState);a("5g6K");const jX=new x.b("user_groups"),IX=(l.default.arrayOf(l.default.object),l.default.shape({key:l.default.string,offset:l.default.number}),l.default.string,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.func,{userGroups:[],scrollmark:void 0,searchQuery:void 0,setCursorMark:r.a,fetchUserGroupsPost:r.a,fetchDeactivatedUserGroupsPost:r.a,saveScrollmark:r.a,onItemClick:r.a,onCreateUserGroup:r.a,onClearSearch:r.a,isLegacy:!1,includeDeactivated:!1,isUserGroupBrowser:!1,featureSonicUserGroups:!1,onItemTabWithin:r.a});class searchable_user_group_list_SearchableUserGroupsList extends i.PureComponent{constructor(e){super(e),this.onGroupClick=this.onGroupClick.bind(this),this.onScroll=this.onScroll.bind(this),this.setListRef=this.setListRef.bind(this),this.fetchPost=this.fetchPost.bind(this),this.handleFetchDeactivatedGroupsResponse=this.handleFetchDeactivatedGroupsResponse.bind(this),this.handleFetchActiveGroupsResponse=this.handleFetchActiveGroupsResponse.bind(this),this.fetchAround=this.fetchAround.bind(this),this.renderRow=this.renderRow.bind(this),this.maybeRenderList=this.maybeRenderList.bind(this),this.focus=this.focus.bind(this),this.getAriaLabelForRow=this.getAriaLabelForRow.bind(this),this.isFocusableItem=this.isFocusableItem.bind(this),this.requestPost=null,this.keys=null,this.list=null,this.layout=new Cr.a,this.layout.heightCache.DEFAULT_HEIGHT=90,this.totalGroups=0,this.isFirstFetch=!e.userGroups.length&&!e.searchQuery,this.state={reachedEnd:!1,fetchingDeactivatedGroups:!1}}componentDidMount(){if(!this.props.scrollmark)return;var e=this.props.scrollmark;const t=e.key,a=e.offset;this.layout.setAnchor(t,a),this.props.saveScrollmark(null)}componentWillUnmount(){this.requestPost&&(this.requestPost.cancel(),this.requestPost=null)}onGroupClick(e,t){this.list&&t&&this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-this.list.getScrollTop()})}onScroll(){this.layout.anchor&&this.layout.setAnchor(!1)}getAriaLabelForRow({index:e}){if(!this.keys)return;const t=this.props.userGroups[e];return{"aria-label":function({name:e,handle:t,purpose:a,isDeactivated:n,memberCount:s}={}){if(!e)return"";const r=!Object(YY.a)(s);return t&&a&&n&&!r?QY.t("{name}, @{handle}, {purpose} (deactivated)",{name:e,handle:t,purpose:a}):t&&a&&n&&r?QY.t("{name}, @{handle}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:e,handle:t,purpose:a,memberCount:s}):t&&a&&!n&&r?QY.t("{name}, @{handle}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:e,handle:t,purpose:a,memberCount:s}):t&&!a&&!n&&r?QY.t("{name}, @{handle} ({ memberCount, plural, =1 {# member} other {# members}})",{name:e,handle:t,memberCount:s}):!t&&a&&!n&&r?QY.t("{name}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:e,purpose:a,memberCount:s}):!t&&a&&n&&r?QY.t("{name}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:e,purpose:a,memberCount:s}):!t&&a&&n&&!r?QY.t("{name}, {purpose} (deactivated)",{name:e,purpose:a}):t||!a||n||r?!t&&!a&&n&&r?QY.t("{name} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:e,memberCount:s}):t||a||!n||r?t&&!a&&n&&!r?QY.t("{name}, @{handle} (deactivated)",{name:e,handle:t}):t&&!a&&n&&r?QY.t("{name}, @{handle} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:e,handle:t,memberCount:s}):t||a||n||r?!t||a||n||r?t&&a&&!n&&!r?QY.t("{name}, @{handle}, {purpose}",{name:e,handle:t,purpose:a}):t||a||n||!r?e:QY.t("{name} ({ memberCount, plural, =1 {# member} other {# members}})",{name:e,memberCount:s}):QY.t("{name}, @{handle}",{name:e,handle:t}):e:QY.t("{name} (deactivated)",{name:e}):QY.t("{name}, {purpose}",{name:e,purpose:a})}({name:Object($Y.i)(t),handle:Object($Y.f)(t,!1),purpose:Object($Y.e)(t),isDeactivated:!Object($Y.v)(t),memberCount:Object($Y.l)(t)})}}setListRef(e){this.list=e}UNSAFE_componentWillReceiveProps(e){const t=this.props.searchQuery;e.searchQuery!==t&&(this.setState(()=>({reachedEnd:!1,fetchingDeactivatedGroups:!1})),this.requestPost&&this.requestPost.cancel(),this.requestPost=null,this.totalGroups=0,this.layout&&this.layout.setAnchor(!1))}fetchActiveGroups(){return this.props.fetchUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchActiveGroupsResponse)}fetchAround(){return!this.requestPost&&!this.state.reachedEnd&&this.fetchPost()}fetchDeactivatedGroups(){return this.props.fetchDeactivatedUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchDeactivatedGroupsResponse)}fetchPost(){return!this.requestPost&&(!this.state.reachedEnd&&(this.requestPost=this.state.fetchingDeactivatedGroups?this.fetchDeactivatedGroups():this.fetchActiveGroups(),this.isFirstFetch&&this.props.telemeter.mark("start_user_group_list_show"),this.requestPost.bind(this).finally(()=>{this.requestPost=null,this.isFirstFetch&&(this.props.telemeter.measureAndClear("start_user_group_list_show","user_group_list_show_lazy"),this.isFirstFetch=!1)})))}focus(){this.list&&this.list.focus()}handleFetchActiveGroupsResponse({items:e,num_found:t}={}){this.totalGroups=t,(this.props.userGroups.length>=this.totalGroups||!e.length)&&(this.props.includeDeactivated?(this.props.setCursorMark(null),this.setState(()=>({fetchingDeactivatedGroups:!0})),this.requestPost=this.fetchDeactivatedGroups()):this.setState(()=>({reachedEnd:!0})))}handleFetchDeactivatedGroupsResponse({items:e,num_found:t}={}){const a=this.totalGroups+t;(this.props.userGroups.length>=a||!e.length)&&this.setState(()=>({reachedEnd:!0}))}isFocusableItem({key:e}){return e!==this.loadingIndicatorKey}maybeRenderList(e){return!e.length&&this.state.reachedEnd?this.renderEmptyListView():(this.state.reachedEnd||(this.loadingIndicatorKey=`Loading${e.length}`,e.push(this.loadingIndicatorKey)),o.a.createElement(JY,null,({width:t,height:a})=>o.a.createElement(Or.a,{width:t,height:a,keys:e,layout:this.layout,rowRenderer:this.renderRow,onScroll:this.onScroll,onItemClick:this.props.onItemClick,ref:this.setListRef,loadAround:this.fetchAround,loadPost:this.fetchPost,isFocusableItem:this.isFocusableItem,onItemTabWithin:this.props.onItemTabWithin,"aria-label":jX.t("User Groups"),getPropsForItem:this.getAriaLabelForRow})))}renderEmptyListView(){var e=this.props;const t=e.featureSonicUserGroups,a=e.searchQuery,n=e.onClearSearch,s=e.onCreateUserGroup,r=e.isLegacy,i=e.isUserGroupBrowser;let l,c,u,p;const h=!!a.length;if(h)c=jX.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:a}),u=jX.t("Clear Search"),p=n;else{if(r&&!t)return o.a.createElement(SX,{isFlexpane:!i});Object(ZY.a)()?(l=jX.t("Organize your team"),u=jX.t("Create a User Group"),p=s):l=jX.t("No user groups yet"),c=jX.t("User groups make it easy to get the attention of many members at once.")}const m=d()({"p-user_group_list__empty_list":!h,"p-user_group_list__empty_search_results":h});return o.a.createElement("div",{className:m,"data-qa":"searchable_ug_list_empty_state"},o.a.createElement(lC.a,{title:l,description:c,primaryActionText:u,onClickPrimaryAction:p}))}renderRow(e){const t=this.keys[e];return t?t===this.loadingIndicatorKey?o.a.createElement("div",{className:"margin_top_200"},o.a.createElement(Kt.a,{color:"blue"})):this.renderUserGroup(e):null}renderUserGroup(e){var t=this.props;const a=t.userGroups,n=t.isLegacy,s=t.isUserGroupBrowser,r=a[e].id;return r?n?o.a.createElement(vX,{id:r,isUserGroupBrowser:s,onClick:this.onGroupClick}):o.a.createElement(mX,{id:r,onClick:this.onGroupClick}):null}render(){const e=this.props.userGroups;return this.keys=this.props.includeDeactivated?e.map(e=>e.id):e.filter(e=>!e.isDeactivated).map(e=>e.id),o.a.createElement("div",{className:"p-user_group_list","aria-live":"polite"},this.maybeRenderList(this.keys))}}searchable_user_group_list_SearchableUserGroupsList.displayName="SearchableUserGroupsList",searchable_user_group_list_SearchableUserGroupsList.defaultProps=IX;const wX=Object(yy.createSelector)([VY.a,zY.e],(e,t)=>{return t.map(t=>{const a=e[t];return a?{id:a.id,isDeactivated:!!a.date_delete,name:a.name,handle:a.handle,user_count:a.user_count}:null}).filter(e=>e)}),TX={fetchUserGroupsPost:zY.d,saveScrollmark:zY.h,setSearchQuery:zY.j,setCursorMark:zY.i,fetchDeactivatedUserGroupsPost:zY.c},NX=Object(u.b)(e=>({userGroups:wX(e),scrollmark:Object(zY.f)(e),searchQuery:Object(zY.g)(e),featureSonicUserGroups:Object(m.m)(e,"feature_sonic_user_groups"),telemeter:Object(dI.c)({state:e})}),TX)(e=>{let t=e.forwardedRef,a=fp()(e,["forwardedRef"]);return o.a.createElement(searchable_user_group_list_SearchableUserGroupsList,s()({ref:t},a))});var AX=o.a.forwardRef((e,t)=>o.a.createElement(NX,s()({forwardedRef:t},e)));l.default.object,l.default.bool,l.default.func,l.default.string,l.default.string,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.func,l.default.func;const RX={userGroups:{},featureSonicUserGroups:!1,openModal:r.a,searchTerm:"",searchQuery:"",onSearchInputChange:r.a,onClearSearch:r.a,setSearchQuery:r.a,shouldDisplayCreateUserGroupOption:!1,isActive:r.a,showUserGroupDetails:r.a},MX=new x.b("user_groups");class user_group_list_UserGroupList extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onCreateUserGroup","onSearchInputChange","renderRow","renderContent","onClearSearch","focus","onItemClick","onItemTabWithin"]),this.searchableGroupList=o.a.createRef(),this.groupList=o.a.createRef(),this.flexpane=o.a.createRef()}onItemClick(e){const t=e.id;this.props.isActive(t)&&this.props.showUserGroupDetails({groupId:t})}onCreateUserGroup(){this.props.openModal({element:this.renderCreateEditDialog()})}onSearchInputChange(e){return this.props.setSearchQuery(e.target.value)}onClearSearch(){return this.props.setSearchQuery("")}onItemTabWithin(){const e=this.flexpane.current;e&&e.setInitialActiveSection()}getGroupedUserGroups(e){const t=Object(Ph.a)(e,e=>Object($Y.v)(e)?"active":"inactive");return t.active=t.active||[],t.inactive=t.inactive||[],t.active.concat(t.inactive)}getSearchResults(e,t){return t?Object(_n.a)(e,e=>{if(!e)return!1;const a=Object($Y.h)(e),n=Object($Y.f)(e)||"",s=Object($Y.e)(e)||"";return!!this.checkForMatch(a,t)||(!!this.checkForMatch(n,t)||!!this.checkForMatch(s,t,!1))}):Object.values(e)}getSortedResults(e){return Object(Mh.a)(e,e=>{return Object($Y.h)(e).toLocaleLowerCase()})}focus(){const e=this.searchableGroupList.current||this.groupList.current;e&&e.focus()}checkForMatch(e="",t="",a=!0){return this.prepStringForSearch(e,a).includes(this.prepStringForSearch(t,a))}prepStringForSearch(e,t){if(!e)return"";let a=e.toLocaleLowerCase();return t&&(a=a.replace(/[\s-_]/g,"")),Object(x.a)(a)}renderSearch(){const e=this.props.searchQuery;return this.props.featureSonicUserGroups?o.a.createElement("div",{className:"p-user_group_list__search"},o.a.createElement(tC.a,{value:e,onChange:this.onSearchInputChange,placeholder:MX.t("Find by name..."),autoFocus:!0,icon:"search"})):null}renderRow(e){const t=this.keys[e];return o.a.createElement(mX,{id:t})}renderEmptySearchResults(){return this.props.featureSonicUserGroups?o.a.createElement("div",{className:"p-user_group_list__empty_search_results"},o.a.createElement("div",{className:"p-user_group_list__empty_search_results_subtext"},MX.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:this.props.searchTerm})),o.a.createElement(_e.d,{type:"outline",size:"small",onClick:this.props.onClearSearch},MX.t("Clear Search"))):null}renderSearchableList(){return o.a.createElement(AX,{ref:this.searchableGroupList,onCreateUserGroup:this.onCreateUserGroup,includeDeactivated:!0,onClearSearch:this.onClearSearch,onItemClick:this.onItemClick,onItemTabWithin:this.onItemTabWithin})}renderContent(){return o.a.createElement("div",{className:"p-user_group__content"},this.renderSearch(),this.renderSearchableList())}renderCreateEditDialog(){return o.a.createElement(HQ,null)}render(){var e=this.props;const t=e.featureSonicUserGroups,a=e.shouldDisplayCreateUserGroupOption;if(!t)return null;const n={renderBody:this.renderContent,title:MX.t("User Groups"),viewId:"user-group-list"};return a&&(n.onOptionsClick=this.onCreateUserGroup,n.headerProps={optionsIconType:"compose-dm",optionsTooltipText:MX.t("Create a user group")}),o.a.createElement(I$.b,s()({ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container"},n,{kbNavOrder:Object(re.a)()?void 0:7}))}}user_group_list_UserGroupList.displayName="UserGroupList",user_group_list_UserGroupList.defaultProps=RX;const PX={openModal:ga.e,setSearchQuery:zY.j,showUserGroupDetails:qa.n};var xX=Object(u.b)((e,t)=>{const a=Object(VY.a)(e),n=Object(m.m)(e,"feature_sonic_user_groups"),r=Object($Y.b)(e);return s()({userGroups:a,searchQuery:Object(zY.g)(e),featureSonicUserGroups:n,shouldDisplayCreateUserGroupOption:r,isActive:t=>Object($Y.v)(Object(VY.e)(e,t))},t)},PX)(user_group_list_UserGroupList),LX=a("hWiY");const FX=Object(mt.b)("If All Threads is open and the thread is present, request it to be focused via the all-threads-store",(e,t,{channelId:a,threadTs:n}={})=>{const s=Object($a.c)(a,n),r=Object(Ot.a)({getState:t,label:"MAYBE-JUMP-THREAD"}),i=t(),o=Object(_.a)(t()),l=Object(v.k)(t())||!Object(v.g)(t());if(o!==wA.a.allThreads||!l)return r.info("All Threads not open"),!1;const c=Object(OA.f)(i);return c?Object(qu.a)(c,{threadKey:s})?(r.info(`Requesting ${s}`),e(Object(OA.r)(s)),!0):(r.info("Thread not found"),!1):(r.info("No threads"),!1)});FX.meta={name:"maybeFocusThreadInAllThreads",key:"actionsMaybeFocusThreadInAllThreadsMaybeFocusThreadInAllThreads",description:"If All Threads is open and the thread is present, request it to be focused via the all-threads-store"},FX.propTypes={channelId:l.default.string,threadTs:l.default.string};var DX=FX;a("l31K");const BX=new x.b("flexpane");l.default.oneOf(["light","dark"]);function UX({clientTheme:e}){const t="light"===e?cdn_url+"/80588/img/loading_hash_animation_@2x_vogue.gif":cdn_url+"/80588/img/loading_hash_animation_@2x_vogue_dark.gif",a="light"===e?cdn_url+"/80588/img/loading_hash_animation_vogue.gif":cdn_url+"/80588/img/loading_hash_animation_vogue_dark.gif",n=BX.t("loading\u2026"),s=`${a} 1x, ${t} 2x`;return o.a.createElement("div",{className:"p-flexpane_loading","data-qa":"flexpane_loading"},o.a.createElement("img",{className:"p-flexpane_loading__spinner",src:t,alt:n,srcSet:s}),o.a.createElement("br",null),n)}UX.displayName="FlexpaneLoading",UX.defaultProps={clientTheme:"light"};var qX=UX;a("vOUN");const HX=new x.b("threads"),WX=(l.default.string,l.default.string,l.default.bool,l.default.number,l.default.string,{channelId:void 0,threadTs:void 0,isMpim:!1,numMpimMembers:0,mpimName:void 0});function GX({channelId:e,threadTs:t,isMpim:a,numMpimMembers:n,mpimName:s}){let r;return r=a?o.a.createElement("div",{className:"p-threads_flexpane__header_channel_name"},o.a.createElement(Xr.c,{tip:s},o.a.createElement("span",null,HX.t("Direct message with {count} others",{count:n})))):o.a.createElement(Bp.a,{channelId:e,className:"p-threads_flexpane__header_channel_name",inline:!0,iconProps:{inherit:!0}}),o.a.createElement(Ze.a,{className:"p-threads_flexpane__header_permalink",href:Object($e.v)(e,t)},r)}GX.displayName="Header",GX.defaultProps=WX;var KX=Object(u.b)(function(e,{channelId:t}){const a=Object(B.e)(e,t),n={};if(a&&"mpim"===Object(q.v)(a)){n.isMpim=!0;const t=Object(q.I)(a)||[];n.numMpimMembers=t.length-1,n.mpimName=Object(q.x)(e,a)}return n})(GX);a("uS0p");const VX=new x.b("threads");l.default.number;function zX({replyCount:e}){const t=Math.max(1,e),a=VX.t("{count, plural, =1 {# reply} other {# replies}}",{count:t,fallbackHash:"45d5eeb729c4b8d8b91f810f9387e5a97b3e6ce5"});return o.a.createElement("div",{className:"p-threads_flexpane__separator"},o.a.createElement("span",{className:"p-threads_flexpane__separator_count"},a),o.a.createElement("hr",{className:"p-threads_flexpane__separator_line"}))}zX.displayName="Separator",zX.defaultProps={replyCount:0};var $X=Object(u.b)(function(e,{channelId:t,threadTs:a}){const n=Object(ae.a)(e,t,a);return{replyCount:Object($e.S)(n)}})(zX);a("x++y");const YX=new x.b("threads"),QX=(l.default.func,{tryAgain:r.a});function XX({tryAgain:e}){return o.a.createElement("div",{className:"p-threads_flexpane__error","data-qa":"threads_flexpane_error"},o.a.createElement("div",{className:"p-threads_flexpane__error_contents"},o.a.createElement("div",{className:"p-threads_flexpane__error_emoji"},o.a.createElement(Ho.b,{text:":mag:",emojiSize:Ho.a.LARGE})),o.a.createElement("p",{className:"p-threads_flexpane__error_header"},YX.t("Couldn't load thread")),o.a.createElement("p",{className:"p-threads_flexpane__error_body"},YX.rt("If the problem persists, please <a>drop us a line.</a>",null,({text:e,key:t})=>o.a.createElement(Ze.a,{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:t},e))),o.a.createElement(_e.d,{type:"primary",onClick:e,"data-qa":"threads_flexpane_error_try_again"},YX.t("Try Again"))))}XX.displayName="ThreadsError",XX.defaultProps=QX;var JX=XX;a("XThT"),a("07TJ");const ZX=new x.b("message_kit"),eJ=(l.default.object.isRequired,l.default.string,l.default.bool,l.default.func,l.default.bool,l.default.bool,l.default.string,{className:void 0,highlight:void 0,clearHighlight:void 0,focused:!1,renderActionsOffscreen:!1,parentId:void 0});class root_ThreadRootMessage extends i.PureComponent{render(){var e=this.props;const t=e.msg,a=e.highlight,n=e.clearHighlight,s=e.focused,r=e.renderActionsOffscreen,i=e.parentId,l=d()("c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);return o.a.createElement(ah.a,{msg:t},o.a.createElement(nh.a,{msg:t,className:l,highlight:a,clearHighlight:n},o.a.createElement(sh.a,{hovered:s},o.a.createElement(rh.a,{msg:t,showComment:!1,showShare:!1,showJump:!0,messageContainerType:Ln.I.THREADS_FLEXPANE,position:"inside",renderOffscreen:r,parentId:i},o.a.createElement(zt.a,{msg:t},o.a.createElement(dh.a,{msg:t},o.a.createElement($t.a,{light:o.a.createElement(Yt.a,{msg:t})},o.a.createElement(hh,{msg:t},o.a.createElement(Qt.a,{msg:t}),"\xa0",o.a.createElement(ta.a,{msg:t,full:!0,clickable:!0},ZX.t("Open in channel")),o.a.createElement("br",null),o.a.createElement(mh.a,null,o.a.createElement(Xt.a,{msg:t}),o.a.createElement(Jt.a,{msg:t,blocksContainerContext:Vp.a.threads_flexpane}),o.a.createElement(ea.b,{msg:t}),o.a.createElement(zp.a,{msg:t,blocksContainerContext:Vp.a.threads_flexpane}),o.a.createElement(Qp.a,{msg:t}))))))))))}}root_ThreadRootMessage.displayName="ThreadRootMessage",root_ThreadRootMessage.defaultProps=eJ;l.default.object.isRequired,l.default.string,l.default.bool,l.default.func,l.default.bool,l.default.bool,l.default.string;const tJ={className:void 0,highlight:void 0,clearHighlight:void 0,focused:!1,renderActionsOffscreen:!1,parentId:void 0};class reply_ThreadReplyMessage extends i.PureComponent{render(){var e=this.props;const t=e.msg,a=e.highlight,n=e.clearHighlight,s=e.focused,r=e.renderActionsOffscreen,i=e.parentId,l=d()("c-message_kit__message","c-message_kit__thread_message",this.props.className);return o.a.createElement(ah.a,{msg:t},o.a.createElement(nh.a,{msg:t,className:l,highlight:a,clearHighlight:n},o.a.createElement(sh.a,{hovered:s},o.a.createElement(rh.a,{msg:t,showComment:!1,showShare:!1,messageContainerType:Ln.I.THREADS_FLEXPANE,renderOffscreen:r,parentId:i},o.a.createElement(dh.a,{msg:t,showBroadcast:!0},o.a.createElement($t.a,{light:o.a.createElement(Yt.a,{msg:t})},o.a.createElement(hh,{msg:t},o.a.createElement(Qt.a,{msg:t}),"\xa0\xa0",o.a.createElement(ta.a,{msg:t,relative:!0}),o.a.createElement("br",null),o.a.createElement(mh.a,null,o.a.createElement(EU,{msg:t},o.a.createElement(Xt.a,{msg:t}),o.a.createElement(Jt.a,{msg:t,blocksContainerContext:Vp.a.threads_flexpane}),o.a.createElement(ea.b,{msg:t}),o.a.createElement(zp.a,{msg:t,blocksContainerContext:Vp.a.threads_flexpane})),o.a.createElement(Qp.a,{msg:t})))))))))}}reply_ThreadReplyMessage.displayName="ThreadReplyMessage",reply_ThreadReplyMessage.defaultProps=tJ;const aJ=new x.b("threads"),nJ=Object(mp.b)(root_ThreadRootMessage),sJ=Object(mp.b)(reply_ThreadReplyMessage),rJ=(l.default.string,l.default.string,l.default.string,l.default.bool,l.default.string,l.default.string,l.default.string,l.default.string,l.default.arrayOf(l.default.string),l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.string,l.default.array,l.default.object,l.default.string,l.default.string,l.default.string,l.default.bool,l.default.string,l.default.number,l.default.string,l.default.func,l.default.func,l.default.func,l.default.func,l.default.string,l.default.bool,l.default.string,l.default.bool,l.default.string,l.default.func,l.default.func,l.default.func,l.default.object,l.default.func,l.default.func,l.default.string,l.default.func,l.default.func,l.default.func,l.default.string,l.default.func,l.default.func,l.default.object,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.bool,l.default.string,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.string,l.default.bool,l.default.func,l.default.bool,l.default.bool,{threadTs:void 0,channelId:void 0,teamId:void 0,subscribed:void 0,lastRead:void 0,maxMarkableTs:void 0,oldest:void 0,latest:void 0,timestamps:[],reachedStart:!1,reachedEnd:!1,prevReachedEnd:!1,userHasUnreadThreads:!1,fileId:void 0,comments:[],messages:{},startTs:void 0,highlightTs:void 0,highlightKey:void 0,showDragOverlay:!1,scrollMarkTs:void 0,scrollMarkOffset:0,serializationKey:void 0,clearSerializedDataForKey:r.a,requestHistory:r.a,clearHighlight:r.a,markThread:r.a,primaryView:void 0,windowFocused:!1,userAttention:"",featureAriaApplicationMode:!1,clientTheme:"light",logInfo:r.a,logWarn:r.a,logError:r.a,clogger:{track:r.a},jumpToMessage:r.a,setFocusRequestedTs:r.a,focusRequested:void 0,setFocusRequested:r.a,maybeFocusThreadInAllThreads:()=>!1,maybeFocusThreadInAllUnreads:r.a,focusInput:null,setFocusInput:r.a,makeMessageSummary:r.a,channel:void 0,channelIsYou:!1,channelIsMuted:!1,channelHasDraft:!1,channelBadgeCount:0,isChannelUnavailable:!1,unavailableTeamId:"",readOnly:!1,featureAnnounceOnly:!1,isFileExpanding:!1,featureOfflineMode:!1,isOffline:!1,truncateThreadHistory:r.a,impressionLoggingWebGroup:"control",hasReceivedThreadedMessage:!0,setUserPrefByApi:r.a,featureMessageNavigationShortcuts:!1,featureContextualMessageShortcuts:!1}),iJ="THREAD-FLEXPANE";class threads_ThreadsFlexpane extends i.Component{static getRowsAndKeys(e,t){const a=e.threadTs,n=e.reachedStart,s=e.reachedEnd,r=e.prevReachedEnd,i=e.timestamps,o=e.comments,l=e.messages,c=t.commentsExpanded,d=t.degraded,u=[],p=[];if(Object(io.a)(i))return{rows:p,keys:u};const h=Object(db.a)(i)===a,m=Object(ep.a)(i,a);return n||d||(u.push(`loading-start-${Object(db.a)(m)}`),p.push({type:"loading"})),h&&(u.push(a),p.push({type:"root",ts:a}),Object(io.a)(o)||(u.push("comments-toggle"),p.push({type:"comments-toggle"}),c&&o.forEach(e=>{u.push(e.id),p.push({type:"comment",comment:e})})),m.length&&(u.push("separator"),p.push({type:"separator"}))),m.forEach((e,t)=>{const a=l[e];Object($e.gb)(a)||(u.push(e),p.push({type:"reply",ts:e,prevTs:m[t-1]}))}),s||r?(u.push("input"),p.push({type:"input"})):d||(u.push("loading-end"),p.push({type:"loading"})),{rows:p,keys:u}}constructor(e){super(e),this.requestHistory=this.requestHistory.bind(this),this.renderRow=this.renderRow.bind(this),this.renderList=this.renderList.bind(this),this.tryAgain=this.tryAgain.bind(this),this.toggleComments=this.toggleComments.bind(this),this.isFocusableItem=this.isFocusableItem.bind(this),this.onFocusEnter=this.onFocusEnter.bind(this),this.onFocusLeave=this.onFocusLeave.bind(this),this.clogThreadEvent=this.clogThreadEvent.bind(this),this.onArrowKeyLeft=this.onArrowKeyLeft.bind(this),this.shouldIgnoreArrowKeys=this.shouldIgnoreArrowKeys.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.getAriaLabelForRow=this.getAriaLabelForRow.bind(this),this.renderBody=this.renderBody.bind(this),this.renderSubtitle=this.renderSubtitle.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onItemTabWithin=this.onItemTabWithin.bind(this),this.onVisibleRowsChanged=this.onVisibleRowsChanged.bind(this),this.onItemFocusEnter=this.onItemFocusEnter.bind(this),this.onUpArrowInEmptyInput=this.onUpArrowInEmptyInput.bind(this),this.keys=null,this.rows=null,this.historyRateLimiter=new HistoryRateLimiter,this.listRef=o.a.createRef(),this.flexpane=o.a.createRef(),this.state={degraded:Sb(),commentsExpanded:!1,hasKeyboardFocus:!1,errored:!1},e.scrollMarkTs||e.scrollMarkOffset?this.initialScrollMark={mark:e.scrollMarkTs,offset:e.scrollMarkOffset}:this.initialScrollMark={},this.attachMessageImpressionsLogger(e)}componentDidMount(){this.checkUnreads(),Object(re.a)()&&this.maybeFocus();var e=this.props;const t=e.scrollMarkTs,a=e.scrollMarkOffset,n=e.serializationKey;(t||a)&&n&&this.props.clearSerializedDataForKey(n),this.props.hasReceivedThreadedMessage||this.props.setUserPrefByApi({pref:"has_received_threaded_message",value:!0})}shouldComponentUpdate(e,t){if(!Object(zf.a)(this.state,t))return!0;var a=this.props;a.messages;const n=fp()(a,["messages"]),s=(e.messages,fp()(e,["messages"]));return!Object(zf.a)(n,s)}componentDidUpdate(e){this.checkUnreads();var t=this.props;const a=t.threadTs,n=t.channelId,s=Object($a.c)(n,a),r=e.threadTs,i=e.channelId,o=Object($a.c)(i,r);s!==o&&this.historyRateLimiter.reset(),o&&s!==o&&this.props.truncateThreadHistory({threadKey:o}),this.maybeFocus()}componentWillUnmount(){var e=this.props;const t=e.focusInput,a=e.channelId,n=e.threadTs;t===Object($a.c)(a,n)&&this.props.setFocusInput(null),this.props.truncateThreadHistory({threadKey:Object($a.c)(a,n)});try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(s){this.props.logError(iJ,"threads_flexpane_unable_log_message_impressions","ThreadsFlexpane unable to log message impressions",s)}delete this.messageImpressionLogger}onArrowKeyLeft(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.primaryView;if(Object(fo.a)([Mo.a.allUnreads,"Punreads"],n))return this.props.maybeFocusThreadInAllUnreads(Object($a.c)(t,a)),Promise.resolve();if(n===Mo.a.allThreads){if(this.props.maybeFocusThreadInAllThreads({channelId:t,threadTs:a}))return Promise.resolve()}return this.props.jumpToMessage({channelId:this.props.channelId,ts:this.props.threadTs}).then(()=>{this.props.setFocusRequestedTs(this.props.threadTs)})}onFocusEnter(e){this.setState(()=>({hasKeyboardFocus:e.isKeyboardFocus}),()=>{this.props.focusRequested&&this.props.setFocusRequested(null)})}onFocusLeave(){this.setState(()=>({hasKeyboardFocus:!1}))}onItemTabWithin(){const e=this.flexpane.current;e&&e.setInitialActiveSection()}onKeyDown(e){Wq({e:e,isMenuVisible:Object(fn.g)()})&&this.focusInput()}onItemFocusEnter(e={}){const t=e.id,a=e.relatedTarget;this.props.featureMessageNavigationShortcuts&&(this.state.hasKeyboardFocus||this.setState(()=>({hasKeyboardFocus:!0})),"input"===t&&a&&this.focusInput())}onUpArrowInEmptyInput({cmd:e=!1}={}){const t=this.props.featureMessageNavigationShortcuts;!e&&t&&this.focusLastMessage()}onVisibleRowsChanged(e,t){try{this.messageImpressionLogger.setCurrentlyVisibleMessages(t.map(e=>this.props.messages[e]))}catch(a){this.props.logError(iJ,"threads_flexpane_unable_log_message_impressions","ThreadsFlexpane unable to log message impressions",a)}}getAriaLabelForRow({index:e}){if(!this.props.makeMessageSummary)return;const t=this.rows[e];return t&&t.type&&("root"===t.type||"reply"===t.type)?{"aria-label":this.props.makeMessageSummary({channelId:this.props.channelId,ts:t.ts,hasFocus:this.state.hasKeyboardFocus,day:{ts:t.ts,isFirstDay:!1,isLastDay:!1},viewContext:Ln.I.THREADS_FLEXPANE})}:void 0}componentDidCatch(e){this.setState(()=>({errored:!0})),this.props.logError(iJ,"ThreadsFlexpane componentDidCatch","threads_flexpane_did_catch",e)}UNSAFE_componentWillReceiveProps(e){const t=Object($a.c)(this.props.channelId,this.props.threadTs),a=Object($a.c)(e.channelId,e.threadTs);this.state.errored&&t!==a&&this.setState(e=>s()({},e,{errored:!1})),this.props.teamId!==e.teamId&&this.attachMessageImpressionsLogger(e)}attachMessageImpressionsLogger(e){this.messageImpressionLogger=new message_impression_logger_MessageImpressionLogger({teamId:e.teamId,experimentGroup:e.impressionLoggingWebGroup,clogger:e.clogger,messageViewLocation:lp.THREAD})}focusLastMessage(){const e=Object(NP.a)(this.rows,{type:"reply"})||Object(qu.a)(this.rows,{type:"root"});e&&this.listRef.current.list.focusOnKey(e.ts)}focusInput(){const e=Object(Rr.a)({viewContext:Ln.I.THREADS_FLEXPANE,channelId:this.props.channelId,threadTs:this.props.threadTs});if(e){const t=()=>{e.focus()};Object(Fi.c)()?setTimeout(t,0):t()}}blur(){const e=this.listRef.current&&this.listRef.current.list;e&&e.blur()}checkUnreads(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.subscribed,s=e.lastRead,r=e.reachedEnd,i=e.maxMarkableTs,o=e.userAttention,l=e.userHasUnreadThreads,c=e.logInfo;if(!n||!r||!i)return;const d=Object($a.c)(t,a);if(!s||s<i){if(Object(re.a)()){if(o!==wu.a.MESSAGE_PANE)return void c(iJ,`Not marking ${d} to ${i} because ${o}`)}else if(!Object(Tu.f)())return void c(iJ,`Not marking ${d} to ${i} because ${Object(Tu.c)()}`);if(!l)return void c(iJ,`Not marking ${d} to ${i} because no unread threads yet`);c(iJ,`Marking ${Object($a.c)(t,a)}: ${i}`),this.props.markThread({channelId:t,ts:a,lastRead:i,reason:"mark-thread-as-read-from-flexpane"})}}checkUserAttentionIsOnChat(){return Object(re.a)()?this.props.userAttention===wu.a.MESSAGE_PANE:Object(Tu.f)()}clogThreadEvent({event:e,metadata:t}){var a=this.props;const n=a.channelId,r=a.threadTs;a.clogger.track(e,s()({parent_message_id:r,channel_id:n,is_threads_view:0,is_flexpane:1},t))}focus(){const e=this.listRef.current&&this.listRef.current.list;if(!e)return;this.setState(()=>({hasKeyboardFocus:!0}));const t=e.getInitialActiveItem();if(t)return e.scrollToKey(t),void e.setActiveItem(t);e.focus()}isFocusableItem({index:e}){const t=this.rows[e];return!!t&&("loading"!==t.type&&("separator"!==t.type&&!("input"===t.type&&!this.props.featureMessageNavigationShortcuts)))}isListScrollable(){const e=this.listRef.current&&this.listRef.current.list;return!(e&&e.layout.getHeightValidity("input"))||e.getContentHeight()>e.getContainerHeight()}maybeFocus(){var e=this.props;const t=e.focusRequested,a=e.timestamps,n=e.channelId,s=e.threadTs,r=e.featureContextualMessageShortcuts;if(!t||Object(io.a)(a))return;const i=t===Object($a.c)(n,s),o=this.keys&&-1!==this.keys.indexOf(t);(i||r&&o)&&this.focus()}requestHistory({oldest:e,latest:t}){var a=this.props;const n=a.channelId,r=a.threadTs,i=a.requestHistory,o=a.logError,l=a.logWarn;if(this.historyRateLimiter.isRequestPending({oldest:e,latest:t}))return!1;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:e,latest:t}))return this.beaconedRateLimit?l(iJ,`Rate-limited thread: ${Object($a.c)(n,r)}`):(o(iJ,`Rate-limited thread: ${Object($a.c)(n,r)}`),this.beaconedRateLimit=!0),!1;this.beaconedRateLimit=!1;const c=i({oldest:e,latest:t,channelId:n,threadTs:r});return c&&this.historyRateLimiter.logHistoryRequest({oldest:e,latest:t,promise:c}),c.then(e=>(this.setState(e=>s()({},e,{errored:!1})),e)).catch(e=>(this.setState(e=>s()({},e,{errored:!0})),Promise.reject(e)))}shouldIgnoreArrowKeys(e){return!!Object(Nu.a)(e.target)||(!this.checkUserAttentionIsOnChat()||!this.state.hasKeyboardFocus)}toggleComments(){const e=this.state.commentsExpanded;this.setState(()=>({commentsExpanded:!e}))}tryAgain(){this.setState(e=>s()({},e,{errored:!1}))}renderBody(){var e=this.props;const t=e.channelId,a=e.threadTs,n=e.timestamps,s=e.showDragOverlay,r=e.featureOfflineMode,l=e.isOffline,c=e.clientTheme,d=this.state.errored;if(r&&l&&Object(io.a)(n))return o.a.createElement("div",{className:"p-threads_flexpane"},o.a.createElement(ku,null));if(d)return o.a.createElement("div",{className:"p-threads_flexpane"},o.a.createElement(JX,{tryAgain:this.tryAgain}));const u=o.a.createElement(i.Fragment,null,this.renderMessageList(),Object(io.a)(n)&&o.a.createElement(qX,{clientTheme:c}),s&&o.a.createElement(ZW,null));return Object(re.a)()?o.a.createElement(aG,{location:eG.THREAD,channelId:t,threadTs:a,className:"p-threads_flexpane",viewContext:Ln.I.THREADS_FLEXPANE,elementProps:{onKeyDown:this.onKeyDown}},u):o.a.createElement("div",{className:"p-threads_flexpane",onKeyDown:this.onKeyDown},u)}renderList(e){var t=threads_ThreadsFlexpane.getRowsAndKeys(this.props,this.state);const a=t.rows,n=t.keys;this.rows=a,this.keys=n;const r=this.state.degraded?degraded_list_DegradedList:Or.a;var i=this.props;const l=i.reachedEnd,c=i.reachedStart,d=i.featureAriaApplicationMode,u=i.channel,p=i.channelId,h=i.channelIsYou,m=i.channelIsMuted,b=i.channelHasDraft,f=i.channelBadgeCount,_=i.threadTs,g=i.readOnly,y=i.featureAnnounceOnly,O=i.featureOfflineMode,C=i.isOffline,v=[{keys:["left"],handler:this.onArrowKeyLeft,filter:this.shouldIgnoreArrowKeys}],E=Nx({type:Object(q.v)(u),displayName:Object(q.w)(u),isShared:Object(q.bb)(u),isOrgShared:Object(q.wb)(u),hasUnreads:!!Object(q.V)(u),isArchived:Object(q.Y)(u),unreadCount:Object(q.V)(u),isYou:h,isMuted:m,hasDraft:b,badgeCount:f,isSelected:!1,userActive:!1,isTyping:!1,isThread:!0,canPost:!g,featureAnnounceOnly:y}),k=(()=>{if(!this.rows.length)return null;const e=this.rows.filter(e=>"reply"===e.type)[0];return e?e.ts:_})(),S=Object($a.e)(Object($a.c)(p,_));return o.a.createElement(tb.a,null,({measureRef:t,width:a,height:i})=>o.a.createElement("div",{className:"flex_one no_min_height",ref:t},o.a.createElement(r,s()({},e,{id:S,keys:n,width:a,height:i,rowRenderer:this.renderRow,isFocusableItem:this.isFocusableItem,ignoreKeyCommandsOnInputs:!this.props.featureMessageNavigationShortcuts,initialActiveItem:k,onFocusEnter:this.onFocusEnter,onItemTabWithin:this.onItemTabWithin,onItemFocusEnter:this.onItemFocusEnter,onFocusLeave:this.onFocusLeave,reachedEnd:l,reachedStart:c,"aria-label":E,getPropsForItem:this.getAriaLabelForRow,persistentKeys:["input"],keyCommands:v,useAriaApplicationMode:d,featureOfflineMode:O,isOffline:C,shouldIgnoreArrowKeys:this.shouldIgnoreArrowKeys}))))}renderMessageList(){if(this.props.isChannelUnavailable){var e=this.props;const t=e.unavailableTeamId,a=e.channelId;return o.a.createElement(nq,{unavailableTeamId:t,channelId:a,isThread:!0})}var t=this.props;const a=t.channelId,n=t.threadTs,r=t.oldest,i=t.latest,l=t.timestamps,c=t.startTs,d=t.highlightTs,u=t.highlightKey,p=t.reachedStart,h=t.reachedEnd,m=t.comments,b=t.clientTheme;if(!a||!n)return null;const f={comments:m,commentsExpanded:this.state.commentsExpanded,highlightTs:d,highlightKey:u};var _=this.initialScrollMark;const g=_.mark,y=_.offset;return o.a.createElement(generic_message_list_MessageList,s()({oldest:r,latest:i,timestamps:l,listRenderer:this.renderList,startTs:g||c,startTsOffset:y,highlightKey:u,requestHistory:this.requestHistory,reachedStart:p,reachedEnd:h,isFileExpanding:this.props.isFileExpanding,clientTheme:b,ref:this.listRef},f,{key:Object($a.c)(a,n),onVisibleRowsChanged:this.onVisibleRowsChanged}))}renderRow(e,{hasFocus:t,itemId:a}){var n=this.props;const s=n.channelId,r=n.highlightTs,i=n.threadTs,l=n.comments,c=n.fileId,d=n.focusInput,u=n.featureOfflineMode,p=n.isOffline,h=this.state.commentsExpanded,m=this.rows[e];if(!m)return null;const b=this.state.hasKeyboardFocus;switch(m.type){case"separator":return o.a.createElement($X,{channelId:s,threadTs:i});case"root":return o.a.createElement(nJ,{channelId:s,ts:m.ts,highlight:m.ts===r,clearHighlight:this.props.clearHighlight,focused:t,renderActionsOffscreen:b,parentId:a});case"reply":return o.a.createElement(sJ,{channelId:s,ts:m.ts,highlight:m.ts===r,clearHighlight:this.props.clearHighlight,focused:t,renderActionsOffscreen:b,parentId:a});case"input":return o.a.createElement(NW,{channelId:s,threadTs:i,focusInputOnMount:d===Object($a.c)(s,i)&&!this.isListScrollable(),viewContext:Ln.I.THREADS_FLEXPANE,clogThreadEvent:this.clogThreadEvent,onFocus:this.onItemTabWithin,onUpArrow:this.onUpArrowInEmptyInput});case"comments-toggle":return o.a.createElement(m$,{commentCount:l.length,expanded:h,toggleList:this.toggleComments});case"comment":return o.a.createElement(u$,{comment:m.comment,fileId:c});case"loading":return u&&p?o.a.createElement(wp,null):o.a.createElement("div",{className:"p-threads_flexpane__loading"},aJ.t("Loading messages..."));default:return null}}renderSubtitle(){var e=this.props;const t=e.channelId,a=e.threadTs;return o.a.createElement(KX,{channelId:t,threadTs:a})}render(){var e=this.props;const t=e.channelId,a=e.threadTs;if(!t||!a)return null;const n=Object(re.a)()?r.a:this.focus,s=Object(re.a)()?r.a:this.blur;return o.a.createElement(I$.b,{ref:this.flexpane,focus:this.focus,title:aJ.t("Thread"),renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,flexName:"convo",viewId:Ln.I.THREADS_FLEXPANE,kbNavOrder:Object(re.a)()?void 0:4,bodyClassName:"p-threads_flexpane_container",onFocus:n,onBlur:s})}}threads_ThreadsFlexpane.displayName="ThreadsFlexpane",threads_ThreadsFlexpane.defaultProps=rJ;const oJ=Object(VU.a)(threads_ThreadsFlexpane,{getStateToSerialize:r.a,getDerivedProps:({instance:e})=>{if(!e.listRef||!e.listRef.current)return{};var t=e.listRef.current.getScrollmark();const a=t.mark,n=t.offset,s=t.stickToBottom;return{scrollMarkTs:s?"input":a,scrollMarkOffset:s?0:n}}});const lJ=Object(s$.a)(oJ,{alwaysFetchOnMount:!0});var cJ=Object(u.b)((e,t)=>{var a=(Object(v.e)(e)[0]||"").split("-"),n=at()(a,2);const r=n[0],i=n[1],o=t.threadTs||i,l=t.channelId||r,c=Object(B.e)(e,l);if(!o||!l)return{};const d=Object(Gu.h)(e)||o;var u=Object(Gu.f)(e);const p=u.highlightTs,b=u.highlightKey,f=Object($a.c)(l,o);var g=Object(ze.f)(e,f,d);const y=g.start,O=g.end,C=g.timestamps,E=g.reachedStart,k=g.reachedEnd,S=g.prevReachedEnd,j=Object(QH.d)(e,{channelId:l,ts:o});let I,w;const T=Object(ae.a)(e,l,o,!1);if(T&&T.files&&1===T.files.length){w=T.files[0];const t=Object(Yy.c)(e,w);t&&(I=t.comments)}const N={};Object(re.a)()?N.userAttention=Object(wu.c)(e):N.windowFocused=Object(lM.g)(e);const A=Object(Ot.a)({state:e}),R=Object(ie.a)({state:e}),P=Object(HD.e)(e);return s()({isFileExpanding:P,threadTs:o,channelId:l,teamId:Object(h.b)(e),channel:c,subscribed:j&&j.subscribed,lastRead:j&&j.lastRead,maxMarkableTs:JH(e,l,C),oldest:y,latest:O,timestamps:C,reachedStart:E,reachedEnd:k,prevReachedEnd:S,userHasUnreadThreads:Object(m.m)(e,"feature_incremental_unread_counts")?Object(X.j)(e):Object(Q.c)(e),fileId:w,comments:I,messages:Object(ae.b)(e,l)||{},startTs:d,highlightTs:p,highlightKey:b,showDragOverlay:Object(Gu.g)(e),primaryView:Object(_.a)(e)},N,{featureAriaApplicationMode:Object(m.m)(e,"feature_aria_application_mode"),logInfo:A.info,logWarn:A.warn,logError:A.error,clogger:R,channelIsYou:Object(q.Ub)(e,c),channelIsMuted:Object(xu.c)(e,l),channelHasDraft:Object(q.y)(e,l),channelBadgeCount:Object(B.d)(e,c),focusRequested:Object(Gu.e)(e),focusInput:Object(Gu.d)(e),isChannelUnavailable:Object(q.Mb)(e,c),unavailableTeamId:Object(q.U)(e,c),readOnly:Object(q.Fb)(e,c),featureAnnounceOnly:Object(m.m)(e,"feature_announce_only"),featureOfflineMode:Object(m.m)(e,"feature_offline_mode"),isOffline:!Object(pa.c)(e),clientTheme:Object(M.c)(e),impressionLoggingWebGroup:Object(ha.c)(e,"impression_logging_web"),hasReceivedThreadedMessage:Object(ba.k)(e,"has_received_threaded_message"),featureMessageNavigationShortcuts:Object(m.m)(e,"feature_message_navigation_shortcuts"),featureContextualMessageShortcuts:Object(m.m)(e,"feature_contextual_message_shortcuts")})},function(e){return{requestHistory:(...t)=>e(Object(Gu.j)(...t)),clearHighlight:(...t)=>e(Object(Gu.a)(...t)),markThread:(...t)=>e(Object(QH.e)(...t)),jumpToMessage:(...t)=>e(Object(s_.a)(...t)),setFocusRequestedTs:(...t)=>e(Object(Sw.j)(...t)),setFocusRequested:(...t)=>e(Object(Gu.l)(...t)),setFocusInput:(...t)=>e(Object(Gu.k)(...t)),makeMessageSummary:(...t)=>e(Zu(...t)),maybeFocusThreadInAllThreads:(...t)=>e(DX(...t)),maybeFocusThreadInAllUnreads:(...t)=>e(Object(ho.c)(...t)),clearSerializedDataForKey:(...t)=>e(Object(LX.b)(...t)),truncateThreadHistory:(...t)=>e(Object(Gu.o)(...t)),setUserPrefByApi:(...t)=>e(Object(Ka.f)(...t))}})(lJ),dJ=a("Xthn");const uJ=new x.b("mentions"),pJ=Object(mt.b)("build message summary for aria labels",(e,t,{channelId:a,messageTs:n,hasFocus:s,viewContext:r}={})=>{const i=e(Zu({channelId:a,ts:n,hasFocus:s,viewContext:r}));if(!i)return;const o=t(),l=Object(ae.a)(o,a,n),c=Object(Py.b)(l),d=Object(My.e)(o,c),u=Object(m.m)(o,"feature_a11y_message_summary"),p=Object(m.d)(o),h=Object(ep.a)(Object(lt.a)(Object(Pb.a)(d,"users")),p);let b="";if(h.length<=2){const e=h.map(e=>Object(dJ.a)(o,{userId:e}));b=uJ.t("{names} reacted to your message",{names:Object(x.k)(e).join("")})}else b=u?uJ.t("Several people reacted to your message"):"";return`${b} ${i}`});pJ.meta={name:"makeReactionsSummary",key:"actionsMakeReactionsSummaryMakeReactionsSummary",description:"build message summary for aria labels"},pJ.propTypes={channelId:l.default.string.isRequired,messageTs:l.default.string.isRequired,hasFocus:l.default.bool,viewContext:l.default.string};var hJ=pJ;const mJ=new x.b("mentions"),bJ={prefExcludeAtChannel:"mentions_exclude_at_channels",prefExcludeReactions:"mentions_exclude_reactions",prefExcludeUserGroups:"mentions_exclude_at_user_groups"},fJ=(l.default.func,l.default.bool,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.arrayOf(l.default.object),{closeModal:r.a,featureSonicActivity:!1,onGo:r.a,prefExcludeAtChannel:!1,prefExcludeReactions:!1,prefExcludeUserGroups:!1,removeActivityByType:r.a,setUserPrefByApi:r.a,userGroups:void 0});class activity_options_dialog_ActivityOptionsDialog extends o.a.Component{constructor(e){super(e),Object(la.a)(this,["togglePref"]),this.state={initialPrefs:{prefExcludeAtChannel:e.prefExcludeAtChannel,prefExcludeReactions:e.prefExcludeReactions,prefExcludeUserGroups:e.prefExcludeUserGroups}}}onClose(){var e=this.props;const t=e.onGo,a=e.prefExcludeAtChannel,n=e.prefExcludeReactions,s=e.prefExcludeUserGroups,r=this.state.initialPrefs;r.prefExcludeAtChannel===a&&r.prefExcludeReactions===n&&r.prefExcludeUserGroups===s||(a&&!r.prefExcludeAtChannel&&this.props.removeActivityByType("channel"),n&&!r.prefExcludeReactions&&this.props.removeActivityByType("reaction"),s&&!r.prefExcludeUserGroups&&this.props.removeActivityByType("user_group"),t())}togglePref(e){const t=e.target.name,a=bJ[t];this.props.setUserPrefByApi({pref:a,value:!e.target.checked})}renderUserGroupList(){var e=this.props;const t=e.featureSonicActivity,a=e.userGroups;if(!t)return null;const n=a.filter(e=>Object($Y.v)(e)&&Object($Y.m)(e));if(Object(io.a)(n))return mJ.t("User Groups are collections of individual members");const s=n.slice(0,3).map(e=>o.a.createElement("strong",null,Object($Y.f)(e)));return n.length<=3?mJ.rt("You\u2019re a member of {groups}",{groups:Object(x.k)(s,{react:!0})}):mJ.rt("You\u2019re a member of {group1}, {group2}, {group3}, and {numOthers, plural, =1 {# other} other {# others}}",{group1:s[0],group2:s[1],group3:s[2],numOthers:n.length-3})}render(){var e=this.props;const t=e.featureSonicActivity,a=e.prefExcludeAtChannel,n=e.prefExcludeReactions,s=e.prefExcludeUserGroups;return t?o.a.createElement(xN.a,{closeModal:()=>{this.onClose(),this.props.closeModal()}},o.a.createElement(xN.h,null,o.a.createElement(xN.j,{id:"activity_options__title-bar",title:mJ.t("Activity view options")})),o.a.createElement(xN.d,null,o.a.createElement(xN.e,null,o.a.createElement("p",null,mJ.rt("Your activity view will always include <r1>mentions</r1> and <r1>keywords</r1>. You can also choose to show or hide the following:",null,({text:e})=>o.a.createElement("strong",null,e))),o.a.createElement(Dn.a,{type:"inline",cursor:"pointer",text:mJ.t("@channel mentions")},o.a.createElement(Bn.a,{onChange:this.togglePref,checked:!a,name:"prefExcludeAtChannel"})),o.a.createElement(Dn.a,{type:"inline",cursor:"pointer",text:mJ.t("Reactions")},o.a.createElement(Bn.a,{onChange:this.togglePref,checked:!n,name:"prefExcludeReactions"})),o.a.createElement(Dn.a,{type:"inline",cursor:"pointer",text:mJ.t("User Groups"),className:"margin_bottom_175",subtext:this.renderUserGroupList()},o.a.createElement(Bn.a,{onChange:this.togglePref,checked:!s,name:"prefExcludeUserGroups"}))))):null}}activity_options_dialog_ActivityOptionsDialog.displayName="ActivityOptionsDialog",activity_options_dialog_ActivityOptionsDialog.defaultProps=fJ;const _J={closeModal:(...e)=>Object(ga.a)(...e),removeActivityByType:(...e)=>Object(gy.h)(...e),setUserPrefByApi:(...e)=>Object(Ka.f)(...e)};var gJ=Object(u.b)(e=>({prefExcludeAtChannel:Object(ba.k)(e,"mentions_exclude_at_channels"),prefExcludeReactions:Object(ba.k)(e,"mentions_exclude_reactions"),prefExcludeUserGroups:Object(ba.k)(e,"mentions_exclude_at_user_groups"),featureSonicActivity:Object(m.m)(e,"feature_sonic_activity"),userGroups:Object(VY.b)(e)}),_J)(activity_options_dialog_ActivityOptionsDialog);a("YjF7");const yJ=20,OJ=new x.b("mentions"),CJ=(l.default.arrayOf(l.default.shape({channelId:l.default.string.isRequired,messageTs:l.default.string.isRequired,threadTs:l.default.string,ts:l.default.string.isRequired,type:l.default.string.isRequired})),l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,{activityList:[],enqueueToast:r.a,featureSonicActivity:!1,hasMore:!1,isLoading:!1,fetchActivityMentions:r.a,openModal:r.a,makeMessageSummary:r.a,makeReactionsSummary:r.a});class activity_flexpane_ActivityFlexpane extends o.a.Component{constructor(e){super(e),Object(la.a)(this,["fetchMentions","fetchMoreMentions","openOptionsDialog","renderEmpty","focus","onItemTabWithin"]),this.list=o.a.createRef(),this.flexpane=o.a.createRef()}componentDidMount(){this.fetchMentions()}onItemTabWithin(){const e=this.flexpane.current;e&&e.setInitialActiveSection()}fetchMentions({afterTs:e}={}){this.props.fetchActivityMentions({afterTs:e,limit:yJ})}fetchMoreMentions(){var e=this.props;const t=e.activityList,a=e.hasMore;if(e.isLoading||!a)return;const n=t[t.length-1].ts;this.fetchMentions({afterTs:n})}focus(){const e=this.list.current;e&&e.getWrappedInstance().focus()}openOptionsDialog(){this.props.featureSonicActivity&&this.props.openModal({element:o.a.createElement(gJ,{onGo:()=>{this.fetchMentions(),this.props.enqueueToast({element:o.a.createElement(Ba.b,s()({},I$.a,{position:"top-right",invert:!0}),OJ.t("Activity view updated"))})}})})}renderEmpty({isOffline:e}){return this.props.featureSonicActivity?e?o.a.createElement(lC.a,{title:OJ.t("Couldn\u2019t load your recent activity"),description:OJ.t("Try again when you\u2019re online"),primaryActionText:OJ.t("Retry"),onClickPrimaryAction:this.fetchMentions}):o.a.createElement(lC.a,{imageUrl:cdn_url+"/80588/img/accent-bird.png",imageUrl2x:cdn_url+"/80588/img/accent-bird@2x.png",title:OJ.t("Never miss a beat"),description:OJ.t("When a team member mentions you or adds a reaction to your message, that message will appear here."),secondaryActionText:OJ.t("View options"),onClickSecondaryAction:this.openOptionsDialog}):null}render(){var e=this.props;const t=e.activityList,a=e.isLoading;return e.featureSonicActivity?o.a.createElement(I$.b,{ref:this.flexpane,focus:this.focus,className:"p-activity_flexpane",isEmpty:Object(io.a)(t),isLoading:a,onOptionsClick:this.openOptionsDialog,renderBody:()=>o.a.createElement(Ky,{ref:this.list,fetchActivity:this.fetchMoreMentions,isLoading:a,items:t,onItemTabWithin:this.onItemTabWithin,makeMessageSummary:this.props.makeMessageSummary,makeReactionsSummary:this.props.makeReactionsSummary}),renderEmpty:this.renderEmpty,title:OJ.t("Activity"),viewId:Ln.I.ACTIVITY_FLEXPANE,kbNavOrder:Object(re.a)()?void 0:4.1}):null}}activity_flexpane_ActivityFlexpane.displayName="ActivityFlexpane",activity_flexpane_ActivityFlexpane.defaultProps=CJ;const vJ={enqueueToast:(...e)=>Object(_a.c)(...e),fetchActivityMentions:(...e)=>Object(gy.c)(...e),openModal:(...e)=>Object(ga.e)(...e),makeMessageSummary:(...e)=>Zu(...e),makeReactionsSummary:(...e)=>hJ(...e)};var EJ=Object(u.b)(e=>({activityList:Object(gy.d)(e),hasMore:Object(gy.e)(e),isLoading:Object(gy.f)(e),featureSonicActivity:Object(m.m)(e,"feature_sonic_activity")}),vJ)(activity_flexpane_ActivityFlexpane);a("BfV3");const kJ=new x.b("whats_new"),SJ=(l.default.bool,l.default.arrayOf(Ku.a.WhatsNewUpdate.isRequired),l.default.func,l.default.number.isRequired,{isLoading:!1,updates:[],setUserPrefByApi:r.a});class whats_new_WhatsNew extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["renderBody","renderControls","focus","onItemTabWithin"]),this.list=o.a.createRef(),this.flexpane=o.a.createRef(),this.initialWhatsNewRead=e.whatsNewRead}componentDidMount(){this.maybeUpdateWhatsReadPref()}componentDidUpdate(){this.maybeUpdateWhatsReadPref()}componentWillUnmount(){this.timer&&clearTimeout(this.timer),this.timer=null}onItemTabWithin(){const e=this.flexpane.current;e&&e.setInitialActiveSection()}maybeUpdateWhatsReadPref(){const e=this.props.updates;if(-1===this.props.whatsNewRead)return;if(Object(io.a)(e))return;const t=e[0].timestamp;this.props.whatsNewRead>=t||(this.timer&&clearTimeout(this.timer),this.timer=null,this.timer=setTimeout(()=>{this.props.setUserPrefByApi({pref:"whats_new_read",value:t})},1e3))}focus(){const e=this.list.current;e&&e.getWrappedInstance().focus()}renderBody(){const e=this.props.updates;return o.a.createElement(fz,{ref:this.list,items:e,whatsNewRead:this.initialWhatsNewRead,onItemTabWithin:this.onItemTabWithin})}renderControls(){return o.a.createElement(yz,null)}render(){var e=this.props;const t=e.isLoading,a=e.updates,n=kJ.t("What\u2019s New");return o.a.createElement(I$.b,{ref:this.flexpane,focus:this.focus,isEmpty:Object(io.a)(a),isLoading:t,renderBody:this.renderBody,renderControls:this.renderControls,title:n,viewId:Ln.I.WHATS_NEW,kbNavOrder:Object(re.a)()?void 0:4.4})}}whats_new_WhatsNew.displayName="WhatsNew",whats_new_WhatsNew.defaultProps=SJ;const jJ={setUserPrefByApi:(...e)=>Object(Ka.f)(...e)};var IJ=Object(u.b)(e=>({updates:Object(qA.f)(e),isLoading:Object(qA.c)(e),whatsNewRead:Object(ba.k)(e,"whats_new_read")}),jJ)(whats_new_WhatsNew);const wJ=new x.b("starred_items"),TJ=(l.default.func,l.default.bool,l.default.arrayOf(l.default.object.isRequired),l.default.string,{fetchStarsList:r.a,isLoading:!1,starredItems:void 0,cursorMark:void 0});class starred_items_StarredItemsFlexpane extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["fetchMoreStarredItems","renderEmpty","focus","fetchStarredItems","onItemTabWithin"]),this.list=o.a.createRef(),this.flexpane=o.a.createRef(),this.requestStars=null}componentDidUpdate(e){var t=this.props;const a=t.starredItems,n=t.cursorMark;!Object(io.a)(e.starredItems)&&Object(io.a)(a)&&n&&this.fetchStarredItems(n)}onItemTabWithin(){const e=this.flexpane.current;e&&e.setInitialActiveSection()}focus(){const e=this.list.current;e&&e.focus()}fetchStarredItems(e){return!this.requestStars&&(this.requestStars=this.props.fetchStarsList({exclude:"Ch,Gh,Dh",limit:20,cursor:e}),this.requestStars.finally(()=>{this.requestStars=null}))}fetchMoreStarredItems(){var e=this.props;const t=e.isLoading,a=e.cursorMark;t||a&&this.fetchStarredItems(a)}renderEmpty({isOffline:e}){return e?o.a.createElement(lC.a,{title:wJ.t("Couldn\u2019t load your Starred Items"),description:wJ.t("Try again when you\u2019re online"),primaryActionText:wJ.t("Retry"),onClickPrimaryAction:this.fetchStarredItems}):o.a.createElement(lC.a,{imageUrl:cdn_url+"/80588/img/posts.png",imageUrl2x:cdn_url+"/80588/img/posts@2x.png",title:wJ.t("No starred items",{fallbackHash:"d46c3b7fbafdaa0aee845d35ce59b0d5f6de8b70"}),description:wJ.t("Star a message or file to save it here. Mark your to-dos, or save something for later \u2014 only you can see your starred items, so use them however you like!",{fallbackHash:"02f88652fff0da938a523c5543e133eefa38b085"})})}render(){return o.a.createElement(I$.b,{ref:this.flexpane,focus:this.focus,className:"p-starred_items_flexpane",isEmpty:Object(io.a)(this.props.starredItems),isLoading:this.props.isLoading,renderBody:()=>o.a.createElement(EO,{ref:this.list,fetchMoreItems:this.fetchMoreStarredItems,isLoading:this.props.isLoading,items:this.props.starredItems,onItemTabWithin:this.onItemTabWithin}),renderEmpty:this.renderEmpty,title:wJ.t("Starred Items"),viewId:Ln.I.STARS_FLEXPANE,kbNavOrder:Object(re.a)()?void 0:4.3})}}starred_items_StarredItemsFlexpane.displayName="StarredItemsFlexpane",starred_items_StarredItemsFlexpane.defaultProps=TJ;const NJ={fetchStarsList:(...e)=>Object($y.c)(...e)};var AJ=Object(u.b)(e=>({isLoading:Object($y.f)(e),starredItems:Object($y.d)(e),totalPages:Object($y.g)(e),cursorMark:Object($y.e)(e)}),NJ)(starred_items_StarredItemsFlexpane),RJ=a("0agN");a("WJwm");const MJ=160,PJ=60,xJ=(l.default.bool.isRequired,l.default.string,l.default.func,l.default.func,l.default.node,l.default.node,l.default.string,l.default.string,l.default.bool,l.default.string,l.default.func,l.default.object,l.default.bool,{sectionId:"",expand:r.a,collapse:r.a,header:null,children:null,sectionClasses:"",key:null,featureM11nChannelDetails:!1,focusKey:null,setFocusKey:r.a,clogger:{track:r.a},isIAPhase1Enabled:!1});class section_container_SectionContainer extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onClick","focus","onAnimationTick","onAnimationEnd"]),this.headerButtonRef=o.a.createRef(),this.contentRef=o.a.createRef(),this.state={contentHeight:e.isExpanded?"auto":0,isAnimating:!1,isExpanding:!1}}componentDidMount(){this.props.focusKey&&this.props.focusKey===this.props.sectionId&&this.setFocusForKeyboardUsers()}componentDidUpdate({focusKey:e,isExpanded:t}){var a=this.props;const n=a.isExpanded,s=a.focusKey,r=!t&&n;(r||t&&!n)&&this.startAnimation(r),s&&e!==s&&s===this.props.sectionId&&this.setFocusForKeyboardUsers()}componentWillUnmount(){this.animation&&this.animation.cancel()}onClick(){var e=this.props;const t=e.collapse,a=e.clogger,n=e.expand,s=e.isExpanded;return"apps"===e.sectionId&&a.track(de.EventId.APP_CLICK_EXPAND_APP_LIST_IN_CHANNEL_DETAILS,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.CLICK,[de.UiContextKeys.step]:de.UiStep.CHANNEL_DETAILS,[de.UiContextKeys.ui_element]:de.UiElement.EXPAND_APP_LIST}}}),s?t():n()}onAnimationTick({value:e,nextTick:t}){this.contentRef.current&&this.setState(()=>({contentHeight:e}),t)}onAnimationEnd(){this.animation=null,this.setState(e=>({isExpanding:!1,contentHeight:e.isExpanding?"auto":0,isAnimating:!1}))}setFocusForKeyboardUsers(){this.focus(),this.props.focusKey&&this.props.setFocusKey(null)}focus(){const e=this.headerButtonRef.current;e&&(e.focus(),e.scrollIntoView())}startAnimation(e){this.setState(()=>({isExpanding:e,isAnimating:!0}),()=>{if(!this.contentRef.current)return void Object(Ot.b)().warn("The element to animate was not rendered. Ensure that `this.state.isAnimating` is set to true");this.animation&&this.animation.cancel();const t=this.contentRef.current.scrollHeight,a=e?0:t,n=e?t:0;this.animation=Object(ix.a)({fromValue:a,toValue:n,duration:this.props.isIAPhase1Enabled?PJ:MJ,easing:"easeInOutQuad",onTick:this.onAnimationTick,onComplete:this.onAnimationEnd})})}render(){var e=this.props;const t=e.isExpanded,a=e.header,n=e.children,s=e.sectionClasses,r=e.key,i=e.featureM11nChannelDetails,l=e.isIAPhase1Enabled;if(!i)return null;const c=d()("p-channel_details_section",s);var u=this.state;const p=u.contentHeight,h=u.isAnimating,m=0!==p||h,b=d()("p-channel_details_section__content",{"p-channel_details_section__content--active":m&&!h});let f=t?"caret-down":"caret-right";return l&&(f=t?"chevron-medium-down":"chevron-medium-right"),o.a.createElement("div",{className:c,key:r},o.a.createElement(Qh.a,{className:d()("p-channel_details_section__header",{"p-channel_details_section__header--iap1":l}),onClick:this.onClick,"aria-expanded":t,ref:this.headerButtonRef},a,o.a.createElement(bn.b,{type:f,inline:!0,className:"p-channel_details_section__caret_icon"})),m&&o.a.createElement("div",{"data-qa":"section_container_content",className:b,ref:this.contentRef,style:{height:p}},n))}}section_container_SectionContainer.displayName="SectionContainer";section_container_SectionContainer.defaultProps=xJ;var LJ=Object(u.b)((e,t)=>{const a=Object(v.e)(e)[0],n=Object(vy.a)(e);return{featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details"),isExpanded:a===t.sectionId,focusKey:n,isIAPhase1Enabled:Object(bo.c)(e),clogger:Object(ie.a)({state:e})}},e=>({setFocusKey:t=>e(Object(Ey.a)(t))}),null,{withRef:!0})(section_container_SectionContainer);a("N5rH");l.default.string,l.default.node.isRequired,l.default.bool,l.default.bool.isRequired,l.default.number,l.default.bool;class section_header_SectionHeader extends i.PureComponent{maybeRenderIcon(){const e=this.props.iconType;return e?o.a.createElement(bn.b,{type:e,inline:!0,className:"p-channel_details_section__icon"}):null}render(){var e=this.props;const t=e.sectionTitle,a=e.featureM11nChannelDetails,n=e.isIAPhase1Enabled,s=e.count,r=e.hideCount;return a?o.a.createElement("span",{className:"p-channel_details_section__title"},this.maybeRenderIcon(),o.a.createElement("span",{className:"p-channel_details_section__title-content","data-qa":"channel-details-section-title-content"},t),n&&!r&&o.a.createElement("span",{className:"p-channel_details_section__count"},s)):null}}section_header_SectionHeader.displayName="SectionHeader";section_header_SectionHeader.defaultProps={iconType:null,count:0,featureM11nChannelDetails:!1,hideCount:!1};var FJ=Object(u.b)(e=>({featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details"),isIAPhase1Enabled:Object(bo.c)(e)}))(section_header_SectionHeader),DJ=a("MYD1");a("zBLs");const BJ=new x.b("channel_details"),UJ=(l.default.object.isRequired,l.default.string.isRequired,l.default.func.isRequired,({pin:e,channelId:t,openModal:a})=>{const n=Object(i.useCallback)(()=>{a({element:o.a.createElement(DJ.a,{pin:e,channelId:t})})},[e,t,a]);if(!Object(lN.a)().featureM11nChannelDetails)return null;const s=BJ.t("Un-pin this item");return o.a.createElement(tg.c,{tip:s,delay:tg.a,position:"bottom-right"},o.a.createElement(Qh.a,{className:"p-pinned_items__remove_item",onClick:n,"aria-label":s},o.a.createElement(bn.b,{type:"times-small"})))});UJ.displayName="PinnedItemRemove";const qJ={openModal:(...e)=>Object(ga.e)(...e)};var HJ=Object(u.b)(null,qJ)(UJ);a("W3Yc");const WJ=new x.b("channel_details");l.default.string.isRequired,l.default.array.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.func.isRequired,l.default.func.isRequired;class pinned_items_list_PinnedItemsList extends i.Component{componentDidUpdate(e){this.props.channelId!==e.channelId&&this.props.maybeFetchPins(),this.props.isMember&&!e.isMember&&this.props.fetchPins()}render(){const e=this.props.pinnedItemsToRender,t=this.props.channelId;if(!Object(Ds.a)(e)||e.length<1){let e=null;if(this.props.featureM11nChannelDetails)if(this.props.isImOrMpim)e=WJ.rt("No items have been pinned yet! Open the context menu on important messages or files and choose <span>Pin to this conversation</span> to stick them here.",{},({text:e,key:t})=>o.a.createElement("span",{key:t,className:"p-pinned_items__empty_list_action"},e));else{const a=this.props.featureLongerChannelNames?o.a.createElement(Ti.a,{channelId:t}):o.a.createElement(Bp.a,{channelId:t,inline:!0});e=WJ.rt("No items have been pinned yet! Open the context menu on important messages or files and choose <span>Pin to {channelName}</span> to stick them here.",{channelName:a},({text:e,key:t})=>o.a.createElement("span",{key:t,className:"p-pinned_items__empty_list_action"},e))}return o.a.createElement("p",{className:"p-pinned_items__empty_list"},e)}return o.a.createElement("ul",{className:"p-pinned_items no_bullets"},e.map(e=>o.a.createElement("li",{key:e.ts||e.id,className:"p-pinned_items__item"},o.a.createElement($K.a,{pin:e}),o.a.createElement(HJ,{pin:e,channelId:t}))))}}pinned_items_list_PinnedItemsList.displayName="PinnedItemsList";var GJ=Object(u.b)((e,t)=>{const a=t.channelId,n=Object(B.e)(e,a),s=Object(gt.h)(e,a)||[],r=Object(m.m)(e,"feature_m11n_channel_details"),i=Object(m.m)(e,"feature_longer_channel_names");return{pinnedItemsToRender:s,isImOrMpim:Object(q.ib)(n)||Object(q.qb)(n),isMember:Object(q.ob)(n),featureM11nChannelDetails:r,featureLongerChannelNames:i}},(e,t)=>{const a={channelId:t.channelId};return{maybeFetchPins:()=>{e(Object(gt.k)(a))},fetchPins:()=>{e(Object(gt.e)(a))}}})(pinned_items_list_PinnedItemsList);const KJ="pins",VJ=(l.default.string.isRequired,l.default.func.isRequired,l.default.bool.isRequired,l.default.number.isRequired,l.default.func.isRequired,l.default.bool.isRequired,l.default.func.isRequired,l.default.bool.isRequired,new x.b("channel_details"));class pinned_items_section_PinnedItemsSection extends i.Component{componentDidMount(){this.props.fetchPins(),this.focus=this.focus.bind(this),this.sectionContainerRef=o.a.createRef()}componentDidUpdate(e){this.props.channelId!==e.channelId&&this.props.fetchPins()}focus(){const e=this.sectionContainerRef.current;if(!e)return;const t=e.getWrappedInstance();t&&t.focus()}maybeRenderSpinner(){return this.props.isLoading?o.a.createElement(Kt.a,{size:"jumbo"}):null}render(){var e=this.props;const t=e.featureM11nChannelDetails,a=e.count,n=e.channelId,s=e.expandPinsSection,r=e.collapse,i=e.isIAPhase1Enabled;if(!t)return null;let l=0===a?VJ.t("Pinned Items"):VJ.t("{count, plural, =1 {# Pinned Item} other {# Pinned Items}}",{count:a});i&&(l=VJ.t("Pinned Items"));const c=o.a.createElement(FJ,{iconType:"thumb-tack",sectionTitle:l,count:a});return o.a.createElement(LJ,{ref:this.sectionContainerRef,expand:s,collapse:r,sectionId:KJ,header:c,sectionClasses:"p-channel_details__pinned_items_section",key:KJ},o.a.createElement(GJ,{channelId:n}),this.maybeRenderSpinner())}}pinned_items_section_PinnedItemsSection.displayName="PinnedItemsSection";var zJ=Object(u.b)((e,t)=>{const a=t.channelId,n=Object(B.e)(e,a);return{channelId:a,count:Object(q.P)(n)||0,featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details"),isLoading:Object(gt.i)(e,a)===gt.b.LOADING,isIAPhase1Enabled:Object(bo.c)(e)}},(e,t)=>{const a={channelId:t.channelId};return{fetchPins:()=>{e(Object(gt.e)(a))},expandPinsSection:()=>e(Object(qa.e)({sectionId:KJ}))}},null,{withRef:!0})(pinned_items_section_PinnedItemsSection),$J=a("wBxZ"),YJ=a("9soY");a("zJYr");const QJ=new x.b("team");l.default.string.isRequired,l.default.arrayOf(l.default.string).isRequired,l.default.func.isRequired;class enterprise_teams_dialog_EnterpriseTeamsDialog extends i.PureComponent{constructor(e){super(e),this.renderRow=this.renderRow.bind(this),this.fetchPost=this.fetchPost.bind(this),this.onSearchInputChange=this.onSearchInputChange.bind(this),this.state={filteredTeamIds:[],searchQuery:"",marker:void 0,fullyLoaded:!1},this.loading=!1}onSearchInputChange(e){const t=e.target.value;this.setState(()=>({searchQuery:t,filteredTeamIds:[],fullyLoaded:!1,marker:void 0}),()=>{this.fetchTeams()})}fetchPost(){this.fetchTeams()}fetchTeams(){const e=this.props.teamIds;var t=this.state;const a=t.searchQuery,n=t.fullyLoaded,s=t.marker;return this.loading||n?null:(this.loading=!0,this.props.fetchAndUpsertTeamsWithQuery({query:a,ids:e,marker:s,count:50,reason:"enterprise-teams-dialog/fetchPost"}).then(({teams:e,next_cursor_mark:t}={})=>{this.setState(a=>({filteredTeamIds:Object(Vw.a)(a.filteredTeamIds,Object(ht.a)(e,"id")),marker:t,fullyLoaded:!t||Object(io.a)(e)}),()=>{this.loading=!1})}).catch(()=>{this.loading=!1}))}renderSearch(){return this.props.teamIds.length<=10?null:o.a.createElement("div",{className:"p-enterprise_teams_dialog__search"},o.a.createElement(tC.a,{value:this.state.searchQuery,onChange:this.onSearchInputChange,placeholder:QJ.t("Search workspaces"),icon:"search",autoFocus:!0}))}renderTeam(e){return o.a.createElement("div",{className:"p-enterprise_teams_dialog__team"},o.a.createElement(nj.b,{id:e,size:20,className:"p-enterprise_teams_dialog__team_icon"}),o.a.createElement("span",{className:"p-enterprise_teams_dialog__team_name"},o.a.createElement(Mb.a,{id:e})))}renderRow(e){const t=this.state.filteredTeamIds[e];return t?this.renderTeam(t):null}renderList(){const e=this.state.filteredTeamIds;return o.a.createElement("div",{className:"p-enterprise_teams_dialog__list"},o.a.createElement(tb.a,null,({measureRef:t,width:a,height:n})=>o.a.createElement("div",{className:"flex_one no_min_height",ref:t},o.a.createElement(Or.a,{width:a,height:n,keys:e,rowRenderer:this.renderRow,loadAround:this.fetchPost,loadPost:this.fetchPost}))))}render(){const e=this.props.title;return o.a.createElement(ya.a,{title:e,showGoButton:!1,showCancelButton:!1,showFooter:!1},o.a.createElement("div",{className:"p-enterprise_teams_dialog__dialog"},this.renderSearch(),this.renderList()))}}enterprise_teams_dialog_EnterpriseTeamsDialog.displayName="EnterpriseTeamsDialog";var XJ=Object(u.b)(null,function(e){return{fetchAndUpsertTeamsWithQuery:(...t)=>e(Object(YJ.c)(...t))}})(enterprise_teams_dialog_EnterpriseTeamsDialog);const JJ=new x.b("teams"),ZJ=(l.default.string,l.default.arrayOf(l.default.string),l.default.object,{channelDisplayName:"",internalTeamIds:[],currentMember:void 0});class channel_workspaces_dialog_ChannelWorkspacesDialog extends i.PureComponent{render(){var e=this.props;const t=e.channelDisplayName,a=e.internalTeamIds,n=e.currentMember;if(!n)return null;let s=a;Object(Je.Gb)(n)&&(s=Object(Je.o)(n,a));const r=JJ.t("{team_count, number} workspaces in {channel_name}",{team_count:s.length,channel_name:t});return o.a.createElement(XJ,{title:r,teamIds:s})}}channel_workspaces_dialog_ChannelWorkspacesDialog.displayName="ChannelWorkspacesDialog",channel_workspaces_dialog_ChannelWorkspacesDialog.defaultProps=ZJ;var eZ=Object(u.b)(function(e,{channelId:t}){const a=Object(B.e)(e,t);return{channelDisplayName:Object(q.x)(e,a),internalTeamIds:Object(q.B)(e,a),currentMember:Object(bi.b)(e)}})(channel_workspaces_dialog_ChannelWorkspacesDialog);const tZ=new x.b("channel_details"),aZ=10,nZ=(l.default.object.isRequired,l.default.string,l.default.object,l.default.array,l.default.object,l.default.func,{enterpriseName:"",enterpriseTeam:void 0,internalTeamIds:void 0,currentMember:void 0,openModal:r.a});class channel_details_workspaces_ChannelDetailsWorkspaces extends i.PureComponent{constructor(e){super(e),this.seeAllWorkspaces=this.seeAllWorkspaces.bind(this)}seeAllWorkspaces(){const e=this.props.channel;this.props.openModal({element:o.a.createElement(eZ,{channelId:e.id})})}renderHeading(){return o.a.createElement("h4",{className:"p-channel_details__heading p-channel_details__heading--workspaces"},tZ.t("Workspaces",{fallbackHash:"205b4561ed36923d5a51de1b34c70044bf82e111",fallbackHashNs:"channel_pages"}))}renderOrgWide(){var e=this.props;const t=e.enterpriseName,a=e.enterpriseTeam;if(!a||!t)return null;const n=o.a.createElement(nj.b,{id:a.id,size:34,className:"p-channel_details__team_icon"});return o.a.createElement("p",{className:"p-channel_details__workspaces_row"},n,o.a.createElement("span",null,tZ.t("Shared with all workspaces in the {enterprise_org_name} organization",{enterprise_org_name:t,fallbackHash:"e66187091a690d71cfc89449bb9c1436d1f3fe20",fallbackHashNs:"channel_pages"})))}renderOrgShared(){var e=this.props;const t=e.internalTeamIds,a=e.currentMember;if(!t||!a)return null;let n=t;Object(Je.Gb)(a)&&(n=Object(Je.o)(a,t));const s=Object($J.a)(n,aZ).map(e=>{const t=e;return o.a.createElement("div",{className:"p-channel_details__workspaces_row",key:t},o.a.createElement(nj.b,{id:e,size:34,className:"p-channel_details__team_icon"}),o.a.createElement(Mb.a,{id:e}))});let r;return n.length>aZ&&(r=o.a.createElement(_e.d,{onClick:this.seeAllWorkspaces,type:"outline",size:"small"},tZ.t("See all {total_teams_count, number} workspaces",{total_teams_count:n.length,fallbackHash:"e7958956b6e81d7b4d36988146dbe7ff402bbe38",fallbackHashNs:"channel_pages"}))),o.a.createElement("div",{className:"margin_bottom_100"},s,r)}render(){const e=this.props.channel;if(!e||!Object(q.wb)(e))return null;const t=Object(q.yb)(e)?this.renderOrgWide():this.renderOrgShared();return t?o.a.createElement(o.a.Fragment,null,this.renderHeading(),t):null}}channel_details_workspaces_ChannelDetailsWorkspaces.displayName="ChannelDetailsWorkspaces",channel_details_workspaces_ChannelDetailsWorkspaces.defaultProps=nZ;var sZ=Object(u.b)(function(e,{channel:t}){return{enterpriseName:Object(Se.e)(e),enterpriseTeam:Object(Se.g)(e),internalTeamIds:Object(q.B)(e,t),currentMember:Object(bi.b)(e)}},function(e){return{openModal:(...t)=>e(Object(ga.e)(...t))}})(channel_details_workspaces_ChannelDetailsWorkspaces),rZ=a("fgg+");const iZ=new x.b("channel_details"),oZ=(l.default.object.isRequired,l.default.string,l.default.object,l.default.arrayOf(l.default.string),{currentTeamId:void 0,memberCounts:void 0,pendingAndConnectedTeamIds:[]});class channel_details_ext_shared_ChannelDetailsExtShared extends i.PureComponent{renderHeading(){const e=iZ.t("Organizations",{fallbackHash:"07605242f7a070b43bdc103189dccf6a5cc43506",fallbackHashNs:"channel_pages"});return o.a.createElement("h4",{className:"p-channel_details__heading p-channel_details__heading--workspaces"},e)}renderMemberCount(e){var t=this.props;const a=t.memberCounts,n=t.currentTeamId;if(!a||!a.counts)return null;let s=0;if(a.counts.teams_member_count&&!Object(YY.a)(a.counts.teams_member_count[e]))s=a.counts.teams_member_count[e];else if(e===n){const e=Object(oo.a)(Object(Z.a)(a.counts.teams_member_count));s=a.counts.member_count-e}return iZ.t("{count, plural, =1 {# member} other {# members}}",{count:s,fallbackHash:"03cd6f56ce61c03b5e511a02466ea71e50eab325",fallbackHashNs:"channel_pages"})}renderTeams(){var e=this.props;const t=e.pendingAndConnectedTeamIds,a=e.channel,n=t.map(e=>{const t=Object(q.Ab)(a,e);return o.a.createElement("div",{className:"p-channel_details__workspaces_row",key:e},o.a.createElement(nj.b,{id:e,size:34,className:"p-channel_details__team_icon",isPendingShared:t}),o.a.createElement("div",null,o.a.createElement(Mb.a,{id:e}),o.a.createElement("div",{className:"p-channel_details__workspaces_row_member_count"},t?iZ.t("Waiting for them to join\u2026",{fallbackHash:"d180f395db2335524b00cd84b96a7e075edf1694",fallbackHashNs:"channel_pages"}):this.renderMemberCount(e))))});return o.a.createElement("div",{className:"margin_bottom_100"},n)}render(){var e=this.props;const t=e.channel,a=e.pendingAndConnectedTeamIds;return!Object(q.bb)(t)||Object(io.a)(a)?null:o.a.createElement(o.a.Fragment,null,this.renderHeading(),this.renderTeams(),!Object(q.wb)(t)&&o.a.createElement(rZ.a,{channel:t}))}}channel_details_ext_shared_ChannelDetailsExtShared.displayName="ChannelDetailsExtShared",channel_details_ext_shared_ChannelDetailsExtShared.defaultProps=oZ;var lZ=Object(u.b)(function(e,{channel:t}){return{currentTeamId:Object(h.c)(e),memberCounts:Object(vf.f)(e,t.id),pendingAndConnectedTeamIds:Object(q.O)(e,t,{includeSelfTeamId:!0})}})(channel_details_ext_shared_ChannelDetailsExtShared),cZ=a("DO5Y"),dZ=a("ejSh"),uZ=a("IRiz");const pZ=Object(mt.b)("Fetch highlights items list for channel",(e,t,a)=>e(Object(uZ.c)(a)).then(t=>{const n=Object(se.a)(t,"highlightMsgs.messages",[]);if(Object(io.a)(n))return[];const s=e(Object(cZ.a)({imsgs:n,channelId:a}));return e(Object(dZ.a)(s)),s}).catch(e=>{throw Object(Ot.a)({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_channel_highlights"}),e}));pZ.meta={name:"fetchHighlightsListForChannel",key:"highlightsStoreFetchHighlightsListForChannel",description:"Fetch highlights items list for channel"},pZ.propTypes={channelId:l.default.string};const hZ=Object(mt.b)("Fetch highlights items list for channel",(e,t,a)=>e(Object(uZ.d)(a)).then(e=>{return{topContributors:Object(se.a)(e,"resp.top_contributors.users",[]),similarChannels:Object(se.a)(e,"resp.similar_channels.channels",[])}}).catch(e=>{throw Object(Ot.a)({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_top_contributors"}),e}));hZ.meta={name:"fetchTopContributorsAndRelatedChannels",key:"highlightsStoreFetchTopContributorsAndRelatedChannels",description:"Fetch highlights items list for channel"},hZ.propTypes={channelId:l.default.string};var mZ=a("71a+"),bZ=a("lkgS"),fZ=a("B/i4");l.default.string,l.default.number;class channel_details_similar_channel_ChannelDetailsSimilarChannel extends i.Component{render(){var e=this.props;const t=e.channelId,a=e.memberCount,n=Object(fZ.a)({channelId:t}),s=0===a?"\u2013":a;return o.a.createElement("div",{key:t,className:"p-channel_details__similar_channels_item"},o.a.createElement("div",{className:"p-channel_details__similar_channels_channel"},o.a.createElement(Ze.a,{className:"p-channel_details__similar_channels_channel_link",href:n,target:Object(bZ.a)(n)},o.a.createElement(Ti.a,{channelId:t,truncate:!0}))),o.a.createElement("div",{className:"p-channel_details__member_count"},o.a.createElement(bn.b,{type:"user",inline:!0,size:"inherit",className:"p-channel_details__member_count__icon"}),o.a.createElement("span",null,s)))}}channel_details_similar_channel_ChannelDetailsSimilarChannel.displayName="ChannelDetailsSimilarChannel";channel_details_similar_channel_ChannelDetailsSimilarChannel.defaultProps={channelId:"",memberCount:0};var _Z=Object(u.b)((e,t)=>{const a=Object(vf.f)(e,t.channelId);return a.counts&&a.counts.member_count?{memberCount:a.counts.member_count}:{memberCount:0}},null)(channel_details_similar_channel_ChannelDetailsSimilarChannel);const gZ=new x.b("channel_details"),yZ=(l.default.object.isRequired,l.default.bool,l.default.func,{featureM11nChannelDetails:!1,fetchTopContributorsAndRelatedChannels:r.a});class channel_details_insights_ChannelDetailsInsights extends i.Component{constructor(e){super(e),this.state={isLoading:!1,topContributors:[],similarChannels:[]}}componentDidMount(){this.fetchTopContributorsAndRelatedChannels()}componentDidUpdate(e){this.props.channel.id!==e.channel.id&&(this.resetState(),this.fetchTopContributorsAndRelatedChannels())}componentWillUnmount(){this.pendingContributorsAndChannelsFetch&&this.pendingContributorsAndChannelsFetch.cancel()}resetState(){this.setState(()=>({topContributors:[],similarChannels:[]}))}fetchTopContributorsAndRelatedChannels(){const e=this.props.channel;this.setState(()=>({isLoading:!0})),this.pendingContributorsAndChannelsFetch=this.props.fetchTopContributorsAndRelatedChannels(e.id).then(e=>{this.setState(()=>({topContributors:e.topContributors,similarChannels:e.similarChannels,isLoading:!1}))}).catch(()=>{this.setState(()=>({topContributors:[],similarChannels:[],isLoading:!1}))}).finally(()=>{this.pendingContributorsAndChannelsFetch=null})}renderTopContributors(){const e=this.props.featureM11nChannelDetails,t=this.state.topContributors;if(t.length<1||!e)return null;const a=t.map(e=>o.a.createElement(mZ.a,{key:e,userId:e},o.a.createElement("div",{className:"p-channel_detais__top_contributor_item"},o.a.createElement(KB.a,{id:e,size:"medium",showPresence:!0,showStatus:!0})," ")));return o.a.createElement("div",{className:"p-channel_details__subsection"},o.a.createElement("h4",{className:"p-channel_details__heading"},gZ.rt("Questions? Try asking...",{fallbackHash:"0f6ef28a0f900aa53c3851aa2411634470e68586",fallbackHashNs:"highlights"})),a)}renderSimilarChannels(){const e=this.state.similarChannels;if(e.length<1)return null;const t=e.map(e=>o.a.createElement(_Z,{key:e,channelId:e}));return o.a.createElement("div",{className:"p-channel_details__subsection"},o.a.createElement("h4",{className:"p-channel_details__heading"},gZ.rt("Related channels",{fallbackHash:"d8396f482fcfaa760ddc8eb1b3b36c193d53b70c",fallbackHashNs:"highlights"})),t)}render(){return this.state.isLoading?o.a.createElement(Kt.a,{size:"jumbo"}):o.a.createElement("div",null,this.renderTopContributors(),this.renderSimilarChannels())}}channel_details_insights_ChannelDetailsInsights.displayName="ChannelDetailsInsights";channel_details_insights_ChannelDetailsInsights.defaultProps=yZ;var OZ=Object(u.b)(e=>{return{featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details")}},e=>({fetchTopContributorsAndRelatedChannels:(...t)=>e(hZ(...t))}))(channel_details_insights_ChannelDetailsInsights);const CZ="info",vZ=new x.b("channel_details"),EZ=(l.default.object.isRequired,l.default.bool,l.default.func,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.object,l.default.func,l.default.func,l.default.func.isRequired,l.default.func,l.default.bool,l.default.bool,{collapse:r.a,featureM11nChannelDetails:!1,userIsChannelMember:!0,userCanPost:!0,userCanRenameChannel:!0,userCanSetPurpose:!1,currentMember:null,openModal:r.a,openChannelOptions:r.a,jumpToMessage:r.a,featureChangePurposeToDescription:!1,featureLongerChannelNames:!1});class channel_details_section_ChannelDetailsSection extends i.Component{constructor(e){super(e),Object(la.a)(this,["focus","onChannelNameClick","onPurposeLinkClick","onCreatedLinkClick"]),this.sectionContainerRef=o.a.createRef(),this.createdTime=null}onChannelNameClick(){const e=this.props.channel;this.props.openChannelOptions({channelId:e.id,section:"rename"})}onPurposeLinkClick(){this.props.userCanSetPurpose&&this.props.openModal({element:o.a.createElement(gB,{channelId:this.props.channel.id})})}onCreatedLinkClick(){return this.props.jumpToMessage({channelId:this.props.channel.id,ts:this.createdTime})}focus(){const e=this.sectionContainerRef.current;if(!e)return;const t=e.getWrappedInstance();t&&t.focus()}renderName(){var e=this.props;const t=e.channel,a=e.userCanRenameChannel;return e.featureLongerChannelNames?o.a.createElement(i.Fragment,null,o.a.createElement("h4",{className:"p-channel_details__heading"},vZ.t("Name"),a&&o.a.createElement(Ua.a,{"aria-label":vZ.t("Edit channel name"),className:"p-channel_details__edit_link",onClick:this.onChannelNameClick},vZ.t("edit"))),o.a.createElement("div",{className:"p-channel_details__section"},o.a.createElement(Ti.a,{channelId:t.id}))):null}renderWorkspaces(){const e=this.props.channel;return Object(q.wb)(e)?o.a.createElement(sZ,{channel:e}):Object(q.bb)(e)?o.a.createElement(lZ,{channel:e}):null}renderNonEditablePurpose(e){var t=this.props;const a=t.featureChangePurposeToDescription,n=t.channel,s=""===e,r=o.a.createElement(Ti.a,{channelId:n.id}),l=a?vZ.rt("A description has not been set for {channel_name}.",{channel_name:r,fallbackHash:"b82c50c4275d22bf40adba6201f394c53a0e9d94",fallbackHashNs:"channel_pages"}):vZ.rt("A purpose has not been set for {channel_name}.",{channel_name:r,fallbackHash:"a40d5e0c32239cb9c70163694d4dfeebda2e2491",fallbackHashNs:"channel_pages"});return o.a.createElement(i.Fragment,null,o.a.createElement("h4",{className:"p-channel_details__heading"},a?vZ.t("Description"):vZ.t("Purpose")),o.a.createElement("div",{className:"p-channel_details__detail_purpose"},o.a.createElement("div",null,s&&l),o.a.createElement(eg.a,{text:e})))}renderPurpose(){const e=Object(q.R)(this.props.channel);var t=this.props;const a=t.featureChangePurposeToDescription,n=t.userCanPost,s=t.userCanSetPurpose,r=""===e;if(!t.userIsChannelMember||!n||!s)return this.renderNonEditablePurpose(e);const l=o.a.createElement(Ua.a,{"aria-label":a?vZ.t("Edit channel description"):vZ.t("Edit channel purpose",{fallbackHash:"7ff753625338e5788341fc682acb970c97b1d8e2",fallbackHashNs:"dialogs_purpose"}),className:"p-channel_details__edit_link",onClick:this.onPurposeLinkClick,"data-qa":"channel-details-edit-purpose"},vZ.t("edit",{fallbackHash:"9ead47a82a0d25985f22f10651d1f93b3abba317",fallbackHashNs:"channel_pages"})),c=o.a.createElement(Ua.a,{className:"p-channel_details__set_purpose",onClick:this.onPurposeLinkClick,"data-qa":"channel-details-set-purpose"},a?vZ.t("Set a channel description"):vZ.t("Set a channel purpose",{fallbackHash:"947ff23f775a3d91b205763ca7b53a2da4279733",fallbackHashNs:"channel_pages"}));return o.a.createElement(i.Fragment,null,o.a.createElement("h4",{className:"p-channel_details__heading"},a?vZ.t("Description"):vZ.t("Purpose"),!r&&l),o.a.createElement("p",{className:"p-channel_details__detail_purpose"},r&&c,o.a.createElement(eg.a,{text:e})))}renderCreated(){var e=this.props;const t=e.channel,a=e.currentMember,n=Object(q.r)(t),s=Object(q.q)(t),r=s&&Object(Ro.n)(s);let i;this.createdTime=s;try{i=vZ.rt("Created by {creator_name} {days_since_creation, select, 0 {today} 1 {yesterday} other {on {creation_date, date, long}}}",{creator_name:n?o.a.createElement(LO.a,{id:n}):o.a.createElement(hB.a,null),days_since_creation:r&&Object(Ro.b)(new Date,r),creation_date:r&&r.getTime()}),a&&a.id===n&&(i=vZ.rt("Created by you {days_since_creation, select, 0 {today} 1 {yesterday} other {on {creation_date, date, long}}}",{days_since_creation:r&&Object(Ro.b)(new Date,r),creation_date:r&&r.getTime(),fallbackHash:"20d8301c36c420754114799216822e21d87573a3",fallbackHashNs:"channel_pages"}))}catch(l){return null}return o.a.createElement("div",{className:"p-channel_details__subsection"},o.a.createElement("h4",{className:"p-channel_details__heading"},vZ.t("Created")),o.a.createElement(Ua.a,{className:"p-channel_details__created_link",onClick:this.onCreatedLinkClick},i))}render(){var e=this.props;const t=e.featureM11nChannelDetails,a=e.channel,n=e.collapse,s=e.expandInfoSection;if(!t)return null;if(Object(q.ib)(a)||Object(q.qb)(a))return null;const r=o.a.createElement(FJ,{iconType:"channel-info",sectionTitle:vZ.t("Channel Details")});return o.a.createElement(LJ,{ref:this.sectionContainerRef,sectionId:CZ,expand:s,collapse:n,header:r,sectionClasses:"p-channel_details__channel_details_section",key:`${dm.d}_DETAILS_SECTION`},this.renderName(),this.renderWorkspaces(),this.renderPurpose(),this.renderCreated(),o.a.createElement(OZ,{channel:a}))}}channel_details_section_ChannelDetailsSection.displayName="ChannelDetailsSection";channel_details_section_ChannelDetailsSection.defaultProps=EZ;var kZ=Object(u.b)((e,t)=>{const a=Object(m.m)(e,"feature_m11n_channel_details"),n=Object(m.m)(e,"feature_change_purpose_to_description"),s=Object(m.m)(e,"feature_longer_channel_names"),r=t.channel,i=r.id;return{userIsChannelMember:Object(q.Sb)(r),userCanPost:Object(te.p)(e,i),userCanRenameChannel:Object(te.O)(e,i).ok,userCanSetPurpose:Object(te.v)(e,i).ok,currentMember:Object(bi.b)(e),featureM11nChannelDetails:a,featureChangePurposeToDescription:n,featureLongerChannelNames:s}},e=>({openModal:(...t)=>e(Object(ga.e)(...t)),expandInfoSection:()=>e(Object(qa.e)({sectionId:CZ})),jumpToMessage:(...t)=>e(Object(s_.a)(...t)),openChannelOptions:(...t)=>e(Object(tw.a)(...t))}),null,{withRef:!0})(channel_details_section_ChannelDetailsSection),SZ=a("hXpn");a("p6gI");const jZ=({action:e,app:t,channelId:a,clogger:n,disabled:s,index:r,runChannelAction:l,isOffline:c})=>{const u=Object(se.a)(e,"app.icons.image_64",Object(xg.b)(t,64)),p=Object(i.useCallback)(({className:e})=>o.a.createElement(mA.a,{ariaHidden:!0,classes:e,image:u}),[u]),h=Object(i.useCallback)(()=>{l({actionId:e.id,channelId:a}),((e,{index:t,appId:a,actionId:n})=>e.track(de.EventId.CHANNEL_ACTIONS_SECTION,{app_id:a,action_id:n,contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.CLICK,[de.UiContextKeys.ui_component]:de.UiComponent.CHANNEL_ACTION,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.element_type]:de.ElementType.BUTTON,[de.UiPropertiesKeys.element_name]:"action_item",[de.UiPropertiesKeys.element_index]:t}}}}))(n,{index:r,actionId:e.id,appId:e.appId})},[e,a,n,r,l]);return Object(i.useEffect)(()=>{((e,{index:t,appId:a,actionId:n})=>e.track(de.EventId.CHANNEL_ACTIONS_SECTION,{app_id:a,action_id:n,contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.IMPRESSION,[de.UiContextKeys.ui_component]:de.UiComponent.CHANNEL_ACTION,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.element_type]:de.ElementType.BUTTON,[de.UiPropertiesKeys.element_name]:"action_item",[de.UiPropertiesKeys.element_index]:t}}}}))(n,{index:r,actionId:e.id,appId:e.appId})},[e.appId,e.id,n,r]),o.a.createElement(_e.c,{onClick:h,className:d()("p-channel_actions_section_item",{"p-channel_actions_section_item--disabled":s||c}),disabled:s||c},o.a.createElement(SZ.a,{className:"p-channel_actions_section_item__list_entity",size:"small",primaryContent:o.a.createElement(f_.d,{avatar:p,text:o.a.createElement(f_.c,null,o.a.createElement("strong",null,e.name)),size:"small"}),secondaryContent:c?o.a.createElement(bn.b,{className:"block",type:"cloud-offline-small"}):null}))};jZ.displayName="ChannelActionsSectionItem",jZ.defaultProps={app:null,index:0};var IZ=Object(u.b)((e,{action:{appId:t},channelId:a})=>({app:Object(yn.e)(e,t)||null,clogger:Object(ie.a)({state:e}),isOffline:!Object(pa.c)(e),disabled:!AT(e,a)}),e=>({runChannelAction:t=>e(CN(t))}))(jZ);a("T4si");const wZ=new x.b("channel_actions_section"),TZ={small:160,medium:200,large:240},NZ=Object(i.forwardRef)(({addChannelActionWithWorkflowBuilder:e,channelActionCount:t,channelActions:a,channelId:n,clogger:s,collapse:r,expandChannelActionsSection:l,omitCountFromTitle:c,shouldShowCreateButton:d,userIsInChannel:u,isIAPhase1Enabled:p},h)=>{const m=Object(a_.a)(()=>new Array(t).fill(null).map((e,t)=>o.a.createElement("li",{key:t,"data-qa":"channel_action_placeholder_item",className:"p-channel_actions_section__list_item p-channel_actions_section__list_item--placeholder"},o.a.createElement(lf.b,{size:"random",sizes:TZ}))),[t]),b=Object(i.useMemo)(()=>a&&0!==a.length?a.map((e,t)=>o.a.createElement("li",{key:e.id,className:"p-channel_actions_section__list_item"},o.a.createElement(IZ,{action:e,channelId:n,index:t}))):m,[m,a,n]),f=Object(i.useCallback)(()=>{((e,t)=>e.track(de.EventId.CHANNEL_ACTIONS_SECTION,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.CLICK,[de.UiContextKeys.ui_component]:de.UiComponent.CHANNEL_ACTION,[de.UiContextKeys.ui_properties]:{[de.UiPropertiesKeys.element_type]:de.ElementType.LINK,[de.UiPropertiesKeys.element_name]:"create_action"}}},is_iap1:t}))(s,p),e(n)},[e,n,s,p]);let _=wZ.t("Channel Actions",{fallbackHash:"b225cbd5ab14bf4bbd8e4b05e1beb652d1f7c33b",fallbackHashNs:"classic_nav"});return t>0&&!c&&(_=wZ.rt("{channelActionCount, plural, =1 {# Channel Action} other {# Channel Actions}}",{channelActionCount:t,fallbackHash:"b225cbd5ab14bf4bbd8e4b05e1beb652d1f7c33b",fallbackHashNs:"classic_nav"})),o.a.createElement(LJ,{ref:h,sectionId:"actions",expand:l,collapse:r,header:o.a.createElement(FJ,{iconType:"bolt",sectionTitle:_,count:t}),sectionClasses:"p-channel_actions_section",key:"actions"},b.length>0&&o.a.createElement("ul",{className:"p-channel_actions_section__list"},b),u&&d&&o.a.createElement(_e.d,{className:"p-channel_actions_section__add_action",type:"outline",onClick:f,"data-qa":"channel_action_section__create_action_cta"},wZ.t("Add Channel Action",{fallbackHash:"8e8e6c20342428a0e94984f56ca352e01d632ff4",fallbackHashNs:"channel_action_menu"})),!u&&o.a.createElement("p",{className:"p-channel_actions_section__non_member"},wZ.t("These actions are available to members of this channel.",{fallbackHash:"b225cbd5ab14bf4bbd8e4b05e1beb652d1f7c33b",fallbackHashNs:"classic_nav"})))});NZ.defaultProps={channelActions:[],isIAPhase1Enabled:!1};var AZ=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t);return{channelActionCount:xt(e,t),channelActions:Ft(e,t),channelId:t,clogger:Object(ie.a)({state:e}),omitCountFromTitle:Object(bo.c)(e),shouldShowCreateButton:Object(Xj.a)(e),userIsInChannel:Object(q.ob)(a),isIAPhase1Enabled:Object(bo.c)(e)}},e=>({addChannelActionWithWorkflowBuilder:t=>e(bN(t)),expandChannelActionsSection:()=>e(Object(qa.e)({sectionId:"actions"}))}),null,{withRef:!0})(NZ),RZ=a("OISv");l.default.object,l.default.func;const MZ={msg:void 0,previewFile:r.a};class highlights_item_HighlightsItem extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["onFileClick"])}onFileClick(e,t){t&&this.props.previewFile({fileId:t.id,flexOrigin:"details",flexOriginId:"highlights"})}render(){const e=this.props.msg;return e&&e.ts?o.a.createElement(RZ.a,{msg:e,timestampClickable:!0,onFileClick:this.onFileClick,flexOrigin:"details",flexOriginId:"highlights"}):null}}highlights_item_HighlightsItem.displayName="HighlightsItem",highlights_item_HighlightsItem.defaultProps=MZ;var PZ=Object(u.b)((e,t)=>{const a=t.highlightMsg.ts;return{msg:Object(ae.a)(e,t.channelId,a)}},e=>({previewFile:(...t)=>e(Object(qa.c)(...t))}))(highlights_item_HighlightsItem);const xZ=new x.b("channel_details");l.default.object.isRequired,l.default.string.isRequired,l.default.bool.isRequired,l.default.func.isRequired,l.default.bool.isRequired;class highlights_list_HighlightsList extends i.Component{constructor(e){super(e),this.state={isLoading:!1,highlightsMsgs:[]}}componentDidMount(){this.fetchHighlights()}componentDidUpdate(e){this.props.channelId!==e.channelId&&(this.resetState(),this.fetchHighlights())}componentWillUnmount(){this.pendingHighlightsFetch&&this.pendingHighlightsFetch.cancel()}getTitleText(e){if(!this.props.featureM11nChannelDetails)return null;switch(e){case"this-week-header":return xZ.rt("This week",{fallbackHash:"7b72883e078a6858cf0c79bf3e93e72e765e9ada",fallbackHashNs:"channel_pages"});case"this-month-header":return xZ.rt("This month",{fallbackHash:"1b4785331db3b08cd8e3cfa4bd36216731a79e54",fallbackHashNs:"channel_pages"});case"within-three-months-header":return xZ.rt("More than a month ago",{fallbackHash:"89d5943beaee33befc436bdb3150890cc429cdf2",fallbackHashNs:"channel_pages"});case"within-six-months-header":return xZ.rt("More than 3 months ago",{fallbackHash:"d78be90f6b3e1fa97548920440fd9a31bd4395cc",fallbackHashNs:"channel_pages"});case"older-header":return xZ.rt("More than 6 months ago",{fallbackHash:"6707456354b81ac81d62b826dc37ccb8e017739b",fallbackHashNs:"channel_pages"});default:return null}}resetState(){this.setState(()=>({highlightsMsgs:[]}))}fetchHighlights(){var e=this.props;const t=e.channel,a=e.channelId;Object(q.ib)(t)||Object(q.qb)(t)||!a||(this.setState(()=>({isLoading:!0})),this.pendingHighlightsFetch=this.props.fetchHighlightsListForChannel(a).then(e=>{e?this.setState(()=>({highlightsMsgs:e,isLoading:!1})):this.setState(()=>({highlightsMsgs:[],isLoading:!1}))}).catch(()=>{this.setState(()=>({highlightsMsgs:[],isLoading:!1}))}).finally(()=>{this.pendingHighlightsFetch=null}))}renderTitle(e){return e?o.a.createElement("div",{key:e,className:"p-highlights_section__group_title"},o.a.createElement("div",{className:"p-highlights_section__group_title_line"}),o.a.createElement("div",{className:"p-highlights_section__group_title_label bold"},this.getTitleText(e))):null}renderEmptyState(){return o.a.createElement("p",{className:"p-channel_details__subtitle"}," ",xZ.rt("<strong>Nothing yet.</strong> When this channel gets a bit more active, check back here.",{fallbackHash:"0312eef94042834b79371db2371832bb4f8b361f",fallbackHashNs:"channel_pages"})," ")}render(){var e=this.props;const t=e.channelId,a=e.featureM11nChannelDetails,n=e.featureLongerChannelNames;var s=this.state;const r=s.isLoading,i=s.highlightsMsgs;if(!a)return null;if(r)return o.a.createElement(Kt.a,{size:"jumbo"});if(0===i.length)return this.renderEmptyState();const l=function(e){if(!e)return null;const t=[];let a=!1,n=!1,s=!1,r=!1,i=!1;const o=new Date/1e3,l=Object(Mh.a)(e,"ts");return Object(Rh.a)(l),Object(Rp.a)(l,e=>{e.ts>=o-604800?(a||(t.push({type:"header",content:"this-week-header"}),a=!0),t.push({type:"message",content:e})):e.ts>=o-2678400?(n||(t.push({type:"header",content:"this-month-header"}),n=!0),t.push({type:"message",content:e})):e.ts>=o-8035200?(s||(t.push({type:"header",content:"within-three-months-header"}),s=!0),t.push({type:"message",content:e})):e.ts>=o-16070400?(r||(t.push({type:"header",content:"within-six-months-header"}),r=!0),t.push({type:"message",content:e})):(i||(t.push({type:"header",content:"older-header"}),i=!0),t.push({type:"message",content:e}))}),t}(i),c=n?o.a.createElement(Ti.a,{channelId:t}):o.a.createElement(Bp.a,{channelId:t,inline:!0}),d=xZ.rt("Below {count, plural, =1 {is the top message} other {are a few of the top messages}} in <strong>{channel_name}</strong>.",{count:i.length,channel_name:c,fallbackHash:"1992d0038710cbd48278cc708a9ea5db8b4be72a",fallbackHashNs:"channel_pages"});return o.a.createElement("div",null,o.a.createElement("p",{className:"p-channel_details__subtitle"},d),o.a.createElement("ul",{className:"p-highlights_section no_bullets"},l.map(e=>"header"===e.type?this.renderTitle(e.content):o.a.createElement("li",{key:e.content.ts||e.content.id,className:"p-highlights_section__item"},o.a.createElement(PZ,{highlightMsg:e.content,channelId:this.props.channelId})))))}}highlights_list_HighlightsList.displayName="HighlightsList";var LZ=Object(u.b)(e=>({featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details"),featureLongerChannelNames:Object(m.m)(e,"feature_longer_channel_names")}),e=>({fetchHighlightsListForChannel:(...t)=>e(pZ(...t))}))(highlights_list_HighlightsList);a("6S4m");const FZ="highlights",DZ=new x.b("channel_details"),BZ=(l.default.object.isRequired,l.default.func,l.default.string.isRequired,l.default.bool,l.default.func.isRequired,{collapse:r.a,featureM11nChannelDetails:!1});class highlights_section_HighlightsSection extends i.Component{constructor(e){super(e),this.focus=this.focus.bind(this),this.sectionContainerRef=o.a.createRef()}focus(){const e=this.sectionContainerRef.current;if(!e)return;const t=e.getWrappedInstance();t&&t.focus()}renderHighlights(){return o.a.createElement(LZ,{channel:this.props.channel,channelId:this.props.channelId})}render(){var e=this.props;const t=e.featureM11nChannelDetails,a=e.channel,n=e.collapse,s=e.expandHighlightsSection;if(!t)return null;if(Object(q.ib)(a)||Object(q.qb)(a))return null;const r=o.a.createElement(FJ,{iconType:"sparkles",sectionTitle:DZ.t("Highlights")});return o.a.createElement(LJ,{ref:this.sectionContainerRef,sectionId:FZ,expand:s,collapse:n,header:r,sectionClasses:"p-channel_details__highlights_section",key:`${dm.d}_DETAILS_SECTION`},this.renderHighlights())}}highlights_section_HighlightsSection.displayName="HighlightsSection";highlights_section_HighlightsSection.defaultProps=BZ;var UZ=Object(u.b)((e,t)=>{const a=Object(m.m)(e,"feature_m11n_channel_details");return{channelId:t.channel.id,featureM11nChannelDetails:a}},e=>({expandHighlightsSection:()=>e(Object(qa.e)({sectionId:FZ}))}),null,{withRef:!0})(highlights_section_HighlightsSection),qZ=a("Z7NI"),HZ=Object(qZ.a)(Qb.a,{useShortMode:!0});const WZ={className:"p-channel_details__member_list_entity"};function GZ({memberId:e}){return o.a.createElement(et.a,{userId:e,position:"left-bottom",includeRemoveFromChannelAction:!0},o.a.createElement(HZ,{id:e,className:"p-channel_details__member_list__member_btn","data-qa":"member_row_btn",listEntityProps:WZ}))}GZ.displayName="MemberRow";var KZ=GZ;l.default.array,l.default.string.isRequired,l.default.func.isRequired;class member_list_MemberList extends i.Component{componentDidMount(){this.props.fetchMembersAboveTheFold()}componentDidUpdate(e){this.props.channelId!==e.channelId&&this.props.fetchMembersAboveTheFold()}render(){const e=this.props.memberList;if(!e)return null;const t=e.slice(0,Ln.G).map(e=>o.a.createElement("li",{key:e,className:"p-channel_details__member_list__member"},o.a.createElement(KZ,{memberId:e})));return o.a.createElement("ul",{className:"p-channel_details__member_list"},t)}}member_list_MemberList.displayName="MemberList",member_list_MemberList.defaultProps={memberList:[]};var VZ=Object(u.b)((e,{channelId:t})=>{return{memberList:Object(NK.c)(e,t)}},(e,{channelId:t})=>({fetchMembersAboveTheFold:()=>e(Object(NK.b)({channelId:t,count:Ln.G}))}))(member_list_MemberList);a("SaAd");const zZ=new x.b("channel_details"),$Z="members",YZ=(l.default.string.isRequired,l.default.func.isRequired,l.default.bool.isRequired,l.default.number,l.default.number,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func.isRequired,l.default.bool,{memberCount:void 0,restrictedMemberCount:void 0,openDmBrowserModal:r.a,startChannelInviteModal:r.a,openModal:r.a,showInviteButton:!1,showSeeAllMembersButton:!1,isIAPhase1Enabled:!1});class member_list_section_MemberListSection extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["handleSeeAllClick","handleInviteClick","focus"]),this.sectionContainerRef=o.a.createRef()}focus(){const e=this.sectionContainerRef.current;if(!e)return;const t=e.getWrappedInstance();t&&t.focus()}handleSeeAllClick(){const e=this.props.memberCount;this.props.openModal({element:o.a.createElement(DK,{channelId:this.props.channelId,memberCount:e})})}handleInviteClick(){if(Object(q.qb)(this.props.channel)){const e=Object(q.I)(this.props.channel);this.props.openDmBrowserModal({memberIds:e,source:ZI.b.MPIM})}else this.props.startChannelInviteModal({channelId:this.props.channelId,entryPoint:"channel_details_add_people"})}renderSeeAllMembersButton(){const e=this.props.memberCount;if(!this.props.showSeeAllMembersButton)return null;if(!e||e<Ln.G)return null;const t=zZ.t("See All {total_member_count, number} Members",{total_member_count:e,fallbackHash:"20a6f972248d119a0e90fbfc724fd70f2d54cdd2",fallbackHashNs:"channel_pages"});return o.a.createElement(_e.d,{className:"margin_top_50",onClick:this.handleSeeAllClick,type:"outline"},t)}renderHeader(){if(!this.props.featureM11nChannelDetails)return null;var e=this.props;const t=e.memberCount,a=e.restrictedMemberCount,n=e.isIAPhase1Enabled;let s;s=Object(dt.a)(t)?zZ.rt("{memberCount, plural, =1 {# Member} other {# Members}}",{memberCount:t}):zZ.rt("\u2013 Members",{memberCount:t}),n&&(s="Members");const r=Object(dt.a)(a)&&a>0,l=Object(dt.a)(a)&&a>0?zZ.rt("{restrictedMemberCount, plural, =1 {# Guest} other {# Guests}}",{restrictedMemberCount:a}):null,c=o.a.createElement(Xr.c,{tip:l,position:"top"},o.a.createElement("div",{className:"p-channel_details__member_list__guests"},o.a.createElement(bn.b,{type:"lock-o",inline:!0,className:"p-channel_details__member_list__guests_icon"}),a)),d=o.a.createElement(i.Fragment,null,s,r&&c);return o.a.createElement(FJ,{iconType:"user",sectionTitle:d,count:t})}render(){var e=this.props;const t=e.featureM11nChannelDetails,a=e.channel,n=e.channelId,s=e.memberCount,r=e.collapse,i=e.expandMembersSection,l=e.showInviteButton,c=e.showSeeAllMembersButton;if(Object(q.ib)(a)||!t)return null;const u=zZ.t("Add People",{fallbackHash:"8d158f5400b7631734fdbff564885963c8b7b76d"}),p=d()("p-channel_details__members_list_buttons",{"p-channel_details__members_list_button":!c});return o.a.createElement(LJ,{ref:this.sectionContainerRef,sectionId:$Z,expand:i,collapse:r,header:this.renderHeader(),sectionClasses:"p-channel_details__members_list_section",key:$Z},s>0&&o.a.createElement(VZ,{memberCount:s,channelId:n}),o.a.createElement("div",{className:p},this.renderSeeAllMembersButton(),l&&o.a.createElement(_e.d,{onClick:this.handleInviteClick,type:"outline","data-qa":"members-list-invite-button"},u)))}}member_list_section_MemberListSection.displayName="MemberListSection",member_list_section_MemberListSection.defaultProps=YZ;var QZ=Object(u.b)((e,{channelId:t})=>{const a=Object(vf.f)(e,t),n=Object(B.e)(e,t),s=a&&a.counts?a.counts.member_count:void 0,r=a&&a.counts?a.counts.restricted_member_count:void 0;return{featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details"),memberCount:s,restrictedMemberCount:r,channel:n,showInviteButton:Object(te.K)(e,t)||Object(q.qb)(n),showSeeAllMembersButton:s&&s>=Ln.G,isIAPhase1Enabled:Object(bo.c)(e),clogger:Object(ie.a)({state:e})}},e=>({openDmBrowserModal:(...t)=>e(Object(Qk.a)(...t)),startChannelInviteModal:(...t)=>e(Object(ew.b)(...t)),openModal:(...t)=>e(Object(ga.e)(...t)),expandMembersSection:()=>e(Object(qa.e)({sectionId:$Z}))}),null,{withRef:!0})(member_list_section_MemberListSection),XZ=a("4ZGf");const JZ=0,ZZ="APP_CHANNEL_DETAIL_LIST",e0=(l.default.string.isRequired,l.default.string.isRequired,l.default.string,l.default.string,l.default.object.isRequired,l.default.bool.isRequired,{appId:void 0,botId:void 0}),t0={className:"p-channel_details_apps__member_list_entity",forceRealName:!0};class apps_section_item_AppsSectionItem extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["handleNameClick"])}trackClick(e){var t=this.props;const a=t.appId,n=t.botId,s=t.channelId,r=t.clogger,i={[de.UiContextKeys.action]:de.UiAction.CLICK,[de.UiContextKeys.ui_element]:e};return r.track(ZZ,{contexts:{[de.ClientEventKeys.ui_context]:i,[de.ClientEventKeys.core]:{[de.CoreKeys.app_id]:a,[de.CoreKeys.bot_id]:n,[de.CoreKeys.channel_id]:s}}}),i}handleNameClick(){this.trackClick(de.UiElement.BTN_APP_NAME)}render(){var e=this.props;const t=e.featureM11nChannelDetails,a=e.userId;return t?o.a.createElement(mZ.a,{position:"left-bottom",offsetX:JZ,onClick:this.handleNameClick,userId:a},o.a.createElement(HZ,{"data-qa":"channel_apps_section_row",className:"p-channel_details_apps__row",id:a,listEntityProps:t0})):null}}apps_section_item_AppsSectionItem.displayName="AppsSectionItem",apps_section_item_AppsSectionItem.defaultProps=e0;var a0=Object(u.b)((e,{userId:t})=>{const a=Object(bi.d)(e,t);return{appId:Object(Je.p)(a),botId:Object(Je.q)(a),clogger:Object(ie.a)({state:e}),featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details")}})(apps_section_item_AppsSectionItem);const n0=new x.b("channel_details"),s0=(l.default.string.isRequired,l.default.object.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.arrayOf(l.default.string),l.default.bool.isRequired,l.default.func,l.default.bool,{userIds:[],openAppsBrowserModal:r.a,canAddAppsToChannel:!1});class apps_section_list_AppsSectionList extends i.PureComponent{constructor(e){super(e),this.handleAddAppsClick=this.handleAddAppsClick.bind(this)}componentDidMount(){this.fireImpressionClog()}componentDidUpdate(e){const t=this.props.channelId;e.channelId!==t&&this.fireImpressionClog()}fireImpressionClog(){var e=this.props;const t=e.channelId;e.clogger.track(de.EventId.APP_CHANNEL_DETAIL_LIST,{contexts:{[de.ClientEventKeys.ui_context]:{[de.UiContextKeys.action]:de.UiAction.EXPAND},[de.ClientEventKeys.core]:{[de.CoreKeys.channel_id]:t}}})}handleAddAppsClick(){var e=this.props;const t=e.clogger,a=e.channelId,n={[de.UiContextKeys.action]:de.UiAction.CLICK,[de.UiContextKeys.ui_element]:de.UiElement.BTN_ADD_APPS};t.track(de.EventId.APP_CHANNEL_DETAIL_LIST,{contexts:{[de.ClientEventKeys.ui_context]:n,[de.ClientEventKeys.core]:{[de.CoreKeys.channel_id]:a}}}),t.track(de.EventId.APP_CLICK_BTN_ADD_APPS_IN_CHANNEL_DETAILS,{contexts:{[de.ClientEventKeys.ui_context]:s()({},n,{[de.UiContextKeys.step]:de.UiStep.CHANNEL_DETAILS})}}),this.props.featureM11nAppsBrowser&&this.props.openAppsBrowserModal({addAppsVariant:!0,referringEventId:de.EventId.APP_CHANNEL_DETAIL_LIST,referringUiContext:n,channelId:a})}render(){var e=this.props;const t=e.channelId,a=e.featureM11nChannelDetails,n=e.isLoading,s=e.userIds,r=e.canAddAppsToChannel;if(!a)return null;if(n)return o.a.createElement(Kt.a,{size:"jumbo"});const i=d()("p-channel_details_apps",{"p-channel_details_apps__button_only":s.length<1});return o.a.createElement("div",null,o.a.createElement("ul",{className:i},s.map(e=>o.a.createElement("li",{className:"no_margin",key:e},o.a.createElement(a0,{channelId:t,userId:e})))),r&&o.a.createElement(_e.d,{className:"p-channel_details_apps__row--add",onClick:this.handleAddAppsClick,type:"outline","data-qa":"channel_apps_section_add"},n0.t("Add App",{fallbackHash:"1ae2c6ac44fb57fa370643de37789a2d84fa5202",fallbackHashNs:"channel_details"})))}}apps_section_list_AppsSectionList.displayName="AppsSectionList",apps_section_list_AppsSectionList.defaultProps=s0;var r0=Object(u.b)((e,{channelId:t})=>{const a=Object(XZ.b)(e,t);return{clogger:Object(ie.a)({state:e}),featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details"),isLoading:Object(ee.d)(a),userIds:a.userIds,featureM11nAppsBrowser:Object(m.m)(e,"feature_m11n_apps_browser"),canAddAppsToChannel:Object(te.x)(e,t)}},e=>({openAppsBrowserModal:(...t)=>e(Object(aw.a)(...t))}))(apps_section_list_AppsSectionList);a("Q2Pv");const i0="apps",o0=new x.b("channel_details"),l0=(l.default.string.isRequired,l.default.func.isRequired,l.default.number,l.default.bool.isRequired,l.default.bool,l.default.func.isRequired,l.default.bool,{appCount:void 0,isImWithApp:!1,isIAPhase1Enabled:!1});class apps_section_AppsSection extends i.PureComponent{constructor(e){super(e),this.focus=this.focus.bind(this),this.sectionContainerRef=o.a.createRef()}focus(){const e=this.sectionContainerRef.current;if(!e)return;const t=e.getWrappedInstance();t&&t.focus()}render(){var e=this.props;const t=e.featureM11nChannelDetails,a=e.channelId,n=e.isImWithApp,s=e.appCount,r=e.collapse,i=e.expandAppsSection,l=e.isIAPhase1Enabled;if(!t)return null;if(n)return null;let c=s?o0.t("{appCount, plural, =1 {# App} other {# Apps}}",{appCount:s}):o0.t("Apps");l&&(c=o0.t("Apps"));const d=o.a.createElement(FJ,{iconType:"gn-menu",sectionTitle:c,count:s});return o.a.createElement(LJ,{ref:this.sectionContainerRef,sectionId:i0,expand:i,collapse:r,header:d,sectionClasses:"p-channel_details__apps_section",key:i0},o.a.createElement(r0,{channelId:a}))}}apps_section_AppsSection.displayName="AppsSection",apps_section_AppsSection.defaultProps=l0;var c0=Object(u.b)((e,{channelId:t})=>{const a=Object(vf.f)(e,t);return{appCount:Object(se.a)(a,"counts.app_count"),featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details"),isImWithApp:Object(q.mb)(e,t),isIAPhase1Enabled:Object(bo.c)(e)}},e=>({expandAppsSection:()=>e(Object(qa.e)({sectionId:i0}))}),null,{withRef:!0})(apps_section_AppsSection);const d0=new x.b("channel_details");l.default.object.isRequired,l.default.string.isRequired,l.default.bool,l.default.func.isRequired,l.default.func.isRequired;class shared_files_list_SharedFilesList extends i.PureComponent{constructor(e){super(e),this.showMoreFiles=this.showMoreFiles.bind(this),this.state={isLoading:!0,fileIds:[],hasMore:!1}}componentDidMount(){this.fetchFiles()}componentDidUpdate(e){e.channelId!==this.props.channelId&&this.fetchFiles()}fetchFiles(){var e=this.props;const t=e.channelId,a=e.logger;this.setState(()=>({isLoading:!0})),this.props.listAndUpsertFiles({channelId:t,count:10,reason:"shared-files-section/fetchFiles"}).then(({files:e,paging:t}={})=>{const a=Object(Rh.a)(Object(Mh.a)(e,e=>Object(Qy.o)(e)));this.setState(()=>({isLoading:!1,fileIds:Object(ht.a)(a,"id"),hasMore:t&&t.pages>1}))}).catch(e=>{this.setState(()=>({isLoading:!1,fileIds:[]})),a.logError("SHARED-FILES",e,{subtype:"shared_files_loading_failed"})})}showMoreFiles(){this.props.openFromFilesMenu()}renderEmptyState(){return this.props.featureM11nChannelDetails?o.a.createElement("div",{className:"p-channel_details__shared_files__empty"},d0.rt("There are no files to see here right now! But there could be \u2014 drag and drop any file into the message pane to add it to this conversation.",{fallbackHash:"32dfdcb3bc1f3bbe4a27120ff93d9d0a90312489",fallbackHashNs:"channel_pages"})):null}renderFiles(){var e=this.state;const t=e.fileIds,a=e.hasMore;if(!this.props.featureM11nChannelDetails)return null;const n=Object(ht.a)(t,e=>o.a.createElement(ZK,{key:e,fileId:e}));let s;return a&&(s=o.a.createElement("div",{className:"p-channel_details__shared_files__more"},o.a.createElement(_e.d,{type:"outline",onClick:this.showMoreFiles},d0.rt("See All Files",{fallbackHash:"af3d09ab48b386df129640b14786b79264a4fa87",fallbackHashNs:"menu"})))),o.a.createElement(o.a.Fragment,null,n,s)}render(){var e=this.state;const t=e.isLoading,a=e.fileIds;return t?o.a.createElement(Kt.a,{size:"jumbo"}):a.length?this.renderFiles():this.renderEmptyState()}}shared_files_list_SharedFilesList.displayName="SharedFilesList",shared_files_list_SharedFilesList.defaultProps={featureM11nChannelDetails:!1};var u0=Object(u.b)(function(e){const t=Object(m.m)(e,"feature_m11n_channel_details");return{logger:Object(Ot.a)({state:e}),featureM11nChannelDetails:t}},function(e){return{listAndUpsertFiles:(...t)=>e(Object(jO.h)(...t)),openFromFilesMenu:(...t)=>e(Object(oC.e)(...t))}})(shared_files_list_SharedFilesList);a("r/YP");const p0="shared_files",h0=new x.b("channel_details"),m0=(l.default.string.isRequired,l.default.func,l.default.bool,l.default.func.isRequired,{collapse:r.a,featureM11nChannelDetails:!1});class shared_files_section_SharedFilesSection extends i.Component{constructor(e){super(e),this.focus=this.focus.bind(this),this.sectionContainerRef=o.a.createRef()}focus(){const e=this.sectionContainerRef.current;if(!e)return;const t=e.getWrappedInstance();t&&t.focus()}render(){var e=this.props;const t=e.featureM11nChannelDetails,a=e.channelId,n=e.collapse,s=e.expandSharedFilesSection;if(!t||!a)return null;const r=o.a.createElement(FJ,{iconType:"all-files",sectionTitle:h0.t("Shared Files"),hideCount:!0});return o.a.createElement(LJ,{ref:this.sectionContainerRef,sectionId:p0,expand:s,collapse:n,header:r,sectionClasses:"p-channel_details__shared_files_section",key:`${dm.d}_DETAILS_SECTION`},o.a.createElement(u0,{channelId:a}))}}shared_files_section_SharedFilesSection.displayName="SharedFilesSection";shared_files_section_SharedFilesSection.defaultProps=m0;var b0=Object(u.b)(e=>{return{featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details")}},e=>({expandSharedFilesSection:()=>e(Object(qa.e)({sectionId:p0}))}),null,{withRef:!0})(shared_files_section_SharedFilesSection);a("o2sZ");const f0=new x.b("channel_details"),_0="notification_prefs",g0=(l.default.string.isRequired,l.default.func.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.string,l.default.string,l.default.string,l.default.object.isRequired,l.default.func,l.default.func,l.default.func.isRequired,{desktopSetting:void 0,mobileSetting:void 0,notificationDisabledType:null,openChannelNotificationPrefsModal:r.a,openPrefsModal:r.a});class notification_prefs_section_NotificationPrefsSection extends i.Component{constructor(e){super(e),Object(la.a)(this,["handleEditPreferencesClick","focus"]),this.sectionContainerRef=o.a.createRef()}getDisabledNotificationsText(){const e=f0.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.",{fallbackHash:"1a4db9df0870ea9d3249727659a462c79ca89790",fallbackHashNs:"prefs"}),t=f0.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",{fallbackHash:"19c9da8051d592482b03309bbfcae4f052791067",fallbackHashNs:"prefs"},({key:e,text:t})=>o.a.createElement(Ua.a,{onClick:this.props.openPrefsModal,key:e},t)),a=f0.rt("Your browser does not support desktop notifications. <a>Try using our app instead.</a>",{fallbackHash:"38d4c3b2088ba1759fed9615fb958c7a90fbfb4b",fallbackHashNs:"prefs"},({key:e,text:t})=>o.a.createElement(ux.a,{target:"_blank",key:e,href:"/downloads"},t));switch(this.props.notificationDisabledType){case"not_allowed":return e;case"not_yet_allowed":return t;case"impossible":return a;default:return null}}focus(){const e=this.sectionContainerRef.current;if(!e)return;const t=e.getWrappedInstance();t&&t.focus()}handleEditPreferencesClick(){const e=this.props.channelId;this.props.openChannelNotificationPrefsModal({channelId:e,entryPoint:"notification_prefs_section"})}renderHeader(){return this.props.featureM11nChannelDetails?o.a.createElement(FJ,{iconType:"bell-o",sectionTitle:f0.rt("Notification Preferences"),hideCount:!0}):null}renderStandardNotificationPrefText(e){const t=f0.t("All new messages",{fallbackHash:"9b6c1f2aedfe68e695cee3b82fa493c77114ede1",fallbackHashNs:"channel_pages"}),a=f0.t("Mentions & keywords",{fallbackHash:"92a10c6a3a84448a8c091d6947909b8a0335f595",fallbackHashNs:"channel_pages"}),n=f0.t("Nothing",{fallbackHash:"4481948392a8846400c954e77f58d76cdaa73963",fallbackHashNs:"channel_pages"});switch(e){case"everything":return t;case"mentions_dms":return a;case"nothing":return n;default:return null}}renderDesktopNotificationText(){var e=this.props;const t=e.notificationsAllowed,a=e.notificationDisabledType;return!t&&a?o.a.createElement("div",{className:"p-channel_details__notification_prefs_section__notification_warning"},this.getDisabledNotificationsText()):this.renderStandardNotificationPrefText(this.props.desktopSetting)}renderCurrentNotificationPreferences(){return this.props.isMuted?o.a.createElement("div",null,o.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref bold"},f0.t("This channel is muted",{fallbackHash:"cc1784b8b4d0f3f15c487e68c7ace48ce5d7dd7d",fallbackHashNs:"channel_pages"}))):o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref_label bold"},f0.t("Desktop Notifications",{fallbackHash:"53a3505aad0eab70ba3cff84cca6f5cdcf527c25",fallbackHashNs:"channel_pages"})),o.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref"},this.renderDesktopNotificationText())),o.a.createElement("div",null,o.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref_label bold"},f0.t("Mobile Notifications",{fallbackHash:"872d1b49f956b8bd1bdd73f7e9a1595f7de35ab2",fallbackHashNs:"channel_pages"})),o.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref"},this.renderStandardNotificationPrefText(this.props.mobileSetting))))}render(){var e=this.props;const t=e.featureM11nChannelDetails,a=e.channel,n=e.collapse,s=e.expandNotificationPrefsSection;return Object(q.ib)(a)||!t?null:o.a.createElement(LJ,{ref:this.sectionContainerRef,sectionId:_0,expand:s,collapse:n,header:this.renderHeader(),sectionClasses:"p-channel_details__notification_prefs_section",key:_0},this.renderCurrentNotificationPreferences(),o.a.createElement(_e.d,{className:"margin_top_50",onClick:this.handleEditPreferencesClick,type:"outline"},f0.t("Edit Preferences",{fallbackHash:"4cefcb344f3354ae347d4d8d62e31331cb72312f",fallbackHashNs:"channel_details"})))}}notification_prefs_section_NotificationPrefsSection.displayName="NotificationPrefsSection",notification_prefs_section_NotificationPrefsSection.defaultProps=g0;var y0=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t);let n,s;Object(q.ib)(a)||(n=Object(Ne.f)(e,t),s=Object(Ne.g)(e,t));const r=Object(Ne.m)().notificationDisabledType;return{featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details"),isMuted:Object(xu.c)(e,t),notificationsAllowed:Object(Ne.e)(),notificationDisabledType:r,desktopSetting:n,mobileSetting:s,channel:a}},e=>({openChannelNotificationPrefsModal:(...t)=>e(Object(Hk.a)(...t)),openPrefsModal:()=>e(Object(ol.a)()),expandNotificationPrefsSection:()=>e(Object(qa.e)({sectionId:_0}))}),null,{withRef:!0})(notification_prefs_section_NotificationPrefsSection);a("dutO");const O0=new x.b("channel_details"),C0=(l.default.string,l.default.object,l.default.bool,l.default.bool,l.default.bool.isRequired,{memberId:void 0,member:void 0,time24:!1,canInteract:!0});class dm_section_DmSection extends i.PureComponent{constructor(e){super(e),this.focus=this.focus.bind(this),this.memberRef=o.a.createRef(),this.state={tzUpdateCounter:0}}componentDidMount(){this.scheduleNextTzUpdate()}componentWillUnmount(){clearTimeout(this.tzUpdater)}focus(){const e=this.memberRef.current;e&&e.focus()}scheduleNextTzUpdate(){let e=60-(new Date).getSeconds();e<5&&(e=5),this.tzUpdater=setTimeout(()=>{this.setState(e=>({tzUpdateCounter:e.tzUpdateCounter+1})),this.scheduleNextTzUpdate()},1e3*e)}render(){var e=this.props;const t=e.memberId,a=e.member,n=e.time24,s=e.canInteract,r=e.featureM11nChannelDetails;if(!t||!a)return null;if(!r)return null;const i=Object(Je.Q)(a);let l;if(i&&!Object(Je.kb)(a)){const e=Object(Zj.a)(Date.now(),{timeZone:i,timeZoneOffset:Object(Je.R)(a),do24hrTime:n});l=o.a.createElement("div",{className:"p-channel_details__dm_section__tz_section"},o.a.createElement("span",{className:"p-channel_details__dm_section__tz_label"},O0.t("Time zone"))," ",O0.t("{local_time} local time",{local_time:e}))}return o.a.createElement(o.a.Fragment,null,o.a.createElement(mZ.a,{userId:t},o.a.createElement("div",{className:"p-channel_details__dm_section"},o.a.createElement(KB.a,{ref:this.memberRef,id:t,size:"large",showStatus:s,showPresence:s}))),l)}}dm_section_DmSection.displayName="DmSection",dm_section_DmSection.defaultProps=C0;var v0=Object(u.b)(function(e,{channel:t}){const a=Object(q.H)(t),n=Object(m.m)(e,"feature_stranger_danger")?Object(nY.a)(e,a):!Object(Je.Jb)(Object(bi.d)(e,a));return{memberId:a,member:Object(bi.d)(e,a),time24:Object(ba.k)(e,"time24"),canInteract:n,featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details")}},null,null,{withRef:!0})(dm_section_DmSection);a("qTUc");const E0=new x.b("channel_details"),k0={info:"detailsSectionRef",highlights:"highlightSectionRef",pins:"pinnedSectionRef",members:"memberListSectionRef",apps:"appsSectionRef",shared_files:"sharedFilesSectionRef",notification_prefs:"notificationSectionRef"};l.default.object,l.default.bool.isRequired,l.default.bool.isRequired,l.default.bool.isRequired,l.default.func.isRequired,l.default.string.isRequired,l.default.bool;class channel_details_ChannelDetails extends i.PureComponent{constructor(e){super(e),this.focus=this.focus.bind(this),this.findFirstSectionRefName=this.findFirstSectionRefName.bind(this),this.detailsSectionRef=o.a.createRef(),this.highlightSectionRef=o.a.createRef(),this.pinnedSectionRef=o.a.createRef(),this.memberListSectionRef=o.a.createRef(),this.appsSectionRef=o.a.createRef(),this.sharedFilesSectionRef=o.a.createRef(),this.notificationSectionRef=o.a.createRef()}findFirstSectionRefName(){return k0[this.props.expandedSectionId]||Object.keys(k0).reduce((e,t)=>{if(null!==e)return e;const a=k0[t];return this[a].current?a:null},null)}focus(){const e=this.findFirstSectionRefName(),t=this[e]&&this[e].current;if(!t)return;const a=t.getWrappedInstance();a&&a.focus()}renderTitle(){var e=this.props;const t=e.channel,a=e.featureM11nChannelDetails,n=e.featureLongerChannelNames,s=e.isImOrMpim;return a?s?E0.t("About this conversation"):n?E0.t("About this channel"):E0.rt("About {channelName}",{channelName:o.a.createElement(Bp.a,{channel:t,inline:!0})}):null}renderBody(){var e=this.props;const t=e.channel,a=e.collapse,n=e.isImOrMpim,s=e.shouldDisplayChannelActionSection;return o.a.createElement(pr.a,null,({width:e,height:r})=>o.a.createElement(Mv.b,{width:e,height:r},o.a.createElement(i.Fragment,null,Object(q.ib)(t)&&o.a.createElement(v0,{ref:this.detailsSectionRef,channel:t}),!n&&o.a.createElement(kZ,{ref:this.detailsSectionRef,channel:t,collapse:a}),s&&o.a.createElement(AZ,{ref:this.channelActionsSectionRef,channelId:t.id,collapse:a}),!n&&o.a.createElement(UZ,{ref:this.highlightSectionRef,channel:t,collapse:a}),o.a.createElement(zJ,{ref:this.pinnedSectionRef,channelId:t.id,collapse:a}),!Object(q.ib)(t)&&o.a.createElement(QZ,{ref:this.memberListSectionRef,channelId:t.id,collapse:a}),o.a.createElement(c0,{ref:this.appsSectionRef,channelId:t.id,collapse:a}),o.a.createElement(b0,{ref:this.sharedFilesSectionRef,channelId:t.id,collapse:a}),o.a.createElement(y0,{ref:this.notificationSectionRef,channelId:t.id,collapse:a}))))}render(){var e=this.props;const t=e.channel,a=e.featureM11nChannelDetails;if(!t||Object(q.Nb)(t)||!a)return null;const n=this.renderTitle();return o.a.createElement(I$.b,{className:"p-channel_details",focus:this.focus,title:n,renderBody:()=>this.renderBody(),viewId:Ln.I.CHANNEL_DETAILS_FLEXPANE,kbNavOrder:Object(re.a)()?void 0:4.5})}}channel_details_ChannelDetails.displayName="ChannelDetails",channel_details_ChannelDetails.defaultProps={channel:null,shouldDisplayChannelActionSection:!1};var S0=Object(u.b)(e=>{const t=Object(_.a)(e),a=Object(B.e)(e,t),n=Object(v.e)(e)[0]||"";return{shouldDisplayChannelActionSection:NT(e,a&&a.id),featureM11nChannelDetails:Object(m.m)(e,"feature_m11n_channel_details"),featureLongerChannelNames:Object(m.m)(e,"feature_longer_channel_names"),isImOrMpim:!(!Object(q.ib)(a)&&!Object(q.qb)(a)),expandedSectionId:n,channel:a}},e=>({collapse:()=>e(Object(qa.e)())}))(channel_details_ChannelDetails),j0=a("533h"),I0=a("SAUz");a("oP4J");const w0=new x.b("calendar");l.default.bool,l.default.bool;class calendar_flexpane_CalendarFlexpane extends o.a.Component{focus(){return null}blur(){return null}renderBody(){var e=this.props;const t=e.isLoading;return e.featureCalendarSimpleAgendaView?t?o.a.createElement("div",{className:"p-calendar_flexpane__loading"},w0.t("Loading\u2026")):o.a.createElement("div",null," This is user calendar "):null}render(){return this.props.featureCalendarSimpleAgendaView?o.a.createElement(Sp.a,{component:this,order:4},o.a.createElement(zo.a,{id:Ln.I.ACTIVITY_FLEXPANE},o.a.createElement("div",{className:"p-calendar_flexpane"},o.a.createElement(j0.a,null,o.a.createElement(I0.a,{size:"medium"}),o.a.createElement("div",null,w0.t("Your calendar"))),this.renderBody()))):null}}calendar_flexpane_CalendarFlexpane.displayName="CalendarFlexpane",calendar_flexpane_CalendarFlexpane.defaultProps={featureCalendarSimpleAgendaView:!0,isLoading:!0};var T0=Object(u.b)(e=>({featureCalendarSimpleAgendaView:Object(m.m)(e,"feature_calendar_simple_agenda_view")}),{})(calendar_flexpane_CalendarFlexpane);var N0=a("XxnT"),A0=a("Lnf+");a("nfA0");const R0=new x.b("downloads"),M0=(l.default.string.isRequired,l.default.string,l.default.string,l.default.number,l.default.number,l.default.string,l.default.string,l.default.string,l.default.string,l.default.number,l.default.bool,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.func,l.default.bool,l.default.func,l.default.func,{downloadPath:"",downloadState:"",startTime:0,progress:0,fileName:"",imageSource:"",fileType:"",prettyType:"",fileSize:0,highlight:!1,openDownload:r.a,showDownload:r.a,cancelDownload:r.a,retryDownload:r.a,removeDownload:r.a,pauseDownload:r.a,resumeDownload:r.a,hasKeyboardFocusWithin:!1,onFocus:r.a,onBlur:r.a});class download_item_DownloadItem extends o.a.Component{static getEstimatedTimeRemaining({downloadState:e,progress:t,startTime:a}){if(!["progressing","paused"].includes(e))return"";if(t>=1)return"";if(-1===t)return"";if(!t)return"";const n=Date.now()-a,s=n*(1/t)-n;return R0.t("{duration} remaining",{duration:N0.a.duration(s,"milliseconds").humanize()})}constructor(e){super(e),Object(la.a)(this,["onOpenClick","onShowClick","onCancel","onRetry","onRemove","onPause","onResume"])}onOpenClick(e){e.stopPropagation(),this.props.openDownload(this.props.id)}onShowClick(e){e.stopPropagation(),this.props.showDownload(this.props.id)}onCancel(e){e.stopPropagation(),this.props.cancelDownload(this.props.id)}onRetry(e){e.stopPropagation(),this.props.retryDownload(this.props.id)}onRemove(e){e.stopPropagation(),this.props.removeDownload(this.props.id)}onPause(e){e.stopPropagation(),this.props.pauseDownload(this.props.id)}onResume(e){e.stopPropagation(),this.props.resumeDownload(this.props.id)}renderDownloadIcon(){var e=this.props;const t=e.fileType,a=e.imageSource,n=()=>o.a.createElement(bn.b,{type:t,file:!0});return a?o.a.createElement(Xk.a,{src:a,renderPending:n,width:"32",height:"32",className:"p-download_item__image",alt:""}):n()}renderExtraActions(){const e="paused"===this.props.downloadState?o.a.createElement(Ua.a,{className:"p-download_item__link--resume",onClick:this.onResume},R0.t("Resume")):o.a.createElement(Ua.a,{className:"p-download_item__link--pause",onClick:this.onPause},R0.t("Pause"));return o.a.createElement("span",{className:"p-download_item__extra_actions"},e,o.a.createElement(Ua.a,{className:"p-download_item__link--cancel",onClick:this.onCancel},R0.t("Cancel")))}render(){var e=this.props;const t=e.downloadPath,a=e.downloadState,n=e.fileName,s=e.imageSource,r=e.fileType,i=e.prettyType,l=e.fileSize,c=e.highlight,u=e.hasKeyboardFocusWithin,p=Math.max(this.props.progress,0),h=n||t.split(/\/|\\/).reverse()[0],m="completed"===a?100:100*p,b=["progressing","paused"].includes(a)&&p?p*l:void 0;let f;f=b?R0.t("{partialSize} of {size} {prettyType}",{partialSize:Object(A0.a)(b,{decimalPlaces:2}),size:Object(A0.a)(l),prettyType:i}):`${Object(A0.a)(l)} ${i}`;const _=download_item_DownloadItem.getEstimatedTimeRemaining(this.props),g=d()("p-download_item",a,{highlight:c,"p-download_item--focus-within":u}),y=d()({"p-download_item__action_icon":!0,"p-download_item__action_icon--image":!!s,fileType:r}),O=Object(ue.q)()?R0.t("Show in Finder"):R0.t("Open containing folder"),C={width:`${m}%`},v=R0.t("Remove {file}",{file:h,fallbackHash:"e963907dac5cd5c017869b4c96c18021c9bd058b",fallbackHashNs:"admin"});return o.a.createElement("div",{role:"presentation",className:g,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onClick:this.onOpenClick},o.a.createElement("div",{className:"p-download_item__icon_container"},this.renderDownloadIcon(),o.a.createElement(bn.b,{className:y})),o.a.createElement("div",{className:"p-download_item__container"},o.a.createElement("div",{className:"p-download_item__name_row"},o.a.createElement("span",{className:"p-download_item__name overflow_ellipsis"},h),this.renderExtraActions()),o.a.createElement("div",{className:"p-download_item__size_row"},o.a.createElement("span",{className:"p-download_item__size overflow_ellipsis"},o.a.createElement("span",{className:"p-download_item__partial_size"},f)),o.a.createElement("span",{className:"p-download_item__actions"},o.a.createElement(Ua.a,{className:"p-download_item__link--show",onClick:this.onShowClick},O),o.a.createElement(Ua.a,{className:"p-download_item__link--retry",onClick:this.onRetry},R0.t("Retry"))),o.a.createElement("span",{className:"p-download_item__time_remaining"},_)),o.a.createElement("div",{className:"p-download_item__progress_row progress_bar"},o.a.createElement("div",{className:"p-download_item__progress progress_bar_progress",style:C}))),o.a.createElement(Up.a,{"aria-label":v,icon:"close-filled",className:"p-download_item__link--remove",onClick:this.onRemove}))}}download_item_DownloadItem.displayName="DownloadItem",download_item_DownloadItem.defaultProps=M0;const P0={openDownload:S.n,showDownload:S.t,cancelDownload:S.a,retryDownload:S.r,removeDownload:S.p,pauseDownload:S.o,resumeDownload:S.q};var x0=Object(bk.a)(Object(u.b)(null,P0)(download_item_DownloadItem));const L0=new x.b("page_client"),F0=(l.default.arrayOf(l.default.object.isRequired),l.default.func,l.default.func,l.default.func,l.default.string,l.default.func,{items:void 0,onItemTabWithin:r.a,openDownload:r.a,retryDownload:r.a,focusKey:null,setFocusKey:r.a});class downloads_list_DownloadsList extends i.PureComponent{constructor(e){super(e),Object(la.a)(this,["renderItem","onFileClick","focus"]),this.list=o.a.createRef()}componentDidMount(){var e=this.props;const t=e.focusKey,a=e.items;"downloads"===t&&a.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}componentDidUpdate({focusKey:e}){var t=this.props;const a=t.focusKey,n=t.items;"downloads"===a&&a!==e&&n.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}onFileClick(e){const t=e.id,a=this.getItemKeys(),n=Object(AP.a)(a,t),s=this.props.items[n];if(!s)return;const r=s.downloadState;"completed"!==r?"cancelled"!==r&&"interrupted"!==r||this.props.retryDownload(t):this.props.openDownload(t)}getItemKeys(){return this.props.items.map(e=>e.id)}setFocusOnFirstItem(){const e=this.getItemKeys()[0],t=this.list.current;t&&t.focusOnKey(e)}clearFocusKey(){this.props.setFocusKey(null)}focus(){const e=this.list.current;e&&e.focus()}renderItem(e){const t=this.props.items[e];return o.a.createElement(x0,s()({key:t.id},t))}render(){const e=this.getItemKeys();return o.a.createElement(pr.a,null,({width:t,height:a})=>o.a.createElement(lx.a,{ref:this.list,width:t,height:a,keys:e,rowRenderer:this.renderItem,animateOnScroll:!1,"aria-label":L0.t("Downloads"),onItemTabWithin:this.props.onItemTabWithin,onItemClick:this.onFileClick}))}}downloads_list_DownloadsList.displayName="DownloadsList",downloads_list_DownloadsList.defaultProps=F0;const D0=Object(u.b)(e=>({focusKey:Object(vy.a)(e)}),e=>({openDownload:()=>e(S.n),retryDownload:()=>e(S.r),setFocusKey:t=>e(Object(Ey.a)(t))}))(e=>{let t=e.forwardedRef,a=fp()(e,["forwardedRef"]);return o.a.createElement(downloads_list_DownloadsList,s()({ref:t},a))});var B0=o.a.forwardRef((e,t)=>o.a.createElement(D0,s()({forwardedRef:t},e)));a("erm0");l.default.array.isRequired,l.default.array.isRequired,l.default.func.isRequired,l.default.bool,l.default.func;const U0={clearDownloads:r.a,isShowing:!0},q0=new x.b("page_client");class downloads_flexpane_DownloadsFlexpane extends o.a.Component{constructor(e){super(e),Object(la.a)(this,["focus","onItemTabWithin"]),this.list=o.a.createRef(),this.flexpane=o.a.createRef()}onItemTabWithin(){const e=this.flexpane.current;e&&e.setInitialActiveSection()}UNSAFE_componentWillUpdate({fileIdsToFetch:e}){this.props.fileIdsToFetch!==e&&0!==e.length&&(Object(WD.a)(this.props.fileIdsToFetch,e)||this.props.fetchFileInfo({ids:e}))}focus(){const e=this.list.current;e&&e.focus()}render(){var e=this.props;const t=e.clearDownloads,a=e.downloads;if(!e.isShowing)return null;let n;return Object(io.a)(a)||(n={onOptionsClick:t,optionsIconType:"clear",optionsTooltipText:q0.t("Clear all")}),o.a.createElement(I$.b,{isEmpty:Object(io.a)(a),ref:this.flexpane,focus:this.focus,className:"p-downloads_list",title:q0.t("Downloads"),renderBody:()=>o.a.createElement(B0,{ref:this.list,"aria-label":q0.t("Downloads"),items:a,onItemTabWithin:this.onItemTabWithin}),renderEmpty:()=>o.a.createElement(lC.a,{imageUrl:cdn_url+"/80588/img/downloads_empty.png",imageUrl2x:cdn_url+"/80588/img/downloads_empty@2x.png",title:q0.t("Downloaded files"),description:q0.rt("You can download files by selecting the {icon} icon.",{icon:o.a.createElement(bn.b,{inline:!0,type:"cloud-download"})})}),headerProps:n,viewId:"downloads-list",kbNavOrder:Object(re.a)()?void 0:6})}}downloads_flexpane_DownloadsFlexpane.displayName="DownloadsFlexpane",downloads_flexpane_DownloadsFlexpane.defaultProps=U0;var H0=downloads_flexpane_DownloadsFlexpane;const W0=e=>e.files,G0=(e,t)=>t.startTime-e.startTime,K0=Object(yy.createSelector)([S.i,W0],(e,t)=>(e||[]).map(e=>(function(e,t){const a=t||Object(Es.e)(e.id)||{};return s()({},e,{fileName:a.name,imageSource:a.thumb_160||a.thumb_80,fileType:a.filetype,prettyType:a.pretty_type,fileSize:a.size})})(e,t[e.id])).sort(G0)),V0=Object(yy.createSelector)([S.h,W0],(e,t)=>(e||[]).filter(e=>!t[e])),z0={fetchFileInfo:S.d,clearDownloads:S.b};var $0=Object(u.b)(e=>{const t=Object(v.j)(e);return{downloads:K0(e),fileIdsToFetch:V0(e),isShowing:"downloads"===t}},z0)(H0);l.default.object,l.default.objectOf(l.default.string),l.default.func.isRequired;const Y0={channel:void 0,callConfirmationStrings:{}},Q0=({channel:e,callConfirmationStrings:t,dispatch:a})=>{const n=Object(i.useCallback)(()=>{a(Object(ga.a)())},[a]),s=Object(i.useCallback)(()=>{a(Object(ga.a)()),a(Object(QI.d)())},[a]);return o.a.createElement(xN.a,{closeModal:n,isOpen:!0,centered:!0},o.a.createElement(xN.h,null,o.a.createElement(xN.j,{title:t.title})),o.a.createElement(xN.d,null,o.a.createElement(xN.e,null,o.a.createElement("p",null,Object(q.kb)(e)?t.descriptionMPIM:t.description))),o.a.createElement(xN.f,null,o.a.createElement(xN.g,null,o.a.createElement(xN.c,{type:"outline",onClick:n},t.cancel),o.a.createElement(_e.d,{type:"primary",onClick:s},t.confirm))))};Q0.displayName="StartCallConfirmationModal",Q0.defaultProps=Y0;var X0=Object(u.b)((e,{channelId:t})=>{const a=Object(B.e)(e,t),n=Object(vf.f)(e,a.id),s=Object(se.a)(n,"counts.member_count")||0;return{channel:a,callConfirmationStrings:Object(Nw.b)(s)}})(Q0);a("9jbU");const J0={info:"detailsSectionRef",highlights:"highlightSectionRef",pins:"pinnedSectionRef",members:"memberListSectionRef",apps:"appsSectionRef",shared_files:"sharedFilesSectionRef",notification_prefs:"notificationSectionRef"};l.default.object,l.default.bool,l.default.func.isRequired,l.default.string.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.bool.isRequired,l.default.func.isRequired,l.default.bool.isRequired,l.default.func.isRequired,l.default.func.isRequired,l.default.object,l.default.bool,l.default.func,l.default.bool;class channel_details_IAPrototypeChannelDetails extends i.PureComponent{constructor(e){super(e),this.focus=this.focus.bind(this),this.findFirstSectionRefName=this.findFirstSectionRefName.bind(this),this.editChannelPurpose=this.editChannelPurpose.bind(this),this.openInviteModal=this.openInviteModal.bind(this),this.pinnedSectionRef=o.a.createRef(),this.memberListSectionRef=o.a.createRef(),this.appsSectionRef=o.a.createRef(),this.sharedFilesSectionRef=o.a.createRef(),this.notificationSectionRef=o.a.createRef()}findFirstSectionRefName(){return J0[this.props.expandedSectionId]||Object.keys(J0).reduce((e,t)=>{if(null!==e)return e;const a=J0[t];return this[a].current?a:null},null)}focus(){const e=this.findFirstSectionRefName(),t=this[e]&&this[e].current;if(!t)return;const a=t.getWrappedInstance();a&&a.focus()}editChannelPurpose(){this.props.userCanSetPurpose&&this.props.openModal({element:o.a.createElement(gB,{channelId:this.props.channel.id})})}openInviteModal(){const e=this.props.channel;if(Object(q.qb)(e)){const t=Object(q.I)(e);this.props.openDmBrowserModal({memberIds:t,source:ZI.b.MPIM})}else this.props.startChannelInviteModal({channelId:e.id})}renderActionButton({icon:e,label:t,onClick:a,classes:n=""}){return o.a.createElement(Qh.a,{onClick:a,className:d()("p-ia__channel_details__action",n)},o.a.createElement(bn.b,{type:e,size:20,className:"p-ia__channel_details__action_icon"}),o.a.createElement("div",{className:"p-ia__channel_details__action_label"},t))}renderActions(){var e=this.props;const t=e.channel,a=e.muted,n=e.isApp,r=e.isInAnyChannelSection,i=this.props.shouldUseChannelSections?r:Object(q.Jb)(t),l=this.props.shouldUseChannelSections?o.a.createElement(_T,{channelIds:[t.id]},this.renderActionButton({label:i?"Starred":"Star",icon:i?"star":"star-o",classes:`p-ia__channel_details__action--${i?"starred":"star"}`})):this.renderActionButton({label:i?"Starred":"Star",icon:i?"star":"star-o",classes:`p-ia__channel_details__action--${i?"starred":"star"}`,onClick:()=>i?this.props.updateStar(!1,{channel:t.id}):this.props.updateStar(!0,{channel:t.id})});return o.a.createElement("div",{className:"p-ia__channel_details__actions"},!n&&!Object(q.ib)(t)&&this.renderActionButton({label:"Invite",icon:"add-user",onClick:this.openInviteModal}),l,this.renderActionButton({label:a?"Muted":"Mute",icon:a?"bell-slash-filled":"bell-o",classes:`p-ia__channel_details__action--${a?"muted":"unmuted"}`,onClick:()=>a?this.props.unmuteChannelById(t.id):this.props.muteChannelById(t.id)}),!n&&this.renderActionButton({label:"Call",icon:"phone",onClick:()=>{this.props.clogger.track("CALLS_USER_JOIN_INTENT",{is_iap1:this.props.isIAPhase1Enabled}),Object(q.ib)(t)?this.props.startCall():this.props.openModal({element:o.a.createElement(X0,{channelId:t.id})})}}),o.a.createElement(eC.a,{position:"bottom-right",offsetX:-8,offsetY:8,renderMenu:e=>n?o.a.createElement(nA,s()({},e,{channelId:t.id})):o.a.createElement(Fw,s()({},e,{channelId:t.id,isIAPhase1Enabled:!0}))},o.a.createElement(Qh.a,{className:"p-ia__channel_details__action"},o.a.createElement(bn.b,{type:"ellipsis",size:20,className:"p-ia__channel_details__action_icon"}),o.a.createElement("div",{className:"p-ia__channel_details__action_label"},"More"))))}renderDetails(){var e=this.props;const t=e.channel,a=e.userCanSetPurpose,n=e.isApp,s=Object(q.R)(t),r=Object(q.r)(t),i=Object(q.q)(t),l=i&&Object(Ro.n)(i,{returnMoment:!0});return o.a.createElement("div",{className:"p-ia__channel_details__details"},!Object(q.kb)(t)&&o.a.createElement("div",{className:"p-ia__channel_details__about"},o.a.createElement("div",{className:"p-ia__channel_details__about_header"},o.a.createElement("div",{className:"p-ia__channel_details__about_title"},"About"),a&&o.a.createElement(Qh.a,{className:"p-ia__channel_details__about_edit",onClick:this.editChannelPurpose},o.a.createElement(bn.b,{type:"pencil",size:"inherit",inline:!0})," Edit")),s?o.a.createElement(eg.a,{text:s}):a&&o.a.createElement("span",{className:"sk_foreground_high_solid"},"What\u2019s this channel about?")),!n&&!Object(q.ib)(t)&&o.a.createElement("div",{className:d()("p-ia__channel_details__created",{"p-ia__channel_details__created--mpim":Object(q.qb)(t)})},"Created by"," ",o.a.createElement("span",{className:"p-ia__channel_details__created_member_name"},o.a.createElement(mB.a,{id:r}))," ","on ",l.format("MMMM Do, YYYY")))}renderBody(){var e=this.props;const t=e.channel,a=e.collapse,n=e.isApp;return o.a.createElement(pr.a,null,({width:e,height:s})=>o.a.createElement(Mv.b,{width:e,height:s},o.a.createElement(i.Fragment,null,this.renderActions(),this.renderDetails(),Object(q.ib)(t)&&!n&&o.a.createElement(v0,{ref:this.detailsSectionRef,channel:t}),!Object(q.kb)(t)&&o.a.createElement(AZ,{ref:this.pinnedSectionRef,channelId:t.id,collapse:a}),o.a.createElement(zJ,{ref:this.pinnedSectionRef,channelId:t.id,collapse:a}),!Object(q.ib)(t)&&o.a.createElement(QZ,{ref:this.memberListSectionRef,channelId:t.id,collapse:a}),o.a.createElement(c0,{ref:this.appsSectionRef,channelId:t.id,collapse:a}),o.a.createElement(b0,{ref:this.sharedFilesSectionRef,channelId:t.id,collapse:a}),o.a.createElement(y0,{ref:this.notificationSectionRef,channelId:t.id,collapse:a}))))}render(){const e=this.props.channel;return!e||Object(q.Nb)(e)?null:o.a.createElement(I$.b,{className:"p-channel_details p-ia__channel_details",focus:this.focus,title:"Details",renderBody:()=>this.renderBody(),viewId:Ln.I.CHANNEL_DETAILS_FLEXPANE,kbNavOrder:Object(re.a)()?void 0:4.5})}}channel_details_IAPrototypeChannelDetails.displayName="IAPrototypeChannelDetails",channel_details_IAPrototypeChannelDetails.defaultProps={channel:null,muted:!1,clogger:{},isIAPhase1Enabled:!1,shouldUseChannelSections:!1,isInAnyChannelSection:!1};var Z0=Object(u.b)(e=>{const t=Object(_.a)(e),a=Object(B.e)(e,t);return{expandedSectionId:Object(v.e)(e)[0]||"",channel:a,muted:Object(xu.c)(e,a&&a.id),userCanSetPurpose:Object(te.v)(e,a&&a.id).ok,isApp:Object(q.lb)(e,a.id),clogger:Object(ie.a)({state:e}),isIAPhase1Enabled:Object(bo.c)(e),shouldUseChannelSections:Object(A.a)(e),isInAnyChannelSection:TS(e,a.id)}},e=>({collapse:()=>e(Object(qa.e)()),startChannelInviteModal:(...t)=>e(Object(ew.b)(...t)),muteChannelById:(...t)=>e(Object(zI.a)(...t)),unmuteChannelById:(...t)=>e(Object(zI.b)(...t)),startCall:()=>e(Object(QI.d)()),openModal:(...t)=>e(Object(ga.e)(...t)),openDmBrowserModal:(...t)=>e(Object(Qk.a)(...t)),updateStar:(...t)=>e(Object(Gw.a)(...t))}))(channel_details_IAPrototypeChannelDetails);class secondary_view_SecondaryView extends i.PureComponent{render(){var e=this.props;const t=e.id,a=e.params,n=e.isIAPhase1Enabled;if(!t)return null;switch(t){case"files":{if(a&&Object(Qz.a)(a[0]))return o.a.createElement(U$,{fileId:a[0]});const e=a&&a[0]||"all",t=a&&a[1]||"all";return o.a.createElement(J$,{user:e,filetype:t})}case"downloads":return o.a.createElement($0,null);case"thread":{if(!a)return null;var s=Object($a.a)(a[0]);const e=s.channelId,t=s.threadTs,n=`threads-flexpane-${e}-${t}`;return o.a.createElement(cJ,{threadTs:t,channelId:e,key:n,serializationKey:n})}case"activity":return o.a.createElement(EJ,null);case"directory":return o.a.createElement(aY,null);case"user_profile":return a&&Object(Kb.a)(a[0])?o.a.createElement(CY,{memberId:a[0]}):null;case"app_profile":{const e=a[0];return a&&Object(Jz.a)(e)?o.a.createElement(KY,{serviceId:e}):a&&Object(f.a)(e)?o.a.createElement(KY,{appId:e}):null}case"user_groups":return a&&Object(Xz.a)(a[0])?o.a.createElement(ZQ,{groupId:a[0]}):o.a.createElement(xX,null);case"whats_new":return o.a.createElement(IJ,null);case"starred_items":return o.a.createElement(AJ,null);case"shortcuts":return o.a.createElement(RJ.b,null);case"details":return n?o.a.createElement(Z0,null):o.a.createElement(S0,null);case"calendar":return o.a.createElement(T0,null);default:throw new Error(`${t} flexpane is not implemented!`)}}}secondary_view_SecondaryView.displayName="SecondaryView",secondary_view_SecondaryView.defaultProps={id:null,params:null,isIAPhase1Enabled:!1};var e1=Object(u.b)(e=>({isIAPhase1Enabled:Object(bo.c)(e)}))(secondary_view_SecondaryView);a("tEVE");l.default.string.isRequired,l.default.string,l.default.oneOf(k.a),l.default.string,l.default.bool,l.default.bool,l.default.object,l.default.bool,l.default.bool,l.default.arrayOf(l.default.string),l.default.func,l.default.bool,l.default.object,l.default.object.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func,l.default.func,l.default.bool,l.default.bool,l.default.oneOf(["light","dark"]),l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.bool,l.default.func.isRequired,l.default.bool;const t1={primaryView:void 0,secondaryView:void 0,tab:void 0,isPage:!1,hideChannelHeader:!1,channelHeaderProps:void 0,isAppSpace:!1,isAppSpaceOpen:!1,flexParams:void 0,renderSonicMenu:void 0,featureClassicNav:!1,featureAppHomeUTA:!1,featureComposeFlow:!1,featureModernizeChannelCreateModal:!1,openInviteModal:r.a,openChannelCreateModal:r.a,usePrimarySearch:!1,isWindowFrameless:!1,inCreatorOnboarding:!1,clogger:void 0,clientTheme:"light",systemThemeSync:!1,useTabsHeaderVariant:!1,featureWysiwygComposer:!1,featureMessageActionsRefresh:!1,isIAP1Enabled:!1,shouldUseChannelSections:!1};class workspace_Workspace extends i.PureComponent{constructor(e){super(e),this.state={locale:Object(ju.a)({teamId:this.props.teamId})||x.b.DEFAULT_LOCALE,showingContextBar:!1},this.setLocaleState=this.setLocaleState.bind(this),this.onInviteClick=this.onInviteClick.bind(this),this.maybePullDownMessagePane=this.maybePullDownMessagePane.bind(this),this.onStorageEvent=this.onStorageEvent.bind(this),this.onCreateChannelClick=this.onCreateChannelClick.bind(this)}componentDidMount(){var e=this.props;const t=e.teamId,a=e.primaryView,n=e.clientTheme;Object(ju.b)({teamId:t,fn:this.setLocaleState}),Object(An.a)(a)||(Object(p.dispatchForClientStore)(Object(b.d)(!1)),Object(p.dispatchForClientStore)(Object(b.c)(!1))),"dark"===n&&document.body.classList.add("sk-client-theme--dark"),this.props.loadBanner(),this.beaconClientThemeCounts(),window.addEventListener("storage",this.onStorageEvent)}componentDidUpdate(e){this.props.clientTheme!==e.clientTheme&&("dark"===this.props.clientTheme?document.body.classList.add("sk-client-theme--dark"):document.body.classList.remove("sk-client-theme--dark"),this.beaconClientThemeCounts(),window.skFirstPaintStyle&&(window.skFirstPaintStyle.remove(),window.skFirstPaintStyle=null))}componentWillUnmount(){Object(ju.d)({teamId:this.props.teamId}),window.removeEventListener("storage",this.onStorageEvent)}onStorageEvent(e){e.key===M.a&&Object(p.dispatchForClientStore)(Object(M.g)(e.newValue))}onInviteClick(){this.props.clogger.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"invite_people"}}}}),this.props.openInviteModal()}onCreateChannelClick(){this.props.featureModernizeChannelCreateModal&&this.props.openChannelCreateModal({entryPoint:"channel_sidebar"})}setLocaleState({locale:e}){this.setState(t=>t.locale===e?t:{locale:e})}beaconClientThemeCounts(){var e=this.props;const t=e.clientTheme,a=e.systemThemeSync,n=e.telemeter;n.count(`client_theme_${t}`),n.count(`client_system_theme_sync_${a?"on":"off"}`)}maybePullDownMessagePane(e){this.setState(t=>t.contextBarShowing===e?null:{showingContextBar:e})}render(){const e=Object(p.getStoreInstanceByTeamId)(this.props.teamId),t=d()("p-workspace",{"p-workspace--context-pane-collapsed":!this.props.secondaryView,"p-workspace--context-pane-expanded":this.props.secondaryView,"p-workspace--no-header":this.props.hideChannelHeader,"p-workspace--classic-nav":this.props.featureClassicNav,"p-workspace--classic-nav--frameless":this.props.isWindowFrameless,"p-workspace--primary-search":this.props.usePrimarySearch&&"Vsearch"===this.props.primaryView,"p-workspace--in-creator-onboarding":this.props.inCreatorOnboarding,"p-workspace--context-bar-showing":this.state.showingContextBar,"p-workspace--channel-tabs-header":this.props.useTabsHeaderVariant,"p-workspace--channel-tabs-header-channel":this.props.useTabsHeaderVariant&&Object(An.a)(this.props.primaryView),"p-workspace--iap1":this.props.isIAP1Enabled,"p-workspace--feature_message_actions_refresh":this.props.featureMessageActionsRefresh}),a=this.props.useTabsHeaderVariant&&Object(An.a)(this.props.primaryView)&&o.a.createElement(cz,null),n=!this.props.isIAP1Enabled&&o.a.createElement("div",{className:"p-workspace__top_nav"},o.a.createElement(X_.b,{variant:"short",subtype:"top_nav"},o.a.createElement(aM,s()({renderSonicMenu:this.props.renderSonicMenu,hideChannelHeader:this.props.hideChannelHeader},this.props.channelHeaderProps)))),r=this.props.shouldUseChannelSections,i=this.props.isIAP1Enabled&&o.a.createElement(Pz,null),l=this.props.isIAP1Enabled&&o.a.createElement(Fz,null);return o.a.createElement(u.a,{store:e,key:this.state.locale},o.a.createElement(oz,null,o.a.createElement(hD.a,null),o.a.createElement(X_.a,null,o.a.createElement(uG,{store:e}),o.a.createElement(pG.a,{store:e})),o.a.createElement(uV.a,{commands:ez}),o.a.createElement("div",{className:t,role:"tabpanel"},o.a.createElement("div",{className:"p-workspace__banner"},o.a.createElement(jk,null),o.a.createElement(Lk,null),o.a.createElement(Ak,null)),n,(this.props.isIAP1Enabled||this.props.featureComposeFlow)&&o.a.createElement(HA.a,null),o.a.createElement(X_.b,{subtype:"sidebar"},o.a.createElement("div",{className:"p-workspace__sidebar"},o.a.createElement("div",{className:"p-workspace__channel_sidebar","data-qa":"ws_channel_sidebar"},i,r?o.a.createElement(MD,{onInviteClick:this.onInviteClick,onCreateChannelClick:this.onCreateChannelClick}):o.a.createElement(PD,{onInviteClick:this.onInviteClick,onCreateChannelClick:this.onCreateChannelClick})))),o.a.createElement(X_.b,{id:this.props.primaryView,subtype:"primary_view"},o.a.createElement("div",{className:"p-workspace__primary_view"},a,o.a.createElement("div",{className:"p-workspace__primary_view_contents"},l,Object(An.a)(this.props.primaryView)&&this.props.isAppSpace&&o.a.createElement(X_.b,{id:this.props.primaryView,subtype:"app_home",variant:"short"},o.a.createElement($,null)),"Vall_threads"===this.props.primaryView&&o.a.createElement("div",{className:"p-workspace__primary_view_body"},o.a.createElement($W,{clientTheme:this.props.clientTheme})),this.props.usePrimarySearch&&"Vsearch"===this.props.primaryView&&o.a.createElement("div",{className:"p-workspace__primary_view_body"},o.a.createElement(hG.a,null)),this.props.isPage&&o.a.createElement(fG,null),this.props.tab&&o.a.createElement(oV,null),Object(An.a)(this.props.primaryView)&&(!this.props.isAppSpace||!this.props.isAppSpaceOpen)&&!this.props.tab&&o.a.createElement(aG,{location:eG.MESSAGE_PANE,channelId:this.props.primaryView,role:this.props.isAppSpace?"tabpanel":null},o.a.createElement("div",{className:"p-workspace__primary_view_body"},o.a.createElement(Sq,{serializationKey:"message-pane",showingContextBar:this.state.showingContextBar})),o.a.createElement("footer",{className:"workspace__primary_view_footer"},o.a.createElement($H,{key:`wysiwyg_${this.props.featureWysiwygComposer}`,maybePullDownMessagePane:this.maybePullDownMessagePane}))),this.props.featureAppHomeUTA&&Object(f.a)(this.props.primaryView)&&!this.props.tab&&o.a.createElement("div",{className:"p-workspace__primary_view_body p-workspace__primary_view_body"},o.a.createElement(dV,{appId:this.props.primaryView})),Object(An.a)(this.props.primaryView)&&this.props.isAppSpace&&this.props.isAppSpaceOpen&&!this.props.tab&&o.a.createElement("div",{className:"p-workspace__primary_view_body p-workspace__primary_view_body--with-scroll"},o.a.createElement(rK,null))))),o.a.createElement(X_.b,{id:this.props.secondaryView,subtype:"secondary_view"},o.a.createElement("div",{className:"p-workspace__secondary_view"},o.a.createElement("div",{className:"p-workspace__secondary_view_contents"},o.a.createElement(e1,{id:this.props.secondaryView,params:this.props.flexParams}))))),o.a.createElement(rG,null),o.a.createElement(jq.a,null),o.a.createElement(Ba.a,null),!Object(ue.v)()&&o.a.createElement(Kz,null),o.a.createElement(Yz,null)))}}workspace_Workspace.displayName="Workspace",workspace_Workspace.defaultProps=t1;t.a=Object(u.b)(function(e){const t=Object(_.a)(e),a=hA(e,t);let n,s;const r=Object(TA.e)(e,t);if(r){const a=uk(t);a&&(n=a.isChannelHeaderHidden&&a.isChannelHeaderHidden(e),s=a.headerProps)}const i=Object(v.e)(e),o=O(e);return{teamId:Object(h.b)(e),primaryView:t,secondaryView:Object(v.j)(e),tab:o,isPage:r,hideChannelHeader:n,channelHeaderProps:s,isAppSpace:a,isAppSpaceOpen:Object(w.p)(e),flexParams:i&&i.length?i:Ix.a,featureClassicNav:Object(m.m)(e,"feature_classic_nav"),featureAppHomeUTA:Object(E.b)(e),featureComposeFlow:Object(C.g)(e),usePrimarySearch:Object(N.a)(e),featureModernizeChannelCreateModal:Object(m.m)(e,"feature_modernize_channel_create_modal"),isWindowFrameless:Object(S.l)(e),inCreatorOnboarding:Object(ua.d)(e),clogger:Object(ie.a)({state:e}),telemeter:Object(dI.c)({state:e}),clientTheme:Object(M.c)(e),systemThemeSync:Object(M.d)(e),useTabsHeaderVariant:Object(R.f)(e),featureWysiwygComposer:Object(rt.a)(e),featureMessageActionsRefresh:Object(m.m)(e,"feature_message_actions_refresh"),isIAP1Enabled:Object(bo.c)(e),shouldUseChannelSections:Object(A.a)(e)}},e=>({openInviteModal:(...t)=>e(Object(j.a)(...t)),openChannelCreateModal:(...t)=>e(Object(I.a)(...t)),loadBanner:()=>e(Object(T.i)())}))(workspace_Workspace)},m0k8:function(e,t,a){},m1aP:function(e,t,a){e.exports=a.p+"sidebar_bg_standard-7b3252c.png"},m2U7:function(e,t,a){},m5Fn:function(e,t,a){"use strict";var n=a("UXvI"),s=a("q1tI"),r=a.n(s),i=a("aK/h"),o=a("XHGt"),l=a("JrUZ"),c=a("yHhI"),d=a("Zr7G"),u=a("TSYQ"),p=a.n(u),h=a("tn36"),m=a("GbAX"),b=a("tfx1"),f=a("Go8C"),_=a("BrU6"),g=a("Tc5z"),y=a("cMxN"),O=a("1F8+"),C=a("od5y"),v=a("llxT"),E=a("g5qt"),k=a("nNoG"),S=a("Rjjz"),j=a("ROZo");const I=Object(j.b)("TS.client.channel_header.calculateNoDragRegions");Object(j.b)("TS.client.channel_header.legacySetupDragRegions");var w=a("F8qq"),T=a("MREy"),N=a("HXD8"),A=a("ifKl");const R=Object(j.b)("TS.view.resize_sig.add",A.a,!0),M=Object(j.b)("TS.view.resize_sig.remove",A.a,!0);var P=a("rWF5"),x=a("YDA8"),L=a("NPpR"),F=a("5iqv");const D=new k.b("search"),B=new k.b("jumper"),U=new k.b("keys"),q=(i.default.func.isRequired,i.default.string.isRequired,i.default.string,i.default.func.isRequired,i.default.func.isRequired,i.default.func.isRequired,i.default.func.isRequired,i.default.string.isRequired,i.default.bool.isRequired,i.default.object,i.default.bool,i.default.string,{displayQuery:"",telemeter:d.d,isCustomTitlebarShown:!1,lastOpenMethod:""});class search_Search extends s.PureComponent{constructor(e){super(e),Object(h.a)(this,["onSearchClose","onSearchAutocompleteSuggestionAccept","onSearchAutocompleteSuggestionDelete","onSearchInputBoxEscape","onClickRefreshSearch"]),this.state={appBannerHeightPx:this.getBannerHeight()},this.onSearchInputBoxFocus=Object(n.a)(()=>this.props.searchPrecache(),6e4),this.onResize=Object(n.a)(this.onResize.bind(this),50),R(this.onResize),this.inputRef=r.a.createRef()}componentDidMount(){E.V&&Object(E.cb)()&&Object(E.xc)([])}componentWillUnmount(){E.V&&Object(E.cb)()&&I(),M(this.onResize)}onResize(){this.setState(()=>({appBannerHeightPx:this.getBannerHeight()}))}onSearchAutocompleteSuggestionAccept(){Object(N.e)(this.props.telemeter),this.props.searchAutocompleteSuggestionAccept()}onSearchAutocompleteSuggestionDelete(){this.inputRef.current&&this.inputRef.current.getWrappedInstance().focusTexty()}onSearchInputBoxEscape(){return this.onSearchClose(),!0}onSearchClose(){Object(T.g)()||this.props.close()}onClickRefreshSearch(){this.props.setRequestFromEditableRequest({fetchSuggestions:!0})}getBannerHeight(){const e=window.$&&window.$("#banner");return e&&e.height()||0}clear(){this.props.setSearchInputBoxUserQuery({textyString:""})}renderMode(){switch(this.props.interfaceMode){case b.a.SEARCH_RESULTS:return this.renderSearchResults();case b.a.EDIT:default:return this.renderQueryEdit()}}renderSearchResults(){return r.a.createElement(F.a,{onClickRefreshSearch:this.onClickRefreshSearch})}renderQueryEdit(){return r.a.createElement("div",{className:"c-search-autocomplete","data-qa":"search_autocomplete"},r.a.createElement(x.a,{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept,onDelete:this.onSearchAutocompleteSuggestionDelete}))}renderCmdKHint(){if("key_button"===this.props.lastOpenMethod){const e=Object(P.q)()?U.t("\u2318K"):U.t("Ctrl+K");return r.a.createElement("div",{className:"c-search_modal__tip_wrapper"},r.a.createElement("div",{className:"c-search_modal__tip"},B.rt("<strong>Tip:</strong> Open this faster with {cmd_shortcut}",{cmd_shortcut:e})))}return null}render(){const e=p()("c-popover","c-search_modal",{"c-search_modal--autocomplete":this.props.interfaceMode===b.a.EDIT,"c-search_modal--custom_titlebar":this.props.isCustomTitlebarShown}),t=D.t("Search");return r.a.createElement(y.a,{ariaRole:"dialog",ariaLabel:t,isOpen:this.props.visible,position:"top-left",targetBounds:{top:0,left:0,bottom:0,right:0},onClose:this.onSearchClose,shouldFade:!1,overlayClassName:e,allowanceX:0,allowanceY:0,shouldFocusAfterRender:!0,shouldReturnFocusAfterClose:!1,contentStyle:{marginTop:this.state.appBannerHeightPx}},r.a.createElement("div",{className:"c-search__input_and_close"},r.a.createElement(L.a,{autoFocus:!0,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus,ref:this.inputRef}),r.a.createElement(v.a,{className:"c-search__input_and_close__close",onClick:this.props.close,"aria-label":D.t("Cancel"),"data-qa":"search_input_close"},r.a.createElement(C.b,{type:"times"}))),this.renderMode(),this.renderCmdKHint())}}search_Search.displayName="Search",search_Search.defaultProps=q;const H={searchAutocompleteSuggestionAccept:w.a,searchPrecache:(...e)=>Object(S.s)(...e),setRequestFromEditableRequest:(...e)=>Object(l.D)(...e),setSearchInputBoxUserQuery:(...e)=>Object(_.a)(...e),close:(...e)=>Object(O.a)(...e)};var W=Object(o.b)(e=>({interfaceMode:Object(m.g)(e),displayQuery:Object(f.b)(e),userQuery:Object(f.d)(e),visible:Object(m.v)(e),telemeter:Object(d.c)({state:e}),isCustomTitlebarShown:Object(g.k)(e),lastOpenMethod:Object(m.i)(e)}),H)(search_Search);const G="IMPROVED_SEARCH";i.default.object.isRequired,i.default.object.isRequired,i.default.func.isRequired;class protected_search_ProtectedSearch extends s.PureComponent{constructor(e){super(e),this.state={hasError:!1},this.retryRender=Object(n.a)(this.retryRender.bind(this),100,{leading:!1})}componentDidUpdate(){this.state.hasError&&this.retryRender()}componentDidCatch(e,t){this.props.telemeter.count("search_full_render_fail",1),this.props.logger.error(G,`Error caught by ProtectedSearch ${t.componentStack}`,e,{subtype:"search"}),this.setState(()=>({hasError:!0})),this.props.resetSearchAfterUnknownUIError()}retryRender(){this.setState(()=>({hasError:!1}))}render(){return this.state.hasError?null:r.a.createElement(W,null)}}protected_search_ProtectedSearch.displayName="ProtectedSearch";const K={resetSearchAfterUnknownUIError:(...e)=>Object(l.t)(...e)};var V=Object(o.b)(e=>({logger:Object(c.a)({state:e}),telemeter:Object(d.c)({state:e})}),K)(protected_search_ProtectedSearch);t.a=V},mIgp:function(e,t,a){"use strict";var n=a("oUPN"),s=a("ifKl"),r=a("aK/h"),i=a("q1tI"),o=a.n(i),l=a("uPpK"),c=a("ukTK"),d=a("z0G2"),u=a("tQ8E");r.default.func.isRequired,r.default.any,r.default.string,r.default.arrayOf(r.default.string).isRequired,r.default.number,r.default.number,r.default.number,r.default.bool,r.default.number,r.default.func;const p={className:"",onScroll:s.a,scrollElement:null,defaultRowHeight:200,topOffset:0,height:0,isScrolling:!1,scrollTop:0};class full_page_list_FullLengthList extends u.a{isScrolling(){return this.props.scrolling}getContainerHeight(){return this.getContentHeight()}getScrollTop(){return this.props.scrollTop}setScrollTop(e){this.props.scrollElement.scrollTop=Math.ceil(e)}getClassName(){return this.props.className}onScroll(e){this.relayout(),this.props.onScroll(e,{scrollTop:this.getScrollTop(),scrollHeight:this.getContentHeight(),clientHeight:this.props.height})}render(){var e=this.props;const t=e.width,a=e.height;if(0===t||0===a)return null;const n=this.getClassName(),s=this.renderContents();return o.a.createElement("div",{className:n,style:{width:t,height:"auto"},onScroll:this.onScroll,role:this.props.role},s)}}full_page_list_FullLengthList.displayName="FullLengthList";class full_page_list_FullPageList extends i.PureComponent{constructor(e){super(e),this.heightCache=new c.a({DEFAULT_HEIGHT:this.props.defaultRowHeight}),this.layout=new d.a({heightCache:this.heightCache}),this.list=null,this.setListRef=this.setListRef.bind(this)}getContentHeight(){return this.list.getContentHeight()}getVisibleRange(){return this.list.getVisibleRange()}setListRef(e){this.list=e}invalidateRowHeights(){this.heightCache.invalidate()}scrollToKey(...e){return this.list.scrollToKey(...e)}render(){var e=this.props;const t=e.keys,a=e.className,n=e.rowRenderer,s=e.scrollElement,r=e.topOffset;var i=this.props;const c=i.height,d=i.isScrolling,u=i.scrollTop,p=s||window;return o.a.createElement(l.a,{disableHeight:!0},({width:e})=>o.a.createElement("div",{className:a},o.a.createElement(full_page_list_FullLengthList,{width:e,height:c,keys:t,layout:this.layout,rowRenderer:n,scrolling:d,scrollTop:Math.max(u-r,0),scrollElement:p,ref:this.setListRef,topOffset:r})))}}full_page_list_FullPageList.displayName="FullPageList",full_page_list_FullPageList.defaultProps=p,a.d(t,"a",function(){return full_page_list_FullPageList});t.b=n.a},"mZe+":function(e,t,a){"use strict";var n=a("ifKl"),s=a("zmn3"),r=a("fujP"),i=a("aK/h"),o=a("q1tI"),l=a.n(o),c=a("XHGt"),d=a("TSYQ"),u=a.n(d),p=a("uPpK"),h=a("8Duq"),m=a("XfeM"),b=a("dhvi"),f=a("Vfgr"),_=a("YVZO");i.default.string.isRequired,i.default.string.isRequired,i.default.string,i.default.string,i.default.func.isRequired;const g={threadTs:void 0,initialFileTitle:void 0};class rename_pending_file_dialog_RenamePendingFileDialog extends o.PureComponent{constructor(e){super(e),this.handleRename=this.handleRename.bind(this)}handleRename(e){var t=this.props;const a=t.fileId,n=t.channelId,s=t.threadTs;this.props.renamePendingFile({channelId:n,threadTs:s,fileId:a,title:Object(f.a)(e)})}render(){const e=this.props.initialFileTitle;return l.a.createElement(_.a,{initialFileTitle:e,handleRename:this.handleRename})}}rename_pending_file_dialog_RenamePendingFileDialog.displayName="RenamePendingFileDialog",rename_pending_file_dialog_RenamePendingFileDialog.defaultProps=g;const y={renamePendingFile:(...e)=>Object(h.j)(...e)};var O=Object(c.b)(null,y)(rename_pending_file_dialog_RenamePendingFileDialog),C=a("yPgC");const v=Object(m.b)("Opens the rename file dialog",(e,t,a)=>{e(Object(b.e)({element:l.a.createElement(O,a),isStackable:!0}))});v.meta={name:"openRenamePendingFileDialog",key:"actionsOpenRenamePendingFileDialogOpenRenamePendingFileDialog",description:"Opens the rename file dialog"},v.propTypes={file:C.a.File().isRequired,channelId:i.default.string.isRequired,threadTs:i.default.string};var E=v,k=a("kRTx"),S=a("fQu5"),j=a("P9LH"),I=a("nNoG"),w=a("aLpA"),T=a("B+Mk"),N=a("QbLZ"),A=a.n(N),R=a("8QLk"),M=a("UXvI"),P=a("rWF5"),x=a("lfjV"),L=a("od5y");i.default.oneOf(["left","right"]).isRequired,i.default.bool,i.default.func;const F={isShowing:!0,onClick:n.a},D=({arrowDirection:e,onClick:t,isShowing:a})=>{const n=u()("p-gallery_scroller__arrow",`p-gallery_scroller__${e}_arrow`,{"p-gallery_scroller__arrow_hidden":!a});return l.a.createElement("div",{className:n},l.a.createElement(L.b,{type:"circle-fill",className:"p-gallery_scroller__arrow_fill",size:"inherit"}),l.a.createElement(L.b,{type:`arrow-large-${e}`,className:"p-gallery_scroller__arrow_icon",onClick:a=>t(a,e)}))};D.displayName="GalleryScrollerArrow",D.defaultProps=F;var B=D;a("sUzI");i.default.node.isRequired,i.default.number.isRequired,i.default.number;const U={right:"right",left:"left"},q=160,H=50,W=50;class gallery_scroller_GalleryScroller extends o.Component{constructor(e){super(e),this.onArrowClick=this.onArrowClick.bind(this),this.onScroll=Object(M.a)(this.onScroll,H).bind(this),this.onContentMutation=this.onContentMutation.bind(this),this.setWrapperRef=this.setWrapperRef.bind(this),this.setContentRef=this.setContentRef.bind(this),this.wrapper=void 0,this.content=void 0,this.mutationObserver=new MutationObserver(this.onContentMutation),this.state={scrollLeft:0,scrollWidth:void 0}}componentDidMount(){this.content&&this.mutationObserver.observe(this.content,{childList:!0,subtree:!0})}componentWillUnmount(){this.mutationObserver.disconnect()}onArrowClick(e,t){e.preventDefault();const a=this.props.pageSize,n=this.state.scrollLeft+(t===U.right?a:-a),s=this.getMinScroll(),r=this.getMaxScroll();let i=Object(R.a)(n,s,r);r-i<W?i=r:i-s<W&&(i=s),this.scrollWithAnimation(i)}onScroll(e){if(!e)return;const t=e.scrollLeft;this.setState(()=>({scrollLeft:t}))}onContentMutation(){const e=this.state.scrollWidth,t=this.content&&this.content.scrollWidth;e!==t&&this.setState(e=>A()({},e,{scrollWidth:t}))}getMinScroll(){return 0}getMaxScroll(){if(!this.content)return 0;const e=this.props.width;return this.state.scrollWidth-e}setWrapperRef(e){if(!e)return;this.wrapper=e;const t=this.wrapper.scrollLeft;this.setState(e=>A()({},e,{scrollLeft:t}))}setContentRef(e){if(!e)return;this.content=e;const t=this.content.scrollWidth;this.setState(e=>A()({},e,{scrollWidth:t}))}shouldShowArrow({arrowDirection:e}){const t=this.props.width;var a=this.state;const n=a.scrollLeft,s=a.scrollWidth,r=this.getMinScroll(),i=this.getMaxScroll();if(e===U.right){const e=s>t;return n<i&&e}return n>r}scrollWithAnimation(e){let t=0;this.trackAnimation&&this.trackAnimation.cancel(),this.trackAnimation=Object(x.a)({fromValue:this.wrapper.scrollLeft,toValue:e,duration:q,delta:!0,onTick:({value:e,nextTick:a})=>{const n=this.wrapper.scrollLeft+e+t,s=Math.round(n);t=n-s,this.wrapper.scrollLeft=s,a()}})}renderArrow({arrowDirection:e}){const t=this.shouldShowArrow({arrowDirection:e});return l.a.createElement(B,{arrowDirection:e,onClick:this.onArrowClick,isShowing:t})}render(){var e=this.props;const t=e.width,a=e.children,n=u()("p-galler_scroller__wrapper",{"p-galler_scroller__wrapper--can_scroll":Object(P.k)()});return l.a.createElement("div",{className:"p-gallery_scroller",style:{width:t}},l.a.createElement("div",{className:n,ref:this.setWrapperRef,onScroll:e=>this.onScroll(e&&e.target)},l.a.createElement("div",{className:"p-gallery_scroller__content",ref:this.setContentRef},a)),this.renderArrow({arrowDirection:U.left}),this.renderArrow({arrowDirection:U.right}))}}gallery_scroller_GalleryScroller.displayName="GalleryScroller",gallery_scroller_GalleryScroller.defaultProps={pageSize:100};var G=gallery_scroller_GalleryScroller,K=a("anFW"),V=a("XLFM"),z=a("RfGh"),$=a("9gIX"),Y=a("wOaD");a("j4JU");const Q=new I.b("multi_file_upload");i.default.object.isRequired,i.default.bool,i.default.string,i.default.func;class pending_file_PendingFile extends o.PureComponent{renderEditFileButton(){const e=this.props.onEditFile;return e?l.a.createElement(V.c,{className:"p-pending_file__edit_btn","aria-label":Q.t("Edit file title"),onClick:e},Q.t("Edit")):null}render(){var e=this.props;const t=e.file,a=e.className,n=e.isCompact,s=u()("p-pending_file",a,{"p-pending_file--compact":n}),r=n?l.a.createElement(Y.a,{file:t,isCompact:!0}):l.a.createElement($.a,{file:t,showThumbnail:!1},this.renderEditFileButton());return l.a.createElement(z.a,{file:t,className:s,showActions:!1},r)}}pending_file_PendingFile.displayName="PendingFile",pending_file_PendingFile.defaultProps={isCompact:!1,className:null,onEditFile:null};var X=pending_file_PendingFile,J=a("b98e"),Z=a("18Pa");a("lKsX");const ee=new I.b("multi_file_upload"),te=(i.default.string,i.default.string,i.default.string,i.default.string,i.default.func,i.default.func,{fileId:void 0,channelId:void 0,threadTs:void 0,title:void 0,closeModal:n.a,openRenamePendingFileDialog:n.a});class pending_file_viewer_header_Header extends o.PureComponent{constructor(e){super(e),this.closeModal=this.closeModal.bind(this),this.renameFile=this.renameFile.bind(this)}closeModal(){this.props.closeModal()}renameFile(){var e=this.props;const t=e.fileId,a=e.channelId,n=e.threadTs,s=e.title;this.props.openRenamePendingFileDialog({fileId:t,channelId:a,threadTs:n,initialFileTitle:s})}render(){const e=this.props.title;return l.a.createElement("div",{className:"p-file_viewer__header"},l.a.createElement("div",{className:"p-file_viewer__header__meta"},l.a.createElement("div",{className:"p-file_viewer__header__meta__stack"},l.a.createElement("div",{className:"bold"},e),l.a.createElement(V.c,{className:"p-file_viewer__header__meta__minor p-file_viewer__header__edit_btn","aria-label":ee.t("Edit file title"),onClick:this.renameFile},ee.t("Edit")))),l.a.createElement("div",{className:"p-file_viewer__header__actions"},l.a.createElement(Z.a,{className:"p-file_viewer__header__button",icon:"times",backgroundStyle:null,onClick:this.closeModal})))}}pending_file_viewer_header_Header.displayName="Header",pending_file_viewer_header_Header.defaultProps=te;var ae=Object(c.b)(null,e=>({closeModal:()=>e(Object(b.a)()),openRenamePendingFileDialog:t=>e(E(t))}))(pending_file_viewer_header_Header),ne=a("N36p");i.default.string.isRequired,i.default.string.isRequired,i.default.string,i.default.string,i.default.shape({src:i.default.string,width:i.default.number,height:i.default.number,orientation:i.default.number});const se={threadTs:void 0,title:void 0,image:void 0};class pending_file_viewer_FileViewer extends o.Component{render(){var e=this.props;const t=e.image,a=e.title,n=e.fileId,s=e.channelId,r=e.threadTs;return l.a.createElement(J.a,{contentLabel:a},l.a.createElement(ae,{title:a,fileId:n,channelId:s,threadTs:r}),l.a.createElement(ne.a,{title:a,image:t}))}}pending_file_viewer_FileViewer.displayName="FileViewer",pending_file_viewer_FileViewer.defaultProps=se;var re=Object(c.b)((e,t)=>{const a=t.fileId,n=t.channelId,s=t.threadTs,r=t.image;if(!a||!n||!r)return null;const i=Object(h.d)(e,{fileId:a,channelId:n,threadTs:s});return{fileId:a,channelId:n,threadTs:s,title:i.title||i.name,image:r}})(pending_file_viewer_FileViewer);const ie=Object(m.b)("Opens the PendingFileViewer",(e,t,a)=>{e(Object(b.e)({element:l.a.createElement(re,a),isStackable:!0}))});ie.meta={name:"openPendingFileViewer",key:"actionsOpenPendingFileViewerOpenPendingFileViewer",description:"Opens the PendingFileViewer"},ie.propTypes=A()({},re.propTypes);var oe=ie,le=a("b0Xh");var ce=function(e){return new Promise((t,a)=>{if(!(e&&e instanceof File))return void a(new Error("Invalid file argument provided to getPendingFileData"));if(!window.FileReader)return void a(new Error("Cannot read file data, browser does not support FileReader"));if(e.dataUrl)return void t({dataUrl:e.dataUrl,orientation:e.orientation,width:e.width,height:e.height});const s=new FileReader;s.onload=(a=>{const n=a.target.result,s=function(e){const t=e.replace(/^data:([^;]+);base64,/gim,""),a=atob(t),n=a.length,s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=a.charCodeAt(r);return s.buffer}(n),r=Object(le.readFromBinaryFile)(s),i=r&&"number"==typeof r.Orientation?r.Orientation:null,o=new Image;o.onload=(()=>{const a=o.width,s=o.height;e.dataUrl=n,e.orientation=i,e.width=a,e.height=s,t({dataUrl:n,orientation:i,width:a,height:s})}),o.src=n}),s.onloadstart=(e=>{Object(n.a)(e)}),s.onerror=(e=>{s.abort(),a(e)}),s.readAsDataURL(e)})},de=a("cD5Y");a("TepT");const ue=new I.b("multi_file_upload"),pe=(i.default.object.isRequired,i.default.string,i.default.string,i.default.bool,i.default.string,i.default.func,{channelId:void 0,threadTs:void 0,useThumbnail:!1,className:null,openPendingFileViewer:n.a});class pending_image_file_PendingImageFile extends o.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.state={dataUrl:void 0,orientation:void 0,height:void 0,width:void 0,isLoading:!0}}componentDidMount(){const e=this.props.file;ce(e).then(({dataUrl:e,orientation:t,height:a,width:n}={})=>{this.setState(()=>({dataUrl:e,orientation:t,height:a,width:n})),requestAnimationFrame(()=>{this.setState(()=>({isLoading:!1}))})}).catch(e=>{Object(n.a)(e)})}onClick(e){e.stopPropagation();var t=this.props;const a=t.file,n=t.channelId,s=t.threadTs;var r=this.state;const i=r.dataUrl,o=r.width,l=r.height,c=r.orientation;this.props.openPendingFileViewer({fileId:a.id,channelId:n,threadTs:s,title:a.title||a.name,image:{src:i,width:o,height:l,orientation:c}})}renderImage(){const e=this.props.file,t=this.state.dataUrl;return l.a.createElement("img",{className:"p-pending_image_file__img",src:t,alt:Object(j.k)(e)})}renderImageThumbnail(){const e=this.props.file;const t=(this.state||{}).dataUrl,a=t?{backgroundImage:`url('${t}')`}:null;return l.a.createElement("span",{className:"p-multi_file_upload__image_file__thumbnail p-pending_image_file__thumbnail",style:a,"aria-label":Object(j.k)(e)})}render(){var e=this.props;const t=e.file,a=e.useThumbnail,n=e.className;var s=this.state;const r=s.isLoading,i=s.orientation,o=s.height,c=s.width,d=a?1:o/c;if(!Object(j.N)(t))return null;const p=u()("p-multi_file_upload__image_file p-pending_image_file",n,{"p-pending_image_file__thumbnail_container":a,"p-pending_image_file__loading":r});return l.a.createElement(V.c,{className:"p-pending_image_file__btn",onClick:this.onClick,"aria-label":ue.t("Preview image"),style:Object(j.u)({orientation:i,imageDimensionRatio:d})},l.a.createElement("div",{className:p},a?this.renderImageThumbnail():this.renderImage(),l.a.createElement(de.a,{size:"large",className:"p-pending_image_file__loading_spinner"})))}}pending_image_file_PendingImageFile.displayName="PendingImageFile",pending_image_file_PendingImageFile.defaultProps=pe;var he=Object(c.b)(null,e=>({openPendingFileViewer:(...t)=>e(oe(...t))}))(pending_image_file_PendingImageFile);a("P5pr");const me=new I.b("multi_file_upload"),be=(i.default.object.isRequired,i.default.string,i.default.string,i.default.string,i.default.func,{channelId:void 0,threadTs:void 0,className:null,openPendingFileViewer:n.a});class draft_image_file_DraftImageFile extends o.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){e.stopPropagation();var t=this.props;const a=t.file,n=t.channelId,s=t.threadTs;this.props.openPendingFileViewer({fileId:a.id,channelId:n,threadTs:s,title:Object(j.k)(a),image:{src:a.thumb_360,width:a.thumb_360_w,height:a.thumb_360_h}})}renderImageThumbnail(){const e=this.props.file,t=e.thumb_360,a=t?{backgroundImage:`url('${t}')`}:null;return l.a.createElement("span",{className:"p-multi_file_upload__image_file__thumbnail p-draft_image_file__thumbnail",style:a,"aria-label":Object(j.k)(e)})}render(){const e=this.props.className,t=u()("p-multi_file_upload__image_file p-draft_image_file",e);return l.a.createElement(V.c,{className:"p-draft_image_file__btn",onClick:this.onClick,"aria-label":me.t("Preview image")},l.a.createElement("div",{className:t},this.renderImageThumbnail()))}}draft_image_file_DraftImageFile.displayName="DraftImageFile",draft_image_file_DraftImageFile.defaultProps=be;var fe=Object(c.b)(null,e=>({openPendingFileViewer:(...t)=>e(oe(...t))}))(draft_image_file_DraftImageFile);const _e=new I.b("multi_file_upload"),ge=(i.default.string.isRequired,i.default.string.isRequired,i.default.string,i.default.func,i.default.bool,{threadTs:null,removePendingFile:n.a,featureMultiFileUpload:!0});class remove_file_button_RemoveFileButton extends o.PureComponent{constructor(e){super(e),this.onRemoveFileClick=this.onRemoveFileClick.bind(this)}onRemoveFileClick(e){e.stopPropagation();var t=this.props;const a=t.fileId,n=t.channelId,s=t.threadTs;a&&n&&this.props.removePendingFile({channelId:n,threadTs:s,fileId:a})}render(){return this.props.featureMultiFileUpload?l.a.createElement(V.c,{className:"p-multi_file_upload__remove_btn",onClick:this.onRemoveFileClick,"aria-label":_e.t("Remove file")},l.a.createElement(L.b,{type:"circle-fill",className:"p-multi_file_upload__remove_btn_circle"}),l.a.createElement(L.b,{type:"times-circle",className:"p-multi_file_upload__remove_btn_times"})):null}}remove_file_button_RemoveFileButton.displayName="RemoveFileButton",remove_file_button_RemoveFileButton.defaultProps=ge;var ye=Object(c.b)(null,{removePendingFile:h.i})(remove_file_button_RemoveFileButton),Oe=a("sk9p"),Ce=a.n(Oe),ve=a("NFsq"),Ee=a("RAhH"),ke=a("g+Y+");const Se=new I.b("drafts"),je=k.a.ERROR,Ie=k.a.IDLE,we=k.a.PROCESSING,Te=k.a.UPLOADING,Ne=(i.default.bool,i.default.func,i.default.oneOf(Object.values(k.a)),{featureComposeFlowFiles:!1,onClick:n.a,status:Ie}),Ae=({featureComposeFlowFiles:e,onClick:t,status:a})=>{var n=Object(o.useState)(!1),s=Ce()(n,2);const r=s[0],i=s[1];if(!e)return null;const c=l.a.createElement(L.b,{type:"close-filled",className:"p-multi_file_upload__file_status_icon--remove"});let d;d=r?c:Object(ve.a)([Ie,Te,we],a)?l.a.createElement(de.a,{size:"medium"}):a===je?l.a.createElement(L.b,{type:"exclamation-circle",className:"p-multi_file_upload__file_status_icon--error"}):c;const p=u()("p-multi_file_upload__file_status_btn",{"p-multi_file_upload__file_status_btn--remove":d===c});return l.a.createElement(Ee.c,{position:"top",tip:Se.t("Remove file")},l.a.createElement(V.c,{className:p,onClick:t,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},d))};Ae.displayName="MultiFileUploadButton",Ae.defaultProps=Ne;var Re=Object(c.b)(e=>({featureComposeFlowFiles:Object(ke.h)(e)}))(Ae);a("pmpI");a.d(t,"a",function(){return multi_file_upload_MultiFileUpload});const Me=new I.b("multi_file_upload"),Pe=(i.default.arrayOf(k.b),i.default.string,i.default.string,i.default.bool,i.default.bool,i.default.func,i.default.func,i.default.func,{files:[],channelId:null,threadTs:null,isCompact:!1,isEagerUpload:!1,onFilesSelected:n.a,onRemoveFile:n.a,openRenamePendingFileDialog:n.a}),xe=184,Le=26214400;class multi_file_upload_MultiFileUpload extends o.Component{constructor(e){super(e),this.hiddenFileInputRef=l.a.createRef(),this.onAddFileClick=this.onAddFileClick.bind(this),this.onPendingFileClick=this.onPendingFileClick.bind(this),this.onFilesSelectedHandler=this.onFilesSelectedHandler.bind(this)}onAddFileClick(){this.hiddenFileInputRef&&this.hiddenFileInputRef.current&&this.hiddenFileInputRef.current.click()}onPendingFileClick(e,t){e.stopPropagation();var a=this.props;const n=a.channelId,s=a.threadTs,r=t.title||t.name;this.props.openRenamePendingFileDialog({fileId:t.id,channelId:n,threadTs:s,initialFileTitle:r})}onFilesSelectedHandler(e){Object(r.a)(e)||this.props.onFilesSelected(e)}getComponentSize(){var e=this.props;const t=e.files;return e.isCompact?"small":t&&1===t.length&&this.shouldRenderPendingImage(t[0].file)?"large":"medium"}shouldRenderPendingImage(e){return Object(j.N)(e)&&e.size<Le}shouldRenderDraftImage(e){return!!Object(j.e)(e)}maybeRenderImageFile(e){return this.shouldRenderPendingImage(e)?this.renderPendingImageFile(e):this.shouldRenderDraftImage(e)?this.renderDraftImageFile(e):this.renderPendingFile(e)}renderDraftImageFile(e){var t=this.props;const a=t.channelId,n=t.threadTs;return l.a.createElement(fe,{file:e,channelId:a,threadTs:n})}renderRemoveFileButton(e){var t=this.props;const a=t.files,n=t.channelId,s=t.threadTs;return a&&a.length<2?null:l.a.createElement(ye,{fileId:e,channelId:n,threadTs:s})}renderPendingImageFile(e){var t=this.props;const a=t.files,n=t.channelId,s=t.threadTs,r=t.isCompact,i=a&&a.length>1||r;return l.a.createElement(he,{file:e,channelId:n,threadTs:s,useThumbnail:i})}renderPendingFile(e){const t=this.props.isCompact;return l.a.createElement(X,{file:e,isCompact:t,onEditFile:t=>this.onPendingFileClick(t,e)})}renderAddFileButton(){const e=this.props.files,t=e&&e.length||0,a=t<w.z,n=t>1,s=Me.t("Add file"),r=Me.t("({selectedFileCount} of {maxFileUploadCount} selected)",{selectedFileCount:t,maxFileUploadCount:w.z});return l.a.createElement("div",{className:"p-multi_file_upload__add_file_btn_container"},a?l.a.createElement(V.c,{className:"p-multi_file_upload__add_file_btn","aria-label":s,onClick:this.onAddFileClick},s,l.a.createElement(K.a,{ref:this.hiddenFileInputRef,onFilesSelectedHandler:this.onFilesSelectedHandler})):null,n?l.a.createElement("span",{className:"p-multi_file_upload__file_count"},r):null)}renderFileGallery(){var e=this.props;const t=e.files,a=e.isEagerUpload,n=e.onRemoveFile;return l.a.createElement("div",{className:"p-multi_file_upload__file_gallery"},t.map(e=>{const t=Object(T.a)(e),s=Object(T.b)(e),r=Object(T.d)(e),i=Object(T.c)(e);return l.a.createElement("div",{className:"p-multi_file_upload__file_container",key:s||i},this.maybeRenderImageFile(t),!a&&this.renderRemoveFileButton(s),a&&l.a.createElement(Re,{onClick:()=>n({pendingFileId:s,persistedFileId:i}),status:r}))}))}renderFileGalleryScroller(){const e=1.25*xe;return l.a.createElement(p.a,{disableHeight:!0},({width:t})=>l.a.createElement(G,{width:t,pageSize:e},this.renderFileGallery()))}render(){if(!this.props.files)return null;const e=this.getComponentSize(),t=u()("p-multi_file_upload__container",`p-multi_file_upload__container--${e}`);return l.a.createElement("div",{className:t},this.renderFileGalleryScroller(),this.renderAddFileButton())}}multi_file_upload_MultiFileUpload.displayName="MultiFileUpload",multi_file_upload_MultiFileUpload.defaultProps=Pe;t.b=Object(c.b)(function(e,t){const a=t.channelId,n=t.threadTs,r=Object(h.f)(e,{channelId:a,threadTs:n});return{files:Object(s.a)(r,e=>Object(S.b)(e))}},{openRenamePendingFileDialog:E})(multi_file_upload_MultiFileUpload)},maFm:function(e,t,a){e.exports=a.p+"guests-85830c1.png"},mqzt:function(e,t,a){"use strict";a.d(t,"a",function(){return c}),a.d(t,"d",function(){return d}),a.d(t,"c",function(){return u}),a.d(t,"b",function(){return p});var n=a("wd/R"),s=a.n(n),r=a("HBMi"),i=a("vg2h"),o=a("A/mR");const l=new(a("nNoG").b)("do_not_disturb"),c=(e,{currentTime:t=s()().unix()}={})=>{const a=Object(r.a)(t),n=Object(r.a)(e);return Math.ceil(Object(i.a)(n,a))},d=({time:e="09:00"}={})=>{const t=s()().add(1,"days").format("YYYY-MM-DD"),a=s()(`${t} ${e}`).unix();return c(a)},u=({time:e="09:00"}={})=>{const t=s()().add(1,"week").startOf("isoWeek").format("YYYY-MM-DD"),a=s()(`${t} ${e}`).unix();return c(a)},p=(e,{do24hrTime:t=!1,today:a=s()().format("YYYY-MM-DD"),tomorrow:n=s()().add(1,"day").format("YYYY-MM-DD")}={})=>{if(!e)return"";const r=Object(o.p)(e,{do24hrTime:t}),i=Object(o.m)(e,{omitTime:!0});return i===a?l.t("Notifications paused until {time}",{time:r}):i===n?l.t("Notifications paused until tomorrow at {time}",{time:r}):l.t("Notifications paused until {expires}",{expires:Object(o.d)(e,"{status_expiration}",{do24hrTime:t})})}},nTMe:function(e,t,a){},ndUn:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("jo6Y"),i=a.n(r),o=a("q1tI"),l=a.n(o),c=a("XHGt"),d=a("aK/h"),u=a("1hAG"),p=a("hXpn"),h=a("kd6D"),m=a("kFoU");d.default.string,d.default.string.isRequired,d.default.bool,d.default.bool,d.default.node,d.default.object.isRequired;const b={className:void 0,isActive:!1,isDisabled:!1,secondaryContent:void 0};function f(e){let t,a=e.className,n=e.id,r=e.isActive,o=e.isDisabled,c=e.secondaryContent,d=e.team,u=i()(e,["className","id","isActive","isDisabled","secondaryContent","team"]);return r?t=o?h.c.highlightDim:h.c.highlightDark:o&&(t=h.c.dim),l.a.createElement(p.a,{className:a,size:"small",style:t,primaryContent:l.a.createElement(m.a,s()({},u,{team:d,invert:t===h.c.highlightDark})),secondaryContent:c,"data-team-id":n})}f.displayName="SmallTeamListEntity",f.defaultProps=b;t.a=Object(c.b)((e,t)=>{const a=t.team||Object(u.i)(e,t.id);return{team:a,id:a.id}})(f)},nfA0:function(e,t,a){},nr7U:function(e,t,a){e.exports=a.p+"sidebar_bg_plus@2x-590de7a.png"},o2sZ:function(e,t,a){},"oE+f":function(e,t,a){},"oFS/":function(e,t,a){},oHBb:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("Cfkr");t.a=s.a.createContext(new r.a)},oP4J:function(e,t,a){},oV5z:function(e,t,a){},oq3d:function(e,t,a){},oqAd:function(e,t,a){"use strict";var n=a("lE2N"),s=a("aK/h"),r=a("q1tI"),i=a.n(r),o=a("XHGt"),l=a("TSYQ"),c=a.n(l),d=a("QB+X"),u=a("oRxB"),p=a("t85p"),h=a("quKg"),m=a("Ro9a"),b=a("K7CU"),f=a("nNoG"),_=a("PM8X"),g=a("Q+UV"),y=a("hOQf"),O=a("fYfO"),C=a("Lev8"),v=a("Wofk"),E=a("ifKl"),k=a("XLFM"),S=a("od5y"),j=a("RAhH"),I=a("wMtF");const w=new f.b("emoji"),T=(s.default.func.isRequired,s.default.func,s.default.bool,s.default.string,{onEmojiSelected:E.a,featureSonicEmoji:!1,clientTheme:"light"});function N({onClick:e,onEmojiSelected:t,featureSonicEmoji:a,clientTheme:n}){const s=i.a.createElement(j.c,{tip:w.t("Add reaction..."),delay:j.a},i.a.createElement(k.c,{className:c()("c-reaction_add",`c-reaction_add--${n}`),onClick:e,"aria-label":w.t("Add reaction..."),"data-qa":"add_reaction_button"},i.a.createElement("div",{className:"c-reaction_add__container"},i.a.createElement(S.b,{type:"small-reaction-bg",className:"c-reaction_add__icon c-reaction_add__icon--bg","aria-hidden":!0}),i.a.createElement(S.b,{type:"small-reaction",className:"c-reaction_add__icon c-reaction_add__icon--fg","aria-hidden":!0}))));return a?i.a.createElement(I.a,{onEmojiSelected:t,showHandyReactions:!0},s):s}N.defaultProps=T;var A=a("kOzZ"),R=a("KdfD"),M=a("cnLP"),P=a("qkTT"),x=a("FghR");const L=new f.b("messages"),F={channelId:s.default.string,anchorElement:s.default.instanceOf(Element),closeCoachmark:s.default.func,featureReactjiEducationTip:s.default.bool,clogger:s.default.object.isRequired},D={channelId:void 0,anchorElement:null,closeCoachmark:E.a,featureReactjiEducationTip:!1},B="EDUCATION_IN_CONTEXT_MESSAGE_PANE";class reaction_education_coachmark_ReactionEducationCoachmark extends x.a{constructor(e){super(e),this.onCloseCoachmark=this.onCloseCoachmark.bind(this),this.onButtonClick=this.onButtonClick.bind(this)}onCloseCoachmark(){var e=this.props;const t=e.clogger,a=e.closeCoachmark;t.track(B,{contexts:{ui_context:{step:"whats_this_modal",step_variant:"reaction",action:"click",ui_properties:{element_type:"x"}}}}),a()}onButtonClick(){var e=this.props;const t=e.clogger,a=e.closeCoachmark;t.track(B,{contexts:{ui_context:{step:"whats_this_modal",step_variant:"reaction",action:"click",ui_properties:{element_type:"button"}}}}),a()}render(){var e=this.props;const t=e.featureReactjiEducationTip,a=e.anchorElement,n=e.isOpen;if(!t)return null;const s=L.rt("Say it faster with emoji <sparkles></sparkles>",null,({tag:e,key:t})=>"sparkles"===e?i.a.createElement(P.b,{key:t,text:":sparkles:",emojiSize:P.a.MEDIUM}):null),r=L.t("Emoji reactions are a quick way to respond in Slack without having to send a message.");return i.a.createElement("div",{className:"position_relative"},i.a.createElement(x.a,{anchorElement:a,isOpen:n,closeCoachmark:this.onCloseCoachmark,onClickPrimaryButton:this.onButtonClick,onClickSecondaryButton:this.sendMessage,primaryCallToActionText:L.t("Got It"),arrowPosition:50,offsetX:-140,offsetY:-10,orientation:"top"},i.a.createElement("h3",{className:"margin_bottom_50"},s),i.a.createElement("div",{className:"hidden"},L.t("Try It")),i.a.createElement("p",null,r)))}}reaction_education_coachmark_ReactionEducationCoachmark.displayName="ReactionEducationCoachmark",reaction_education_coachmark_ReactionEducationCoachmark.propTypes=F,reaction_education_coachmark_ReactionEducationCoachmark.defaultProps=D;var U=Object(o.b)(e=>({featureReactjiEducationTip:Object(p.m)(e,"feature_reactji_education_tip"),clogger:Object(A.a)({state:e})}))(reaction_education_coachmark_ReactionEducationCoachmark);a("7HtE");const q=new f.b("reactions"),H=(s.default.bool,s.default.func.isRequired,s.default.func.isRequired,s.default.object.isRequired,{UNOPENED:0,OPEN:1,CLOSED:2}),W="EDUCATION_IN_CONTEXT_MESSAGE_PANE";class reaction_education_tip_ReactionEducationTip extends r.Component{constructor(e){super(e),this.onHelperNoteClick=this.onHelperNoteClick.bind(this),this.onEducationCoachmarkDismiss=this.onEducationCoachmarkDismiss.bind(this),this.state={coachmarkState:H.UNOPENED}}componentDidMount(){this.props.setInProductCoachmarkAsSeen({notification:"reactji_awareness_coachmark",step:"tooltip"})}onHelperNoteClick(){const e=this.props.clogger;this.state.coachmarkState===H.UNOPENED&&(this.setState(()=>({coachmarkState:H.OPEN})),this.props.setInProductCoachmarkAsSeen({notification:"reactji_awareness_coachmark",step:"dialog"}),e.track(W,{contexts:{ui_context:{step:"whats_this_pill",action:"click",step_variant:"reaction"}}}))}onEducationCoachmarkDismiss(){this.setState(()=>({coachmarkState:H.CLOSED})),this.props.setInProductCoachmark(null)}render(){const e=this.props.featureReactjiEducationTip,t=this.state.coachmarkState;if(!e)return null;if(t!==H.CLOSED){const e=i.a.createElement(U,{isOpen:t===H.OPEN,closeCoachmark:this.onEducationCoachmarkDismiss});return i.a.createElement(M.b,{coachmarkElement:e,orientation:"top",key:"reaction_education_coachmark_anchor",style:{width:"100%",display:"inline"}},i.a.createElement(k.c,{className:"c-reaction_add__note",onClick:this.onHelperNoteClick,"data-qa":"reaction_education_note"},i.a.createElement(S.b,{type:"arrow-left","aria-hidden":!0}),q.t("What\u2019s this?",{fallbackHash:"9082edb7e9cfc2988efd8e1a6e0a6f5c0487ee24",fallbackHashNs:"messages"})))}return null}}reaction_education_tip_ReactionEducationTip.displayName="ReactionEducationTip",reaction_education_tip_ReactionEducationTip.defaultProps={featureReactjiEducationTip:!1};const G={setInProductCoachmark:R.g,setInProductCoachmarkAsSeen:R.h};var K=Object(o.b)(e=>({featureReactjiEducationTip:Object(p.m)(e,"feature_reactji_education_tip"),clogger:Object(A.a)({state:e})}),G)(reaction_education_tip_ReactionEducationTip);const V=new f.b("reactions");s.default.arrayOf(s.default.shape(v.b)),s.default.string,s.default.arrayOf(s.default.shape({name:s.default.string.isRequired,tooltip:s.default.string})),s.default.string,s.default.string,s.default.string,s.default.func.isRequired,s.default.bool,s.default.bool,s.default.bool,s.default.string,s.default.bool,s.default.bool;class reaction_bar_ReactionBar extends i.a.PureComponent{constructor(){super(),this.onAddReaction=this.onAddReaction.bind(this),this.onReactionClick=this.onReactionClick.bind(this),this.onReactionEmojiPickerSelected=this.onReactionEmojiPickerSelected.bind(this)}onAddReaction(e){Object(_.a)({e:e,rxn_key:this.props.reactionKey})}onReactionClick(e,t){const a=this.props.reactionKey;this.props.changeReactionFromUserAction({key:a,name:e,adding:!t})}onReactionEmojiPickerSelected(e,t){this.onReactionClick(t)}getReactions(){var e=this.props;const t=e.canReact,a=e.cannedReactions,s=e.featureEmailWorkflow,r=e.reactions;if(!s||!t)return r;const i=(a||[]).map(({tooltip:e,name:t})=>({count:0,users:[],tooltip:e||(s?V.t("Click to react with {emoji}",{emoji:`:${t}:`}):void 0),name:t}));return Object(n.a)((r||[]).concat(i),"name")}render(){var e=this.props;const t=e.reactionKey,a=e.currentUser,n=e.emojiMode,s=e.featureSonicEmoji,r=e.canReact,o=e.isLatestReactionInChannel,l=e.isInReactjiAwarenessTreatmentGroup,d=e.clientTheme,u=this.getReactions();if(!u||0===u.length)return null;let p=u.map(({count:e,name:s,users:o,url:l,tooltip:c})=>i.a.createElement(v.a,{name:s,count:e,users:o,url:l,currentUser:a,key:s,reactionKey:t,onClick:this.onReactionClick,emojiMode:n,canReact:r,clientTheme:d,tooltip:c}));r&&(p=p.concat(i.a.createElement(N,{onClick:this.onAddReaction,onEmojiSelected:this.onReactionEmojiPickerSelected,key:"reaction-add-button",featureSonicEmoji:s,clientTheme:d}))),r&&o&&l&&(p=p.concat(i.a.createElement(K,{key:"reaction-education-tip"})));const h=c()(this.props.className,"c-reaction_bar"),m=V.t("Reactions",{note:"Screenreader: Label for blind users"});return i.a.createElement("div",{className:h,role:"group","aria-label":m},p)}}reaction_bar_ReactionBar.displayName="ReactionBar",reaction_bar_ReactionBar.defaultProps={reactions:null,reactionKey:null,cannedReactions:[],currentUser:null,className:null,emojiMode:null,featureSonicEmoji:!1,featureEmailWorkflow:!1,canReact:!0,clientTheme:"light",isLatestReactionInChannel:!1,isInReactjiAwarenessTreatmentGroup:!1};const z={changeReactionFromUserAction:u.a};var $=Object(o.b)((e,{reactionKey:t,isLatestReactionInChannel:a})=>{var n=Object(g.d)(t);const s=n.entityId,r=n.channelId;let i=!0;if(Object(g.e)(t)){const t=Object(O.a)(e,r,s);i=Object(y.e)(e,t)}let o=!1;return a&&(o="treatment"===Object(h.c)(e,"reactji_awareness_coachmark_v2")),{canReact:i,reactions:Object(d.e)(e,t),currentUser:Object(p.d)(e),emojiMode:Object(b.h)(e),featureSonicEmoji:Object(p.m)(e,"feature_sonic_emoji"),featureEmailWorkflow:Object(m.a)(e),featureReactjiEducationTip:Object(p.m)(e,"feature_reactji_education_tip"),clientTheme:Object(C.c)(e),isInReactjiAwarenessTreatmentGroup:o}},z)(reaction_bar_ReactionBar);t.a=$},p6QP:function(e,t,a){},p6gI:function(e,t,a){},pVvT:function(e,t,a){},peKf:function(e,t,a){"use strict";function n({prevUserAttentionIsOnChat:e,prevComposerVisible:t,currentUserAttentionIsOnChat:a,currentComposerVisible:n}){return!(e||!a||n)||!(!t||n||!a)}a.d(t,"a",function(){return n})},pic6:function(e,t,a){},"plp+":function(e,t,a){},pmpI:function(e,t,a){},q2IZ:function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("XHGt"),o=a("aK/h"),l=a("M1FR"),c=a("HvGc"),d=a("1hAG"),u=a("kOzZ"),p=a("tn36"),h=a("aolG"),m=a("nNoG"),b=a("5mKg"),f=a("81nI"),_=a("ynxK");const g=new m.b("help"),y=(o.default.shape({open:o.default.number,closed:o.default.number,unread:o.default.number}),o.default.object.isRequired,o.default.object.isRequired,o.default.string,{tickets:{open:0,closed:0,unread:0},helpCenterToken:o.default.string}),O="/help/requests",C=(e,t,a,n)=>e.closed>0&&0===e.unread&&0===e.open?r.a.createElement("div",null,r.a.createElement("span",null,g.t("No pending requests.")),r.a.createElement(_.a,{className:"p-help_modal__requests",onClick:()=>((e,t,a)=>{e.track("HELP_MODAL_ACTION",{action:"view_request_history",trigger:"click_view_request_history"}),Object(b.P)(a,Object(f.a)(O,t))})(t,a,n),"data-qa":"help_modal_requests_closed"},r.a.createElement("span",{className:"p-help_modal__requests__message bold"},g.t("View your help request history"),"."))):null,v=(e,t,a,n)=>{if(e>0){const s=e>1?g.t("You have new replies to your help requests."):g.t("You have a new reply to your help request.");return r.a.createElement(_.a,{className:"p-help_modal__requests",onClick:()=>((e,t,a)=>{e.track("HELP_MODAL_ACTION",{action:"view_new_replies",trigger:"click_view_new_replies"}),Object(b.P)(a,Object(f.a)(O,t))})(t,a,n),"data-qa":"help_modal_requests_unread"},r.a.createElement("span",{className:"p-help_modal__requests_badge unread"},e),r.a.createElement("span",{className:"p-help_modal__requests__message bold"},s))}return null},E=(e,t,a,n)=>{if(e>0){const s=e>1?g.t("You have open help requests."):g.t("You have an open help request.");return r.a.createElement(_.a,{className:"p-help_modal__requests",onClick:()=>((e,t,a)=>{e.track("HELP_MODAL_ACTION",{action:"view_open_requests",trigger:"click_view_open_requests"}),Object(b.P)(a,Object(f.a)(O,t))})(t,a,n),"data-qa":"help_modal_requests_read"},r.a.createElement("span",{className:"p-help_modal__requests_badge read"},e),r.a.createElement("span",{className:"p-help_modal__requests__message read bold"},s))}return null},k=e=>r.a.createElement("div",{className:"display_flex flex_direction_column"},C(e.tickets,e.clogger,e.helpCenterToken,e.team),r.a.createElement("div",{className:e.tickets.unread>0?"padding_top_50":""},v(e.tickets.unread,e.clogger,e.helpCenterToken,e.team)),r.a.createElement("div",{className:e.tickets.closed>0||e.tickets.unread>0?"padding_top_50":""},E(e.tickets.open,e.clogger,e.helpCenterToken,e.team)));k.displayName="TicketsStatus",k.defaultProps=y;var S=k,j=a("+6YQ"),I=a("7nxQ"),w=a("od5y"),T=a("ftfc");a("zG9j");const N=new m.b("help"),A=(o.default.string,o.default.string,o.default.object.isRequired,o.default.shape({open:o.default.number,closed:o.default.number,unread:o.default.number}),o.default.func,o.default.func,o.default.string.isRequired,o.default.object.isRequired,o.default.bool,{query:"",helpCenterToken:"",tickets:{closed:0,read:0,unread:0},onClose:n.a,showKeyboardShortcuts:n.a,withoutFullscreenModal:!1});class help_modal_HelpModal extends s.Component{constructor(e){super(e),this.state={isModalOpen:!0,query:e.query},this.zdLocale=Object(I.a)(),Object(p.a)(this,["onClickBrowseLink","onClickContactUsButton","onClickShortcutsButton","onOpenSearchLink","onQueryChange"])}componentDidMount(){var e=this.props;const t=e.trigger;e.clogger.track("HELP_MODAL_ACTION",{action:"open_modal",trigger:t})}onClickBrowseLink(){const e=this.state.query,t=this.props.clogger,a=Object(f.b)({zdLocale:this.zdLocale,query:e,sidTrackingToken:this.props.helpCenterToken});e&&t.track("HELP_MODAL_SEARCH",{search_terms:e}),t.track("HELP_MODAL_ACTION",{action:"browse_all",trigger:"click_browse_all"}),window.open(a)}onClickContactUsButton(){var e=this.props;const t=e.clogger,a=e.team;t.track("HELP_MODAL_ACTION",{action:"submit_new_request",trigger:"click_submit_new_request"}),Object(b.P)(a,Object(f.a)("/help/requests/new",this.props.helpCenterToken))}onClickShortcutsButton(){const e=this.props.clogger;this.setState(()=>({isModalOpen:!1})),e.track("HELP_MODAL_ACTION",{action:"keyboard_shorcuts",trigger:"click_keyboard_shorcuts"}),this.props.showKeyboardShortcuts()}onOpenSearchLink({url:e,query:t}){const a=this.props.clogger;t&&a.track("HELP_MODAL_SEARCH",{search_terms:this.state.query,locale:this.zdLocale}),a.track("HELP_MODAL_ZD_HIT",{zd_article_url:e})}onQueryChange(e){this.setState(()=>({query:e}))}render(){const e=this.state.isModalOpen;var t=this.props;const a=t.tickets,n=t.clogger,i=t.onClose,o=t.team,l=t.query,c=t.withoutFullscreenModal,d=r.a.createElement(s.Fragment,null,r.a.createElement(j.b,{className:"p-help_modal__shortcuts__button c-button--outline",type:"outline",onClick:this.onClickShortcutsButton,"data-qa":"help_modal_shortcuts_button"},r.a.createElement(w.b,{type:"keyboard",className:"small_right_margin"}),r.a.createElement("strong",null,N.t("Keyboard shortcuts"))),r.a.createElement("div",{className:"display_flex align_items_baseline justify_content_between padding_top_200 p-help_modal__header"},r.a.createElement("h1",{className:"p-help_modal_title"},N.t("How can we help?")),r.a.createElement(_.a,{className:"p-help_modal__browse display_flex align_items_end",onClick:this.onClickBrowseLink,"data-qa":"help_modal_browse"},r.a.createElement("span",{className:"p-help_modal__browse__text"},N.t("Browse all answers")),r.a.createElement(w.b,{type:"arrow-large-right",className:"padding_left_100 p-help_modal__browse__icon"}))),r.a.createElement(T.a,{query:l,onOpenLink:this.onOpenSearchLink,autoFocus:!0,onQueryChange:this.onQueryChange}),r.a.createElement("div",{className:"p-help_modal__footer display_flex align_items_center justify_content_between"},r.a.createElement("div",{className:"p-help_modal__footer_tickets display_flex flex_direction_column"},r.a.createElement(S,{tickets:a,team:o,clogger:n,helpCenterToken:this.props.helpCenterToken})),r.a.createElement("div",{className:"p-help_modal__footer_contact"},r.a.createElement("div",null,r.a.createElement("span",{className:"p-help_modal__contact_us__message"},N.t("Can\u2019t find what you need, or have some feedback?")),r.a.createElement(j.b,{type:"primary",size:"medium",className:"margin_left_100 p-help_modal__contact_us__button",onClick:this.onClickContactUsButton,"data-qa":"help_modal_contact_button"},N.t("Contact Us"))))));return c?d:r.a.createElement(h.a,{isOpen:e,showCancelButton:!1,showGoButton:!1,onCancel:i,modalClasses:"p-help_modal",contentLabel:"help-modal","data-qa":"help_modal"},d)}}help_modal_HelpModal.displayName="HelpModal",help_modal_HelpModal.defaultProps=A;var R=help_modal_HelpModal;o.default.string,o.default.string,o.default.object.isRequired,o.default.func,o.default.string.isRequired,o.default.shape({open:o.default.number,closed:o.default.number,unread:o.default.number}).isRequired,o.default.object.isRequired,o.default.func,o.default.bool;const M={query:"",helpCenterTrackingToken:"",showKeyboardShortcuts:n.a,onClose:n.a,withoutFullscreenModal:!1};class help_modal_container_HelpModalContainer extends s.Component{render(){var e=this.props;const t=e.trigger,a=e.clogger,n=e.onClose,s=e.team,i=e.tickets,o=e.query,l=e.withoutFullscreenModal;return r.a.createElement(R,{query:o,team:s,helpCenterToken:this.props.helpCenterTrackingToken,tickets:i,onClose:n,showKeyboardShortcuts:this.props.showKeyboardShortcuts,trigger:t,clogger:a,withoutFullscreenModal:l})}}help_modal_container_HelpModalContainer.displayName="HelpModalContainer",help_modal_container_HelpModalContainer.defaultProps=M;const P={showKeyboardShortcuts:c.h};t.a=Object(i.b)(e=>({clogger:Object(u.a)({state:e}),helpCenterTrackingToken:Object(l.b)(e),team:Object(d.d)(e),tickets:Object(l.c)(e)}),P)(help_modal_container_HelpModalContainer)},qMiJ:function(e,t,a){},qOjI:function(e,t,a){"use strict";var n=a("UXvI"),s=a("yHhI"),r=a("lhZz"),i=a("Smdl"),o=a("vWCh");function l(e){const t=Object(i.a)()?Object(r.getClientStoreInstance)():Object(r.getStoreInstanceByTeamId)(e),a=Object(i.a)()?Object(s.b)():Object(s.a)({teamId:e});t?(a.info("NETWORK-CONNECTIVITY","Received offline event! Upserting that the client is offline."),t.dispatch(Object(o.a)(!1))):a.warn("NETWORK-CONNECTIVITY","Received offline event, but no store found.")}function c(e){const t=Object(i.a)()?Object(r.getClientStoreInstance)():Object(r.getStoreInstanceByTeamId)(e),a=Object(i.a)()?Object(s.b)():Object(s.a)({teamId:e});t?(a.info("NETWORK-CONNECTIVITY","Received online event! Upserting that the client is online."),t.dispatch(Object(o.a)(!0))):a.warn("NETWORK-CONNECTIVITY","Received online event, but no store found.")}t.a=((e=null)=>{const t=Object(n.a)(l.bind(null,e),500,{leading:!1});window.addEventListener("offline",t),window.addEventListener("online",()=>(t.cancel(),c(e)))})},qPro:function(e,t,a){"use strict";var n=a("ZHrX");t.a=n.a},qSXi:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("negh"),i=a("n2GJ");function o(e){return s()({id:e.id,appId:e.app.id,name:e.name,description:e.app.name,iconSet:e.app.icons||{},uiElement:r.UiElement.APP_ACTION_BUTTON,"data-qa":`app_action_${e.id}`},Object(i.e)(e))}var l=a("NFsq"),c=a("c8Bs"),d=a("/X+W");function u(e,t){if(!e)return!1;const a=Object(d.a)(e.name);if(!a)return!1;const n=Object(d.a)(e.description),s=t.split(/\s+/);return Object(c.a)(s,e=>Object(l.a)(a,e)||Object(l.a)(n,e))}a.d(t,"a",function(){return o}),a.d(t,"b",function(){return u})},qTUc:function(e,t,a){},qYtJ:function(e,t,a){"use strict";var n=a("wBxZ"),s=a("GxtX"),r=a("zmn3"),i=a("BeL+"),o=a("uXhx"),l=a("qAkX"),c=a("ifKl"),d=a("aK/h"),u=a("q1tI"),p=a.n(u),h=a("XHGt"),m=a("TSYQ"),b=a.n(m),f=a("t85p"),_=a("XL7r"),g=a("nNoG"),y=a("ubOb"),O=a("rsVu"),C=a("hwN2"),v=a("3kjJ"),E=a("HBMi");const k=new g.b("threads");var S=a("3dqR"),j=a("od5y"),I=a("lwWk"),w=a("Fdc0"),T=a("2Zgd"),N=a("J9z2");const A=new g.b("threads"),R=(d.default.array,d.default.number.isRequired,d.default.arrayOf(d.default.string),d.default.number,d.default.string,d.default.string.isRequired,d.default.string.isRequired,d.default.bool,d.default.func,d.default.bool,d.default.bool,d.default.string,d.default.string,d.default.bool,d.default.func,d.default.func,{replies:null,do24hrTime:!1,replyUsers:[],replyUsersCount:0,latestReply:null,showThreadIfThreadable:c.a,featureNewRepliesAfterBcast:!1,isThreadExpanded:void 0,threadListId:void 0,className:void 0,hasKeyboardFocusWithin:!1,onFocus:c.a,onBlur:c.a});class reply_bar_ReplyBar extends p.a.PureComponent{constructor(e){super(e),this.openThread=this.openThread.bind(this)}getLastReplyTs(){if(this.props.latestReply)return this.props.latestReply;if(this.props.replies){const e=Object(l.a)(this.props.replies);if(e)return e.ts}return null}openThread(e){e.preventDefault(),this.props.showThreadIfThreadable({channelId:this.props.channelId,threadTs:this.props.threadTs,requestFocus:this.props.hasKeyboardFocusWithin})}renderFaces(){let e;e=this.props.replyUsers&&this.props.replyUsers.length?Object(o.a)(this.props.replyUsers,e=>"B00"===e):Object(i.a)(Object(o.a)(Object(r.a)(this.props.replies,"user"),e=>"B00"===e));const t=this.props.replyUsersCount?this.props.replyUsersCount:e.length;return e.length>5?Object(s.a)(Object(r.a)(Object(n.a)(e,4),e=>this.renderSingleAvatar(e)),this.renderSingleAvatar(e[4],t-5)):Object(r.a)(e,e=>this.renderSingleAvatar(e))}renderSingleAvatar(e,t){const a=Object(N.a)(e),n=!Object(w.nb)({id:e});return p.a.createElement(S.c,{key:e,userId:a?null:e,botId:a?e:null,size:24,additionalOverlay:t,showCard:!0,isInteractive:n})}render(){var e=this.props;const t=e.replyCount,a=e.channelId,n=e.threadTs,s=e.do24hrTime,r=e.featureNewRepliesAfterBcast,i=e.isThreadExpanded,o=e.onFocus,l=e.onBlur,c=e.hasKeyboardFocusWithin,d=e.threadListId,u=A.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:t}),h=Object(T.b)(a,n),m=this.getLastReplyTs();let f="";f=r?function({latestReply:e,replyCount:t,do24hrTime:a}={}){return Object(v.a)(Object(E.a)(e),new Date)?1===t?k.t("Today at {time}",{time:Object(O.a)(e,{do24hrTime:a})}):k.t("Last reply today at {time}",{time:Object(O.a)(e,{do24hrTime:a})}):1===t?Object(C.a)(e):k.t("Last reply {time_ago}",{time_ago:Object(C.a)(e)})}({latestReply:m,replyCount:t,do24hrTime:s}):Object(v.a)(Object(E.a)(m),new Date)?1===t?A.t("Today at {time}",{time:Object(O.a)(m,{do24hrTime:s})}):A.t("Last reply today at {time}",{time:Object(O.a)(m,{do24hrTime:s})}):1===t?Object(C.a)(m):A.t("Last reply {time_ago}",{time_ago:Object(C.a)(m)});const _=b()("c-message__reply_bar",this.props.className,{"c-message__reply_bar--focus-within":c}),g=!0===i?d:void 0;return p.a.createElement("div",{role:"presentation",className:_,onClick:this.openThread,"data-qa":"reply_bar",onFocus:o,onBlur:l},this.renderFaces(),p.a.createElement(I.a,{className:"c-message__reply_count",href:h,target:"_blank",rel:"noopener noreferrer","aria-expanded":i,"aria-controls":g},u),p.a.createElement("div",{className:"c-message__reply_bar_description"},p.a.createElement("span",{className:"c-message__reply_bar_last_reply"},f),p.a.createElement("span",{className:"c-message__reply_bar_view_thread"},A.t("View thread"))),p.a.createElement(j.a,{type:"chevron_right",className:"c-message__reply_bar_arrow",align:"baseline","aria-hidden":!0}))}}reply_bar_ReplyBar.displayName="ReplyBar",reply_bar_ReplyBar.defaultProps=R;t.a=Object(y.a)(Object(h.b)(function(e){return{do24hrTime:Object(_.k)(e,"time24"),featureNewRepliesAfterBcast:Object(f.m)(e,"feature_new_replies_after_bcast")}})(reply_bar_ReplyBar))},qcAq:function(e,t,a){"use strict";var n=a("aK/h"),s=a("XfeM"),r=a("mly0"),i=a("t85p"),o=a("rtjy"),l=a("yPgC");const c=Object(s.b)("Record a frecency event for some message action + maybe a query",(e,t,{action:a,query:n=""}={})=>{const s=a.frecencyId;Object(i.m)(t(),"feature_app_actions_fe_refactor")?e(Object(o.c)({id:s,text:n})):Object(r.c)({id:s},n)});c.meta={name:"recordMessageActionFrecencyEvent",key:"actionsRecordMessageActionFrecencyEventRecordMessageActionFrecencyEvent",description:"Record a frecency event for some message action + maybe a query"},c.propTypes={action:l.a.MessageAction.isRequired,query:n.default.string},t.a=c},qfOp:function(e,t,a){},qiqk:function(e,t,a){},qnZ7:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("0wDQ"),s=a("XRnC"),r=a("fYfO"),i=a("PxLB");function o(e,t){return(a,o)=>{const l=Object(r.a)(o(),e,t);if(!l)return;a(Object(n.a)({channelId:e,ts:t})),a(Object(s.d)(l,t));a(Object(i.a)({channelId:e,msg:l,resent:!0}))}}},qqis:function(e,t,a){},qrk6:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a("x91h"),s=a("nNoG"),r=a("JoAr"),i=a("XxnT"),o=a("HBMi"),l=a("3kjJ"),c=a("aLpA");const d=new s.b("aria_msg_summary");function u(e){if(!e)return null;let t=[];const a=e.featureA11yMessageSummary,s=e.viewContext;var u=e.day;const p=u.isFirstDay,h=u.isLastDay,m=e.day.ts/1e3,b=Object(i.a)(),f=Object(i.a)(b).subtract(1,"days"),_=Object(o.a)(m,{returnMoment:!0}),g=Object(l.a)(b,_),y=Object(l.a)(f,_),O=m&&Object(r.a)(m,"{day_divider_pretty}"),C=!s||[c.I.MESSAGE_PANE,c.I.THREADS_FLEXPANE,c.I.THREADS_VIEW,c.I.UNREAD_VIEW].includes(s);return e.isFirstMsgForDay&&!e.isLastMsgForDay&&!p&&C&&(g?t.push(d.t("First message from today.",{day:O})):y?t.push(d.t("First message from yesterday.",{day:O})):t.push(d.t("First message from {day}.",{day:O}))),e.isLastMsgForDay&&!e.isFirstMsgForDay&&!h&&C&&(g?t.push(d.t("Last message from today.",{day:O})):y?t.push(d.t("Last message from yesterday.",{day:O})):t.push(d.t("Last message from {day}.",{day:O}))),(e.isLastMsgForDay&&e.isFirstMsgForDay&&!h&&!p||!C)&&(g?t.push(d.t("Message from today.",{day:O})):y?t.push(d.t("Message from yesterday.",{day:O})):t.push(d.t("Message from {day}.",{day:O}))),e.isFirstUnreadMsg&&C&&t.push(d.t("First unread message.")),e.isTombstone||t.push(d.t("{name} at {time}.",{name:e.name,time:e.time})),e.isEKMOrDLPTombstone&&t.push(e.name),e.channelName&&!C&&t.push(a?d.t("In {channel}.",{channel:e.channelName}):e.channelName),t.push(e.text),e.reactionCount>0&&!e.isTombstone&&t.push(d.t("{count, plural, =1 {# reaction} other {# reactions}}.",{count:e.reactionCount})),e.replyCount>0&&t.push(d.t("{count, plural, =1 {# reply} other {# replies}}.",{count:e.replyCount})),e.isStarred&&s!==c.I.STARS_FLEXPANE&&t.push(d.t("Message is starred.")),e.isPinned&&s!==c.I.PINS_FLEXPANE&&t.push(d.t("Message is pinned.")),e.isEdited&&t.push(a?d.t("Message is edited.",{note:"Part of the description for customers using screen readers: indicates that a message has been edited"}):"Message is edited."),e.attachmentCount>0&&t.push(d.t("{count, plural, =1 {# attachment} other {# attachments}}.",{count:e.attachmentCount})),e.attachmentTexts&&e.attachmentTexts.length>0&&(t=t.concat(e.attachmentTexts)),Object(n.a)(t.join(" "))}},qsRF:function(e,t,a){e.exports=a.p+"user_groups@2x-3a400be.png"},"r/YP":function(e,t,a){},r6UO:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=(a("aK/h"),a("O0RF")),i=a("Rszm"),o=a("nNoG");a("yWse");const l=new o.b("file-upload");class FileUploadBroadcastCheckbox extends n.PureComponent{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e){const t=e.target.checked;this.props.onChange(t)}render(){var e=this.props;const t=e.channelType,a=e.selectedChannelName,n=e.value;let o="";return o="mpim"===t?l.t("Also send to the group"):"im"===t?l.t("Also send as direct message"):l.rt("Also send to <span></span>",null,()=>s.a.createElement("span",{className:"p-file_upload_dialog__broadcast_channel_name"},a)),s.a.createElement(r.a,{text:o,className:"p-file_upload_dialog__broadcast_label",htmlFor:"file-upload-broadcast-to-channel",type:"inline"},s.a.createElement(i.a,{className:"p-file_upload_dialog__broadcast_checkbox","data-qa":"file_upload_broadcast_checkbox",id:"file-upload-broadcast-to-channel",checked:n,onChange:this.handleChange}))}}FileUploadBroadcastCheckbox.displayName="FileUploadBroadcastCheckbox",t.a=FileUploadBroadcastCheckbox},rCFu:function(e,t,a){"use strict";a.d(t,"c",function(){return b}),a.d(t,"b",function(){return f}),a.d(t,"a",function(){return _}),a.d(t,"f",function(){return g}),a.d(t,"g",function(){return y}),a.d(t,"i",function(){return O}),a.d(t,"j",function(){return C}),a.d(t,"h",function(){return v}),a.d(t,"d",function(){return S}),a.d(t,"e",function(){return I});var n=a("QbLZ"),s=a.n(n),r=a("kOzZ"),i=a("Smdl"),o=a("g5qt"),l=a("Zr7G"),c=a("lhZz"),d=a("U28S"),u=a("Z7Ay"),p=a("eK5+"),h=a("negh"),m=a("nNoG");const b=0,f=1,_=2;function g(e,t,a,n,o,u,p,g){if(!I(o,u,h.EventId.PRQ_CHANNEL_SWITCH_USABLE))return;let y,O;switch(n){case b:default:y=h.TimingStatus.COMPLETED,O=!1;break;case f:y=h.TimingStatus.ABANDONED,O=!0;break;case _:y=h.TimingStatus.COMPLETED,O=!0}const C=Object(d.b)(1e3*e*1e3,0),v=s()({elapsed_time:C,target_channel_id:a,required_sync:O,end_state:y},E(p,t,g)),k={userId:g,teamId:o,enterpriseId:u,locale:Object(m.s)()};Object(r.a)(k).track(h.EventId.PRQ_CHANNEL_SWITCH_USABLE,v);const S=Object(c.getStoreInstanceByTeamId)(o),j=S&&S.getState(),w=Object(i.a)()?"channel_switch_usable_sonic":"channel_switch_usable_legacy";Object(l.c)({state:j}).store(w,Math.round(e))}function y(e,t,a,n,o,u,p,g){if(!I(o,u,h.EventId.PRQ_CHANNEL_SWITCH_VISIBLE))return;let y,O;switch(n){case b:default:y=h.TimingStatus.COMPLETED,O=!1;break;case f:y=h.TimingStatus.ABANDONED,O=!0;break;case _:y=h.TimingStatus.COMPLETED,O=!1}const C=Object(d.b)(1e3*e*1e3,0),v=s()({elapsed_time:C,target_channel_id:a,required_sync:O,end_state:y},E(p,t,g)),k={userId:g,teamId:o,enterpriseId:u,locale:Object(m.s)()};Object(r.a)(k).track(h.EventId.PRQ_CHANNEL_SWITCH_VISIBLE,v);const S=Object(c.getStoreInstanceByTeamId)(o),j=S&&S.getState(),w=Object(i.a)()?"channel_switch_visible_sonic":"channel_switch_visible_legacy";Object(l.c)({state:j}).store(w,Math.round(e))}function O(e,t,a,n,i,o,l,c){if(!I(n,i,h.EventId.PRQ_TIME_TO_USABLE))return;const u=Object(d.b)(1e3*e*1e3,0),p=k(),b=s()({elapsed_time:u+p,desktop_elapsed_time:p,required_sync:a,end_state:c,start_type:h.MetricStartType.COLD,target_type:h.MetricTargetType.CHANNEL},E(o,t,l)),f={userId:l,teamId:n,enterpriseId:i,locale:Object(m.s)()};Object(r.a)(f).track(h.EventId.PRQ_TIME_TO_USABLE,b)}function C(e,t,a,n,i,o,l){if(!I(n,i,h.EventId.PRQ_TIME_TO_VISIBLE))return;const c=Object(d.b)(1e3*e*1e3,0),u=k(),p=s()({elapsed_time:c+u,desktop_elapsed_time:u,required_sync:a,end_state:h.TimingStatus.COMPLETED,start_type:h.MetricStartType.COLD,target_type:h.MetricTargetType.CHANNEL},E(o,t,l)),b={userId:l,teamId:n,enterpriseId:i,locale:Object(m.s)()};Object(r.a)(b).track(h.EventId.PRQ_TIME_TO_VISIBLE,p)}function v(e,t,a,n,i,o,l){if(!I(n,i,h.EventId.PRQ_SESSION_FRAME_STATS))return;const c=s()({duration_ms:e,sample_filter:"entire_session",hist_frame_render_time:t,hist_janky_windows:a},E(o,void 0,l)),d={userId:l,teamId:n,enterpriseId:i,locale:Object(m.s)()};Object(r.a)(d).track(h.EventId.PRQ_SESSION_FRAME_STATS,c)}function E(e,t,a){const n="string"==typeof a&&a.startsWith("W"),r={device:{id:"",make:navigator.platform,model:navigator.platform,os:o.V?"electron":"webapp",os_version:o.Qb||""}};let l;if(t)switch(r.ui_context={action:"QUICK_SWITCH"===t?"keydown":"click",ui_component:t},t.toUpperCase()){case"APP_ICON":l=h.MetricTrigger.APP_ICON;break;case"MSG_PANE":l=h.MetricTrigger.MSG_PANE;break;case"SIDE_BAR":l=h.MetricTrigger.SIDE_BAR;break;case"QUICK_SWITCH":l=h.MetricTrigger.QUICK_SWITCH;break;default:l=h.MetricTrigger.UNKNOWN}const c=s()({contexts:r,session_id:e,time:Date.now(),app_id:Object(i.a)()?"web_sonic":"web",is_tablet:!1,user_id:n?void 0:a,external_id:n?a:void 0},j());return t&&(c.trigger=l),c}function k(){if(o.V){const e=Object(o.F)();if(e&&void 0!==e.numTeamsAtLaunch&&void 0!==e.isInitialTeamBooted&&e.numTeamsAtLaunch>0&&e.isInitialTeamBooted){const t=e.BOOT,a=e.PRELOAD_READY,n=Object(o.d)(t,a);return n>0?1e6*n:0}}return 0}function S(){if(o.V){const e=Object(o.F)();if(e&&void 0!==e.numTeamsAtLaunch&&void 0!==e.isInitialTeamBooted&&e.numTeamsAtLaunch>0){const t=e.PRELOAD_STARTED,a=e.PRELOAD_READY,n=Object(o.d)(t,a);return Math.floor(n)}}return 0}function j(){if(o.V){const e=Object(o.s)();if(e){const t=e.prerelease?` (${e.prerelease})`:"";let a;switch("string"==typeof e.prerelease?e.prerelease.match(/(alpha|beta|electron3|sonic)/i)&&e.prerelease.match(/(alpha|beta|electron3|sonic)/i)[1]:"production"){case"alpha":case"electron3":a=h.ClientBuildType.ALPHA;break;case"beta":a=h.ClientBuildType.BETA;break;default:a=h.ClientBuildType.PRODUCTION}return{app_version:`${e.major}.${e.minor}.${e.patch}${t}`,release_version:`${e.major}.${e.minor}.${e.patch}`,build_type:a}}}return{app_version:"",release_version:"",build_type:h.ClientBuildType.PRODUCTION}}function I(e,t,a){return!(!["E12KS1G65"].includes(t)&&!["T024BE7LD","T5J4Q04QG"].includes(e))||(!(!["E27SFGS2W","E655JKQRX","E7RBBBXHB","E23RHNDU5","E5BRU6WAE","E4XV0NYS0","E7AN7J5RP","E3T9KQULR","E23RE8G4F","E46RWAPHC","E6GDLMBCM","E3U2DUYG4","E783C7HT4","E8YCM8N9L","E30MTJF0C","E4BGDDU1H","E56KHGV6G","E7U335QS3","E8RLKB40H","E61V1AN6R","E7SV3P9PU","E3ZLD3D42"].includes(t)||!Object(p.a)(10))||(!(!["E27SFGS2W"].includes(t)||![h.EventId.PRQ_TIME_TO_USABLE,h.EventId.PRQ_TIME_TO_VISIBLE].includes(a))||(!![h.EventId.PRQ_TIME_TO_USABLE,h.EventId.PRQ_TIME_TO_VISIBLE].includes(a)||(h.EventId.PRQ_SESSION_FRAME_STATS,Object(p.a)(10)))))}Object(u.a)("prq",{getDesktopElapsedTime:k,getDesktopPreloadTime:S,getElectronInfo:j})},rGr5:function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("guIn"),o=a("aK/h"),l=a("MREy"),c=a("QbLZ"),d=a.n(c),u=a("1zbP"),p=a("XHGt"),h=a("2olY"),m=a("Jn9h"),b=a("nNoG"),f=a("cD5Y"),_=a("ENxx");a("al7r");const g=new b.b("calls"),y=(o.default.string,o.default.object,o.default.func,o.default.object,o.default.bool.isRequired,o.default.object,o.default.bool,{memberPhoneNumber:null,callsApp:{video:[],phone:[]},menuProps:{},onSelected:n.a,appsById:{},skipPhoneApps:!1}),O="video",C="phone",v=(e,t,a,n)=>r.a.createElement(l.b,{dataQa:`${a}-${n.id}`,key:`${a}-${n.id}`,className:"display_flex flex_direction_row",onSelected:()=>e({appId:n.id})},r.a.createElement("div",{className:"display_flex flex_direction_row"},r.a.createElement("div",{className:"c-menu_item__icon"},r.a.createElement(m.a,{className:"p-classic_nav__call-menu_icon",src:t[n.id].icons?t[n.id].icons.image_32:"",height:"20",width:"20",alt:n.name})),r.a.createElement("div",null,n.name)));v.displayName="addMenuItem";const E=({appsById:e,callsApp:t,featurePhoneIntegration:a,memberPhoneNumber:n,menuProps:o,onSelected:c,skipPhoneApps:p})=>{const h=Object(s.useCallback)(()=>{window.open(`zoomphonecall://${n}`)},[n]);if(!a)return null;let m=!1;if(Object.keys(e).forEach(t=>{Object(u.d)(e[t])&&(m=!0)}),m)return r.a.createElement(l.f,d()({width:"auto"},o),[r.a.createElement(f.a,{key:"call_menu_spinner"})]);const b=[];return t.video&&t.video.length>0&&(b.push(r.a.createElement(l.c,{label:g.t("Video & Audio"),key:"video_audio"})),b.push(...t.video.map(v.bind(null,c,e,O)))),!p&&Object(i.a)(n)&&t.phone&&t.phone.length>0&&(b.push(r.a.createElement(l.d,{key:"phone_separator"})),b.push(r.a.createElement(l.c,{label:g.t("Phone {phone}",{phone:n}),key:"phone"})),b.push(...t.phone.map(v.bind(null,h,e,C)))),r.a.createElement(l.f,d()({width:"auto"},o),b)};E.displayName="CallMenu",E.defaultProps=y;var k=Object(p.b)(e=>{const t=Object(_.d)(e),a=Object(_.b)(e);return{featurePhoneIntegration:Object(h.b)(e),callsApp:t,appsById:a}},null)(E);o.default.node.isRequired,o.default.string,o.default.func,o.default.func,o.default.func,o.default.bool;const S={memberPhoneNumber:null,onMenuItemSelected:n.a,onRenderMenuCallback:n.a,onCloseMenuCallback:n.a,isInChannel:!1};class with_call_menu_WithCallMenu extends s.PureComponent{constructor(e){super(e),this.renderMenu=this.renderMenu.bind(this)}renderMenu(e){return this.props.onRenderMenuCallback&&this.props.onRenderMenuCallback(),r.a.createElement(k,{onSelected:this.props.onMenuItemSelected,memberPhoneNumber:this.props.memberPhoneNumber,menuProps:e,skipPhoneApps:this.props.isInChannel||!Object(i.a)(this.props.memberPhoneNumber)})}render(){return r.a.createElement(l.e,{onClose:this.props.onCloseMenuCallback,position:"bottom-right",renderMenu:this.renderMenu},this.props.children)}}with_call_menu_WithCallMenu.displayName="WithCallMenu",with_call_menu_WithCallMenu.defaultProps=S;t.a=with_call_menu_WithCallMenu},rqkC:function(e,t,a){},"s/YD":function(e,t,a){"use strict";a.d(t,"a",function(){return M});var n=a("jo6Y"),s=a.n(n),r=a("QbLZ"),i=a.n(r),o=a("vJtL"),l=a("ifKl"),c=a("q1tI"),d=a.n(c),u=a("XHGt"),p=a("TSYQ"),h=a.n(p),m=a("tn36"),b=a("aK/h"),f=a("dxEi"),_=a("tbBR"),g=a("4EIq"),y=a("cD5Y"),O=a("533h"),C=a("SAUz"),v=a("VymY"),E=a("/Rx2"),k=a("2jER"),S=a("Smdl"),j=a("quKg"),I=a("Srcy"),w=a("a+Oh"),T=a("peKf"),N=a("SNtu"),A=a("Lev8"),R=a("kcos");a("JlHJ");const M={offsetX:24,offsetY:134},P=e=>{const t=e&&e.current||e;if(!t)return;const a=Object(o.a)(t.getWrappedInstance)?t.getWrappedInstance():t;return a&&Object(o.a)(a.focus)?a:void 0},x=(b.default.string,b.default.string,b.default.string,b.default.bool,b.default.bool,b.default.bool,b.default.func,b.default.func,b.default.func.isRequired,b.default.func,b.default.func,b.default.func,b.default.func,b.default.node.isRequired,b.default.string.isRequired,b.default.number,b.default.string,b.default.object,b.default.bool,b.default.bool,b.default.func,b.default.string,b.default.bool,b.default.func,b.default.func,b.default.func,{className:void 0,bodyClassName:void 0,flexOrigin:void 0,isEmpty:!1,isOffline:!1,isLoading:!1,onBlur:l.a,onFocus:l.a,renderEmpty:l.a,renderControls:l.a,renderSubtitle:l.a,onOptionsClick:void 0,kbNavOrder:void 0,dataQa:void 0,headerProps:{},userAttentionIsOnChat:!1,composerVisible:!1,focus:void 0,removeFromSectionNavigation:l.a,addToSectionNavigation:l.a,setInitialActiveSection:l.a,clientTheme:"light",isIAP1Enabled:!1});class Flexpane extends d.a.Component{constructor(e){super(e),Object(m.a)(this,["focus","blur","setInitialActiveSection"]),this.flexpaneBodyRef=d.a.createRef(),this.flexpaneHeaderRef=d.a.createRef()}componentDidUpdate(e){const t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(T.a)(t)&&this.props.addToSectionNavigation(),Object(N.a)(t)&&this.props.removeFromSectionNavigation()}setInitialActiveSection(){this.props.setInitialActiveSection()}focusCloseButton(){const e=P(this.flexpaneHeaderRef);e&&e.focus()}focusItemInBody(){const e=P(this.flexpaneBodyRef);if(!e)return;const t=Object(v.a)(e)[0];t&&t.focus()}focus(){var e=this.props;const t=e.isEmpty,a=e.focus,n=e.onFocus;t?this.focusCloseButton():(a?a():this.focusItemInBody(),Object(S.a)()||n())}blur(){document.activeElement.blur(),Object(S.a)()||this.props.onBlur()}isLoading(){var e=this.props;const t=e.isLoading,a=e.isOffline;return t&&!a}renderBody(){var e=this.props;const t=e.isEmpty,a=e.isOffline,n=e.renderBody,s=e.renderEmpty;return t?this.isLoading()?null:s({isOffline:a}):n()}renderSubtitle(){const e=(0,this.props.renderSubtitle)();return e?d.a.createElement("div",{className:"p-flexpane__subtitle","data-qa":"subtitle"},e):null}render(){var e=this.props;const t=e.className,a=e.bodyClassName,n=e.flexOrigin,s=e.isEmpty,r=e.onOptionsClick,o=e.title,l=e.viewId,c=e.kbNavOrder,u=e.dataQa,p=e.renderControls,m=e.headerProps,b=e.clientTheme,f=e.isIAP1Enabled,v=d.a.createElement(_.a,{id:l},d.a.createElement("div",{"data-qa":u,className:h()("p-flexpane",{"p-flexpane--iap1":f},t)},d.a.createElement(O.a,i()({ref:this.flexpaneHeaderRef,onOptionsClick:r,renderSecondary:p,clientTheme:b,isIAP1Enabled:f},m),!f&&d.a.createElement(C.a,{flexOrigin:n,size:"medium"}),d.a.createElement("div",{className:"p-flexpane__title_container"},o,this.renderSubtitle())),d.a.createElement("div",{ref:this.flexpaneBodyRef,className:h()("p-flexpane__body",a,`p-flexpane__body--${b}`,{"p-flexpane__body--empty":s&&!this.isLoading(),"p-flexpane__body--empty_loading":s&&this.isLoading()})},this.isLoading()&&d.a.createElement("div",{className:"p-flexpane__floating_loader","data-qa":"floating_loader"},d.a.createElement(y.a,{size:"medium",noMargin:!0})),this.renderBody())));return Object(S.a)()?v:d.a.createElement(g.a,{component:this,order:c},v)}}Flexpane.displayName="Flexpane",Flexpane.defaultProps=x;const L=Object(S.a)()?Object(k.a)(Flexpane,"Flexpane",{index:1}):Flexpane,F=Object(u.b)(e=>({isOffline:!Object(f.c)(e),userAttentionIsOnChat:Object(E.e)(e),composerVisible:(Object(w.a)(e)||"composer_toolbar"===Object(j.c)(e,"composer_toolbar"))&&Object(I.b)(e),clientTheme:Object(A.c)(e),isIAP1Enabled:Object(R.c)(e)}),null,null,{pure:!1})(e=>{let t=e.forwardedRef,a=s()(e,["forwardedRef"]);return d.a.createElement(L,i()({ref:t},a))});t.b=d.a.forwardRef((e,t)=>d.a.createElement(F,i()({forwardedRef:t},e)))},sQIv:function(e,t,a){},sUzI:function(e,t,a){},sYFF:function(e,t,a){e.exports=a.p+"calls@2x-5027823.png"},skMg:function(e,t,a){},t5GV:function(e,t,a){},tBeP:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("dhvi"),o=a("XfeM"),l=a("ifKl"),c=a("fujP"),d=a("TSYQ"),u=a.n(d),p=a("nNoG"),h=a("aolG"),m=a("0f2Y"),b=a("XLFM"),f=a("rJQH"),_=a("P8Y3"),g=a("O0RF"),y=a("Rszm"),O=a("RAhH"),C=a("cD5Y"),v=a("g0Ht"),E=a("QbLZ"),k=a.n(E),S=a("bPB8"),j=a("XHGt"),I=a("tn36"),w=a("81jb"),T=a("4qCO"),N=a("4M+g"),A=a("7oqf"),R=a("6kok"),M=a("vmJv"),P=a("G4ux"),x=a("Qrgz"),L=a("od5y"),F=a("4Twu");const D=new p.b("app_management_modal");r.default.object.isRequired,r.default.func.isRequired,r.default.string,r.default.bool;class app_channel_list_item_AppChannelListItem extends n.PureComponent{constructor(e){super(e),this.handleRemove=this.handleRemove.bind(this)}handleRemove(){var e=this.props;const t=e.channel.id;(0,e.onRemove)(t)}render(){var e=this.props;const t=e.channel,a=e["data-qa"],n=e.canBeRemovedFromChannel;return s.a.createElement("li",{className:"p-app_management_modal__channel_list_item","data-qa":a},s.a.createElement(F.a,{className:"flex_one",channel:t,inheritPresenceIconSize:!0}),n&&s.a.createElement(b.c,{className:"p-app_management_modal__channel_list_item_remove position_relative","aria-label":D.t("Remove app from channel"),onClick:this.handleRemove,"data-qa":`${a}_remove`},s.a.createElement(L.b,{inline:!0,type:"times-circle"})))}}app_channel_list_item_AppChannelListItem.displayName="AppChannelListItem",app_channel_list_item_AppChannelListItem.displayName="AppChannelListItem",app_channel_list_item_AppChannelListItem.defaultProps={"data-qa":"app_channel_list_item",canBeRemovedFromChannel:!1};var B=app_channel_list_item_AppChannelListItem,U=a("jo6Y"),q=a.n(U),H=a("kX2h");const W=new p.b("app_management_modal"),G=220,K=36,V=28,z=200;r.default.bool,r.default.bool,r.default.func.isRequired,r.default.string.isRequired;class app_channel_list_selector_AppChannelListSelector extends n.PureComponent{constructor(e){super(e),Object(I.a)(this,["buildChannelOptions","optionsFetcher","setSelectorReference","scrollSelectorIntoView"])}componentDidMount(){if(this.selector){const e=this.selector.focusSelectInput;e&&e()}}componentWillUnmount(){clearTimeout(this.mobileKeyboardTimeout)}setSelectorReference(e){this.selector=e}buildChannelOption(e){return{label:s.a.createElement(F.a,{className:"p-app_management_modal__channel_selector_item",channel:e,inheritPresenceIconSize:!0}),value:e.id}}buildChannelOptions(e){return{options:e.map(this.buildChannelOption)}}scrollSelectorIntoView(){if(this.selector){const e=this.selector.select;e&&e.wrapper&&(this.mobileKeyboardTimeout=setTimeout(()=>{e.wrapper.scrollIntoView()},this.props.isMobile?z:0))}}optionsFetcher(e){var t=this.props;const a=t.forExclusions,n=t.serviceId;return this.props.searchChannelsForApp({query:e,forExclusions:a,serviceId:n}).then(this.buildChannelOptions).tap(this.scrollSelectorIntoView)}render(){var e=this.props;e.serviceId,e.forExclusions,e.searchChannelsForApp;const t=e.isMobile,a=q()(e,["serviceId","forExclusions","searchChannelsForApp","isMobile"]),n=t?K:V;return s.a.createElement(H.a,k()({},a,{innerRef:this.setSelectorReference,optionsFetcher:this.optionsFetcher,prefetchOptions:!0,className:"p-app_management_modal__channel_selector_input",isAlwaysOpen:!0,optionsListWidth:G,optionsRowHeight:n,placeholder:W.t("Find a channel"),type:"short",usePlaceholderOption:!1,wrapperClassName:"p-app_management_modal__channel_selector"}))}}app_channel_list_selector_AppChannelListSelector.displayName="AppChannelListSelector";const $={searchChannelsForApp:A.j};app_channel_list_selector_AppChannelListSelector.defaultProps={forExclusions:!1,isMobile:!1};var Y=Object(j.b)(null,$)(app_channel_list_selector_AppChannelListSelector);const Q=new p.b("app_management_modal");r.default.string.isRequired,r.default.string.isRequired,r.default.string.isRequired,r.default.array,r.default.number,r.default.func.isRequired,r.default.func.isRequired,r.default.string,r.default.bool,r.default.bool,r.default.string.isRequired,r.default.bool;class app_channel_list_AppChannelList extends n.PureComponent{constructor(e){super(e),this.state={showChannelSelector:!1},Object(I.a)(this,["handleAddChannel","toggleChannelSelector"])}componentWillUnmount(){clearTimeout(this.timeout)}setSelectorInputReference(e){this.selectorInput=e}toggleChannelSelector(){this.setState(e=>({showChannelSelector:!e.showChannelSelector}))}handleAddChannel(e){(0,this.props.onAddChannel)(e),this.toggleChannelSelector()}renderHiddenChannelCountText(){var e=this.props;const t=e.channels,a=e.hiddenChannelCount;return t.length>0?Q.t("...and {hiddenChannelCount, plural, =1 {# other private conversation} other {# other private conversations}}",{hiddenChannelCount:a}):Q.t("{hiddenChannelCount, plural, =1 {# private conversation} other {# private conversations}}",{hiddenChannelCount:a})}renderListItems(){var e=this.props;const t=e.channels,a=e.emptyListText,n=e.hiddenChannelCount,r=e.canBeRemovedFromChannel,i=e.onRemoveChannel,o=e["data-qa"];if(0===t.length&&0===n)return s.a.createElement("li",{className:"p-app_management_modal__channel_list_item sk_foreground_high","data-qa":`${o}_empty_message`},a);const l=Object(S.a)(t).map(e=>s.a.createElement(B,{key:e.id,channel:e,canBeRemovedFromChannel:r,onRemove:i,"data-qa":`${o}_channel_${e.id}`}));return n>0&&l.push(s.a.createElement("li",{key:"0",className:"p-app_management_modal__channel_list_item","data-qa":`${o}_hidden_channels_message`},this.renderHiddenChannelCountText())),l}renderChannelSelector(){var e=this.props;const t=e.buttonText,a=e["data-qa"],n=e.isMobile,r=e.forExclusions,i=e.serviceId,o=this.state.showChannelSelector;return s.a.createElement("div",{className:"position_relative"},s.a.createElement(b.d,{className:"p-app_management_modal__channel_list_add",type:"outline",size:"small",onClick:this.toggleChannelSelector,"data-qa":`${a}_button`},t),o&&s.a.createElement(Y,{onChange:this.handleAddChannel,onOutsideClick:this.toggleChannelSelector,"data-qa":`${a}_selector`,isMobile:n,forExclusions:r,serviceId:i}))}render(){var e=this.props;const t=e.headerText,a=e["data-qa"];return s.a.createElement(w.a,{className:"p-app_management_modal__card","data-qa":a},s.a.createElement(w.b,{className:"p-app_management_modal__card_header"},s.a.createElement("strong",{className:"flex_one align_self_center margin_right_50"},t),this.renderChannelSelector()),s.a.createElement(w.c,{className:"no_margin no_padding"},s.a.createElement("ul",{className:"no_margin p-app_management_modal__channel_list"},this.renderListItems())))}}app_channel_list_AppChannelList.displayName="AppChannelList";const X=(e,t)=>Object(T.a)(Object(R.w)(e),Object(R.w)(t)),J=(e,t)=>Object.keys(e).map(e=>Object(N.e)(t,e)).filter(e=>!Object(R.Y)(e)&&!Object(R.Nb)(e)).sort(X);app_channel_list_AppChannelList.defaultProps={channels:[],hiddenChannelCount:0,"data-qa":"app_channel_list",isMobile:!1,forExclusions:!1,canBeRemovedFromChannel:!1};var Z=Object(j.b)((e,{forExclusions:t,serviceId:a,memberId:n})=>{var s=Object(A.e)(e,a);const r=s.exclusionIds,i=s.hiddenChannelCount,o=s.privateChannelIds,l=s.publicChannelIds;if(t)return{channels:J(r,e)};const c=Object(M.a)(e),d=Object(P.d)(e,n),u=Object(x.r)(e,c,d);return{channels:J(k()({},l,o),e),hiddenChannelCount:i,canBeRemovedFromChannel:u}})(app_channel_list_AppChannelList),ee=a("hbEN"),te=a("uQWY");const ae=e=>s.a.createElement(n.Fragment,null,s.a.createElement(C.a,{size:"small",className:"c-infinite_spinner--inline"}),s.a.createElement("span",{className:"c-infinite_spinner__loading_msg"},e.children));ae.displayName="InlineInfiniteSpinner";var ne=ae,se=a("qPro"),re=a("mIgp"),ie=a("3dqR"),oe=a("MREy"),le=a("t85p"),ce=a("w6pt"),de=a("ZYn4"),ue=a("Fdc0");const pe=new p.b("app_management_modal");r.default.string.isRequired,r.default.bool.isRequired,r.default.bool.isRequired,r.default.bool.isRequired,r.default.string.isRequired,r.default.string;class app_member_name_AppMemberName extends n.PureComponent{renderIsYou(){return this.props.isYou?s.a.createElement("span",null,pe.t("(you)")):null}renderPrimaryName(){return s.a.createElement("span",{className:"p-app_management_modal__member_list_primary_name"},this.props.memberPrimaryName," ",this.renderIsYou())}renderSecondaryName(){const e=this.props.memberSecondaryName;return e?s.a.createElement("span",{className:"p-app_management_modal__member_list_secondary_name"},e):null}render(){return this.props.isUnknown?s.a.createElement(ce.a,{type:"unknown"}):this.props.isNonExistent?s.a.createElement(ce.a,{type:"non-existent"}):s.a.createElement("span",{className:"p-app_member_name"},this.renderPrimaryName(),s.a.createElement(de.a,{memberId:this.props.memberId}),this.renderSecondaryName())}}app_member_name_AppMemberName.displayName="AppMemberName",app_member_name_AppMemberName.defaultProps={memberSecondaryName:""};var he=Object(j.b)(function(e,{memberId:t}){const a=Object(P.d)(e,t);return{isYou:Object(le.d)(e)===t,isUnknown:Object(ue.Ob)(a),isNonExistent:Object(ue.Bb)(a),memberPrimaryName:Object(ue.V)(e,a,!1,!1),memberSecondaryName:Object(ue.M)(e,a)}})(app_member_name_AppMemberName);const me=new p.b("app_management_modal"),be=(r.default.string,r.default.bool.isRequired,r.default.func,r.default.func,r.default.string.isRequired,r.default.arrayOf(r.default.string).isRequired,{"data-qa":"app_member_list_item",onRevokeButtonClick:l.a,onViewUserPermissionsClick:l.a});class app_member_list_item_AppMemberListItem extends n.PureComponent{constructor(e){super(e),Object(I.a)(this,["handleViewUserPermissionsClick","renderMenu"])}handleViewUserPermissionsClick(){var e=this.props;(0,e.onViewUserPermissionsClick)(e.userId,e.scopes)}renderAvatar(){const e=this.props.userId;return s.a.createElement(ie.c,{className:"p-app_management_modal__member_list_avatar",userId:e,size:36,isInteractive:!1,showCard:!1,showTooltip:!1,tabIndex:"-1"})}renderUserName(){const e=this.props.userId;return s.a.createElement(he,{memberId:e})}renderScopeInfo(){const e=this.props.scopes;return s.a.createElement("div",null,s.a.createElement(m.a,{className:"p-app_management_modal__member_list_scope_info","data-qa":`${this.props["data-qa"]}_permissions_link`,onClick:this.handleViewUserPermissionsClick},me.t("{scopeCount, plural, =1 {# permission} other {# permissions}} granted",{scopeCount:e.length})))}renderMenu(e){var t=this.props;const a=t.isYou,n=t.onRevokeButtonClick;return s.a.createElement(oe.f,e,s.a.createElement(oe.b,{"data-qa":`${this.props["data-qa"]}_menu_permissions`,onSelected:this.handleViewUserPermissionsClick,label:me.t("View permissions")}),a&&s.a.createElement(oe.b,{"data-qa":`${this.props["data-qa"]}_menu_revoke`,onSelected:n,label:me.t("Revoke authorization")}))}renderMenuTrigger(){return s.a.createElement(oe.e,{renderMenu:this.renderMenu,position:"bottom-right"},s.a.createElement(b.c,{"data-qa":`${this.props["data-qa"]}_menu_trigger`},s.a.createElement(L.b,{type:"ellipsis"})))}render(){return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"p-app_management_modal__member_list_gutter"},this.renderAvatar()),s.a.createElement("div",{className:"p-app_management_modal__member_list_content"},this.renderUserName(),this.renderScopeInfo()),this.renderMenuTrigger())}}app_member_list_item_AppMemberListItem.displayName="AppMemberListItem",app_member_list_item_AppMemberListItem.displayName="AppMemberListItem",app_member_list_item_AppMemberListItem.defaultProps=be;var fe=Object(j.b)((e,{userId:t})=>({isYou:Object(le.d)(e)===t}))(app_member_list_item_AppMemberListItem);const _e=new p.b("app_management_modal"),ge=(r.default.string,r.default.bool.isRequired,r.default.arrayOf(r.default.shape({user_id:r.default.string.isRequired,scopes:r.default.arrayOf(r.default.string).isRequired})).isRequired,r.default.string,r.default.any,r.default.func,r.default.func,r.default.func,r.default.string.isRequired,r.default.number,r.default.number,r.default.bool,{"data-qa":"app_member_list",memberQuery:"",modalBodyRef:void 0,onAppSearchUsers:l.a,onRevokeButtonClick:l.a,onViewUserPermissionsClick:l.a,totalResultsCount:0,userCount:0,useVirtualizedList:!0}),ye=300,Oe=5;class app_member_list_AppMemberList extends n.PureComponent{constructor(e){super(e),Object(I.a)(this,["handleScroll","renderListItem","setListRef","setMemberQuery","handleScrollToTopButtonClick"]),this.state={searchValue:"",showScrollToTopButton:!1},this.debouncedFetchMemberList=Object(ee.a)(this.fetchMemberList,ye)}componentDidMount(){this.fetchMemberList()}getMemberListKeys(){var e=this.props;const t=e.memberResults,a=e.isLoading,n=t.map(({user_id:e})=>e);return a?n.concat("loading"):n}setListRef(e){this.list=e}setMemberQuery(e){const t=e.target.value;this.setState(()=>({searchValue:t})),this.debouncedFetchMemberList(t)}fetchMemberList(e,t){var a=this.props;(0,a.onAppSearchUsers)({serviceId:a.serviceId,query:e,nextPage:t})}handleScroll({scrollTop:e}){var t=this.props;const a=t.isLoading,n=t.memberResults,s=t.totalResultsCount,r=t.memberQuery,i=this.state.showScrollToTopButton;if(e>0&&!i?this.setState(()=>({showScrollToTopButton:!0})):0===e&&i&&this.setState(()=>({showScrollToTopButton:!1})),a)return;const o=n.length;o!==s&&(o-(this.list&&this.list.getVisibleRange&&this.list.getVisibleRange().end||0)>Oe||this.fetchMemberList(r,!0))}handleScrollToTopButtonClick(){this.props.modalBodyRef.scrollTo(0,0)}renderHeader(){var e=this.props;const t=e.memberQuery,a=e.totalResultsCount,n=e.userCount;let r=_e.t("Member Results");return t?a&&(r=_e.t("{totalResultsCount} Member Results",{totalResultsCount:a})):r=_e.t("{userCount, plural, =1 {# Member} other {# Members}}",{userCount:n}),s.a.createElement(w.b,{className:"p-app_management_modal__card_header"},s.a.createElement("strong",{className:"flex_one align_self_center margin_right_50","data-qa":`${this.props["data-qa"]}_count`},r),s.a.createElement(se.a,{className:"p-app_management_modal__member_search","data-qa":`${this.props["data-qa"]}_search`,icon:"search",onChange:this.setMemberQuery,placeholder:_e.t("Search members"),value:this.state.searchValue}))}renderListItem(e){const t=this.props.memberResults;if(e===t.length)return this.renderLoadingItem();const a=t[e];return this.renderMemberItem(a)}renderMemberItem(e){var t=this.props;const a=t.onRevokeButtonClick,n=t.onViewUserPermissionsClick,r=`${this.props["data-qa"]}_item_${e.user_id}`;return s.a.createElement("li",{key:e.user_id,className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--member","data-qa":r},s.a.createElement(fe,{"data-qa":r,userId:e.user_id,scopes:e.scopes,onRevokeButtonClick:a,onViewUserPermissionsClick:n}))}renderLoadingItem(){const e=this.props.memberQuery;return s.a.createElement("li",{key:"loading",className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--loading","data-qa":`${this.props["data-qa"]}_loading`},s.a.createElement(ne,null,e?_e.t("Loading member results\u2026"):_e.t("Loading members\u2026")))}renderEmptyItem(){return s.a.createElement("li",{key:"empty_message",className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--empty_message","data-qa":`${this.props["data-qa"]}_empty_message`},_e.t("No matching members found."))}renderScrollToTopButton(){return this.state.showScrollToTopButton?s.a.createElement(b.d,{type:"outline",size:"small",className:"p-app_management_modal__member_list_scroll_button",onClick:this.handleScrollToTopButtonClick,"data-qa":`${this.props["data-qa"]}_scroll_button`},s.a.createElement(L.b,{type:"arrow-up-medium"}),"\xa0",_e.t("Back to top")):null}renderListItems(){var e=this.props;const t=e.totalResultsCount,a=e.isLoading,n=e.modalBodyRef,r=e.useVirtualizedList;return t||a?r?s.a.createElement(te.a,{scrollElement:n,onScroll:this.handleScroll},({height:e,isScrolling:t,onChildScroll:a,scrollTop:r})=>s.a.createElement(re.a,{height:e,rowRenderer:this.renderListItem,keys:this.getMemberListKeys(),onScroll:a,isScrolling:t,ref:this.setListRef,scrollTop:r,scrollElement:n})):this.getMemberListKeys().map((e,t)=>this.renderListItem(t)):this.renderEmptyItem()}renderBody(){return s.a.createElement(w.c,{className:"no_margin no_padding"},s.a.createElement("ul",{className:"p-app_management_modal__card_list"},this.renderListItems(),this.renderScrollToTopButton()))}render(){const e=this.props["data-qa"];return s.a.createElement(w.a,{className:"p-app_management_modal__card","data-qa":e},this.renderHeader(),this.renderBody())}}app_member_list_AppMemberList.displayName="AppMemberList";app_member_list_AppMemberList.defaultProps=ge;var Ce=Object(j.b)((e,{serviceId:t})=>{const a=Object(A.f)(e,t);return a?{isLoading:a.isLoading,memberQuery:a.query,memberResults:a.results,totalResultsCount:a.total}:{}})(app_member_list_AppMemberList),ve=a("uI5u");const Ee=new p.b("app_management_modal"),ke=(r.default.oneOf(["error","addSuccess","removeSuccess","addError","removeError","wildcardAddError","wildcardRemoveError","uninstallError","revokeSuccess","revokeError"]),r.default.string.isRequired,r.default.string,r.default.func,{alertBannerType:void 0,channelId:void 0,onClose:l.a}),Se=({alertBannerType:e,appName:t,channelId:a,onClose:n})=>{if(!e)return null;let r,i="error";const o=a?s.a.createElement(F.a,{channelId:a,inline:!0}):null;switch(e){case"addSuccess":r=Ee.rt("{appName} was added to {channelName}",{appName:t,channelName:o}),i="success";break;case"addError":r=Ee.rt("Adding {appName} to {channelName} failed. Try again?",{appName:t,channelName:o});break;case"removeSuccess":r=Ee.rt("{appName} was removed from {channelName}",{appName:t,channelName:o}),i="success";break;case"removeError":r=Ee.rt("Removing {appName} from {channelName} failed. Try again?",{appName:t,channelName:o});break;case"wildcardAddError":r=Ee.rt("Adding {appName} to all public channels failed. Try again?",{appName:t,channelName:o});break;case"wildcardRemoveError":r=Ee.rt("Removing {appName} from all public channels failed. Try again?",{appName:t,channelName:o});break;case"uninstallError":r=Ee.rt("Uninstalling {appName} failed. Try again?",{appName:t});break;case"revokeSuccess":r=Ee.rt("Access successfully revoked."),i="success";break;case"revokeError":r=Ee.rt("Revoking access to your member data failed. Try again?");break;default:r=Ee.t("Hmm, something went wrong. Try again?")}return s.a.createElement(ve.a,{type:i,topOffset:60,"data-qa":"app_management_modal_alert_banner",showCloseButton:!1,autoFadeout:!0,onClose:n},r)};Se.displayName="AppManagementAlertBanner",Se.defaultProps=ke;var je=Se;a("TBaU");const Ie=new p.b("app_management_modal"),we=(r.default.bool,r.default.string.isRequired,r.default.string.isRequired,r.default.string.isRequired,r.default.string,r.default.string,r.default.oneOf(["channel","workspace","user"]).isRequired,r.default.func,r.default.arrayOf(v.a),r.default.arrayOf(v.a),r.default.arrayOf(v.a),r.default.arrayOf(v.a),r.default.string,r.default.string,r.default.bool,r.default.number,r.default.func.isRequired,r.default.func,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.bool,r.default.oneOf(["error","addSuccess","removeSuccess","addError","removeError","wildcardAddError","wildcardRemoveError","uninstallError","revokeSuccess","revokeError"]),r.default.string,r.default.bool,r.default.bool,r.default.func.isRequired,r.default.func.isRequired,r.default.bool,r.default.func,r.default.bool,{isLoading:!0,workspaceScopeInfo:[],channelScopeInfo:[],userScopeInfo:[],currentUserScopeInfo:[],userCount:0,appHomepageUrl:void 0,appSupportUrl:void 0,showAppDirectoryLink:!0,appIconLarge:void 0,showWildcardToggle:!0,alertBannerType:void 0,activeDialogChannelId:void 0,wildcardEnabled:!1,workspaceName:void 0,userIsAppmin:!1,isMobile:!1,onClose:l.a,onAppSearchUsers:l.a,onSidebarMenuLinkClick:l.a,hasError:!1}),Te=-5;class app_management_modal_AppManagementModal extends n.PureComponent{constructor(e){super(e),this.setModalBodyRef=this.setModalBodyRef.bind(this)}setModalBodyRef(e){this.modalBodyRef=e}renderUserAccessSidebarMenuItem(){var e=this.props;const t=e.currentUserScopeInfo,a=e.userCount,n=e.userIsAppmin,r=e.onSidebarMenuItemClick;return(n?0===a:Object(c.a)(t))?null:s.a.createElement(f.a,{itemId:"user",onClick:r,"data-qa":"app_management_modal_user_access_link"},n?Ie.t("Member data access",{fallbackHash:"54485606f08a3c5d7e73fe0730e62de7b3fe9ea2"}):Ie.t("Access to your data",{fallbackHash:"7284a962539fd4edca8ba9beccf1501937e2f49e"}))}renderSidebarMenu(){var e=this.props;const t=e.activeSection,a=e.appId,n=e.appHomepageUrl,r=e.appSupportUrl,i=e.showAppDirectoryLink,o=e.onSidebarMenuItemClick,l=e.onSidebarMenuLinkClick;return s.a.createElement(f.b,{activeItemId:t},s.a.createElement(f.a,{itemId:"channel",onClick:o,"data-qa":"app_management_modal_channel_access_link"},Ie.t("Channel access",{fallbackHash:"93f2f019560a491cf643b739cc7027f2a62c1d38"})),s.a.createElement(f.a,{itemId:"workspace",onClick:o,"data-qa":"app_management_modal_workspace_access_link"},Ie.t("Workspace access",{fallbackHash:"a976c398ad6ec00251f8f90209b8393dd1b68b3a"})),this.renderUserAccessSidebarMenuItem(),n||i||r?s.a.createElement(f.a,{isDivider:!0}):null,n&&s.a.createElement(f.a,{itemId:"homepage",onClick:l,isExternalLink:!0,href:n,"data-qa":"app_management_modal_homepage_link"},Ie.t("App homepage",{fallbackHash:"ee2dbe71c27837ecd0a10d866992e1b3ff0d9b2f"})),i&&s.a.createElement(f.a,{itemId:"directory",onClick:l,isExternalLink:!0,href:`/apps/${a}?utm_source=in-prod&utm_medium=inprod-view_in_app_directory-user_profile-click`,"data-qa":"app_management_modal_directory_link"},Ie.t("View in App Directory")),r&&s.a.createElement(f.a,{itemId:"support",onClick:l,isExternalLink:!0,href:r,"data-qa":"app_management_modal_support_link"},Ie.t("Support for this App")))}renderChannelAccessSection(){var e=this.props;const t=e.activeSection,a=e.appName,n=e.channelScopeInfo,r=e.onWorkspaceSectionLinkClick,i=e.onExclusionListAdd,o=e.onExclusionListRemove,l=e.onGrantListAdd,d=e.onGrantListRemove,u=e.wildcardEnabled,h=e.onWildcardCheckboxChange,b=e.userIsAppmin,f=e.showWildcardToggle,C=e.isMobile,v=e.serviceId;if("channel"!==t)return null;const E=Object(p.q)(a),k=s.a.createElement("h3",null,Ie.t("What can {appName} do in a channel?",{appName:E}));if(Object(c.a)(n)){const e=Ie.rt("This app can\u2019t be added to individual channels \u2014 it has access to your entire workspace. Check <Link>Workspace Access</Link> for more.",null,({text:e})=>s.a.createElement(m.a,{onClick:r,"data-qa":"app_management_modal_empty_channel_section_link"},e));return s.a.createElement("div",null,k,s.a.createElement("p",{className:"margin_top_50 sk_foreground_max"},e))}const S=s.a.createElement(y.a,{className:"p-app_management_modal__wildcard_checkbox",checked:u,onChange:h,disabled:!b,"data-qa":"app_management_modal_wildcard_checkbox"});return s.a.createElement("div",null,s.a.createElement("div",null,k,s.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},Ie.t("In channels it\u2019s added to, {appName} can:",{appName:E})),s.a.createElement(_.a,{scopeInfo:n,"data-qa":"app_management_modal_channel_scope_info"})),s.a.createElement("div",{className:"margin_top_250"},s.a.createElement("h3",null,Ie.t("Which channels can {appName} access?",{appName:E})),f&&s.a.createElement("div",{className:"margin_top_50"},s.a.createElement(g.a,{text:Ie.t("All public channels"),cursor:"pointer",type:"inline",subtext:Ie.t("{appName} will join all public channels, in addition to other conversations it\u2019s added to.",{appName:E})},b?S:s.a.createElement(O.c,{offsetX:Te,tip:Ie.t("Only an app admin can change this setting."),"data-qa":"app_management_modal_wilcard_checkbox_tooltip"},s.a.createElement("span",null,S)))),u&&s.a.createElement(Z,{isMobile:C,headerText:Ie.t("Excluded Public Channels"),buttonText:Ie.t("Add Excluded Channel"),emptyListText:Ie.t("No public channels excluded."),onAddChannel:i,onRemoveChannel:o,"data-qa":"app_management_modal_exclusion_list",serviceId:v,forExclusions:!0}),s.a.createElement(Z,{isMobile:C,headerText:Ie.t("{appName} was individually added to:",{appName:E}),buttonText:Ie.t("Add App to channel",{fallbackHash:"b15a7b87166cf757534bf619b95f1e9b49b6f92a"}),emptyListText:Ie.t("{appName} has not been individually added to any channels.",{appName:E}),onAddChannel:l,onRemoveChannel:d,"data-qa":"app_management_modal_grant_list",serviceId:v})))}renderWorkspaceAccessSection(){var e=this.props;const t=e.activeSection,a=e.appName,n=e.workspaceName,r=e.workspaceScopeInfo;if("workspace"!==t)return null;const i=Object(p.q)(a),o=Object(p.q)(n);return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("h3",null,Ie.t("What can {appName} do in this workspace?",{appName:i})),s.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},Ie.t("On {workspaceName}, {appName} can:",{appName:i,workspaceName:o})),s.a.createElement(_.a,{scopeInfo:r,"data-qa":"app_management_modal_workspace_scope_info"})),s.a.createElement("div",{className:"margin_top_250"},s.a.createElement("h3",null,Ie.t("Uninstall {appName}",{appName:i})),s.a.createElement("p",{className:"margin_top_50 margin_bottom_100"},Ie.t("Remove this app from the {workspaceName} workspace and revoke all access and authorizations.",{workspaceName:o})),this.renderUninstallButton()))}renderAppminUserAccessSection(){var e=this.props;const t=e.activeSection,a=e.appName,n=e.serviceId,r=e.userCount,i=e.userScopeInfo,o=e.workspaceName,l=e.onAppSearchUsers,d=e.onMemberListRevokeClick,u=e.onViewUserPermissionsClick;if("user"!==t||0===r||Object(c.a)(i))return null;const h=Object(p.q)(a),m=Ie.t("{workspaceName} members have allowed {appName} to:",{appName:h,workspaceName:Object(p.q)(o)});return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("h3",null,Ie.t("What can {appName} do with member data?",{appName:h})),s.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},m),s.a.createElement(_.a,{scopeInfo:i,"data-qa":"app_management_modal_member_appmin_scope_info"})),s.a.createElement("div",{className:"margin_top_250"},s.a.createElement("h3",null,Ie.t("Which members have authorized {appName} to access their data?",{appName:h})),s.a.createElement(Ce,{modalBodyRef:this.modalBodyRef,onAppSearchUsers:l,onRevokeButtonClick:d,onViewUserPermissionsClick:u,serviceId:n,userCount:r})))}renderUserAccessSection(){var e=this.props;const t=e.activeSection,a=e.appName,n=e.currentUserScopeInfo,r=e.onRevokeButtonClick;if("user"!==t||Object(c.a)(n))return null;const i=Object(p.q)(a);return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("h3",null,Ie.t("What can {appName} do with your data?",{appName:i})),s.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},Ie.t("You\u2019ve allowed {appName} to:",{appName:i,fallbackHash:"7313b20011628c3948a6a709c3e227ae089e2c81"})),s.a.createElement(_.a,{scopeInfo:n,"data-qa":"app_management_modal_member_scope_info"})),s.a.createElement("div",{className:"margin_top_250"},s.a.createElement("h3",null,Ie.t("Revoke access")),s.a.createElement("p",{className:"margin_top_50 margin_bottom_100"},Ie.t("{appName} will no longer be able to access your data or take actions for you.",{appName:i})),s.a.createElement(b.d,{"data-qa":"app_management_modal_revoke_button",type:"outline",onClick:r},Ie.t("Revoke"))))}renderUninstallButton(){var e=this.props;const t=e.userIsAppmin,a=e.onUninstallButtonClick;return s.a.createElement("div",null,s.a.createElement(b.d,{type:"outline",disabled:!t,onClick:a,"data-qa":"app_management_modal_uninstall_button"},Ie.t("Uninstall App")),!t&&s.a.createElement("span",{className:"margin_left_100 sk_foreground_max"},Ie.t("Only an app admin can uninstall this app.")))}renderAlertBanner(){var e=this.props;const t=e.appName,a=e.activeDialogChannelId,n=e.alertBannerType,r=e.onAlertBannerClose;return n?s.a.createElement(je,{alertBannerType:n,appName:t,channelId:a,onClose:r}):null}renderModalContents(){var e=this.props;const t=e.isLoading,a=e.userIsAppmin;return t?s.a.createElement(C.a,null):s.a.createElement(n.Fragment,null,this.renderAlertBanner(),s.a.createElement("div",{className:"p-app_management_modal__sidebar_container"},this.renderSidebarMenu()),s.a.createElement("div",{className:"p-app_management_modal__content_container"},this.renderChannelAccessSection(),this.renderWorkspaceAccessSection(),a?this.renderAppminUserAccessSection():this.renderUserAccessSection()))}render(){var e=this.props;const t=e.appIconLarge,a=e.appName,n=e.hasError,r=e.isMobile,i=e.onClose;if(n)return null;const o=a?Ie.t("{appName} Settings",{appName:Object(p.q)(a)}):a;return s.a.createElement(h.a,{onCancel:i,showCancelButton:!1,showGoButton:!1,title:o,modalClasses:u()("p-app_management_modal",{"p-app_management_modal--mobile":r}),modalBodyOpenClassName:"p-app_management_modal__ReactModal__Body--open",position:"fixed",withHeader:!0,headerImage:t,setBodyRef:this.setModalBodyRef},this.renderModalContents())}}app_management_modal_AppManagementModal.displayName="AppManagementModal",app_management_modal_AppManagementModal.defaultProps=we;var Ne=app_management_modal_AppManagementModal,Ae=a("syB0"),Re=a("7EGn"),Me=a("qafc"),Pe=a("dCAd"),xe=a("ns4K"),Le=a("1hAG"),Fe=a("1zbP"),De=a("V/As"),Be=a("EOYu"),Ue=a("h9PG"),qe=a("5mKg"),He=a("NV5S"),We=a("1Oc4"),Ge=a("f8fv"),Ke=a("HOkk");const Ve=new p.b("app_management_modal"),ze=(r.default.string.isRequired,r.default.string.isRequired,r.default.string,r.default.string,r.default.oneOfType([r.default.string,r.default.object]),r.default.oneOfType([r.default.string,r.default.object]),r.default.func.isRequired,r.default.func,{workspaceName:void 0,title:void 0,workspaceAccessCheckboxText:void 0,channelAccessCheckboxText:void 0,onCancel:l.a});class app_uninstall_dialog_AppUninstallDialog extends n.PureComponent{constructor(e){super(e),this.state={workspaceConfirmChecked:!1,channelConfirmChecked:!e.channelAccessCheckboxText,confirmInProgress:!1},Object(I.a)(this,["handleConfirm","handleCheckboxChange"])}handleConfirm(){const e=this.props.onGo;return this.setState(()=>({confirmInProgress:!0})),e()}handleCheckboxChange(e){var t=e.target;const a=t.name,n=t.checked;this.setState(()=>({[`${a}Checked`]:n}))}renderCheckbox(e,t){return s.a.createElement(g.a,{type:"inline",cursor:"pointer",text:t},s.a.createElement(y.a,{onChange:this.handleCheckboxChange,name:e,isRequired:!0,"data-qa":`app_uninstall_dialog_${Object(Ge.a)(e)}_checkbox`}))}renderWorkspaceAccessConfirmCheckbox(){var e=this.props;const t=e.appName,a=e.workspaceName,n=e.workspaceAccessCheckboxText||Ve.rt("I understand members of the <strong>{workspaceName}</strong> workspace will no longer be able to use {appName}.",{appName:t,workspaceName:a});return this.renderCheckbox("workspaceConfirm",n)}renderChannelAccessConfirmCheckbox(){const e=this.props.channelAccessCheckboxText;return e?this.renderCheckbox("channelConfirm",e):null}renderTitle(){var e=this.props;const t=e.appName,a=e.workspaceName;return e.title||Ve.t("Uninstall {appName} from {workspaceName}?",{appName:Object(p.q)(t),workspaceName:Object(p.q)(a)})}render(){var e=this.props;const t=e.onCancel,a=e.appIcon;var n=this.state;const r=n.workspaceConfirmChecked,i=n.channelConfirmChecked,o=n.confirmInProgress,l=!(r&&i)||o;return s.a.createElement(Ke.a,{contentLabel:this.renderTitle(),title:this.renderTitle(),titleImage:a,truncateTitle:!1,goButtonText:Ve.t("Uninstall App"),onGo:this.handleConfirm,goButtonType:"danger",goButtonIsDisabled:l,goButtonIsPending:o,showCancelButton:!0,onCancel:t,"data-qa":"app_uninstall_dialog"},this.renderWorkspaceAccessConfirmCheckbox(),this.renderChannelAccessConfirmCheckbox())}}app_uninstall_dialog_AppUninstallDialog.displayName="AppUninstallDialog",app_uninstall_dialog_AppUninstallDialog.displayName="AppUninstallDialog",app_uninstall_dialog_AppUninstallDialog.defaultProps=ze;var $e=app_uninstall_dialog_AppUninstallDialog,Ye=a("negh"),Qe=a("kOzZ"),Xe=a("AE1P");const Je=new p.b("app_management_modal"),Ze=(r.default.string.isRequired,r.default.func.isRequired,r.default.func,r.default.bool.isRequired,{onCancel:l.a});class app_wildcard_dialog_AppWildcardDialog extends n.PureComponent{constructor(e){super(e),this.state={confirmInProgress:!1},this.handleConfirm=this.handleConfirm.bind(this)}handleConfirm(){const e=this.props.onGo;return this.setState(()=>({confirmInProgress:!0})),e()}render(){var e=this.props;const t=e.appName,a=e.wildcardEnabled,n=e.onCancel,r=this.state.confirmInProgress,i=Object(p.q)(t);let o,l;return a?(o={title:Je.t("Remove {appName} from all public channels?",{appName:i}),goButtonText:Je.t("Remove"),goButtonType:"danger","data-qa":"app_wildcard_disable_dialog"},l=Je.t("{appName} will only be able to post in channels it\u2019s individually added to.",{appName:i})):(o={title:Je.t("Allow {appName} access to all public channels?",{appName:i}),goButtonText:Je.t("Allow"),"data-qa":"app_wildcard_enable_dialog"},l=Je.t("{appName} will be added to all public channels (quietly, of course).",{appName:i})),s.a.createElement(Ke.a,k()({showCancelButton:!0,contentLabel:o.title,truncateTitle:!1,onGo:this.handleConfirm,onCancel:n,goButtonIsPending:r,goButtonIsDisabled:r},o),s.a.createElement("p",{className:"margin_bottom_0"},l))}}app_wildcard_dialog_AppWildcardDialog.displayName="AppWildcardDialog",app_wildcard_dialog_AppWildcardDialog.defaultProps=Ze,app_wildcard_dialog_AppWildcardDialog.displayName="AppWildcardDialog";var et=app_wildcard_dialog_AppWildcardDialog;const tt=new p.b("app_management_modal"),at=(r.default.string.isRequired,r.default.func,r.default.func.isRequired,r.default.string.isRequired,{onCancel:l.a});class app_revoke_dialog_AppRevokeDialog extends n.PureComponent{constructor(e){super(e),this.state={confirmInProgress:!1},this.handleConfirm=this.handleConfirm.bind(this)}handleConfirm(){const e=this.props.onGo;return this.setState(()=>({confirmInProgress:!0})),e()}render(){var e=this.props;const t=e.appName,a=e.onCancel,n=e.workspaceName,r=this.state.confirmInProgress,i=tt.t("Revoke access to your member data?"),o=tt.t("{appName} will remain installed on {workspaceName}, but will no longer be able to access your member data.",{appName:Object(p.q)(t),workspaceName:Object(p.q)(n)});return s.a.createElement(Ke.a,{"data-qa":"app_revoke_dialog",goButtonIsDisabled:r,goButtonIsPending:r,goButtonText:tt.t("Revoke"),goButtonType:"danger",onCancel:a,onGo:this.handleConfirm,showCancelButton:!0,title:i,truncateTitle:!1},s.a.createElement("p",{className:"margin_bottom_0"},o))}}app_revoke_dialog_AppRevokeDialog.displayName="AppRevokeDialog",app_revoke_dialog_AppRevokeDialog.defaultProps=at,app_revoke_dialog_AppRevokeDialog.displayName="AppRevokeDialog";var nt=app_revoke_dialog_AppRevokeDialog,st=a("CpTu");const rt=new p.b("app_management_modal"),it=(r.default.string.isRequired,r.default.arrayOf(v.a),r.default.bool,r.default.string,r.default.func,r.default.func,r.default.arrayOf(r.default.string),r.default.arrayOf(v.a),{currentUserScopeInfo:[],isMemberCurrentUser:!1,memberName:void 0,onGo:l.a,onClose:l.a,scopes:[],userScopeInfo:[]}),ot={memberId:r.default.string.isRequired},lt=(e,t)=>t.map(t=>((e,t)=>Object(st.a)(e,e=>e.scopes[0]===t))(e,t)),ct=({appName:e,currentUserScopeInfo:t,isMemberCurrentUser:a,memberName:n,onGo:r,onClose:i,scopes:o,userScopeInfo:l})=>{let c;c=a?t:lt(l,o);const d=Object(p.q)(e),u=a?rt.t("You\u2019ve allowed {appName} to:",{appName:d,fallbackHash:"7313b20011628c3948a6a709c3e227ae089e2c81"}):rt.t("{memberName} has allowed {appName} to:",{appName:d,memberName:Object(p.q)(n)});return s.a.createElement(Ke.a,{cancelText:rt.t("Done"),"data-qa":"app_user_permissions_dialog",goButtonType:"outline",goButtonText:rt.t("Revoke All"),showGoButton:a,reverseButtons:!0,truncateTitle:!1,onGo:r,onCancel:i,title:u},s.a.createElement("div",{className:"margin_bottom_400"},s.a.createElement(_.a,{scopeInfo:c})))};ct.displayName="AppUserPermissionsDialog",ct.defaultProps=it;const dt=Object(j.b)((e,{memberId:t})=>({isMemberCurrentUser:t===Object(le.d)(e),memberName:Object(ue.W)(e,t)}))(ct);dt.propTypes=ot;var ut=dt;const pt=new p.b("app_management_modal"),ht="APP_SETTINGS_MODAL",mt="APP_CHANNEL_ADD_DIALOG",bt="APP_CHANNEL_REMOVE_DIALOG",ft=(r.default.string,r.default.object,r.default.func,r.default.bool,r.default.func,r.default.bool,r.default.string,r.default.object,r.default.string,r.default.func,r.default.string,r.default.string,r.default.string,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired,r.default.bool,r.default.string,r.default.number,r.default.number,r.default.func,r.default.func,r.default.arrayOf(v.a),r.default.arrayOf(v.a),r.default.bool,r.default.number,r.default.bool,r.default.bool,r.default.object.isRequired,{onUninstall:l.a,showAppDirectoryLink:!0,isMobile:!1,workspaceName:"",enqueueToast:l.a,serviceId:void 0,appProfile:void 0,appId:void 0,appUserId:void 0,appName:void 0,wildcardEnabled:!1,onClose:l.a,appIcon:void 0,privateChannelCount:0,publicChannelCount:0,openModal:l.a,closeModal:l.a,currentUserScopeInfo:[],userScopeInfo:[],userCount:0,userIsAppmin:!1,referringEventId:void 0,referringUiContext:void 0,isLoading:!0,hasError:!1}),_t=80,gt="already_has_resource",yt="no_resource_to_remove",Ot="permission_exists",Ct=yt;class app_management_modal_container_AppManagementModalContainer extends n.PureComponent{static getDerivedStateFromProps(e,t){const a=e.currentUserScopeInfo,n=e.userIsAppmin,s=e.userCount;return"user"===t.activeSection&&(n?0===s:Object(c.a)(a))?{activeSection:"channel"}:null}constructor(e){super(e),this.state={alertBannerType:null,activeDialogChannelId:null,addChannelScopeInfo:null,activeSection:"channel"},Object(I.a)(this,["handleSidebarMenuItemClick","handleWorkspaceSectionLinkClick","handleUninstallButtonClick","handleAlertBannerClose","handleWildcardCheckboxChange","handleAppSearchUsers","handleExclusionListAdd","handleExclusionListRemove","handleGrantListAdd","handleGrantListRemove","handleRevokeButtonClick","handleMemberListRevokeClick","handleViewUserPermissionsClick"]),this.referringEventId=e.referringEventId,this.referringUiContext=e.referringUiContext}componentDidUpdate(e,t){var a=this.props;const n=a.isLoading,s=a.hasError,r=this.state.activeSection;e.hasError||!s?(e.isLoading&&!n||t.activeSection!==r)&&this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION}):this.handleError()}componentWillUnmount(){this.props.clearAppPermissions(),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE})}getClogStep(){const e=this.props.userIsAppmin;switch(this.state.activeSection){case"workspace":return Ye.UiStep.WORKSPACE_ACCESS_SECTION;case"user":return e?Ye.UiStep.APPMIN_MEMBER_ACCESS_SECTION:Ye.UiStep.MEMBER_ACCESS_SECTION;default:return Ye.UiStep.CHANNEL_ACCESS_SECTION}}trackClog(e={},t={},a=ht){var n=this.props;const s=n.appId,r=n.clogger,i=k()({[Ye.UiContextKeys.step]:a===ht?this.getClogStep():void 0},e);r.track(a,{contexts:{[Ye.ClientEventKeys.ui_context]:i,[Ye.ClientEventKeys.referring_ui_context]:this.referringUiContext,[Ye.ClientEventKeys.core]:k()({[Ye.CoreKeys.app_id]:s},t)},[Ye.ClientEventKeys.referring_event_id]:this.referringEventId}),this.referringEventId=a,this.referringUiContext=i}trackClogForSidebarMenuClick(e){let t;switch(e){case"workspace":t=Ye.UiElement.LINK_WORKSPACE_ACCESS_SECTION;break;case"channel":t=Ye.UiElement.LINK_CHANNEL_ACCESS_SECTION;break;case"user":t=this.props.userIsAppmin?Ye.UiElement.LINK_APPMIN_MEMBER_ACCESS_SECTION:Ye.UiElement.LINK_MEMBER_ACCESS_SECTION;break;case"homepage":t=Ye.UiElement.LINK_APP_HOMEPAGE;break;case"directory":t=Ye.UiElement.LINK_APP_DIRECTORY;break;case"support":t=Ye.UiElement.LINK_APP_SUPPORT;break;default:t=void 0}this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:t})}handleError(){this.props.closeModal(),this.props.enqueueToast({element:s.a.createElement(Me.b,{offsetY:_t,icon:"warning-filled",iconClassName:"sk_raspberry_red margin_right_75"},s.a.createElement("span",{"data-qa":"app_management_modal_error_toast"},pt.t("Hmm, something went wrong. Try again?")))})}handleSidebarMenuItemClick(e){this.trackClogForSidebarMenuClick(e),e!==this.state.activeSection&&this.setState(()=>({activeSection:e}))}handleWorkspaceSectionLinkClick(){this.handleSidebarMenuItemClick("workspace")}showUninstallToast(){var e=this.props;const t=e.appName,a=e.workspaceName;this.props.enqueueToast({element:s.a.createElement(Me.b,{offsetY:_t},s.a.createElement("span",{"data-qa":"app_management_modal_uninstall_toast"},pt.t("{appName} was removed from {workspaceName}",{appName:Object(p.q)(t),workspaceName:Object(p.q)(a)})))})}handleUninstallConfirm(){var e=this.props;const t=e.onUninstall,a=e.appId,n=e.onClose;return this.props.fetchAppUninstall({appId:a}).then(()=>{t(),this.showUninstallToast(),n(),this.props.closeModal()}).catch(()=>{this.setState(()=>({alertBannerType:"uninstallError"}))})}toggleWildcardEnabled(){var e=this.props;const t=e.appUserId,a=e.wildcardEnabled,n=e.serviceId,s=`fetchAppWildcard${a?"Disable":"Enable"}`;return this.props[s]({appUserId:t}).then(e=>{this.props.maybeUpdateAppPermissionsAfterWildcardChange({appUserId:t,wildcardEnabled:!a}),a||this.props.updatePublicChannelCount({countDelta:e,serviceId:n})}).catch(e=>{const t=Object(Re.a)(e,"data.error");t===Ot||t===Ct||this.setState(()=>({alertBannerType:a?"wildcardRemoveError":"wildcardAddError"}))})}handleChannelAddOrRemove(e,t,a){this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:a},{[Ye.CoreKeys.channel_id]:e}),this[t](e)}handleExclusionListAdd(e){this.handleChannelAddOrRemove(e,"showRemoveDialog",Ye.UiElement.BTN_APP_ADD_EXCLUSION)}handleExclusionListRemove(e){this.handleChannelAddOrRemove(e,"showAddDialog",Ye.UiElement.BTN_APP_REMOVE_EXCLUSION)}handleGrantListAdd(e){this.handleChannelAddOrRemove(e,"showAddDialog",Ye.UiElement.BTN_APP_ADD_CHANNEL)}handleGrantListRemove(e){this.handleChannelAddOrRemove(e,"showRemoveDialog",Ye.UiElement.BTN_APP_REMOVE_CHANNEL)}showRemoveDialog(e){const t=this.props.appName;this.setState(()=>({activeDialogChannelId:e,alertBannerType:null}));const a={appName:t,channelId:e,onConfirm:()=>(this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.OK},{[Ye.CoreKeys.channel_id]:e},bt),this.handleRemoveChannel()),onCancel:()=>this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE},{[Ye.CoreKeys.channel_id]:e},bt)};this.props.openModal({element:s.a.createElement(We.a,a),isStackable:!0}),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION},{[Ye.CoreKeys.channel_id]:e},bt)}handleRemoveChannel(){const e=this.props.appUserId,t=this.state.activeDialogChannelId,a={alertBannerType:"removeSuccess"};return this.props.fetchAppRemoveResource({appUserId:e,channelId:t}).then(()=>{this.props.maybeUpdateAppPermissionsAfterChannelRemove({appUserId:e,channelId:t}),this.setState(()=>a)}).catch(e=>{Object(Re.a)(e,"data.error")===yt?this.setState(()=>a):this.setState(()=>({alertBannerType:"removeError"}))})}showAddDialog(e){var t=this.props;const a=t.appUserId,n=t.appName,r=t.appIcon;return this.props.fetchAppAddResource({appUserId:a,channelId:e,didConfirm:!1}).then(t=>{this.setState(()=>({activeDialogChannelId:e,addChannelScopeInfo:t,alertBannerType:null}));const a={channelId:e,appName:n,appIcon:r,scopeInfo:t,onAuthorize:()=>{this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.ALLOW},{[Ye.CoreKeys.channel_id]:e},mt),this.handleAddChannel()},onDismiss:()=>{this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.DO_NOT_ALLOW},{[Ye.CoreKeys.channel_id]:e},mt)},onClose:()=>{this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE},{[Ye.CoreKeys.channel_id]:e},mt)}};this.props.openModal({element:s.a.createElement(He.b,a),isStackable:!0}),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION},{[Ye.CoreKeys.channel_id]:e},mt)}).catch(t=>{Object(Re.a)(t,"data.error")===gt?this.setState(()=>({addChannelScopeInfo:null,alertBannerType:"addSuccess"})):this.setState(()=>({activeDialogChannelId:e,alertBannerType:"addError"}))})}handleAddChannel(){const e=this.props.appUserId,t=this.state.activeDialogChannelId;return this.props.fetchAppAddResource({appUserId:e,channelId:t,didConfirm:!0}).then(()=>{this.props.maybeUpdateAppPermissionsAfterChannelAdd({appUserId:e,channelId:t}),this.setState(()=>({addChannelScopeInfo:null,alertBannerType:"addSuccess"}))}).catch(()=>{this.setState(()=>({alertBannerType:"addError"}))})}handleAlertBannerClose(){this.setState(()=>({alertBannerType:null}))}handleWildcardCheckboxChange(){this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_WILDCARD_CHECKBOX}),this.showWildcardDialog()}showWildcardDialog(){var e=this.props;const t=e.wildcardEnabled,a=e.appName,n=t?Ye.UiElement.APP_WILDCARD_DISABLE_DIALOG:Ye.UiElement.APP_WILDCARD_ENABLE_DIALOG,r={appName:a,wildcardEnabled:t,onGo:()=>(this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.OK,[Ye.UiContextKeys.ui_element]:n}),this.toggleWildcardEnabled()),onCancel:()=>this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE,[Ye.UiContextKeys.ui_element]:n})};this.props.openModal({element:s.a.createElement(et,r),isStackable:!0}),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION,[Ye.UiContextKeys.ui_element]:n})}handleUninstallButtonClick(){this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:Ye.UiElement.BTN_APP_UNINSTALL}),this.showUninstallDialog()}showUninstallDialog(){var e=this.props;const t=e.appName,a=e.appIcon,n=e.workspaceName,r=e.publicChannelCount,i=e.privateChannelCount,o={appName:t,appIcon:a,workspaceName:n,publicChannelCount:r,privateChannelCount:i,onGo:()=>(this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.ALLOW,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_UNINSTALL_DIALOG}),this.handleUninstallConfirm()),onCancel:()=>this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_UNINSTALL_DIALOG})};let l;r>0?l=i>0?pt.rt("I understand {appName} will no longer be able to access <strong>{publicChannelCount, plural, =1 {# public channel} other {# public channels}} and {privateChannelCount, plural, =1 {# other private conversation} other {# other private conversations}}</strong>.",{appName:t,publicChannelCount:r,privateChannelCount:i}):pt.rt("I understand {appName} will no longer be able to access <strong>{publicChannelCount, plural, =1 {# public channel} other {# public channels}}</strong>.",{appName:t,publicChannelCount:r}):i>0&&(l=pt.rt("I understand {appName} will no longer be able to access <strong>{privateChannelCount, plural, =1 {# private conversation} other {# private conversations}}</strong>.",{appName:t,privateChannelCount:i})),o.channelAccessCheckboxText=l,this.props.openModal({element:s.a.createElement($e,o),isStackable:!0}),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_UNINSTALL_DIALOG})}handleRevokeButtonClick(){this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:Ye.UiElement.BTN_APP_REVOKE}),this.showRevokeDialog()}handleMemberListRevokeClick(){this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_MEMBER_LIST_MENU_REVOKE}),this.showRevokeDialog()}showRevokeDialog(){var e=this.props;const t=e.appName,a=e.workspaceName;this.setState(()=>({alertBannerType:null}));const n={appName:t,onGo:()=>(this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.OK,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_REVOKE_DIALOG}),this.handleRevokeConfirm()),onCancel:()=>this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_REVOKE_DIALOG}),workspaceName:a};this.props.openModal({element:s.a.createElement(nt,n),isStackable:!0}),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_REVOKE_DIALOG})}handleRevokeConfirm(){const e=this.props.serviceId;return this.props.fetchAppRevokeUserAndUpdateAppPermissions({serviceId:e}).then(()=>{this.setState(()=>({alertBannerType:"revokeSuccess"}))}).catch(()=>{this.setState(()=>({alertBannerType:"revokeError"}))})}handleViewUserPermissionsClick(e,t){this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLICK,[Ye.UiContextKeys.ui_element]:Ye.UiElement.LINK_APP_VIEW_PERMISSIONS}),this.showUserPermissionsDialog(e,t)}showUserPermissionsDialog(e,t){var a=this.props;const n={appName:a.appName,currentUserScopeInfo:a.currentUserScopeInfo,memberId:e,onGo:()=>Object(Ae.a)(()=>this.showRevokeDialog()),onClose:()=>this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.CLOSE,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_USER_PERMISSIONS_DIALOG}),scopes:t,userScopeInfo:a.userScopeInfo};this.props.openModal({element:s.a.createElement(ut,n),isStackable:!0}),this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.IMPRESSION,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_USER_PERMISSIONS_DIALOG})}handleAppSearchUsers(e){return e.query&&this.trackClog({[Ye.UiContextKeys.action]:Ye.UiAction.SEARCH,[Ye.UiContextKeys.ui_element]:Ye.UiElement.APP_MEMBER_LIST_SEARCH}),this.props.searchUsersForApp(e).catch(()=>{this.setState(()=>({alertBannerType:"error"}))})}render(){const e=k()({onSidebarMenuItemClick:this.handleSidebarMenuItemClick,onSidebarMenuLinkClick:this.trackClogForSidebarMenuClick,onWorkspaceSectionLinkClick:this.handleWorkspaceSectionLinkClick,onRevokeButtonClick:this.handleRevokeButtonClick,onMemberListRevokeClick:this.handleMemberListRevokeClick,onUninstallButtonClick:this.handleUninstallButtonClick,onExclusionListAdd:this.handleExclusionListAdd,onExclusionListRemove:this.handleExclusionListRemove,onGrantListAdd:this.handleGrantListAdd,onGrantListRemove:this.handleGrantListRemove,onWildcardCheckboxChange:this.handleWildcardCheckboxChange,onAlertBannerClose:this.handleAlertBannerClose,onViewUserPermissionsClick:this.handleViewUserPermissionsClick,onAppSearchUsers:this.handleAppSearchUsers},this.props,this.state);return s.a.createElement(Ne,e)}}app_management_modal_container_AppManagementModalContainer.displayName="AppManagementModalContainer",app_management_modal_container_AppManagementModalContainer.displayName="AppManagementModalContainer",app_management_modal_container_AppManagementModalContainer.defaultProps=ft;const vt={clearAppPermissions:A.b,enqueueToast:xe.c,fetchAppAddResource:Pe.a,fetchAppRemoveResource:Pe.h,fetchAppUninstall:Pe.k,fetchAppWildcardDisable:Pe.l,fetchAppWildcardEnable:Pe.m,fetchAppRevokeUserAndUpdateAppPermissions:A.d,maybeUpdateAppPermissionsAfterChannelAdd:A.g,maybeUpdateAppPermissionsAfterChannelRemove:A.h,maybeUpdateAppPermissionsAfterWildcardChange:A.i,searchUsersForApp:A.k,updatePublicChannelCount:A.l,openModal:i.e,closeModal:i.a};var Et=Object(j.b)((e,{appProfile:t,serviceId:a})=>{const n=Object(Le.d)(e),s=n?Object(qe.e)(n):"";let r={};const i=Object(Xe.f)(e);if(t)r=(e=>{const t=e.app_user_id,a=e.id,n=e.name,s=e.support_url,r=e.url;return{appUserId:t,appIcon:Object(De.b)(e,48),appIconLarge:Object(De.b)(e,88),appId:a,appName:n,appSupportUrl:s,appHomepageUrl:r}})(t);else if(a){const t=Object(Be.c)(e,{serviceId:a});t&&(r=((e,t)=>{const a=e.app_user,n=e.app_id,s=e.profile,r=e.directory_profile;return{appUserId:a.id,appIcon:Object(De.b)(s,48,t),appIconLarge:Object(De.b)(s,88,t),appId:n,appName:s.name,appSupportUrl:r.support_url,appHomepageUrl:r.home_url}})(t,i))}const o=Object(A.e)(e,a);return k()({workspaceName:s,userIsAppmin:!Object(Ue.a)(e,"app_whitelist_enabled")||Object(P.k)(e),isLoading:Object(Fe.d)(o),hasError:Object(Fe.c)(o)||Object(c.a)(r),showWildcardToggle:Object(A.a)(o,"channel")},r,o,{clogger:Object(Qe.a)({state:e})})},vt)(app_management_modal_container_AppManagementModalContainer);const kt=Object(o.b)("Opens app app management modal in client",(e,t,a={})=>{const n=s.a.createElement(Et,a);e(Object(i.e)({element:n}))});kt.meta={name:"openAppManagementModal",key:"actionsOpenAppManagementModalOpenAppManagementModal",description:"Opens app app management modal in client"},kt.propTypes={serviceId:r.default.string,appProfile:r.default.object,onClose:r.default.func,showAppDirectoryLink:r.default.bool,onUninstall:r.default.func,isMobile:r.default.bool,referringEventId:r.default.string,referringUiContext:r.default.object};t.a=kt},tEVE:function(e,t,a){},tFl5:function(e,t,a){},tLal:function(e,t,a){},tMdt:function(e,t,a){"use strict";var n=a("zmn3"),s=a("fujP"),r=a("ifKl"),i=a("aK/h"),o=a("q1tI"),l=a.n(o),c=a("XHGt"),d=a("TSYQ"),u=a.n(d),p=a("pfyZ"),h=a("RAhH"),m=a("nNoG"),b=a("od5y"),f=a("XLFM"),_=a("lek6"),g=a("MREy");const y=new m.b("message"),O=(i.default.string.isRequired,i.default.string.isRequired,i.default.bool,i.default.shape({loading:i.default.bool,isHighlight:i.default.bool,feedbackOptions:i.default.object,justification:i.default.string,feedback:i.default.string}),i.default.func,i.default.func,{isHovered:!1,sliHighlight:null,onSliHighlightsDefaultFeedback:r.a,onSliHighlightsSecondaryFeedbackOption:r.a});class SliHighlightsMessageLabel extends o.PureComponent{constructor(e){super(e),this.onSliHighlightsFeedbackDefaultPositive=this.onSliHighlightsFeedbackDefaultPositive.bind(this),this.onSliHighlightsFeedbackDefaultNegative=this.onSliHighlightsFeedbackDefaultNegative.bind(this),this.renderNegativeFeedbackMenu=this.renderNegativeFeedbackMenu.bind(this)}onSliHighlightsFeedbackDefaultPositive(){this.props.sliHighlight.feedback||this.props.onSliHighlightsDefaultFeedback(!0)}onSliHighlightsFeedbackDefaultNegative(){this.props.sliHighlight.feedback||this.props.onSliHighlightsDefaultFeedback(!1)}renderPositiveHighlightLabel(){return l.a.createElement("span",null,l.a.createElement("span",{className:"c-message__label__highlight_title"},y.t("Highlight")),(this.props.sliHighlight.justification||this.props.isHovered)&&" \u2014 ",this.renderFeedbackControls())}renderFeedbackControls(){var e=this.props;const t=e.isHovered,a="default_positive"===e.sliHighlight.feedback;if(t){const e=u()({"c-message__label__highlight_positive":!0,"c-message__label__highlight_positive--active":a}),t=u()({"c-message__label__highlight_negative":!0,"c-message__label__highlight_negative--inactive":a});return l.a.createElement("span",null,y.t("Is this helpful?"),l.a.createElement(h.c,{tip:a?y.t("Thank you!"):y.t("This was helpful")},l.a.createElement(f.c,{className:e,onClick:this.onSliHighlightsFeedbackDefaultPositive},l.a.createElement(b.b,{type:"thumbs-up",size:"inherit",inline:!0}))),l.a.createElement(h.c,{tip:y.t("This wasn\u2019t helpful")},l.a.createElement(f.c,{className:t,onClick:this.onSliHighlightsFeedbackDefaultNegative},l.a.createElement(b.b,{type:"thumbs-down",size:"inherit",inline:!0}))))}return l.a.createElement(_.a,{text:this.props.sliHighlight.justification})}renderNegativeHighlightLabel(){return l.a.createElement("span",null,l.a.createElement("strong",null,y.t("What\u2019s not working about this highlight?"))," ",y.t("Let us know, and we\u2019ll adjust."),"\xa0",l.a.createElement(g.e,{renderMenu:this.renderNegativeFeedbackMenu,position:"right",offsetX:0,offsetY:0},l.a.createElement(f.c,{className:"c-message__label__feedback_dropdown btn_unstyle sk_highlight_accent"},y.t("Give Feedback")," ",l.a.createElement(b.b,{type:"chevron-down",inline:!0}))))}renderNegativeFeedbackMenu(e){const t=this.props.sliHighlight.feedbackOptions;return Object(s.a)(t)?null:l.a.createElement(g.f,e,Object(n.a)(t.negative,e=>l.a.createElement(g.b,{key:e.args.ts,label:l.a.createElement(_.a,{text:e.text,noLinking:!0,showTooltips:!1}),onSelected:()=>this.props.onSliHighlightsSecondaryFeedbackOption(e.args)})))}render(){const e=this.props.sliHighlight;return e.feedback&&"default_positive"!==e.feedback?this.renderNegativeHighlightLabel():this.renderPositiveHighlightLabel()}}SliHighlightsMessageLabel.displayName="SliHighlightsMessageLabel",SliHighlightsMessageLabel.defaultProps=O,t.a=Object(c.b)(null,function(e,{channelId:t,ts:a,sliHighlight:n}){return{onSliHighlightsDefaultFeedback:s=>e(Object(p.g)({channelId:t,ts:a,feedback:s?"default_positive":"default_negative",leftFeedback:s,args:n.feedbackOptions[s?"default_positive":"default_negative"].args,requestId:n.requestId})),onSliHighlightsSecondaryFeedbackOption:s=>e(Object(p.g)({channelId:t,ts:a,feedback:"negative",leftFeedback:!0,args:s,requestId:n.requestId}))}})(SliHighlightsMessageLabel)},thgq:function(e,t,a){},tn36:function(e,t,a){"use strict";function n(e,t){if(!t||!Array.isArray(t))throw new Error("bindAll: methodNames must be an array of method name strings to bind to the object");for(let a=0;a<t.length;a++){const n=e[t[a]];"function"==typeof n&&(e[t[a]]=n.bind(e))}return e}a.d(t,"a",function(){return n})},tx91:function(e,t,a){},uC0n:function(e,t,a){},uI5u:function(e,t,a){"use strict";var n=a("ifKl"),s=a("q1tI"),r=a.n(s),i=a("aK/h"),o=a("nNoG"),l=a("TSYQ"),c=a.n(l),d=a("tn36"),u=a("VymY"),p=a("18Pa"),h=a("lfjV");a("K1NN");const m=new o.b("sk_banner"),b=(i.default.oneOf(["info","success","warning","urgent","neutral"]),i.default.any.isRequired,i.default.bool,i.default.bool,i.default.number,i.default.string,i.default.bool,i.default.string,i.default.func,i.default.func,i.default.func,{type:"success",showCloseButton:!0,autoFadeout:!1,topOffset:0,className:null,isFixedPosition:!0,"data-qa":"banner",onClose:n.a,onFocus:n.a,onBlur:n.a}),f=2e3;class banner_Banner extends s.PureComponent{constructor(e){super(e),this.state={isShowing:!0,opacity:1},Object(d.a)(this,["handleCloseButtonClick","focus"]),this.handleCloseButtonClick=this.handleCloseButtonClick.bind(this),this.cancelAnimation=n.a,this.banner=r.a.createRef()}componentDidMount(){this.fadeOutMaybe()}componentWillUnmount(){this.cancelAnimation()}handleCloseButtonClick(){const e=this.props.onClose;this.setState(()=>({isShowing:!1})),e()}fadeOutMaybe(){var e=this.props;const t=e.autoFadeout,a=e.onClose;if(!t)return;const n=Object(h.a)({delay:f,fromValue:1,toValue:0,duration:f,easing:"easeOutQuad",onTick:({value:e,nextTick:t})=>{this.setState(()=>({opacity:e})),t()},onComplete:()=>{this.setState(()=>({isShowing:!1})),a()}});this.cancelAnimation=n.cancel}focus(){const e=Object(u.b)(this.banner.current);e&&e.focus()}render(){var e=this.props;const t=e.type,a=e.children,n=e.showCloseButton,s=e.topOffset,i=e.className,o=e.isFixedPosition,l=e["data-qa"];var d=this.state;const u=d.isShowing,h=d.opacity;if(!u)return!1;const b=c()("c-banner",{[`c-banner--${t}`]:!!t,"c-banner--fixed":o},i),f="warning"!==t?"dark":void 0;return r.a.createElement("div",{role:"alert",className:b,style:{top:s,opacity:h},"data-qa":l,ref:this.banner,onFocus:this.props.onFocus,onBlur:this.props.onBlur},r.a.createElement("div",{className:"c-banner__text"},a),n&&r.a.createElement(p.a,{className:"c-banner__close",icon:"times",onClick:this.handleCloseButtonClick,backgroundStyle:f,"aria-label":m.t("Dismiss")}))}}banner_Banner.displayName="Banner",banner_Banner.defaultProps=b,banner_Banner.displayName="Banner";var _=banner_Banner;t.a=_},uS0p:function(e,t,a){},um7Q:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return i});a("NFsq"),a("CpTu");var n=a("t85p"),s=a("cErB");const r=(e,t)=>`https://${function(e,t){return`${t||"my"}.${Object(s.d)(Object(n.f)(e,"abs_root_url"))}`}(e,t)}`,i=(e,t)=>`https://${function(e,t){return`${t}.enterprise.${Object(s.d)(Object(n.f)(e,"abs_root_url"))}`}(e,t)}`},uxXE:function(e,t,a){e.exports=a.p+"sidebar_bg_standard@2x-0801db7.png"},"v+20":function(e,t,a){},vKzi:function(e,t,a){},vOUN:function(e,t,a){},vP1t:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("ifKl"),i=a("q1tI"),o=a.n(i),l=a("aK/h"),c=a("XHGt"),d=a("TSYQ"),u=a.n(d),p=a("yPgC"),h=a("yHhI"),m=a("Zr7G"),b=a("uvIC"),f=a("RfGh"),_=a("9gIX"),g=a("MAit");const y="IMPROVED_SEARCH",O=(p.a.File().isRequired,p.a.File().isRequired,l.default.number,l.default.func,l.default.string,l.default.bool,l.default.func,l.default.object,l.default.object,{index:null,clogLinkClick:r.a,className:null,fullWidth:!1,onClick:r.a,logger:{error:r.a},telemeter:m.d});class SearchFile extends i.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.props.onClick(e,{file:this.props.file,index:this.props.index})}componentDidCatch(e,t){this.props.telemeter.count("search_ui_files_result_file_render_error"),this.props.logger.error(y,`Error caught by SearchFile ${t.componentStack}`)}render(){var e=this.props;const t=e.file,a=e.fileFromRedux,n=e.clogLinkClick,r=e.fullWidth,i=u()("p-search_file",this.props.className),l=a&&a.title,c=a&&a.name,d=s()({},a,{title:t.search_title||t.title||l,name:t.search_name||t.name||c});return o.a.createElement(f.a,{file:d,className:i,fullWidth:r,clogLinkClick:n,"data-qa":"search_result_file"},o.a.createElement(_.a,{file:d,onClick:this.onClick},o.a.createElement(g.a,{file:d,excludeTime:!0})))}}SearchFile.displayName="SearchFile",SearchFile.defaultProps=O;t.a=Object(c.b)((e,{file:t})=>({fileFromRedux:t?Object(b.c)(e,t.id):null,logger:Object(h.a)({state:e}),telemeter:Object(m.c)({state:e})}))(SearchFile)},vr4i:function(e,t,a){},vv9w:function(e,t,a){},wEz6:function(e,t,a){e.exports=a.p+"shared_channels-cdd6afa.png"},wMxR:function(e,t,a){},wb76:function(e,t,a){},wljo:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a("nNoG"),s=a("9/ob"),r=a("0f2Y"),i=(a("aK/h"),a("q1tI")),o=a.n(i);const l=new n.b("search");function c(e){const t=e.onClick,a=e.short,n=e.className;return o.a.createElement(s.a,{enabled:["feature_tinyspeck"]},o.a.createElement("span",{className:n},a?"":`${l.t("Something off?")} `,o.a.createElement(r.a,{onClick:t},l.t("Give feedback"))))}c.displayName="FeedbackLink",c.defaultProps={className:"",short:!1}},wvq5:function(e,t,a){"use strict";var n=a("wSSu"),s=a.n(n);t.a=((e,t,a)=>{if(!t||!t.setAttribute)throw new TypeError("React mount point must be a valid HTML element");t.setAttribute("data-reactroot",""),s.a.render(e,t,a)})},"x++y":function(e,t,a){},x4cI:function(e,t,a){},xRgT:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("sk9p"),i=a.n(r),o=a("ifKl"),l=a("q1tI"),c=a.n(l),d=a("XHGt"),u=a("aK/h"),p=a("nNoG"),h=a("TSYQ"),m=a.n(h),b=a("ngQI"),f=a("tn36"),_=a("g5qt"),g=a("lhZz"),y=a("kLJo"),O=a("toaU"),C=a("HuaI"),v=a("IY6O"),E=a("s5Is"),k=a("t85p"),S=a("Tc5z"),j=a("peKf"),I=a("SNtu"),w=a("rWF5"),T=a("RQI5"),N=a("2jER"),A=a("/Rx2"),R=a("Smdl"),M=a("yHhI"),P=a("negh"),x=a("kOzZ"),L=a("kcos"),F=a("TGBA"),D=a("lE2N"),B=a("JvzI"),U=a("KGMq"),q=a("1hAG"),H=a("hjTk"),W=a("od5y"),G=a("llxT"),K=a("MREy");u.default.func.isRequired,u.default.func.isRequired,u.default.string.isRequired,u.default.object.isRequired,u.default.arrayOf(u.default.object).isRequired,u.default.bool,u.default.object;class team_switcher_context_button_TeamSwitcherContextButton extends l.PureComponent{constructor(e){super(e),this.openFindMoreWorkspacesModal=this.openFindMoreWorkspacesModal.bind(this),this.renderMenu=this.renderMenu.bind(this)}getOneWorkpacePerOrg(){return Object(D.a)(Object(F.a)(this.props.teams),"enterprise_id").filter(e=>e.enterprise_id)}openFindMoreWorkspacesModal(e){this.props.currentTeam.enterprise_id===e.enterprise_id?this.props.openFindMoreWorkspacesModal(this.props.currentUserId):Object(y.g)(O.a,{teamId:e.id},{reason:"team-sidebar/selectTeam"}).then(()=>{this.props.openFindMoreWorkspacesModal(this.props.currentUserId)})}openFindGlobalWorkspaces(){Object(H.a)("https://slack.com/signin/find")}renderMenu(e){const t=this.getOneWorkpacePerOrg().map(e=>{return{label:`Find more workspaces on ${e.enterprise_name}`,click:()=>this.openFindMoreWorkspacesModal(e),key:e.enterprise_id}}),a=[{label:"Add a new workspace",click:this.props.startWorkspaceSignIn,key:"add"},{label:"Find workspaces",click:this.openFindGlobalWorkspaces,key:"find"}].concat(t);return this.props.clogger.track("TEAM_SIDEBAR_CONTEXT_CLICK",{is_iap1:this.props.isIAPhase1Enabled}),c.a.createElement(K.a,s()({},e,{template:a}))}render(){const e=m()("p-team_sidebar__add_button",{"p-team_sidebar__add_button--mac":Object(w.q)()});return c.a.createElement(K.e,{position:"right-bottom",offsetX:8,renderMenu:this.renderMenu},c.a.createElement(G.a,{className:e},c.a.createElement(W.b,{type:"ellipsis",className:"p-team_sidebar__add_button_icon"})))}}team_switcher_context_button_TeamSwitcherContextButton.displayName="TeamSwitcherContextButton",team_switcher_context_button_TeamSwitcherContextButton.defaultProps={isIAPhase1Enabled:!1,clogger:{}};var V=Object(d.b)(e=>{const t=Object(q.d)(e),a=Object(g.getStoreInstanceByTeamId)(t.id).getState();return{locale:Object(B.a)(),currentUserId:Object(k.d)(e),currentTeam:Object(q.d)(e),isIAPhase1Enabled:Object(L.c)(a),clogger:Object(x.a)({state:a})}},e=>({openFindMoreWorkspacesModal:(...t)=>e(Object(U.a)(...t))}))(team_switcher_context_button_TeamSwitcherContextButton),z=a("RAhH"),$=a("XL7r"),Y=a("5zUo"),Q=a("v8Qo"),X=a("Ejsr"),J=a("RMmo"),Z=a("2fzK"),ee=a("2Y1Y"),te=a("tVnY"),ae=a("Bce3"),ne=a("XLFM");const se=300,re=(u.default.node,u.default.string,u.default.bool,u.default.oneOfType([u.default.string,u.default.func]),u.default.string.isRequired,u.default.func.isRequired,u.default.func,{children:null,className:void 0,disabled:!1,tooltip:void 0,onTrigger:o.a});class history_button_HistoryButton extends l.PureComponent{constructor(e){super(e),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.pressTimer=void 0}componentWillUnmount(){this.pressTimer&&clearTimeout(this.pressTimer),window.removeEventListener("mouseup",this.onMouseUp)}onMouseDown(e){this.props.disabled||0===e.button&&(e.persist(),this.pressTimer=setTimeout(()=>this.props.onTrigger(e),se),window.addEventListener("mouseup",this.onMouseUp))}onMouseUp(){this.pressTimer&&clearTimeout(this.pressTimer),window.removeEventListener("mouseup",this.onMouseUp)}render(){var e=this.props;const t=e.disabled,a=e.tooltip,n=e["aria-label"],s=m()("p-global_nav__top_button",this.props.className,{"p-global_nav__top_button--disabled":t});return c.a.createElement(({tip:e,children:a})=>t||!e?a:c.a.createElement(z.c,{tip:e,delay:800,position:"bottom",offsetY:Ia,tipClassName:"p-global_nav__top_history_tip"},a),{tip:a},c.a.createElement(ne.c,{className:s,disabled:t,onClick:this.props.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,"aria-label":n},this.props.children))}}history_button_HistoryButton.displayName="HistoryButton",history_button_HistoryButton.defaultProps=re;var ie=history_button_HistoryButton,oe=a("brL+"),le=a("4Twu");const ce=new p.b("global_nav"),de=(u.default.string,u.default.string,u.default.string,u.default.string,u.default.string,u.default.string,u.default.bool,{viewId:void 0,viewName:void 0,teamId:void 0,teamName:void 0,teamIcon:void 0,currentTeamId:void 0,featureGlobalNav:!1});class history_item_HistoryItem extends l.Component{renderTeamIcon(){var e=this.props;const t=e.teamIcon,a=e.teamName;return c.a.createElement(z.c,{tip:a,position:"bottom",zIndex:"above_fs"},c.a.createElement("div",{className:"p-global_nav__top_history_item_team_icon",style:{backgroundImage:`url(${t})`}}))}renderThreads(){var e=this.props;const t=e.teamId,a=e.currentTeamId;if(!e.featureGlobalNav)return null;const n=t===a?c.a.createElement(W.b,{type:"small-reply",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon(),s=ce.t("Threads");return c.a.createElement(l.Fragment,null,n,s)}renderUnreads(){var e=this.props;const t=e.teamId,a=e.currentTeamId;if(!e.featureGlobalNav)return null;const n=t===a?c.a.createElement(W.b,{type:"list",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon(),s=ce.t("All Unreads");return c.a.createElement(l.Fragment,null,n,s)}render(){var e=this.props;const t=e.viewId,a=e.viewName,n=e.teamId,s=e.currentTeamId;return"Vall_threads"===t?this.renderThreads():"Vall_unreads"===t?this.renderUnreads():n===s?c.a.createElement(le.a,{channelId:t,className:"p-global_nav__top_history_item_channel_name"}):c.a.createElement(l.Fragment,null,this.renderTeamIcon(),a)}}history_item_HistoryItem.displayName="HistoryItem",history_item_HistoryItem.defaultProps=de;var ue=Object(d.b)(e=>({currentTeamId:Object(oe.b)(e),featureGlobalNav:Object(k.m)(e,"feature_global_nav")}))(history_item_HistoryItem);const pe=new p.b("global_nav"),he=(u.default.object.isRequired,u.default.func,u.default.func,u.default.func,u.default.func,u.default.func,u.default.bool,u.default.object.isRequired,{back:o.a,forward:o.a,index:o.a,sync:o.a,action:u.default.func,featureGlobalNav:!1});class history_History extends l.Component{constructor(e){super(e),this.onBackClick=this.onBackClick.bind(this),this.onForwardClick=this.onForwardClick.bind(this),this.renderBackMenu=this.renderBackMenu.bind(this),this.renderForwardMenu=this.renderForwardMenu.bind(this),this.renderBackTooltip=this.renderBackTooltip.bind(this),this.renderForwardTooltip=this.renderForwardTooltip.bind(this)}componentDidMount(){if(!Object(te.c)())return;Object(ae.b)(()=>this.props.sync());const e=Object(w.E)(),t=[{keys:e?"alt+left":["command+[","command+left"],handler:e=>{this.shouldPreventShortcut(e)||(e.preventDefault(),this.props.action("GLOBAL-NAV","Navigating back in history with key command"),this.props.back(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_BACK"}}}))}},{keys:e?"alt+right":["command+]","command+right"],handler:e=>{this.shouldPreventShortcut(e)||(e.preventDefault(),this.props.action("GLOBAL-NAV","Navigating forward in history with key command"),this.props.forward(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_FORWARD"}}}))}}];this.keyCommands||(this.keyCommands=new J.a),this.keyCommands.bindAll(t)}componentWillUnmount(){this.keyCommands&&this.keyCommands.reset()}onBackClick(){this.props.back(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK"}}})}onForwardClick(){this.props.forward(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD"}}})}shouldPreventShortcut(e){if(e.metaKey&&("ArrowRight"===e.key||"ArrowLeft"===e.key)){if(!(Object(Z.a)()&&Object(ee.g)(document.activeElement)||document.activeElement===document.body))return!0}return!1}renderStackMenu(e,t){const a=e=>`${e.viewId}:${e.teamId}`,n=Object(D.a)(e,a).map(e=>({label:c.a.createElement(ue,e),key:a(e),click:()=>{this.props.index({target:e.index}),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_STACK_ITEM"}}})},className:"p-global_nav__top_history_item"}));return c.a.createElement(K.a,s()({},t,{template:n}))}renderBackMenu(e){const t=Object(X.a)(this.props.history);return t?(this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK_STACK"}}}),this.renderStackMenu(t.reverse(),e)):null}renderForwardMenu(e){const t=Object(X.b)(this.props.history);return t?(this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD_STACK"}}}),this.renderStackMenu(t,e)):null}renderBackTooltip(){if(!this.props.featureGlobalNav)return null;const e=Object(w.q)()?"\u2318[":pe.t("Alt+Left Arrow");return c.a.createElement(l.Fragment,null,pe.t("Go back"),c.a.createElement("span",{className:"p-global_nav__tip_shortcut"},e))}renderForwardTooltip(){if(!this.props.featureGlobalNav)return null;const e=Object(w.q)()?"\u2318]":"Alt+Right Arrow";return c.a.createElement(l.Fragment,null,pe.t("Go forward"),c.a.createElement("span",{className:"p-global_nav__tip_shortcut"},e))}render(){var e=this.props;const t=e.history;if(!e.featureGlobalNav)return null;if(!Object(te.c)())return null;const a=!Object(X.a)(t)||!Object(X.a)(t).length,n=!Object(X.b)(t)||!Object(X.b)(t).length,r={position:"bottom-left",offsetX:-12,offsetY:wa,customTrigger:!0};return c.a.createElement(l.Fragment,null,c.a.createElement(K.e,s()({renderMenu:this.renderBackMenu},r),c.a.createElement(ie,{className:"p-global_nav__top_history p-global_nav__top_history--back",onClick:this.onBackClick,disabled:a,tooltip:this.renderBackTooltip,"aria-label":pe.t("Go back")},c.a.createElement(W.b,{type:"chevron-large-left",className:"p-global_nav__top_button_icon"}))),c.a.createElement(K.e,s()({renderMenu:this.renderForwardMenu},r),c.a.createElement(ie,{className:"p-global_nav__top_history",onClick:this.onForwardClick,disabled:n,tooltip:this.renderForwardTooltip,"aria-label":pe.t("Go forward")},c.a.createElement(W.b,{type:"chevron-large-right",className:"p-global_nav__top_button_icon"}))))}}history_History.displayName="History",history_History.defaultProps=he;const me={back:Q.a,forward:Q.b,index:Q.c,sync:Q.f};var be=Object(d.b)(e=>({history:Object(Y.b)(e),featureGlobalNav:Object(k.m)(e,"feature_global_nav"),action:Object(M.a)({state:e}).action,clogger:Object(x.a)({state:e})}),me)(history_History),fe=a("5mKg"),_e=a("bmfP"),ge=a("jo6Y"),ye=a.n(ge),Oe=a("AjwY"),Ce=a("6Jf9"),ve=a("SQvH"),Ee=a("XUHR"),ke=a("qN/r"),Se=a("ROZo");const je=Object(Se.b)("TS.ui.workspaces.start");var Ie=a("8vJI"),we=a("N/g+");const Te=Object(Se.b)("TS.magic_login.execute"),Ne=(u.default.string.isRequired,u.default.string,u.default.string,u.default.string,{org:void 0,icon:void 0,url:void 0}),Ae=({name:e,icon:t,org:a,url:n})=>c.a.createElement("div",{className:"p-global_nav__top_menu_header"},c.a.createElement("div",{className:"p-global_nav__top_menu_header_icon",style:{backgroundImage:t&&`url(${t})`}}),c.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},c.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},e),c.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},a||n)));Ae.displayName="TeamHeader",Ae.defaultProps=Ne;var Re=Object(d.b)(e=>{const t=Object(q.d)(e);return{name:Object(fe.e)(t),org:t.enterprise_name,icon:t.icon&&t.icon.image_88||void 0,url:`${t.domain}.slack.com`}})(Ae),Me=a("G4ux"),Pe=a("syB0"),xe=a("wSSu"),Le=a.n(xe),Fe=a("wvq5"),De=a("kEaP"),Be=a("yg0S");const Ue=(e,t)=>{const a=document.getElementById("manage_shared_channels_modal_mount_point");if(!e)throw new Error("mountChannelOptions must be called with a teamId parameter");const n=Object(g.getStoreInstanceByTeamId)(e);Object(Fe.a)(c.a.createElement(d.a,{store:n},c.a.createElement(Be.a,null,c.a.createElement(De.a,s()({},t,{onClose:()=>{Object(Pe.a)(()=>{Le.a.unmountComponentAtNode(a)})}})))),a)};var qe=a("ONPw");const He=new p.b("global_nav"),We=(u.default.object,u.default.object.isRequired,u.default.bool,u.default.string,u.default.bool,u.default.bool,{menuProps:void 0,isEnterprise:!1,enterpriseURL:void 0,isAppmin:!1,featureGlobalNav:!1}),Ge=({featureGlobalNav:e,team:t,isEnterprise:a,enterpriseURL:n,isAppmin:r,menuProps:i})=>{if(!e)return null;const o=[{label:He.t("Manage members"),href:Object(fe.n)(t,"/admin")},{label:He.t("Workspace settings"),href:Object(fe.n)(t,"/admin/settings")},{label:He.t("Organization settings"),href:`https://${n}/manage`,hide:!a},{label:He.t("Manage apps"),href:Object(fe.n)(t,"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"),hide:a||!r},{label:He.t("Manage shared channels"),click:()=>Ue(t.id),hide:!Object(qe.a)()}].filter(e=>!e.hide);return c.a.createElement(K.a,s()({},i,{template:o}))};Ge.displayName="TeamAdminSubmenu",Ge.defaultProps=We;var Ke=Object(d.b)(e=>{const t=Object(q.d)(e);return{team:t,isEnterprise:Object(fe.s)(t),enterpriseURL:Object(k.f)(e,"enterprise_url"),isAppmin:Object(Me.k)(e),featureGlobalNav:Object(k.m)(e,"feature_global_nav")}})(Ge),Ve=a("0BC7"),ze=a("7EGn"),$e=a("h9PG"),Ye=a("AE1P"),Qe=a("Fdc0"),Xe=a("x4bP"),Je=a("Qrgz"),Ze=a("0xwB");function et(e){const t=Object(Me.b)(e),a=Object(q.d)(e),n=Object(Qe.eb)(e,t),s=Object(Qe.Eb)(e,t),r=Object(Qe.Gb)(t),i=Object(k.q)(e),o=Object(fe.D)(a),l=n,c=Object(Ze.b)(),d=Object(k.m)(e,"feature_builder_can_access"),u=n||!r&&(!Object($e.a)(e,"emoji_only_admins")||!Object($e.a)(e,"slackbot_responses_only_admins")||!Object($e.a)(e,"loading_only_admins")),p=i&&Object(Ye.g)(e)&&Object(Me.k)(e),h=n||!Object($e.a)(e,"stats_only_admins")&&!r,m=(s||Object($.k)(e,"purchaser")||Object($e.a)(e,"all_users_can_purchase"))&&o,b=!o&&!Object(_.T)(),f=i&&!Object(Qe.Gb)(t),g=o&&Object(Je.k)(e),y=Object(k.f)(e,"help_url"),O=Object(k.m)(e,"feature_tinyspeck")||w.l,C=i&&!r,v=Object(k.h)(e).length-1,E=(Object(Xe.a)()?v:v+Object(ze.a)(t,"enterprise_user.teams.length",1))>=1&&!_.V;return{administration:l,invite:c,launchWorkflowBuilder:d,customize:u,manageApps:p,analytics:h,billing:m,plans:b,orgShared:f,externalShared:g,help:y,version:O,findWorkspaces:C,switchWorkspaces:E,signin:!E&&!!Object(k.f)(e,"signin_url")}}const tt=new p.b("global_nav"),at=(u.default.object,u.default.object.isRequired,u.default.func,u.default.func,u.default.string.isRequired,u.default.string,u.default.string,u.default.func,u.default.func,u.default.func,u.default.bool,{actions:{},signOut:o.a,openPrefsModal:o.a,openSharedChannelIntroductionModal:o.a,openInviteModal:o.a,signoutURL:void 0,signinURL:void 0,renderSonicMenu:void 0,featureGlobalNav:!1});class team_menu_TeamMenu extends l.Component{constructor(e){super(e),this.onSigninClick=this.onSigninClick.bind(this),this.onOpenAppClick=this.onOpenAppClick.bind(this),this.renderAdminSubmenu=this.renderAdminSubmenu.bind(this),this.renderWorkspacesSubmenu=this.renderWorkspacesSubmenu.bind(this)}onSigninClick(e){_.V&&(e.preventDefault(),Object(_.rc)())}onOpenAppClick(e){e.preventDefault(),Te({fallback_to_browser:!0,browser_uri:"/downloads",app_uri:"/ssb/open"})}renderAdminSubmenu(e){return c.a.createElement(Ke,{menuProps:e})}renderWorkspacesSubmenu(e){return c.a.createElement(Ve.a,{menuProps:e})}render(){var e=this.props;const t=e.actions,a=e.renderSonicMenu,n=e.featureGlobalNav,r=e.signoutName,i=e.signoutURL,o=e.signinURL,l=e.team,d=ye()(e,["actions","renderSonicMenu","featureGlobalNav","signoutName","signoutURL","signinURL","team"]);if(!n)return null;const u=[{type:"submenu",label:"Sonic",renderSubmenu:a,hide:!a},{type:"separator"},{type:"custom",children:c.a.createElement(Re,{key:"team-header"})},{type:"separator"},{label:tt.t("Preferences"),shortcut:Object(w.q)()&&_.V&&"\u2318,",click:()=>this.props.openPrefsModal()},{type:"separator"},{type:"submenu",label:tt.t("Administration"),renderSubmenu:this.renderAdminSubmenu,hide:!t.administration},{label:tt.t("Analytics"),hide:!t.analytics,href:Object(fe.n)(l,"/stats")},{label:tt.t("Billing"),hide:!t.billing,href:Object(fe.n)(l,"/admin/billing")},{label:tt.t("See paid plans"),hide:!t.plans,href:Object(fe.n)(l,Object(Oe.k)({entryPoint:"global_nav_team_menu"}))},{label:tt.t("Customize Slack"),hide:!t.customize,href:Object(fe.n)(l,"/customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click"),target:"_blank"},{type:"separator"},{label:tt.t("Invite people"),hide:!t.invite,click:()=>this.props.openInviteModal({source:"team_menu"})},{label:tt.t("Manage apps"),hide:!t.manageApps,href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"},{label:tt.t("Shared channels"),hide:!t.externalShared,click:()=>Object(R.a)()?this.props.openSharedChannelIntroductionModal():Object(ve.a)()},{type:"separator"},{label:tt.t("Help & feedback"),hide:!t.help,click:Ie.a},{label:"Version info (TS only)",hide:!t.version,click:we.a},{type:"separator"},{label:tt.t("Find more workspaces"),hide:!t.findWorkspaces,click:()=>je()},{type:"submenu",label:tt.t("Switch workspaces"),hide:Object(R.a)()||!t.switchWorkspaces,renderSubmenu:this.renderWorkspacesSubmenu},{label:tt.t("Sign in to another workspace"),hide:!t.signin,href:o,click:this.onSigninClick},{label:tt.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:r}),hide:!Object(R.a)(),click:()=>this.props.signOut(l.id),dataQa:"logout"},{label:tt.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:r}),hide:Object(R.a)(),href:i,target:"_self",dataQa:"logout"},{type:"separator"},{label:tt.rt("Open the Slack App"),hide:_.V,href:Object(fe.n)(l,"/ssb/open"),click:this.onOpenAppClick}].filter(e=>!e.hide);return c.a.createElement(K.a,s()({},d,{template:u,menuClassNames:"p-global_nav__top_team_menu",stripTerminalSeparators:!0}))}}team_menu_TeamMenu.displayName="TeamMenu",team_menu_TeamMenu.defaultProps=at;var nt=Object(d.b)(e=>{const t=Object(q.d)(e);return{actions:et(e),team:t,signoutName:t.enterprise_name||Object(fe.e)(t),signoutURL:Object(fe.s)(t)?Object(k.f)(e,"enterprise_logout_url"):Object(k.f)(e,"logout_url"),signinURL:Object(k.f)(e,"signin_url"),featureGlobalNav:Object(k.m)(e,"feature_global_nav")}},e=>({signOut:(...t)=>e(Object(E.removeWorkspace)(...t)),openPrefsModal:()=>e(Object(ke.a)()),openSharedChannelIntroductionModal:(...t)=>e(Object(Ee.a)(...t)),openInviteModal:(...t)=>e(Object(Ce.a)(...t))}))(team_menu_TeamMenu);const st=new p.b("global_nav"),rt=(u.default.string,u.default.bool,u.default.bool,u.default.object.isRequired,u.default.func,{name:void 0,featureGlobalNav:!1,featureOfflineMode:!1,renderSonicMenu:void 0});class name_Name extends l.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.renderMenu=this.renderMenu.bind(this),this.renderIcon=this.renderIcon.bind(this)}onClick(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_TEAM_MENU"}}})}renderMenu(e){return c.a.createElement(nt,s()({},e,{renderSonicMenu:this.props.renderSonicMenu}))}renderIcon(){return this.props.featureOfflineMode?c.a.createElement(l.Fragment,null,c.a.createElement(_e.b,null,c.a.createElement(W.b,{type:"chevron-down",className:"p-global_nav__top_name_icon"})),c.a.createElement(_e.a,null,c.a.createElement(z.c,{tip:st.t("No network connection"),position:"bottom"},c.a.createElement(W.b,{type:"cloud-offline-small",className:"p-global_nav__top_name_icon margin_left_25"})))):c.a.createElement(W.b,{type:"chevron-down",className:"p-global_nav__top_name_icon"})}render(){var e=this.props;const t=e.name,a=e.featureGlobalNav;return t&&a?c.a.createElement(K.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:-4,allowanceX:12,onClick:this.onClick},c.a.createElement(ne.c,{className:"p-global_nav__top_name","data-qa":"team_menu","aria-label":st.t("Team menu")},c.a.createElement("div",{className:"overflow_ellipsis"},t),this.renderIcon())):null}}name_Name.displayName="Name",name_Name.defaultProps=rt;var it=Object(d.b)(e=>{const t=Object(q.d)(e);return{name:t?Object(fe.e)(t):void 0,featureGlobalNav:Object(k.m)(e,"feature_global_nav"),featureOfflineMode:Object(k.m)(e,"feature_offline_mode"),clogger:Object(x.a)({state:e})}})(name_Name),ot=a("eqKo"),lt=a("3dqR"),ct=a("6avh"),dt=a("ZYn4"),ut=a("/LVU"),pt=a("W045"),ht=a("yZEV"),mt=a("vmJv"),bt=a("4M+g"),ft=a("4vzu"),_t=a("s19S"),gt=a("/Qam");u.default.string,u.default.string,u.default.string,u.default.bool,u.default.bool;const yt={name:void 0,secondary:void 0,userId:void 0,inDnd:!1,inDndBySnooze:!1},Ot=({name:e,secondary:t,userId:a,inDnd:n,inDndBySnooze:s})=>{const r=t?c.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},t):null,i=m()("p-global_nav__top_menu_header","p-global_nav__top_menu_header--full","p-global_nav__top_menu_header--user",{"p-global_nav__top_menu_snooze_background":n&&s,"p-global_nav__top_menu_schedule_background":n&&!s});return c.a.createElement("div",{className:i},c.a.createElement(lt.c,{userId:a,size:36,isInteractive:!1,className:"p-global_nav__top_menu_header_icon",tabIndex:"-1"}),c.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},c.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},e),r))};Ot.displayName="UserHeader",Ot.defaultProps=yt;var Ct=Object(d.b)(e=>{const t=Object(Me.b)(e);const a=Object(ft.f)(e).snoozeEnabled;return{name:Object(Qe.V)(e,t),secondary:Object(Qe.M)(e,t),userId:t.id,inDnd:!!Object(ft.d)(e,t.id),inDndBySnooze:a}})(Ot),vt=a("mqzt");a("1iAE");const Et=new p.b("do_not_disturb"),kt=(u.default.bool.isRequired,u.default.number,u.default.number,u.default.bool,{snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:!1});class dnd_header_DndHeader extends l.PureComponent{render(){var e=this.props;const t=e.inDndBySnooze,a=e.snoozeEndTs,n=e.dndEndTs,s=e.do24hrTime,r=m()("p-dnd_header",{"p-dnd_header__snooze_background":t,"p-dnd_header__schedule_background":!t}),i=t?a:n,o=Object(vt.b)(i,{do24hrTime:s});return c.a.createElement("div",{className:r},c.a.createElement("div",{className:"p-dnd_header__status"},c.a.createElement("div",null,c.a.createElement("strong",null,Et.t("Do Not Disturb: ON",{fallbackHash:"e9f808845f44c3345ade56f562f58e9da896e00e"}))),c.a.createElement("div",{className:"p-dnd_header__sub_text"},o)))}}dnd_header_DndHeader.displayName="DndHeader",dnd_header_DndHeader.defaultProps=kt;var St=Object(d.b)(e=>{const t=Object(k.d)(e);const a=Object(ft.e)(e,t).nextDndEndTs;var n=Object(ft.f)(e);return{inDndBySnooze:n.snoozeEnabled,snoozeEndTs:n.snoozeEndTs,dndEndTs:a,do24hrTime:Object($.k)(e,"time24")}})(dnd_header_DndHeader);function jt(e){const t=Object(k.m)(e,"feature_tinyspeck");return{help:Object(k.f)(e,"help_url"),version:t||w.l}}const It=new p.b("global_nav"),wt=(u.default.object,u.default.object,u.default.string,u.default.func,u.default.func,u.default.object,u.default.bool,u.default.bool,u.default.func,u.default.func,u.default.bool,u.default.func,u.default.func,u.default.func,{actions:void 0,currentMember:void 0,currentPresence:void 0,onTriggerClose:o.a,openCustomStatusDialog:o.a,currentChannel:void 0,inDnd:!1,inDndBySnooze:!1,endDndSnooze:o.a,endDndSchedule:o.a,featureGlobalNav:!1,toggleUserPresence:o.a,updateCurrentMemberProfile:o.a,openPrefsModal:o.a});class user_menu_UserMenu extends l.Component{constructor(e){super(e),this.renderDndMenu=this.renderDndMenu.bind(this),this.renderPresenceLabel=this.renderPresenceLabel.bind(this)}renderDndMenu(e){const t=this.props.currentChannel;return c.a.createElement(gt.a,{currentChannel:t,menuProps:e,useGlobalNav:!0})}renderPresenceLabel(){var e=this.props;const t=e.currentPresence;if(!e.featureGlobalNav)return null;switch(t){case"active":return It.rt("Set yourself to <strong>away</strong>",null,({text:e,key:t})=>c.a.createElement("strong",{key:t},e));case"away":return It.rt("<status>Away</status> Set yourself to <strong>active</strong>",null,({tag:e,text:t,key:a})=>{switch(e){case"status":return c.a.createElement("strong",{className:"half_opacity",key:a},t);case"strong":return c.a.createElement("strong",{key:a},t);default:return null}});default:return null}}render(){var e=this.props;e.actions;const t=e.currentMember,a=e.inDnd,n=e.inDndBySnooze,r=e.featureGlobalNav,i=ye()(e,["actions","currentMember","inDnd","inDndBySnooze","featureGlobalNav"]);if(!r)return null;const o=[{type:"custom",children:c.a.createElement(Ct,{key:"user-header"})},{type:"custom",children:c.a.createElement(St,{key:"dnd-header"}),hide:!a},{type:"submenu",label:It.rt("Turn on <strong>Do Not Disturb</strong>"),renderSubmenu:this.renderDndMenu,hide:a},{label:It.t("Resume notifications now"),key:"turn-off-dnd",hide:!a,click:n?this.props.endDndSnooze:this.props.endDndSchedule},{type:"submenu",label:It.t("Adjust time"),renderSubmenu:this.renderDndMenu,hide:!a||a&&!n},{label:It.t("Adjust schedule\u2026",{fallbackHash:"ce0d0efeb198eef758ed1a5393ca0a0f33012be6"}),key:"adjust-dnd-schedule",hide:!a||a&&n,click:()=>this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"})},{type:"separator",key:"dnd-separator",hide:!a},{label:It.t("Clear status"),hide:!Object(Qe.ab)(t),click:()=>{this.props.updateCurrentMemberProfile({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}})}},{label:Object(Qe.ab)(t)?It.t("Edit status"):It.t("Set a status"),shortcut:Object(w.q)()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:this.props.openCustomStatusDialog},{label:this.renderPresenceLabel(),key:"set-active-away",click:this.props.toggleUserPresence},{type:"separator",key:"header-separator"},{label:It.t("Profile & account"),click:()=>Object(_t.i)(t.id)},{label:It.rt("Notification preferences"),key:"notification-preferences",click:()=>this.props.openPrefsModal({activeSection:"notifications"})},{type:"custom",children:c.a.createElement("div",{className:"p-global_nav__top_menu_cap",key:"user-menu-bottom-cap"})}].filter(e=>!e.hide),l=m()({"p-global_nav__top_user_menu":!0,"p-global_nav__top_user_menu--dnd":a});return c.a.createElement(K.a,s()({},i,{template:o,menuClassNames:l,noMargin:!0}))}}user_menu_UserMenu.displayName="UserMenu",user_menu_UserMenu.defaultProps=wt;const Tt={openCustomStatusDialog:ot.a,toggleUserPresence:ht.h,updateCurrentMemberProfile:pt.a,endDndSnooze:ut.b,endDndSchedule:ut.a,openPrefsModal:ke.a};var Nt=Object(d.b)(e=>{const t=Object(Me.b)(e),a=Object(mt.a)(e);const n=Object(ft.f)(e).snoozeEnabled;return{actions:jt(e),currentMember:t,currentPresence:Object(ht.e)(e),currentChannel:Object(bt.e)(e,a,!1)||void 0,inDnd:!!Object(ft.d)(e,t.id),inDndBySnooze:n,featureGlobalNav:Object(k.m)(e,"feature_global_nav")}},Tt)(user_menu_UserMenu);const At=new p.b("global_nav"),Rt=(u.default.string,u.default.bool,u.default.func,u.default.bool,u.default.object.isRequired,{userId:void 0,hasCustomStatus:!1,openCustomStatusDialog:o.a,featureGlobalNav:!1});class user_User extends l.Component{constructor(e){super(e),this.onUserClick=this.onUserClick.bind(this),this.onStatusClick=this.onStatusClick.bind(this),this.renderMenu=this.renderMenu.bind(this)}onUserClick(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_USER_MENU"}}})}onStatusClick(){this.props.openCustomStatusDialog(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CUSTOM_STATUS"}}})}renderMenu(e){return c.a.createElement(Nt,e)}render(){var e=this.props;const t=e.userId,a=e.hasCustomStatus,n=e.featureGlobalNav;if(!t||!n)return null;const s=a&&c.a.createElement(ne.c,{onClick:this.onStatusClick,className:"p-global_nav__top_user_status_button","aria-label":At.t("Edit status")},c.a.createElement(ct.b,{memberId:t,tipPosition:"bottom-right",className:"p-global_nav__top_user_status"}),c.a.createElement(W.b,{type:"pencil",className:"p-global_nav__top_user_status_edit"}));return c.a.createElement("div",{className:"p-global_nav__top_user"},s,c.a.createElement(K.e,{renderMenu:this.renderMenu,position:"bottom-right",offsetX:4,offsetY:10,allowanceX:12,onClick:this.onUserClick},c.a.createElement(ne.c,{"aria-label":At.t("User menu")},c.a.createElement(lt.c,{userId:t,size:32,showBadge:!1,isInteractive:!1,className:m()({"p-global_nav__top_user_avatar":!0,"p-global_nav__top_user_avatar--beside-status":a}),tabIndex:"-1"}),c.a.createElement(dt.a,{memberId:t,className:"p-global_nav__top_user_presence",inline:!1}))))}}user_User.displayName="User",user_User.defaultProps=Rt;const Mt={openCustomStatusDialog:ot.a};var Pt=Object(d.b)(e=>({userId:Object(k.d)(e),hasCustomStatus:Object(Qe.ab)(Object(Me.b)(e)),featureGlobalNav:Object(k.m)(e,"feature_global_nav"),clogger:Object(x.a)({state:e})}),Mt)(user_User),xt=a("yU6Y"),Lt=a.n(xt),Ft=a("V0Bv"),Dt=a("F6LU"),Bt=a("qkTT"),Ut=a("zoXk"),qt=a("HvGc"),Ht=a("KDee");u.default.string.isRequired,u.default.string.isRequired,u.default.node.isRequired,u.default.string.isRequired,u.default.bool,u.default.node,u.default.string,u.default.func.isRequired,u.default.func.isRequired,u.default.func.isRequired,u.default.object.isRequired;const Wt={active:!1,children:void 0,className:void 0};class flex_button_FlexButton extends l.PureComponent{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){var e=this.props;const t=e.pane,a=e.active,n=e.clogger;"team"===t?Object(_t.m)():"starred_items"===t&&Object(R.a)()?a?this.props.closeFlexpane():this.props.showStarredItemsList():"activity"===t?this.props.toggleActivityFlexpane():Object(Ht.d)(t),"mentions"===t?n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_ACTIVITY"}}}):"stars"===t&&n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_STARS"}}})}render(){var e=this.props;const t=e.icon,a=e.tooltip,n=e.pane,s=e.active,r=e.children,i=e["aria-label"],o=m()("p-global_nav__top_button","p-global_nav__top_flex",`p-global_nav__top_flex--${n}`,s&&"p-global_nav__top_flex--active",this.props.className);return c.a.createElement(z.c,{tip:a,delay:z.a,position:"bottom",offsetY:Ia},c.a.createElement(ne.c,{className:o,onClick:this.onClick,"aria-label":i},c.a.createElement(W.b,{type:t,className:"p-global_nav__top_button_icon"}),r))}}flex_button_FlexButton.displayName="FlexButton",flex_button_FlexButton.defaultProps=Wt;var Gt=Object(d.b)((e,{pane:t})=>({active:Object(Ut.j)(e)===t,clogger:Object(x.a)({state:e})}),e=>({toggleActivityFlexpane:()=>e(Object(qt.q)()),showStarredItemsList:()=>e(Object(qt.k)()),closeFlexpane:()=>e(Object(qt.a)())}))(flex_button_FlexButton);const Kt=new p.b("global_nav"),Vt=(u.default.shape({emoji:u.default.string,memberName:u.default.string,channelName:u.default.string}),u.default.bool,u.default.bool,{reactionToast:void 0,noAnimation:!1,featureGlobalNav:!1}),zt=({reactionToast:e,noAnimation:t,featureGlobalNav:a})=>{if(!a)return null;const n=e&&c.a.createElement(Bt.b,{text:`:${e.emoji}:`,emojiSize:Bt.a.LARGE,className:"p-global_nav__top_activity_toast"}),s=!(Lt.a.chrome&&!_.V)&&c.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(w.q)()?"\u2318\u21e7M":"Ctrl+Shift+M"),r=e?c.a.createElement(l.Fragment,null,Object(Dt.a)(e.memberName),c.a.createElement("br",null),c.a.createElement("span",{className:"sk_foreground_high"},Object(Dt.a)(e.channelName))):c.a.createElement(l.Fragment,null,Kt.t("Activity"),s),i=m()({"p-global_nav__top_activity":!0,"p-global_nav__top_activity--no-animation":t,"p-global_nav__top_activity--toasting":e});return c.a.createElement("div",{className:i},c.a.createElement(Gt,{icon:"mentions",pane:"activity",tooltip:r,"aria-label":Kt.t("Activity")}),n)};zt.displayName="ActivityButton",zt.defaultProps=Vt;var $t=Object(d.b)(e=>({reactionToast:Object(Ft.b)(e),noAnimation:!Object($.k)(e,"a11y_animations"),featureGlobalNav:Object(k.m)(e,"feature_global_nav")}))(zt);const Yt=new p.b("global_nav"),Qt=(u.default.bool,u.default.bool,u.default.bool,u.default.string,u.default.func,u.default.func,u.default.func,u.default.func,u.default.func,u.default.func,u.default.bool,u.default.bool,u.default.bool,u.default.func,u.default.object.isRequired,{isUserRestricted:!1,isPaid:!1,isEnterprise:!1,userId:void 0,showFileList:o.a,showDownloads:o.a,showKeyboardShortcuts:o.a,showWhatsNew:o.a,showUserGroupList:o.a,showUserCalendar:o.a,featureCalendarSimpleAgendaView:!1,featureGlobalNav:!1,featureSonicUserGroups:!1,openHelpModal:o.a});class flexpanes_menu_FlexpanesMenu extends l.PureComponent{constructor(e){super(e),this.onTriggerClick=this.onTriggerClick.bind(this),this.clogItem=this.clogItem.bind(this),this.renderMenu=this.renderMenu.bind(this)}onTriggerClick(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU"}}})}clogItem(e){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU_ITEM"}},flex_name:e})}renderMenu(e){var t=this.props;const a=t.featureGlobalNav,n=t.featureSonicUserGroups,r=t.isUserRestricted,i=t.isPaid,o=t.isEnterprise,l=t.userId;if(!a)return null;const d=[{label:Yt.t("Your events"),icon:c.a.createElement(W.b,{type:"all-files-alt"}),click:()=>{this.props.showUserCalendar(),this.clogItem("calendar")},hide:!this.props.featureCalendarSimpleAgendaView},{label:Yt.t("Files"),icon:c.a.createElement(W.b,{type:"all-files-alt"}),click:()=>{this.props.showFileList({user:l}),this.clogItem("files_user")}},{label:Yt.t("Downloads"),icon:c.a.createElement(W.b,{type:"cloud-download"}),click:()=>{this.props.showDownloads({user:l}),this.clogItem("downloads")},hide:!_.V},{type:"separator"},{label:o?Yt.t("Organization Directory"):Yt.t("Workspace Directory"),icon:c.a.createElement(W.b,{type:"team-directory"}),shortcut:!Lt.a.firefox&&(Object(w.q)()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:()=>{Object(_t.m)(),this.clogItem("team")}},{label:Yt.t("User Groups"),icon:c.a.createElement(W.b,{type:"user-groups"}),click:()=>{n?this.props.showUserGroupList():Object(_t.l)(),this.clogItem("groups")},hide:r||!i},{type:"separator"},{label:Yt.t("What\u2019s New"),icon:c.a.createElement(W.b,{type:"emoji-celebration"}),click:()=>{this.props.showWhatsNew(),this.clogItem("whats_new")}},{label:Yt.t("Keyboard Shortcuts"),icon:c.a.createElement(W.b,{type:"keyboard"}),shortcut:Object(w.q)()?"\u2318/":"Ctrl+/",click:()=>{this.props.showKeyboardShortcuts(),this.clogItem("shortcuts")}},{label:Yt.t("Help"),icon:c.a.createElement(W.b,{type:"question-circle"}),click:()=>{this.props.openHelpModal({trigger:"flex_menu"}),this.clogItem("help")}}].filter(e=>!e.hide);return c.a.createElement(K.a,s()({},e,{menuClassNames:"p-global_nav__top_flexpanes_menu",template:d,stripTerminalSeparators:!0,width:Object(w.q)()?void 0:360}))}render(){return this.props.featureGlobalNav?c.a.createElement(K.e,{position:"bottom-right",renderMenu:this.renderMenu,offsetY:wa,onClick:this.onTriggerClick},c.a.createElement(z.c,{tip:Yt.t("More options"),position:"bottom",delay:z.a,offsetY:Ia},c.a.createElement(ne.c,{className:"p-global_nav__top_button p-global_nav__top_button--flexpanes","aria-label":Yt.t("More options")},c.a.createElement(W.b,{type:"vertical-ellipsis",className:"p-global_nav__top_button_icon"})))):null}}flexpanes_menu_FlexpanesMenu.displayName="FlexpanesMenu",flexpanes_menu_FlexpanesMenu.defaultProps=Qt;const Xt={showFileList:qt.g,showKeyboardShortcuts:(...e)=>Object(qt.h)(...e),showDownloads:qt.f,showWhatsNew:qt.p,showUserGroupList:qt.o,showUserCalendar:qt.m,openHelpModal:Ie.a};var Jt=Object(d.b)(e=>({isUserRestricted:Object(Qe.Gb)(Object(Me.b)(e)),isPaid:Object(fe.D)(Object(q.d)(e)),isEnterprise:Object(k.q)(e),userId:Object(k.d)(e),featureCalendarSimpleAgendaView:Object(k.m)(e,"feature_calendar_simple_agenda_view"),featureGlobalNav:Object(k.m)(e,"feature_global_nav"),featureSonicUserGroups:Object(k.m)(e,"feature_sonic_user_groups"),clogger:Object(x.a)({state:e})}),Xt)(flexpanes_menu_FlexpanesMenu),Zt=a("Go8C"),ea=a("7ARk"),ta=a("m5Fn"),aa=a("UXvI"),na=a("cMxN"),sa=a("YYb+"),ra=a("9/ob"),ia=a("HXD8"),oa=a("F8qq"),la=a("Zr7G"),ca=a("YDA8"),da=a("Rjjz"),ua=a("NPpR");u.default.bool.isRequired,u.default.func.isRequired,u.default.func.isRequired,u.default.func.isRequired,u.default.func.isRequired,u.default.string,u.default.object;const pa={displayQuery:"",telemeter:la.d};class autocomplete_input_in_primary_search_AutocompleteInputInPrimarySearch extends l.PureComponent{constructor(e){super(e),Object(f.a)(this,["onClick","onSearchInputBoxFocus","onSearchInputBoxEscape","onSearchAutocompleteSuggestionAccept"]),this.precacheSearch=Object(aa.a)(this.precacheSearch.bind(this),6e4)}onClick(){this.props.autocompleteIsOpen||this.props.openSearchAutocomplete()}onSearchInputBoxFocus(){this.props.openSearchAutocomplete(),this.precacheSearch()}onSearchInputBoxEscape(){this.props.closeSearchAutocomplete()}onSearchAutocompleteSuggestionAccept(){Object(ia.e)(this.props.telemeter),this.props.searchAutocompleteSuggestionAccept()}precacheSearch(){this.props.searchPrecache()}render(){const e=m()({"p-global_nav__top_search":!0,"p-global_nav__top_search--browser":!_.V,"p-global_nav__top_search--primarysearch":!0,"p-global_nav__top_search--primarysearch_open":this.props.autocompleteIsOpen});return c.a.createElement(ra.a,{enabled:["feature_primary_search"]},c.a.createElement(ne.c,{className:e,onClick:this.onClick},c.a.createElement(ua.a,{autoFocus:!1,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus})))}}autocomplete_input_in_primary_search_AutocompleteInputInPrimarySearch.displayName="AutocompleteInputInPrimarySearch",autocomplete_input_in_primary_search_AutocompleteInputInPrimarySearch.defaultProps=pa;const ha={searchPrecache:da.s,openSearchAutocomplete:sa.f,closeSearchAutocomplete:sa.a,searchAutocompleteSuggestionAccept:oa.a};var ma=Object(d.b)(e=>({autocompleteIsOpen:Object(sa.e)(e),displayQuery:Object(Zt.b)(e),telemeter:Object(la.c)({state:e})}),ha)(autocomplete_input_in_primary_search_AutocompleteInputInPrimarySearch);u.default.bool.isRequired,u.default.string.isRequired,u.default.func.isRequired,u.default.func.isRequired,u.default.object;const ba={telemeter:la.d};class autocomplete_in_primary_search_AutocompleteInPrimarySearch extends l.PureComponent{constructor(e){super(e),Object(f.a)(this,["handleClick","onSearchAutocompleteSuggestionAccept","handleAutocompleteRef"]),this.calculatePopoverConstraints=Object(aa.a)(this.calculatePopoverConstraints.bind(this),1e3),this.searchHeaderBackdrop=Object(l.createRef)(),this.state={hasCalculatedConstraints:!1,overlayStyle:{marginTop:0},contentStyle:{top:0,left:0,width:200}},this.autocompleteInputRef=null}onSearchAutocompleteSuggestionAccept(){Object(ia.e)(this.props.telemeter),this.props.searchAutocompleteSuggestionAccept()}calculatePopoverConstraints(){if(!this.autocompleteInputRef)return;const e=Object(xe.findDOMNode)(this.autocompleteInputRef),t=e.getBoundingClientRect(),a=e.parentElement.getBoundingClientRect();this.setState(()=>({hasCalculatedConstraints:!0,overlayStyle:{marginTop:a.bottom},contentStyle:{top:0,left:t.left-10,width:t.width+20}}))}handleAutocompleteRef(e){this.autocompleteInputRef=e,e&&this.calculatePopoverConstraints()}handleClick(e){this.searchHeaderBackdrop&&this.searchHeaderBackdrop.current===e.target&&this.props.closeAutocomplete()}render(){var e=this.props;const t=e.isOpen,a=e.closeAutocomplete,n=t&&this.state.hasCalculatedConstraints;return c.a.createElement(ra.a,{enabled:["feature_primary_search"]},n&&c.a.createElement("div",{className:"c-search_autocomplete__header_backdrop",ref:this.searchHeaderBackdrop,onClick:this.handleClick}),c.a.createElement(ma,{ref:this.handleAutocompleteRef}),c.a.createElement(na.a,{ariaRole:"dialog",ariaLabel:"Search",isOpen:n,position:"bottom-right",onClose:a,shouldFade:!1,overlayClassName:"c-popover c-search_modal c-search_modal--autocomplete c-search_modal--primarysearch",allowanceX:20,allowanceY:0,shouldFocusAfterRender:!1,shouldReturnFocusAfterClose:!1,onResize:this.calculatePopoverConstraints,shouldObserveResize:!0,contentStyle:this.state.contentStyle,overlayStyle:this.state.overlayStyle},t&&c.a.createElement("div",{className:"c-search-autocomplete"},c.a.createElement(ca.a,{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept}))))}}autocomplete_in_primary_search_AutocompleteInPrimarySearch.displayName="AutocompleteInPrimarySearch",autocomplete_in_primary_search_AutocompleteInPrimarySearch.defaultProps=ba;const fa={closeAutocomplete:sa.a,searchAutocompleteSuggestionAccept:oa.a};var _a=Object(d.b)(e=>({userQuery:Object(Zt.d)(e),isOpen:Object(sa.e)(e),telemeter:Object(la.c)({state:e})}),fa)(autocomplete_in_primary_search_AutocompleteInPrimarySearch),ga=a("lek6"),ya=a("iH/p"),Oa=a("V18M");function Ca(e){return"Vsearch"===Object(mt.a)(e)}const va=new p.b("search"),Ea=(u.default.string,u.default.func,u.default.string,u.default.string,u.default.object.isRequired,u.default.func,u.default.func.isRequired,u.default.bool.isRequired,u.default.bool.isRequired,{displayQuery:void 0,orgName:void 0,teamName:void 0,openFromClick:o.a,clearSearchInputField:o.a});class search_placeholder_input_SearchPlaceholderInput extends l.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.onClearClick=this.onClearClick.bind(this)}onClick(){this.props.isPrimarySearchFeatureEnabled?this.props.openSearchAutocomplete():this.props.openFromClick(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_SEARCH"}}})}onClearClick(e){e.stopPropagation(),this.props.clearSearchInputField()}render(){var e=this.props;const t=e.displayQuery,a=e.orgName,n=e.teamName,s=e.isPrimarySearchFeatureEnabled,r=e.showSearchAsActive,i=t?c.a.createElement(l.Fragment,null,c.a.createElement(ga.a,{text:t,className:"p-global_nav__top_search_text",customLineEnding:" ",showTooltips:!1,noLinking:!0,noSpecials:!0,noHighlights:!0}),c.a.createElement(ne.c,{className:"p-global_nav__top_search_clear",onClick:this.onClearClick,label:va.t("Clear")},c.a.createElement(W.b,{type:"times-small"}))):c.a.createElement("span",{className:"p-global_nav__top_search_text p-global_nav__top_search_text--placeholder"},va.rt("Search {teamName}",{teamName:a||n||""})),o=m()({"p-global_nav__top_search":!0,"p-global_nav__top_search--no_history":!Object(te.c)()}),d=!s||!r;return c.a.createElement(l.Fragment,null,d&&c.a.createElement(ne.c,{className:o,onClick:this.onClick},c.a.createElement(W.b,{type:"search-medium",className:"p-global_nav__top_search_icon"}),i),!s&&c.a.createElement(ta.a,null),!d&&c.a.createElement(_a,null))}}search_placeholder_input_SearchPlaceholderInput.displayName="SearchPlaceholderInput",search_placeholder_input_SearchPlaceholderInput.defaultProps=Ea;const ka={openSearchAutocomplete:sa.f,openFromClick:ya.a,clearSearchInputField:ea.a};var Sa=Object(d.b)(e=>({displayQuery:Object(Zt.b)(e),orgName:Object(q.e)(e)||"",teamName:Object(fe.e)(Object(q.d)(e)),clogger:Object(x.a)({state:e}),isPrimarySearchFeatureEnabled:Object(Oa.a)(e),showSearchAsActive:Ca(e)||Object(sa.e)(e)}),ka)(search_placeholder_input_SearchPlaceholderInput);a("AByf");const ja=new p.b("global_nav"),Ia=-12,wa=-4,Ta=(u.default.string,u.default.func,u.default.bool,{theme:void 0,renderSonicMenu:void 0,featureGlobalNav:!1}),Na=({theme:e,renderSonicMenu:t,featureGlobalNav:a})=>{if(!a)return null;const n=m()("p-global_nav__top",e&&`p-global_nav__top--theme-${e}`);return c.a.createElement("div",{className:n},c.a.createElement(it,{renderSonicMenu:t}),c.a.createElement(be,null),c.a.createElement("div",{className:"p-global_nav__top_spacer"}),c.a.createElement(Sa,null),c.a.createElement("div",{className:"p-global_nav__top_spacer--fill"}),c.a.createElement($t,null),c.a.createElement(Gt,{icon:"star-o",pane:Object(R.a)()?"starred_items":"stars",tooltip:c.a.createElement(l.Fragment,null,ja.t("Starred items"),c.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(w.q)()?"\u2318\u21e7S":"Ctrl+Shift+S")),"aria-label":ja.t("Starred items")}),c.a.createElement(Jt,null),c.a.createElement("div",{className:"p-global_nav__top_spacer"}),c.a.createElement(Pt,null))};Na.displayName="TopNav",Na.defaultProps=Ta;Object(d.b)(e=>({theme:Object($.k)(e,"sidebar_theme"),featureGlobalNav:Object(k.m)(e,"feature_global_nav")}))(Na);const Aa=new p.b("team_picker");u.default.func.isRequired,u.default.bool,u.default.bool;class add_team_button_AddTeamButton extends l.PureComponent{render(){var e=this.props;const t=e.featureClassicNav,a=e.isDragInProgress,n={onClick:this.props.startWorkspaceSignIn},r=m()("p-team_sidebar__add_button",{"p-team_sidebar__add_button--mac":t&&Object(w.q)()}),i={opacity:a?0:1},o=Aa.t("Add a new workspace");return c.a.createElement(z.c,{tip:o,position:t?"right":"bottom-left",delay:z.a,offsetX:t?5:0,offsetY:t?0:Ia,style:i},c.a.createElement(G.a,s()({"aria-label":o},n,{className:r}),c.a.createElement(W.b,{type:"plus-thick",className:"p-team_sidebar__add_button_icon"})))}}add_team_button_AddTeamButton.displayName="AddTeamButton",add_team_button_AddTeamButton.defaultProps={featureClassicNav:!1,isDragInProgress:!1};var Ra=Object(d.b)(()=>({locale:Object(B.a)()}))(add_team_button_AddTeamButton),Ma=a("9oTK"),Pa=a("vJtL"),xa=a("eD8c"),La=a("G3Sk"),Fa=a("derf");let Da=(Ba=Object(Ma.coroutine)(function*(e){const t=(yield Object(Ma.resolve)(Promise.resolve().then(a.bind(null,"s5Is")))).removeWorkspaceFromPreviousWorkspaces;(0,(yield Object(Ma.resolve)(Promise.resolve().then(a.bind(null,"lhZz")))).dispatchForClientStore)(t(e))}),function(e){return Ba.apply(this,arguments)});var Ba;const Ua=new p.b("team_picker"),qa=(u.default.string.isRequired,u.default.func.isRequired,u.default.string.isRequired,u.default.func.isRequired,u.default.bool.isRequired,u.default.shape({image_default:u.default.bool,image_34:u.default.string,image_44:u.default.string,image_68:u.default.string,image_88:u.default.string,image_102:u.default.string,image_132:u.default.string,image_230:u.default.string}),u.default.number,u.default.bool,u.default.bool,u.default.number,u.default.bool,u.default.number,u.default.bool,u.default.bool,u.default.oneOfType([u.default.object,u.default.func]),u.default.bool,u.default.object,u.default.object,u.default.func,{order:0,isActive:!1,failedToBoot:!1,shadow:1,hasUnreads:!1,mentionCount:0,icon:null,shouldShowKeyboardShortcut:!1,hasSessionExpired:!1,forwardedRef:void 0,isDragging:!1,draggableProps:{},dragHandleProps:{},onItemActive:o.a}),Ha=99;class team_sidebar_item_TeamSidebarItem extends l.Component{constructor(e){super(e),Object(f.a)(this,["getContextMenuTemplate","renderShortcutHint","renderBadge","setRef"])}componentDidMount(){this.props.isActive&&this.props.onItemActive(this.ref)}componentDidUpdate(e){this.props.isActive&&!e.isActive&&this.props.onItemActive(this.ref)}getTooltip(){var e=this.props;const t=e.teamName,a=e.order+1;if(!_.V||a>9)return t;const n=Object(w.q)()?`\u2318${a}`:`Ctrl+${a}`,s=Ua.t("Press {shortcut} to switch",{shortcut:n});return c.a.createElement("span",null,t," ",c.a.createElement("span",{className:"sk_foreground_high"},s))}getContextMenuTemplate(){var e=this.props;const t=e.teamId,a=e.teamName,n=e.signOutFromTeam,s=e.hasTeamBooted,r=e.hasSessionExpired,i=a&&a.replace(/&/g,"&&");return[{label:`${Ua.t("&Sign out of")} ${i}`,enabled:r||s,click:()=>{Object(M.b)().info("TEAM-SIDEBAR",`context-menu sign-out teamId:${t} hasSessionExpired:${r}`),r?Da(t):n(t)}}]}setRef(e){if(!e)return;this.ref=e;const t=this.props.forwardedRef;t&&(Object(Pa.a)(t)?t(e):t.current=e)}renderShortcutHint(){var e=this.props;const t=e.order,a=e.shouldShowKeyboardShortcut,n=t+1,s=m()("p-team_sidebar__shortcut_hint",{"p-team_sidebar__shortcut_hint--visible":a});return n<=9?c.a.createElement("div",{className:s},n):null}renderBadge(){var e=this.props;const t=e.hasUnreads,a=e.mentionCount;let n="";return e.hasSessionExpired?n=c.a.createElement("div",{className:"p-team_sidebar__signed_out_badge"},c.a.createElement(W.b,{type:"warning",className:"p-team_sidebar__signed_out_badge__stroke"}),c.a.createElement(W.b,{type:"warning-filled"})):a?n=c.a.createElement("div",{className:"p-team_sidebar__mentions_badge"},c.a.createElement("span",null,a>Ha?`${Ha}+`:a)):t&&(n=c.a.createElement("div",{className:"p-team_sidebar__unread_dot"})),n}render(){var e=this.props;const t=e.icon,a=e.isActive,n=e.teamName,r=e.hasTeamBooted,i=e.draggableProps,o=e.dragHandleProps,l=e.isDragging,d=e.onClick,u=e.teamId,p=m()("p-team_sidebar__item",{"p-team_sidebar__item--active":a,"p-team_sidebar__item--is_dragging":l,"p-team_sidebar__item--mac":Object(w.q)()}),h=m()("p-team_sidebar__icon",{"p-team_sidebar__icon--active":a,"p-team_sidebar__icon--is_dragging":l}),b=r?Fa.b:Fa.a;return c.a.createElement(z.c,{position:"right",offsetX:5,tip:this.getTooltip()},c.a.createElement(ne.c,s()({},i,o,{ref:this.setRef,onClick:()=>d(u),className:p,"data-qa":"team_sidebar_item","aria-label":n,role:"tab","aria-selected":a}),c.a.createElement(xa.a,{getTemplate:this.getContextMenuTemplate,overrideDefaultMenu:!0,desktopAppOnly:!1},c.a.createElement("div",{className:h},c.a.createElement(b,{icon:t,size:36,teamName:n,className:"p-team_sidebar__image"}))),this.renderBadge(),this.renderShortcutHint()))}}team_sidebar_item_TeamSidebarItem.displayName="TeamSidebarItem",team_sidebar_item_TeamSidebarItem.defaultProps=qa;const Wa=Object(d.b)(function(e,t){if(function(e){return e&&e.workspaces}(e)||t.failedToBoot)return s()({},t,{hasTeamBooted:!1});const a=Object(q.d)(e),n=Object(fe.h)(a);return{hasTeamBooted:!0,hasUnreads:Object(La.o)(e),mentionCount:Object(La.f)(e),icon:n,teamName:a.name}})(team_sidebar_item_TeamSidebarItem);var Ga=c.a.forwardRef((e,t)=>c.a.createElement(Wa,s()({},e,{forwardedRef:t}))),Ka=a("W+QA"),Va=a("Lev8"),za=a("VMwU");u.default.string.isRequired,u.default.string.isRequired,u.default.bool,u.default.string,u.default.bool;const $a={"-3":.7,"-2":.8,"-1":.9,0:1,1:1.1,2:1.25,3:1.5},Ya=({sidebarTheme:e,sidebarThemeCustomValues:t,featureClassicNav:a,clientTheme:n,isWindowFrameless:s})=>{var r=Object(l.useState)(_.V&&Object(_.P)()),o=i()(r,2);const d=o[0],u=o[1],p=Object(l.useCallback)(()=>{u(_.V&&Object(_.P)())},[]);let h;Object(l.useEffect)(()=>(window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}),[p]);try{h=JSON.parse(t)}catch(v){h=za.a}const m=Object(Ka.c)(e,h,{clientTheme:n})||za.a,b=m.text_color,f=Object(za.c)(m.column_bg,20),g=a?f:m.column_bg,y=$a[d]||1,O=`\n\t\t.p-client--show-team-sidebar {\n\t\t\tgrid-template-columns: ${Math.round(68/y)}px auto;\n\t\t}\n\t\t.p-team_sidebar--frameless:before {\n\t\t\twidth: ${Math.round(68/y)}px;\n\t\t}\n\t`,C=`\n\t\t.p-team_sidebar,\n\t\t.p-team_sidebar--frameless::before {\n\t\t\tbackground: ${g};\n\t\t}\n\n\t\t.p-team_sidebar__item {\n\t\t\tcolor: ${m.text_color};\n\t\t}\n\n\t\t.p-team_sidebar__add_button,\n\t\t.p-team_sidebar__add_button:hover,\n\t\t.p-team_sidebar__add_button:focus,\n\t\t.p-team_sidebar__add_button:active {\n\t\t\tcolor: ${Object(za.i)(m.text_color,50)};\n\t\t}\n\n\t\t.p-team_sidebar__add_button {\n\t\t\tbackground: ${g};\n\t\t\tborder-color: ${Object(za.m)(m.text_color,.3)};\n\t\t}\n\n\t\t.p-team_sidebar__add_button:hover,\n\t\t.p-team_sidebar__add_button:focus,\n\t\t.p-team_sidebar__add_button:active {\n\t\t\tborder-color: ${m.text_color};\n\t\t\tbackground: ${Object(za.c)(m.column_bg,60)};\n\t\t\tbox-shadow: 0 0 0 3px ${g},\n\t\t\t0 0 0 6px ${Object(za.m)(m.text_color,.3)};\n\t\t}\n\n\t\t.p-team_sidebar__unread_dot,\n\t\t.p-team_sidebar__mentions_badge {\n\t\t\tborder-color: ${g};\n\t\t}\n\n\t\t.p-team_sidebar__mentions_badge {\n\t\t\tbackground: ${m.badge};\n\t\t}\n\n\t\t.p-team_sidebar__unread_dot {\n\t\t\tbackground: ${m.text_color}\n\t\t}\n\n\t\t.p-team_sidebar__item.c-button--focus-visible:focus,\n\t\t.p-team_sidebar__add_button.c-link--focus-visible:focus {\n\t\t\tbox-shadow: ${function(e,t,a){return`0 0 0 3px ${t}, 0 0 0 4px ${e}, 0 0 0 6px ${a}`}(b,g,Object(za.m)(b,.3))};\n\t\t}\n\n\t\t.c-button--focus-visible:focus .p-team_sidebar__icon--active {\n\t\t\tbox-shadow: none;\n\t\t}\n\n\t\t.p-team_sidebar__signed_out_badge__stroke {\n\t\t\t-webkit-text-stroke: 6px ${g};\n\t\t\tcolor: ${g};\n\t\t}\n\n\t\t.p-team_sidebar__icon:hover {\n\t\t\tbox-shadow: 0 0 0 3px ${g},\n\t\t\t0 0 0 6px ${Object(za.m)(m.text_color,.3)};\n\t\t}\n\n\t\t.p-team_sidebar__icon--active,\n\t\t.p-team_sidebar__icon--active:hover {\n\t\t\tbox-shadow: 0 0 0 3px ${g},\n\t\t\t0 0 0 6px ${m.text_color};\n\t\t}\n\n\t\t${_.V&&s?O:""}\n\t`;return c.a.createElement("style",{className:"p-team_sidebar__theme"},C)};Ya.displayName="TeamSidebarTheme",Ya.defaultProps={featureClassicNav:!1,clientTheme:"light",isWindowFrameless:!1};var Qa=Object(d.b)(e=>{return{sidebarTheme:Object($.k)(e,"sidebar_theme"),sidebarThemeCustomValues:Object($.k)(e,"sidebar_theme_custom_values"),featureClassicNav:Object(k.m)(e,"feature_classic_nav"),clientTheme:Object(Va.c)(e),isWindowFrameless:Object(S.l)(e)}})(Ya),Xa=a("kiPk"),Ja=a("MIIS");u.default.arrayOf(u.default.string).isRequired;class dock_badge_listener_DockBadgeListener extends c.a.PureComponent{constructor(e){super(e),this.onWorkspaceBadgeUpdated=this.onWorkspaceBadgeUpdated.bind(this),this.updateAggregatedBadge=this.updateAggregatedBadge.bind(this)}onWorkspaceBadgeUpdated({id:e,unreadCnt:t,unreadHighlightCnt:a,badgeDockIcon:n}={}){this.setState(r=>s()({},r,{[e]:{unreadHighlightCnt:a,unreadCnt:t,badgeDockIcon:n}}),this.updateAggregatedBadge)}updateAggregatedBadge(){const e=Object(F.a)(this.state),t=Object(Xa.a)(e,e=>e.unreadHighlightCnt),a=Object(Xa.a)(e.filter(e=>e.badgeDockIcon),e=>e.unreadCnt),n=e.some(e=>e.badgeDockIcon);Object(_.Sb)(t,a,n)}render(){return this.props.workspaces.map(e=>({teamId:e,store:Object(g.getStoreInstanceByTeamId)(e)})).map(({teamId:e,store:t})=>c.a.createElement(Ja.a,{store:t,key:e,render:t=>c.a.createElement(dock_badge_listener_WorkspaceBadgeItem,{id:e,onBadgeUpdated:this.onWorkspaceBadgeUpdated,unreadHighlightCnt:Object(La.f)(t),unreadCnt:Object(La.g)(t),badgeDockIcon:Object($.k)(t,"mac_ssb_bullet")})}))}}dock_badge_listener_DockBadgeListener.displayName="DockBadgeListener";class dock_badge_listener_WorkspaceBadgeItem extends c.a.PureComponent{componentDidUpdate(){this.props.onBadgeUpdated({id:this.props.id,unreadCnt:this.props.unreadCnt,unreadHighlightCnt:this.props.unreadHighlightCnt,badgeDockIcon:this.props.badgeDockIcon})}render(){return null}}dock_badge_listener_WorkspaceBadgeItem.displayName="WorkspaceBadgeItem",dock_badge_listener_WorkspaceBadgeItem.defaultProps={unreadCnt:!1,unreadHighlightCnt:0,badgeDockIcon:!0};a("3dej");const Za=new p.b("sonic-toolbar"),en=(u.default.object.isRequired,u.default.string.isRequired,u.default.string,u.default.func.isRequired,u.default.func.isRequired,u.default.func.isRequired,u.default.func.isRequired,u.default.object,u.default.arrayOf(u.default.string),u.default.arrayOf(u.default.string),u.default.string,u.default.bool,u.default.array,u.default.bool,u.default.bool,u.default.bool,u.default.bool,u.default.func,u.default.func,u.default.object,{selectedTeamStore:void 0,bootedWorkspaces:{},failedToBootWorkspaces:[],className:void 0,featureClassicNav:!1,allWorkspaces:[],isWindowFrameless:!1,willNavigateToUnbootedWorkspaceId:void 0,composerVisible:!1,iaPhase1IsEnabled:!1,userAttentionIsOnChat:!1,removeFromSectionNavigation:o.a,addToSectionNavigation:o.a,clogger:{track:o.a}}),tn={One:49,Nine:57,NumOne:97,NumNine:105},an=(e,t,a)=>{const n=[...e];var s=n.splice(t,1);const r=i()(s,1)[0];return n.splice(a,0,r),n},nn=({teamId:e,selectedTeamId:t,willNavigateToUnbootedWorkspaceId:a})=>e===a||!a&&e===t;class team_sidebar_TeamSidebar extends l.Component{constructor(e){super(e),this.state={isModifierPressed:!1},this.currentActiveTeamIndex=null,Object(f.a)(this,["onKeyDown","onKeyUp","onWindowBlur","selectTeamByIndex","onDragEnd","onItemActive","focus","selectTeam"])}componentDidMount(){_.V&&(window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),window.addEventListener("blur",this.onWindowBlur))}componentDidUpdate(e){const t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(j.a)(t)&&this.props.addToSectionNavigation(),Object(I.a)(t)&&this.props.removeFromSectionNavigation()}componentWillUnmount(){_.V&&(window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),window.removeEventListener("blur",this.onWindowBlur))}onWindowBlur(){this.state.isModifierPressed&&this.setState(()=>({isModifierPressed:!1}))}onKeyDown(e){const t=Object.keys(this.props.teams).length,a=Object(w.q)()?e.metaKey:e.ctrlKey;if(!e.shiftKey&&a&&t>0){const a=this.keyCodeInRange(e,tn.One,tn.Nine),n=this.keyCodeInRange(e,tn.NumOne,tn.NumNine);if(a||n){e.preventDefault();const n=e.keyCode-(a?tn.One:tn.NumOne);t>n&&this.selectTeamByIndex(n)}}a&&!e.shiftKey?this.setState(()=>({isModifierPressed:!0})):this.state.isModifierPressed&&this.setState(()=>({isModifierPressed:!1})),!e.shiftKey&&e.ctrlKey&&"Tab"===e.key?(e.preventDefault(),this.currentActiveTeamIndex>=this.props.allWorkspaces.length-1?this.selectTeamByIndex(0):this.selectTeamByIndex(this.currentActiveTeamIndex+1)):e.shiftKey&&e.ctrlKey&&"Tab"===e.key&&(e.preventDefault(),this.currentActiveTeamIndex<1?this.selectTeamByIndex(this.props.allWorkspaces.length-1):this.selectTeamByIndex(this.currentActiveTeamIndex-1))}onKeyUp(e){!(Object(w.q)()?e.metaKey:e.ctrlKey)&&this.state.isModifierPressed&&this.setState(()=>({isModifierPressed:!1}))}onItemActive(e){this.activeItemRef=e}onDragEnd({destination:e,source:t}){if(!e)return;var a=this.props;const n=a.allWorkspaces,s=a.setTeamOrder;t.index>=n.length||s(an(n,t.index,e.index))}focus(){this.activeItemRef&&this.activeItemRef.focus()}keyCodeInRange({keyCode:e},t,a){return e>=t&&e<=a}selectTeam(e){var t=this.props;const a=t.bootedWorkspaces,n=t.failedToBootWorkspaces,s=t.teams,r=t.selectedTeamStore,i=t.selectedTeamId,o=t.clogger;if(!Object(A.b)(r.getState()))return void Object(M.b)().info("TEAM-SIDEBAR","Cannot switch workspaces because canUserSwitchWorkspaces returned false.");const l=a.includes(e),c=n.includes(e),d=s[e]&&s[e].isExpired;l||c||d?(this.props.setWillNavigateToUnbootedWorkspaceId(null),Object(y.g)(O.a,{teamId:e},{reason:"team-sidebar/selectTeam"}),o.track(P.EventId.TEAM_SIDEBAR_CLICK,{team_id:e,target_team_id:i,items_count:Object.keys(s).length,is_iap1:this.props.iaPhase1IsEnabled})):this.props.setWillNavigateToUnbootedWorkspaceId(e)}selectTeamByIndex(e){const t=this.props.allWorkspaces;t[e]&&this.selectTeam(t[e])}renderSidebarItem(e,t){var a=this.props;const n=a.signOutFromTeam,r=a.teams,i=a.bootedWorkspaces,o=a.selectedTeamId,l=a.failedToBootWorkspaces,u=a.willNavigateToUnbootedWorkspaceId,p=this.state.isModifierPressed;var h=r[e];const m=h.icon,f=h.name,_=h.isExpired,y=i.includes(e),O=l.includes(e),C=nn({teamId:e,selectedTeamId:o,willNavigateToUnbootedWorkspaceId:u});e===o&&this.currentActiveTeamIndex!==t&&(this.currentActiveTeamIndex=t);const v={teamId:e,teamName:f,icon:m,order:t,isActive:C,onClick:this.selectTeam,signOutFromTeam:()=>n(e),key:e,shouldShowKeyboardShortcut:p,hasSessionExpired:_,failedToBoot:O};return c.a.createElement(b.b,{draggableId:e,key:e,index:t,disableInteractiveElementBlocking:!0},(t,{isDragging:a})=>{const n=c.a.createElement(Ga,s()({ref:t.innerRef},v,{draggableProps:t.draggableProps,dragHandleProps:t.dragHandleProps,isDragging:a,onItemActive:this.onItemActive}));return y?c.a.createElement(d.a,{store:Object(g.getStoreInstanceByTeamId)(e),key:e},n):n})}renderAddTeamButton(e={}){var t=this.props;const a=t.iaPhase1IsEnabled,n=t.teams;return a?c.a.createElement(d.a,{store:this.props.selectedTeamStore},c.a.createElement(V,{startWorkspaceSignIn:this.props.startWorkspaceSignIn,teams:n})):c.a.createElement(d.a,{store:this.props.selectedTeamStore},c.a.createElement(Ra,s()({startWorkspaceSignIn:this.props.startWorkspaceSignIn},e)))}renderTeamSidebarContents(e,{isDraggingOver:t}){var a=this.props;const n=a.allWorkspaces,r=a.featureClassicNav,i=n.map((e,t)=>this.renderSidebarItem(e,t));return r?c.a.createElement(l.Fragment,null,c.a.createElement("div",s()({role:"presentation",ref:e.innerRef},e.droppableProps,{className:"p-team_sidebar__teams"}),i,e.placeholder),this.renderAddTeamButton({featureClassicNav:!0,isDragInProgress:t})):c.a.createElement(l.Fragment,null,this.renderAddTeamButton(),c.a.createElement("div",{ref:e.innerRef,className:"p-team_sidebar__teams"},i,e.placeholder))}renderDesktopComponents(){const e=this.props.bootedWorkspaces;return c.a.createElement(c.a.Fragment,null,c.a.createElement(dock_badge_listener_DockBadgeListener,{workspaces:e}))}render(){var e=this.props;const t=e.selectedTeamId,a=e.selectedTeamStore,n=e.featureClassicNav,r=e.isWindowFrameless,i=a&&c.a.createElement(d.a,{store:a,key:t},c.a.createElement(Qa,null)),o=m()(this.props.className,"p-team_sidebar",{"p-team_sidebar--classic_nav":n,"p-team_sidebar--frameless":r});return c.a.createElement(l.Fragment,null,i,_.V?this.renderDesktopComponents():null,c.a.createElement(b.a,{onDragEnd:this.onDragEnd},c.a.createElement(b.c,{droppableId:"droppable"},(e,{isDraggingOver:t})=>c.a.createElement("div",s()({role:"tablist","aria-label":Za.t("Teams"),ref:e.innerRef},e.droppableProps,{"data-qa":"team_sidebar_scroll_container",className:o}),this.renderTeamSidebarContents(e,{isDraggingOver:t})))))}}team_sidebar_TeamSidebar.displayName="TeamSidebar",team_sidebar_TeamSidebar.defaultProps=en;const sn={startWorkspaceSignIn:E.startWorkspaceSignIn,signOutFromTeam:E.removeWorkspace,setTeamOrder:C.setWorkspaceOrder,setWillNavigateToUnbootedWorkspaceId:C.setWillNavigateToUnbootedWorkspaceId},rn=Object(R.a)()?Object(N.a)(team_sidebar_TeamSidebar,"TeamSidebar",{index:4}):team_sidebar_TeamSidebar;var on=Object(d.b)(function(e,t){const a=Object(g.getStoreInstanceByTeamId)(t.selectedTeamId),n=Object(v.getAllWorkspaces)(e),s=Object(v.getWillNavigateToUnbootedWorkspaceId)(e),r=Object(v.getFailedToBootWorkspaces)(e),i=Object(v.hasWorkspaceFailedToBoot)(e,t.selectedTeamId);return{teams:Object(v.getWorkspacesMeta)(e),willNavigateToUnbootedWorkspaceId:s,selectedTeamStore:a,allWorkspaces:n,bootedWorkspaces:Object(v.getBootedWorkspaces)(e),failedToBootWorkspaces:r,isWindowFrameless:Object(S.l)(e),featureClassicNav:i||a&&Object(k.m)(a.getState(),"feature_classic_nav"),iaPhase1IsEnabled:Object(L.c)(a.getState()),clogger:Object(x.a)({state:a.getState()})}},sn)((e=>c.a.forwardRef((t,a)=>c.a.createElement(T.a.Consumer,null,n=>c.a.createElement(e,s()({ref:a},t,{userAttentionIsOnChat:n})))))(rn));t.a=on},xrsA:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("aK/h"),i=a("dhvi"),o=a("XfeM"),l=a("G4ux"),c=a("Fdc0"),d=a("nNoG"),u=a("kOzZ"),p=a("HOkk"),h=a("ANjH"),m=a("XHGt"),b=a("4qCO"),f=a("nlS/"),_=a("6kok"),g=a("4Twu"),y=a("eR+M"),O=a("4M+g"),C=a("wfE8"),v=a("3C31"),E=a("WD4z");a("e31y");const k=new d.b("channel_invite"),S={DISABLED:"disabled",LOADING:"loading",ENABLED:"enabled"};r.default.object.isRequired,r.default.string.isRequired,r.default.arrayOf(r.default.object),r.default.func.isRequired,r.default.func.isRequired,r.default.func.isRequired;class invite_member_to_channel_dialog_BaseInviteMemberToChannelDialog extends s.a.Component{constructor(e){super(e),this.state={addButtonState:S.DISABLED,isAlreadyMember:!1,selectedChannelId:void 0},this.onChannelSelected=this.onChannelSelected.bind(this),this.onAddToChannel=this.onAddToChannel.bind(this)}onChannelSelected({value:e}={}){const t=this.props.member.id;return this.setState(()=>({selectedChannelId:e,addButtonState:S.LOADING})),this.props.getChannelMembershipInfoForUsers({channelId:e,userIds:[t]}).then(({membershipInfo:e}={})=>{const a=e[t].isMember;return this.setState(()=>({addButtonState:a?S.DISABLED:S.ENABLED,isAlreadyMember:a})),e})}onAddToChannel(){const e=this.state.selectedChannelId,t=this.props.member,a=t.id;Object(c.jb)(t)?this.props.addAppToChannel({appUserId:a,channelId:e,referringEventId:"INVITE_TO_CHANNEL_DIALOG",referringUiContext:{action:"IMPRESSION"}}):this.props.submitInviteToChannel({channelId:e,users:a})}renderChannelOption(e){return s.a.createElement(g.a,{channelId:e.value})}renderChannelPicker(){var e=this.props;const t=e.channels,a=e.memberName,n=this.state.isAlreadyMember,r=t.map(e=>({label:Object(_.N)(e),value:e.id}));return s.a.createElement(s.a.Fragment,null,s.a.createElement(f.e,{options:r,placeholderText:k.t("Select a channel"),ariaLabel:k.t("Select a channel"),selectId:"searchSelectChannelOptions",size:"medium",selectDataQa:"search-select-channel-options",renderOption:this.renderChannelOption,renderSelectedOption:this.renderChannelOption,onOptionSelected:this.onChannelSelected}),n&&s.a.createElement(E.a,{type:"inline",level:"error",className:"p-invite_member_to_channel_dialog__error"},s.a.createElement("span",null,k.t("{name} is already a member of this channel.",{name:a,__react:!0}))))}render(){const e=this.props.memberName,t=this.state.addButtonState,a=k.t("Add {name} to a channel",{name:e,__react:!0});return s.a.createElement(p.a,{title:a,goButtonIsDisabled:t===S.DISABLED,goButtonIsPending:t===S.LOADING,goButtonText:k.t("Add"),onGo:this.onAddToChannel},s.a.createElement("div",{className:"p-invite_member_to_channel_dialog__body"},this.renderChannelPicker()))}}invite_member_to_channel_dialog_BaseInviteMemberToChannelDialog.displayName="BaseInviteMemberToChannelDialog",invite_member_to_channel_dialog_BaseInviteMemberToChannelDialog.defaultProps={channels:[]};var j=Object(m.b)((e,{member:t})=>({channels:Object(O.t)(e).sort(Object(b.b)("name")),memberName:Object(c.V)(e,t,!1)}),e=>Object(h.b)({getChannelMembershipInfoForUsers:y.g,submitInviteToChannel:C.M,addAppToChannel:v.a},e))(invite_member_to_channel_dialog_BaseInviteMemberToChannelDialog);a.d(t,"a",function(){return T});const I=new d.b("channel_invite");function w({title:e,body:t}={}){return Object(i.e)({element:s.a.createElement(p.a,{title:e,goButtonText:I.t("OK",{fallbackHash:"9ce3bd4224c8c1780db56b4125ecf3f24bf748b7",fallbackHashNs:"fullscreen_modal"}),showCancelButton:!1},t)})}const T=Object(o.b)("Opens app dialog",(e,t,{memberId:a}={})=>{const n=t(),r=Object(l.b)(n),o=Object(l.d)(n,a),d=Object(u.a)({state:n}),p=Object(c.V)(n,o,!1),h=I.t("Add {name} to a channel",{name:p,__react:!0});d.track("INVITE_TO_CHANNEL_DIALOG",{contexts:{ui_context:{action:"IMPRESSION"}}}),Object(c.Mb)(r)?e(w({title:h,body:I.t("You are not allowed to add other members to channels.")})):Object(c.Mb)(o)?e(w({title:h,body:I.t("{name} cannot be added to any new channels.",{name:p,__react:!0})})):Object(c.Gb)(o)&&!Object(c.eb)(n,r)?e(w({title:h,body:I.t("Only a Workspace Admin can add {name} into new channels.",{name:p,__react:!0})})):e(Object(i.e)({element:s.a.createElement(j,{member:o})}))});T.meta={name:"openInviteMemberToChannelDialog",key:"actionsOpenInviteMemberToChannelDialogOpenInviteMemberToChannelDialog",description:"Opens app dialog"},T.propTypes={memberId:r.default.string.isRequired}},"y/bS":function(e,t,a){},y4ZY:function(e,t,a){},y5qN:function(e,t,a){},"yNt+":function(e,t,a){},yWse:function(e,t,a){},yluG:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a("aK/h"),s=a("q1tI"),r=a.n(s),i=a("derf"),o=a("5mKg");a("6mX7");n.default.object;const l={externalTeam:void 0};function c({externalTeam:e}){const t=Object(o.e)(e),a=Object(o.i)(e);return e&&t?r.a.createElement("div",{className:"p-app_external_team_banner"},r.a.createElement("span",{className:"p-app_external_team_banner__team_name overflow_ellipsis bold"},t),a&&r.a.createElement(i.b,{id:a,className:"p-app_external_team_banner__team_icon"})):null}c.displayName="AppExternalTeamBanner",c.defaultProps=l},ym0a:function(e,t,a){},yqYT:function(e,t,a){},yw6X:function(e,t,a){"use strict";var n=a("ifKl"),s=a("aK/h"),r=a("q1tI"),i=a.n(r),o=a("XHGt"),l=a("TSYQ"),c=a.n(l),d=a("XLFM"),u=a("c695"),p=a("od5y"),h=a("w8qk"),m=a("YB7p"),b=a("Smdl"),f=a("kOzZ"),_=a("negh"),g=a("nNoG");a("C8Zo");const y=new g.b("migration_blocker_page"),O=(s.default.string,s.default.bool,s.default.string,s.default.string,s.default.string,s.default.bool,s.default.bool,s.default.bool,s.default.bool,s.default.string,s.default.bool,s.default.object,s.default.func,{isOrgOwner:!1,isWorkspaceOwner:!1,isOrgAdmin:!1,isWorkspaceAdmin:!1,enterpriseName:null,teamURL:null,migrationID:null,sendEmail:!1,teamId:null,teamName:null,migrationIsComplete:!1,clogger:{track:n.a},pollMigrationStatus:n.a}),C="migration_blocker_reload",v="migration_blocker_page";class MigrationBlockerPage extends r.Component{constructor(e){super(e),this.state={loading:!1},this.handleReload=this.handleReload.bind(this)}componentDidMount(){this.clogImpression(),Object(b.a)()&&this.props.pollMigrationStatus(this.props.teamId)}componentDidUpdate(e){e.migrationIsComplete===this.props.migrationIsComplete&&e.teamId===this.props.teamId||this.clogImpression()}clogImpression(){var e=this.props;const t=e.migrationIsComplete;e.clogger.track(_.EventId.ENTERPRISE_MIGRATIONS,{contexts:{ui_context:{action:_.UiAction.IMPRESSION,ui_properties:{element_name:t?C:v}}}})}handleReload(){var e=this.props;const t=e.teamId,a=e.clogger;this.setState(()=>({loading:!0})),Object(m.a)({reason:`MigrationBlockerPage: Grid Migration for team ${t} is complete, user triggered client reload`,reasonKey:"migration_blocker_reload"}),a.track(_.EventId.ENTERPRISE_MIGRATIONS,{contexts:{ui_context:{action:_.UiAction.CLICK,ui_element:_.UiElement.BTN_RELOAD,ui_properties:{element_type:_.ElementType.BUTTON,element_name:C}}}}),a.sendDataAndEmptyQueue()}renderMigrationTitle(){var e=this.props;const t=e.teamName,a=e.enterpriseName,n=e.migrationIsComplete?y.t("Welcome to Slack Enterprise Grid!"):y.rt("The {teamName} workspace is joining {enterpriseName}!",{teamName:t,enterpriseName:a});return i.a.createElement("h3",{className:"p-migration_blocker_page__title"},n)}renderMigrationMessage(){var e=this.props;const t=e.enterpriseName,a=e.sendEmail,n=y.rt("It\u2019s moving day! Your workspace is being migrated into the <b>{enterpriseName}</b> Enterprise Grid organization, and will be temporarily unavailable until the process is complete.",{enterpriseName:t,fallbackHash:"f805600b955705eefe22feb6f32b1871508f03bd"});return i.a.createElement("div",{className:"p-migration_blocker_page__description"},n,a?y.t(" You\u2019ll receive an email when it\u2019s all done."):"")}renderMigrationCompleteMessage(){const e=this.props.enterpriseName,t=e?y.rt("Starting today, your workspace is part of the <b>{enterprise_name}</b> organization. That means you can now message and share files with anyone at {enterprise_name} \u2014 even if you\u2019re not in the same workspace. Continue to your workspace, and we\u2019ll show you what\u2019s new.",{enterprise_name:e}):y.t("Starting today, your workspace is part of an organization. That means you can now message and share files with anyone in the organization \u2014 even if you\u2019re not on the same workspace. Continue to your workspace, and we\u2019ll show you what\u2019s new.");return i.a.createElement("div",{className:"p-migration_blocker_page__description"},i.a.createElement("p",null,y.t("Your workspace has just been upgraded to Slack Enterprise Grid, which makes it simpler for large organizations to work together.")),i.a.createElement("p",null,t),i.a.createElement("div",{className:"align_center margin_top_150"},i.a.createElement(u.a,{type:"primary",size:"large",onClick:this.handleReload,disabled:this.state.loading,loading:this.state.loading},y.t("Continue to Your Workspace"))))}renderMigrationButton(){var e=this.props;const t=e.migrationID,a=e.isOrgOwner,n=e.isWorkspaceOwner,s=e.isOrgAdmin,r=e.isWorkspaceAdmin,o=e.teamURL;return e.migrationIsComplete?null:a||n||s||r?i.a.createElement(d.c,{className:"p-migration_blocker_page__button",href:`${o}migrations/${t}/status`},i.a.createElement("div",{className:"p-migration_blocker_page__button__text"},i.a.createElement("span",{className:"p-migration_blocker_page__button__title"},y.t("View migration status")),i.a.createElement("span",{className:"p-migration_blocker_page__button__subtitle"},y.t("Migration status is only visible to owners and admins."))),i.a.createElement("span",{className:"p-migration_blocker_page__button_icon"},i.a.createElement(p.b,{type:"chevron-large-right"}))):null}render(){const e=this.props.migrationIsComplete,t=c()("p-migration_blocker_page","p-migration_blocker_page--large"),a=c()("p-migration_blocker_page__icon",{"p-migration_blocker_page__icon--complete":e});return i.a.createElement("div",{className:t},i.a.createElement("div",{className:"p-migration_blocker_text"},i.a.createElement("div",{className:a}),this.renderMigrationTitle(),e?this.renderMigrationCompleteMessage():this.renderMigrationMessage()),this.renderMigrationButton())}}MigrationBlockerPage.displayName="MigrationBlockerPage",MigrationBlockerPage.defaultProps=O;const E={pollMigrationStatus:h.a};t.a=Object(o.b)(e=>({clogger:Object(f.a)({state:e})}),E)(MigrationBlockerPage)},yywf:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("ZBlo"),s=a("zmn3"),r=a("xWuZ");function i(e,t){return Object(r.a)(Object(s.a)(Object(n.a)(e.split(/(\ue000[^\ue001]+\ue001)/g),2),([e,a],n)=>[e,a?t(a.replace(/\ue000/g,"").replace(/\ue001/g,""),n):""]))}},z1BW:function(e,t,a){},zA5J:function(e,t,a){"use strict";var n=a("yHhI"),s=a("k0uR"),r=a("KXAH"),i=a("MvLI"),o=a("kFZb");class log_watcher_LogWatcher{constructor(e,t){this.logger=e,this.watchFunc=t,this.action=this.watch(this.logger.action),this.debug=this.watch(this.logger.debug),this.error=this.watch(this.logger.error),this.info=this.watch(this.logger.info),this.warn=this.watch(this.logger.warn),this.timeStamp=this.watch(this.logger.timeStamp)}watch(e){return Object(o.a)(e,this.watchFunc)}}function l(e){const t=Object(i.a)(),a=Object(n.a)({getState:t&&t.getState,label:e});return new log_watcher_LogWatcher(a,(...t)=>s.a.store(Object(r.a)(),...(e?[e]:[]).concat(t)))}a.d(t,"a",function(){return l})},zBLs:function(e,t,a){},zG9j:function(e,t,a){},zJYr:function(e,t,a){},zXku:function(e,t,a){},zaOK:function(e,t,a){"use strict";var n=a("QbLZ"),s=a.n(n),r=a("TGBA"),i=a("wBxZ"),o=a("m8R6"),l=a("ifKl"),c=a("r31G"),d=a("sk9p"),u=a.n(d),p=a("kOzZ"),h=a("g5qt");var m=a("rWF5");var b=a("H9m0"),f=a("GdsW"),_=a("lnxZ"),g=a("s19S"),y=a("QLsh"),O=a("ROZo");const C=Object(O.b)("TS.inline_videos.maybeStopInlineVideoPlayback");var v=a("N/g+"),E=a("2Y1Y"),k=a("i1Fx"),S=a("HvGc"),j=a("rMey"),I=a("qN/r"),w=a("eCgt"),T=a("iH/p"),N=a("gLeh"),A=a("t85p"),R=a("Tc5z"),M=a("XL7r"),P=a("yZEV"),x=a("vmJv"),L=a("brL+"),F=a("G4ux"),D=a("fYfO"),B=a("1hAG"),U=a("5mKg"),q=a("Cfkr"),H=a("VMwU"),W=a("yHhI"),G=a("T5R/"),K=a("tVnY"),V=a("YB7p"),z=a("cErB"),$=a("s5Is");const Y=["https://www.dropbox.com/chooser?","https://www.dropbox.com/saver?","https://account.box.com/index.php?","https://account.box.com/webviews/login/box_select?","https://app.box.com/index.php?","https://app.boxcn.net","https://ent.box.com","https://onedrive.live.com",/^https:\/\/[\w.-]+my\.sharepoint\.com\//,"https://login.microsoftonline.com/"],Q=["files/import/box","files/import/dropbox","files/import/gdrive","files/create/gdrive/auth","files/import/onedrive","files/import/onedrive/redirect",/files\/(T[A-Z0-9]{8,}|W[A-Z0-9]{8,}|U[A-Z0-9]{8,})\/F[A-Z0-9]{8,}(\/[a-zA-Z0-9_]+)?/],X=Object(W.b)();t.a=s()({analytics:new class analytics_DesktopAnalytics{reportLocale(){if(!h.V)return;const e=Object(h.ob)();e&&Object(p.a)().track("SYSTEM_LOCALE",e)}reportCrash(){if(!h.V)return;const e=Object(h.kb)();e&&Object(p.a)().track("DESKTOP_CRASH",e)}reportHang(){if(!h.V)return;const e=Object(h.mb)();e&&Object(p.a)().track("DESKTOP_HANG",e)}reportDisplays(){if(!h.V)return;const e=Object(h.y)();if(!e||!e.displays||!e.windowFrame)return;const t=e.displays,a=e.windowFrame,n=a.size,s=a.position;var r=u()(n,2);const i=r[0],o=r[1];var l=u()(s,2);const c=[i||0,o||0,l[0]||0,l[1]||0],d=[];t.forEach(e=>{e&&e.size&&e.size.width&&e.size.height&&(d.push(e.size.width),d.push(e.size.height)),d.push(e.scaleFactor||1)}),Object(p.a)().track("DISPLAY_INFO",{display_resolutions:d,window_frame:c})}},nodrag:new class drag_regions_DesktopDragRegions{updateElements(e){const t=[];return Array.isArray(e)&&e.filter(e=>e&&e.getBoundingClientRect).forEach(e=>t.push(this.updateElement(e))),t}updateElement(e,t){const a=t||e.id||`${e.type}.${e.classList.toString().replace(/ /g,".")}`,n=e.getBoundingClientRect(),s={id:a,width:Math.round(n.width+2),height:Math.round(n.height+2),top:Math.round(n.top),left:Math.round(n.left)},r=Object(m.w)("3.0.0");if(s.width<2&&s.height<2&&r){const e=Object(h.pb)(),t=e.filter(e=>e.id!==s.id);e.length>t.length&&Object(h.Cb)(t)}else Object(h.Cb)(s);return s}}},y,{accessibilitySupportChanged:function(){return Object(N.c)(Object(h.Z)())},canOpenURLInWindow:function(e,t){if(!t)return!1;if(t.startsWith("chrome://"))return!0;if(Object(z.g)(t))return!0;if(Y.some(e=>e instanceof RegExp?e.test(t):t.startsWith(e)))return!0;const a=Object(U.n)(Object(B.d)(e)),n=Object(z.k)(t),s=n.hostname;return Q.some(e=>e instanceof RegExp&&Object(z.h)(s)&&e.test(t)?t.startsWith(`${n.protocol}//${n.hostname}`):e instanceof RegExp?t.startsWith(`${a}`)&&e.test(t):t.startsWith(`${a}${e}`))},closeCall:k.a,focusNextWorkspace:$.focusNextWorkspace,focusPreviousWorkspace:$.focusPreviousWorkspace,getCurrentUserId:A.d,getCurrentUserName:function(e){return Object(F.b)(e).name},getEnterpriseId:L.a,getSelectedInputText:function(){const e=document.activeElement,t=Object(E.b)(e);return Object(E.d)(e,t.start,t.length)},getThemeValues:function(e){try{const a=JSON.parse(Object(M.k)(e,"sidebar_theme_custom_values"));return Object(K.b)(e)?s()({},a,Object(K.a)(a)):a}catch(t){return H.a}},getTokenFromBootData:A.j,getUserPref:M.k,getWebappVersionUid:A.k,handleDeepLinkWithArgs:f.g,handleDeepLinkFromDesktop:j.b,isOnBetaReleaseChannel:function(){return!1},maybeTickleMS:b.a,notificationActivated:function(e,t,a,n){X.info("DESKTOP","notificationActivated",{channelId:t,messageTs:a,threadTs:n}),e(Object(c.a)({channelId:t,messageTs:a,threadTs:n}))},notificationClicked:c.a,openDialog:function(e,t,a){switch(a){case"prefs":e(Object(I.a)());break;case"shortcuts":e(Object(S.h)());break;default:X.warn(`openDialog failed, unrecognized dialog: ${a}`)}},openFromCmdF:T.b,recentMessagesFromCurrentChannel:function(e){const t=Object(x.a)(e);let a=[];return t&&(a=Object(i.a)(Object(r.a)(Object(D.b)(e,t)),50),Object(m.q)()||Object(m.w)("3.3.0")||(a=a.map(e=>e.subtype?e:Object(o.a)(e,"subtype")))),{user_id:Object(A.d)(e),msgs:a}},reload:V.b,replyToNotification:function(...e){let t,a,n;return 4===e.length?(t=e[0],a=e[1],n=e[3]):(t=e[0],a=e[1],n=e[2]),Object(w.a)({channelId:t,text:a,replyToTs:n})},setCurrentMemberPresence:P.g,setFocusedWorkspace:$.setFocusedWorkspace,ssbChromeClicked:l.a,systemTextSettingsChanged:function(){Object(G.a)({bustCache:!0})},teamSelectionChanged:function(e,t){Object(v.b)(),Object(g.b)(),C(),e(Object(R.s)(t))},track:q.d,updateDownloadsView:_.b,updateState:R.v})},zbnt:function(e,t,a){},zoXK:function(e,t,a){},ztz9:function(e,t,a){},zzVd:function(e,t,a){}}]);